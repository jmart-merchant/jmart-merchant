function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Yj9t:function(t,e,n){"use strict";n.r(e);var i,r=n("ofXK"),a=n("tyNb"),s=n("3Pt+"),o=n("tmjD"),c=n("PCNd"),u=n("mrSG"),h=n("quSY"),l=n("lJxs"),b=n("p6Hd"),d=n("fXoL"),p=n("qXBG"),m=n("7foZ"),v=n("VO+5"),f=n("7/bn"),g=n("ZF+8"),T=n("iQ9M"),k=n("mR7B"),E=n("VnnJ"),R=n("sYmb"),y=n("3MRA"),S=n("ZVDf"),C=n("yy4r"),A=n("M6pS"),I=n("zdqJ"),O=["phoneInput"],w=["passwordInput"],V=["registerButton"],L=((i=function(){function t(e,n,i,r,a,o){var c=this;_classCallCheck(this,t),this.maskedService=e,this.maskPipe=n,this.tourService=i,this.route=r,this.companyService=a,this.translateService=o,this.isSubmitted=!1,this.isPhoneSubmitted=!1,this.PHONE=localStorage.getItem("phone")?localStorage.getItem("phone"):"",this.PASSWORD="",this.passwordRegExp=/[^ ]/,this.passwordPasteRegExp=/[ ]/,this.countryCode={code:"+7",country:this.translateService.instant("COUNTRIES.".concat(T.b.KAZAKHSTAN)),id:T.b.KAZAKHSTAN},this.submitted=new d.n,this.subscription=new h.a,this.isFromAtf=!1,this.isTourShown=JSON.parse(localStorage.getItem("isLoginStepShown"))||!1;var u=this.route.queryParams.subscribe((function(t){c.queryParams=t,c.isFromAtf=c.companyService.isFromAtf(t),c.startLoginTour()}));this.loginForm=new s.k({prefix:new s.h(this.countryCode.code,s.H.required),phone:new s.h(this.PHONE,s.H.required),password:new s.h(this.PASSWORD,s.H.required)});var l=this.loginForm.valueChanges.subscribe((function(t){c.isSubmitted=!1,c.isPhoneSubmitted=!1}));this.subscription.add(u),this.subscription.add(l)}return _createClass(t,[{key:"triggerErrorAnimation",value:function(){this.passwordInput.triggerHelperAnimation()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.loginForm.controls.phone.value?this.passwordInput.focus():this.phoneInput.focus(),this.startLoginTour()}},{key:"ngOnChanges",value:function(t){var e;(null===(e=t.passwordError)||void 0===e?void 0:e.currentValue)&&(this.passwordError=t.passwordError.currentValue)}},{key:"onTabPress",value:function(t){t.preventDefault(),this.isPhoneSubmitted=!0,this.f.phone.valid&&this.passwordInput.focus()}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isSubmitted=!0,!this.loginForm.invalid){t.next=2;break}return t.abrupt("return",void(this.loginForm.controls.phone.errors?this.loginError="ERRORS.NOT_ENOUGH_SYMBOLS":this.loginForm.controls.password.errors&&(this.passwordError="ERRORS.ENTER_PASSWORD")));case 2:e="".concat(this.countryCode.code).concat(this.maskedService.getUnmaskedPhone(this.f.phone.value)),this.submitted.emit({phone:e,password:this.f.password.value,countryCode:this.countryCode});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"startLoginTour",value:function(){var t=this;this.isTourShown||(this.isTourShown=!0,localStorage.setItem("isLoginStepShown",JSON.stringify(!0)),setTimeout((function(){t.tourService.startTour(g.e.AUTH,{skipAuthorization:!0})}),0))}},{key:"onCountrySelected",value:function(t){this.countryCode=t}},{key:"f",get:function(){return this.loginForm.controls}}]),t}()).\u0275fac=function(t){return new(t||i)(d.Qb(k.a),d.Qb(o.b),d.Qb(g.g),d.Qb(a.a),d.Qb(E.a),d.Qb(R.e))},i.\u0275cmp=d.Kb({type:i,selectors:[["j-login-phone"]],viewQuery:function(t,e){var n;1&t&&(d.Vc(O,!0),d.Vc(w,!0),d.Vc(V,!0)),2&t&&(d.Bc(n=d.jc())&&(e.phoneInput=n.first),d.Bc(n=d.jc())&&(e.passwordInput=n.first),d.Bc(n=d.jc())&&(e.registerButton=n.first))},inputs:{isLoading:"isLoading",phone:"phone",passwordError:"passwordError",loginError:"loginError",prefix:"prefix"},outputs:{submitted:"submitted"},features:[d.yb()],decls:21,vars:21,consts:[["translate","",1,"light","mb-3","mt-0"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"phone-input"],[3,"formControl","countryCode","countrySelected","keydown.Tab"],["phonePrefixInput",""],[3,"formControl","hasError","errorText","countryCode","keydown.Tab"],["phoneInput",""],[3,"regexStr","pasteRegexStr","hasCapsLockCheck","hasCyrillicCheck","isAuth","formControl","hasError","errorText"],["passwordInput",""],[1,"auth-submit"],[1,"auth-submit__button"],["translate","","type","submit",1,"btn","btn-static","btn-primary","btn-lg",3,"jLoading","disabled"],["translate","","routerLink","/auth/register","queryParamsHandling","merge","jTour","AUTH.REGISTER","jTourPosition","right",1,"btn","btn-static","btn-link",3,"disabled"]],template:function(t,e){1&t&&(d.Wb(0,"article"),d.Wb(1,"h3",0),d.Qc(2,"AUTH.LOGIN_TITLE"),d.Vb(),d.Wb(3,"p"),d.Qc(4),d.mc(5,"translate"),d.Vb(),d.Vb(),d.Wb(6,"form",1),d.ic("ngSubmit",(function(t){return e.onSubmit()})),d.Wb(7,"div",2),d.Wb(8,"j-phone-prefix-input",3,4),d.ic("countrySelected",(function(t){return e.onCountrySelected(t)}))("keydown.Tab",(function(t){return e.onTabPress(t)})),d.Vb(),d.Wb(10,"j-phone-input",5,6),d.ic("keydown.Tab",(function(t){return e.onTabPress(t)})),d.Vb(),d.Vb(),d.Rb(12,"j-password-input",7,8),d.Wb(14,"div",9),d.Wb(15,"div",10),d.Wb(16,"button",11),d.Qc(17,"AUTH.LOGIN"),d.Vb(),d.Vb(),d.Wb(18,"div",10),d.Wb(19,"button",12),d.Qc(20,"AUTH.REGISTER"),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(4),d.Rc(d.nc(5,19,e.isFromAtf?"AUTH.LOGIN_SUBTITLE_ATF":"AUTH.LOGIN_SUBTITLE")),d.Ab(2),d.rc("formGroup",e.loginForm),d.Ab(2),d.rc("formControl",e.f.prefix)("countryCode",e.countryCode),d.Ab(2),d.rc("formControl",e.f.phone)("hasError",e.loginError||e.f.phone.errors&&(e.isSubmitted||e.isPhoneSubmitted))("errorText",e.loginError)("countryCode",e.countryCode),d.Ab(2),d.rc("regexStr",e.passwordRegExp)("pasteRegexStr",e.passwordPasteRegExp)("hasCapsLockCheck",!0)("hasCyrillicCheck",!0)("isAuth",!e.isLoading)("formControl",e.f.password)("hasError",e.passwordError||e.isSubmitted&&e.f.password.errors)("errorText",e.passwordError),d.Ab(4),d.rc("jLoading",e.isLoading)("disabled",e.isLoading),d.Ab(3),d.rc("disabled",e.isLoading))},directives:[R.a,s.J,s.u,s.l,y.a,s.t,s.i,S.a,C.a,A.a,a.d,I.a],pipes:[R.d],styles:[".phone-input[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}j-phone-input[_ngcontent-%COMP%]{width:-moz-available;width:-webkit-fill-available;width:stretch}"]}),i),N=n("aF9I"),_=n("yZrb"),D=n("2FF4"),P=n("Kcpt"),W=n("4zJ+");function j(t,e){if(1&t){var n=d.Xb();d.Wb(0,"a",3),d.ic("click",(function(t){return d.Fc(n),d.lc().navigateToPhone(t)})),d.Rb(1,"j-icon",4),d.Wb(2,"strong",5),d.Qc(3,"SHARED.BACK"),d.Vb(),d.Vb()}2&t&&(d.Ab(1),d.rc("isStroke",!0))}function x(t,e){1&t&&(d.Wb(0,"div",6),d.Rb(1,"j-animated-loading"),d.Vb())}var H,Q=((H=function(){function t(){_classCallCheck(this,t),this.isReady=!1,this.submitted=new d.n,this.closed=new d.n,this.headerParams={smsHeader:_.c.AUTHORIZATION}}return _createClass(t,[{key:"onSmsLoaded",value:function(){this.isReady=!0}},{key:"onSubmit",value:function(t){this.submitted.emit(t)}},{key:"navigateToPhone",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=e)||void 0===t||t.preventDefault(),this.closed.emit()}}]),t}()).\u0275fac=function(t){return new(t||H)},H.\u0275cmp=d.Kb({type:H,selectors:[["j-login-sms"]],inputs:{isLoading:"isLoading",phone:"phone",countryCode:"countryCode"},outputs:{submitted:"submitted",closed:"closed"},decls:3,vars:5,consts:[["href","#","class","j-link",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["href","#",1,"j-link",3,"click"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],[1,"spinner-wrap"]],template:function(t,e){1&t&&(d.Oc(0,j,4,1,"a",0),d.Wb(1,"j-sms",1),d.ic("loaded",(function(t){return e.onSmsLoaded()}))("submitted",(function(t){return e.onSubmit(t)})),d.Vb(),d.Oc(2,x,2,0,"div",2)),2&t&&(d.rc("ngIf",e.isReady),d.Ab(1),d.rc("phone",e.phone)("countryCode",e.countryCode)("headers",e.headerParams),d.Ab(1),d.rc("ngIf",!e.isReady))},directives:[r.u,D.a,P.a,R.a,W.a],styles:[".spinner-wrap[_ngcontent-%COMP%]{min-height:280px;position:relative}"]}),H),U=["loginPhone"];function M(t,e){if(1&t){var n=d.Xb();d.Wb(0,"j-login-sms",13),d.ic("closed",(function(t){return d.Fc(n),d.lc().onSmsClose()}))("submitted",(function(t){return d.Fc(n),d.lc().onSmsSubmit(t)})),d.Vb()}if(2&t){var i=d.lc();d.rc("phone",i.phone)("countryCode",i.countryCode)("isLoading",i.isLoading)}}function F(t,e){1&t&&(d.Wb(0,"div",14),d.Rb(1,"j-animated-loading"),d.Vb())}var G,K,B,q,X,J,Z,z=function(t){return t.PHONE="phone",t.SMS="sms",t.LOADING="loading",t}({}),Y=((G=function(){function t(e,n,i,r,a){var s=this;_classCallCheck(this,t),this.auth=e,this.tokenService=n,this.route=i,this.router=r,this.notifierService=a,this.isLoading=!1,this.steps=z,this.currentStep=this.steps.PHONE,this.phoneError="",this.subscription=new h.a,this.subscription.add(this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){t.phone&&(s.phone=t.phone),t.error&&(s.phoneError=t.error)})))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSmsClose",value:function(){this.navigateToPhone(),this.phoneError=""}},{key:"onPhoneSubmit",value:function(t){this.loginForm=t,this.phone=this.loginForm.phone,this.countryCode=this.loginForm.countryCode;try{var e=this.tokenService.getDeviceToken(this.loginForm.password);localStorage.setItem("countryCode",JSON.stringify(this.countryCode)),e?this.login():this.navigateToSms()}catch(n){this.navigateToSms()}}},{key:"onSmsSubmit",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.auth.setSmsToken(t),e.prev=1,e.next=4,this.auth.requestDevice(this.phone);case 4:n=e.sent,this.tokenService.setDeviceToken(n.signature,this.loginForm.password),this.login(),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=(this.navigateToPhone(),e.t0.code),e.next=e.t1===b.b.DEVICE_TOKEN_INVALID?13:e.t1===b.b.RESOURCE_NOT_FOUND?13:e.t1===b.b.AUTHORIZATION_ERROR?13:e.t1===b.b.INVALID_GRANT?13:e.t1===b.b.USER_BLOCKED?15:e.t1===b.b.RESOURCE_BLOCKED?15:17;break;case 13:return this.phoneError="ERRORS.WRONG_CREDENTIALS",e.abrupt("break",18);case 15:return this.phoneError="ERRORS.ACCOUNT_BLOCKED",e.abrupt("break",18);case 17:this.phoneError=e.t0.description;case 18:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"login",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,this.phoneError="",t.prev=1,t.next=4,this.auth.login(this.loginForm.phone,this.loginForm.password);case 4:this.router.navigateByUrl("/"),this.notifierService.hideAll(),t.next=25;break;case 8:if(t.prev=8,t.t0=t.catch(1),this.navigateToPhone(),!t.t0.status){t.next=23;break}t.t1=t.t0.code,t.next=t.t1===b.b.RESOURCE_NOT_FOUND?14:t.t1===b.b.AUTHORIZATION_ERROR?14:t.t1===b.b.INVALID_GRANT?14:t.t1===b.b.RESOURCE_BLOCKED?16:t.t1===b.b.DEVICE_NOT_AUTHORIZED?18:t.t1===b.b.DEVICE_TOKEN_INVALID?18:t.t1===b.b.TOKEN_EXPIRED?18:20;break;case 14:return this.phoneError="ERRORS.WRONG_CREDENTIALS",t.abrupt("break",21);case 16:return this.tokenService.clearDeviceToken(),this.phoneError="ERRORS.ACCOUNT_BLOCKED",t.abrupt("break",21);case 18:return this.navigateToSms(),t.abrupt("break",21);case 20:this.phoneError=t.t0.description;case 21:t.next=24;break;case 23:this.phoneError="ERRORS.API_UNAVAILABLE";case 24:this.loginPhone.triggerErrorAnimation(),this.isLoading=!1;case 25:case"end":return t.stop()}}),t,this,[[1,8]])})))}},{key:"navigateToSms",value:function(){this.currentStep=z.SMS}},{key:"navigateToPhone",value:function(){this.currentStep=z.PHONE}}]),t}()).\u0275fac=function(t){return new(t||G)(d.Qb(p.a),d.Qb(m.a),d.Qb(a.a),d.Qb(a.c),d.Qb(v.c))},G.\u0275cmp=d.Kb({type:G,selectors:[["j-login"]],viewQuery:function(t,e){var n;1&t&&d.Vc(U,!0),2&t&&d.Bc(n=d.jc())&&(e.loginPhone=n.first)},decls:13,vars:7,consts:[[1,"auth-wrap"],[1,"d-sm-none",3,"isUserShown"],[1,"login-wrap"],[1,"login"],[1,"mb-7","d-none","d-sm-flex","justify-content-between"],["src","./assets/img/logo.svg","alt","Jusan bank"],["src","./assets/img/v2/atf.svg","alt","ATF Business"],[1,"login-steps"],[3,"hidden","phone","isLoading","passwordError","submitted"],["loginPhone",""],[3,"phone","countryCode","isLoading","closed","submitted",4,"ngIf"],["class","spinner-wrap",4,"ngIf"],["langClassName","d-block","copyrightClassName",""],[3,"phone","countryCode","isLoading","closed","submitted"],[1,"spinner-wrap"]],template:function(t,e){1&t&&(d.Wb(0,"section",0),d.Rb(1,"j-aside",1),d.Wb(2,"div",2),d.Wb(3,"div",3),d.Wb(4,"div",4),d.Rb(5,"img",5),d.Rb(6,"img",6),d.Vb(),d.Wb(7,"section",7),d.Wb(8,"j-login-phone",8,9),d.ic("submitted",(function(t){return e.onPhoneSubmit(t)})),d.Vb(),d.Oc(10,M,1,3,"j-login-sms",10),d.Oc(11,F,2,0,"div",11),d.Vb(),d.Vb(),d.Vb(),d.Rb(12,"j-footer",12),d.Vb()),2&t&&(d.Ab(1),d.rc("isUserShown",!1),d.Ab(7),d.rc("hidden",e.currentStep!=e.steps.PHONE)("phone",e.phone)("isLoading",e.isLoading)("passwordError",e.phoneError),d.Ab(2),d.rc("ngIf",e.currentStep==e.steps.SMS),d.Ab(1),d.rc("ngIf",e.currentStep==e.steps.LOADING))},directives:[f.a,L,r.u,N.a,Q,W.a],styles:[".login[_ngcontent-%COMP%]{background:#f6f7f8;width:100%;padding:1rem}@media(min-width:670px){.login[_ngcontent-%COMP%]{border-radius:2.5rem;padding:3.5rem}}.login-wrap[_ngcontent-%COMP%]{max-width:546px;margin:auto;width:100%;padding-top:1.5rem;padding-bottom:1.5rem}@media(min-width:1920px){.login-wrap[_ngcontent-%COMP%]{max-width:600px}}.spinner-wrap[_ngcontent-%COMP%]{min-height:280px;position:relative}"]}),G),$=n("paXB"),tt=n("Zgqj"),et=n("EiG8"),nt=((K=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||K)},K.\u0275cmp=d.Kb({type:K,selectors:[["j-register"]],decls:8,vars:2,consts:[[3,"isUserShown"],[3,"isCentered"],[1,"row"],[1,"col-sm-10","col-md-7","offset-sm-1","col-lg-5","offset-lg-1","col-xl-4","offset-xl-1"],[1,"auth-form"]],template:function(t,e){1&t&&(d.Wb(0,"j-layout-home"),d.Wb(1,"j-aside",0),d.Rb(2,"j-nav-auth"),d.Vb(),d.Wb(3,"j-main",1),d.Wb(4,"div",2),d.Wb(5,"div",3),d.Wb(6,"div",4),d.Rb(7,"router-outlet"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(1),d.rc("isUserShown",!1),d.Ab(2),d.rc("isCentered",!0))},directives:[$.a,f.a,tt.a,et.a,a.h],styles:[""]}),K),it=n("1kSV"),rt=((Z=function(){function t(e){_classCallCheck(this,t),this.modal=e}return _createClass(t,[{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(){this.modal.close()}}]),t}()).\u0275fac=function(t){return new(t||Z)(d.Qb(it.a))},Z.\u0275cmp=d.Kb({type:Z,selectors:[["j-can-register"]],decls:14,vars:3,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"m-0"],[1,"modal-footer","j-modal-footer"],["translate","","type","button",1,"btn","btn-static","btn-primary",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.dismissModal()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h3",4),d.Qc(6,"AUTH.CAN_REGISTER.TITLE"),d.Vb(),d.Wb(7,"p",5),d.Qc(8,"AUTH.CAN_REGISTER.DESCRIPTION"),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"button",7),d.ic("click",(function(t){return e.closeModal()})),d.Qc(11,"AUTH.REGISTER"),d.Vb(),d.Wb(12,"button",8),d.ic("click",(function(t){return e.dismissModal()})),d.Qc(13,"SHARED.CANCEL"),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("alt",d.nc(3,1,"SHARED.CLOSE")))},directives:[R.a],pipes:[R.d],styles:[""]}),Z),at=((J=function(){function t(e){_classCallCheck(this,t),this.modal=e}return _createClass(t,[{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(t){this.modal.close(t)}}]),t}()).\u0275fac=function(t){return new(t||J)(d.Qb(it.a))},J.\u0275cmp=d.Kb({type:J,selectors:[["j-can-restore"]],decls:12,vars:3,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"m-0"],[1,"modal-footer","j-modal-footer"],["translate","","type","button",1,"btn","btn-static","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.dismissModal()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h3",4),d.Qc(6,"AUTH.CAN_RESTORE.TITLE"),d.Vb(),d.Wb(7,"p",5),d.Qc(8,"AUTH.CAN_RESTORE.DESCRIPTION"),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"button",7),d.ic("click",(function(t){return e.closeModal("login")})),d.Qc(11,"AUTH.LOGIN"),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("alt",d.nc(3,1,"SHARED.CLOSE")))},directives:[R.a],pipes:[R.d],styles:[""]}),J),st=((X=function(){function t(e){_classCallCheck(this,t),this.modal=e}return _createClass(t,[{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(t){this.modal.close(t)}}]),t}()).\u0275fac=function(t){return new(t||X)(d.Qb(it.a))},X.\u0275cmp=d.Kb({type:X,selectors:[["j-contact-modal"]],decls:14,vars:3,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"m-0"],[1,"modal-footer","j-modal-footer"],["translate","","href","https://jysanbank.kz/ru/page/contacts","target","_blank",1,"btn","btn-static","btn-primary"],["translate","","type","button",1,"btn","btn-link","d-none","d-sm-block",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.dismissModal()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h3",4),d.Qc(6,"AUTH.CONTACT.TITLE"),d.Vb(),d.Wb(7,"p",5),d.Qc(8,"AUTH.CONTACT.DESCRIPTION "),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"a",7),d.Qc(11,"AUTH.CONTACT.LINK"),d.Vb(),d.Wb(12,"button",8),d.ic("click",(function(t){return e.dismissModal()})),d.Qc(13,"SHARED.CANCEL"),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("alt",d.nc(3,1,"SHARED.CLOSE")))},directives:[R.a],pipes:[R.d],styles:[""]}),X),ot=((q=function(){function t(e){_classCallCheck(this,t),this.modal=e}return _createClass(t,[{key:"closeModal",value:function(){this.modal.close()}}]),t}()).\u0275fac=function(t){return new(t||q)(d.Qb(it.a))},q.\u0275cmp=d.Kb({type:q,selectors:[["j-expired"]],decls:12,vars:3,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"m-0"],[1,"modal-footer","j-modal-footer"],["translate","","type","button",1,"btn","btn-static","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.closeModal()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h3",4),d.Qc(6,"AUTH.EXPIRED.TITLE"),d.Vb(),d.Wb(7,"p",5),d.Qc(8,"AUTH.EXPIRED.DESCRIPTION"),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"button",7),d.ic("click",(function(t){return e.closeModal()})),d.Qc(11,"SHARED.CLOSE"),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("alt",d.nc(3,1,"SHARED.CLOSE")))},directives:[R.a],pipes:[R.d],styles:[""]}),q),ct=((B=function(){function t(e){_classCallCheck(this,t),this.modal=e}return _createClass(t,[{key:"closeModal",value:function(){this.modal.close()}}]),t}()).\u0275fac=function(t){return new(t||B)(d.Qb(it.a))},B.\u0275cmp=d.Kb({type:B,selectors:[["j-invalid-phone"]],decls:12,vars:3,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"m-0"],[1,"modal-footer","j-modal-footer"],["translate","","type","button",1,"btn","btn-static","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.closeModal()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h3",4),d.Qc(6,"AUTH.INVALID_PHONE.TITLE"),d.Vb(),d.Wb(7,"p",5),d.Qc(8,"AUTH.INVALID_PHONE.DESCRIPTION"),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"button",7),d.ic("click",(function(t){return e.closeModal()})),d.Qc(11,"SHARED.OK"),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("alt",d.nc(3,1,"SHARED.CLOSE")))},directives:[R.a],pipes:[R.d],styles:[""]}),B),ut=n("bsP8");function ht(t){var e=12==t.value.length;if(e)return null;var n={};return e||(n.length=!0),{iin:n}}var lt,bt,dt,pt=n("tkTF"),mt=["iinInput"],vt=((lt=function(){function t(e){var n=this;_classCallCheck(this,t),this.authService=e,this.IIN="",this.submitted=new d.n,this.subs=new h.a,this.openIinForm=new s.k({iin:new s.h(this.IIN,[s.H.required,ht])});var i=this.openIinForm.valueChanges.subscribe((function(t){n.isSubmitted=!1,n.errorText=""}));this.subs.add(i)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.iinInput.focus()}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isSubmitted=!0,this.openIinForm.valid?(this.isLoading=!0,this.submitted.emit({iin:this.iin})):this.validateIin(this.f.iin.errors);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validateIin",value:function(t){t&&t.iin&&(t.iin.length?this.errorText="ERRORS.IIN_LENGTH":t.iin.date&&(this.errorText="ERRORS.IIN_DATE"))}},{key:"f",get:function(){return this.openIinForm.controls}},{key:"iin",get:function(){return this.f.iin.value}}]),t}()).\u0275fac=function(t){return new(t||lt)(d.Qb(p.a))},lt.\u0275cmp=d.Kb({type:lt,selectors:[["j-auth-iin"]],viewQuery:function(t,e){var n;1&t&&d.Vc(mt,!0),2&t&&d.Bc(n=d.jc())&&(e.iinInput=n.first)},outputs:{submitted:"submitted"},decls:9,vars:6,consts:[[3,"formGroup"],[1,"form-group"],[3,"formControl","hasError","errorText"],["iinInput",""],[1,"auth-submit"],["translate","","type","submit",1,"btn","btn-static","btn-primary","btn-lg",3,"jLoading","disabled","click"],["translate","","href","#","routerLink","/auth/login",1,"btn","btn-static","btn-link"]],template:function(t,e){1&t&&(d.Wb(0,"form",0),d.Wb(1,"div",1),d.Rb(2,"j-iin-input",2,3),d.Vb(),d.Wb(4,"div",4),d.Wb(5,"button",5),d.ic("click",(function(t){return e.onSubmit()})),d.Qc(6,"SHARED.CONTINUE"),d.Vb(),d.Wb(7,"a",6),d.Qc(8,"AUTH.LOGIN"),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.rc("formGroup",e.openIinForm),d.Ab(2),d.rc("formControl",e.f.iin)("hasError",e.f.iin.errors&&e.isSubmitted)("errorText",e.errorText),d.Ab(3),d.rc("jLoading",e.isLoading)("disabled",e.isLoading))},directives:[s.J,s.u,s.l,pt.a,s.t,s.i,R.a,A.a,a.f],styles:[""]}),lt),ft={backdropClass:"backdrop_light",windowClass:"modal_light modal-auth",size:"md",centered:!0},gt=((bt=function(){function t(e,n,i,r,a){var s=this;_classCallCheck(this,t),this.router=e,this.route=n,this.navService=i,this.modalService=r,this.companyService=a,this.subs=new h.a,this.isFromAtf=!1,this.navService.triggerRegisterError("iin",!1),this.navService.triggerRegisterError("no-account",!1),this.navService.triggerRegisterError("no-email",!1),this.navService.triggerRegisterError("user-blocked",!1),this.navService.triggerRegisterError("phone-not-match",!1);var o=this.route.data.subscribe((function(t){s.title=t.title,s.authType=t.action})),c=this.route.queryParams.subscribe((function(t){s.isFromAtf=s.companyService.isFromAtf(t)}));this.subs.add(o),this.subs.add(c)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"onSubmit",value:function(t){this.navigateToPhone(t.iin)}},{key:"handleCheckIin",value:function(t,e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t,n.next=n.t0===T.d.BLOCKED?3:n.t0===T.d.DOES_NOT_EXIST?5:n.t0===T.d.INCORRECT_DATA?7:n.t0===T.d.INVALID_DATA?7:n.t0===T.d.ALREADY_REGISTERED?9:n.t0===T.d.CAN_REGISTER?11:12;break;case 3:return this.navigateToUserBlocked(),n.abrupt("break",12);case 5:return this.navigateToNoAccount(),n.abrupt("break",12);case 7:return this.navigateToNoEmail(),n.abrupt("break",12);case 9:return this.handleAlreadyRegistered(e),n.abrupt("break",12);case 11:this.handleCanRegister(e);case 12:case"end":return n.stop()}}),n,this)})))}},{key:"handleAlreadyRegistered",value:function(t){switch(this.authType){case T.a.RESTORE:this.navigateToPhone(t);break;case T.a.REGISTER:this.showCanRestoreModal(t)}}},{key:"showCanRegisterModal",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.modalService.open(rt,ft),e.prev=1,e.next=4,n.result;case 4:this.navigateToRegisterPhone(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})))}},{key:"showCanRestoreModal",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.modalService.open(at,ft),e.prev=1,e.next=4,n.result;case 4:"restore"==(i=e.sent)?this.navigateToRestorePhone(t):"login"==i&&this.navigateToLogin(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"handleCanRegister",value:function(t){switch(this.authType){case T.a.REGISTER:this.navigateToPhone(t);break;case T.a.RESTORE:this.showCanRegisterModal(t)}}},{key:"navigateToPhone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.router.navigate(["".concat(e,"phone")],{relativeTo:this.route.parent,state:{iin:t}})}},{key:"navigateToRegisterPhone",value:function(t){this.navigateToPhone(t,"../register/")}},{key:"navigateToRestorePhone",value:function(t){this.navigateToPhone(t,"../restore/")}},{key:"navigateToLogin",value:function(){this.router.navigate(["../login"],{relativeTo:this.route.parent})}},{key:"navigateToNoAccount",value:function(){this.router.navigate(["no-account"],{relativeTo:this.route.parent})}},{key:"navigateToNoEmail",value:function(){this.router.navigate(["no-email"],{relativeTo:this.route.parent})}},{key:"navigateToUserBlocked",value:function(){this.router.navigate(["user-blocked"],{relativeTo:this.route.parent})}}]),t}()).\u0275fac=function(t){return new(t||bt)(d.Qb(a.c),d.Qb(a.a),d.Qb(ut.a),d.Qb(it.q),d.Qb(E.a))},bt.\u0275cmp=d.Kb({type:bt,selectors:[["j-register-iin"]],decls:7,vars:4,consts:[["translate","",1,"auth-heading","light","mb-3","mt-0"],[3,"submitted"]],template:function(t,e){1&t&&(d.Wb(0,"article"),d.Wb(1,"h3",0),d.Qc(2),d.Vb(),d.Wb(3,"p"),d.Qc(4),d.mc(5,"translate"),d.Vb(),d.Vb(),d.Wb(6,"j-auth-iin",1),d.ic("submitted",(function(t){return e.onSubmit(t)})),d.Vb()),2&t&&(d.Ab(2),d.Rc(e.title),d.Ab(2),d.Rc(d.nc(5,2,e.isFromAtf?"AUTH.REGISTER_SUBTITLE_ATF":"AUTH.REGISTER_SUBTITLE")))},directives:[R.a,vt],pipes:[R.d],styles:[""]}),bt),Tt=n("S09V"),kt=["phoneInput"],Et=((dt=function(){function t(e,n,i,r,a,o,c,u){var b=this;_classCallCheck(this,t),this.router=e,this.route=n,this.maskedService=i,this.maskPipe=r,this.navService=a,this.authService=o,this.modalService=c,this.translateService=u,this.PHONE="",this.hasNoAccount=!1,this.countryCode={code:"+7",country:this.translateService.instant("COUNTRIES.".concat(T.b.KAZAKHSTAN)),id:T.b.KAZAKHSTAN},this.subs=new h.a,this.registerPhoneForm=new s.k({phone:new s.h(this.PHONE,s.H.required)}),this.navService.triggerRegisterError("phone",!1),this.navService.triggerRegisterError("no-account",!1),this.navService.triggerRegisterError("no-email",!1),this.navService.triggerRegisterError("user-blocked",!1),this.navService.triggerRegisterError("phone-not-match",!1);var d=this.registerPhoneForm.valueChanges.subscribe((function(t){b.isSubmitted=!1})),p=this.route.data.subscribe((function(t){b.title=t.title,b.authType=t.action})),m=this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){if(t.iin){b.iin=t.iin;var e=b.maskPipe.transform(t.phone,Tt.a.phone.mask);e&&b.f.phone.setValue("".concat(e))}else b.navigateToIin()}));this.subs.add(d),this.subs.add(p),this.subs.add(m)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"onEnter",value:function(){this.phoneInput.blur(),this.onSubmit()}},{key:"focus",value:function(){this.phoneInput.focus()}},{key:"navigateFromModal",value:function(t){this.router.navigate(["/auth/".concat(t,"/sms")],{state:{phone:this.phone,iin:this.iin}})}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isSubmitted=!0,!this.registerPhoneForm.valid){t.next=23;break}return this.isLoading=!0,t.prev=2,this.phone="".concat(this.countryCode.code).concat(this.maskedService.getUnmaskedPhone(this.f.phone.value)),t.next=6,this.authService.checkPhone(this.phone);case 6:this.navigateToSms(),t.next=18;break;case 9:t.prev=9,t.t0=t.catch(2),t.t1=t.t0.code,t.next=t.t1===b.b.INVALID_PHONE_FORMAT?14:17;break;case 14:return t.next=16,this.showInvalidPhoneFormatModal();case 16:return t.abrupt("break",18);case 17:this.errorText=t.t0.description;case 18:return t.prev=18,this.isLoading=!1,t.finish(18);case 21:t.next=24;break;case 23:this.errorText="\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432";case 24:case"end":return t.stop()}}),t,this,[[2,9,18,21]])})))}},{key:"showInvalidPhoneFormatModal",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.modalService.open(ct,{centered:!0}),t.prev=1,t.next=4,e.result;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,this.phoneInput.focus(),t.finish(8);case 11:case"end":return t.stop()}}),t,this,[[1,6,8,11]])})))}},{key:"navigateToSms",value:function(){this.router.navigate(["sms"],{relativeTo:this.route.parent,state:{phone:this.phone,iin:this.iin,countryCode:this.countryCode}})}},{key:"navigateToIin",value:function(){this.router.navigate(["iin"],{relativeTo:this.route.parent})}},{key:"onCountrySelected",value:function(t){this.countryCode=t}},{key:"f",get:function(){return this.registerPhoneForm.controls}}]),t}()).\u0275fac=function(t){return new(t||dt)(d.Qb(a.c),d.Qb(a.a),d.Qb(k.a),d.Qb(o.b),d.Qb(ut.a),d.Qb(p.a),d.Qb(it.q),d.Qb(R.e))},dt.\u0275cmp=d.Kb({type:dt,selectors:[["j-register-phone"]],viewQuery:function(t,e){var n;1&t&&d.Vc(kt,!0),2&t&&d.Bc(n=d.jc())&&(e.phoneInput=n.first)},hostBindings:function(t,e){1&t&&d.ic("keyup.enter",(function(t){return e.onEnter()}))},decls:18,vars:11,consts:[["routerLink","../iin",1,"auth-backlink","j-link"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"auth-heading","light","mb-3","mt-0"],[3,"formGroup"],[1,"phone-block"],[3,"countryCode","countrySelected"],["phonePrefixInput",""],[3,"autofocus","formControl","hasError","errorText","countryCode"],["phoneInput",""],[1,"auth-submit"],["translate","","type","button",1,"btn","btn-static","btn-primary","btn-lg",3,"jLoading","disabled","click"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.IIN"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6),d.Vb(),d.Wb(7,"p",2),d.Qc(8,"AUTH.PHONE.DESCRIPTION"),d.Vb(),d.Vb(),d.Wb(9,"form",4),d.Wb(10,"div",5),d.Wb(11,"j-phone-prefix-input",6,7),d.ic("countrySelected",(function(t){return e.onCountrySelected(t)})),d.Vb(),d.Rb(13,"j-phone-input",8,9),d.Vb(),d.Wb(15,"div",10),d.Wb(16,"button",11),d.ic("click",(function(t){return e.onSubmit()})),d.Qc(17,"SHARED.CONTINUE"),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(1),d.rc("isStroke",!0),d.Ab(5),d.Rc(e.title),d.Ab(3),d.rc("formGroup",e.registerPhoneForm),d.Ab(2),d.rc("countryCode",e.countryCode),d.Ab(2),d.rc("autofocus",!0)("formControl",e.f.phone)("hasError",e.f.phone.errors&&e.isSubmitted)("errorText",e.errorText)("countryCode",e.countryCode),d.Ab(3),d.rc("jLoading",e.isLoading)("disabled",e.isLoading))},directives:[a.f,P.a,R.a,s.J,s.u,s.l,y.a,S.a,s.t,s.i,A.a],styles:[".phone-block[_ngcontent-%COMP%]{display:-webkit-box;display:flex}"]}),dt);function Rt(t,e){if(1&t){var n=d.Xb();d.Wb(0,"a",3),d.ic("click",(function(t){return d.Fc(n),d.lc().navigateToPhone(t)})),d.Rb(1,"j-icon",4),d.Wb(2,"span",5),d.Qc(3,"SHARED.PHONE"),d.Vb(),d.Vb()}2&t&&(d.Ab(1),d.rc("isStroke",!0))}function yt(t,e){if(1&t){var n=d.Xb();d.Wb(0,"j-sms",6),d.ic("submitted",(function(t){return d.Fc(n),d.lc().onSmsSubmit(t)}))("failed",(function(t){return d.Fc(n),d.lc().onSmsFail()}))("loaded",(function(t){return d.Fc(n),d.lc().onFormLoaded()})),d.Vb()}if(2&t){var i=d.lc();d.rc("phone",i.phone)("countryCode",i.countryCode)("params",i.params)("headers",i.headerParams)}}function St(t,e){1&t&&d.Rb(0,"j-animated-loading")}var Ct,At={backdropClass:"backdrop_light",windowClass:"modal_light modal-auth",size:"md",centered:!0},It=((Ct=function(){function t(e,n,i,r){var a=this;_classCallCheck(this,t),this.authService=e,this.route=n,this.router=i,this.modalService=r,this.isFormLoaded=!1,this.subs=new h.a,this.subs.add(this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){a.phone=t.phone,a.countryCode=t.countryCode,a.iin=t.iin,a.params={actionIds:[a.iin]}})));var s=this.route.data.subscribe((function(t){a.authType=t.action,a.headerParams={smsHeader:_.c[a.authType.toUpperCase()]}}));this.subs.add(s)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"onSmsFail",value:function(){this.navigateToPhone()}},{key:"onFormLoaded",value:function(){this.isFormLoaded=!0}},{key:"onSmsSubmit",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.authService.setSmsToken(t),this.checkIinAndPhone();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"navigateToPhone",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=e)||void 0===t||t.preventDefault(),this.router.navigate(["phone"],{relativeTo:this.route.parent,state:{iin:this.iin}})}},{key:"checkIinAndPhone",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.authService.checkIinAndPhone(this.iin,this.phone);case 3:e=t.sent,this.handleIinAndPhoneCheck(e.status),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.navigateToError(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"handleIinAndPhoneCheck",value:function(t){switch(t){case T.c.BLOCKED:this.navigateToUserBlocked();break;case T.c.DOES_NOT_EXIST:this.navigateToNoAccount();break;case T.c.INVALID_DATA:case T.c.INCORRECT_DATA:this.navigateToNoEmail();break;case T.c.DATA_MISMATCH:this.navigateToPhoneNotMatch();break;case T.c.ALREADY_REGISTERED:this.handleAlreadyRegistered();break;case T.c.CAN_REGISTER:this.handleCanRegister()}}},{key:"navigateToError",value:function(t){this.router.navigate(["error"],{relativeTo:this.route.parent,state:{error:t,iin:this.iin}})}},{key:"navigateToUserBlocked",value:function(){this.router.navigate(["user-blocked"],{relativeTo:this.route.parent})}},{key:"navigateToEmail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.router.navigate(["".concat(t,"email")],{relativeTo:this.route.parent,state:{phone:this.phone,iin:this.iin}})}},{key:"navigateToNoAccount",value:function(){this.router.navigate(["no-account"],{relativeTo:this.route.parent})}},{key:"navigateToNoEmail",value:function(){this.router.navigate(["no-email"],{relativeTo:this.route.parent})}},{key:"navigateToPhoneNotMatch",value:function(){this.router.navigate(["phone-not-match"],{relativeTo:this.route.parent,state:{iin:this.iin,phone:this.phone}})}},{key:"handleAlreadyRegistered",value:function(){switch(this.authType){case T.a.RESTORE:this.navigateToEmail();break;case T.a.REGISTER:this.showCanRestoreModal()}}},{key:"showCanRegisterModal",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.modalService.open(rt,At),t.prev=1,t.next=4,e.result;case 4:this.navigateToRegisterEmail(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.navigateToPhone();case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"showCanRestoreModal",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.modalService.open(at,At),t.prev=1,t.next=4,e.result;case 4:"restore"===(n=t.sent)?this.navigateToRestoreEmail():"login"===n&&this.navigateToLogin(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.navigateToPhone();case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))}},{key:"handleCanRegister",value:function(){switch(this.authType){case T.a.REGISTER:this.navigateToEmail();break;case T.a.RESTORE:this.showCanRegisterModal()}}},{key:"navigateToRegisterEmail",value:function(){this.navigateToEmail("../register/")}},{key:"navigateToRestoreEmail",value:function(){this.navigateToEmail("../restore/")}},{key:"navigateToLogin",value:function(){this.router.navigate(["../login"],{relativeTo:this.route.parent})}}]),t}()).\u0275fac=function(t){return new(t||Ct)(d.Qb(p.a),d.Qb(a.a),d.Qb(a.c),d.Qb(it.q))},Ct.\u0275cmp=d.Kb({type:Ct,selectors:[["j-register-sms"]],decls:3,vars:3,consts:[["href","#","class","auth-backlink j-link",3,"click",4,"ngIf"],[3,"phone","countryCode","params","headers","submitted","failed","loaded",4,"ngIf"],[4,"ngIf"],["href","#",1,"auth-backlink","j-link",3,"click"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],[3,"phone","countryCode","params","headers","submitted","failed","loaded"]],template:function(t,e){1&t&&(d.Oc(0,Rt,4,1,"a",0),d.Oc(1,yt,1,4,"j-sms",1),d.Oc(2,St,1,0,"j-animated-loading",2)),2&t&&(d.rc("ngIf",e.isFormLoaded),d.Ab(1),d.rc("ngIf",e.params),d.Ab(1),d.rc("ngIf",!e.isFormLoaded))},directives:[r.u,P.a,R.a,D.a,W.a],styles:[""]}),Ct),Ot=n("TwVa"),wt=n("gN/K"),Vt=n("bSvt"),Lt=["codeInput"];function Nt(t,e){if(1&t){var n=d.Xb();d.Wb(0,"a",14),d.ic("click",(function(t){return d.Fc(n),d.lc().navigateToPhone(t)})),d.Rb(1,"j-icon",15),d.Wb(2,"span",16),d.Qc(3,"SHARED.PHONE"),d.Vb(),d.Vb()}2&t&&(d.Ab(1),d.rc("isStroke",!0))}function _t(t,e){if(1&t){var n=d.Xb();d.Wb(0,"j-sms-error",17),d.ic("codeRequested",(function(t){return d.Fc(n),d.lc().requestEmail()})),d.Vb()}if(2&t){var i=d.lc();d.rc("errorType",i.errorTypes.FORBIDDEN)("isLoading",i.isLoading)("destinationValue",i.email)("timerValue",i.timerValue)("isTimerRunning",i.isTimerRunning)}}function Dt(t,e){if(1&t){var n=d.Xb();d.Wb(0,"j-sms-error",17),d.ic("codeRequested",(function(t){return d.Fc(n),d.lc().requestEmail()})),d.Vb()}if(2&t){var i=d.lc();d.rc("errorType",i.errorTypes.FORBIDDEN)("isLoading",i.isLoading)("destinationValue",i.email)("timerValue",i.blockedTimerValue)("isTimerRunning",i.isBlockedTimerRunning)}}function Pt(t,e){if(1&t){var n=d.Xb();d.Wb(0,"j-sms-error",18),d.ic("codeRequested",(function(t){return d.Fc(n),d.lc().requestEmail()})),d.Vb()}if(2&t){var i=d.lc();d.rc("errorType",i.errorTypes.UNKNOWN)("isLoading",i.isLoading)("destinationValue",i.email)("isTimerRunning",i.isBlockedTimerRunning)("timerValue",i.blockedTimerValue)}}function Wt(t,e){1&t&&d.Rb(0,"j-animated-loading")}var jt,xt,Ht,Qt,Ut,Mt,Ft,Gt,Kt,Bt=((jt=function(){function t(e,n,i,r){var a=this;_classCallCheck(this,t),this.route=e,this.auth=n,this.router=i,this.modalService=r,this.smsCodeLength=Ot.k,this.timerMaxValue=Ot.n,this.expireTimerMaxValue=300,this.errorTypes=Ot.l,this.isReady=!1,this.currentTab=Ot.m.FORM,this.authTabs=Ot.m,this.subs=new h.a,this.emailCodeForm=new s.k({emailCode:new s.h("",s.H.required)});var o=this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){a.phone=t.phone,a.iin=t.iin,a.requestEmail()})),c=this.emailCodeForm.valueChanges.subscribe((function(t){a.isSubmitted=!1,t.emailCode&&t.emailCode.length===a.smsCodeLength&&a.onSubmit()}));this.subs.add(o),this.subs.add(c)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"openContactModal",value:function(){this.modalService.open(st,{centered:!0})}},{key:"setTab",value:function(t){this.currentTab=t}},{key:"requestEmail",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.f.emailCode.setValue(""),this.errorText="",this.hasError=!1,t.prev=1,t.next=4,this.auth.requestEmail(this.phone,this.iin);case 4:e=t.sent,this.setTab(this.authTabs.FORM),this.email=e.email.replace(/\*/gm,"\u2022"),this.codeInput.focus(),t.next=18;break;case 8:t.prev=8,t.t0=t.catch(1),t.t1=t.t0.code,t.next=t.t1===b.b.ARGUMENT_MISSING?13:t.t1===b.b.RESOURCE_BLOCKED?15:17;break;case 13:return this.router.navigate(["phone"],{relativeTo:this.route.parent}),t.abrupt("break",18);case 15:return t.t0.data&&t.t0.data.millisecondsLeft&&this.startBlockedTimer(t.t0.data.millisecondsLeft),this.setTab(this.authTabs.FORBIDDEN_BLOCKED),t.abrupt("break",18);case 17:this.setTab(this.authTabs.ERRORED);case 18:return t.prev=18,this.isReady=!0,t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[1,8,18,21]])})))}},{key:"navigateToPhone",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=e)||void 0===t||t.preventDefault(),this.router.navigate(["phone"],{relativeTo:this.route.parent,state:{iin:this.iin,phone:this.phone}})}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isSubmitted=!0,!this.emailCodeForm.valid){t.next=48;break}return this.isLoading=!0,e=this.f.emailCode.value,t.prev=3,t.next=6,this.auth.submitEmail(e,this.phone,this.iin);case 6:this.router.navigate(["password"],{relativeTo:this.route.parent,state:{phone:this.phone,iin:this.iin}}),t.next=45;break;case 9:t.prev=9,t.t0=t.catch(3),t.t1=(this.hasError=!0,t.t0.code),t.next=t.t1===b.b.ARGUMENT_MISSING?14:t.t1===b.b.RESOURCE_BLOCKED?16:t.t1===b.b.INVALID_CODE?16:t.t1===b.b.FORBIDDEN?29:t.t1===b.b.PHONE_TOKEN_EXPIRED?31:t.t1===b.b.TOKEN_EXPIRED?31:43;break;case 14:return this.router.navigate(["phone"],{relativeTo:this.route.parent}),t.abrupt("break",44);case 16:if(!t.t0.data||!t.t0.data.triesLeft){t.next=27;break}t.t2=(n=t.t0.data.triesLeft,this.errorText="\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434. \u0423 \u0432\u0430\u0441 \u043e\u0441\u0442\u0430\u043b".concat(1===n?"\u0430":"\u043e","\u0441\u044c ").concat(n),n%20),t.next=1===t.t2?20:2===t.t2?22:3===t.t2?22:4===t.t2?22:24;break;case 20:return this.errorText+=" \u043f\u043e\u043f\u044b\u0442\u043a\u0430.",t.abrupt("break",25);case 22:return this.errorText+=" \u043f\u043e\u043f\u044b\u0442\u043a\u0438.",t.abrupt("break",25);case 24:this.errorText+=" \u043f\u043e\u043f\u044b\u0442\u043e\u043a.";case 25:t.next=28;break;case 27:this.startTimer(),this.setTab(this.authTabs.FORBIDDEN);case 28:return t.abrupt("break",44);case 29:return this.startTimer(),this.setTab(this.authTabs.FORBIDDEN),t.abrupt("break",44);case 31:return i=this.modalService.open(ot,{centered:!0}),t.prev=32,t.next=35,i.result;case 35:t.next=39;break;case 37:t.prev=37,t.t3=t.catch(32);case 39:return t.prev=39,this.router.navigate(["iin"],{relativeTo:this.route.parent,state:{iin:this.iin}}),t.finish(39);case 42:return t.abrupt("break",44);case 43:this.errorText=t.t0.description;case 44:this.codeInput.triggerHelperAnimation();case 45:return t.prev=45,this.isLoading=!1,t.finish(45);case 48:case"end":return t.stop()}}),t,this,[[3,9,45,48],[32,37,39,42]])})))}},{key:"startTimer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timerMaxValue;this.isTimerRunning=!0,this.timerValue=e,this.timer=setInterval((function(){t.timerValue--,0===t.timerValue&&t.stopTimer()}),1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.isTimerRunning=!1}},{key:"startBlockedTimer",value:function(t){var e=this;this.blockedTimerValue=Math.ceil(t/1e3),this.isBlockedTimerRunning=!0,this.blockedTimer=setInterval((function(){e.blockedTimerValue--,0===e.blockedTimerValue&&e.stopBlockedTimer()}),1e3)}},{key:"stopBlockedTimer",value:function(){clearInterval(this.blockedTimer),this.isBlockedTimerRunning=!1,this.blockedTimerValue=null}},{key:"f",get:function(){return this.emailCodeForm.controls}}]),t}()).\u0275fac=function(t){return new(t||jt)(d.Qb(a.a),d.Qb(p.a),d.Qb(a.c),d.Qb(it.q))},jt.\u0275cmp=d.Kb({type:jt,selectors:[["j-register-email"]],viewQuery:function(t,e){var n;1&t&&d.Vc(Lt,!0),2&t&&d.Bc(n=d.jc())&&(e.codeInput=n.first)},decls:21,vars:15,consts:[["href","#","class","auth-backlink j-link",3,"click",4,"ngIf"],[3,"hidden"],["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"mb-4"],[1,"text-nowrap"],[1,"my-4",3,"formGroup","ngSubmit"],[1,"my-4",3,"autofocus","hasError","errorText","formControl"],["codeInput",""],[1,"auth-submit"],["translate","","type","submit",1,"btn","btn-static","btn-primary","btn-lg",3,"jLoading","disabled"],["translate","","type","button",1,"btn","btn-static","btn-link",3,"click"],["destinationLabel","AUTH.EMAIL.DESTINATION",3,"errorType","isLoading","destinationValue","timerValue","isTimerRunning","codeRequested",4,"ngIf"],["destinationLabel","AUTH.EMAIL.DESTINATION",3,"errorType","isLoading","destinationValue","isTimerRunning","timerValue","codeRequested",4,"ngIf"],[4,"ngIf"],["href","#",1,"auth-backlink","j-link",3,"click"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["destinationLabel","AUTH.EMAIL.DESTINATION",3,"errorType","isLoading","destinationValue","timerValue","isTimerRunning","codeRequested"],["destinationLabel","AUTH.EMAIL.DESTINATION",3,"errorType","isLoading","destinationValue","isTimerRunning","timerValue","codeRequested"]],template:function(t,e){1&t&&(d.Oc(0,Nt,4,1,"a",0),d.Wb(1,"div",1),d.Wb(2,"h3",2),d.Qc(3,"AUTH.EMAIL.TITLE"),d.Vb(),d.Wb(4,"div",1),d.Wb(5,"p",3),d.Qc(6," AUTH.EMAIL.DESCRIPTION "),d.Wb(7,"strong",4),d.Qc(8),d.Vb(),d.Vb(),d.Wb(9,"form",5),d.ic("ngSubmit",(function(t){return e.onSubmit()})),d.Rb(10,"j-sms-input",6,7),d.Wb(12,"div",8),d.Wb(13,"button",9),d.Qc(14,"SHARED.CONTINUE"),d.Vb(),d.Wb(15,"button",10),d.ic("click",(function(t){return e.openContactModal()})),d.Qc(16,"AUTH.EMAIL.NO_CODE_RECEIVED"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Oc(17,_t,1,5,"j-sms-error",11),d.Oc(18,Dt,1,5,"j-sms-error",11),d.Oc(19,Pt,1,5,"j-sms-error",12),d.Vb(),d.Oc(20,Wt,1,0,"j-animated-loading",13)),2&t&&(d.rc("ngIf",e.isReady),d.Ab(1),d.rc("hidden",!e.isReady),d.Ab(3),d.rc("hidden",e.currentTab!=e.authTabs.FORM),d.Ab(4),d.Rc(e.email),d.Ab(1),d.rc("formGroup",e.emailCodeForm),d.Ab(1),d.rc("autofocus",!0)("hasError",e.hasError)("errorText",e.errorText)("formControl",e.f.emailCode),d.Ab(3),d.rc("jLoading",e.isLoading)("disabled",e.isLoading),d.Ab(4),d.rc("ngIf",e.currentTab==e.authTabs.FORBIDDEN),d.Ab(1),d.rc("ngIf",e.currentTab==e.authTabs.FORBIDDEN_BLOCKED),d.Ab(1),d.rc("ngIf",e.currentTab==e.authTabs.ERRORED),d.Ab(1),d.rc("ngIf",!e.isReady))},directives:[r.u,R.a,s.J,s.u,s.l,wt.a,s.t,s.i,A.a,P.a,Vt.a,W.a],styles:[""]}),jt),qt=n("kUBv"),Xt=((Gt=function(){function t(e,n,i,r){var a=this;_classCallCheck(this,t),this.auth=e,this.router=n,this.route=i,this.modalService=r,this.isLoading=!1,this.subs=new h.a;var s=this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){a.phone=t.phone,a.iin=t.iin,a.iin?a.phone||a.navigateToPhone():a.navigateToIin()})),o=this.route.data.subscribe((function(t){a.authType=t.action}));this.subs.add(s),this.subs.add(o)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"onSubmit",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,e.prev=1,this.authType!=T.a.RESTORE){e.next=7;break}return e.next=5,this.auth.restore(this.phone,t.newPassword,this.iin);case 5:e.next=9;break;case 7:return e.next=9,this.auth.register(this.phone,t.newPassword,this.iin);case 9:this.navigateToResult(t.newPassword),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.mapError(e.t0);case 15:return e.prev=15,this.isLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})))}},{key:"mapError",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.code,e.next=e.t0===b.b.RESOURCE_NOT_FOUND?3:e.t0===b.b.FORBIDDEN?3:e.t0===b.b.RESOURCE_EXISTS?3:e.t0===b.b.PHONE_TOKEN_EXPIRED?5:e.t0===b.b.TOKEN_EXPIRED?5:e.t0===b.b.INVALID_PHONE_FORMAT?7:e.t0===b.b.ARGUMENT_MISSING?7:9;break;case 3:return this.navigateToPhoneNotMatch(),e.abrupt("break",10);case 5:return this.showExpiredModal(),e.abrupt("break",10);case 7:return this.navigateToPhone(),e.abrupt("break",10);case 9:this.errorText=t.description;case 10:case"end":return e.stop()}}),e,this)})))}},{key:"showExpiredModal",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.modalService.open(ot,{centered:!0}),t.prev=1,t.next=4,e.result;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,this.navigateToIin(),t.finish(8);case 11:case"end":return t.stop()}}),t,this,[[1,6,8,11]])})))}},{key:"navigateToIin",value:function(){this.router.navigate(["iin"],{relativeTo:this.route.parent,state:{iin:this.iin||""}})}},{key:"navigateToPhone",value:function(){this.router.navigate(["phone"],{relativeTo:this.route.parent,state:{iin:this.iin}})}},{key:"navigateToResult",value:function(t){this.router.navigate(["result"],{relativeTo:this.route.parent,state:{phone:this.phone,password:t}})}},{key:"navigateToPhoneNotMatch",value:function(){this.router.navigate(["phone-not-match"],{relativeTo:this.route.parent})}}]),t}()).\u0275fac=function(t){return new(t||Gt)(d.Qb(p.a),d.Qb(a.c),d.Qb(a.a),d.Qb(it.q))},Gt.\u0275cmp=d.Kb({type:Gt,selectors:[["j-register-password"]],decls:7,vars:2,consts:[["translate","",1,"auth-heading","light","mb-3","mt-0"],["translate","",1,"mb-4"],[1,"my-4"],[3,"isLoading","errorText","submitted"]],template:function(t,e){1&t&&(d.Wb(0,"article"),d.Wb(1,"h3",0),d.Qc(2,"AUTH.PASSWORD.TITLE"),d.Vb(),d.Wb(3,"p",1),d.Qc(4,"AUTH.PASSWORD.DESCRIPTION"),d.Vb(),d.Wb(5,"div",2),d.Wb(6,"j-new-password",3),d.ic("submitted",(function(t){return e.onSubmit(t)})),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(6),d.rc("isLoading",e.isLoading)("errorText",e.errorText))},directives:[R.a,qt.a],styles:[""]}),Gt),Jt=((Ft=function(){function t(e,n,i,r){var a=this;_classCallCheck(this,t),this.route=e,this.router=n,this.auth=i,this.tokenService=r,this.isLoading=!1,this.authTypes=T.a,this.subs=new h.a;var s=this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){a.phone=t.phone,a.password=t.password})),o=this.route.data.subscribe((function(t){a.authType=t.action}));this.subs.add(s),this.subs.add(o)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"login",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.isLoading=!0,e.prev=1,e.next=4,this.auth.requestDevice(this.phone);case 4:return n=e.sent,this.tokenService.setDeviceToken(n.signature,this.password),e.next=8,this.auth.login(this.phone,this.password);case 8:this.router.navigateByUrl("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.router.navigate(["/auth/login"],{state:{error:e.t0.description||e.t0}});case 14:return e.prev=14,this.isLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})))}}]),t}()).\u0275fac=function(t){return new(t||Ft)(d.Qb(a.a),d.Qb(a.c),d.Qb(p.a),d.Qb(m.a))},Ft.\u0275cmp=d.Kb({type:Ft,selectors:[["j-register-result"]],decls:14,vars:3,consts:[[1,"auth-heading","light","mb-3","mt-0"],["translate",""],[1,"mb-4"],[1,"auth-submit"],["translate","",1,"btn","btn-static","btn-primary",3,"disabled","jLoading","click"]],template:function(t,e){1&t&&(d.Wb(0,"article"),d.Wb(1,"h3",0),d.Wb(2,"span",1),d.Qc(3,"SHARED.DONE"),d.Vb(),d.Qc(4,"! "),d.Vb(),d.Wb(5,"p",2),d.Wb(6,"span",1),d.Qc(7),d.Vb(),d.Rb(8,"br"),d.Wb(9,"span",1),d.Qc(10,"AUTH.RESULT.DESCRIPTION"),d.Vb(),d.Vb(),d.Vb(),d.Wb(11,"div",3),d.Wb(12,"button",4),d.ic("click",(function(t){return e.login(t)})),d.Qc(13,"AUTH.LOGIN"),d.Vb(),d.Vb()),2&t&&(d.Ab(7),d.Rc(e.authType==e.authTypes.REGISTER?"AUTH.RESULT.REGISTERED":"AUTH.RESULT.RESTORED"),d.Ab(5),d.rc("disabled",e.isLoading)("jLoading",e.isLoading))},directives:[R.a,A.a],styles:[""]}),Ft),Zt=((Mt=function t(e){_classCallCheck(this,t),this.navService=e,this.translateParams={tel:"7711"},this.navService.triggerRegisterError("iin",!0),this.navService.triggerRegisterError("no-account",!0)}).\u0275fac=function(t){return new(t||Mt)(d.Qb(ut.a))},Mt.\u0275cmp=d.Kb({type:Mt,selectors:[["j-no-account"]],decls:13,vars:5,consts:[["routerLink","../iin",1,"j-link"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"light","mb-3","mt-0"],[1,"mb-4",3,"innerHTML"],["routerLink","../iin","translate","",1,"btn","btn-static","btn-primary"],["translate","","href","https://jysanbank.kz/ru/page/contacts","target","_blank",1,"btn","btn-static","btn-link"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.BACK"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6,"AUTH.NO_ACCOUNT.TITLE"),d.Vb(),d.Rb(7,"p",4),d.mc(8,"translate"),d.Wb(9,"a",5),d.Qc(10,"AUTH.NO_ACCOUNT.LINK"),d.Vb(),d.Wb(11,"a",6),d.Qc(12,"AUTH.NO_ACCOUNT.CONTACTS"),d.Vb(),d.Vb()),2&t&&(d.Ab(1),d.rc("isStroke",!0),d.Ab(6),d.rc("innerHTML",d.oc(8,2,"AUTH.NO_ACCOUNT.DESCRIPTION",e.translateParams),d.Gc))},directives:[a.f,P.a,R.a],pipes:[R.d],styles:[""]}),Mt),zt=((Ut=function t(e){_classCallCheck(this,t),this.navService=e,this.navService.triggerRegisterError("iin",!0),this.navService.triggerRegisterError("no-email",!0)}).\u0275fac=function(t){return new(t||Ut)(d.Qb(ut.a))},Ut.\u0275cmp=d.Kb({type:Ut,selectors:[["j-no-email"]],decls:11,vars:4,consts:[["routerLink","../phone",1,"j-link"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"light","mb-3","mt-0"],[1,"mb-4",3,"innerHTML"],["translate","","href","https://jysanbank.kz/ru/page/contacts","target","_blank",1,"btn","btn-static","btn-primary"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.PHONE"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6,"AUTH.NO_EMAIL.TITLE"),d.Vb(),d.Rb(7,"p",4),d.mc(8,"translate"),d.Wb(9,"a",5),d.Qc(10,"AUTH.NO_EMAIL.LINK"),d.Vb(),d.Vb()),2&t&&(d.Ab(1),d.rc("isStroke",!0),d.Ab(6),d.rc("innerHTML",d.nc(8,2,"AUTH.NO_EMAIL.DESCRIPTION"),d.Gc))},directives:[a.f,P.a,R.a],pipes:[R.d],styles:[""]}),Ut),Yt=((Qt=function t(e){_classCallCheck(this,t),this.navService=e,this.translateParams={tel:"7711"},this.navService.triggerRegisterError("iin",!0),this.navService.triggerRegisterError("user-blocked",!0)}).\u0275fac=function(t){return new(t||Qt)(d.Qb(ut.a))},Qt.\u0275cmp=d.Kb({type:Qt,selectors:[["j-user-blocked"]],decls:9,vars:5,consts:[["routerLink","../iin",1,"j-link"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"light","mb-3","mt-0"],[1,"mb-4",3,"innerHTML"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.IIN"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6,"AUTH.USER_BLOCKED.TITLE"),d.Vb(),d.Rb(7,"p",4),d.mc(8,"translate"),d.Vb()),2&t&&(d.Ab(1),d.rc("isStroke",!0),d.Ab(6),d.rc("innerHTML",d.oc(8,2,"AUTH.USER_BLOCKED.DESCRIPTION",e.translateParams),d.Gc))},directives:[a.f,P.a,R.a],pipes:[R.d],styles:[""]}),Qt),$t=((Ht=function(){function t(e,n,i){var r=this;_classCallCheck(this,t),this.router=e,this.route=n,this.navService=i,this.subscription=new h.a,this.navService.triggerRegisterError("phone",!0),this.navService.triggerRegisterError("phone-not-match",!0),this.subscription.add(this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){r.phone=t.phone,r.iin=t.iin})))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"navigateToPhone",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=e)||void 0===t||t.preventDefault(),this.router.navigate(["phone"],{relativeTo:this.route.parent,state:{iin:this.iin,phone:this.phone}})}}]),t}()).\u0275fac=function(t){return new(t||Ht)(d.Qb(a.c),d.Qb(a.a),d.Qb(ut.a))},Ht.\u0275cmp=d.Kb({type:Ht,selectors:[["j-phone-not-match"]],decls:11,vars:4,consts:[["href","#",1,"j-link",3,"click"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"light","mb-3","mt-0"],[1,"mb-4",3,"innerHTML"],["href","#","translate","",1,"btn","btn-static","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.ic("click",(function(t){return e.navigateToPhone(t)})),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.PHONE"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6,"AUTH.PHONE_NOT_MATCH.TITLE"),d.Vb(),d.Rb(7,"p",4),d.mc(8,"translate"),d.Wb(9,"a",5),d.ic("click",(function(t){return e.navigateToPhone(t)})),d.Qc(10,"AUTH.PHONE_NOT_MATCH.LINK"),d.Vb(),d.Vb()),2&t&&(d.Ab(1),d.rc("isStroke",!0),d.Ab(6),d.rc("innerHTML",d.nc(8,2,"AUTH.PHONE_NOT_MATCH.DESCRIPTION"),d.Gc))},directives:[P.a,R.a],pipes:[R.d],styles:[""]}),Ht),te=((xt=function(){function t(e){var n=this;_classCallCheck(this,t),this.route=e,this.subscription=new h.a;var i=this.route.data.subscribe((function(t){n.authType=t.action})),r=this.route.paramMap.pipe(Object(l.a)((function(){return window.history.state}))).subscribe((function(t){n.error=t.error,n.iin=t.iin}));this.subscription.add(r),this.subscription.add(i)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"description",get:function(){return this.authType===T.a.REGISTER?"AUTH.ERROR.DESCRIPTION_REGISTER":"AUTH.ERROR.DESCRIPTION_RESTORE"}},{key:"state",get:function(){return{iin:this.iin}}}]),t}()).\u0275fac=function(t){return new(t||xt)(d.Qb(a.a))},xt.\u0275cmp=d.Kb({type:xt,selectors:[["j-register-error"]],decls:12,vars:9,consts:[["routerLink","../iin",1,"j-link",3,"state"],["name","arrowLeft","color","primary",1,"mr-2",3,"isStroke"],["translate",""],["translate","",1,"light","mb-3","mt-0"],[1,"mb-4",3,"innerHTML"],["routerLink","../iin",1,"btn","btn-primary",3,"state"]],template:function(t,e){1&t&&(d.Wb(0,"a",0),d.Rb(1,"j-icon",1),d.Wb(2,"span",2),d.Qc(3,"SHARED.IIN"),d.Vb(),d.Vb(),d.Wb(4,"article"),d.Wb(5,"h3",3),d.Qc(6,"AUTH.ERROR.TITLE"),d.Vb(),d.Rb(7,"p",4),d.mc(8,"translate"),d.Wb(9,"a",5),d.Qc(10),d.mc(11,"translate"),d.Vb(),d.Vb()),2&t&&(d.rc("state",e.state),d.Ab(1),d.rc("isStroke",!0),d.Ab(6),d.rc("innerHTML",d.nc(8,5,e.description),d.Gc),d.Ab(2),d.rc("state",e.state),d.Ab(1),d.Sc(" ",d.nc(11,7,"SHARED.BACK")," "))},directives:[a.f,P.a,R.a],pipes:[R.d],styles:[""]}),xt),ee=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Y},{path:"register",component:nt,children:[{path:"",redirectTo:"iin"},{path:"iin",component:gt,data:{title:"AUTH.REGISTER_TITLE",action:T.a.REGISTER}},{path:"no-account",component:Zt},{path:"no-email",component:zt},{path:"user-blocked",component:Yt},{path:"phone",component:Et,data:{title:"SHARED.PHONE",action:T.a.REGISTER}},{path:"sms",component:It,data:{action:T.a.REGISTER}},{path:"phone-not-match",component:$t},{path:"email",component:Bt},{path:"password",component:Xt,data:{action:T.a.REGISTER}},{path:"error",component:te,data:{action:T.a.REGISTER}},{path:"result",component:Jt,data:{action:T.a.REGISTER}}]},{path:"restore",component:nt,children:[{path:"",redirectTo:"iin"},{path:"iin",component:gt,data:{title:"AUTH.RESTORE",action:T.a.RESTORE}},{path:"no-account",component:Zt},{path:"no-email",component:zt},{path:"user-blocked",component:Yt},{path:"phone",component:Et,data:{title:"SHARED.PHONE",action:T.a.RESTORE}},{path:"sms",component:It,data:{action:T.a.RESTORE}},{path:"phone-not-match",component:$t},{path:"email",component:Bt},{path:"password",component:Xt,data:{action:T.a.RESTORE}},{path:"error",component:te,data:{action:T.a.RESTORE}},{path:"result",component:Jt,data:{action:T.a.RESTORE}}]}],ne=((Kt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:Kt}),Kt.\u0275inj=d.Nb({factory:function(t){return new(t||Kt)},imports:[[a.g.forChild(ee)],a.g]}),Kt);n.d(e,"AuthModule",(function(){return re}));var ie,re=((ie=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:ie}),ie.\u0275inj=d.Nb({factory:function(t){return new(t||ie)},providers:[{provide:o.b,useClass:o.b}],imports:[[r.c,ne,s.n,a.g,s.D,c.a,o.c]]}),ie)}}]);