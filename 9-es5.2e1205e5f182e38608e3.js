function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],a=!0,i=!1,r=void 0;try{for(var c,o=t[Symbol.iterator]();!(a=(c=o.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(s){i=!0,r=s}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+eKG":function(t,e,n){"use strict";var a=n("0zi4");n.d(e,"a",(function(){return a.a}))},"0zi4":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n("mrSG"),i=n("tk/3"),r=n("+/Tu"),c=n("zwEd"),o=n("KWy3"),s=n("XNiG"),u=n("lJxs"),l=n("SpoB"),d=n("fXoL"),b=n("p6Hd"),f=n("VnnJ"),p=n("ofXK"),h=n("sYmb"),m=n("VO+5"),g=function(){var t=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.apiService=e,this.companyService=n,this.datePipe=a,this.statementService=i,this.translateService=r,this.notifierService=c,this.cardsUpdated$=new s.a}return _createClass(t,[{key:"getStatement",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r,c,o,s,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getCardById(t);case 2:return a=n.sent,r="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(a.accountId,"/statements"),c=new i.g,o=(o=(o=new i.h).append("dateFrom",this.datePipe.transform(e.periodFrom,"yyyy-MM-dd"))).append("dateTo",this.datePipe.transform(e.periodTo,"yyyy-MM-dd")),n.prev=6,n.next=9,this.apiService.get(r,c,o);case 9:return s=n.sent,u=this.mapCardStatement(s),n.abrupt("return",this.statementService.mapStatement(null,u));case 14:throw n.prev=14,n.t0=n.catch(6),n.t0;case 17:case"end":return n.stop()}}),n,this,[[6,14]])})))}},{key:"mapCardLabel",value:function(t){if(t.alias)return t.alias;switch(t.category){case c.a.PRIVATE:return"ACCOUNTS.PRIVATE_CARD";case c.a.COMMERCIAL:return this.companyService.currentCompany.type==l.b.CORPORATE?"ACCOUNTS.CORPORATE_CARD":"ACCOUNTS.ENTREPRENEUR_CARD";default:return"ACCOUNTS.CARD"}}},{key:"getCorporateCards",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="companies/".concat(this.companyService.currentId,"/corporate-cards"),n=(new i.h).set("includePrivate","true"),t.next=4,this.apiService.get(e,null,n);case 4:return a=t.sent,t.abrupt("return",(this.cardsList=a.map((function(t){return new c.c(t)})),this.cardsList));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getCorporateCardsAsObservable",value:function(){var t=this,e="companies/".concat(this.companyService.currentId,"/corporate-cards"),n=(new i.h).set("includePrivate","true");return this.apiService.getObservable(e,null,n).pipe(Object(u.a)((function(e){return t.cardsList=e.map((function(t){return new c.c(t)})),t.cardsList})))}},{key:"getCardById",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.cardsList,e.t0){e.next=4;break}return e.next=4,this.getCorporateCards();case 4:return e.abrupt("return",this.findCardById(t));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getQrImg",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,"/qr"),r=new i.h,n.abrupt("return",(r=r.append("iban",e),this.apiService.get(a,null,r)));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getQrPrint",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,"/qr/print"),r=(r=new i.g).set("Content-Type","application/octet-stream"),c=new i.h,n.abrupt("return",(c=c.append("iban",e),this.apiService.get(a,r,c,{responseType:"blob"})));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getPdf",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,"/requisites"),a=(a=(a=new i.g).set("Accept-File","application/pdf")).set("Content-Type","application/octet-stream"),r=new i.h,e.abrupt("return",this.apiService.get(n,a,r,{responseType:"blob"}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"changeCardStatus",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,"/status"),i={status:e?"BLOCK":"UNBLOCK"},n.prev=1,n.next=4,this.apiService.post(a,i);case 4:return r=n.sent,n.abrupt("return",(this.cardsList.find((function(e){return e.cardId===t})).status=e?c.b.TEMPORARILY_LOCK:c.b.ACTIVE,this.cardsUpdated$.next(this.cardsList),this.showCardStatusChangeSuccessNotification(e),r));case 8:throw n.prev=8,n.t0=n.catch(1),this.showCardStatusChangeErrorNotification(e),n.t0;case 11:case"end":return n.stop()}}),n,this,[[1,8]])})))}},{key:"changeCardVisibility",value:function(t,e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,":").concat(e?"hide":"unhide"),n.prev=1,n.next=4,this.apiService.patch(a);case 4:return i=n.sent,n.abrupt("return",(this.cardsList.find((function(e){return e.cardId===t})).hidden=e,this.cardsUpdated$.next(this.cardsList),this.showCardVisibilityChangeSuccessNotification(e),i));case 8:throw n.prev=8,n.t0=n.catch(1),this.showCardVisibilityChangeErrorNotification(e),n.t0;case 11:case"end":return n.stop()}}),n,this,[[1,8]])})))}},{key:"mapCardStatus",value:function(t){var e="CARDS.STATUS.TITLE.";switch(t){case c.b.EXPIRED:return"".concat(e,"EXPIRED");case c.b.TEMPORARILY_LOCK:return"".concat(e,"TEMPORARILY_LOCK");case c.b.FRAUD:case c.b.LOST_LOCK:case c.b.THEFT_LOCK:return"".concat(e,"LOCK");default:return"".concat(e,"ACTIVE")}}},{key:"findCardById",value:function(t){return this.cardsList.find((function(e){return e.cardId===t}))}},{key:"renameCard",value:function(t,e){return this.apiService.put("companies/".concat(this.companyService.currentId,"/corporate-cards/").concat(t,"/alias"),{alias:e})}},{key:"mapCardStatement",value:function(t){var e=this;return{statementDate:t.statementDate,iban:null,dateFrom:t.dateFrom,dateTo:t.dateTo,balanceIn:null,balanceInLCY:null,balanceOut:null,balanceOutLCY:null,creditTotalSum:t.creditTotalSum,debitTotalSum:t.debitTotalSum,transactionGroups:t.transactionGroups.map((function(t){return e.mapCardTransactionGroup(t)})),groupType:t.groupType,totalTransactionsCount:t.totalTransactionsCount}}},{key:"mapCardTransactionGroup",value:function(t){var e=this;return{groupDate:t.groupDate,debitSum:t.debitSum,creditSum:t.creditSum,transactionsCount:t.transactionsCount,transactions:t.transactions.map((function(t){return e.mapCardTransaction(t)}))}}},{key:"mapCardTransaction",value:function(t){null===t.amount.currency&&t.feeAmount.amount<0&&(t.transactionType=o.c.DEBIT);var e={id:null,iban:null,reference:null,documentNumber:t.finDocId,correspondentBankBic:null,correspondentAccount:null,correspondentName:t.description,kbe:null,correspondentBin:null,debit:t.transactionType===o.c.DEBIT?this.getCardTransactionAmount(t):null,credit:t.transactionType===o.c.CREDIT?this.getCardTransactionAmount(t):null,description:t.details,documentDate:t.documentDate,valueDate:null,knp:null,kbk:null,signHead:null,signBuch:null,isPayment:!1,paymentStatus:null,paymentType:null,paymentEmployees:null,createDate:t.documentDate};return new o.d(e,this.translateService.currentLang)}},{key:"getCardTransactionAmount",value:function(t){var e,n,a,i;return(null===(e=t.amount)||void 0===e?void 0:e.amount)&&(null===(n=t.amount)||void 0===n?void 0:n.currency)?t.amount:(null===(a=t.feeAmount)||void 0===a?void 0:a.amount)?{amount:Math.abs(null===(i=t.feeAmount)||void 0===i?void 0:i.amount),currency:r.a.KZT}:null}},{key:"showCardStatusChangeSuccessNotification",value:function(t){var e=this.translateService.instant("CARDS.SETTINGS.LOCK.".concat(t?"ACTIVATED_NOTIFICATION":"DEACTIVATED_NOTIFICATION"));this.notifierService.hideAll(),this.notifierService.notify("default",e)}},{key:"showCardStatusChangeErrorNotification",value:function(t){var e=this.translateService.instant("CARDS.SETTINGS.LOCK.".concat(t?"ACTIVATED_FAILED":"DEACTIVATED_FAILED"));this.notifierService.hideAll(),this.notifierService.notify("error",e)}},{key:"showCardVisibilityChangeSuccessNotification",value:function(t){var e=this.translateService.instant("CARDS.SETTINGS.HIDE.".concat(t?"HIDDEN_NOTIFICATION":"SHOWN_NOTIFICATION"));this.notifierService.hideAll(),this.notifierService.notify("default",e)}},{key:"showCardVisibilityChangeErrorNotification",value:function(t){var e=this.translateService.instant("CARDS.SETTINGS.HIDE.".concat(t?"HIDDEN_FAILED":"SHOWN_FAILED"));this.notifierService.hideAll(),this.notifierService.notify("error",e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.ec(b.a),d.ec(f.a),d.ec(p.f),d.ec(o.b),d.ec(h.e),d.ec(m.c))},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"3bMa":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("fXoL"),i=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["j-account-entity"]],inputs:{item:"item",showBank:"showBank"},decls:14,vars:8,consts:[[1,"account-pill","account-pill_gray","account-pill_fill"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","p3"],[1,"wrap-text","text-gray"],[1,"wrap-text"],[1,"account-pill--suffix"],[1,"text-gray","ml-1"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Rb(2,"j-entity-logo",2),a.Vb(),a.Wb(3,"div",3),a.Wb(4,"p",4),a.Rc(5,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0447\u0435\u0442"),a.Vb(),a.Wb(6,"p",5),a.Rc(7),a.Vb(),a.Vb(),a.Wb(8,"div",6),a.Rc(9),a.nc(10,"amountFormat"),a.Wb(11,"span",7),a.Rc(12),a.nc(13,"curSymbol"),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Ab(2),a.sc("name",e.item.balance.currency),a.Ab(5),a.Sc(e.item.iban),a.Ab(2),a.Tc(" ",a.oc(10,4,e.item.balance.amount)," "),a.Ab(3),a.Sc(a.oc(13,6,e.item.balance.currency)))},styles:[""],encapsulation:2,changeDetection:0}),t}()},"4Nuw":function(t,e,n){"use strict";var a,i=n("L+ju"),r=n("xErE"),c=n("ofXK"),o=n("tk/3"),s=n("tyNb"),u=n("3Pt+"),l=n("PCNd"),d=n("fXoL"),b=n("3bMa"),f=n("hsBV"),p=n("pZP7"),h=n("UZjs"),m=n("JvPu"),g=n("wwEr"),v=n("3v+J"),C=n("Y+uv"),y=n("/zfT"),S=n("xWtO"),_=n("BV3K"),T=n("B+58"),k=n("zOyH"),x=n("Cg+c"),A=n("Dwsl"),O=n("+uUT"),I=n("Ya7Z"),w=n("13E/"),R=n("cZYL"),P=n("jMpN"),E=n("ttPG"),M=n("vZvt"),L=n("0eeg"),V=n("Wo9y"),N=n("EBek"),j=n("570E"),W=n("zdqJ"),D=n("i2Gl"),F=n("Kcpt"),U=n("Frqi"),G=n("M6pS"),Q=n("paXB"),q=n("Q98t"),K=n("EiG8"),H=n("4oqK"),B=n("c66K"),X=n("QfCG"),Y=n("oa9T"),z=n("SfXN"),$=n("H6TZ"),J=n("jRXw"),Z=n("2aJj"),tt=n("VA2L"),et=n("0AMz"),nt=n("W3Es"),at=n("R4CF"),it=n("9txL"),rt=n("LXWx"),ct=n("5I09"),ot=n("S1F0"),st=n("oKsb"),ut=n("fvpk"),lt=n("Tile"),dt=n("aF9I"),bt=n("aZ8m"),ft=n("UhoJ"),pt=n("sCra"),ht=n("fGuG"),mt=n("7/bn"),gt=n("Bl/x"),vt=n("zN9f"),Ct=n("Kx/q"),yt=n("2FF4"),St=n("bSvt"),_t=n("jH+I"),Tt=n("4cI0"),kt=n("kUBv"),xt=n("9Udv"),At=n("0jn5"),Ot=n("fK/r"),It=n("Hjq/"),wt=n("PGAL"),Rt=n("Kx0l"),Pt=n("gdaf"),Et=n("LFY/"),Mt=n("I+WJ"),Lt=n("lABO"),Vt=n("hJI6"),Nt=n("JB36"),jt=n("4zJ+"),Wt=n("XpgD"),Dt=n("MfWJ"),Ft=n("B8HE"),Ut=n("NpBu"),Gt=n("TaxS"),Qt=n("tkTF"),qt=n("yy4r"),Kt=n("wGsJ"),Ht=n("ZVDf"),Bt=n("l/gM"),Xt=n("UoEe"),Yt=n("gN/K"),zt=n("+hcb"),$t=n("h7tf"),Jt=n("9odQ"),Zt=n("WqMH"),te=n("3MRA"),ee=n("Zgqj"),ne=n("oMXN"),ae=n("rqas"),ie=n("dnqU"),re=n("tp+K"),ce=n("saU0"),oe=n("ZF3e"),se=n("JqCM"),ue=n("qew9"),le=n("d/d6"),de=n("e8Ap"),be=n("sYmb"),fe=n("1kSV"),pe=n("Dvla"),he=n("K1R0"),me=n("xJkR"),ge=n("dlKe"),ve=n("DPnb"),Ce=n("C6g9"),ye=n("3M96"),Se=n("DHcY"),_e=n("adOO"),Te=n("Eajh"),ke=n("Ub7F"),xe=n("OHc7"),Ae=n("I0Rk"),Oe=n("tepA"),Ie=n("Bs9s"),we=n("ScFe"),Re=n("SCaJ"),Pe=n("wV3k"),Ee=n("wY9W"),Me=n("7Fmj"),Le=n("3skF"),Ve=((a=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:a}),a.\u0275inj=d.Nb({factory:function(t){return new(t||a)},imports:[[c.c,l.a,o.d,s.g,u.n,u.D]]}),a);d.Jc(b.a,[b.a,f.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,v.a,C.a,y.a,S.a,_.b,T.a,k.a,x.a,A.a,O.a,I.a,_.a,w.a,R.b,R.a,P.a,E.a,M.a,L.a,V.a,N.a,j.a,W.a,D.b,F.a,U.a,G.a,Q.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,$.a,J.a,Z.a,tt.a,et.a,nt.a,at.a,it.a,rt.a,ct.a,ot.a,st.a,ut.a,lt.a,dt.a,bt.a,ft.a,pt.a,ht.a,mt.a,gt.a,vt.a,Ct.a,yt.a,St.a,_t.a,Tt.a,kt.a,xt.a,At.a,Ot.a,It.a,wt.a,Rt.a,Pt.a,Et.a,Mt.a,Lt.a,Vt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Ut.a,Gt.a,Qt.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.a,$t.a,Jt.b,Zt.a,te.a,ee.a,ne.a,ae.a,ie.a,re.a,ce.a,oe.a,se.a,ue.a,le.a,de.a,be.a,fe.E,pe.a,pe.b,he.a,me.a,ge.a,ve.a,ve.c,ve.b,Ce.a,ye.a,s.h,s.d,s.f,s.e,s.i,u.J,u.y,u.I,u.c,u.z,u.C,u.a,u.F,u.G,u.B,u.t,u.u,u.E,u.p,u.o,u.A,u.b,u.d,u.w,u.x,u.v,u.i,u.l,u.j,u.m,u.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,_e.a,Te.a,ke.a,xe.a,Ae.a,Oe.a,Ie.a,we.a,Re.a,Pe.a,Ee.a,Me.a,Le.a,be.d]),d.Jc(f.a,[b.a,f.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,v.a,C.a,y.a,S.a,_.b,T.a,k.a,x.a,A.a,O.a,I.a,_.a,w.a,R.b,R.a,P.a,E.a,M.a,L.a,V.a,N.a,j.a,W.a,D.b,F.a,U.a,G.a,Q.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,$.a,J.a,Z.a,tt.a,et.a,nt.a,at.a,it.a,rt.a,ct.a,ot.a,st.a,ut.a,lt.a,dt.a,bt.a,ft.a,pt.a,ht.a,mt.a,gt.a,vt.a,Ct.a,yt.a,St.a,_t.a,Tt.a,kt.a,xt.a,At.a,Ot.a,It.a,wt.a,Rt.a,Pt.a,Et.a,Mt.a,Lt.a,Vt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Ut.a,Gt.a,Qt.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.a,$t.a,Jt.b,Zt.a,te.a,ee.a,ne.a,ae.a,ie.a,re.a,ce.a,oe.a,se.a,ue.a,le.a,de.a,be.a,fe.E,pe.a,pe.b,he.a,me.a,ge.a,ve.a,ve.c,ve.b,Ce.a,ye.a,s.h,s.d,s.f,s.e,s.i,u.J,u.y,u.I,u.c,u.z,u.C,u.a,u.F,u.G,u.B,u.t,u.u,u.E,u.p,u.o,u.A,u.b,u.d,u.w,u.x,u.v,u.i,u.l,u.j,u.m,u.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,_e.a,Te.a,ke.a,xe.a,Ae.a,Oe.a,Ie.a,we.a,Re.a,Pe.a,Ee.a,Me.a,Le.a,be.d]),d.Jc(p.a,[b.a,f.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,v.a,C.a,y.a,S.a,_.b,T.a,k.a,x.a,A.a,O.a,I.a,_.a,w.a,R.b,R.a,P.a,E.a,M.a,L.a,V.a,N.a,j.a,W.a,D.b,F.a,U.a,G.a,Q.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,$.a,J.a,Z.a,tt.a,et.a,nt.a,at.a,it.a,rt.a,ct.a,ot.a,st.a,ut.a,lt.a,dt.a,bt.a,ft.a,pt.a,ht.a,mt.a,gt.a,vt.a,Ct.a,yt.a,St.a,_t.a,Tt.a,kt.a,xt.a,At.a,Ot.a,It.a,wt.a,Rt.a,Pt.a,Et.a,Mt.a,Lt.a,Vt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Ut.a,Gt.a,Qt.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.a,$t.a,Jt.b,Zt.a,te.a,ee.a,ne.a,ae.a,ie.a,re.a,ce.a,oe.a,se.a,ue.a,le.a,de.a,be.a,fe.E,pe.a,pe.b,he.a,me.a,ge.a,ve.a,ve.c,ve.b,Ce.a,ye.a,s.h,s.d,s.f,s.e,s.i,u.J,u.y,u.I,u.c,u.z,u.C,u.a,u.F,u.G,u.B,u.t,u.u,u.E,u.p,u.o,u.A,u.b,u.d,u.w,u.x,u.v,u.i,u.l,u.j,u.m,u.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,_e.a,Te.a,ke.a,xe.a,Ae.a,Oe.a,Ie.a,we.a,Re.a,Pe.a,Ee.a,Me.a,Le.a,be.d]),d.Jc(h.a,[b.a,f.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,v.a,C.a,y.a,S.a,_.b,T.a,k.a,x.a,A.a,O.a,I.a,_.a,w.a,R.b,R.a,P.a,E.a,M.a,L.a,V.a,N.a,j.a,W.a,D.b,F.a,U.a,G.a,Q.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,$.a,J.a,Z.a,tt.a,et.a,nt.a,at.a,it.a,rt.a,ct.a,ot.a,st.a,ut.a,lt.a,dt.a,bt.a,ft.a,pt.a,ht.a,mt.a,gt.a,vt.a,Ct.a,yt.a,St.a,_t.a,Tt.a,kt.a,xt.a,At.a,Ot.a,It.a,wt.a,Rt.a,Pt.a,Et.a,Mt.a,Lt.a,Vt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Ut.a,Gt.a,Qt.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.a,$t.a,Jt.b,Zt.a,te.a,ee.a,ne.a,ae.a,ie.a,re.a,ce.a,oe.a,se.a,ue.a,le.a,de.a,be.a,fe.E,pe.a,pe.b,he.a,me.a,ge.a,ve.a,ve.c,ve.b,Ce.a,ye.a,s.h,s.d,s.f,s.e,s.i,u.J,u.y,u.I,u.c,u.z,u.C,u.a,u.F,u.G,u.B,u.t,u.u,u.E,u.p,u.o,u.A,u.b,u.d,u.w,u.x,u.v,u.i,u.l,u.j,u.m,u.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,_e.a,Te.a,ke.a,xe.a,Ae.a,Oe.a,Ie.a,we.a,Re.a,Pe.a,Ee.a,Me.a,Le.a,be.d]),n.d(e,"a",(function(){return i.a})),n.d(e,"d",(function(){return i.c})),n.d(e,"c",(function(){return r.a})),n.d(e,"b",(function(){return Ve}))},"9N4E":function(t,e,n){"use strict";n("x2ms"),n("CqcL"),n("0kjH"),n("n6qU"),n("77FI"),n("sFIr"),n("AOrV"),n("6ElB"),n("9PaV"),n("u+5l");var a=n("THGi");n("zt08"),n("l2AU"),n.d(e,"a",(function(){return a.a}));var i=n("jZlK");n.d(e,"c",(function(){return i.a}));var r=n("y5b2");n.d(e,"b",(function(){return r.d}))},KWy3:function(t,e,n){"use strict";n("QiVB"),n("/68H"),n("T+Ki"),n("pThr"),n("cIcs"),n("OTTH"),n("wqe5"),n("lYAS"),n("9K1F");var a=n("rEgK");n.d(e,"b",(function(){return a.a}));var i=n("ItTq");n.d(e,"a",(function(){return i.b}));var r=n("2G+r");n.d(e,"c",(function(){return r.c})),n.d(e,"d",(function(){return r.d}))},UZjs:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("zwEd"),i=n("fXoL"),r=n("+eKG");function c(t,e){if(1&t&&i.Rb(0,"j-money",9),2&t){var n=i.mc();i.sc("money",null==n.card?null:n.card.balance)}}function o(t,e){if(1&t&&(i.Wb(0,"small",10),i.Rc(1),i.nc(2,"translate"),i.Vb()),2&t){var n=i.mc();i.Ab(1),i.Sc(i.oc(2,1,n.status))}}var s=function(){var t=function(){function t(e){_classCallCheck(this,t),this.cardsService=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cardImage",get:function(){var t="./assets/icons/accounts";switch(this.card.category){case a.a.PRIVATE:return"".concat(t,"/card-private.svg");case a.a.COMMERCIAL:default:return"".concat(t,"/card-commercial.svg")}}},{key:"cardMps",get:function(){var t="./assets/icons/cards/mps";return"4"===this.card.cardNumber[0]?"".concat(t,"/visa.svg"):"".concat(t,"/mastercard.svg")}},{key:"status",get:function(){if(this.card.status!==a.b.ACTIVE)return this.cardsService.mapCardStatus(this.card.status)}},{key:"label",get:function(){return this.cardsService.mapCardLabel(this.card)}},{key:"isBalanceShown",get:function(){return this.card.category===a.a.COMMERCIAL}},{key:"maskedCardNumber",get:function(){var t,e=null===(t=this.card)||void 0===t?void 0:t.cardNumber;return e?"".concat(e.substring(0,4)," \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ").concat(e.substring(e.length-4,e.length)):""}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-account-card"]],inputs:{card:"card"},decls:13,vars:8,consts:[[1,"account-item"],[1,"account-item__img",3,"inlineSVG"],[1,"account-item__body","p3"],[1,"text-muted"],[1,"text-dark","d-flex"],[1,"mr-2",3,"inlineSVG"],[1,"ml-auto","p3","text-right"],[3,"money",4,"ngIf"],["class","d-block text-muted",4,"ngIf"],[3,"money"],[1,"d-block","text-muted"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Rb(1,"span",1),i.Wb(2,"div",2),i.Wb(3,"div",3),i.Rc(4),i.nc(5,"translate"),i.Vb(),i.Wb(6,"div",4),i.Rb(7,"span",5),i.Wb(8,"span"),i.Rc(9),i.Vb(),i.Vb(),i.Vb(),i.Wb(10,"div",6),i.Pc(11,c,1,1,"j-money",7),i.Pc(12,o,3,3,"small",8),i.Vb(),i.Vb()),2&t&&(i.Ab(1),i.sc("inlineSVG",e.cardImage),i.Ab(3),i.Sc(i.oc(5,6,e.label)),i.Ab(3),i.sc("inlineSVG",e.cardMps),i.Ab(2),i.Sc(e.maskedCardNumber),i.Ab(2),i.sc("ngIf",e.isBalanceShown),i.Ab(1),i.sc("ngIf",e.status))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),t}()},"ct+p":function(t,e,n){"use strict";n.r(e);var a,i,r=n("ofXK"),c=n("3Pt+"),o=n("qew9"),s=n("1kSV"),u=n("tmjD"),l=n("dlKe"),d=n("xJkR"),b=n("PCNd"),f=n("M4UK"),p=n("5cNS"),h=n("crCf"),m=n("tyNb"),g=n("Kd2e"),v=n("gzBp"),C=n("itXk"),y=n("pLZG"),S=n("lJxs"),_=n("3E0/"),T=n("fXoL"),k=n("VnnJ"),x=n("kmKP"),A=n("qXBG"),O=((i=function(){function t(e,n,a){_classCallCheck(this,t),this.company=e,this.user=n,this.auth=a}return _createClass(t,[{key:"canActivate",value:function(t,e){return Object(C.a)([this.company.currentCompany$,this.user.getUser()]).pipe(Object(y.a)((function(t){var e=_slicedToArray(t,2),n=e[0],a=e[1];return!!n&&!!a})),Object(S.a)((function(){return!0})),Object(_.a)(0))}}]),t}()).\u0275fac=function(t){return new(t||i)(T.ec(k.a),T.ec(x.b),T.ec(A.a))},i.\u0275prov=T.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),I=((a=function(){function t(e,n){_classCallCheck(this,t),this.router=e,this.featureFlagsService=n}return _createClass(t,[{key:"canActivate",value:function(t,e){var n=this,a=t.data.featureFlag;return new Promise((function(t,e){n.featureFlagsService.isDisabledPromise(a).then((function(e){e?(n.router.navigate(["/"]),t(!1)):t(!0)}))}))}}]),t}()).\u0275fac=function(t){return new(t||a)(T.ec(m.c),T.ec(g.b))},a.\u0275prov=T.Mb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),w=n("mrSG"),R=n("quSY"),P=n("4Nuw"),E=n("zwEd"),M=n("ZF+8"),L=n("0zi4"),V=n("dnqU"),N=n("sYmb"),j=n("LA0w"),W=n("zN9f"),D=n("Kx/q"),F=n("e8Ap");function U(t,e){if(1&t&&(T.Wb(0,"div",1),T.Rb(1,"span",2),T.Wb(2,"span"),T.Rc(3),T.Vb(),T.Vb()),2&t){var n=T.mc();T.Ab(3),T.Tc(" ",n.account.maskedAlterCode," ")}}var G,Q=((G=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||G)},G.\u0275cmp=T.Kb({type:G,selectors:[["j-account-alter-code"]],inputs:{account:"account"},decls:1,vars:1,consts:[["class","alter-code",4,"ngIf"],[1,"alter-code"],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"]],template:function(t,e){1&t&&T.Pc(0,U,4,1,"div",0),2&t&&T.sc("ngIf",null==e.account?null:e.account.hasAtfIban)},directives:[r.u,F.a],styles:[".alter-code[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#b7bec5}"]}),G),q=n("xErE");function K(t,e){1&t&&(T.Rc(0),T.nc(1,"translate")),2&t&&T.Tc(" ",T.oc(1,1,"ACCOUNTS.INACTIVE"),"\n")}function H(t,e){if(1&t&&(T.Rc(0),T.nc(1,"translate")),2&t){var n=T.mc();T.Tc(" ",T.pc(1,1,"ACCOUNTS.INACTIVE_WITH_DATE",n.titleParams),"\n")}}function B(t,e){if(1&t&&(T.Rb(0,"div",7),T.nc(1,"translate")),2&t){var n=T.mc();T.sc("innerHTML",T.pc(1,1,"ACCOUNTS.MIGRATED",n.descriptionParams),T.Hc)}}var X,Y=((X=function(){function t(e,n){var a=this;_classCallCheck(this,t),this.accountsService=e,this.locale=n,this.isLarge=!1,this.subscription=new R.a,this.subscription.add(this.accountsService.getMergeDate().subscribe((function(t){a.descriptionParams=a.mapTranslateParams(t,"d.MM.yy"),a.titleParams=a.mapTranslateParams(t,"d MMMM")})))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslateParams",value:function(t,e){return{date:Object(r.K)(t,"d.MM.yy",this.locale)}}}]),t}()).\u0275fac=function(t){return new(t||X)(T.Qb(q.a),T.Qb(T.u))},X.\u0275cmp=T.Kb({type:X,selectors:[["j-account-migrated"]],inputs:{isLarge:"isLarge"},decls:10,vars:4,consts:[["tooltipClass","tooltip-light",1,"migrated",3,"ngbTooltip"],["inlineSVG","assets/icons/v2/fail-16.svg",1,"migrated__icon"],[1,"migrated__text","text-danger"],[3,"ngTemplateOutlet"],["titleDefaultTemplate",""],["titleLargeTemplate",""],["migratedTooltipTemplate",""],[1,"text-left",3,"innerHTML"]],template:function(t,e){if(1&t&&(T.Wb(0,"div",0),T.Rb(1,"span",1),T.Wb(2,"strong",2),T.Sb(3,3),T.Vb(),T.Vb(),T.Pc(4,K,2,3,"ng-template",null,4,T.Qc),T.Pc(6,H,2,4,"ng-template",null,5,T.Qc),T.Pc(8,B,2,4,"ng-template",null,6,T.Qc)),2&t){var n=T.Dc(5),a=T.Dc(7),i=T.Dc(9);T.sc("ngbTooltip",i),T.Ab(2),T.Db(e.isLarge?"ml-1":"p4"),T.Ab(1),T.sc("ngTemplateOutlet",e.isLarge?a:n)}},directives:[s.E,F.a,r.B],pipes:[N.d],styles:[".migrated[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;line-height:12px}.migrated__icon[_ngcontent-%COMP%]{height:16px;margin-right:2px}"]}),X);function z(t,e){1&t&&T.Rb(0,"j-account-migrated",11)}function $(t,e){if(1&t&&(T.Wb(0,"div",7),T.Wb(1,"div",8),T.Wb(2,"span"),T.Rc(3),T.Vb(),T.Pc(4,z,1,0,"j-account-migrated",9),T.Vb(),T.Rb(5,"j-account-alter-code",10),T.Vb()),2&t){var n=T.mc();T.Ab(3),T.Sc(n.account.maskedIban),T.Ab(1),T.sc("ngIf",n.account.isMigrated),T.Ab(1),T.sc("account",n.account)}}function J(t,e){1&t&&T.Rb(0,"img",12)}var Z,tt=((Z=function(){function t(e){_classCallCheck(this,t),this.currency=e,this.isRoutable=!0}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(t){console.log(t)}},{key:"balance",get:function(){return this.account&&this.account.balance}},{key:"amount",get:function(){return this.currency.formatBalance(this.balance)}}]),t}()).\u0275fac=function(t){return new(t||Z)(T.Qb(j.a))},Z.\u0275cmp=T.Kb({type:Z,selectors:[["j-account-box"]],inputs:{account:"account",isRoutable:"isRoutable"},decls:7,vars:4,consts:[[1,"account-header"],["class","p2",4,"ngIf"],["src","./assets/icons/arrow-right.svg","class","account-arrow",4,"ngIf"],[1,"account-footer"],["size","sm",1,"account-img",3,"name"],[1,"account-amount"],[3,"money"],[1,"p2"],[1,"account__iban"],["class","ml-2",4,"ngIf"],[3,"account"],[1,"ml-2"],["src","./assets/icons/arrow-right.svg",1,"account-arrow"]],template:function(t,e){1&t&&(T.Wb(0,"div",0),T.Pc(1,$,6,3,"div",1),T.Pc(2,J,1,0,"img",2),T.Vb(),T.Wb(3,"div",3),T.Rb(4,"j-entity-logo",4),T.Wb(5,"h4",5),T.Rb(6,"j-money",6),T.Vb(),T.Vb()),2&t&&(T.Ab(1),T.sc("ngIf",e.account),T.Ab(1),T.sc("ngIf",e.isRoutable),T.Ab(2),T.sc("name",e.balance.currency),T.Ab(2),T.sc("money",e.balance))},directives:[r.u,W.a,D.a,Q,Y],styles:["[_nghost-%COMP%]{background:#fff;border-radius:12px;display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 10px 20px rgba(0,0,0,.04)}.account-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:baseline;align-items:baseline}.account-footer[_ngcontent-%COMP%], .account-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.account-footer[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media(min-width:1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]}),Z),et=n("fkRG");function nt(t,e){if(1&t&&(T.Ub(0),T.Wb(1,"div",1),T.Wb(2,"div",2),T.Wb(3,"span",3),T.Rc(4),T.Vb(),T.Wb(5,"div",4),T.Wb(6,"div",5),T.Rc(7),T.Vb(),T.Rb(8,"j-card-status",6),T.Vb(),T.Vb(),T.Rb(9,"img",7),T.Vb(),T.Wb(10,"div",8),T.Rb(11,"img",9),T.Wb(12,"h4",10),T.Rb(13,"j-money",11),T.Vb(),T.Vb(),T.Tb()),2&t){var n=T.mc();T.Ab(4),T.Tc(" ",n.card.alias||n.card.formattedName," "),T.Ab(3),T.Sc(n.card.maskedNumber),T.Ab(1),T.sc("isSmall",!0)("status",n.card.status),T.Ab(5),T.sc("money",n.card.balance)}}var at,it=((at=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||at)},at.\u0275cmp=T.Kb({type:at,selectors:[["j-card-box"]],inputs:{card:"card"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"account-header","p2"],[1,"account-iban-wrap"],[1,"account-iban","text-truncate"],[1,"d-flex"],[1,"text-muted","no-wrap"],[1,"no-wrap",3,"isSmall","status"],["src","./assets/icons/arrow-right.svg",1,"account-arrow"],[1,"account-footer"],["src","./assets/img/home/card-chip.svg"],[1,"ml-3","account-amount"],[3,"money"]],template:function(t,e){1&t&&T.Pc(0,nt,14,5,"ng-container",0),2&t&&T.sc("ngIf",e.card)},directives:[r.u,et.a,D.a],styles:["[_nghost-%COMP%]{background:#fff;border-radius:12px;display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;padding:20px;width:285px;height:145px;margin-bottom:1rem;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]:hover{box-shadow:0 0 1px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 10px 20px rgba(0,0,0,.04)}.account-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:baseline;align-items:baseline}.account-footer[_ngcontent-%COMP%], .account-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.account-footer[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media(min-width:1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account-iban[_ngcontent-%COMP%]{display:block}.account-iban-wrap[_ngcontent-%COMP%]{max-width:calc(100% - 1rem)}"]}),at),rt=n("4cI0"),ct=function(){return{width:"100px",height:"30px","margin-top":"2rem","background-color":"#ECEEF1"}},ot=function(){return{width:"285px",height:"145px","margin-right":"1rem","background-color":"#ECEEF1"}};function st(t,e){1&t&&(T.Ub(0),T.Rb(1,"ngx-skeleton-loader",4),T.Rb(2,"br"),T.Rb(3,"ngx-skeleton-loader",5),T.Tb()),2&t&&(T.Ab(1),T.sc("theme",T.wc(2,ct)),T.Ab(2),T.sc("theme",T.wc(3,ot)))}function ut(t,e){if(1&t){var n=T.Xb();T.Wb(0,"j-account-box",11),T.ic("click",(function(t){T.Gc(n);var a=e.$implicit;return T.mc(3).navigateToAccount(a)})),T.Vb()}2&t&&T.sc("account",e.$implicit)}function lt(t,e){if(1&t&&(T.Wb(0,"div",12),T.Rc(1),T.Vb()),2&t){var n=T.mc(3);T.Ab(1),T.Sc(n.accountsError)}}function dt(t,e){if(1&t&&(T.Ub(0),T.Wb(1,"div",7),T.Rc(2,"ACCOUNTS.REGULARS "),T.Vb(),T.Wb(3,"div",8),T.Pc(4,ut,1,1,"j-account-box",9),T.Pc(5,lt,2,1,"div",10),T.Vb(),T.Tb()),2&t){var n=T.mc(2);T.Ab(4),T.sc("ngForOf",n.accounts),T.Ab(1),T.sc("ngIf",n.accountsError)}}function bt(t,e){if(1&t&&(T.Wb(0,"div",6),T.Pc(1,dt,6,2,"ng-container",1),T.Vb()),2&t){var n=T.mc();T.Ab(1),T.sc("ngIf",(null==n.accounts?null:n.accounts.length)>0)}}function ft(t,e){if(1&t){var n=T.Xb();T.Wb(0,"j-card-box",14),T.ic("click",(function(t){T.Gc(n);var a=e.$implicit;return T.mc(2).navigateToCorporateCard(a)})),T.Vb()}2&t&&T.sc("card",e.$implicit)}function pt(t,e){if(1&t&&(T.Wb(0,"div",12),T.Rc(1),T.Vb()),2&t){var n=T.mc(2);T.Ab(1),T.Sc(n.cardsError)}}function ht(t,e){if(1&t&&(T.Wb(0,"div",6),T.Wb(1,"div",7),T.Rc(2,"ACCOUNTS.CARDS "),T.Vb(),T.Wb(3,"div",8),T.Pc(4,ft,1,1,"j-card-box",13),T.Pc(5,pt,2,1,"div",10),T.Vb(),T.Vb()),2&t){var n=T.mc();T.Ab(4),T.sc("ngForOf",n.cards),T.Ab(1),T.sc("ngIf",n.cardsError)}}function mt(t,e){if(1&t){var n=T.Xb();T.Wb(0,"j-account-box",11),T.ic("click",(function(t){T.Gc(n);var a=e.$implicit;return T.mc(2).navigateToAccount(a)})),T.Vb()}2&t&&T.sc("account",e.$implicit)}function gt(t,e){if(1&t&&(T.Wb(0,"div",6),T.Wb(1,"div",7),T.Rc(2,"ACCOUNTS.DEPOSITS "),T.Vb(),T.Wb(3,"div",8),T.Pc(4,mt,1,1,"j-account-box",9),T.Vb(),T.Vb()),2&t){var n=T.mc();T.Ab(4),T.sc("ngForOf",n.deposits)}}function vt(t,e){if(1&t){var n=T.Xb();T.Wb(0,"j-empty-placeholder",15),T.ic("retried",(function(t){return T.Gc(n),T.mc().loadLists()})),T.Vb()}2&t&&T.sc("hasRetry",!0)}var Ct,yt,St=((Ct=function(){function t(e,n,a,i,r,c,o){var s=this;_classCallCheck(this,t),this.companyService=e,this.accountsService=n,this.cardsService=a,this.router=i,this.route=r,this.authService=c,this.tourService=o,this.accountsError="",this.cardsError="",this.subscription=new R.a,this.isAccountsLoading=!1,this.pendingCardRequest=null,this.pendingAccountsRequest=null,this.tourStartId=null;var u=this.route.paramMap.pipe(Object(S.a)((function(){return window.history.state}))).subscribe((function(t){s.tourStartId=t.tourStartId,s.initTour()})),l=this.tourService.onTourStart$.subscribe((function(t){console.log(t),s.tourStartId=t,t&&s.initTour()}));this.subscription.add(u),this.subscription.add(l)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.accountsStore=this.accountsService.store,this.accountsStore.items$.subscribe((function(t){}),(function(t){})),this.subscription.add(this.companyService.refresh$.subscribe((function(e){var n=_slicedToArray(e,3);n[0],n[1],n[2]?t.loadLists():(t.authService.logout(),t.accounts=null,t.cards=null)})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"loadLists",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadCards(),this.loadAccountsAndDeposits();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"loadAccountsAndDeposits",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.accounts=null,this.deposits=null,this.isAccountsLoading=!0,t.prev=1,t.next=4,this.accountsService.getAccounts(this.companyService.currentId);case 4:e=t.sent,this.applyMigratedAccountsRule(e),this.accounts=e.filter((function(t){return t.accountType===P.a.ACCOUNT})),this.deposits=e.filter((function(t){return t.accountType===P.a.DEPOSIT})),this.accounts.filter((function(t){return t.hasAtfIban})).length>0?this.applyFirstAtfAccountsRule(this.accounts):this.deposits.filter((function(t){return t.hasAtfIban})).length>0&&this.applyFirstAtfAccountsRule(this.deposits),this.tourStartId=this.tourService.onTourStart$.value,this.initTour(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.accountsError=t.t0.desciption||t.t0.code||t.t0;case 11:return t.prev=11,this.isAccountsLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})))}},{key:"initTour",value:function(){switch(this.tourStartId){case"HOME":this.tourService.startTour(M.e.HOME);break;case"REQUISITES":this.tourService.startTour(M.e.REQUISITES_HOME);break;case"STATEMENT":this.tourService.startTour(M.e.STATEMENTS_HOME);break;case"HISTORY":this.tourService.startTour(M.e.HISTORY_HOME);break;case"IMPORT":this.tourService.startTour(M.e.IMPORT);break;case"CREATE_PAYMENT":this.tourService.startTour(M.e.CREATE_PAYMENT)}this.tourStartId=null}},{key:"navigateToAccount",value:function(t){var e;switch(this.tourService.onTourStart$.value){case"REQUISITES":e="REQUISITES_HOME.ACCOUNT";break;case"STATEMENT":e="STATEMENTS_HOME.ACCOUNT"}this.tourService.onTourStart$.next(null),this.router.navigate(["/accounts/".concat(t.iban)],{relativeTo:this.route,state:{tourStep:e}})}},{key:"navigateToCorporateCard",value:function(t){this.router.navigate(["/cards/".concat(t.cardId)])}},{key:"applyFirstAtfAccountsRule",value:function(t){t.find((function(t){return t.hasAtfIban})).isFirstAtfInTheList=!0}},{key:"startAccountsListTour",value:function(){this.tourService.startTour(M.e.HOME)}},{key:"applyMigratedAccountsRule",value:function(t){t.find((function(t){return t.isMigrated}))&&this.accountsService.retrieveMergeDate()}},{key:"loadCards",value:function(){var t=this;this.pendingCardRequest&&this.pendingCardRequest.unsubscribe(),this.cards=null,this.pendingCardRequest=this.cardsService.getCorporateCardsAsObservable().subscribe((function(e){t.cards=e.filter((function(t){return t.category===E.a.COMMERCIAL})),t.pendingCardRequest=null}))}},{key:"deposits$",get:function(){return this.accountsStore.items$.pipe(Object(S.a)((function(t){return t.filter((function(t){return t.accountType===P.a.DEPOSIT}))})))}},{key:"accounts$",get:function(){return this.accountsStore.items$.pipe(Object(S.a)((function(t){return t.filter((function(t){return t.accountType===P.a.ACCOUNT}))})))}}]),t}()).\u0275fac=function(t){return new(t||Ct)(T.Qb(k.a),T.Qb(P.c),T.Qb(L.a),T.Qb(m.c),T.Qb(m.a),T.Qb(A.a),T.Qb(M.g))},Ct.\u0275cmp=T.Kb({type:Ct,selectors:[["j-accounts-list"]],decls:9,vars:5,consts:[[1,"accounts-block"],[4,"ngIf"],["class","accounts-wrap",4,"ngIf"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried",4,"ngIf"],[3,"theme"],["count","2",3,"theme"],[1,"accounts-wrap"],["translate","",1,"accounts-heading"],[1,"accounts-list"],[3,"account","click",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],[3,"account","click"],[1,"alert","alert-danger"],[3,"card","click",4,"ngFor","ngForOf"],[3,"card","click"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried"]],template:function(t,e){1&t&&(T.Wb(0,"div",0),T.Wb(1,"div"),T.Pc(2,st,4,4,"ng-container",1),T.Wb(3,"div"),T.Pc(4,bt,2,1,"div",2),T.Pc(5,ht,6,2,"div",2),T.Pc(6,gt,5,1,"div",2),T.Pc(7,vt,1,1,"j-empty-placeholder",3),T.Vb(),T.Vb(),T.Rb(8,"j-exchange-rates"),T.Vb()),2&t&&(T.Ab(2),T.sc("ngIf",e.isAccountsLoading),T.Ab(2),T.sc("ngIf",!e.isAccountsLoading),T.Ab(1),T.sc("ngIf",(null==e.cards?null:e.cards.length)>0),T.Ab(1),T.sc("ngIf",(null==e.deposits?null:e.deposits.length)>0),T.Ab(1),T.sc("ngIf",0==(null==e.accounts?null:e.accounts.length)&&0==(null==e.cards?null:e.cards.length)&&0==(null==e.deposits?null:e.deposits.length)))},directives:[r.u,V.a,d.a,N.a,r.t,tt,it,rt.a],styles:[".accounts-block[_ngcontent-%COMP%]{display:grid;row-gap:1rem}@media(min-width:670px){.accounts-block[_ngcontent-%COMP%]{grid-template-columns:1fr 295px}}.accounts-wrap[_ngcontent-%COMP%]{margin:2rem 0}.accounts-heading[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-bottom:1rem}.accounts-list[_ngcontent-%COMP%]{min-height:145px;position:relative}.deposit-item[_ngcontent-%COMP%]{cursor:default!important}"]}),Ct),_t=n("R0Ic"),Tt=n("aDQ/"),kt=n("paXB"),xt=n("7/bn"),At=n("oMXN"),Ot=n("EiG8"),It=n("aZ8m"),wt=((yt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"prepareRoute",value:function(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}}]),t}()).\u0275fac=function(t){return new(t||yt)},yt.\u0275cmp=T.Kb({type:yt,selectors:[["j-home"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"]],template:function(t,e){1&t&&(T.Wb(0,"j-layout-home"),T.Wb(1,"j-aside"),T.Rb(2,"j-nav-main"),T.Vb(),T.Wb(3,"j-main"),T.Wb(4,"section",0),T.Wb(5,"section",1),T.Rb(6,"j-header"),T.Rb(7,"router-outlet"),T.Vb(),T.Vb(),T.Vb(),T.Vb())},directives:[kt.a,xt.a,At.a,Ot.a,It.a,m.h],styles:[""],encapsulation:2,data:{animation:[Object(_t.n)("routeAnimations",[Object(_t.m)("* => slideRouteAnimations",Object(_t.o)(Tt.a))])]}}),yt),Rt=n("IzEk"),Pt=n("9N4E"),Et=n("y5b2"),Mt=n("TwVa"),Lt=n("jZlK"),Vt=n("iCQh"),Nt=n("mR7B"),jt=n("S1F0"),Wt=n("oKsb"),Dt=n("zdqJ"),Ft=n("fvpk"),Ut=n("Tile"),Gt=n("THGi"),Qt=n("S09V"),qt=n("7rOj"),Kt=n("VO+5"),Ht=n("Dvla");function Bt(t,e){if(1&t){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"div",18),T.Wb(2,"div",3),T.Rb(3,"div",19),T.Wb(4,"button",5),T.ic("loaded",(function(t){return T.Gc(n),T.mc().onAccountLoad(t)}))("failed",(function(t){return T.Gc(n),T.mc().onAccountFail()}))("click",(function(t){return T.Gc(n),T.mc().onQrService(t)})),T.Rb(5,"span",6),T.Rb(6,"span",7),T.Vb(),T.Vb(),T.Rb(7,"img",8),T.Vb(),T.Vb()}2&t&&(T.Ab(5),T.sc("inlineSVG","assets/icons/account/print.svg"))}function Xt(t,e){1&t&&(T.Wb(0,"h6",20),T.Rc(1),T.nc(2,"translate"),T.Vb()),2&t&&(T.Ab(1),T.Sc(T.oc(2,1,"ACCOUNTS.REQUISITES.LIST_TITLE")))}function Yt(t,e){if(1&t&&(T.Wb(0,"div",21),T.Wb(1,"div",22),T.Rc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",23),T.Rc(5),T.Vb(),T.Vb()),2&t){var n=e.$implicit;T.Ab(2),T.Tc(" ",T.oc(3,2,n.label),": "),T.Ab(3),T.Tc(" ",n.value," ")}}function zt(t,e){if(1&t&&(T.Wb(0,"div",21),T.Wb(1,"div",22),T.Rc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",23),T.Rc(5),T.Vb(),T.Vb()),2&t){var n=e.$implicit;T.Ab(2),T.Tc(" ",T.oc(3,2,n.label),": "),T.Ab(3),T.Tc(" ",n.value," ")}}function $t(t,e){if(1&t&&(T.Wb(0,"div",24),T.Wb(1,"h6",20),T.Rc(2),T.nc(3,"translate"),T.Vb(),T.Pc(4,zt,6,4,"div",11),T.Vb()),2&t){var n=T.mc();T.Ab(2),T.Sc(T.oc(3,2,"ACCOUNTS.REQUISITES.LIST_OLD_TITLE")),T.Ab(2),T.sc("ngForOf",n.oldList)}}var Jt,Zt,te=((Jt=function(){function t(e,n,a,i,r,c,o,s,u){_classCallCheck(this,t),this.companyService=e,this.bankFromAccount=n,this.maskPipe=a,this.formatIban=i,this.translateService=r,this.notifierService=c,this.accountsService=o,this.filesService=s,this.featureFlagsService=u,this.isLoaded=!1,this.knp="",this.isQrVisible=!1,this.subscription=new R.a,this.loadFeatureFlags()}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ngOnInit",value:function(){this.generateList(),this.generateOldList(),this.generateTextToCopy(),this.isLoaded=!0,this.checkFeatureFlags()}},{key:"loadFeatureFlags",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.featureFlagsService.featureFlags$.toPromise();case 2:this.featureFlags=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onAccountLoad",value:function(t){this.init(t)}},{key:"onAccountFail",value:function(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}},{key:"onCopy",value:function(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}},{key:"onDownload",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountsService.getPdf(this.companyService.currentId,this.account.iban);case 3:e=t.sent,this.filesService.downloadFile(e,"".concat(this.account.iban,".pdf")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"generateList",value:function(){var t,e,n,a;this.list=[{label:this.appendTranslationPrefix("COMPANY"),value:this.companyService.currentCompany.name},{label:this.appendTranslationPrefix("IIN"),valueToCopy:this.companyService.currentCompany.bin,value:this.maskPipe.transform(this.companyService.currentCompany.bin,Qt.a.iin.mask)},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),valueToCopy:null===(t=this.account)||void 0===t?void 0:t.iban,value:this.formatIban.transform(null===(e=this.account)||void 0===e?void 0:e.iban)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(null===(n=this.account)||void 0===n?void 0:n.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(null===(a=this.account)||void 0===a?void 0:a.iban,"bic")}]}},{key:"generateOldList",value:function(){var t,e=null===(t=this.account)||void 0===t?void 0:t.alterCode;this.oldList=[{label:this.appendTranslationPrefix("IBAN"),valueToCopy:e,value:this.formatIban.transform(e)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(e,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(e,"bic")}]}},{key:"generateTextToCopy",value:function(){var t=this;this.textToCopy=this.list.map((function(e){if(e.value||e.valueToCopy)return"".concat(t.translateService.instant(e.label),": ").concat(e.valueToCopy||e.value)})).join("\n")}},{key:"appendTranslationPrefix",value:function(t){return"ACCOUNTS.REQUISITES.".concat(t)}},{key:"init",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.account=t,this.generateRequisites(),this.generateTextToCopy(),this.isLoaded=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"loadQr",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.companyService.currentCompany.kod,t.next=3,this.accountsService.getQrPrint(this.account.id,this.account.iban,e,this.knp);case 3:this.qrFile=t.sent;case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onQrService",value:function(t){t.preventDefault(),this.knp="859",this.loadQr(),this.filesService.downloadFile(this.qrFile,"".concat(this.companyService.currentCompany.shortName," QR \u0437\u0430 \u0443\u0441\u043b\u0443\u0433\u0438.jpg"))}},{key:"onQrProduct",value:function(t){t.preventDefault(),this.knp="710",this.loadQr(),this.filesService.downloadFile(this.qrFile,"".concat(this.companyService.currentCompany.shortName," QR \u0437\u0430 \u0442\u043e\u0432\u0430\u0440.jpg"))}},{key:"checkFeatureFlags",value:function(){var t,e;return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.featureFlags,n.t0){n.next=4;break}return n.next=4,this.loadFeatureFlags();case 4:this.isQrVisible=!this.featureFlagsService.isDisabled(g.a.ACCOUNT_QR)&&"ACCOUNT"===this.account.accountType&&(null===(t=this.account.balance)||void 0===t?void 0:t.currency)&&"KZT"===(null===(e=this.account.balance)||void 0===e?void 0:e.currency);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"generateRequisites",value:function(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.account.iban},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.account.iban),valueToCopy:this.account.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.account.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.account.iban,"bic")}]}},{key:"hasAtfIban",get:function(){var t;return(null===(t=this.account)||void 0===t?void 0:t.hasAtfIban)||!1}}]),t}()).\u0275fac=function(t){return new(t||Jt)(T.Qb(k.a),T.Qb(qt.b),T.Qb(u.b),T.Qb(qt.d),T.Qb(N.e),T.Qb(Kt.c),T.Qb(P.c),T.Qb(Vt.a),T.Qb(g.b))},Jt.\u0275cmp=T.Kb({type:Jt,selectors:[["j-requisites"]],inputs:{account:"account"},decls:22,vars:8,consts:[["jTour","REQUISITES.QR","jTourPosition","right",1,"info","mb-3"],[4,"ngIf"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.PRODUCT"],[1,"btn","btn-link","qr__print","p3",3,"loaded","failed","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","./assets/img/cards/qr.png",1,"qr__img"],["jTour","REQUISITES.INFO","jTourPosition","right",1,"info","mb-3"],["class","mb-3",4,"ngIf"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],["class","info","jTour","REQUISITES.OLD","jTourPosition","right",4,"ngIf"],[1,"qr","mb-4"],["translate","ACCOUNTS.REQUISITES.QR.SERVICE"],[1,"mb-3"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["jTour","REQUISITES.OLD","jTourPosition","right",1,"info"]],template:function(t,e){1&t&&(T.Wb(0,"div",0),T.Pc(1,Bt,8,1,"div",1),T.Wb(2,"div",2),T.Wb(3,"div",3),T.Rb(4,"div",4),T.Wb(5,"button",5),T.ic("loaded",(function(t){return e.onAccountLoad(t)}))("failed",(function(t){return e.onAccountFail()}))("click",(function(t){return e.onQrProduct(t)})),T.Rb(6,"span",6),T.Rb(7,"span",7),T.Vb(),T.Vb(),T.Rb(8,"img",8),T.Vb(),T.Vb(),T.Wb(9,"div",9),T.Pc(10,Xt,3,3,"h6",10),T.Pc(11,Yt,6,4,"div",11),T.Wb(12,"div",12),T.Wb(13,"button",13),T.ic("click",(function(t){return e.onDownload()})),T.Rb(14,"div",14),T.Wb(15,"strong",15),T.Rc(16,"ACCOUNTS.REQUISITES.DOWNLOAD"),T.Vb(),T.Vb(),T.Wb(17,"button",16),T.ic("click",(function(t){return e.onCopy()})),T.Rb(18,"div",14),T.Wb(19,"strong",15),T.Rc(20,"ACCOUNTS.REQUISITES.COPY"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Pc(21,$t,5,4,"div",17)),2&t&&(T.Ab(1),T.sc("ngIf",e.isQrVisible),T.Ab(5),T.sc("inlineSVG","assets/icons/account/print.svg"),T.Ab(4),T.sc("ngIf",e.hasAtfIban),T.Ab(1),T.sc("ngForOf",e.list),T.Ab(3),T.sc("inlineSVG","assets/icons/account/pdf.svg"),T.Ab(3),T.sc("cbContent",e.textToCopy),T.Ab(1),T.sc("inlineSVG","assets/icons/account/copy.svg"),T.Ab(3),T.sc("ngIf",e.hasAtfIban))},directives:[Dt.a,r.u,N.a,F.a,r.t,Ht.a],pipes:[N.d],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;-webkit-box-pack:center;justify-content:center;min-width:calc(50% - .5rem)}.qr[_ngcontent-%COMP%], .requisites__button[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.qr[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}.qr[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:-webkit-inline-box;display:inline-flex;margin-top:.5rem;padding:0}.qr__print[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]:hover{-webkit-transform:none;transform:none}.qr__print[_ngcontent-%COMP%]:hover{color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}.requisites__footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}"]}),Jt),ee=n("p6Hd"),ne=function(t){return t.PDF="PDF",t.XLSX="XLSX",t.ONE_C="ONE_C",t}({}),ae=function(t){return t.DAILY="DAILY",t.MONTHLY="MONTHLY",t}({}),ie=((Zt=function(){function t(e,n){_classCallCheck(this,t),this.companyService=e,this.api=n}return _createClass(t,[{key:"getSubscriptions",value:function(t){var e=this.getApiUrl(t);return this.api.get(e)}},{key:"saveSubscription",value:function(t,e){var n=this.getApiUrl(t.accountId,e);return this.api.put(n,t)}},{key:"createSubscription",value:function(t){var e=this.getApiUrl(t.accountId);return this.api.post(e,t)}},{key:"deleteSubscription",value:function(t,e){var n=this.getApiUrl(t,e);return this.api.delete(n)}},{key:"getApiUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"companies/".concat(this.companyService.currentId,"/accounts/").concat(t,"/statements-subscriptions").concat(e?"/"+e:"")}}]),t}()).\u0275fac=function(t){return new(t||Zt)(T.ec(k.a),T.ec(ee.a))},Zt.\u0275prov=T.Mb({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt),re=n("YMfE"),ce=n("Bl/x"),oe=n("M6pS"),se=n("9odQ");function ue(t,e){if(1&t&&(T.Wb(0,"div",18),T.Rb(1,"input",19),T.Wb(2,"label",20),T.Rc(3),T.Vb(),T.Vb()),2&t){var n=e.$implicit;T.Ab(1),T.sc("id",n.id)("value",n.value),T.Ab(1),T.sc("for",n.id),T.Ab(1),T.Sc(n.label)}}function le(t,e){if(1&t){var n=T.Xb();T.Wb(0,"a",24),T.ic("click",(function(t){T.Gc(n);var e=T.mc().index;return T.mc(2).deleteEmail(t,e)})),T.Vb()}2&t&&T.sc("inlineSVG","assets/icons/shared/delete.svg")}function de(t,e){if(1&t&&(T.Wb(0,"div",21),T.Rb(1,"j-input",22),T.nc(2,"translate"),T.nc(3,"translate"),T.Pc(4,le,1,1,"a",23),T.Vb()),2&t){var n=e.$implicit,a=e.index,i=T.mc(2);T.Ab(1),T.sc("label",T.oc(2,6,"ACCOUNTS.EXPORT.EMAIL.TITLE"))("name","exportEmail"+a)("formControl",n)("errorText",T.oc(3,8,i.mapEmailErrorText(n.errors)))("hasError",n.errors&&i.isSubmitted),T.Ab(3),T.sc("ngIf",a>0)}}function be(t,e){if(1&t){var n=T.Xb();T.Wb(0,"a",25),T.ic("click",(function(t){return T.Gc(n),T.mc(2).addEmail(t)})),T.Rc(1," ACCOUNTS.EXPORT.EMAIL.ADD "),T.Vb()}}function fe(t,e){if(1&t){var n=T.Xb();T.Wb(0,"form",1),T.Wb(1,"div",2),T.Rb(2,"j-switch",3),T.Wb(3,"span",4),T.Wb(4,"strong",5),T.Rc(5),T.Vb(),T.Rb(6,"br"),T.Wb(7,"small",6),T.Rc(8),T.Vb(),T.Vb(),T.Vb(),T.Wb(9,"div",7),T.Wb(10,"div",8),T.Wb(11,"div",9),T.Wb(12,"strong",10),T.Rc(13,"ACCOUNTS.EXPORT.FILE_FORMAT"),T.Vb(),T.Wb(14,"div",11),T.Pc(15,ue,4,4,"div",12),T.Vb(),T.Vb(),T.Wb(16,"div",9),T.Wb(17,"strong",10),T.Rc(18,"ACCOUNTS.EXPORT.EMAIL.TITLE"),T.Vb(),T.Wb(19,"div",13),T.Rc(20," ACCOUNTS.EXPORT.EMAIL.DESCRIPTION "),T.Vb(),T.Pc(21,de,5,10,"div",14),T.Pc(22,be,2,0,"a",15),T.Vb(),T.Wb(23,"div",16),T.Wb(24,"button",17),T.ic("click",(function(t){return T.Gc(n),T.mc().onSubmit()})),T.Rc(25,"SHARED.SAVE"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()}if(2&t){var a=T.mc();T.sc("formGroup",a.subscriptionForm),T.Ab(5),T.Sc(a.title),T.Ab(3),T.Sc(a.description),T.Ab(1),T.sc("@smoothCollapse",a.isCollapsed?"final":"initial"),T.Ab(6),T.sc("ngForOf",a.fileTypes),T.Ab(6),T.sc("ngForOf",a.emailControls),T.Ab(1),T.sc("ngIf",a.emailControls.length<3),T.Ab(2),T.sc("disabled",a.isLoading)("jLoading",a.isLoading)}}var pe,he=((pe=function(){function t(){_classCallCheck(this,t),this.deleted=new T.n,this.submitted=new T.n,this.isSubmitted=!1,this.fileTypes=[{label:"PDF",value:"PDF",id:Object(re.generateUniqueId)()},{label:"EXL",value:"XLSX",id:Object(re.generateUniqueId)()},{label:"1C",value:"ONE_C",id:Object(re.generateUniqueId)()}],this.FORM_DEFAULTS={enabled:!1,id:null,emails:[""],exportType:ne.PDF}}return _createClass(t,[{key:"ngOnChanges",value:function(t){var e,n,a,i,r,c;t.isLoading&&(t.isLoading.currentValue?null===(e=this.subscriptionForm)||void 0===e||e.disable():null===(n=this.subscriptionForm)||void 0===n||n.enable()),t.savedSubscription&&(null===(a=this.subscriptionForm)||void 0===a||a.patchValue({id:(null===(i=this.savedSubscription)||void 0===i?void 0:i.id)||this.f.id.value||this.FORM_DEFAULTS.id,emails:(null===(r=this.savedSubscription)||void 0===r?void 0:r.emails)||this.f.emails.value||this.FORM_DEFAULTS.emails,exportType:(null===(c=this.savedSubscription)||void 0===c?void 0:c.exportType)||this.f.exportType.value||this.FORM_DEFAULTS.exportType}))}},{key:"ngOnInit",value:function(){var t,e,n,a,i=this,r={enabled:!(null===(t=this.savedSubscription)||void 0===t||!t.id),id:(null===(e=this.savedSubscription)||void 0===e?void 0:e.id)||this.FORM_DEFAULTS.id,emails:(null===(n=this.savedSubscription)||void 0===n?void 0:n.emails)||this.FORM_DEFAULTS.emails,exportType:(null===(a=this.savedSubscription)||void 0===a?void 0:a.exportType)||this.FORM_DEFAULTS.exportType};this.subscriptionForm=new c.k({switch:new c.h(r.enabled),id:new c.h(r.id),emails:new c.e(r.emails.map((function(t){return new c.h(t,[c.H.email,c.H.required])}))),exportType:new c.h(r.exportType)}),this.isLoading&&this.subscriptionForm.disable(),this.subscriptionForm.valueChanges.subscribe((function(t){i.isSubmitted=!1,0==t.switch&&(i.deleted.emit(i.f.id.value),i.clearFormArray(i.f.emails),i.subscriptionForm.reset(i.FORM_DEFAULTS))}))}},{key:"onSubmit",value:function(){this.isSubmitted=!0,this.subscriptionForm.invalid||this.submitted.emit(this.subscriptionForm.getRawValue())}},{key:"addEmail",value:function(t){t.preventDefault(),this.isLoading||3==this.emailControls.length||(this.isSubmitted=!1,this.emailControls.push(new c.h("",[c.H.email,c.H.required])))}},{key:"deleteEmail",value:function(t,e){t.preventDefault(),this.isLoading||this.emailControls.splice(e,1)}},{key:"mapEmailErrorText",value:function(t){var e;return(null===(e=t)||void 0===e?void 0:e.email)?"ERRORS.WRONG_FORMAT":null}},{key:"clearFormArray",value:function(t){for(;1!==t.length;)t.removeAt(0)}},{key:"isCollapsed",get:function(){var t,e,n;return 1==(null===(n=null===(e=null===(t=this.subscriptionForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.switch)||void 0===n?void 0:n.value)}},{key:"emailControls",get:function(){return this.f.emails.controls}},{key:"f",get:function(){var t;return null===(t=this.subscriptionForm)||void 0===t?void 0:t.controls}}]),t}()).\u0275fac=function(t){return new(t||pe)},pe.\u0275cmp=T.Kb({type:pe,selectors:[["j-account-subscription"]],inputs:{title:"title",isLoading:"isLoading",description:"description",savedSubscription:"savedSubscription"},outputs:{deleted:"deleted",submitted:"submitted"},features:[T.yb()],decls:1,vars:1,consts:[["class","export",3,"formGroup",4,"ngIf"],[1,"export",3,"formGroup"],[1,"export__header"],["formControlName","switch"],[1,"ml-3"],["translate",""],["translate","",1,"text-gray"],[1,"export__body"],[1,"export__form"],[1,"form-group"],["translate","",1,"export__label","p2"],[1,"export__types"],["class","export__radio",4,"ngFor","ngForOf"],["translate","",1,"p3","text-muted","export__description"],["class","export__email",4,"ngFor","ngForOf"],["href","#","class","export__add-email link-blue","translate","",3,"click",4,"ngIf"],[1,"export__submit"],["type","submit","translate","",1,"btn","btn-primary",3,"disabled","jLoading","click"],[1,"export__radio"],["type","radio","formControlName","exportType","name","exportType",3,"id","value"],[1,"btn","btn-sm",3,"for"],[1,"export__email"],[3,"label","name","formControl","errorText","hasError"],["href","#","class","export__delete-email",3,"inlineSVG","click",4,"ngIf"],["href","#",1,"export__delete-email",3,"inlineSVG","click"],["href","#","translate","",1,"export__add-email","link-blue",3,"click"]],template:function(t,e){1&t&&T.Pc(0,fe,26,9,"form",0),2&t&&T.sc("ngIf",e.subscriptionForm)},directives:[r.u,c.J,c.u,c.l,ce.a,c.t,c.j,N.a,r.t,oe.a,c.B,c.c,se.b,c.i,F.a],pipes:[N.d],styles:[".export[_ngcontent-%COMP%]{margin:.5rem 0 1rem;background:#fff;border-radius:.75rem}.export__header[_ngcontent-%COMP%]{padding:1rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.export__body[_ngcontent-%COMP%]{padding:0 1rem;border-top:1px solid #eceef1}.export__types[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff;background-color:#474b52;border-color:#474b52;box-shadow:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover{color:#fff;background-color:#35383e;border-color:#2f3237}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus{color:#fff;background-color:#35383e;border-color:#2f3237;box-shadow:0 0 0 .0625rem rgba(99,102,108,.5)}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#474b52;border-color:#474b52}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#2f3237;border-color:#292c30}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(99,102,108,.5)}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:active, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1);transform:scale(1);color:#fff!important}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#212529;background-color:#fff;border-color:#d6dadf;margin-right:.5rem;margin-bottom:0;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);color:#666c72;height:35px;position:relative}.export__radio[_ngcontent-%COMP%]   label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#212529;background-color:#ececec;border-color:#b9c0c9}.export__radio[_ngcontent-%COMP%]   label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(187,191,196,.5)}.export__radio[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#fff;border-color:#d6dadf}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#e6e6e6;border-color:#b2bac3}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(187,191,196,.5)}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:active, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#666c72!important;-webkit-transform:scale(1);transform:scale(1)}.export__form[_ngcontent-%COMP%]{padding-top:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%] + .form-group[_ngcontent-%COMP%]{margin-top:1.5rem}.export__label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.export__description[_ngcontent-%COMP%]{margin-bottom:1rem}.export__add-email[_ngcontent-%COMP%]{position:relative;top:-.5rem}.export__delete-email[_ngcontent-%COMP%]{color:#b7bec5;margin:0 1rem 1rem}.export__delete-email[_ngcontent-%COMP%]:hover{color:#ef5630}.export__email[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.export__email[_ngcontent-%COMP%]   j-input[_ngcontent-%COMP%]{width:100%}.export__submit[_ngcontent-%COMP%]{padding:1rem 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}"],data:{animation:[Object(_t.n)("smoothCollapse",[Object(_t.k)("initial",Object(_t.l)({height:"0",overflow:"hidden",opacity:"0"})),Object(_t.k)("final",Object(_t.l)({overflow:"hidden",opacity:"1"})),Object(_t.m)("initial=>final",Object(_t.e)("300ms")),Object(_t.m)("final=>initial",Object(_t.e)("300ms"))])]}}),pe);function me(t,e){if(1&t){var n=T.Xb();T.Ub(0),T.Wb(1,"j-account-subscription",1),T.ic("deleted",(function(t){return T.Gc(n),T.mc().onDeleteDaily(t)}))("submitted",(function(t){return T.Gc(n),T.mc().onDailySubmit(t)})),T.Vb(),T.Wb(2,"j-account-subscription",1),T.ic("deleted",(function(t){return T.Gc(n),T.mc().onDeleteMonthly(t)}))("submitted",(function(t){return T.Gc(n),T.mc().onMonthlySubmit(t)})),T.Vb(),T.Tb()}if(2&t){var a=T.mc();T.Ab(1),T.sc("title","ACCOUNTS.EXPORT.DAILY.TITLE")("description","ACCOUNTS.EXPORT.DAILY.DESCRIPTION")("savedSubscription",a.dailySubscription)("isLoading",a.isDailyLoading),T.Ab(1),T.sc("title","ACCOUNTS.EXPORT.MONTHLY.TITLE")("description","ACCOUNTS.EXPORT.MONTHLY.DESCRIPTION")("savedSubscription",a.monthlySubscription)("isLoading",a.isMonthlyLoading)}}var ge,ve=((ge=function(){function t(e,n,a){_classCallCheck(this,t),this.accountSubscriptionService=e,this.notifierService=n,this.translateService=a,this.loaded=!1,this.isDailyLoading=!0,this.isMonthlyLoading=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.init()}},{key:"init",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.accountSubscriptionService.getSubscriptions(this.account.id);case 2:e=t.sent,this.dailySubscription=e.find((function(t){return t.subscriptionType===ae.DAILY}))||null,this.monthlySubscription=e.find((function(t){return t.subscriptionType===ae.MONTHLY}))||null,this.isDailyLoading=!1,this.isMonthlyLoading=!1,this.loaded=!0;case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onDailySubmit",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isDailyLoading=!0,e.prev=1,e.next=4,this.submitSubscription(t,ae.DAILY);case 4:this.dailySubscription=e.sent,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.SUBSCRIBED")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.notifierService.notify("error",e.t0.description||e.t0.code);case 11:return e.prev=11,this.isDailyLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})))}},{key:"onMonthlySubmit",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isMonthlyLoading=!0,e.prev=1,e.next=4,this.submitSubscription(t,ae.MONTHLY);case 4:this.monthlySubscription=e.sent,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.SUBSCRIBED")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.notifierService.notify("error",e.t0.description||e.t0.code);case 11:return e.prev=11,this.isMonthlyLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})))}},{key:"onDeleteDaily",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDailyLoading){e.next=15;break}return this.isDailyLoading=!0,e.prev=2,e.next=5,this.deleteSubscription(t);case 5:this.dailySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.UNSUBSCRIBED")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.notifierService.notify("error",e.t0.description||e.t0.code);case 12:return e.prev=12,this.isDailyLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})))}},{key:"onDeleteMonthly",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMonthlyLoading){e.next=15;break}return this.isMonthlyLoading=!0,e.prev=2,e.next=5,this.deleteSubscription(t);case 5:this.monthlySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.UNSUBSCRIBED")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.notifierService.notify("error",e.t0.description||e.t0.code);case 12:return e.prev=12,this.isMonthlyLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})))}},{key:"deleteSubscription",value:function(t){if(t)return this.accountSubscriptionService.deleteSubscription(this.account.id,t)}},{key:"submitSubscription",value:function(t,e){var n={accountId:this.account.id,emails:t.emails,exportType:t.exportType,subscriptionType:e};return t.id?this.accountSubscriptionService.saveSubscription(n,t.id):this.accountSubscriptionService.createSubscription(n)}}]),t}()).\u0275fac=function(t){return new(t||ge)(T.Qb(ie),T.Qb(Kt.c),T.Qb(N.e))},ge.\u0275cmp=T.Kb({type:ge,selectors:[["j-account-export"]],inputs:{account:"account"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","description","savedSubscription","isLoading","deleted","submitted"]],template:function(t,e){1&t&&T.Pc(0,me,3,8,"ng-container",0),2&t&&T.sc("ngIf",e.loaded)},directives:[r.u,he],styles:[""]}),ge);function Ce(t,e){if(1&t){var n=T.Xb();T.Wb(0,"div",9),T.Rb(1,"div"),T.Rb(2,"div"),T.Wb(3,"div"),T.Wb(4,"span",10),T.Rc(5,"ACCOUNTS.SETTINGS.LIMIT_ALL"),T.Vb(),T.Vb(),T.Wb(6,"j-switch",11),T.ic("change",(function(t){return T.Gc(n),T.mc().onChangeAll(t)})),T.Vb(),T.Vb()}if(2&t){var a=T.mc();T.Ab(6),T.sc("value",a.isAllSelected)}}function ye(t,e){if(1&t){var n=T.Xb();T.Wb(0,"div",12),T.Wb(1,"div",13),T.Rc(2),T.Vb(),T.Wb(3,"div",14),T.Rc(4),T.Vb(),T.Wb(5,"div",13),T.Wb(6,"span"),T.Rc(7),T.Vb(),T.Wb(8,"small",15),T.Wb(9,"span",16),T.Rc(10),T.Vb(),T.Rc(11," \u2022 "),T.Wb(12,"span",16),T.Rc(13),T.Vb(),T.Vb(),T.Vb(),T.Wb(14,"j-switch",11),T.ic("change",(function(t){T.Gc(n);var a=e.$implicit;return T.mc().onChange(t,a)})),T.Vb(),T.Vb()}if(2&t){var a=e.$implicit,i=e.index,r=T.mc();T.Ab(2),T.Sc(i+1),T.Ab(1),T.Db(a.color),T.Ab(1),T.Tc(" ",a.initials," "),T.Ab(3),T.Vc("",a.lastname," ",a.firstname," ",a.middlename,""),T.Ab(3),T.Sc(a.role),T.Ab(3),T.Sc(a.sign),T.Ab(1),T.sc("value",a.accountGrantType===r.grants.UNAVAILABLE)}}function Se(t,e){if(1&t){var n=T.Xb();T.Ub(0),T.Wb(1,"div",17),T.Rc(2,"ACCOUNTS.SETTINGS.GRANTS_LOADING_ERROR"),T.Vb(),T.Wb(3,"button",18),T.ic("click",(function(t){return T.Gc(n),T.mc().getAccountGrants()})),T.Rc(4,"SHARED.REFRESH"),T.Vb(),T.Tb()}}function _e(t,e){if(1&t){var n=T.Xb();T.Ub(0),T.Wb(1,"div",17),T.Rc(2,"ACCOUNTS.SETTINGS.NO_GRANTABLE_USERS"),T.Vb(),T.Wb(3,"button",18),T.ic("click",(function(t){return T.Gc(n),T.mc().modal.dismiss()})),T.Rc(4,"SHARED.CLOSE"),T.Vb(),T.Tb()}}var Te,ke,xe=((ke=function(){function t(e,n,a,i){_classCallCheck(this,t),this.modal=e,this.accountsService=n,this.notifierService=a,this.translateService=i,this.error=null,this.grants=P.d}return _createClass(t,[{key:"ngOnInit",value:function(){this.getAccountGrants()}},{key:"getAccountGrants",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountsService.getAccountsGrants(this.companyId,this.accountId);case 3:this.users=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.error="error";case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"onChange",value:function(t,e){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.accountGrantType=this.getGrantType(t.target.value),n.next=4,this.accountsService.setAccountGrant(this.companyId,this.accountId,[this.mapParams(e,e.accountGrantType)]);case 4:this.showNotificationForUser(e),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),this.notifierService.notify("error",n.t0.description||n.t0.code||this.translateService.instant("SHARED.ACTION_ERROR"));case 11:case"end":return n.stop()}}),n,this,[[0,8]])})))}},{key:"onChangeAll",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getGrantType(t.target.value),a=this.users.map((function(t){return i.mapParams(t,n)})),e.next=4,this.accountsService.setAccountGrant(this.companyId,this.accountId,a);case 4:this.showNotification(n),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId),this.users.forEach((function(t){return t.accountGrantType=n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.notifierService.notify("error",e.t0.description||e.t0.code||this.translateService.instant("SHARED.ACTION_ERROR"));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))}},{key:"showNotificationForUser",value:function(t){var e=this.translateService.instant(t.accountGrantType===P.d.AVAILABLE?"ACCOUNTS.SETTINGS.USER_GRANTED":"ACCOUNTS.SETTINGS.USER_LIMITED",{user:"".concat(t.lastname," ").concat(t.firstname," ").concat(t.middlename)});this.notifierService.notify("default",e)}},{key:"showNotification",value:function(t){var e=this.translateService.instant(t===P.d.AVAILABLE?"ACCOUNTS.SETTINGS.GRANTED_ALL":"ACCOUNTS.SETTINGS.LIMITED_ALL");this.notifierService.notify("default",e)}},{key:"mapParams",value:function(t,e){return{id:t.userId,userAuthorityId:t.userAuthorityId,accountGrantType:e}}},{key:"getGrantType",value:function(t){return"true"===t?P.d.UNAVAILABLE:P.d.AVAILABLE}},{key:"isAllSelected",get:function(){var t,e=this;return null===(t=this.users)||void 0===t?void 0:t.every((function(t){return t.accountGrantType===e.grants.UNAVAILABLE}))}}]),t}()).\u0275fac=function(t){return new(t||ke)(T.Qb(s.a),T.Qb(P.c),T.Qb(Kt.c),T.Qb(N.e))},ke.\u0275cmp=T.Kb({type:ke,selectors:[["j-account-grants"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:12,vars:7,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-header"],["translate","",1,"users-header"],[1,"modal-body"],["translate","","class","users-list__row",4,"ngIf"],["class","users-list__row",4,"ngFor","ngForOf"],[4,"ngIf"],["translate","",1,"users-list__row"],["translate","",1,"users-list__cell"],[1,"users-list__cell",3,"value","change"],[1,"users-list__row"],[1,"users-list__cell"],[1,"users-list__initials","p2","users-list__cell"],[1,"text-gray"],["translate",""],["translate","",1,"users-list__error"],["translate","",1,"btn","btn-link","btn-block",3,"click"]],template:function(t,e){1&t&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(t){return e.modal.dismiss()})),T.Rb(2,"img",2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"h5",4),T.Rc(6,"DIRECTORY.EMPLOYEES.TITLE"),T.Vb(),T.Vb(),T.Wb(7,"div",5),T.Pc(8,Ce,7,1,"div",6),T.Pc(9,ye,15,10,"div",7),T.Pc(10,Se,5,0,"ng-container",8),T.Pc(11,_e,5,0,"ng-container",8),T.Vb(),T.Vb()),2&t&&(T.Ab(2),T.tc("alt",T.oc(3,5,"SHARED.CLOSE")),T.Ab(6),T.sc("ngIf",!e.error&&(null==e.users?null:e.users.length)>0),T.Ab(1),T.sc("ngForOf",e.users),T.Ab(1),T.sc("ngIf",e.error),T.Ab(1),T.sc("ngIf",0===e.users.length))},directives:[N.a,r.u,r.t,ce.a],pipes:[N.d],styles:[".users-header[_ngcontent-%COMP%]{padding:.5rem}.users-list__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto 1fr auto;align-content:space-around;-webkit-box-pack:justify;justify-content:space-between;background:#fff;margin:.5rem 0}.users-list__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.users-list__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.users-list__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.users-list__cell[_ngcontent-%COMP%]{display:grid;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin:auto .5rem;padding:.625rem 0}.users-list__error[_ngcontent-%COMP%]{color:#666c72;padding:2.5rem 4.75rem 1.5rem;text-align:center}.modal-body[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem;max-height:100%}"]}),ke),Ae=((Te=function(){function t(e,n){_classCallCheck(this,t),this.modalService=e,this.accountsService=n,this.errorText=null}return _createClass(t,[{key:"ngOnInit",value:function(){this.retrieveTotalLimitations()}},{key:"retrieveTotalLimitations",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,this,[[0,5]])})))}},{key:"openAccountGrants",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.modalService.open(xe,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary modal-adaptive",centered:!0,size:"md"})).componentInstance.companyId=this.companyId,e.componentInstance.accountId=this.accountId,t.prev=2,t.next=5,e.result;case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,this,[[2,7]])})))}}]),t}()).\u0275fac=function(t){return new(t||Te)(T.Qb(s.q),T.Qb(P.c))},Te.\u0275cmp=T.Kb({type:Te,selectors:[["j-account-settings"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:15,vars:6,consts:[[1,"account-settings"],[1,"account-settings__block"],["translate","",1,"account-settings__header"],[1,"account-settings__content"],[1,"account-settings__title","col-md-10"],["translate",""],[1,"text-gray"],[1,"account-settings__control","col-md-2"],["translate","",1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Wb(2,"div",2),T.Rc(3,"ACCOUNTS.SETTINGS.MAIN"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"div",4),T.Wb(6,"div",5),T.Rc(7,"ACCOUNTS.SETTINGS.LIMIT_ACCESS"),T.Vb(),T.Wb(8,"small",6),T.Rc(9),T.nc(10,"translate"),T.nc(11,"async"),T.Vb(),T.Vb(),T.Wb(12,"div",7),T.Wb(13,"button",8),T.ic("click",(function(t){return e.openAccountGrants()})),T.Rc(14,"ACCOUNTS.SETTINGS.EDIT"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&t&&(T.Ab(9),T.Uc("",T.oc(10,2,"ACCOUNTS.SETTINGS.LIMITS"),": ",T.oc(11,4,e.accountsService.storeForTotal$),""))},directives:[N.a],pipes:[N.d,r.b],styles:[".account-settings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.account-settings__block[_ngcontent-%COMP%]{padding:1.5rem 0;background:#fff;border-radius:.75rem}.account-settings__header[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0 1rem 2rem}.account-settings__content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.account-settings__title[_ngcontent-%COMP%]{display:grid;grid-auto-rows:minmax(-webkit-min-content,-webkit-max-content);grid-auto-rows:minmax(min-content,max-content);row-gap:4px}.account-settings__control[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]}),Te),Oe=n("QiVB"),Ie=n("T+Ki"),we=n("4zJ+"),Re=n("/68H"),Pe=n("tepA");function Ee(t,e){1&t&&T.Rb(0,"j-account-migrated",17),2&t&&T.sc("isLarge",!0)}function Me(t,e){if(1&t){var n=T.Xb();T.Wb(0,"a",13),T.ic("click",(function(t){return T.Gc(n),T.mc(2).onTabClick("settings",t)})),T.Rc(1," ACCOUNTS.SETTINGS.TITLE "),T.Vb()}if(2&t){var a=T.mc(2);T.Hb("active","settings"===a.activeTab)}}function Le(t,e){if(1&t){var n=T.Xb();T.Ub(0),T.Wb(1,"j-filter",18),T.ic("downloaded",(function(t){return T.Gc(n),T.mc(2).onDownload(t)})),T.Vb(),T.Tb()}if(2&t){var a=T.mc(2);T.Ab(1),T.sc("currency",a.balance.currency)}}function Ve(t,e){if(1&t&&(T.Ub(0),T.Rb(1,"j-requisites",19),T.Tb()),2&t){var n=T.mc(2);T.Ab(1),T.sc("account",n.account)}}function Ne(t,e){if(1&t&&(T.Ub(0),T.Rb(1,"j-account-export",19),T.Tb()),2&t){var n=T.mc(2);T.Ab(1),T.sc("account",n.account)}}function je(t,e){if(1&t&&(T.Ub(0),T.Rb(1,"j-account-settings",20),T.Tb()),2&t){var n=T.mc(2);T.Ab(1),T.sc("companyId",n.companyId)("accountId",n.account.id)}}function We(t,e){if(1&t&&T.Rb(0,"j-statement-balances",27),2&t){var n=T.mc(3);T.sc("statement",n.statement)}}function De(t,e){1&t&&(T.Wb(0,"div",28),T.Rc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),T.Vb())}function Fe(t,e){if(1&t&&(T.Wb(0,"div",29),T.Wb(1,"strong"),T.Rc(2),T.Vb(),T.Vb()),2&t){var n=T.mc(3);T.Ab(2),T.Sc(n.errorText)}}function Ue(t,e){1&t&&T.Rb(0,"j-animated-loading")}function Ge(t,e){1&t&&(T.Wb(0,"div",30),T.Rb(1,"j-statement-loading"),T.Vb())}function Qe(t,e){if(1&t){var n=T.Xb();T.Ub(0),T.Wb(1,"section",21),T.ic("scrolled",(function(t){return T.Gc(n),T.mc(2).onScroll()})),T.Pc(2,We,1,1,"j-statement-balances",22),T.Rb(3,"j-statement",23),T.Pc(4,De,2,0,"div",24),T.Pc(5,Fe,3,1,"div",25),T.Pc(6,Ue,1,0,"j-animated-loading",16),T.Vb(),T.Pc(7,Ge,2,0,"div",26),T.Tb()}if(2&t){var a=T.mc(2);T.Ab(1),T.sc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),T.Ab(1),T.sc("ngIf",a.statement&&a.statement.totalTransactionsCount>0),T.Ab(1),T.sc("statement",a.statement)("isLoadingExtra",!a.isLoading&&a.isLoadingExtra)("emptyLabel",a.emptyLabel),T.Ab(1),T.sc("ngIf",!a.hasMorePages&&a.statement.totalTransactionsCount>0),T.Ab(1),T.sc("ngIf",a.errorText),T.Ab(1),T.sc("ngIf",!a.isReady),T.Ab(1),T.sc("ngIf",a.isLoading)}}function qe(t,e){if(1&t){var n=T.Xb();T.Wb(0,"f-page",1),T.ic("closed",(function(t){return T.Gc(n),T.mc().onClose()})),T.Wb(1,"f-page-header"),T.Wb(2,"section",2),T.Wb(3,"div",3),T.Wb(4,"div",4),T.Rb(5,"j-entity-logo",5),T.Wb(6,"span",6),T.Rc(7),T.nc(8,"formatIban"),T.Vb(),T.Vb(),T.Rb(9,"j-account-alter-code",7),T.Pc(10,Ee,1,1,"j-account-migrated",8),T.Vb(),T.Wb(11,"h1",9),T.Rb(12,"j-money",10),T.Vb(),T.Vb(),T.Wb(13,"div",11),T.Wb(14,"nav",12),T.Wb(15,"a",13),T.ic("click",(function(t){return T.Gc(n),T.mc().onTabClick("statement",t)})),T.Rc(16," ACCOUNTS.STATEMENT.TITLE "),T.Vb(),T.Wb(17,"a",14),T.ic("click",(function(t){return T.Gc(n),T.mc().onTabClick("requisites",t)})),T.Rc(18," ACCOUNTS.REQUISITES.TITLE "),T.Vb(),T.Wb(19,"a",13),T.ic("click",(function(t){return T.Gc(n),T.mc().onTabClick("auto-export",t)})),T.Rc(20," ACCOUNTS.AUTO_EXPORT "),T.Vb(),T.Pc(21,Me,2,2,"a",15),T.Vb(),T.Vb(),T.Vb(),T.Wb(22,"f-page-body"),T.Pc(23,Le,2,1,"ng-container",16),T.Pc(24,Ve,2,1,"ng-container",16),T.Pc(25,Ne,2,1,"ng-container",16),T.Pc(26,je,2,2,"ng-container",16),T.Vb(),T.Wb(27,"f-page-extra"),T.Pc(28,Qe,8,12,"ng-container",16),T.Vb(),T.Vb()}if(2&t){var a=T.mc();T.sc("bodyClassList","statement"===a.activeTab?"no-grow":""),T.Ab(5),T.sc("name",a.balance.currency),T.Ab(2),T.Sc(T.oc(8,18,a.account.iban)),T.Ab(2),T.sc("account",a.account),T.Ab(1),T.sc("ngIf",a.account.isMigrated),T.Ab(2),T.sc("money",a.balance),T.Ab(3),T.Hb("active","statement"===a.activeTab),T.Ab(2),T.Hb("active","requisites"===a.activeTab),T.Ab(2),T.Hb("active","auto-export"===a.activeTab),T.Ab(2),T.sc("ngIf",a.isSettingsAllowed),T.Ab(2),T.sc("ngIf","statement"===a.activeTab),T.Ab(1),T.sc("ngIf","requisites"===a.activeTab),T.Ab(1),T.sc("ngIf","auto-export"===a.activeTab),T.Ab(1),T.sc("ngIf","settings"===a.activeTab),T.Ab(2),T.sc("ngIf","statement"===a.activeTab)}}var Ke,He,Be=((Ke=function(){function t(e,n,a,i,r,c,o,s,u){var l=this;_classCallCheck(this,t),this.router=e,this.route=n,this.company=a,this.filterService=i,this.accountsService=r,this.datePipe=c,this.filesService=o,this.maskedService=s,this.tourService=u,this.isDetailsShown=!1,this.isLoading=!0,this.isLoadingExtra=!0,this.isReady=!1,this.hasMorePages=!0,this.isStatementsTourShown=!1,this.subscription=new R.a,this.tourStep=null,this.pageNumber=1,this.pageSize=10,this.cashedRouteQuery=JSON.parse(sessionStorage.getItem("accountRouteQuery"));var d=this.route.params.subscribe((function(t){l.iban=t.iban,l.loadData()}));this.subscription.add(d);var b=this.route.data.subscribe((function(t){l.activeTab=t.tab}));this.subscription.add(b);var f=this.route.paramMap.pipe(Object(S.a)((function(){return window.history.state}))).subscribe((function(t){l.tourStep=t.tourStep,l.checkAndStartTour()}));if(this.subscription.add(f),this.cashedRouteQuery)this.filter=this.mapQueryParams(this.cashedRouteQuery),this.filterService.updateExtra(this.filter);else{var p=this.route.queryParams.pipe(Object(Rt.a)(1)).subscribe((function(t){l.updateCashedRouteQuery(t),l.filter=l.mapQueryParams(t),l.filterService.updateExtra(l.filter)}));this.subscription.add(p)}var h=this.filterService.getScheme().subscribe((function(t){l.filter=Object.assign({},t),l.pageNumber=1,l.hasMorePages=!0,l.isLoading=!0,l.updateQueryParams(),l.loadStatement()}));this.subscription.add(h)}return _createClass(t,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onTabClick",value:function(t,e){e.preventDefault(),this.router.navigate([t],{relativeTo:this.route.parent})}},{key:"onClose",value:function(){this.navigateToHome()}},{key:"onScroll",value:function(){this.hasMorePages&&!this.isLoading&&(this.pageNumber++,this.loadStatement())}},{key:"onDownload",value:function(t){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountsService.getStatement(this.company.currentId,this.iban,this.filter,this.pageNumber,this.pageSize,t);case 2:n=e.sent,"1c"===(a=t.substring(t.lastIndexOf("/")+1,t.length))&&(a+=".txt"),this.filesService.downloadFile(n,"".concat(this.iban,".").concat(a));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadData",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.loadAccount();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:return t.prev=8,this.isReady=!0,t.finish(8);case 11:case"end":return t.stop()}}),t,this,[[0,5,8,11]])})))}},{key:"loadAccount",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountsService.getAccountByIban(this.company.currentId,this.iban);case 3:this.account=t.sent,this.account.isMigrated&&this.accountsService.retrieveMergeDate(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.navigateToHome();case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"loadStatement",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText="",this.isLoadingExtra=!0,t.prev=1,this.filter.periodType&&this.filter.periodType!==Et.d.CUSTOM&&(e=this.filterService.PERIOD_LIST.find((function(t){return t.type===a.filter.periodType})),this.filter.periodFrom=e.dates.from,this.filter.periodTo=e.dates.to),t.next=5,this.accountsService.getStatement(this.company.currentId,this.iban,this.filter,this.pageNumber,this.pageSize);case 5:n=t.sent,this.hasMorePages=this.pageSize<=n.totalTransactionsCount,this.statement=n,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.errorText=t.t0;case 12:return t.prev=12,this.isReady=!0,this.isLoading=!1,this.isLoadingExtra=!1,this.isStatementsTourShown||(this.checkAndStartTour(),this.isStatementsTourShown=!0),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[1,9,12,15]])})))}},{key:"checkAndStartTour",value:function(){var t=this;this.tourStep&&setTimeout((function(){var e;switch(t.tourStep){case"REQUISITES_HOME.ACCOUNT":t.tourService.startTour(M.e.REQUISITES_ACCOUNT);break;case"STATEMENTS_HOME.ACCOUNT":var n=[M.e.STATEMENTS_ACCOUNT[0]];!t.isLoading&&(null===(e=t.statement)||void 0===e?void 0:e.totalTransactionsCount)>0&&(n=[].concat(_toConsumableArray(n),[M.e.STATEMENTS_ACCOUNT[1]])),t.tourService.startTour(n)}}),0)}},{key:"navigateToHome",value:function(){this.router.navigate(["../.."],{relativeTo:this.route})}},{key:"mapQueryParams",value:function(t){var e=Object.assign({},this.filterService.getDefaults(Pt.a.ACCOUNTS));for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];a&&null!=a&&"null"!==a&&(e[n]="periodFrom"===n||"periodTo"===n?new Date(a):a)}return e}},{key:"updateQueryParams",value:function(){var t=Object.assign({},this.filter),e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];a&&null!=a&&"null"!==a&&(e[n]="periodFrom"===n||"periodTo"===n?this.datePipe.transform(a,"yyyy-MM-dd"):a,"amountFrom"!==n&&"amountTo"!==n||(e[n]=this.maskedService.getNumberedAmount(a)))}this.updateCashedRouteQuery(t),this.router.navigate([],{queryParams:e,relativeTo:this.route})}},{key:"updateCashedRouteQuery",value:function(t){sessionStorage.setItem("accountRouteQuery",JSON.stringify(t))}},{key:"emptyLabel",get:function(){return this.account.isMigrated?"ACCOUNTS.EMPTY_MIGRATED":"ACCOUNTS.EMPTY_STATEMENT"}},{key:"balance",get:function(){return this.account&&this.account.balance}},{key:"companyId",get:function(){return this.company.currentId}},{key:"isSettingsAllowed",get:function(){return this.company.currentAuthority.authority===Mt.a.PRIMARY_SIGNATURE}}]),t}()).\u0275fac=function(t){return new(t||Ke)(T.Qb(m.c),T.Qb(m.a),T.Qb(k.a),T.Qb(Lt.a),T.Qb(P.c),T.Qb(r.f),T.Qb(Vt.a),T.Qb(Nt.a),T.Qb(M.g))},Ke.\u0275cmp=T.Kb({type:Ke,selectors:[["j-account"]],decls:1,vars:1,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed",4,"ngIf"],["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed"],[1,"account-header"],[1,"iban"],[1,"iban__number"],["size","sm",1,"iban-img",3,"name"],[1,"d-inline-block","text-muted","mr-4"],["jTour","STATEMENT.ALTER_CODE","jTourPosition","bottom",1,"iban__alter-code","mr-4",3,"account"],["class","iban__migrated",3,"isLarge",4,"ngIf"],[1,"f-page-title"],[3,"money"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["href","#","translate","",3,"click"],["href","#","jTour","REQUISITES_ACCOUNT.NAV","jTourPosition","bottom","translate","",3,"click"],["href","#","translate","",3,"active","click",4,"ngIf"],[4,"ngIf"],[1,"iban__migrated",3,"isLarge"],[3,"currency","downloaded"],[3,"account"],[3,"companyId","accountId"],["infiniteScroll","",1,"account-wrapper",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"statement",4,"ngIf"],[1,"search-results",3,"statement","isLoadingExtra","emptyLabel"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],["class","py-4",4,"ngIf"],[3,"statement"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"],[1,"py-4"]],template:function(t,e){1&t&&T.Pc(0,qe,29,20,"f-page",0),2&t&&T.sc("ngIf",e.account)},directives:[r.u,jt.a,Wt.a,W.a,Q,Dt.a,D.a,N.a,Ft.a,Ut.a,Y,Gt.b,te,ve,Ae,l.a,Oe.a,Ie.a,we.a,Re.a],pipes:[Pe.a],styles:["[_nghost-%COMP%]{display:block}.iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:8px;flex-wrap:wrap}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.iban__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.iban__alter-code[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__number[_ngcontent-%COMP%]{margin-bottom:8px}@media(min-width:960px){.iban__alter-code[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__number[_ngcontent-%COMP%]{margin-bottom:0}}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),Ke),Xe=n("YjpI"),Ye=[{path:"accounts",component:wt,data:{title:"ACCOUNTS.TITLE"},children:[{path:"",component:St}]},{path:"accounts/:iban",children:[{path:"statement",component:Be,data:{tab:"statement"}},{path:"requisites",component:Be,data:{tab:"requisites"}},{path:"auto-export",component:Be,data:{tab:"auto-export"}},{path:"settings",component:Be,data:{tab:"settings"}},{path:"**",redirectTo:"statement"}]},{path:"cards",loadChildren:function(){return Promise.resolve().then(n.bind(null,"qAFH")).then((function(t){return t.CardsModule}))}},{canActivate:[O],path:v.a.root,data:{animation:"routerFadeFromBottom"},loadChildren:function(){return Promise.all([n.e(2),n.e(4),n.e(0),n.e(12)]).then(n.bind(null,"T9EB")).then((function(t){return t.PaymentsModule}))}},{path:Xe.a.transfers,loadChildren:function(){return Promise.all([n.e(2),n.e(0),n.e(22)]).then(n.bind(null,"DVvf")).then((function(t){return t.TransfersModule}))}},{path:Xe.a.conversion,loadChildren:function(){return Promise.all([n.e(2),n.e(0),n.e(15)]).then(n.bind(null,"VBqz")).then((function(t){return t.ConversionModule}))}},{path:Xe.a.history,loadChildren:function(){return n.e(18).then(n.bind(null,"9u+z")).then((function(t){return t.HistoryModule}))}},{path:Xe.a.contracts,loadChildren:function(){return n.e(4).then(n.bind(null,"Rreu")).then((function(t){return t.ContractsModule}))}},{path:Xe.a.settings,loadChildren:function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"7wo0")).then((function(t){return t.SettingsModule}))}},{path:Xe.a.directory,loadChildren:function(){return Promise.all([n.e(2),n.e(0),n.e(16)]).then(n.bind(null,"KlkT")).then((function(t){return t.DirectoryModule}))}},{path:Xe.a.letters,canActivate:[I],data:{featureFlag:g.a.LETTER},loadChildren:function(){return n.e(11).then(n.bind(null,"mCIM")).then((function(t){return t.LettersModule}))}},{path:Xe.a.extraSettings,loadChildren:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"vTXZ")).then((function(t){return t.ExtraSettingsModule}))}},{path:"**",redirectTo:"accounts"}],ze=((He=function t(){_classCallCheck(this,t)}).\u0275mod=T.Ob({type:He}),He.\u0275inj=T.Nb({factory:function(t){return new(t||He)},imports:[[m.g.forChild(Ye)],m.g]}),He),$e=n("qAFH");n.d(e,"HomeModule",(function(){return Ze}));var Je,Ze=((Je=function t(){_classCallCheck(this,t)}).\u0275mod=T.Ob({type:Je}),Je.\u0275inj=T.Nb({factory:function(t){return new(t||Je)},imports:[[r.c,c.n,c.D,ze,f.a,b.a,p.a,h.a,$e.CardsModule,u.c.forChild(),s.s,s.g,o.b,l.b,d.b]]}),Je)},fkRG:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("zwEd"),i=n("w7f+"),r=n("fXoL"),c=n("1kSV"),o=n("+eKG"),s=n("ofXK"),u=n("e8Ap"),l=n("sYmb");function d(t,e){if(1&t){var n=r.Xb();r.Wb(0,"a",1),r.ic("click",(function(t){return r.Gc(n),r.mc().onClick(t)})),r.Rb(1,"span",2),r.Rb(2,"span",3),r.Vb()}if(2&t){var a=r.mc();r.Hb("status--small",a.isSmall),r.Ab(1),r.sc("inlineSVG",a.mapIcon()),r.Ab(1),r.sc("translate",a.mapTitle())}}var b=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modalService=e,this.cardsService=n,this.CARD_STATUS=a.b}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(t){t.preventDefault(),this.isSmall||this.showModal()}},{key:"mapIcon",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="/assets/img/cards/status/",n=t?"-large.svg":this.isSmall?"-small.svg":".svg";switch(this.status){case a.b.EXPIRED:return"".concat(e,"expire").concat(n);case a.b.FRAUD:case a.b.LOST_LOCK:case a.b.THEFT_LOCK:case a.b.TEMPORARILY_LOCK:default:return"".concat(e,"locked").concat(n)}}},{key:"mapTitle",value:function(){return this.cardsService.mapCardStatus(this.status)}},{key:"mapDescription",value:function(){return"CARDS.STATUS.DESCRIPTION.".concat(this.status)}},{key:"showModal",value:function(){var t=this.modalService.open(i.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0});return Object.assign(t.componentInstance,{title:this.mapTitle(),img:this.mapIcon(!0),description:this.mapDescription(),cardId:this.cardId,canUnlock:this.status===a.b.TEMPORARILY_LOCK}),t.result}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Qb(c.q),r.Qb(o.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-card-status"]],inputs:{cardId:"cardId",isSmall:"isSmall",status:"status"},decls:1,vars:1,consts:[["href","#","class","status",3,"status--small","click",4,"ngIf"],["href","#",1,"status",3,"click"],[1,"status__icon",3,"inlineSVG"],[1,"status__title","text-danger",3,"translate"]],template:function(t,e){1&t&&r.Pc(0,d,3,4,"a",0),2&t&&r.sc("ngIf",e.status!=e.CARD_STATUS.ACTIVE)},directives:[s.u,u.a,l.a],styles:[".status[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-left:1rem}.status[_ngcontent-%COMP%]:hover{text-decoration:underline}.status--small[_ngcontent-%COMP%]{font-size:.75rem;margin-left:.5rem}.status--small[_ngcontent-%COMP%]:hover{text-decoration:none}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]{width:16px}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%}.status--small[_ngcontent-%COMP%]   .status__title[_ngcontent-%COMP%]{padding-top:2px}.status__icon[_ngcontent-%COMP%]{margin-right:.25rem}"]}),t}()},hsBV:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n("fXoL"),i=n("R0Ic"),r=n("L+ju"),c=n("zwEd"),o=n("+eKG"),s=["accountsDropdown"];function u(t,e){if(1&t&&(a.Ub(0),a.Rb(1,"span",11),a.Wb(2,"div",12),a.Rb(3,"span",13),a.Wb(4,"span"),a.Rc(5),a.Vb(),a.Vb(),a.Tb()),2&t){var n=a.mc().$implicit,i=a.mc();a.Ab(1),a.sc("inlineSVG",i.getCardImage(n)),a.Ab(2),a.sc("inlineSVG",i.getCardMps(n)),a.Ab(2),a.Sc(i.getMaskedCardNumber(n))}}function l(t,e){if(1&t&&(a.Ub(0),a.Rb(1,"j-entity-logo",14),a.Wb(2,"div",12),a.Wb(3,"span"),a.Rc(4),a.Vb(),a.Vb(),a.Tb()),2&t){var n=a.mc().$implicit,i=a.mc();a.Ab(1),a.sc("name",null==n?null:null==n.balance?null:n.balance.currency),a.Ab(3),a.Sc(i.getMaskedIban(n))}}function d(t,e){if(1&t&&a.Rb(0,"j-money",15),2&t){var n=a.mc().$implicit;a.sc("money",null==n?null:n.balance)}}function b(t,e){if(1&t&&(a.Ub(0,5),a.Wb(1,"div",6),a.Wb(2,"label",7),a.Rc(3),a.nc(4,"translate"),a.Vb(),a.Pc(5,u,6,3,"ng-container",8),a.Pc(6,l,5,2,"ng-container",9),a.Vb(),a.Tb(),a.Pc(7,d,1,1,"j-money",10)),2&t){var n=e.$implicit,i=a.mc();a.sc("ngSwitch",n.accountType),a.Ab(3),a.Tc(" ",a.oc(4,4,i.label||i.mapSelectedAccountLabel(n))," "),a.Ab(2),a.sc("ngSwitchCase",i.ACCOUNT_TYPE.CARD),a.Ab(2),a.sc("ngIf",i.getIsBalanceShown(n))}}function f(t,e){if(1&t&&a.Rb(0,"j-account-item",18),2&t){var n=a.mc().$implicit;a.sc("account",n)}}function p(t,e){if(1&t&&a.Rb(0,"j-account-card",19),2&t){var n=a.mc().$implicit;a.sc("card",n)}}function h(t,e){if(1&t&&(a.Pc(0,f,1,1,"j-account-item",16),a.Pc(1,p,1,1,"j-account-card",17)),2&t){var n=e.$implicit,i=a.mc();a.sc("ngIf",n.accountType===i.ACCOUNT_TYPE.ACCOUNT||n.accountType===i.ACCOUNT_TYPE.DEPOSIT),a.Ab(1),a.sc("ngIf",n.accountType===i.ACCOUNT_TYPE.CARD)}}function m(t,e){1&t&&a.Rb(0,"div",20),2&t&&a.sc("inlineSVG","./assets/icons/transfers/arrow.svg")}var g=function(){var t=function(){function t(e){_classCallCheck(this,t),this.cardsService=e,this.hasError=!1,this.isLoading=!1,this.isDisabled=!1,this.isSmall=!1,this.isFromArrowShown=!1,this.isDisabledSelectable=!1,this.accounts=[],this.selected=new a.n,this.ACCOUNT_TYPE=r.a,this.blockedFn=this.isAccountBlocked.bind(this)}return _createClass(t,[{key:"clearSelected",value:function(){this.accountsDropdown.clearSelected()}},{key:"selectAccount",value:function(t){t&&(t.accountType===r.a.CARD&&t.hasLockedState&&!this.isDisabledSelectable||t.isMigrated||(this.selectedAccount=t,this.accountsDropdown.selectItem(t)))}},{key:"selectByIban",value:function(t){var e,n=null===(e=this.accounts)||void 0===e?void 0:e.find((function(e){return e.iban===t}));this.onSelect(n)}},{key:"isAccountBlocked",value:function(t){return!!t.isMigrated}},{key:"onSelect",value:function(t){this.selectAccount(t),this.selected.emit(t)}},{key:"mapSelectedAccountLabel",value:function(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case r.a.CARD:return this.cardsService.mapCardLabel(t);case r.a.ACCOUNT:return"ACCOUNTS.REGULAR";case r.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}},{key:"getMaskedCardNumber",value:function(t){if(t.accountType!=r.a.CARD)return null;var e=t.cardNumber;return e?"".concat(e.substring(0,4)," \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ").concat(e.substring(e.length-4,e.length)):""}},{key:"getMaskedIban",value:function(t){var e=t.iban;return e?"".concat(e.substring(0,4)," \u2022\u2022\u2022\u2022 ").concat(e.substring(e.length-4,e.length)):""}},{key:"getCardImage",value:function(t){if(t.accountType!=r.a.CARD)return null;var e="./assets/icons/accounts";switch(t.category){case c.a.PRIVATE:return"".concat(e,"/card-private.svg");case c.a.COMMERCIAL:default:return"".concat(e,"/card-commercial.svg")}}},{key:"getCardMps",value:function(t){if(t.accountType!=r.a.CARD)return null;var e="./assets/icons/cards/mps";return"4"===t.cardNumber[0]?"".concat(e,"/visa.svg"):"".concat(e,"/mastercard.svg")}},{key:"getIsBalanceShown",value:function(t){return t.accountType!==r.a.CARD||t.category!==c.a.PRIVATE}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Qb(o.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["j-account-dropdown"]],viewQuery:function(t,e){var n;1&t&&a.Wc(s,!0),2&t&&a.Cc(n=a.jc())&&(e.accountsDropdown=n.first)},inputs:{label:"label",inputClass:"inputClass",hasError:"hasError",isLoading:"isLoading",isDisabled:"isDisabled",isSmall:"isSmall",isFromArrowShown:"isFromArrowShown",isDisabledSelectable:"isDisabledSelectable",accounts:"accounts"},outputs:{selected:"selected"},decls:7,vars:6,consts:[["label","ACCOUNTS.EMPTY",3,"isLoading","label","options","hasError","blockedFn","selected"],["accountsDropdown",""],["selectedTemplate",""],["optionTemplate",""],["class","account-dropdown__from-arrow",3,"inlineSVG",4,"ngIf"],[3,"ngSwitch"],[1,"account-item"],[1,"j-input--float-label","selected-account__label"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","selected-account__money",3,"money",4,"ngIf"],[3,"inlineSVG"],[1,"text-truncate","selected-account__value"],[1,"mr-2",3,"inlineSVG"],["size","sm",1,"selected-account__img",3,"name"],[1,"selected-account__money",3,"money"],[3,"account",4,"ngIf"],[3,"card",4,"ngIf"],[3,"account"],[3,"card"],[1,"account-dropdown__from-arrow",3,"inlineSVG"]],template:function(t,e){1&t&&(a.Wb(0,"j-dropdown-input",0,1),a.ic("selected",(function(t){return e.onSelect(t)})),a.Pc(2,b,8,6,"ng-template",null,2,a.Qc),a.Pc(4,h,2,2,"ng-template",null,3,a.Qc),a.Vb(),a.Pc(6,m,1,1,"div",4)),2&t&&(a.sc("isLoading",e.isLoading)("label",e.label)("options",e.accounts)("hasError",e.hasError)("blockedFn",e.blockedFn),a.Ab(6),a.sc("ngIf",e.isFromArrowShown))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"],data:{animation:[Object(i.n)("smoothCollapse",[Object(i.k)("initial",Object(i.l)({height:"0",overflow:"hidden",opacity:"0.5",zIndex:"unset"})),Object(i.k)("final",Object(i.l)({overflow:"hidden",opacity:"1",zIndex:"50"})),Object(i.m)("initial=>final",Object(i.e)("300ms ease-in-out")),Object(i.m)("final=>initial",Object(i.e)("300ms ease-in-out"))])]}}),t}()},pZP7:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("L+ju"),i=n("fXoL");function r(t,e){1&t&&i.Rb(0,"span",12)}function c(t,e){1&t&&(i.Wb(0,"small",13),i.Rc(1,"ACCOUNTS.INACTIVE"),i.Vb())}function o(t,e){if(1&t&&(i.Wb(0,"small",14),i.Rc(1),i.Vb()),2&t){var n=i.mc();i.Ab(1),i.Sc(n.lockedMessage)}}var s=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"lockedMessage",get:function(){return"ACCOUNTS.STATE.".concat(this.account.blockType)}},{key:"label",get:function(){return this.account.accountType===a.a.ACCOUNT?"ACCOUNTS.DROPDOWN.REGULAR":"ACCOUNTS.DROPDOWN.DEPOSIT"}},{key:"isBlocked",get:function(){return this.account.isMigrated}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["j-account-item"]],inputs:{account:"account"},decls:14,vars:7,consts:[[1,"account-item"],["size","sm",1,"account-item__img",3,"name"],[1,"account-item__body","p3"],["translate","",1,"text-muted"],[1,"d-flex","align-items-center"],["class","mr-2","inlineSVG","assets/icons/v2/atf-24.svg",4,"ngIf"],[1,"text-dark"],[1,"ml-auto","d-flex","align-items-center"],["class","d-block text-muted mr-2","translate","",4,"ngIf"],[1,"p3","text-right"],[3,"money"],["class","d-block text-muted","translate","",4,"ngIf"],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"],["translate","",1,"d-block","text-muted","mr-2"],["translate","",1,"d-block","text-muted"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Rb(1,"j-entity-logo",1),i.Wb(2,"div",2),i.Wb(3,"div",3),i.Rc(4),i.Vb(),i.Wb(5,"div",4),i.Pc(6,r,1,0,"span",5),i.Wb(7,"div",6),i.Rc(8),i.Vb(),i.Vb(),i.Vb(),i.Wb(9,"div",7),i.Pc(10,c,2,0,"small",8),i.Wb(11,"div",9),i.Rb(12,"j-money",10),i.Pc(13,o,2,1,"small",11),i.Vb(),i.Vb(),i.Vb()),2&t&&(i.Ab(1),i.sc("name",null==e.account?null:null==e.account.balance?null:e.account.balance.currency),i.Ab(3),i.Sc(e.label),i.Ab(2),i.sc("ngIf",null==e.account?null:e.account.alterCode),i.Ab(2),i.Sc(null==e.account?null:e.account.maskedIban),i.Ab(2),i.sc("ngIf",null==e.account?null:e.account.isMigrated),i.Ab(2),i.sc("money",null==e.account?null:e.account.balance),i.Ab(1),i.sc("ngIf",null==e.account?null:e.account.hasLockedState))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),t}()},qAFH:function(t,e,n){"use strict";n.r(e);var a=n("ofXK"),i=n("xJkR"),r=n("5cNS"),c=n("PCNd"),o=n("crCf"),s=n("tyNb"),u=n("mrSG"),l=n("quSY"),d=n("fXoL"),b=n("VnnJ"),f=n("7rOj"),p=n("+eKG"),h=n("VO+5"),m=n("sYmb"),g=n("iCQh"),v=n("jhN1"),C=n("S1F0"),y=n("oKsb"),S=n("fkRG"),_=n("Kx/q"),T=function(){return{width:"300px",height:"20px","background-color":"#ECEEF1"}},k=function(){return{width:"500px",height:"36px","background-color":"#ECEEF1"}};function x(t,e){1&t&&(d.Ub(0),d.Rb(1,"ngx-skeleton-loader",1),d.Rb(2,"br"),d.Rb(3,"ngx-skeleton-loader",1),d.Tb()),2&t&&(d.Ab(1),d.sc("theme",d.wc(2,T)),d.Ab(2),d.sc("theme",d.wc(3,k)))}function A(t,e){if(1&t&&(d.Wb(0,"section",4),d.Wb(1,"div",5),d.Rb(2,"img",6),d.Wb(3,"span",7),d.Rc(4),d.Vb(),d.Rb(5,"j-card-status",8),d.Vb(),d.Wb(6,"h1",9),d.Rb(7,"j-money",10),d.Vb(),d.Vb()),2&t){var n=d.mc(2);d.Ab(4),d.Uc("",n.card.alias," ",n.card.maskedNumber,""),d.Ab(1),d.sc("cardId",n.card.cardId)("status",n.card.status),d.Ab(2),d.sc("money",n.card.balance)}}function O(t,e){if(1&t&&(d.Wb(0,"div",11),d.Rc(1),d.Vb()),2&t){var n=d.mc(2);d.Ab(1),d.Sc(n.errorText)}}function I(t,e){if(1&t&&(d.Ub(0),d.Pc(1,A,8,5,"section",2),d.Pc(2,O,2,1,"div",3),d.Tb()),2&t){var n=d.mc();d.Ab(1),d.sc("ngIf",n.card),d.Ab(1),d.sc("ngIf",n.errorText)}}var w,R,P=((w=function(){function t(e,n){var a=this;_classCallCheck(this,t),this.route=e,this.cardsService=n,this.isLoading=!0,this.loaded=new d.n,this.failed=new d.n,this.subscription=new l.a;var i=this.route.params.subscribe((function(t){a.cardId=t.id,a.init()}));this.subscription.add(i)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"init",value:function(){this.loadCard()}},{key:"loadCard",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.cardsService.getCardById(this.cardId);case 4:this.card=t.sent,this.loaded.emit(this.card),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.errorText=t.t0.description,this.failed.emit();case 11:return t.prev=11,this.isLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})))}}]),t}()).\u0275fac=function(t){return new(t||w)(d.Qb(s.a),d.Qb(p.a))},w.\u0275cmp=d.Kb({type:w,selectors:[["j-card-header"]],outputs:{loaded:"loaded",failed:"failed"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"theme"],["class","account-header",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"account-header"],[1,"iban"],["src","./assets/img/cards/card-black.svg"],[1,"ml-3","text-muted"],[3,"cardId","status"],[1,"f-page-title"],[3,"money"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(d.Pc(0,x,4,4,"ng-container",0),d.Pc(1,I,3,2,"ng-container",0)),2&t&&(d.sc("ngIf",e.isLoading),d.Ab(1),d.sc("ngIf",!e.isLoading))},directives:[a.u,i.a,S.a,_.a],styles:["[_nghost-%COMP%]{display:block;min-height:90px}.iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:4px;min-height:25px}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}"]}),w),E=function(){return["../statement"]},M=function(){return["../info"]},L=function(){return["../settings"]},V=((R=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||R)},R.\u0275cmp=d.Kb({type:R,selectors:[["j-card-tabs"]],decls:8,vars:6,consts:[[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active","translate","",3,"routerLink"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"nav",1),d.Wb(2,"a",2),d.Rc(3," CARDS.STATEMENT "),d.Vb(),d.Wb(4,"a",2),d.Rc(5," CARDS.INFO.TITLE "),d.Vb(),d.Wb(6,"a",2),d.Rc(7," CARDS.SETTINGS.TITLE "),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.sc("routerLink",d.wc(3,E)),d.Ab(2),d.sc("routerLink",d.wc(4,M)),d.Ab(2),d.sc("routerLink",d.wc(5,L)))},directives:[s.f,s.e,m.a],styles:[""]}),R),N=n("fvpk"),j=n("e8Ap"),W=n("Dvla"),D=function(){return{width:"435px",height:"96px","background-color":"#ECEEF1"}},F=function(){return{width:"435px",height:"56px","background-color":"#ECEEF1"}},U=function(){return{width:"435px",height:"276px","background-color":"#ECEEF1"}};function G(t,e){1&t&&(d.Ub(0),d.Rb(1,"ngx-skeleton-loader",3),d.Rb(2,"ngx-skeleton-loader",3),d.Rb(3,"ngx-skeleton-loader",3),d.Tb()),2&t&&(d.Ab(1),d.sc("theme",d.wc(3,D)),d.Ab(1),d.sc("theme",d.wc(4,F)),d.Ab(1),d.sc("theme",d.wc(5,U)))}function Q(t,e){if(1&t&&(d.Wb(0,"div",19),d.Wb(1,"div",20),d.Rc(2),d.nc(3,"translate"),d.Vb(),d.Wb(4,"div",21),d.Rc(5),d.nc(6,"translate"),d.Vb(),d.Vb()),2&t){var n=e.$implicit;d.Ab(2),d.Tc(" ",d.oc(3,2,n.label),": "),d.Ab(3),d.Tc(" ",d.oc(6,4,n.value)," ")}}function q(t,e){if(1&t&&(d.Wb(0,"div",19),d.Wb(1,"div",20),d.Rc(2),d.nc(3,"translate"),d.Vb(),d.Wb(4,"div",21),d.Rc(5),d.Vb(),d.Vb()),2&t){var n=e.$implicit;d.Ab(2),d.Tc(" ",d.oc(3,2,n.label),": "),d.Ab(3),d.Tc(" ",n.value," ")}}function K(t,e){if(1&t&&(d.Wb(0,"div",22),d.Wb(1,"strong"),d.Rc(2),d.Vb(),d.Vb()),2&t){var n=d.mc(2);d.Ab(2),d.Sc(n.errorText)}}function H(t,e){if(1&t){var n=d.Xb();d.Ub(0),d.Wb(1,"div",4),d.Wb(2,"div",5),d.Wb(3,"div",6),d.Rb(4,"div",7),d.Wb(5,"button",8),d.ic("click",(function(t){return d.Gc(n),d.mc().onQrPrint(t)})),d.Rb(6,"span",9),d.Rb(7,"span",10),d.Vb(),d.Vb(),d.Rb(8,"img",11),d.Vb(),d.Vb(),d.Wb(9,"div",4),d.Pc(10,Q,7,6,"div",12),d.Vb(),d.Wb(11,"div",4),d.Pc(12,q,6,4,"div",12),d.Wb(13,"div",13),d.Wb(14,"button",14),d.ic("click",(function(t){return d.Gc(n),d.mc().onCopy()})),d.Rb(15,"div",15),d.Wb(16,"strong",16),d.Rc(17,"CARDS.INFO.COPY"),d.Vb(),d.Vb(),d.Wb(18,"button",17),d.ic("click",(function(t){return d.Gc(n),d.mc().onDownload()})),d.Rb(19,"div",15),d.Wb(20,"strong",16),d.Rc(21,"ACCOUNTS.REQUISITES.DOWNLOAD"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Pc(22,K,3,1,"div",18),d.Tb()}if(2&t){var a=d.mc();d.Ab(5),d.sc("disabled",!a.qrFile),d.Ab(1),d.sc("inlineSVG","assets/icons/account/print.svg"),d.Ab(4),d.sc("ngForOf",a.status),d.Ab(2),d.sc("ngForOf",a.requisites),d.Ab(2),d.sc("cbContent",a.textToCopy),d.Ab(1),d.sc("inlineSVG","assets/icons/account/copy.svg"),d.Ab(4),d.sc("inlineSVG","assets/icons/account/pdf.svg"),d.Ab(3),d.sc("ngIf",a.errorText)}}var B,X,Y=((B=function(){function t(e,n,a,i,r,c,o,s,u){_classCallCheck(this,t),this.router=e,this.companyService=n,this.bankFromAccount=a,this.formatIban=i,this.cardsService=r,this.notifierService=c,this.translateService=o,this.filesService=s,this._sanitizer=u,this.isLoaded=!1,this.subscription=new l.a}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onCardLoad",value:function(t){var e=this;this.init(t);var n=this.cardsService.cardsUpdated$.subscribe((function(t){var n=e.cardsService.findCardById(e.card.cardId);e.init(n)}));this.subscription.add(n)}},{key:"init",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.card=t,this.generateStatus(),this.generateRequisites(),this.generateTextToCopy(),this.loadQr(),this.isLoaded=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onCardFail",value:function(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}},{key:"onClose",value:function(){this.navigateToHome()}},{key:"onCopy",value:function(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}},{key:"loadQr",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cardsService.getQrPrint(this.card.cardId,this.card.iban);case 2:this.qrFile=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onQrPrint",value:function(t){t.preventDefault(),this.filesService.downloadFile(this.qrFile,"".concat(this.card.formattedFullName," ").concat(this.card.maskedNumber," QR.jpg"))}},{key:"onDownload",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.cardsService.getPdf(this.card.cardId);case 3:e=t.sent,this.filesService.downloadFile(e,"".concat(this.card.formattedFullName," ").concat(this.card.maskedNumber,".pdf")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"generateStatus",value:function(){this.status=[{label:this.appendTranslationPrefix("STATUS"),value:this.cardsService.mapCardStatus(this.card.status)}]}},{key:"generateRequisites",value:function(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.card.formattedFullName},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.card.iban),valueToCopy:this.card.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.card.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.card.iban,"bic")}]}},{key:"generateTextToCopy",value:function(){var t=this;this.textToCopy=this.requisites.map((function(e){if(e.value||e.valueToCopy)return"".concat(t.translateService.instant(e.label),": ").concat(e.valueToCopy||e.value)})).join("\n")}},{key:"navigateToHome",value:function(){this.router.navigate(["/"])}},{key:"appendTranslationPrefix",value:function(t){return"CARDS.INFO.".concat(t)}}]),t}()).\u0275fac=function(t){return new(t||B)(d.Qb(s.c),d.Qb(b.a),d.Qb(f.b),d.Qb(f.d),d.Qb(p.a),d.Qb(h.c),d.Qb(m.e),d.Qb(g.a),d.Qb(v.b))},B.\u0275cmp=d.Kb({type:B,selectors:[["j-card-info"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"info"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.TITLE"],[1,"btn","btn-link","qr__print","p3",3,"disabled","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","./assets/img/cards/qr.png",1,"qr__img"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(t,e){1&t&&(d.Wb(0,"f-page",0),d.ic("closed",(function(t){return e.onClose()})),d.Wb(1,"f-page-header"),d.Wb(2,"j-card-header",1),d.ic("loaded",(function(t){return e.onCardLoad(t)}))("failed",(function(t){return e.onCardFail()})),d.Vb(),d.Rb(3,"j-card-tabs"),d.Vb(),d.Wb(4,"f-page-body"),d.Pc(5,G,4,6,"ng-container",2),d.Pc(6,H,23,8,"ng-container",2),d.Vb(),d.Vb()),2&t&&(d.Ab(5),d.sc("ngIf",!e.isLoaded),d.Ab(1),d.sc("ngIf",e.isLoaded))},directives:[C.a,y.a,P,V,N.a,a.u,i.a,m.a,j.a,a.t,W.a],pipes:[m.d],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0 1rem;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;min-width:calc(50% - .5rem)}.qr[_ngcontent-%COMP%], .requisites__footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.qr[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:-webkit-inline-box;display:inline-flex;margin-top:.5rem;padding:0}.qr__print[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]:hover{-webkit-transform:none;transform:none}.qr__print[_ngcontent-%COMP%]:hover{color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}"]}),B),z=n("3Pt+"),$=n("1kSV"),J=n("9odQ"),Z=n("M6pS"),tt=((X=function(){function t(e,n,a,i){_classCallCheck(this,t),this.modal=e,this.cardsService=n,this.notifierService=a,this.translateService=i,this.aliasMaxLength=24,this.translatePrefix="CARDS.RENAME_MODAL",this.isSubmitted=!1,this.isSubmitting=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.form=new z.k({alias:new z.h(this.card.alias||"",[z.H.required,z.H.maxLength(this.aliasMaxLength)])})}},{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(t){this.modal.close(t)}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isSubmitted=!0,!this.form.invalid){t.next=2;break}return t.abrupt("return");case 2:return this.isSubmitting=!0,e="",t.prev=4,n=this.form.getRawValue(),a=n.alias,t.next=8,this.cardsService.renameCard(this.card.cardId,a);case 8:e="SUCCESS",this.closeModal(a),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),e="ERROR";case 15:return t.prev=15,this.isSubmitting=!1,this.notifierService.notify("default",this.translateService.instant(this.mapTranslate(e))),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[4,12,15,18]])})))}},{key:"f",get:function(){return this.form.controls}}]),t}()).\u0275fac=function(t){return new(t||X)(d.Qb($.a),d.Qb(p.a),d.Qb(h.c),d.Qb(m.e))},X.\u0275cmp=d.Kb({type:X,selectors:[["j-card-rename-modal"]],inputs:{card:"card"},decls:17,vars:21,consts:[[1,"rename-modal"],[1,"rename-modal__header"],[1,"btn","btn-outline-primary","rename-modal__back","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"rename-modal__form",3,"formGroup"],[1,"form-group"],[3,"label","formControl","maxLength","isClearable","hasError"],[1,"form-footer"],["type","button",1,"btn","btn-link",3,"disabled","jLoading","jLoadingInverted","click"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled","jLoading","click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"button",2),d.ic("click",(function(t){return e.dismissModal()})),d.Rb(3,"span",3),d.Vb(),d.Wb(4,"h5",4),d.Rc(5),d.nc(6,"translate"),d.Vb(),d.Vb(),d.Wb(7,"form",5),d.Wb(8,"div",6),d.Rb(9,"j-input",7),d.Vb(),d.Wb(10,"div",8),d.Wb(11,"button",9),d.ic("click",(function(t){return e.dismissModal()})),d.Rc(12),d.nc(13,"translate"),d.Vb(),d.Wb(14,"button",10),d.ic("click",(function(t){return e.onSubmit()})),d.Rc(15),d.nc(16,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(3),d.sc("inlineSVG","assets/icons/arrow-left.svg"),d.Ab(2),d.Tc(" ",d.oc(6,15,e.mapTranslate("TITLE"))," "),d.Ab(2),d.sc("formGroup",e.form),d.Ab(2),d.sc("label",e.mapTranslate("LABEL"))("formControl",e.f.alias)("maxLength",e.aliasMaxLength)("isClearable",!1)("hasError",e.f.alias.invalid&&e.isSubmitted),d.Ab(2),d.sc("disabled",e.isSubmitting)("jLoading",e.isSubmitting)("jLoadingInverted",!0),d.Ab(1),d.Tc(" ",d.oc(13,17,"SHARED.CANCEL")," "),d.Ab(2),d.sc("disabled",e.isSubmitting)("jLoading",e.isSubmitting),d.Ab(1),d.Tc(" ",d.oc(16,19,"SHARED.SAVE")," "))},directives:[j.a,z.J,z.u,z.l,J.b,z.t,z.i,Z.a],pipes:[m.d],styles:[".rename-modal[_ngcontent-%COMP%]{padding:24px}.rename-modal__back[_ngcontent-%COMP%]{padding:0;width:40px;height:40px}.rename-modal__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:64px;-webkit-box-align:center;align-items:center;margin-bottom:12px}"]}),X);n("w7f+");var et=n("zwEd"),nt=n("Bl/x"),at=function(t){return{height:t,"margin-top":"0.5rem","background-color":"#ECEEF1"}};function it(t,e){if(1&t&&(d.Ub(0),d.Rb(1,"ngx-skeleton-loader",3),d.Tb()),2&t){var n=d.mc();d.Ab(1),d.sc("theme",d.xc(1,at,n.isPrimaryAuthority?"142px":"72px"))}}function rt(t,e){if(1&t&&(d.Wb(0,"div",4),d.Rb(1,"j-switch",5),d.Wb(2,"span",6),d.Rb(3,"strong",11),d.Wb(4,"small",8),d.Rc(5),d.nc(6,"translate"),d.Vb(),d.Vb(),d.Vb()),2&t){var n=d.mc(2);d.Hb("disabled",n.hiddenControl.disabled),d.Ab(1),d.sc("formControl",n.hiddenControl),d.Ab(4),d.Tc(" ",d.oc(6,4,"CARDS.SETTINGS.HIDE.DESCRIPTION")," ")}}function ct(t,e){if(1&t){var n=d.Xb();d.Wb(0,"div",4),d.Wb(1,"div"),d.Rb(2,"strong",12),d.Wb(3,"small",8),d.Rc(4),d.Vb(),d.Vb(),d.Wb(5,"button",13),d.ic("click",(function(t){return d.Gc(n),d.mc(2).onCardRename()})),d.Rc(6),d.nc(7,"translate"),d.Vb(),d.Vb()}if(2&t){var a=d.mc(2);d.Ab(4),d.Tc(" ",a.card.alias," "),d.Ab(2),d.Tc(" ",d.oc(7,2,"CARDS.SETTINGS.RENAME.LINK")," ")}}function ot(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",4),d.Rb(2,"j-switch",5),d.Wb(3,"span",6),d.Rb(4,"strong",7),d.Wb(5,"small",8),d.Rc(6),d.nc(7,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Pc(8,rt,7,6,"div",9),d.Pc(9,ct,8,4,"div",10),d.Tb()),2&t){var n=d.mc();d.Ab(1),d.Hb("disabled",n.activatedControl.disabled),d.Ab(1),d.sc("formControl",n.activatedControl),d.Ab(4),d.Tc(" ",d.oc(7,6,n.activatedControl.value?"CARDS.SETTINGS.LOCK.ACTIVATE":"CARDS.SETTINGS.LOCK.DEACTIVATE")," "),d.Ab(2),d.sc("ngIf",n.isPrimaryAuthority),d.Ab(1),d.sc("ngIf",n.isPrimaryAuthority)}}var st,ut={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",backdrop:"static",centered:!0},lt=((st=function(){function t(e,n,a,i){_classCallCheck(this,t),this.router=e,this.cardsService=n,this.companyService=a,this.modalService=i,this.isLoaded=!1,this.isPrimaryAuthority=this.companyService.isPrimaryAuthority(),this.subscription=new l.a}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onCardLoad",value:function(t){var e=this;this.init(t);var n=this.cardsService.cardsUpdated$.subscribe((function(t){var n=e.cardsService.findCardById(e.card.cardId);e.init(n)}));this.subscription.add(n)}},{key:"init",value:function(t){this.card=t,this.initActivatedControl(),this.initHiddenControl(),this.isLoaded=!0}},{key:"onCardFail",value:function(){this.activatedControl=new z.h({value:!1,disabled:!1}),this.hiddenControl=new z.h({value:!1,disabled:!1}),this.isLoaded=!0}},{key:"onClose",value:function(){this.navigateToHome()}},{key:"onCardRename",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.modalService.open(tt,ut)).componentInstance.card=this.card,t.prev=2,t.next=5,e.result;case 5:n=t.sent,this.card.alias=n,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,this,[[2,9]])})))}},{key:"navigateToHome",value:function(){this.router.navigate(["/"])}},{key:"initActivatedControl",value:function(){var t,e,n=this;this.activatedControl=new z.h({value:this.card.status===et.b.TEMPORARILY_LOCK,disabled:!((null===(t=this.card)||void 0===t?void 0:t.status)==et.b.ACTIVE||(null===(e=this.card)||void 0===e?void 0:e.status)==et.b.TEMPORARILY_LOCK)}),this.subscription.add(this.activatedControl.valueChanges.subscribe((function(t){n.handleActivatedSwitch(t)})))}},{key:"initHiddenControl",value:function(){var t=this;this.hiddenControl=new z.h(this.card.hidden),this.subscription.add(this.hiddenControl.valueChanges.subscribe((function(e){t.handleHiddenSwitch(e)})))}},{key:"handleActivatedSwitch",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.cardsService.changeCardStatus(this.card.cardId,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.activatedControl.setValue(!t,{emitEvent:!1});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}},{key:"handleHiddenSwitch",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.cardsService.changeCardVisibility(this.card.cardId,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.hiddenControl.setValue(!t,{emitEvent:!1});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}}]),t}()).\u0275fac=function(t){return new(t||st)(d.Qb(s.c),d.Qb(p.a),d.Qb(b.a),d.Qb($.q))},st.\u0275cmp=d.Kb({type:st,selectors:[["j-card-settings"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"settings-item"],[3,"formControl"],[1,"ml-3"],["translate","CARDS.SETTINGS.LOCK.TITLE",1,"d-block"],[1,"text-gray"],["class","settings-item",3,"disabled",4,"ngIf"],["class","settings-item",4,"ngIf"],["translate","CARDS.SETTINGS.HIDE.TITLE",1,"d-block"],["translate","CARDS.SETTINGS.RENAME.TITLE",1,"d-block"],[1,"btn","btn-link","p2","py-0","px-1","link-blue","ml-auto",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"f-page",0),d.ic("closed",(function(t){return e.onClose()})),d.Wb(1,"f-page-header"),d.Wb(2,"j-card-header",1),d.ic("loaded",(function(t){return e.onCardLoad(t)}))("failed",(function(t){return e.onCardFail()})),d.Vb(),d.Rb(3,"j-card-tabs"),d.Vb(),d.Wb(4,"f-page-body"),d.Pc(5,it,2,3,"ng-container",2),d.Pc(6,ot,10,8,"ng-container",2),d.Vb(),d.Vb()),2&t&&(d.Ab(5),d.sc("ngIf",!e.card),d.Ab(1),d.sc("ngIf",e.card))},directives:[C.a,y.a,P,V,N.a,a.u,i.a,nt.a,z.t,z.i,m.a],pipes:[m.d],styles:[".settings-item[_ngcontent-%COMP%]{padding:1rem;background:#fff;max-width:616px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-bottom:1px solid #dbdfe2}.settings-item[_ngcontent-%COMP%]:first-child{margin-top:.5rem;border-radius:.75rem .75rem 0 0}.settings-item[_ngcontent-%COMP%]:last-child{border-bottom:0;border-radius:0 0 .75rem .75rem;margin-bottom:1rem}.settings-item.disabled[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]}),st),dt=n("IzEk"),bt=n("KWy3"),ft=n("9N4E"),pt=n("THGi"),ht=n("Tile"),mt=n("QiVB"),gt=n("/68H"),vt=n("T+Ki");function Ct(t,e){1&t&&(d.Wb(0,"div",8),d.Rb(1,"j-statement-loading"),d.Vb())}function yt(t,e){if(1&t&&d.Rb(0,"j-statement-balances",9),2&t){var n=d.mc();d.sc("statement",n.statement)}}function St(t,e){1&t&&(d.Wb(0,"div",10),d.Rc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),d.Vb())}function _t(t,e){if(1&t&&(d.Wb(0,"div",11),d.Wb(1,"strong"),d.Rc(2),d.Vb(),d.Vb()),2&t){var n=d.mc();d.Ab(2),d.Sc(n.errorText)}}var Tt,kt,xt,At=((Tt=function(){function t(e,n,a,i,r){var c=this;_classCallCheck(this,t),this.router=e,this.route=n,this.cardsService=a,this.filterService=i,this.datePipe=r,this.statementMode=bt.a.CARDS,this.isLoading=!0,this.filterMode=ft.a.CARDS,this.subscription=new l.a;var o=this.route.params.subscribe((function(t){c.cardId=t.id,c.loadStatement()})),s=this.route.queryParams.pipe(Object(dt.a)(1)).subscribe((function(t){c.filter=c.mapQueryParams(t),c.filterService.updateExtra(c.filter)})),u=this.filterService.getScheme().subscribe((function(t){c.filter=Object.assign({},t),c.updateQueryParams(),c.loadStatement()}));this.subscription.add(o),this.subscription.add(s),this.subscription.add(u)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClose",value:function(){this.navigateToHome()}},{key:"loadStatement",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText="",this.isLoading=!0,t.prev=1,this.filter.periodType&&this.filter.periodType!=ft.b.CUSTOM&&(e=this.filterService.PERIOD_LIST.find((function(t){return t.type==n.filter.periodType})),this.filter.periodFrom=e.dates.from,this.filter.periodTo=e.dates.to),t.next=5,this.cardsService.getStatement(this.cardId,this.filter);case 5:this.statement=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0.code||t.t0;case 11:return t.prev=11,this.isLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})))}},{key:"navigateToHome",value:function(){this.router.navigate(["/"])}},{key:"mapQueryParams",value:function(t){var e=Object.assign({},this.filterService.getDefaults(ft.a.ACCOUNTS));for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];a&&null!=a&&"null"!=a&&(e[n]="periodFrom"==n||"periodTo"==n?new Date(a):a)}return e}},{key:"updateQueryParams",value:function(){var t=Object.assign({},this.filter),e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];a&&null!=a&&"null"!=a&&(e[n]="periodFrom"==n||"periodTo"==n?this.datePipe.transform(a,"yyyy-MM-dd"):a)}this.router.navigate([],{queryParams:e,relativeTo:this.route})}}]),t}()).\u0275fac=function(t){return new(t||Tt)(d.Qb(s.c),d.Qb(s.a),d.Qb(p.a),d.Qb(ft.c),d.Qb(a.f))},Tt.\u0275cmp=d.Kb({type:Tt,selectors:[["j-card-statement"]],decls:13,vars:8,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8","bodyClassList","no-grow",3,"closed"],[3,"mode","currency"],["class","py-4",4,"ngIf"],[1,"account-wrapper"],[3,"statement",4,"ngIf"],[1,"search-results",3,"mode","statement"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"py-4"],[3,"statement"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(t,e){1&t&&(d.Wb(0,"f-page",0),d.ic("closed",(function(t){return e.onClose()})),d.Wb(1,"f-page-header"),d.Rb(2,"j-card-header"),d.Rb(3,"j-card-tabs"),d.Vb(),d.Wb(4,"f-page-body"),d.Rb(5,"j-filter",1),d.Vb(),d.Wb(6,"f-page-extra"),d.Pc(7,Ct,2,0,"div",2),d.Wb(8,"section",3),d.Pc(9,yt,1,1,"j-statement-balances",4),d.Rb(10,"j-statement",5),d.Pc(11,St,2,0,"div",6),d.Pc(12,_t,3,1,"div",7),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(5),d.sc("mode",e.filterMode)("currency",null==e.card?null:e.card.balance.currency),d.Ab(2),d.sc("ngIf",e.isLoading),d.Ab(2),d.sc("ngIf",e.statement&&e.statement.totalTransactionsCount>0),d.Ab(1),d.sc("mode",e.statementMode)("statement",e.statement),d.Ab(1),d.sc("ngIf",(null==e.statement?null:e.statement.totalTransactionsCount)>0),d.Ab(1),d.sc("ngIf",e.errorText))},directives:[C.a,y.a,P,V,N.a,pt.b,ht.a,a.u,mt.a,gt.a,vt.a,m.a],styles:["[_nghost-%COMP%]{display:block}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),Tt),Ot=[{path:"",component:(kt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),kt.\u0275fac=function(t){return new(t||kt)},kt.\u0275cmp=d.Kb({type:kt,selectors:[["j-cards"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),kt),data:{title:"TRANSFERS.TITLE"}},{path:":id/statement",component:At},{path:":id/info",component:Y},{path:":id/settings",component:lt},{path:":id",redirectTo:":id/statement"}],It=((xt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:xt}),xt.\u0275inj=d.Nb({factory:function(t){return new(t||xt)},imports:[[s.g.forChild(Ot)],s.g]}),xt);n.d(e,"CardsModule",(function(){return Rt}));var wt,Rt=((wt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Ob({type:wt}),wt.\u0275inj=d.Nb({factory:function(t){return new(t||wt)},imports:[[a.c,z.n,z.D,i.b,c.a,r.a,o.a,It]]}),wt)},"w7f+":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("mrSG"),i=n("fXoL"),r=n("1kSV"),c=n("+eKG"),o=n("sYmb"),s=n("ofXK");function u(t,e){if(1&t&&(i.Wb(0,"a",11),i.Rc(1," CARDS.STATUS.BRANCHES "),i.Vb()),2&t){var n=i.mc();i.sc("href",n.link,i.Ic)}}function l(t,e){if(1&t){var n=i.Xb();i.Wb(0,"a",12),i.ic("click",(function(t){return i.Gc(n),i.mc().unlockCard(t)})),i.Rc(1," CARDS.STATUS.UNLOCK "),i.Vb()}}var d=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modal=e,this.cardsService=n,this.link="https://jysanbank.kz/ru/find/offices/almaty"}return _createClass(t,[{key:"dismissModal",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=e)||void 0===t||t.preventDefault(),this.modal.dismiss()}},{key:"unlockCard",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===(t=e)||void 0===t||t.preventDefault(),n.prev=1,n.next=4,this.cardsService.changeCardStatus(this.cardId,!1);case 4:this.modal.close(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),this.modal.dismiss();case 10:case"end":return n.stop()}}),n,this,[[1,7]])})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.a),i.Qb(c.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-card-status-modal"]],inputs:{img:"img",title:"title",description:"description",cardId:"cardId",canUnlock:"canUnlock"},decls:14,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],[3,"src","alt"],[1,"light","mb-3","mt-2",3,"translate"],[1,"m-0","text-muted",3,"translate"],[1,"modal-footer","d-block","py-4","px-3"],["translate","","target","_blank","class","btn btn-block btn-link mb-3",3,"href",4,"ngIf"],["translate","","class","btn btn-block btn-link mb-3","href","#",3,"click",4,"ngIf"],["translate","","href","#",1,"btn","btn-block","btn-link","m-0",3,"click"],["translate","","target","_blank",1,"btn","btn-block","btn-link","mb-3",3,"href"],["translate","","href","#",1,"btn","btn-block","btn-link","mb-3",3,"click"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Wb(1,"button",1),i.ic("click",(function(t){return e.dismissModal()})),i.Rb(2,"img",2),i.nc(3,"translate"),i.Vb(),i.Vb(),i.Wb(4,"div",3),i.Rb(5,"img",4),i.nc(6,"translate"),i.Rb(7,"h3",5),i.Rb(8,"p",6),i.Vb(),i.Wb(9,"div",7),i.Pc(10,u,2,1,"a",8),i.Pc(11,l,2,0,"a",9),i.Wb(12,"a",10),i.ic("click",(function(t){return e.dismissModal(t)})),i.Rc(13," SHARED.CLOSE "),i.Vb(),i.Vb()),2&t&&(i.Ab(2),i.tc("alt",i.oc(3,7,"SHARED.CLOSE")),i.Ab(3),i.sc("src",e.img,i.Ic)("alt",i.oc(6,9,e.title)),i.Ab(2),i.sc("translate",e.title),i.Ab(1),i.sc("translate",e.description),i.Ab(2),i.sc("ngIf",!e.canUnlock),i.Ab(1),i.sc("ngIf",e.canUnlock))},directives:[o.a,s.u],pipes:[o.d],styles:[""]}),t}()},zwEd:function(t,e,n){"use strict";var a=n("L+ju"),i=n("LvDl"),r=function(t){return t.COMMERCIAL="COMMERCIAL",t.PRIVATE="PRIVATE",t}({}),c=function(){function t(e){_classCallCheck(this,t),this.accountType=a.a.CARD,Object(i.defaults)(this,e),this.maskedNumber=this.getMaskedNumber(),this.formattedName=this.getFormattedName(),this.formattedFullName=this.getFormattedFullName()}return _createClass(t,[{key:"getMaskedNumber",value:function(){var t;return"\u2022\u2022\u2022\u2022 ".concat(this.cardNumber.substr((null===(t=this.cardNumber)||void 0===t?void 0:t.length)-4))}},{key:"getFormattedName",value:function(){return this.firstName||this.lastName||!this.fullName?this.firstName||this.lastName?"".concat(this.capitalized(this.lastName)," ").concat(this.capitalized(this.firstName)):"":this.fullName}},{key:"getFormattedFullName",value:function(){return this.fullName}},{key:"capitalized",value:function(t){var e;return t?"".concat(null===(e=t[0])||void 0===e?void 0:e.toUpperCase()).concat(t.substr(1).toLowerCase()):""}},{key:"hasLockedState",get:function(){return this.status!==o.ACTIVE}}]),t}(),o=function(t){return t.ACTIVE="ACTIVE",t.CLOSED="CLOSED",t.FRAUD="FRAUD",t.EXPIRED="EXPIRED",t.LOST_LOCK="LOST_LOCK",t.THEFT_LOCK="THEFT_LOCK",t.TEMPORARILY_LOCK="TEMPORARILY_LOCK",t}({});n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o}))}}]);