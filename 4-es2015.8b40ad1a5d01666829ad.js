(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8Sq6":function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var i=e("fXoL"),c=e("1kSV"),a=e("VnnJ"),o=e("sYmb");let r=(()=>{class t{constructor(t,n){this.modal=t,this.companyService=n}ngOnInit(){this.mapDescription()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}mapDescription(){this.description=this.companyService.isSecondaryAuthority()?this.mapTranslate("SENT_FOR_PRIMARY_SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SENT_FOR_CHECK"):this.mapTranslate("SENT_FOR_SIGN")}mapTranslate(t){return`CONTRACTS.SUCCESS_MODAL.${t}`}}return t.\u0275fac=function(n){return new(n||t)(i.Qb(c.a),i.Qb(a.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-contract-success-modal"]],decls:12,vars:6,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],["src","/assets/img/history/modals/success.svg"],["translate","",1,"light","mb-3","mt-2"],[1,"p2","mb-0",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"]],template:function(t,n){1&t&&(i.Wb(0,"div",0),i.Wb(1,"button",1),i.ic("click",(function(t){return n.dismissModal()})),i.Rb(2,"img",2),i.mc(3,"translate"),i.Vb(),i.Rb(4,"img",3),i.Wb(5,"h3",4),i.Qc(6," CONTRACTS.SUCCESS_MODAL.TITLE "),i.Vb(),i.Rb(7,"p",5),i.mc(8,"translate"),i.Vb(),i.Wb(9,"div",6),i.Wb(10,"button",7),i.ic("click",(function(t){return n.closeModal()})),i.Qc(11," SHARED.CLOSE "),i.Vb(),i.Vb()),2&t&&(i.Ab(2),i.sc("alt",i.nc(3,2,"SHARED.CLOSE")),i.Ab(5),i.rc("innerHTML",i.nc(8,4,n.description),i.Gc))},directives:[o.a],pipes:[o.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:0}"]}),t})()},"8xPB":function(t,n,e){"use strict";var i=function(t){return t.ON_SIGN="on-sign",t.APPROVED="approved",t.PENDING="pending",t.REJECTED="rejected",t}({});e.d(n,"a",(function(){return i}))},Rreu:function(t,n,e){"use strict";e.r(n);var i=e("gfTr"),c=e("PCNd"),a=e("tyNb"),o=e("mrSG"),r=e("TwVa"),s=e("quSY"),l=e("fXoL"),d=e("VnnJ"),b=e("YjsB"),p=e("ofXK"),m=e("S1F0"),g=e("oKsb"),u=e("fvpk"),h=e("e8Ap"),f=e("xJkR"),_=e("Kd2e"),x=e("gzBp"),O=e("VO+5"),y=e("sYmb"),v=e("ZF+8"),C=e("Kx/q"),w=e("M6pS");function S(t,n){if(1&t&&(l.Wb(0,"li",15),l.Wb(1,"div",16),l.Qc(2),l.mc(3,"translate"),l.Vb(),l.Wb(4,"div",17),l.Qc(5),l.Vb(),l.Vb()),2&t){const t=n.$implicit;l.Ab(2),l.Sc(" ",l.nc(3,4,t.label)," "),l.Ab(2),l.Db(t.extraClass?t.extraClass:"text-dark"),l.Ab(1),l.Sc(" ",t.value," ")}}function P(t,n){if(1&t){const t=l.Xb();l.Wb(0,"button",18),l.ic("click",(function(n){return l.Fc(t),l.lc().onCreatePayment()})),l.Wb(1,"strong"),l.Qc(2),l.mc(3,"translate"),l.Vb(),l.Vb()}if(2&t){const t=l.lc();l.Ab(2),l.Rc(l.nc(3,1,t.mapTranslate("CREATE_PAYMENT")))}}function k(t,n){if(1&t){const t=l.Xb();l.Wb(0,"li",21),l.Wb(1,"a",22),l.ic("click",(function(e){l.Fc(t);const i=n.$implicit;return l.lc(2).onAttachmentDownload(e,i)})),l.Rb(2,"span",23),l.Wb(3,"span"),l.Qc(4),l.Vb(),l.Vb(),l.Wb(5,"div",24),l.Qc(6),l.mc(7,"date"),l.Vb(),l.Vb()}if(2&t){const t=n.$implicit;l.Ab(4),l.Rc(t.file.name),l.Ab(2),l.Rc(l.oc(7,2,t.created,"dd LLL yyyy"))}}function T(t,n){if(1&t&&(l.Wb(0,"div",3),l.Wb(1,"h6",7),l.Qc(2),l.mc(3,"translate"),l.Vb(),l.Wb(4,"ul",19),l.Oc(5,k,8,5,"li",20),l.Vb(),l.Vb()),2&t){const t=l.lc();l.Ab(2),l.Sc(" ",l.nc(3,2,t.mapTranslate("FILES"))," "),l.Ab(3),l.rc("ngForOf",t.contract.attachments)}}let M=(()=>{class t{constructor(t,n,e,i,c,a){this.notifierService=t,this.translateService=n,this.contractsService=e,this.featureFlagsService=i,this.filesService=c,this.router=a,this.isPaymentCreatable=!0,this.isContractErrored=!1,this.isDownloading=!1,this.subscription=new s.a,this.subscription.add(this.featureFlagsService.featureFlags$.subscribe(t=>{this.checkFeatureFlags()}))}ngOnInit(){this.mapData()}ngOnDestroy(){this.subscription.unsubscribe()}onAttachmentDownload(t,n){t.preventDefault(),this.filesService.downloadFileById(n.file.id,n.file.name)}onCreatePayment(){this.router.navigate([`/${x.a.root}/${x.a.foreignCurrency}`],{state:{resolvedPayment:{type:r.i.FOREIGN,isNewPayment:!0,details:{paymentRecipient:null,foreignPaymentDetails:{withinContract:!0,fxContract:this.contract,fxContractId:this.contract.id}}}}})}onDownload(){return Object(o.a)(this,void 0,void 0,(function*(){if(!this.isDownloading){this.isDownloading=!0;try{yield this.contractsService.downloadContractCertificate(this.contract)}catch(t){this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"))}finally{this.isDownloading=!1}}}))}mapTranslate(t){return`CONTRACTS.DETAILS.${t}`}mapData(){var t,n,e,i,c,a;this.data=[];const o=this.contractsService.mapRemainderMessage(this.contract);o&&(this.isContractErrored=!0,this.data=[...this.data,{label:this.mapTranslate("INFO"),value:this.translateService.instant(this.mapTranslate(o)),extraClass:"text-danger"}]),this.data=[...this.data,{label:this.mapTranslate("TYPE"),value:this.contract.type.description},{label:this.mapTranslate("DATE_FROM"),value:this.contract.dateFrom?Object(p.K)(this.contract.dateFrom,"dd MMMM yyyy",this.translateService.currentLang):"-"},{label:this.mapTranslate("DATE_TO"),value:this.contract.dateTo?Object(p.K)(this.contract.dateTo,"dd MMMM yyyy",this.translateService.currentLang):"-"}],this.contract.registrationNumberContract&&(this.data=[...this.data,{label:this.mapTranslate("UNK"),value:this.contract.registrationNumberContract}]),this.contract.documentDate&&(this.data=[...this.data,{label:this.mapTranslate("UNK_DATE"),value:Object(p.K)(this.contract.documentDate,"dd MMMM yyyy",this.translateService.currentLang)}]),this.data=[...this.data,{label:this.mapTranslate("CURRENCY"),value:this.contract.amount.currency},{label:this.mapTranslate("COUNTRY"),value:`${(null===(n=null===(t=this.contract.contractor)||void 0===t?void 0:t.country)||void 0===n?void 0:n.code)||""} - ${(null===(i=null===(e=this.contract.contractor)||void 0===e?void 0:e.country)||void 0===i?void 0:i.name)||""}`},{label:this.mapTranslate("CITY"),value:(null===(c=this.contract.contractor)||void 0===c?void 0:c.cityName)||"-"},{label:this.mapTranslate("BIC"),value:(null===(a=this.contract.contractor.bank)||void 0===a?void 0:a.code)||"-"}]}checkFeatureFlags(){return Object(o.a)(this,void 0,void 0,(function*(){this.isPaymentCreatable=!this.featureFlagsService.isDisabled(_.a.FOREIGN_PAYMENT)}))}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(O.c),l.Qb(y.e),l.Qb(b.b),l.Qb(_.b),l.Qb(v.b),l.Qb(a.c))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-info"]],inputs:{contract:"contract"},decls:29,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[1,"contracts-info__heading","mb-1"],[3,"money"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"contracts-info__buttons"],[1,"btn","btn-outline-primary",3,"disabled","jLoading","jLoadingInverted","click"],["inlineSVG","./assets/icons/contracts/pdf.svg",1,"mr-2"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","contracts-info__block",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child"],[1,"btn","btn-primary",3,"click"],[1,"contracts-info__attachments"],["class","contracts-info__attachment",4,"ngFor","ngForOf"],[1,"contracts-info__attachment"],["href","#",1,"link-blue","contracts-info__filename",3,"click"],["inlineSVG","./assets/icons/contracts/file.svg",1,"contracts-info__icon"],[1,"contracts-info__date","text-muted"]],template:function(t,n){1&t&&(l.Wb(0,"section",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"article",3),l.Wb(4,"h6",4),l.Rb(5,"j-money",5),l.Vb(),l.Wb(6,"p",6),l.Qc(7),l.mc(8,"translate"),l.Vb(),l.Vb(),l.Wb(9,"article",3),l.Wb(10,"h6",4),l.Rb(11,"j-money",5),l.Vb(),l.Wb(12,"p",6),l.Qc(13),l.mc(14,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Wb(15,"div",3),l.Wb(16,"h6",7),l.Qc(17),l.mc(18,"translate"),l.Vb(),l.Wb(19,"ul",8),l.Oc(20,S,6,6,"li",9),l.Vb(),l.Wb(21,"div",10),l.Wb(22,"button",11),l.ic("click",(function(t){return n.onDownload()})),l.Rb(23,"span",12),l.Wb(24,"strong"),l.Qc(25),l.mc(26,"translate"),l.Vb(),l.Vb(),l.Oc(27,P,4,3,"button",13),l.Vb(),l.Vb(),l.Vb(),l.Oc(28,T,6,4,"div",14),l.Vb()),2&t&&(l.Ab(5),l.rc("money",n.contract.amount),l.Ab(2),l.Rc(l.nc(8,12,n.mapTranslate("AMOUNT"))),l.Ab(4),l.rc("money",n.contract.remainder),l.Ab(2),l.Rc(l.nc(14,14,n.mapTranslate("REMAINDER"))),l.Ab(4),l.Sc(" ",l.nc(18,16,n.mapTranslate("TITLE"))," "),l.Ab(3),l.rc("ngForOf",n.data),l.Ab(2),l.rc("disabled",n.isDownloading)("jLoading",n.isDownloading)("jLoadingInverted",!0),l.Ab(3),l.Rc(l.nc(26,18,n.mapTranslate("DOWNLOAD"))),l.Ab(2),l.rc("ngIf",n.isPaymentCreatable&&!n.isContractErrored),l.Ab(1),l.rc("ngIf",(null==n.contract.attachments?null:n.contract.attachments.length)>0))},directives:[C.a,p.t,w.a,h.a,p.u],pipes:[y.d,p.f],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),t})();const A=function(){return{height:"24px","margin-bottom":"3px",width:"50%","background-color":"#ECEEF1"}},E=function(){return{height:"32px","background-color":"#ECEEF1"}};let R=(()=>{class t{constructor(){}ngOnInit(){}mapTranslate(t){return`CONTRACTS.DETAILS.${t}`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-info-loading"]],decls:25,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[3,"theme"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["count","7",3,"theme"],[1,"contracts-info__attachments"],["count","3",3,"theme"]],template:function(t,n){1&t&&(l.Wb(0,"section",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"article",3),l.Rb(4,"ngx-skeleton-loader",4),l.Wb(5,"p",5),l.Qc(6),l.mc(7,"translate"),l.Vb(),l.Vb(),l.Wb(8,"article",3),l.Rb(9,"ngx-skeleton-loader",4),l.Wb(10,"p",5),l.Qc(11),l.mc(12,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Wb(13,"div",3),l.Wb(14,"h6",6),l.Qc(15),l.mc(16,"translate"),l.Vb(),l.Wb(17,"ul",7),l.Rb(18,"ngx-skeleton-loader",8),l.Vb(),l.Vb(),l.Vb(),l.Wb(19,"div",3),l.Wb(20,"h6",6),l.Qc(21),l.mc(22,"translate"),l.Vb(),l.Wb(23,"ul",9),l.Rb(24,"ngx-skeleton-loader",10),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(4),l.rc("theme",l.vc(16,A)),l.Ab(2),l.Rc(l.nc(7,8,n.mapTranslate("AMOUNT"))),l.Ab(3),l.rc("theme",l.vc(17,A)),l.Ab(2),l.Rc(l.nc(12,10,n.mapTranslate("REMAINDER"))),l.Ab(4),l.Sc(" ",l.nc(16,12,n.mapTranslate("TITLE"))," "),l.Ab(3),l.rc("theme",l.vc(18,E)),l.Ab(3),l.Sc(" ",l.nc(22,14,n.mapTranslate("FILES"))," "),l.Ab(3),l.rc("theme",l.vc(19,E)))},directives:[f.a],pipes:[y.d],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),t})();function D(t,n){if(1&t&&(l.Wb(0,"div",4),l.Wb(1,"div",5),l.Rb(2,"span",6),l.Wb(3,"span",7),l.Qc(4),l.Vb(),l.Vb(),l.Wb(5,"h1",8),l.Qc(6),l.Vb(),l.Vb()),2&t){const t=l.lc();l.Ab(2),l.Db(t.iconClassName),l.Ab(2),l.Sc(" ",t.companyName," "),l.Ab(2),l.Sc("\u2116 ",t.contract.contractNumber,"")}}const I=function(){return{height:"24px",width:"70%","background-color":"#ECEEF1"}},F=function(){return{height:"56px",width:"40%","margin-bottom":"8px","background-color":"#ECEEF1"}};function V(t,n){1&t&&(l.Ub(0),l.Rb(1,"ngx-skeleton-loader",9),l.Rb(2,"ngx-skeleton-loader",9),l.Tb()),2&t&&(l.Ab(1),l.rc("theme",l.vc(2,I)),l.Ab(1),l.rc("theme",l.vc(3,F)))}function N(t,n){if(1&t&&l.Rb(0,"j-contracts-info",10),2&t){const t=l.lc();l.rc("contract",t.contract)}}function j(t,n){1&t&&l.Rb(0,"j-contracts-info-loading")}let L=(()=>{class t{constructor(t,n,e,i){this.companyService=t,this.contractsService=n,this.location=e,this.route=i,this.isLoading=!1,this.subscription=new s.a;const c=this.route.params.subscribe(t=>{this.contractId=t.id}),a=this.companyService.refresh$.subscribe(()=>{this.companyName=this.companyService.currentCompany.name,this.loadContract()});this.subscription.add(a),this.subscription.add(c)}ngOnDestroy(){this.subscription.unsubscribe()}onClose(){this.location.back()}get iconClassName(){switch(this.contract.status){case r.c.REGISTERED:case r.c.PROCESSING:return"text-warning";case r.c.REGED:return"text-success";case r.c.REJECTED:case r.c.CLOSED:return"text-danger"}}loadContract(){return Object(o.a)(this,void 0,void 0,(function*(){this.isLoading=!0;try{this.contract=yield this.contractsService.getContractById(this.contractId)}catch(t){this.onClose()}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(d.a),l.Qb(b.b),l.Qb(p.o),l.Qb(a.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-details"]],decls:7,vars:4,consts:[["closePosition","outside","colsClassList","offset-xl-1 col-xl-10","headerClassList","bg-white",3,"closed"],["class","contract-details__header",4,"ngIf"],[4,"ngIf"],[3,"contract",4,"ngIf"],[1,"contract-details__header"],[1,"contracts__top"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"contracts__icon"],[1,"text-muted"],[1,"mb-3"],[3,"theme"],[3,"contract"]],template:function(t,n){1&t&&(l.Wb(0,"f-page",0),l.ic("closed",(function(t){return n.onClose()})),l.Wb(1,"f-page-header"),l.Oc(2,D,7,4,"div",1),l.Oc(3,V,3,4,"ng-container",2),l.Vb(),l.Wb(4,"f-page-body"),l.Oc(5,N,1,1,"j-contracts-info",3),l.Oc(6,j,1,0,"j-contracts-info-loading",2),l.Vb(),l.Vb()),2&t&&(l.Ab(2),l.rc("ngIf",n.contract&&!n.isLoading),l.Ab(1),l.rc("ngIf",n.isLoading),l.Ab(2),l.rc("ngIf",n.contract&&!n.isLoading),l.Ab(1),l.rc("ngIf",n.isLoading))},directives:[m.a,g.a,p.u,u.a,h.a,f.a,M,R],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),t})();var W=e("8xPB");let Q=(()=>{class t{constructor(){this.label="CONTRACTS.ERRORED",this.retried=new l.n}onRetry(t){t.preventDefault(),this.retried.emit()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-error"]],inputs:{label:"label"},outputs:{retried:"retried"},decls:8,vars:7,consts:[[1,"empty"],["src","/assets/img/contracts/empty.svg",1,"empty-img",3,"alt"],["translate","",1,"text-muted","empty-text","my-3"],["href","#",1,"link",3,"click"]],template:function(t,n){1&t&&(l.Wb(0,"section",0),l.Rb(1,"img",1),l.mc(2,"translate"),l.Wb(3,"div",2),l.Qc(4),l.Vb(),l.Wb(5,"a",3),l.ic("click",(function(t){return n.onRetry(t)})),l.Qc(6),l.mc(7,"translate"),l.Vb(),l.Vb()),2&t&&(l.Ab(1),l.rc("alt",l.nc(2,3,n.label)),l.Ab(3),l.Sc(" ",n.label," "),l.Ab(2),l.Sc(" ",l.nc(7,5,"CONTRACTS.RETRY")," "))},directives:[y.a],pipes:[y.d],styles:["[_nghost-%COMP%]{min-height:478px}.empty[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]{padding:1.5rem 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.empty-text[_ngcontent-%COMP%]{line-height:24px}.empty-img[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 14px 16px rgba(0,0,0,.05);margin:1rem 0}"]}),t})();var G=e("4cI0");const $=function(){return{width:"25%",height:"33px","background-color":"#ECEEF1"}};function z(t,n){1&t&&l.Rb(0,"ngx-skeleton-loader",2),2&t&&l.rc("theme",l.vc(1,$))}const B=function(){return{height:"52px","background-color":"#ECEEF1"}};let H=(()=>{class t{constructor(){this.hasTitle=!1}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-loading"]],inputs:{hasTitle:"hasTitle"},decls:2,vars:3,consts:[[3,"theme",4,"ngIf"],["count","6",3,"theme"],[3,"theme"]],template:function(t,n){1&t&&(l.Oc(0,z,1,2,"ngx-skeleton-loader",0),l.Rb(1,"ngx-skeleton-loader",1)),2&t&&(l.rc("ngIf",n.hasTitle),l.Ab(1),l.rc("theme",l.vc(2,B)))},directives:[p.u,f.a],styles:[""]}),t})();const K=["itemTemplate"],U=["headerTemplate"],X=function(t){return{$implicit:t}};function Z(t,n){if(1&t&&l.Sb(0,8),2&t){const t=n.$implicit,e=l.lc(3);l.rc("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",l.wc(2,X,t))}}function Y(t,n){if(1&t&&(l.Ub(0),l.Sb(1,6),l.Oc(2,Z,1,4,"ng-container",7),l.Tb()),2&t){const t=l.lc(2);l.Ab(1),l.rc("ngTemplateOutlet",t.headerTemplate),l.Ab(1),l.rc("ngForOf",t.contractsList)}}function J(t,n){if(1&t){const t=l.Xb();l.Wb(0,"j-contracts-error",9),l.ic("retried",(function(n){return l.Fc(t),l.lc(2).loadContracts()})),l.Vb()}}function q(t,n){1&t&&l.Rb(0,"j-empty-placeholder",10),2&t&&l.rc("minHeight",478)("label","CONTRACTS.LIST.EMPTY.APPROVED")}function tt(t,n){if(1&t&&(l.Wb(0,"div",2),l.Oc(1,Y,3,2,"ng-container",3),l.Oc(2,J,1,0,"j-contracts-error",4),l.Oc(3,q,1,2,"j-empty-placeholder",5),l.Vb()),2&t){const t=l.lc();l.Ab(1),l.rc("ngIf",(null==t.contractsList?null:t.contractsList.length)>0),l.Ab(1),l.rc("ngIf",t.errorText),l.Ab(1),l.rc("ngIf",0==(null==t.contractsList?null:t.contractsList.length))}}function nt(t,n){1&t&&(l.Wb(0,"div",11),l.Rb(1,"j-contracts-loading"),l.Vb())}let et=(()=>{class t{constructor(t,n){this.contractsService=t,this.companyService=n,this.isLoading=!1,this.subscription=new s.a}ngOnInit(){const t=this.companyService.refresh$.subscribe(()=>{this.loadContracts()});this.subscription.add(t)}ngOnDestroy(){this.subscription.unsubscribe()}mapTranslate(t){return`${this.translatePrefix}.${t}`}loadContracts(){return Object(o.a)(this,void 0,void 0,(function*(){this.errorText=null,this.isLoading=!0;try{let t=null;this.onSignForMe&&(t={onSignForMe:!0}),this.onSignForOthers&&(t={onSignForOthers:!0}),this.contractsList=yield this.contractsService.getContracts(this.contractType,t)}catch(t){this.errorText=t.description||t.code||t||!0}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(b.b),l.Qb(d.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-list"]],contentQueries:function(t,n,e){var i;1&t&&(l.Ib(e,K,!0),l.Ib(e,U,!0)),2&t&&(l.Bc(i=l.jc())&&(n.itemTemplate=i.first),l.Bc(i=l.jc())&&(n.headerTemplate=i.first))},inputs:{translatePrefix:"translatePrefix",contractType:"contractType",onSignForMe:"onSignForMe",onSignForOthers:"onSignForOthers"},decls:2,vars:2,consts:[["class","contracts__table contracts-list",4,"ngIf"],["class","contracts__table j-list__loading",4,"ngIf"],[1,"contracts__table","contracts-list"],[4,"ngIf"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"retried"],[3,"minHeight","label"],[1,"contracts__table","j-list__loading"]],template:function(t,n){1&t&&(l.Oc(0,tt,4,3,"div",0),l.Oc(1,nt,2,0,"div",1)),2&t&&(l.rc("ngIf",!n.isLoading),l.Ab(1),l.rc("ngIf",n.isLoading))},directives:[p.u,p.B,p.t,Q,G.a,H],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),t})();var it=e("1kSV"),ct=e("wV3k");function at(t,n){if(1&t&&(l.Wb(0,"div",5),l.Qc(1),l.mc(2,"translate"),l.Vb()),2&t){const t=n.$implicit,e=l.lc(2);l.Ab(1),l.Rc(l.nc(2,1,e.mapTranslate(t)))}}function ot(t,n){if(1&t&&(l.Wb(0,"div",3),l.Oc(1,at,3,3,"div",4),l.Vb()),2&t){const t=l.lc();l.Ab(1),l.rc("ngForOf",t.headings)}}function rt(t,n){if(1&t&&(l.Wb(0,"div",19),l.Wb(1,"span",20),l.Qc(2," \u2116 "),l.Vb(),l.Wb(3,"div",21),l.Qc(4),l.Vb(),l.Vb()),2&t){const t=l.lc().$implicit;l.rc("ngbTooltip","\u2116 "+t.contractNumber),l.Ab(4),l.Sc(" ",t.contractNumber," ")}}function st(t,n){1&t&&(l.Wb(0,"div"),l.Qc(1," - "),l.Vb())}function lt(t,n){if(1&t&&(l.Wb(0,"div",22),l.Qc(1),l.mc(2,"translate"),l.Vb()),2&t){const t=l.lc(2);l.Ab(1),l.Sc(" ",l.nc(2,1,t.mapTranslate("HAS_UNK"))," ")}}function dt(t,n){if(1&t&&(l.Ub(0),l.Wb(1,"div",14),l.mc(2,"moneyPipe"),l.Rb(3,"j-money",15),l.Vb(),l.Tb()),2&t){const t=l.lc().$implicit;l.Ab(1),l.rc("ngbTooltip",l.nc(2,2,t.amount)),l.Ab(2),l.rc("money",t.amount)}}function bt(t,n){if(1&t&&(l.Wb(0,"div",23),l.Qc(1),l.mc(2,"translate"),l.Vb()),2&t){const t=l.lc().$implicit,n=l.lc();l.Ab(1),l.Sc(" ",l.nc(2,1,n.mapRemainderMessage(t))," ")}}function pt(t,n){if(1&t){const t=l.Xb();l.Wb(0,"div",6),l.ic("click",(function(e){l.Fc(t);const i=n.$implicit;return l.lc().onContractClick(i)})),l.Wb(1,"div",7),l.Wb(2,"div",8),l.Qc(3),l.mc(4,"translate"),l.Vb(),l.Wb(5,"div",9),l.Rb(6,"span",10),l.Oc(7,rt,5,2,"div",11),l.Oc(8,st,2,0,"div",12),l.Vb(),l.Oc(9,lt,3,3,"div",13),l.Vb(),l.Wb(10,"div",7),l.Wb(11,"div",8),l.Qc(12),l.mc(13,"translate"),l.Vb(),l.Wb(14,"div",14),l.Qc(15),l.Vb(),l.Vb(),l.Wb(16,"div",7),l.Wb(17,"div",8),l.Qc(18),l.mc(19,"translate"),l.Vb(),l.Oc(20,dt,4,4,"ng-container",12),l.Vb(),l.Wb(21,"div",7),l.Wb(22,"div",8),l.Qc(23),l.mc(24,"translate"),l.Vb(),l.Wb(25,"div",14),l.mc(26,"moneyPipe"),l.Rb(27,"j-money",15),l.Vb(),l.Oc(28,bt,3,3,"div",16),l.Vb(),l.Wb(29,"div",7),l.Wb(30,"div",17),l.Wb(31,"button",18),l.ic("click",(function(e){l.Fc(t);const i=n.$implicit;return l.lc().onDownload(e,i)})),l.mc(32,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&t){const t=n.$implicit,e=l.lc();l.Ab(3),l.Sc(" ",l.nc(4,17,e.mapTranslate(e.headings[0]))," "),l.Ab(4),l.rc("ngIf",t.contractNumber),l.Ab(1),l.rc("ngIf",!t.contractNumber),l.Ab(1),l.rc("ngIf",e.hasUnk(t)),l.Ab(3),l.Sc(" ",l.nc(13,19,e.mapTranslate(e.headings[1]))," "),l.Ab(2),l.rc("ngbTooltip",null==t.contractor?null:t.contractor.name),l.Ab(1),l.Sc(" ",(null==t.contractor?null:t.contractor.name)||"-"," "),l.Ab(3),l.Sc(" ",l.nc(19,21,e.mapTranslate(e.headings[2]))," "),l.Ab(2),l.rc("ngIf",t.amount),l.Ab(3),l.Sc(" ",l.nc(24,23,e.mapTranslate(e.headings[3]))," "),l.Ab(2),l.rc("ngbTooltip",l.nc(26,25,t.remainder)),l.Ab(2),l.rc("money",t.remainder),l.Ab(1),l.rc("ngIf",e.mapRemainderMessage(t)),l.Ab(3),l.Hb("j-list__action--disabled",e.loadingIds.includes(t.id)),l.rc("ngbTooltip",l.nc(32,27,e.mapTranslate(e.loadingIds.includes(t.id)?"DOWNLOADING":"DOWNLOAD")))("inlineSVG","./assets/icons/transaction/pdf.svg")}}const mt=["01","02"];let gt=(()=>{class t{constructor(t,n,e,i,c){this.contractsService=t,this.route=n,this.router=e,this.notifierService=i,this.translateService=c,this.headings=["CONTRACT_NUMBER","CONTRACT_NAME","CONTRACT_AMOUNT","CONTRACT_REMAINDER"],this.translatePrefix="CONTRACTS.APPROVED",this.contractType=W.a.APPROVED,this.loadingIds=[]}mapTranslate(t){return`${this.translatePrefix}.${t}`}hasUnk(t){return t.status==r.c.REGED&&mt.includes(t.type.colvirCode)}mapRemainderMessage(t){const n=this.contractsService.mapRemainderMessage(t);return n?this.mapTranslate(n):null}onContractClick(t){this.router.navigate([t.id],{relativeTo:this.route.parent.parent})}onDownload(t,n){return Object(o.a)(this,void 0,void 0,(function*(){if(t.stopPropagation(),!this.loadingIds.includes(n.id)){this.loadingIds.push(n.id);try{yield this.contractsService.downloadContractCertificate(n)}catch(e){this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"))}finally{const t=this.loadingIds.indexOf(n.id);this.loadingIds.splice(t,1)}}}))}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(b.b),l.Qb(a.a),l.Qb(a.c),l.Qb(O.c),l.Qb(y.e))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-approved"]],decls:5,vars:2,consts:[[3,"translatePrefix","contractType"],["headerTemplate",""],["itemTemplate",""],[1,"contracts__row","contracts__row--approved","contracts__header"],["class","text-muted p4",4,"ngFor","ngForOf"],[1,"text-muted","p4"],[1,"contracts__row","contracts__row--approved","contracts__item","contracts__item--hoverable","p3",3,"click"],[1,"contracts__cell"],[1,"text-muted","p4","contracts__label"],[1,"contracts__top"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"text-success","contracts__icon"],["tooltipClass","tooltip-light","placement","top","class","contracts__number text-truncate",3,"ngbTooltip",4,"ngIf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["tooltipClass","tooltip-light","placement","top",1,"text-truncate",3,"ngbTooltip"],[3,"money"],["class","text-danger",4,"ngIf"],[1,"j-list__actions"],["tooltipClass","tooltip-light",1,"j-list__action",3,"ngbTooltip","inlineSVG","click"],["tooltipClass","tooltip-light","placement","top",1,"contracts__number","text-truncate",3,"ngbTooltip"],[1,"text-muted","mr-1"],[1,"text-truncate"],[1,"text-muted"],[1,"text-danger"]],template:function(t,n){1&t&&(l.Wb(0,"j-contracts-list",0),l.Oc(1,ot,2,1,"ng-template",null,1,l.Pc),l.Oc(3,pt,33,29,"ng-template",null,2,l.Pc),l.Vb()),2&t&&l.rc("translatePrefix",n.translatePrefix)("contractType",n.contractType)},directives:[et,p.t,h.a,p.u,it.E,C.a],pipes:[y.d,ct.a],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}.contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}.contracts__row--approved[_ngcontent-%COMP%]{grid-template-columns:minmax(90px,140px) minmax(170px,2fr) minmax(160px,1fr) minmax(160px,1fr) 56px}"]}),t})();var ut=e("bsP8"),ht=e("paXB"),ft=e("7/bn"),_t=e("oMXN"),xt=e("EiG8");function Ot(t,n){if(1&t&&(l.Wb(0,"span",8),l.Wb(1,"span",9),l.Qc(2),l.mc(3,"translate"),l.Vb(),l.Wb(4,"span",10),l.Qc(5),l.mc(6,"translate"),l.Vb(),l.Vb()),2&t){const t=l.lc().$implicit;l.Ab(2),l.Sc(" ",l.nc(3,2,t.label)," "),l.Ab(3),l.Sc(" ",l.nc(6,4,"SHARED.SOON")," ")}}function yt(t,n){if(1&t&&(l.Wb(0,"a",11),l.Qc(1),l.mc(2,"translate"),l.Vb()),2&t){const t=l.lc().$implicit;l.rc("routerLink",t.url),l.Ab(1),l.Rc(l.nc(2,2,t.label))}}function vt(t,n){if(1&t&&(l.Ub(0),l.Oc(1,Ot,7,6,"span",6),l.Oc(2,yt,3,4,"a",7),l.Tb()),2&t){const t=n.$implicit;l.Ab(1),l.rc("ngIf",t.soon),l.Ab(1),l.rc("ngIf",!t.soon)}}let Ct=(()=>{class t{constructor(t,n){this.contractsModalsService=t,this.featureFlagsService=n,this.isAddingDisabled=!1,this.contractTabs=[{label:"CONTRACTS.TABS.OUTCOMING",url:"/contracts/outcoming"},{label:"CONTRACTS.TABS.INCOMING",url:"/contracts/incoming",soon:!0}],this.subscription=new s.a}ngOnInit(){this.checkFeatureFlag(),this.subscription.add(this.featureFlagsService.featureFlags$.subscribe(t=>{this.checkFeatureFlag()}))}ngOnDestroy(){this.subscription.unsubscribe()}showAddContractModal(){this.contractsModalsService.showAddContractModal(!0)}checkFeatureFlag(){this.isAddingDisabled=this.featureFlagsService.isDisabled(_.a.FX_CONTRACTS)}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(b.a),l.Qb(_.b))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-nav"]],decls:8,vars:4,consts:[[1,"j-tabs"],[1,"j-tabs__list"],[4,"ngFor","ngForOf"],[1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","/assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],["class","j-tabs__item j-tabs__item--soon",4,"ngIf"],["routerLinkActive","active","class","j-tabs__item",3,"routerLink",4,"ngIf"],[1,"j-tabs__item","j-tabs__item--soon"],[1,"j-tabs__label"],[1,"j-tabs__badge","badge","badge-warning"],["routerLinkActive","active",1,"j-tabs__item",3,"routerLink"]],template:function(t,n){1&t&&(l.Wb(0,"div",0),l.Wb(1,"nav",1),l.Oc(2,vt,3,2,"ng-container",2),l.Wb(3,"button",3),l.ic("click",(function(t){return n.showAddContractModal()})),l.Rb(4,"span",4),l.Wb(5,"span",5),l.Qc(6),l.mc(7,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(2),l.rc("ngForOf",n.contractTabs),l.Ab(4),l.Rc(l.nc(7,2,"CONTRACTS.ADD_NEW")))},directives:[p.t,h.a,p.u,a.f,a.e],pipes:[y.d],styles:[""]}),t})();var wt=e("I+WJ"),St=e("zdqJ");let Pt=(()=>{class t{constructor(t,n){this.router=t,this.navService=n,this.statuses=[{count:0,isSelected:!0,label:"CONTRACTS.TYPES.ON_SIGN",value:W.a.ON_SIGN},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.APPROVED",value:W.a.APPROVED},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.PENDING",value:W.a.PENDING},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.REJECTED",value:W.a.REJECTED}],this.subscription=new s.a;const e=t.events.subscribe(t=>{t instanceof a.b&&(this.statuses=this.statuses.map(n=>(n.isSelected=t.urlAfterRedirects===`/contracts/outcoming/${n.value}`,n)))}),i=this.navService.getContractBadges().subscribe(t=>{const{onSignForMe:n,onSignForOthers:e}=t,i=n>0;Object.assign(this.statuses[0],{count:i?n:e,classList:i?"badge-primary":"badge-light"})});this.subscription.add(e),this.subscription.add(i)}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}onStatusSelect(t){this.router.navigate(["/contracts/outcoming",t])}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(a.c),l.Qb(ut.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-outcoming"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"],[1,"j-page"],["translate","",1,"d-none","d-lg-block","j-page__title"],[1,"j-page__body"],[1,"j-list"],[1,"j-list__nav"],[1,"j-list__filter"],["jTour","CONTRACTS.STATUSES","jTourPosition","bottom",3,"statuses","selected"]],template:function(t,n){1&t&&(l.Wb(0,"j-layout-home"),l.Wb(1,"j-aside"),l.Rb(2,"j-nav-main"),l.Vb(),l.Wb(3,"j-main"),l.Wb(4,"section",0),l.Wb(5,"section",1),l.Wb(6,"section",2),l.Wb(7,"h2",3),l.Qc(8,"CONTRACTS.TITLE"),l.Vb(),l.Wb(9,"section",4),l.Wb(10,"section",5),l.Wb(11,"div",6),l.Rb(12,"j-contracts-nav"),l.Vb(),l.Wb(13,"div",7),l.Wb(14,"j-statuses",8),l.ic("selected",(function(t){return n.onStatusSelect(t)})),l.Vb(),l.Vb(),l.Rb(15,"router-outlet"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(14),l.rc("statuses",n.statuses))},directives:[ht.a,ft.a,_t.a,xt.a,y.a,Ct,wt.a,St.a,a.h],styles:[""]}),t})();var kt=e("hJI6");let Tt=(()=>{class t{constructor(){this.translatePrefix="CONTRACTS.DATE"}ngOnInit(){}get tooltip(){if(this.contract)switch(this.contract.status){case r.c.ON_SIGN:case r.c.REGED:case r.c.REGISTERED:case r.c.PROCESSING:return this.mapTranslate("SENT");case r.c.REJECTED:return this.mapTranslate("REJECTED")}}mapTranslate(t){return`${this.translatePrefix}.${t}`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-date"]],inputs:{contract:"contract"},decls:8,vars:11,consts:[["tooltipClass","tooltip-light",1,"contract__date",3,"ngbTooltip"],[1,"text-dark"],[1,"ml-1","text-muted"]],template:function(t,n){1&t&&(l.Wb(0,"div",0),l.mc(1,"translate"),l.Wb(2,"span",1),l.Qc(3),l.mc(4,"date"),l.Vb(),l.Wb(5,"span",2),l.Qc(6),l.mc(7,"date"),l.Vb(),l.Vb()),2&t&&(l.rc("ngbTooltip",l.nc(1,3,n.tooltip)),l.Ab(3),l.Rc(l.oc(4,5,n.contract.created,"d MMMM yyyy,")),l.Ab(3),l.Rc(l.oc(7,8,n.contract.created,"HH:mm")))},directives:[it.E],pipes:[y.d,p.f],styles:[""]}),t})();function Mt(t,n){if(1&t&&l.Rb(0,"span",1),2&t){const t=l.lc();l.Db(t.statusClassname)}}let At=(()=>{class t{constructor(){}ngOnInit(){this.mapContractType()}mapContractType(){switch(this.contract.status){case r.c.REGED:this.statusClassname="text-success";break;case r.c.PROCESSING:case r.c.REGISTERED:this.statusClassname="text-warning";break;case r.c.REJECTED:this.statusClassname="text-danger"}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-status"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","contracts__icon mr-2","inlineSVG","./assets/icons/contracts/icon.svg",3,"class",4,"ngIf"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"contracts__icon","mr-2"]],template:function(t,n){1&t&&l.Oc(0,Mt,1,2,"span",0),2&t&&l.rc("ngIf",n.statusClassname)},directives:[p.u,h.a],styles:[""]}),t})();function Et(t,n){if(1&t&&(l.Wb(0,"button",15),l.Qc(1),l.mc(2,"async"),l.Vb()),2&t){const t=l.lc().$implicit,n=l.lc();l.Ab(1),l.Sc(" ",l.nc(2,1,n.mapAttachmentsTitle(t))," ")}}function Rt(t,n){if(1&t&&(l.Wb(0,"button",16),l.Qc(1),l.mc(2,"async"),l.Vb()),2&t){const t=l.lc().$implicit,n=l.lc();l.Ab(1),l.Sc(" ",l.nc(2,1,n.mapAttachmentsTitle(t))," ")}}function Dt(t,n){if(1&t&&(l.Wb(0,"div",17),l.Qc(1),l.Vb()),2&t){const t=l.lc().$implicit;l.Ab(1),l.Sc(" ",t.statusMessage," ")}}function It(t,n){if(1&t&&(l.Wb(0,"div",8),l.Rb(1,"j-contracts-status",4),l.Wb(2,"article",9),l.Wb(3,"div",10),l.Wb(4,"span",11),l.Qc(5),l.mc(6,"translate"),l.Vb(),l.Oc(7,Et,3,3,"button",12),l.Oc(8,Rt,3,3,"button",13),l.Vb(),l.Oc(9,Dt,2,1,"div",14),l.Vb(),l.Vb()),2&t){const t=n.$implicit,e=l.lc();l.Ab(1),l.rc("contract",t),l.Ab(4),l.Sc(" ",l.nc(6,5,e.mapTranslate("TITLE"))," "),l.Ab(2),l.rc("ngIf",t.hasTour),l.Ab(1),l.rc("ngIf",!t.hasTour),l.Ab(1),l.rc("ngIf",t.statusMessage)}}const Ft=function(t){return{$implicit:t}};function Vt(t,n){if(1&t){const t=l.Xb();l.Wb(0,"ul",18),l.ic("click",(function(n){return l.Fc(t),n.stopPropagation()})),l.Sb(1,3),l.Vb()}if(2&t){const t=n.$implicit,e=l.lc(),i=l.Cc(12);l.Nc("margin-top",t.isCollapsed?"1rem":0)("margin-bottom",t.isCollapsed&&e.hasMoreAttachments?"-1rem":0)("opacity",t.isCollapsed?1:0)("max-height",e.attachmentsMaxHeight),l.Hb("contract-attachments--one-action",!e.isSignable&&e.isDeletable||e.isSignable&&!e.isDeletable)("contract-attachments--two-actions",e.isSignable&&e.isDeletable)("contract-attachments--selectable",e.isSelectable),l.Ab(1),l.rc("ngTemplateOutlet",i)("ngTemplateOutletContext",l.wc(16,Ft,t))}}function Nt(t,n){if(1&t){const t=l.Xb();l.Wb(0,"li",21),l.Wb(1,"div",22),l.Rb(2,"span",23),l.Wb(3,"div",24),l.Qc(4),l.Vb(),l.Wb(5,"button",25),l.ic("click",(function(e){l.Fc(t);const i=n.$implicit;return l.lc(2).onAttachmentDownload(e,i)})),l.Vb(),l.Vb(),l.Vb()}if(2&t){const t=n.$implicit;l.rc("jLoading",t.isLoading),l.Ab(4),l.Rc((null==t.file?null:t.file.name)||"-")}}function jt(t,n){if(1&t){const t=l.Xb();l.Wb(0,"li",26),l.ic("click",(function(n){return l.Fc(t),l.lc(2).showMoreAttachments()})),l.Qc(1),l.mc(2,"async"),l.Vb()}if(2&t){const t=l.lc(2);l.Ab(1),l.Sc(" ",l.nc(2,1,t.mapMoreTitle())," ")}}function Lt(t,n){if(1&t&&(l.Oc(0,Nt,6,2,"li",19),l.Oc(1,jt,3,3,"li",20)),2&t){const t=l.lc();l.rc("ngForOf",t.attachments),l.Ab(1),l.rc("ngIf",t.hasMoreAttachments)}}let Wt=(()=>{class t{constructor(t,n){this.translateService=t,this.filesService=n,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.ITEM",this.maxAllowedAttachments=10}ngOnInit(){}get attachments(){return this.contract.attachments.slice(0,this.maxAllowedAttachments)}get hasMoreAttachments(){return this.maxAllowedAttachments<this.contract.attachments.length}get attachmentsMaxHeight(){if(!this.contract.isCollapsed)return 0;let t=56*this.attachments.length;return this.hasMoreAttachments&&(t+=42),`${t}px`}onAttachmentDownload(t,n){return Object(o.a)(this,void 0,void 0,(function*(){if(t.stopPropagation(),!n.isLoading){n.isLoading=!0;try{yield this.filesService.downloadFileById(n.file.id,n.file.name)}catch(e){}finally{n.isLoading=!1}}}))}showMoreAttachments(){this.maxAllowedAttachments+=10}mapAttachmentsTitle(t){var n;return this.mapAttachmentsKey("ATTACHMENTS_TITLE",null===(n=t.attachments)||void 0===n?void 0:n.length)}mapTranslate(t){return`${this.translatePrefix}.${t}`}mapMoreTitle(){return this.mapAttachmentsKey("MORE",Math.min(this.contract.attachments.length-this.maxAllowedAttachments,10))}mapAttachmentsKey(t,n){const e={count:n};let i=`${t}.${this.mapPluralKey(n)}`;return this.translateService.stream(this.mapTranslate(i),e)}mapPluralKey(t){switch(t%20){case 1:return"ONE";case 2:case 3:case 4:return"FEW";default:return"OTHER"}}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(y.e),l.Qb(v.b))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-item"]],inputs:{contract:"contract",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},decls:13,vars:9,consts:[[1,"contracts-item-wrap"],[1,"p3","contracts-item"],[1,"contracts__cell"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"contract"],["mainTemplate",""],["attachmentsTemplate",""],["attachmentsCollapsedTemplate",""],[1,"contracts-item__main"],[1,"contracts-item__content"],[1,"contracts-item__title"],[1,"text-dark"],["jTour","CONTRACTS.FILES","jTourPosition","bottom","class","contracts-item__attachments-title",4,"ngIf"],["class","contracts-item__attachments-title",4,"ngIf"],["class","text-muted contracts-item__message",4,"ngIf"],["jTour","CONTRACTS.FILES","jTourPosition","bottom",1,"contracts-item__attachments-title"],[1,"contracts-item__attachments-title"],[1,"text-muted","contracts-item__message"],[1,"contract-attachments",3,"click"],["class","contract-attachment",3,"jLoading",4,"ngFor","ngForOf"],["class","contract-attachment contract-attachment--more p3",3,"click",4,"ngIf"],[1,"contract-attachment",3,"jLoading"],[1,"contract-attachment__content"],["inlineSVG","/assets/icons/contracts/attachment-prefix.svg"],[1,"p3","text-muted","text-truncate"],["inlineSVG","/assets/icons/contracts/attachment-download.svg",1,"contract-attachment__download",3,"click"],[1,"contract-attachment","contract-attachment--more","p3",3,"click"]],template:function(t,n){if(1&t&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Sb(3,3),l.Vb(),l.Wb(4,"div",2),l.Rb(5,"j-contracts-date",4),l.Vb(),l.Vb(),l.Sb(6,3),l.Vb(),l.Oc(7,It,10,7,"ng-template",null,5,l.Pc),l.Oc(9,Vt,2,18,"ng-template",null,6,l.Pc),l.Oc(11,Lt,2,2,"ng-template",null,7,l.Pc)),2&t){const t=l.Cc(8),e=l.Cc(10);l.Ab(3),l.rc("ngTemplateOutlet",t)("ngTemplateOutletContext",l.wc(5,Ft,n.contract)),l.Ab(2),l.rc("contract",n.contract),l.Ab(1),l.rc("ngTemplateOutlet",e)("ngTemplateOutletContext",l.wc(7,Ft,n.contract))}},directives:[p.B,Tt,At,p.u,St.a,p.t,w.a,h.a],pipes:[y.d,p.b],styles:['.contract[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract[_ngcontent-%COMP%], .contracts-item[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contracts-item[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:minmax(0,1fr) 150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.contracts-item-wrap[_ngcontent-%COMP%]{position:relative}.contracts-item__attachments-title[_ngcontent-%COMP%]{font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;position:relative;margin-left:4px;padding:0}.contracts-item__attachments-title[_ngcontent-%COMP%], .contracts-item__attachments-title[_ngcontent-%COMP%]:after{display:inline-block;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts-item__attachments-title[_ngcontent-%COMP%]:after{content:"";bottom:2px;left:8px;right:8px;position:absolute;border-bottom:1px dashed #666c72}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover{color:#ef5630}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover:after{border-color:#ef5630}.contract__date[_ngcontent-%COMP%], .contracts-item__main[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract__date[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contract-attachments[_ngcontent-%COMP%]{padding:0;overflow:hidden;max-height:0;margin:0 -16px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachments--selectable[_ngcontent-%COMP%]{margin-left:-56px}.contract-attachments--one-action[_ngcontent-%COMP%]{margin-right:-66px}.contract-attachments--two-actions[_ngcontent-%COMP%]{margin-right:-116px}.contract-attachment[_ngcontent-%COMP%]{position:relative;padding:0 1rem}.contract-attachment.is-loading[_ngcontent-%COMP%]{cursor:not-allowed}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__content[_ngcontent-%COMP%]{opacity:.5}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__download[_ngcontent-%COMP%]:hover{color:#b7bec5}.contract-attachment--more[_ngcontent-%COMP%]{background:#f6f7f8;height:42px;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;border-radius:0;-webkit-box-align:center;align-items:center;color:#1586bb;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment--more[_ngcontent-%COMP%]:hover{color:#ef5630}.contract-attachment__content[_ngcontent-%COMP%]{height:56px;display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;-webkit-box-align:center;align-items:center;grid-template-columns:24px 1fr 40px;position:relative;z-index:1}.contract-attachment__download[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:0;color:#b7bec5;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment__download[_ngcontent-%COMP%]:hover{color:#ef5630}']}),t})();function Qt(t,n){if(1&t&&l.Rb(0,"j-contracts-item",2),2&t){const t=n.$implicit,e=l.lc();l.rc("contract",t)("isDeletable",e.isDeletable)("isSelectable",e.isSelectable)("isSignable",e.isSignable)}}let Gt=(()=>{class t{constructor(t,n,e){this.navService=t,this.translateService=n,this.locale=e,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.scrolled=new l.n,this.signed=new l.n,this.translatePrefix="CONTRACTS.LIST",this.urlPath="fx-contracts",this.collapsedIds=[],this.modalPartialTitleFn=this.mapModalPartialTitle.bind(this)}mapModalPartialTitle(t){const n=this.translateService.instant(this.mapTranslate("ITEM_TITLE"),{date:Object(p.K)(t.created,"d MMMM yyyy",this.locale)});return n?`${n}:`:""}mapTranslate(t){return`${this.translatePrefix}.${t}`}onClick(t){t.isCollapsed=!t.isCollapsed}onScroll(){this.scrolled.emit()}onClear(){this.navService.retrieveContractBadges()}onSign(){this.signed.emit()}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(ut.a),l.Qb(y.e),l.Qb(l.u))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-group"]],inputs:{title:"title",list:"list",contractType:"contractType",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},outputs:{scrolled:"scrolled",signed:"signed"},decls:3,vars:9,consts:[[3,"list","title","urlPath","translatePrefix","isHoverable","isDeletable","isSelectable","isSignable","partialTitleFn","clicked","scrolled","cleared","signed"],["defaultTemplate",""],[3,"contract","isDeletable","isSelectable","isSignable"]],template:function(t,n){1&t&&(l.Wb(0,"j-list",0),l.ic("clicked",(function(t){return n.onClick(t)}))("scrolled",(function(t){return n.onScroll()}))("cleared",(function(t){return n.onClear()}))("signed",(function(t){return n.onSign()})),l.Oc(1,Qt,1,4,"ng-template",null,1,l.Pc),l.Vb()),2&t&&l.rc("list",n.list)("title",n.title)("urlPath",n.urlPath)("translatePrefix",n.translatePrefix)("isHoverable",!0)("isDeletable",n.isDeletable)("isSelectable",n.isSelectable)("isSignable",n.isSignable)("partialTitleFn",n.modalPartialTitleFn)},directives:[kt.a,Wt],styles:[""]}),t})();function $t(t,n){if(1&t){const t=l.Xb();l.Wb(0,"j-contracts-error",7),l.ic("retried",(function(n){return l.Fc(t),l.lc(2).onRetry()})),l.Vb()}}function zt(t,n){if(1&t&&l.Rb(0,"j-empty-placeholder",8),2&t){const t=l.lc(2);l.rc("minHeight",478)("label",t.mapTranslate("EMPTY.ON_SIGN"))}}function Bt(t,n){if(1&t){const t=l.Xb();l.Ub(0),l.Wb(1,"j-contracts-group",3),l.ic("signed",(function(n){return l.Fc(t),l.lc().onSign()})),l.Vb(),l.Rb(2,"j-contracts-group",4),l.Oc(3,$t,1,0,"j-contracts-error",5),l.Oc(4,zt,1,2,"j-empty-placeholder",6),l.Tb()}if(2&t){const t=l.lc();l.Ab(1),l.rc("list",t.onSignForMeList)("isSignable",!0)("isSelectable",!0)("isDeletable",!1),l.Ab(1),l.rc("list",t.onSignForOthersList)("title",t.mapTranslate("OTHERS_FOR_SIGN")),l.Ab(1),l.rc("ngIf",t.errorText),l.Ab(1),l.rc("ngIf",0===t.onSignForMeList.length&&0===t.onSignForOthersList.length&&!t.errorText)}}function Ht(t,n){1&t&&(l.Wb(0,"section",9),l.Rb(1,"j-contracts-loading"),l.Rb(2,"j-contracts-loading",10),l.Vb()),2&t&&(l.Ab(2),l.rc("hasTitle",!0))}let Kt=(()=>{class t{constructor(t,n,e,i,c,a){this.contractsService=t,this.navService=n,this.companyService=e,this.router=i,this.featureFlagsService=c,this.tourService=a,this.translatePrefix="CONTRACTS.LIST",this.contractType=W.a.ON_SIGN,this.isLoading=!0,this.onSignForMeList=[],this.onSignForOthersList=[],this.errorText=null,this.subscription=new s.a,this.subscription.add(this.companyService.refresh$.subscribe(t=>{const[n,e,i]=t;i&&this.retrieveContracts()})),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe(()=>{this.retrieveContracts()}))}ngOnDestroy(){this.subscription.unsubscribe()}onSign(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.retrieveContracts(),0==this.onSignForMeList.length&&this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()&&this.router.navigateByUrl(`contracts/outcoming/${W.a.PENDING}`)}))}onRetry(){this.navService.getContractBadges(),this.retrieveContracts()}retrieveContracts(){return Object(o.a)(this,void 0,void 0,(function*(){this.errorText=null;try{yield Promise.all([this.retrieveOnSignForMe(),this.retrieveOnSignForOthers()])}catch(t){this.errorText=t.description||t}finally{this.isLoading=!1}}))}retrieveOnSignForMe(){return Object(o.a)(this,void 0,void 0,(function*(){this.onSignForMeList=yield this.contractsService.getContracts(W.a.ON_SIGN,{onSignForMe:!0})}))}retrieveOnSignForOthers(){return Object(o.a)(this,void 0,void 0,(function*(){this.onSignForOthersList=yield this.contractsService.getContracts(W.a.ON_SIGN,{onSignForOthers:!0})}))}mapTranslate(t){return`${this.translatePrefix}.${t}`}startContractsTour(){let t=[];this.featureFlagsService.isDisabled(_.a.FX_CONTRACTS)||t.push("CONTRACTS.NEW"),t.push("CONTRACTS.STATUSES"),this.onSignForMeList.length>0?(this.onSignForMeList[0].hasTour=!0,t.push("CONTRACTS.FILES")):this.onSignForOthersList.length>0&&(this.onSignForOthersList[0].hasTour=!0,t.push("CONTRACTS.FILES"))}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(b.b),l.Qb(ut.a),l.Qb(d.a),l.Qb(a.c),l.Qb(_.b),l.Qb(v.g))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-on-sign"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","isSignable","isSelectable","isDeletable","signed"],[1,"d-block","pt-3",3,"list","title"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"],[3,"hasTitle"]],template:function(t,n){1&t&&(l.Wb(0,"section",0),l.Oc(1,Bt,5,8,"ng-container",1),l.Oc(2,Ht,3,1,"section",2),l.Vb()),2&t&&(l.Ab(1),l.rc("ngIf",!n.isLoading),l.Ab(1),l.rc("ngIf",n.isLoading))},directives:[p.u,Gt,Q,G.a,H],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),t})();var Ut=e("itXk");function Xt(t,n){if(1&t){const t=l.Xb();l.Wb(0,"j-contracts-error",6),l.ic("retried",(function(n){return l.Fc(t),l.lc(2).retrieveContracts()})),l.Vb()}}function Zt(t,n){if(1&t&&l.Rb(0,"j-empty-placeholder",7),2&t){const t=l.lc(2);l.rc("minHeight",478)("label",t.emptyLabel)}}function Yt(t,n){if(1&t&&(l.Ub(0),l.Rb(1,"j-contracts-group",3),l.Oc(2,Xt,1,0,"j-contracts-error",4),l.Oc(3,Zt,1,2,"j-empty-placeholder",5),l.Tb()),2&t){const t=l.lc();l.Ab(1),l.rc("list",t.contractsList)("contractType",t.contractType)("isSignable",t.isSignable)("isSelectable",t.isSelectable)("isDeletable",t.isDeletable),l.Ab(1),l.rc("ngIf",t.errorText),l.Ab(1),l.rc("ngIf",0==(null==t.contractsList?null:t.contractsList.length))}}function Jt(t,n){1&t&&(l.Wb(0,"section",8),l.Rb(1,"j-contracts-loading"),l.Vb())}let qt=(()=>{class t{constructor(t,n,e){this.contractsService=t,this.companyService=n,this.route=e,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.LIST",this.isLoading=!1,this.subscription=new s.a}ngOnInit(){this.subscription.add(Object(Ut.a)([this.route.data,this.companyService.refresh$]).subscribe(t=>{const[n,e]=t;this.contractType=n.contractType,this.mapListActions(),this.mapEmptyLabel(),this.retrieveContracts()})),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe(()=>{this.retrieveContracts()}))}ngOnDestroy(){this.subscription.unsubscribe()}mapTranslate(t){return`${this.translatePrefix}.${t}`}retrieveContracts(){return Object(o.a)(this,void 0,void 0,(function*(){this.errorText=null,this.isLoading=!0;try{this.contractsList=yield this.contractsService.getContracts(this.contractType)}catch(t){this.errorText=t.description||t.code||t||!0}finally{this.isLoading=!1}}))}mapListActions(){switch(this.contractType){case W.a.REJECTED:this.isSelectable=!0}}mapEmptyLabel(){let t="EMPTY.";switch(this.contractType){case W.a.APPROVED:t+="APPROVED";break;case W.a.REJECTED:t+="REJECTED";break;case W.a.PENDING:t+="PENDING"}this.emptyLabel=this.mapTranslate(t)}}return t.\u0275fac=function(n){return new(n||t)(l.Qb(b.b),l.Qb(d.a),l.Qb(a.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts-list-base"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","contractType","isSignable","isSelectable","isDeletable"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"]],template:function(t,n){1&t&&(l.Wb(0,"section",0),l.Oc(1,Yt,4,7,"ng-container",1),l.Oc(2,Jt,2,0,"section",2),l.Vb()),2&t&&(l.Ab(1),l.rc("ngIf",!n.isLoading),l.Ab(1),l.rc("ngIf",n.isLoading))},directives:[p.u,Gt,Q,G.a,H],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),t})();const tn=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Kb({type:t,selectors:[["j-contracts"]],decls:1,vars:0,template:function(t,n){1&t&&l.Rb(0,"router-outlet")},directives:[a.h],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),t})(),data:{title:"CONTRACTS.TITLE"},children:[{path:"outcoming",component:Pt,children:[{path:W.a.ON_SIGN,component:Kt,data:{contractType:W.a.ON_SIGN}},{path:W.a.APPROVED,component:gt,data:{contractType:W.a.APPROVED}},{path:W.a.PENDING,component:qt,data:{contractType:W.a.PENDING}},{path:W.a.REJECTED,component:qt,data:{contractType:W.a.REJECTED}},{path:"**",redirectTo:W.a.ON_SIGN}]},{path:":id",component:L},{path:"**",redirectTo:"outcoming"}]},{path:"**",redirectTo:""}];let nn=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(n){return new(n||t)},imports:[[a.g.forChild(tn)],a.g]}),t})();e("i/as"),e("8Sq6"),e("w657"),e.d(n,"ContractsModule",(function(){return cn}));const en=[c.a,nn,i.c];let cn=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(n){return new(n||t)},imports:[[en]]}),t})()},XMRP:function(t,n,e){"use strict";e.d(n,"a",(function(){return h}));var i=e("mrSG"),c=e("tk/3"),a=e("Wgwc"),o=e.n(a),r=e("TwVa"),s=e("8xPB"),l=e("XNiG"),d=e("fXoL"),b=e("VnnJ"),p=e("yZrb"),m=e("ZF+8"),g=e("FhWM"),u=e("tyNb");let h=(()=>{class t{constructor(t,n,e,i,c){this.companyService=t,this.apiService=n,this.filesService=e,this.listService=i,this.router=c,this.contractsSubmitted$=new l.a}getContractsSubmitted(){return this.contractsSubmitted$.asObservable()}mapRemainderMessage(t){var n;return(null===(n=t.remainder)||void 0===n?void 0:n.amount)<=0?"AMOUNT_CLOSED":o()().isAfter(t.dateTo,"date")?"HAS_EXPIRED":null}submitContracts(t,n=!1){return Object(i.a)(this,void 0,void 0,(function*(){const e=this.mapApiUrl(),i={attachments:t.filter(t=>!t.error&&t.file).map(t=>({fileId:t.file.id}))},c=yield this.apiService.post(e,i);if(yield this.checkAndSignIfNeeded(c),this.contractsSubmitted$.next(),n){let t="contracts/outcoming/";this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?t+=s.a.PENDING:t+=s.a.ON_SIGN,this.router.navigateByUrl(t)}return c}))}getContracts(t=null,n=null){const e=this.mapApiUrl();let i=new c.h;if(i=i.set("fetchAttachments","true"),n)for(const c in n)if(Object.hasOwnProperty.call(n,c)){const t=n[c];t&&(i=i.append(c,t))}switch(t){case s.a.ON_SIGN:i=i.append("status",r.c.ON_SIGN);break;case s.a.APPROVED:i=i.append("status",r.c.REGED);break;case s.a.PENDING:i=i.append("status",r.c.REGISTERED),i=i.append("status",r.c.PROCESSING);break;case s.a.REJECTED:i=i.append("status",r.c.REJECTED)}return this.apiService.get(e,null,i)}getContractCertificate(t){return Object(i.a)(this,void 0,void 0,(function*(){const n=this.mapApiUrl(`${t}/certificate`);let e=new c.g;return e=e.set("Accept-File","application/pdf"),e=e.set("Content-Type","application/octet-stream"),this.apiService.get(n,e,null,{responseType:"blob"})}))}downloadContractCertificate(t){return Object(i.a)(this,void 0,void 0,(function*(){const n=yield this.getContractCertificate(t.id);return yield this.filesService.downloadFile(n,`${t.contractor.name}.pdf`),!0}))}sign(t){return this.listService.sign("fx-contracts",t.id)}checkAndSignIfNeeded(t){return Object(i.a)(this,void 0,void 0,(function*(){if(this.companyService.isSecondaryAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()){const n=yield this.sign(t);if(!n)throw!1;return n}}))}getContractById(t){return Object(i.a)(this,void 0,void 0,(function*(){const n=this.mapApiUrl(t);return this.apiService.get(n)}))}mapApiUrl(t=null){return`companies/${this.companyService.currentId}/fx-contracts${t?`/${t}`:""}`}}return t.\u0275fac=function(n){return new(n||t)(d.ec(b.a),d.ec(p.a),d.ec(m.b),d.ec(g.a),d.ec(u.c))},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},YjsB:function(t,n,e){"use strict";var i=e("XMRP"),c=e("mrSG"),a=e("Kd2e"),o=e("i/as"),r=e("w657"),s=e("8Sq6"),l=e("fXoL"),d=e("1kSV"),b=e("ZF+8");let p=(()=>{class t{constructor(t,n,e){this.modalService=t,this.jModalService=n,this.featureFlagsService=e}showAddContractModal(t=!1){return Object(c.a)(this,void 0,void 0,(function*(){if(yield this.featureFlagsService.isDisabledPromise(a.a.FX_CONTRACTS))return void this.jModalService.showMaintenanceModal();const n=this.modalService.open(o.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0});n.componentInstance.shouldNavigateToContracts=t;try{yield n.result,this.showSuccessModal()}catch({error:e,uploadingFiles:i}){i&&this.showErrorModal(e,i)}}))}showSuccessModal(){this.modalService.open(s.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})}showErrorModal(t,n){return Object(c.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(r.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0});e.componentInstance.uploadingFiles=n,e.componentInstance.error=t;try{yield e.result,this.showSuccessModal()}catch(t){}}))}}return t.\u0275fac=function(n){return new(n||t)(l.ec(d.q),l.ec(b.c),l.ec(a.b))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();e.d(n,"b",(function(){return i.a})),e.d(n,"a",(function(){return p}))},gfTr:function(t,n,e){"use strict";e.d(n,"a",(function(){return g})),e.d(n,"b",(function(){return m})),e.d(n,"c",(function(){return u}));var i=e("fXoL"),c=e("PqYM"),a=e("ofXK");const o=["fileSelector"];function r(t,n){if(1&t&&(i.Wb(0,"div",7),i.Qc(1),i.Vb()),2&t){const t=i.lc(2);i.Ab(1),i.Rc(t.dropZoneLabel)}}function s(t,n){if(1&t){const t=i.Xb();i.Wb(0,"div"),i.Wb(1,"input",8),i.ic("click",(function(n){return i.Fc(t),i.lc(2).openFileSelector(n)})),i.Vb(),i.Vb()}if(2&t){const t=i.lc(2);i.Ab(1),i.Db(t.browseBtnClassName),i.sc("value",t.browseBtnLabel)}}function l(t,n){if(1&t&&(i.Oc(0,r,2,1,"div",5),i.Oc(1,s,2,3,"div",6)),2&t){const t=i.lc();i.rc("ngIf",t.dropZoneLabel),i.Ab(1),i.rc("ngIf",t.showBrowseBtn)}}function d(t,n){}const b=function(t){return{openFileSelector:t}};class p{constructor(t,n){this.relativePath=t,this.fileEntry=n}}let m=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(n){return new(n||t)(i.Qb(i.L))},t.\u0275dir=i.Lb({type:t,selectors:[["","ngx-file-drop-content-tmp",""]]}),t})(),g=(()=>{class t{constructor(t,n){this.zone=t,this.renderer=n,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new i.n,this.onFileOver=new i.n,this.onFileLeave=new i.n,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=t=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",t=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",t=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(t){this._disabled=null!=t&&"false"!==`${t}`}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(t){this.useDragEnter?(this.preventAndStop(t),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")):this.isDropzoneDisabled()||this.useDragEnter||!t.dataTransfer||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t),t.dataTransfer.dropEffect="copy")}onDragEnter(t){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t))}onDragLeave(t){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(t)),this.preventAndStop(t))}dropFiles(t){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,t.dataTransfer)){let n;n=t.dataTransfer.items?t.dataTransfer.items:t.dataTransfer.files,this.preventAndStop(t),this.checkFiles(n)}}uploadFiles(t){!this.isDropzoneDisabled()&&t.target&&(this.checkFiles(t.target.files||[]),this.resetFileInput())}checkFiles(t){for(let n=0;n<t.length;n++){const e=t[n];let i=null;if(this.canGetAsEntry(e)&&(i=e.webkitGetAsEntry()),i)if(i.isFile){const t=new p(i.name,i);this.addToQueue(t)}else i.isDirectory&&this.traverseFileTree(i,i.name);else if(e){const t={name:e.name,isDirectory:!1,isFile:!0,file:t=>t(e)},n=new p(t.name,t);this.addToQueue(n)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(c.a)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const t=this.files;this.files=[],this.onFileDrop.emit(t)}})}traverseFileTree(t,n){if(t.isFile){const e=new p(n,t);this.files.push(e)}else{n+="/";const e=t.createReader();let i=[];const c=()=>{this.numOfActiveReadEntries++,e.readEntries(e=>{if(e.length)i=i.concat(e),c();else if(0===i.length){const e=new p(n,t);this.zone.run(()=>{this.addToQueue(e)})}else for(let t=0;t<i.length;t++)this.zone.run(()=>{this.traverseFileTree(i[t],n+i[t].name)});this.numOfActiveReadEntries--})};c()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const t=this.fileSelector.nativeElement,n=t.parentElement,e=this.getHelperFormElement(),i=this.getFileInputPlaceholderElement();n!==e&&(this.renderer.insertBefore(n,i,t),this.renderer.appendChild(e,t),e.reset(),this.renderer.insertBefore(n,t,i),this.renderer.removeChild(n,i))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(t){return!!t.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(t){this.files.push(t)}preventAndStop(t){t.stopPropagation(),t.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)(i.Qb(i.z),i.Qb(i.D))},t.\u0275cmp=i.Kb({type:t,selectors:[["ngx-file-drop"]],contentQueries:function(t,n,e){var c;1&t&&i.Ib(e,m,!0,i.L),2&t&&i.Bc(c=i.jc())&&(n.contentTemplate=c.first)},viewQuery:function(t,n){var e;1&t&&i.Lc(o,!0),2&t&&i.Bc(e=i.jc())&&(n.fileSelector=e.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:17,consts:[[3,"drop","dragover","dragenter","dragleave"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"value","click"]],template:function(t,n){if(1&t&&(i.Wb(0,"div",0),i.ic("drop",(function(t){return n.dropFiles(t)}))("dragover",(function(t){return n.onDragOver(t)}))("dragenter",(function(t){return n.onDragEnter(t)}))("dragleave",(function(t){return n.onDragLeave(t)})),i.Wb(1,"div"),i.Wb(2,"input",1,2),i.ic("change",(function(t){return n.uploadFiles(t)})),i.Vb(),i.Oc(4,l,2,2,"ng-template",null,3,i.Pc),i.Oc(6,d,0,0,"ng-template",4),i.Vb(),i.Vb()),2&t){const t=i.Cc(5);i.Db(n.dropZoneClassName),i.Hb("ngx-file-drop__drop-zone--over",n.isDraggingOverDropZone),i.Ab(1),i.Db(n.contentClassName),i.Ab(1),i.rc("accept",n.accept)("multiple",n.multiple),i.Bb("directory",n.directory||void 0)("webkitdirectory",n.directory||void 0)("mozdirectory",n.directory||void 0)("msdirectory",n.directory||void 0)("odirectory",n.directory||void 0),i.Ab(4),i.rc("ngTemplateOutlet",n.contentTemplate||t)("ngTemplateOutletContext",i.wc(15,b,n.openFileSelector))}},directives:[a.B,a.u],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),t})(),u=(()=>{class t{}return t.\u0275mod=i.Ob({type:t,bootstrap:function(){return[g]}}),t.\u0275inj=i.Nb({factory:function(n){return new(n||t)},providers:[],imports:[[a.c]]}),t})()},"i/as":function(t,n,e){"use strict";e.d(n,"a",(function(){return f}));var i=e("mrSG"),c=e("fXoL"),a=e("1kSV"),o=e("VnnJ"),r=e("XMRP"),s=e("ZF+8"),l=e("bsP8"),d=e("e8Ap"),b=e("gfTr"),p=e("LFY/"),m=e("M6pS"),g=e("sYmb");const u=["fileDrop"];function h(t,n){1&t&&c.Rb(0,"img",20)}let f=(()=>{class t{constructor(t,n,e,i,c){this.modal=t,this.companyService=n,this.contractsService=e,this.filesService=i,this.navService=c,this.shouldNavigateToContracts=!1,this.acceptedFormats=".pdf, .jpg, .jpeg, .doc, .png, .tif",this.uploadingFiles=[],this.isLoading=!1}ngOnInit(){this.uploadingFiles=[],this.mapSubmitLabel()}ngOnDestroy(){this.uploadingFiles=[]}onFileDrop(t){for(const n of t)n.fileEntry.isFile&&n.fileEntry.file(t=>{this.filesService.uploading$.next([t])})}onUploadingFilesUpdate(t){this.uploadingFiles=t}mapTranslate(t){return`CONTRACTS.ADD_CONTRACT_MODAL.${t}`}dismissModal(t=null,n=null){this.modal.dismiss({error:t,uploadingFiles:n}),this.uploadingFiles=[]}closeModal(){this.uploadingFiles=[],this.modal.close()}openFileSelector(){this.fileDrop.openFileSelector()}submitFiles(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.filesService.checkIfCanBeUploadedAndNotify(this.uploadingFiles)){this.isLoading=!0;try{yield this.contractsService.submitContracts(this.uploadingFiles),this.navService.retrieveContractBadges(),this.closeModal()}catch(t){t?this.dismissModal(t,this.uploadingFiles):this.dismissModal(t)}finally{this.isLoading=!1}}}))}mapSubmitLabel(){this.submitLabel=this.companyService.isSecondaryAuthority()?this.mapTranslate("SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SIGN_AND_SEND"):this.mapTranslate("SENT_FOR_SIGN")}}return t.\u0275fac=function(n){return new(n||t)(c.Qb(a.a),c.Qb(o.a),c.Qb(r.a),c.Qb(s.b),c.Qb(l.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["j-add-contract-modal"]],viewQuery:function(t,n){var e;1&t&&c.Vc(u,!0),2&t&&c.Bc(e=c.jc())&&(n.fileDrop=e.first)},inputs:{shouldNavigateToContracts:"shouldNavigateToContracts"},decls:37,vars:36,consts:[[1,"modal-body","j-modal-body","p-5"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[3,"hidden"],[1,"add-contract-modal__header"],[1,"btn","btn-outline-primary","add-contract-modal__back-button","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"add-contract-modal__wrap"],[3,"dropZoneLabel","accept","onFileDrop"],["fileDrop",""],["ngx-file-drop-content-tmp",""],[1,"text-muted","text-center","my-4",3,"innerHTML"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[3,"isLoading","acceptedFormats","updated"],[1,"add-contract-modal__footer"],[1,"p4","text-muted",3,"innerHTML"],[1,"add-contract-modal__buttons"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","jLoading","click"],["src","/assets/img/contracts/upload.svg"]],template:function(t,n){1&t&&(c.Wb(0,"div",0),c.Wb(1,"button",1),c.ic("click",(function(t){return n.dismissModal()})),c.Rb(2,"img",2),c.mc(3,"translate"),c.Vb(),c.Wb(4,"section",3),c.Wb(5,"div",4),c.Wb(6,"button",5),c.ic("click",(function(t){return n.dismissModal()})),c.Rb(7,"span",6),c.Vb(),c.Wb(8,"h5",7),c.Qc(9),c.mc(10,"translate"),c.Vb(),c.Vb(),c.Wb(11,"div",8),c.Wb(12,"ngx-file-drop",9,10),c.ic("onFileDrop",(function(t){return n.onFileDrop(t)})),c.mc(14,"translate"),c.Oc(15,h,1,0,"ng-template",11),c.Vb(),c.Rb(16,"p",12),c.mc(17,"translate"),c.Wb(18,"button",13),c.ic("click",(function(t){return n.openFileSelector()})),c.Qc(19),c.mc(20,"translate"),c.Vb(),c.Vb(),c.Vb(),c.Wb(21,"section",3),c.Wb(22,"div",4),c.Wb(23,"h5",7),c.Qc(24),c.mc(25,"translate"),c.Vb(),c.Vb(),c.Wb(26,"j-uploading-files",14),c.ic("updated",(function(t){return n.onUploadingFilesUpdate(t)})),c.Vb(),c.Wb(27,"div",15),c.Rb(28,"p",16),c.mc(29,"translate"),c.Vb(),c.Wb(30,"div",17),c.Wb(31,"button",18),c.ic("click",(function(t){return n.openFileSelector()})),c.Qc(32),c.mc(33,"translate"),c.Vb(),c.Wb(34,"button",19),c.ic("click",(function(t){return n.submitFiles()})),c.Qc(35),c.mc(36,"translate"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Ab(2),c.sc("alt",c.nc(3,18,"SHARED.CLOSE")),c.Ab(2),c.rc("hidden",n.uploadingFiles.length>0),c.Ab(3),c.rc("inlineSVG","assets/icons/arrow-left.svg"),c.Ab(2),c.Sc(" ",c.nc(10,20,n.mapTranslate("HEADING"))," "),c.Ab(3),c.rc("dropZoneLabel",c.nc(14,22,n.mapTranslate("UPLOAD")))("accept",n.acceptedFormats),c.Ab(4),c.rc("innerHTML",c.nc(17,24,n.mapTranslate("DESCRIPTION")),c.Gc),c.Ab(3),c.Sc(" ",c.nc(20,26,n.mapTranslate("UPLOAD"))," "),c.Ab(2),c.rc("hidden",0==n.uploadingFiles.length),c.Ab(3),c.Sc(" ",c.nc(25,28,n.mapTranslate("UPLOADED_HEADING"))," "),c.Ab(2),c.rc("isLoading",n.isLoading)("acceptedFormats",n.acceptedFormats),c.Ab(2),c.rc("innerHTML",c.nc(29,30,n.mapTranslate("AGREEMENT")),c.Gc),c.Ab(3),c.rc("disabled",n.isLoading),c.Ab(1),c.Sc(" ",c.nc(33,32,n.mapTranslate("UPLOAD_FILE"))," "),c.Ab(2),c.rc("disabled",n.isLoading)("jLoading",n.isLoading),c.Ab(1),c.Sc(" ",c.nc(36,34,n.submitLabel)," "))},directives:[d.a,b.a,b.b,p.a,m.a],pipes:[g.d],styles:[":host{position:relative}.add-contract-modal__file-selector{border-radius:30px;border:0;background:none;outline:0;width:100%;height:100%}ngx-file-drop .ngx-file-drop__drop-zone{border-radius:30px!important;border:0!important;background-image:url(/assets/img/contracts/dropzone.svg);width:335px;height:165px!important;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}ngx-file-drop .ngx-file-drop__drop-zone--over,ngx-file-drop .ngx-file-drop__drop-zone:hover{background-color:#f5f9fd!important}ngx-file-drop .ngx-file-drop__content{border-radius:30px!important;width:335px!important;height:165px!important}.add-contract-modal__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.add-contract-modal__header h5{font-size:22px}.add-contract-modal__back-button{width:40px;height:40px;padding:0}.add-contract-modal__back-button,.add-contract-modal__wrap{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.add-contract-modal__wrap{padding:50px 0 0;max-width:360px;margin:0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.add-contract-modal__close{position:absolute;right:24px;top:24px}.modal-body{position:relative}.add-contract-modal__footer{padding-top:20px;border-top:1px solid rgba(183,190,197,.5)}.add-contract-modal__footer p{line-height:18px}.add-contract-modal__buttons{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:repeat(2,calc(50% - 6px))}.add-contract-modal__buttons .btn{padding-left:0;padding-right:0}"],encapsulation:2}),t})()},w657:function(t,n,e){"use strict";e.d(n,"a",(function(){return d}));var i=e("mrSG"),c=e("jtnZ"),a=e("fXoL"),o=e("1kSV"),r=e("XMRP"),s=e("sYmb"),l=e("M6pS");let d=(()=>{class t{constructor(t,n){this.modal=t,this.contractsService=n,this.isLoading=!1}ngOnInit(){this.errorText=this.error.code===c.a.FORBIDDEN?"CONTRACTS.ERROR_MODAL.FORBIDDEN":"CONTRACTS.ERROR_MODAL.GENERAL"}submitContracts(){return Object(i.a)(this,void 0,void 0,(function*(){this.isLoading=!0;try{yield this.contractsService.submitContracts(this.uploadingFiles),this.closeModal()}catch(t){}finally{this.isLoading=!1}}))}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}}return t.\u0275fac=function(n){return new(n||t)(a.Qb(o.a),a.Qb(r.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["j-contract-error-modal"]],inputs:{description:"description",error:"error",uploadingFiles:"uploadingFiles"},decls:16,vars:12,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","my-2"],[1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"disabled","jLoading","click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"disabled","click"]],template:function(t,n){1&t&&(a.Wb(0,"div",0),a.Wb(1,"button",1),a.ic("click",(function(t){return n.dismissModal()})),a.Rb(2,"img",2),a.mc(3,"translate"),a.Vb(),a.Rb(4,"img",3),a.mc(5,"translate"),a.Wb(6,"h3",4),a.Qc(7," SHARED.ERROR "),a.Vb(),a.Wb(8,"p",5),a.Qc(9),a.mc(10,"translate"),a.Vb(),a.Vb(),a.Wb(11,"div",6),a.Wb(12,"button",7),a.ic("click",(function(t){return n.submitContracts()})),a.Qc(13," SHARED.TRY_AGAIN "),a.Vb(),a.Wb(14,"button",8),a.ic("click",(function(t){return n.dismissModal()})),a.Qc(15," SHARED.BACK_TO_HOME "),a.Vb(),a.Vb()),2&t&&(a.Ab(2),a.sc("alt",a.nc(3,6,"SHARED.CLOSE")),a.Ab(2),a.sc("alt",a.nc(5,8,"SHARED.ERROR")),a.Ab(5),a.Sc(" ",a.nc(10,10,n.errorText)," "),a.Ab(3),a.rc("disabled",n.isLoading)("jLoading",n.isLoading),a.Ab(2),a.rc("disabled",n.isLoading))},directives:[s.a,l.a],pipes:[s.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding:56px 32px 0}"]}),t})()}}]);