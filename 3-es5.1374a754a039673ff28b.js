function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,a=!1,c=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(s){a=!0,c=s}finally{try{i||null==r.return||r.return()}finally{if(a)throw c}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"8Sq6":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),a=n("1kSV"),c=n("VnnJ"),o=n("sYmb"),r=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modal=e,this.companyService=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapDescription()}},{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(){this.modal.close()}},{key:"mapDescription",value:function(){this.description=this.companyService.isSecondaryAuthority()?this.mapTranslate("SENT_FOR_PRIMARY_SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SENT_FOR_CHECK"):this.mapTranslate("SENT_FOR_SIGN")}},{key:"mapTranslate",value:function(t){return"CONTRACTS.SUCCESS_MODAL.".concat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(a.a),i.Qb(c.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-contract-success-modal"]],decls:12,vars:6,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],["src","./assets/img/history/modals/success.svg"],["translate","",1,"light","mb-3","mt-2"],[1,"p2","mb-0",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Wb(1,"button",1),i.ic("click",(function(t){return e.dismissModal()})),i.Rb(2,"img",2),i.nc(3,"translate"),i.Vb(),i.Rb(4,"img",3),i.Wb(5,"h3",4),i.Sc(6," CONTRACTS.SUCCESS_MODAL.TITLE "),i.Vb(),i.Rb(7,"p",5),i.nc(8,"translate"),i.Vb(),i.Wb(9,"div",6),i.Wb(10,"button",7),i.ic("click",(function(t){return e.closeModal()})),i.Sc(11," SHARED.CLOSE "),i.Vb(),i.Vb()),2&t&&(i.Ab(2),i.uc("alt",i.oc(3,2,"SHARED.CLOSE")),i.Ab(5),i.tc("innerHTML",i.oc(8,4,e.description),i.Ic))},directives:[o.a],pipes:[o.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:0}"]}),t}()},"8xPB":function(t,e,n){"use strict";var i=function(t){return t.ON_SIGN="on-sign",t.APPROVED="approved",t.PENDING="pending",t.REJECTED="rejected",t}({});n.d(e,"a",(function(){return i}))},Rreu:function(t,e,n){"use strict";n.r(e);var i=n("gfTr"),a=n("PCNd"),c=n("tyNb"),o=n("mrSG"),r=n("TwVa"),s=n("quSY"),l=n("fXoL"),b=n("VnnJ"),d=n("YjsB"),u=n("ofXK"),p=n("S1F0"),m=n("oKsb"),g=n("fvpk"),f=n("e8Ap"),h=n("xJkR"),_=n("Kd2e"),v=n("gzBp"),x=n("VO+5"),y=n("sYmb"),C=n("ZF+8"),k=n("Kx/q"),w=n("M6pS");function O(t,e){if(1&t&&(l.Wb(0,"li",15),l.Wb(1,"div",16),l.Sc(2),l.nc(3,"translate"),l.Vb(),l.Wb(4,"div",17),l.Sc(5),l.Vb(),l.Vb()),2&t){var n=e.$implicit;l.Ab(2),l.Uc(" ",l.oc(3,4,n.label)," "),l.Ab(2),l.Db(n.extraClass?n.extraClass:"text-dark"),l.Ab(1),l.Uc(" ",n.value," ")}}function S(t,e){if(1&t){var n=l.Xb();l.Wb(0,"button",18),l.ic("click",(function(t){return l.Hc(n),l.mc().onCreatePayment()})),l.Wb(1,"strong"),l.Sc(2),l.nc(3,"translate"),l.Vb(),l.Vb()}if(2&t){var i=l.mc();l.Ab(2),l.Tc(l.oc(3,1,i.mapTranslate("CREATE_PAYMENT")))}}function T(t,e){if(1&t){var n=l.Xb();l.Wb(0,"li",21),l.Wb(1,"a",22),l.ic("click",(function(t){l.Hc(n);var i=e.$implicit;return l.mc(2).onAttachmentDownload(t,i)})),l.Rb(2,"span",23),l.Wb(3,"span"),l.Sc(4),l.Vb(),l.Vb(),l.Wb(5,"div",24),l.Sc(6),l.nc(7,"date"),l.Vb(),l.Vb()}if(2&t){var i=e.$implicit;l.Ab(4),l.Tc(i.file.name),l.Ab(2),l.Tc(l.pc(7,2,i.created,"dd LLL yyyy"))}}function P(t,e){if(1&t&&(l.Wb(0,"div",3),l.Wb(1,"h6",7),l.Sc(2),l.nc(3,"translate"),l.Vb(),l.Wb(4,"ul",19),l.Qc(5,T,8,5,"li",20),l.Vb(),l.Vb()),2&t){var n=l.mc();l.Ab(2),l.Uc(" ",l.oc(3,2,n.mapTranslate("FILES"))," "),l.Ab(3),l.tc("ngForOf",n.contract.attachments)}}var M,A,E=((M=function(){function t(e,n,i,a,c,o){var r=this;_classCallCheck(this,t),this.notifierService=e,this.translateService=n,this.contractsService=i,this.featureFlagsService=a,this.filesService=c,this.router=o,this.isPaymentCreatable=!0,this.isContractErrored=!1,this.isDownloading=!1,this.subscription=new s.a,this.subscription.add(this.featureFlagsService.featureFlags$.subscribe((function(t){r.checkFeatureFlags()})))}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapData()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onAttachmentDownload",value:function(t,e){t.preventDefault(),this.filesService.downloadFileById(e.file.id,e.file.name)}},{key:"onCreatePayment",value:function(){this.router.navigate(["/".concat(v.a.root,"/").concat(v.a.foreignCurrency)],{state:{resolvedPayment:{type:r.i.FOREIGN,isNewPayment:!0,details:{paymentRecipient:null,foreignPaymentDetails:{withinContract:!0,fxContract:this.contract,fxContractId:this.contract.id}}}}})}},{key:"onDownload",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDownloading){t.next=13;break}return this.isDownloading=!0,t.prev=2,t.next=5,this.contractsService.downloadContractCertificate(this.contract);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"));case 10:return t.prev=10,this.isDownloading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[2,7,10,13]])})))}},{key:"mapTranslate",value:function(t){return"CONTRACTS.DETAILS.".concat(t)}},{key:"mapData",value:function(){var t,e,n,i,a,c;this.data=[];var o=this.contractsService.mapRemainderMessage(this.contract);o&&(this.isContractErrored=!0,this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("INFO"),value:this.translateService.instant(this.mapTranslate(o)),extraClass:"text-danger"}])),this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("TYPE"),value:this.contract.type.description},{label:this.mapTranslate("DATE_FROM"),value:this.contract.dateFrom?Object(u.K)(this.contract.dateFrom,"dd MMMM yyyy",this.translateService.currentLang):"-"},{label:this.mapTranslate("DATE_TO"),value:this.contract.dateTo?Object(u.K)(this.contract.dateTo,"dd MMMM yyyy",this.translateService.currentLang):"-"}]),this.contract.registrationNumberContract&&(this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("UNK"),value:this.contract.registrationNumberContract}])),this.contract.documentDate&&(this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("UNK_DATE"),value:Object(u.K)(this.contract.documentDate,"dd MMMM yyyy",this.translateService.currentLang)}])),this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("CURRENCY"),value:this.contract.amount.currency},{label:this.mapTranslate("COUNTRY"),value:"".concat((null===(e=null===(t=this.contract.contractor)||void 0===t?void 0:t.country)||void 0===e?void 0:e.code)||""," - ").concat((null===(i=null===(n=this.contract.contractor)||void 0===n?void 0:n.country)||void 0===i?void 0:i.name)||"")},{label:this.mapTranslate("CITY"),value:(null===(a=this.contract.contractor)||void 0===a?void 0:a.cityName)||"-"},{label:this.mapTranslate("BIC"),value:(null===(c=this.contract.contractor.bank)||void 0===c?void 0:c.code)||"-"}])}},{key:"checkFeatureFlags",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isPaymentCreatable=!this.featureFlagsService.isDisabled(_.a.FOREIGN_PAYMENT);case 1:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||M)(l.Qb(x.c),l.Qb(y.e),l.Qb(d.b),l.Qb(_.b),l.Qb(C.b),l.Qb(c.c))},M.\u0275cmp=l.Kb({type:M,selectors:[["j-contracts-info"]],inputs:{contract:"contract"},decls:29,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[1,"contracts-info__heading","mb-1"],[3,"money"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"contracts-info__buttons"],[1,"btn","btn-outline-primary",3,"disabled","jLoading","jLoadingInverted","click"],["inlineSVG","./assets/icons/contracts/pdf.svg",1,"mr-2"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","contracts-info__block",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child"],[1,"btn","btn-primary",3,"click"],[1,"contracts-info__attachments"],["class","contracts-info__attachment",4,"ngFor","ngForOf"],[1,"contracts-info__attachment"],["href","#",1,"link-blue","contracts-info__filename",3,"click"],["inlineSVG","./assets/icons/contracts/file.svg",1,"contracts-info__icon"],[1,"contracts-info__date","text-muted"]],template:function(t,e){1&t&&(l.Wb(0,"section",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"article",3),l.Wb(4,"h6",4),l.Rb(5,"j-money",5),l.Vb(),l.Wb(6,"p",6),l.Sc(7),l.nc(8,"translate"),l.Vb(),l.Vb(),l.Wb(9,"article",3),l.Wb(10,"h6",4),l.Rb(11,"j-money",5),l.Vb(),l.Wb(12,"p",6),l.Sc(13),l.nc(14,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Wb(15,"div",3),l.Wb(16,"h6",7),l.Sc(17),l.nc(18,"translate"),l.Vb(),l.Wb(19,"ul",8),l.Qc(20,O,6,6,"li",9),l.Vb(),l.Wb(21,"div",10),l.Wb(22,"button",11),l.ic("click",(function(t){return e.onDownload()})),l.Rb(23,"span",12),l.Wb(24,"strong"),l.Sc(25),l.nc(26,"translate"),l.Vb(),l.Vb(),l.Qc(27,S,4,3,"button",13),l.Vb(),l.Vb(),l.Vb(),l.Qc(28,P,6,4,"div",14),l.Vb()),2&t&&(l.Ab(5),l.tc("money",e.contract.amount),l.Ab(2),l.Tc(l.oc(8,12,e.mapTranslate("AMOUNT"))),l.Ab(4),l.tc("money",e.contract.remainder),l.Ab(2),l.Tc(l.oc(14,14,e.mapTranslate("REMAINDER"))),l.Ab(4),l.Uc(" ",l.oc(18,16,e.mapTranslate("TITLE"))," "),l.Ab(3),l.tc("ngForOf",e.data),l.Ab(2),l.tc("disabled",e.isDownloading)("jLoading",e.isDownloading)("jLoadingInverted",!0),l.Ab(3),l.Tc(l.oc(26,18,e.mapTranslate("DOWNLOAD"))),l.Ab(2),l.tc("ngIf",e.isPaymentCreatable&&!e.isContractErrored),l.Ab(1),l.tc("ngIf",(null==e.contract.attachments?null:e.contract.attachments.length)>0))},directives:[k.a,u.t,w.a,f.a,u.u],pipes:[y.d,u.f],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),M),R=function(){return{height:"24px","margin-bottom":"3px",width:"50%","background-color":"#ECEEF1"}},D=function(){return{height:"32px","background-color":"#ECEEF1"}},I=((A=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(t){return"CONTRACTS.DETAILS.".concat(t)}}]),t}()).\u0275fac=function(t){return new(t||A)},A.\u0275cmp=l.Kb({type:A,selectors:[["j-contracts-info-loading"]],decls:25,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[3,"theme"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["count","7",3,"theme"],[1,"contracts-info__attachments"],["count","3",3,"theme"]],template:function(t,e){1&t&&(l.Wb(0,"section",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"article",3),l.Rb(4,"ngx-skeleton-loader",4),l.Wb(5,"p",5),l.Sc(6),l.nc(7,"translate"),l.Vb(),l.Vb(),l.Wb(8,"article",3),l.Rb(9,"ngx-skeleton-loader",4),l.Wb(10,"p",5),l.Sc(11),l.nc(12,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Wb(13,"div",3),l.Wb(14,"h6",6),l.Sc(15),l.nc(16,"translate"),l.Vb(),l.Wb(17,"ul",7),l.Rb(18,"ngx-skeleton-loader",8),l.Vb(),l.Vb(),l.Vb(),l.Wb(19,"div",3),l.Wb(20,"h6",6),l.Sc(21),l.nc(22,"translate"),l.Vb(),l.Wb(23,"ul",9),l.Rb(24,"ngx-skeleton-loader",10),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(4),l.tc("theme",l.xc(16,R)),l.Ab(2),l.Tc(l.oc(7,8,e.mapTranslate("AMOUNT"))),l.Ab(3),l.tc("theme",l.xc(17,R)),l.Ab(2),l.Tc(l.oc(12,10,e.mapTranslate("REMAINDER"))),l.Ab(4),l.Uc(" ",l.oc(16,12,e.mapTranslate("TITLE"))," "),l.Ab(3),l.tc("theme",l.xc(18,D)),l.Ab(3),l.Uc(" ",l.oc(22,14,e.mapTranslate("FILES"))," "),l.Ab(3),l.tc("theme",l.xc(19,D)))},directives:[h.a],pipes:[y.d],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),A);function V(t,e){if(1&t&&(l.Wb(0,"div",4),l.Wb(1,"div",5),l.Rb(2,"span",6),l.Wb(3,"span",7),l.Sc(4),l.Vb(),l.Vb(),l.Wb(5,"h1",8),l.Sc(6),l.Vb(),l.Vb()),2&t){var n=l.mc();l.Ab(2),l.Db(n.iconClassName),l.Ab(2),l.Uc(" ",n.companyName," "),l.Ab(2),l.Uc("\u2116 ",n.contract.contractNumber,"")}}var F=function(){return{height:"24px",width:"70%","background-color":"#ECEEF1"}},j=function(){return{height:"56px",width:"40%","margin-bottom":"8px","background-color":"#ECEEF1"}};function N(t,e){1&t&&(l.Ub(0),l.Rb(1,"ngx-skeleton-loader",9),l.Rb(2,"ngx-skeleton-loader",9),l.Tb()),2&t&&(l.Ab(1),l.tc("theme",l.xc(2,F)),l.Ab(1),l.tc("theme",l.xc(3,j)))}function L(t,e){if(1&t&&l.Rb(0,"j-contracts-info",10),2&t){var n=l.mc();l.tc("contract",n.contract)}}function W(t,e){1&t&&l.Rb(0,"j-contracts-info-loading")}var Q,G,U=((Q=function(){function t(e,n,i,a){var c=this;_classCallCheck(this,t),this.companyService=e,this.contractsService=n,this.location=i,this.route=a,this.isLoading=!1,this.subscription=new s.a;var o=this.route.params.subscribe((function(t){c.contractId=t.id})),r=this.companyService.refresh$.subscribe((function(){c.companyName=c.companyService.currentCompany.name,c.loadContract()}));this.subscription.add(r),this.subscription.add(o)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClose",value:function(){this.location.back()}},{key:"loadContract",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.getContractById(this.contractId);case 4:this.contract=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.onClose();case 10:return t.prev=10,this.isLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}},{key:"iconClassName",get:function(){switch(this.contract.status){case r.c.REGISTERED:case r.c.PROCESSING:return"text-warning";case r.c.REGED:return"text-success";case r.c.REJECTED:case r.c.CLOSED:return"text-danger"}}}]),t}()).\u0275fac=function(t){return new(t||Q)(l.Qb(b.a),l.Qb(d.b),l.Qb(u.o),l.Qb(c.a))},Q.\u0275cmp=l.Kb({type:Q,selectors:[["j-contracts-details"]],decls:7,vars:4,consts:[["closePosition","outside","colsClassList","offset-xl-1 col-xl-10","headerClassList","bg-white",3,"closed"],["class","contract-details__header",4,"ngIf"],[4,"ngIf"],[3,"contract",4,"ngIf"],[1,"contract-details__header"],[1,"contracts__top"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"contracts__icon"],[1,"text-muted"],[1,"mb-3"],[3,"theme"],[3,"contract"]],template:function(t,e){1&t&&(l.Wb(0,"f-page",0),l.ic("closed",(function(t){return e.onClose()})),l.Wb(1,"f-page-header"),l.Qc(2,V,7,4,"div",1),l.Qc(3,N,3,4,"ng-container",2),l.Vb(),l.Wb(4,"f-page-body"),l.Qc(5,L,1,1,"j-contracts-info",3),l.Qc(6,W,1,0,"j-contracts-info-loading",2),l.Vb(),l.Vb()),2&t&&(l.Ab(2),l.tc("ngIf",e.contract&&!e.isLoading),l.Ab(1),l.tc("ngIf",e.isLoading),l.Ab(2),l.tc("ngIf",e.contract&&!e.isLoading),l.Ab(1),l.tc("ngIf",e.isLoading))},directives:[p.a,m.a,u.u,g.a,f.a,h.a,E,I],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),Q),H=n("8xPB"),z=((G=function(){function t(){_classCallCheck(this,t),this.label="CONTRACTS.ERRORED",this.retried=new l.n}return _createClass(t,[{key:"onRetry",value:function(t){t.preventDefault(),this.retried.emit()}}]),t}()).\u0275fac=function(t){return new(t||G)},G.\u0275cmp=l.Kb({type:G,selectors:[["j-contracts-error"]],inputs:{label:"label"},outputs:{retried:"retried"},decls:8,vars:7,consts:[[1,"empty"],["src","./assets/img/contracts/empty.svg",1,"empty-img",3,"alt"],["translate","",1,"text-muted","empty-text","my-3"],["href","#",1,"link",3,"click"]],template:function(t,e){1&t&&(l.Wb(0,"section",0),l.Rb(1,"img",1),l.nc(2,"translate"),l.Wb(3,"div",2),l.Sc(4),l.Vb(),l.Wb(5,"a",3),l.ic("click",(function(t){return e.onRetry(t)})),l.Sc(6),l.nc(7,"translate"),l.Vb(),l.Vb()),2&t&&(l.Ab(1),l.tc("alt",l.oc(2,3,e.label)),l.Ab(3),l.Uc(" ",e.label," "),l.Ab(2),l.Uc(" ",l.oc(7,5,"CONTRACTS.RETRY")," "))},directives:[y.a],pipes:[y.d],styles:["[_nghost-%COMP%]{min-height:478px}.empty[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]{padding:1.5rem 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.empty-text[_ngcontent-%COMP%]{line-height:24px}.empty-img[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 14px 16px rgba(0,0,0,.05);margin:1rem 0}"]}),G),B=n("4cI0"),K=function(){return{width:"25%",height:"33px","background-color":"#ECEEF1"}};function $(t,e){1&t&&l.Rb(0,"ngx-skeleton-loader",2),2&t&&l.tc("theme",l.xc(1,K))}var X,Z=function(){return{height:"52px","background-color":"#ECEEF1"}},Y=((X=function(){function t(){_classCallCheck(this,t),this.hasTitle=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||X)},X.\u0275cmp=l.Kb({type:X,selectors:[["j-contracts-loading"]],inputs:{hasTitle:"hasTitle"},decls:2,vars:3,consts:[[3,"theme",4,"ngIf"],["count","6",3,"theme"],[3,"theme"]],template:function(t,e){1&t&&(l.Qc(0,$,1,2,"ngx-skeleton-loader",0),l.Rb(1,"ngx-skeleton-loader",1)),2&t&&(l.tc("ngIf",e.hasTitle),l.Ab(1),l.tc("theme",l.xc(2,Z)))},directives:[u.u,h.a],styles:[""]}),X),J=["itemTemplate"],q=["headerTemplate"],tt=function(t){return{$implicit:t}};function et(t,e){if(1&t&&l.Sb(0,8),2&t){var n=e.$implicit,i=l.mc(3);l.tc("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",l.yc(2,tt,n))}}function nt(t,e){if(1&t&&(l.Ub(0),l.Sb(1,6),l.Qc(2,et,1,4,"ng-container",7),l.Tb()),2&t){var n=l.mc(2);l.Ab(1),l.tc("ngTemplateOutlet",n.headerTemplate),l.Ab(1),l.tc("ngForOf",n.contractsList)}}function it(t,e){if(1&t){var n=l.Xb();l.Wb(0,"j-contracts-error",9),l.ic("retried",(function(t){return l.Hc(n),l.mc(2).loadContracts()})),l.Vb()}}function at(t,e){1&t&&l.Rb(0,"j-empty-placeholder",10),2&t&&l.tc("minHeight",478)("label","CONTRACTS.LIST.EMPTY.APPROVED")}function ct(t,e){if(1&t&&(l.Wb(0,"div",2),l.Qc(1,nt,3,2,"ng-container",3),l.Qc(2,it,1,0,"j-contracts-error",4),l.Qc(3,at,1,2,"j-empty-placeholder",5),l.Vb()),2&t){var n=l.mc();l.Ab(1),l.tc("ngIf",(null==n.contractsList?null:n.contractsList.length)>0),l.Ab(1),l.tc("ngIf",n.errorText),l.Ab(1),l.tc("ngIf",0==(null==n.contractsList?null:n.contractsList.length))}}function ot(t,e){1&t&&(l.Wb(0,"div",11),l.Rb(1,"j-contracts-loading"),l.Vb())}var rt,st=((rt=function(){function t(e,n){_classCallCheck(this,t),this.contractsService=e,this.companyService=n,this.isLoading=!1,this.subscription=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=this.companyService.refresh$.subscribe((function(){t.loadContracts()}));this.subscription.add(e)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"loadContracts",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,this.isLoading=!0,t.prev=1,e=null,this.onSignForMe&&(e={onSignForMe:!0}),this.onSignForOthers&&(e={onSignForOthers:!0}),t.next=7,this.contractsService.getContracts(this.contractType,e);case 7:this.contractsList=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0.code||t.t0||!0;case 13:return t.prev=13,this.isLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[1,10,13,16]])})))}}]),t}()).\u0275fac=function(t){return new(t||rt)(l.Qb(d.b),l.Qb(b.a))},rt.\u0275cmp=l.Kb({type:rt,selectors:[["j-contracts-list"]],contentQueries:function(t,e,n){var i;1&t&&(l.Ib(n,J,!0),l.Ib(n,q,!0)),2&t&&(l.Dc(i=l.jc())&&(e.itemTemplate=i.first),l.Dc(i=l.jc())&&(e.headerTemplate=i.first))},inputs:{translatePrefix:"translatePrefix",contractType:"contractType",onSignForMe:"onSignForMe",onSignForOthers:"onSignForOthers"},decls:2,vars:2,consts:[["class","contracts__table contracts-list",4,"ngIf"],["class","contracts__table j-list__loading",4,"ngIf"],[1,"contracts__table","contracts-list"],[4,"ngIf"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"retried"],[3,"minHeight","label"],[1,"contracts__table","j-list__loading"]],template:function(t,e){1&t&&(l.Qc(0,ct,4,3,"div",0),l.Qc(1,ot,2,0,"div",1)),2&t&&(l.tc("ngIf",!e.isLoading),l.Ab(1),l.tc("ngIf",e.isLoading))},directives:[u.u,u.B,u.t,z,B.a,Y],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),rt),lt=n("1kSV"),bt=n("wV3k");function dt(t,e){if(1&t&&(l.Wb(0,"div",5),l.Sc(1),l.nc(2,"translate"),l.Vb()),2&t){var n=e.$implicit,i=l.mc(2);l.Ab(1),l.Tc(l.oc(2,1,i.mapTranslate(n)))}}function ut(t,e){if(1&t&&(l.Wb(0,"div",3),l.Qc(1,dt,3,3,"div",4),l.Vb()),2&t){var n=l.mc();l.Ab(1),l.tc("ngForOf",n.headings)}}function pt(t,e){if(1&t&&(l.Wb(0,"div",19),l.Wb(1,"span",20),l.Sc(2," \u2116 "),l.Vb(),l.Wb(3,"div",21),l.Sc(4),l.Vb(),l.Vb()),2&t){var n=l.mc().$implicit;l.tc("ngbTooltip","\u2116 "+n.contractNumber),l.Ab(4),l.Uc(" ",n.contractNumber," ")}}function mt(t,e){1&t&&(l.Wb(0,"div"),l.Sc(1," - "),l.Vb())}function gt(t,e){if(1&t&&(l.Wb(0,"div",22),l.Sc(1),l.nc(2,"translate"),l.Vb()),2&t){var n=l.mc(2);l.Ab(1),l.Uc(" ",l.oc(2,1,n.mapTranslate("HAS_UNK"))," ")}}function ft(t,e){if(1&t&&(l.Ub(0),l.Wb(1,"div",14),l.nc(2,"moneyPipe"),l.Rb(3,"j-money",15),l.Vb(),l.Tb()),2&t){var n=l.mc().$implicit;l.Ab(1),l.tc("ngbTooltip",l.oc(2,2,n.amount)),l.Ab(2),l.tc("money",n.amount)}}function ht(t,e){if(1&t&&(l.Wb(0,"div",23),l.Sc(1),l.nc(2,"translate"),l.Vb()),2&t){var n=l.mc().$implicit,i=l.mc();l.Ab(1),l.Uc(" ",l.oc(2,1,i.mapRemainderMessage(n))," ")}}function _t(t,e){if(1&t){var n=l.Xb();l.Wb(0,"div",6),l.ic("click",(function(t){l.Hc(n);var i=e.$implicit;return l.mc().onContractClick(i)})),l.Wb(1,"div",7),l.Wb(2,"div",8),l.Sc(3),l.nc(4,"translate"),l.Vb(),l.Wb(5,"div",9),l.Rb(6,"span",10),l.Qc(7,pt,5,2,"div",11),l.Qc(8,mt,2,0,"div",12),l.Vb(),l.Qc(9,gt,3,3,"div",13),l.Vb(),l.Wb(10,"div",7),l.Wb(11,"div",8),l.Sc(12),l.nc(13,"translate"),l.Vb(),l.Wb(14,"div",14),l.Sc(15),l.Vb(),l.Vb(),l.Wb(16,"div",7),l.Wb(17,"div",8),l.Sc(18),l.nc(19,"translate"),l.Vb(),l.Qc(20,ft,4,4,"ng-container",12),l.Vb(),l.Wb(21,"div",7),l.Wb(22,"div",8),l.Sc(23),l.nc(24,"translate"),l.Vb(),l.Wb(25,"div",14),l.nc(26,"moneyPipe"),l.Rb(27,"j-money",15),l.Vb(),l.Qc(28,ht,3,3,"div",16),l.Vb(),l.Wb(29,"div",7),l.Wb(30,"div",17),l.Wb(31,"button",18),l.ic("click",(function(t){l.Hc(n);var i=e.$implicit;return l.mc().onDownload(t,i)})),l.nc(32,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&t){var i=e.$implicit,a=l.mc();l.Ab(3),l.Uc(" ",l.oc(4,17,a.mapTranslate(a.headings[0]))," "),l.Ab(4),l.tc("ngIf",i.contractNumber),l.Ab(1),l.tc("ngIf",!i.contractNumber),l.Ab(1),l.tc("ngIf",a.hasUnk(i)),l.Ab(3),l.Uc(" ",l.oc(13,19,a.mapTranslate(a.headings[1]))," "),l.Ab(2),l.tc("ngbTooltip",null==i.contractor?null:i.contractor.name),l.Ab(1),l.Uc(" ",(null==i.contractor?null:i.contractor.name)||"-"," "),l.Ab(3),l.Uc(" ",l.oc(19,21,a.mapTranslate(a.headings[2]))," "),l.Ab(2),l.tc("ngIf",i.amount),l.Ab(3),l.Uc(" ",l.oc(24,23,a.mapTranslate(a.headings[3]))," "),l.Ab(2),l.tc("ngbTooltip",l.oc(26,25,i.remainder)),l.Ab(2),l.tc("money",i.remainder),l.Ab(1),l.tc("ngIf",a.mapRemainderMessage(i)),l.Ab(3),l.Hb("j-list__action--disabled",a.loadingIds.includes(i.id)),l.tc("ngbTooltip",l.oc(32,27,a.mapTranslate(a.loadingIds.includes(i.id)?"DOWNLOADING":"DOWNLOAD")))("inlineSVG","./assets/icons/transaction/pdf.svg")}}var vt,xt=["01","02"],yt=((vt=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.contractsService=e,this.route=n,this.router=i,this.notifierService=a,this.translateService=c,this.headings=["CONTRACT_NUMBER","CONTRACT_NAME","CONTRACT_AMOUNT","CONTRACT_REMAINDER"],this.translatePrefix="CONTRACTS.APPROVED",this.contractType=H.a.APPROVED,this.loadingIds=[]}return _createClass(t,[{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"hasUnk",value:function(t){return t.status==r.c.REGED&&xt.includes(t.type.colvirCode)}},{key:"mapRemainderMessage",value:function(t){var e=this.contractsService.mapRemainderMessage(t);return e?this.mapTranslate(e):null}},{key:"onContractClick",value:function(t){this.router.navigate([t.id],{relativeTo:this.route.parent.parent})}},{key:"onDownload",value:function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.stopPropagation(),this.loadingIds.includes(e.id)){n.next=14;break}return this.loadingIds.push(e.id),n.prev=2,n.next=5,this.contractsService.downloadContractCertificate(e);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"));case 10:return n.prev=10,i=this.loadingIds.indexOf(e.id),this.loadingIds.splice(i,1),n.finish(10);case 14:case"end":return n.stop()}}),n,this,[[2,7,10,14]])})))}}]),t}()).\u0275fac=function(t){return new(t||vt)(l.Qb(d.b),l.Qb(c.a),l.Qb(c.c),l.Qb(x.c),l.Qb(y.e))},vt.\u0275cmp=l.Kb({type:vt,selectors:[["j-contracts-approved"]],decls:5,vars:2,consts:[[3,"translatePrefix","contractType"],["headerTemplate",""],["itemTemplate",""],[1,"contracts__row","contracts__row--approved","contracts__header"],["class","text-muted p4",4,"ngFor","ngForOf"],[1,"text-muted","p4"],[1,"contracts__row","contracts__row--approved","contracts__item","contracts__item--hoverable","p3",3,"click"],[1,"contracts__cell"],[1,"text-muted","p4","contracts__label"],[1,"contracts__top"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"text-success","contracts__icon"],["tooltipClass","tooltip-light","placement","top","class","contracts__number text-truncate",3,"ngbTooltip",4,"ngIf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["tooltipClass","tooltip-light","placement","top",1,"text-truncate",3,"ngbTooltip"],[3,"money"],["class","text-danger",4,"ngIf"],[1,"j-list__actions"],["tooltipClass","tooltip-light",1,"j-list__action",3,"ngbTooltip","inlineSVG","click"],["tooltipClass","tooltip-light","placement","top",1,"contracts__number","text-truncate",3,"ngbTooltip"],[1,"text-muted","mr-1"],[1,"text-truncate"],[1,"text-muted"],[1,"text-danger"]],template:function(t,e){1&t&&(l.Wb(0,"j-contracts-list",0),l.Qc(1,ut,2,1,"ng-template",null,1,l.Rc),l.Qc(3,_t,33,29,"ng-template",null,2,l.Rc),l.Vb()),2&t&&l.tc("translatePrefix",e.translatePrefix)("contractType",e.contractType)},directives:[st,u.t,f.a,u.u,lt.E,k.a],pipes:[y.d,bt.a],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}.contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}.contracts__row--approved[_ngcontent-%COMP%]{grid-template-columns:minmax(90px,140px) minmax(170px,2fr) minmax(160px,1fr) minmax(160px,1fr) 56px}"]}),vt),Ct=n("bsP8"),kt=n("paXB"),wt=n("7/bn"),Ot=n("oMXN"),St=n("EiG8");function Tt(t,e){if(1&t&&(l.Wb(0,"span",8),l.Wb(1,"span",9),l.Sc(2),l.nc(3,"translate"),l.Vb(),l.Wb(4,"span",10),l.Sc(5),l.nc(6,"translate"),l.Vb(),l.Vb()),2&t){var n=l.mc().$implicit;l.Ab(2),l.Uc(" ",l.oc(3,2,n.label)," "),l.Ab(3),l.Uc(" ",l.oc(6,4,"SHARED.SOON")," ")}}function Pt(t,e){if(1&t&&(l.Wb(0,"a",11),l.Sc(1),l.nc(2,"translate"),l.Vb()),2&t){var n=l.mc().$implicit;l.tc("routerLink",n.url),l.Ab(1),l.Tc(l.oc(2,2,n.label))}}function Mt(t,e){if(1&t&&(l.Ub(0),l.Qc(1,Tt,7,6,"span",6),l.Qc(2,Pt,3,4,"a",7),l.Tb()),2&t){var n=e.$implicit;l.Ab(1),l.tc("ngIf",n.soon),l.Ab(1),l.tc("ngIf",!n.soon)}}var At,Et,Rt,Dt=((At=function(){function t(e,n){_classCallCheck(this,t),this.contractsModalsService=e,this.featureFlagsService=n,this.isAddingDisabled=!1,this.contractTabs=[{label:"CONTRACTS.TABS.OUTCOMING",url:"/contracts/outcoming"},{label:"CONTRACTS.TABS.INCOMING",url:"/contracts/incoming",soon:!0}],this.subscription=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.checkFeatureFlag(),this.subscription.add(this.featureFlagsService.featureFlags$.subscribe((function(e){t.checkFeatureFlag()})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"showAddContractModal",value:function(){this.contractsModalsService.showAddContractModal(!0)}},{key:"checkFeatureFlag",value:function(){this.isAddingDisabled=this.featureFlagsService.isDisabled(_.a.FX_CONTRACTS)}}]),t}()).\u0275fac=function(t){return new(t||At)(l.Qb(d.a),l.Qb(_.b))},At.\u0275cmp=l.Kb({type:At,selectors:[["j-contracts-nav"]],decls:8,vars:4,consts:[[1,"j-tabs"],[1,"j-tabs__list"],[4,"ngFor","ngForOf"],[1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","./assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],["class","j-tabs__item j-tabs__item--soon",4,"ngIf"],["routerLinkActive","active","class","j-tabs__item",3,"routerLink",4,"ngIf"],[1,"j-tabs__item","j-tabs__item--soon"],[1,"j-tabs__label"],[1,"j-tabs__badge","badge","badge-warning"],["routerLinkActive","active",1,"j-tabs__item",3,"routerLink"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.Wb(1,"nav",1),l.Qc(2,Mt,3,2,"ng-container",2),l.Wb(3,"button",3),l.ic("click",(function(t){return e.showAddContractModal()})),l.Rb(4,"span",4),l.Wb(5,"span",5),l.Sc(6),l.nc(7,"translate"),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(2),l.tc("ngForOf",e.contractTabs),l.Ab(4),l.Tc(l.oc(7,2,"CONTRACTS.ADD_NEW")))},directives:[u.t,f.a,u.u,c.f,c.e],pipes:[y.d],styles:[""]}),At),It=n("I+WJ"),Vt=n("zdqJ"),Ft=((Et=function(){function t(e,n){var i=this;_classCallCheck(this,t),this.router=e,this.navService=n,this.statuses=[{count:0,isSelected:!0,label:"CONTRACTS.TYPES.ON_SIGN",value:H.a.ON_SIGN},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.APPROVED",value:H.a.APPROVED},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.PENDING",value:H.a.PENDING},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.REJECTED",value:H.a.REJECTED}],this.subscription=new s.a;var a=e.events.subscribe((function(t){t instanceof c.b&&(i.statuses=i.statuses.map((function(e){return e.isSelected=t.urlAfterRedirects==="/contracts/outcoming/".concat(e.value),e})))})),o=this.navService.getContractBadges().subscribe((function(t){var e=t.onSignForMe,n=t.onSignForOthers,a=e>0;Object.assign(i.statuses[0],{count:a?e:n,classList:a?"badge-primary":"badge-light"})}));this.subscription.add(a),this.subscription.add(o)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onStatusSelect",value:function(t){this.router.navigate(["/contracts/outcoming",t])}}]),t}()).\u0275fac=function(t){return new(t||Et)(l.Qb(c.c),l.Qb(Ct.a))},Et.\u0275cmp=l.Kb({type:Et,selectors:[["j-contracts-outcoming"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"],[1,"j-page"],["translate","",1,"d-none","d-lg-block","j-page__title"],[1,"j-page__body"],[1,"j-list"],[1,"j-list__nav"],[1,"j-list__filter"],["jTour","CONTRACTS.STATUSES","jTourPosition","bottom",3,"statuses","selected"]],template:function(t,e){1&t&&(l.Wb(0,"j-layout-home"),l.Wb(1,"j-aside"),l.Rb(2,"j-nav-main"),l.Vb(),l.Wb(3,"j-main"),l.Wb(4,"section",0),l.Wb(5,"section",1),l.Wb(6,"section",2),l.Wb(7,"h2",3),l.Sc(8,"CONTRACTS.TITLE"),l.Vb(),l.Wb(9,"section",4),l.Wb(10,"section",5),l.Wb(11,"div",6),l.Rb(12,"j-contracts-nav"),l.Vb(),l.Wb(13,"div",7),l.Wb(14,"j-statuses",8),l.ic("selected",(function(t){return e.onStatusSelect(t)})),l.Vb(),l.Vb(),l.Rb(15,"router-outlet"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t&&(l.Ab(14),l.tc("statuses",e.statuses))},directives:[kt.a,wt.a,Ot.a,St.a,y.a,Dt,It.a,Vt.a,c.h],styles:[""]}),Et),jt=n("hJI6"),Nt=((Rt=function(){function t(){_classCallCheck(this,t),this.translatePrefix="CONTRACTS.DATE"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"tooltip",get:function(){if(this.contract)switch(this.contract.status){case r.c.ON_SIGN:case r.c.REGED:case r.c.REGISTERED:case r.c.PROCESSING:return this.mapTranslate("SENT");case r.c.REJECTED:return this.mapTranslate("REJECTED")}}}]),t}()).\u0275fac=function(t){return new(t||Rt)},Rt.\u0275cmp=l.Kb({type:Rt,selectors:[["j-contracts-date"]],inputs:{contract:"contract"},decls:8,vars:11,consts:[["tooltipClass","tooltip-light",1,"contract__date",3,"ngbTooltip"],[1,"text-dark"],[1,"ml-1","text-muted"]],template:function(t,e){1&t&&(l.Wb(0,"div",0),l.nc(1,"translate"),l.Wb(2,"span",1),l.Sc(3),l.nc(4,"date"),l.Vb(),l.Wb(5,"span",2),l.Sc(6),l.nc(7,"date"),l.Vb(),l.Vb()),2&t&&(l.tc("ngbTooltip",l.oc(1,3,e.tooltip)),l.Ab(3),l.Tc(l.pc(4,5,e.contract.created,"d MMMM yyyy,")),l.Ab(3),l.Tc(l.pc(7,8,e.contract.created,"HH:mm")))},directives:[lt.E],pipes:[y.d,u.f],styles:[""]}),Rt);function Lt(t,e){if(1&t&&l.Rb(0,"span",1),2&t){var n=l.mc();l.Db(n.statusClassname)}}var Wt,Qt=((Wt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapContractType()}},{key:"mapContractType",value:function(){switch(this.contract.status){case r.c.REGED:this.statusClassname="text-success";break;case r.c.PROCESSING:case r.c.REGISTERED:this.statusClassname="text-warning";break;case r.c.REJECTED:this.statusClassname="text-danger"}}}]),t}()).\u0275fac=function(t){return new(t||Wt)},Wt.\u0275cmp=l.Kb({type:Wt,selectors:[["j-contracts-status"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","contracts__icon mr-2","inlineSVG","./assets/icons/contracts/icon.svg",3,"class",4,"ngIf"],["inlineSVG","./assets/icons/contracts/icon.svg",1,"contracts__icon","mr-2"]],template:function(t,e){1&t&&l.Qc(0,Lt,1,2,"span",0),2&t&&l.tc("ngIf",e.statusClassname)},directives:[u.u,f.a],styles:[""]}),Wt);function Gt(t,e){if(1&t&&(l.Wb(0,"button",15),l.Sc(1),l.nc(2,"async"),l.Vb()),2&t){var n=l.mc().$implicit,i=l.mc();l.Ab(1),l.Uc(" ",l.oc(2,1,i.mapAttachmentsTitle(n))," ")}}function Ut(t,e){if(1&t&&(l.Wb(0,"button",16),l.Sc(1),l.nc(2,"async"),l.Vb()),2&t){var n=l.mc().$implicit,i=l.mc();l.Ab(1),l.Uc(" ",l.oc(2,1,i.mapAttachmentsTitle(n))," ")}}function Ht(t,e){if(1&t&&(l.Wb(0,"div",17),l.Sc(1),l.Vb()),2&t){var n=l.mc().$implicit;l.Ab(1),l.Uc(" ",n.statusMessage," ")}}function zt(t,e){if(1&t&&(l.Wb(0,"div",8),l.Rb(1,"j-contracts-status",4),l.Wb(2,"article",9),l.Wb(3,"div",10),l.Wb(4,"span",11),l.Sc(5),l.nc(6,"translate"),l.Vb(),l.Qc(7,Gt,3,3,"button",12),l.Qc(8,Ut,3,3,"button",13),l.Vb(),l.Qc(9,Ht,2,1,"div",14),l.Vb(),l.Vb()),2&t){var n=e.$implicit,i=l.mc();l.Ab(1),l.tc("contract",n),l.Ab(4),l.Uc(" ",l.oc(6,5,i.mapTranslate("TITLE"))," "),l.Ab(2),l.tc("ngIf",n.hasTour),l.Ab(1),l.tc("ngIf",!n.hasTour),l.Ab(1),l.tc("ngIf",n.statusMessage)}}var Bt=function(t){return{$implicit:t}};function Kt(t,e){if(1&t){var n=l.Xb();l.Wb(0,"ul",18),l.ic("click",(function(t){return l.Hc(n),t.stopPropagation()})),l.Sb(1,3),l.Vb()}if(2&t){var i=e.$implicit,a=l.mc(),c=l.Ec(12);l.Pc("margin-top",i.isCollapsed?"1rem":0)("margin-bottom",i.isCollapsed&&a.hasMoreAttachments?"-1rem":0)("opacity",i.isCollapsed?1:0)("max-height",a.attachmentsMaxHeight),l.Hb("contract-attachments--one-action",!a.isSignable&&a.isDeletable||a.isSignable&&!a.isDeletable)("contract-attachments--two-actions",a.isSignable&&a.isDeletable)("contract-attachments--selectable",a.isSelectable),l.Ab(1),l.tc("ngTemplateOutlet",c)("ngTemplateOutletContext",l.yc(16,Bt,i))}}function $t(t,e){if(1&t){var n=l.Xb();l.Wb(0,"li",21),l.Wb(1,"div",22),l.Rb(2,"span",23),l.Wb(3,"div",24),l.Sc(4),l.Vb(),l.Wb(5,"button",25),l.ic("click",(function(t){l.Hc(n);var i=e.$implicit;return l.mc(2).onAttachmentDownload(t,i)})),l.Vb(),l.Vb(),l.Vb()}if(2&t){var i=e.$implicit;l.tc("jLoading",i.isLoading),l.Ab(4),l.Tc((null==i.file?null:i.file.name)||"-")}}function Xt(t,e){if(1&t){var n=l.Xb();l.Wb(0,"li",26),l.ic("click",(function(t){return l.Hc(n),l.mc(2).showMoreAttachments()})),l.Sc(1),l.nc(2,"async"),l.Vb()}if(2&t){var i=l.mc(2);l.Ab(1),l.Uc(" ",l.oc(2,1,i.mapMoreTitle())," ")}}function Zt(t,e){if(1&t&&(l.Qc(0,$t,6,2,"li",19),l.Qc(1,Xt,3,3,"li",20)),2&t){var n=l.mc();l.tc("ngForOf",n.attachments),l.Ab(1),l.tc("ngIf",n.hasMoreAttachments)}}var Yt,Jt=((Yt=function(){function t(e,n){_classCallCheck(this,t),this.translateService=e,this.filesService=n,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.ITEM",this.maxAllowedAttachments=10}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onAttachmentDownload",value:function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.stopPropagation(),e.isLoading){n.next=12;break}return e.isLoading=!0,n.prev=2,n.next=5,this.filesService.downloadFileById(e.file.id,e.file.name);case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(2);case 9:return n.prev=9,e.isLoading=!1,n.finish(9);case 12:case"end":return n.stop()}}),n,this,[[2,7,9,12]])})))}},{key:"showMoreAttachments",value:function(){this.maxAllowedAttachments+=10}},{key:"mapAttachmentsTitle",value:function(t){var e;return this.mapAttachmentsKey("ATTACHMENTS_TITLE",null===(e=t.attachments)||void 0===e?void 0:e.length)}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"mapMoreTitle",value:function(){return this.mapAttachmentsKey("MORE",Math.min(this.contract.attachments.length-this.maxAllowedAttachments,10))}},{key:"mapAttachmentsKey",value:function(t,e){var n={count:e},i="".concat(t,".").concat(this.mapPluralKey(e));return this.translateService.stream(this.mapTranslate(i),n)}},{key:"mapPluralKey",value:function(t){switch(t%20){case 1:return"ONE";case 2:case 3:case 4:return"FEW";default:return"OTHER"}}},{key:"attachments",get:function(){return this.contract.attachments.slice(0,this.maxAllowedAttachments)}},{key:"hasMoreAttachments",get:function(){return this.maxAllowedAttachments<this.contract.attachments.length}},{key:"attachmentsMaxHeight",get:function(){if(!this.contract.isCollapsed)return 0;var t=56*this.attachments.length;return this.hasMoreAttachments&&(t+=42),"".concat(t,"px")}}]),t}()).\u0275fac=function(t){return new(t||Yt)(l.Qb(y.e),l.Qb(C.b))},Yt.\u0275cmp=l.Kb({type:Yt,selectors:[["j-contracts-item"]],inputs:{contract:"contract",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},decls:13,vars:9,consts:[[1,"contracts-item-wrap"],[1,"p3","contracts-item"],[1,"contracts__cell"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"contract"],["mainTemplate",""],["attachmentsTemplate",""],["attachmentsCollapsedTemplate",""],[1,"contracts-item__main"],[1,"contracts-item__content"],[1,"contracts-item__title"],[1,"text-dark"],["jTour","CONTRACTS.FILES","jTourPosition","bottom","class","contracts-item__attachments-title",4,"ngIf"],["class","contracts-item__attachments-title",4,"ngIf"],["class","text-muted contracts-item__message",4,"ngIf"],["jTour","CONTRACTS.FILES","jTourPosition","bottom",1,"contracts-item__attachments-title"],[1,"contracts-item__attachments-title"],[1,"text-muted","contracts-item__message"],[1,"contract-attachments",3,"click"],["class","contract-attachment",3,"jLoading",4,"ngFor","ngForOf"],["class","contract-attachment contract-attachment--more p3",3,"click",4,"ngIf"],[1,"contract-attachment",3,"jLoading"],[1,"contract-attachment__content"],["inlineSVG","./assets/icons/contracts/attachment-prefix.svg"],[1,"p3","text-muted","text-truncate"],["inlineSVG","./assets/icons/contracts/attachment-download.svg",1,"contract-attachment__download",3,"click"],[1,"contract-attachment","contract-attachment--more","p3",3,"click"]],template:function(t,e){if(1&t&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Sb(3,3),l.Vb(),l.Wb(4,"div",2),l.Rb(5,"j-contracts-date",4),l.Vb(),l.Vb(),l.Sb(6,3),l.Vb(),l.Qc(7,zt,10,7,"ng-template",null,5,l.Rc),l.Qc(9,Kt,2,18,"ng-template",null,6,l.Rc),l.Qc(11,Zt,2,2,"ng-template",null,7,l.Rc)),2&t){var n=l.Ec(8),i=l.Ec(10);l.Ab(3),l.tc("ngTemplateOutlet",n)("ngTemplateOutletContext",l.yc(5,Bt,e.contract)),l.Ab(2),l.tc("contract",e.contract),l.Ab(1),l.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",l.yc(7,Bt,e.contract))}},directives:[u.B,Nt,Qt,u.u,Vt.a,u.t,w.a,f.a],pipes:[y.d,u.b],styles:['.contract[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract[_ngcontent-%COMP%], .contracts-item[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contracts-item[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:minmax(0,1fr) 150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.contracts-item-wrap[_ngcontent-%COMP%]{position:relative}.contracts-item__attachments-title[_ngcontent-%COMP%]{font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;position:relative;margin-left:4px;padding:0}.contracts-item__attachments-title[_ngcontent-%COMP%], .contracts-item__attachments-title[_ngcontent-%COMP%]:after{display:inline-block;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts-item__attachments-title[_ngcontent-%COMP%]:after{content:"";bottom:2px;left:8px;right:8px;position:absolute;border-bottom:1px dashed #666c72}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover{color:#ef5630}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover:after{border-color:#ef5630}.contract__date[_ngcontent-%COMP%], .contracts-item__main[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract__date[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contract-attachments[_ngcontent-%COMP%]{padding:0;overflow:hidden;max-height:0;margin:0 -16px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachments--selectable[_ngcontent-%COMP%]{margin-left:-56px}.contract-attachments--one-action[_ngcontent-%COMP%]{margin-right:-66px}.contract-attachments--two-actions[_ngcontent-%COMP%]{margin-right:-116px}.contract-attachment[_ngcontent-%COMP%]{position:relative;padding:0 1rem}.contract-attachment.is-loading[_ngcontent-%COMP%]{cursor:not-allowed}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__content[_ngcontent-%COMP%]{opacity:.5}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__download[_ngcontent-%COMP%]:hover{color:#b7bec5}.contract-attachment--more[_ngcontent-%COMP%]{background:#f6f7f8;height:42px;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;border-radius:0;-webkit-box-align:center;align-items:center;color:#1586bb;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment--more[_ngcontent-%COMP%]:hover{color:#ef5630}.contract-attachment__content[_ngcontent-%COMP%]{height:56px;display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;-webkit-box-align:center;align-items:center;grid-template-columns:24px 1fr 40px;position:relative;z-index:1}.contract-attachment__download[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:0;color:#b7bec5;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment__download[_ngcontent-%COMP%]:hover{color:#ef5630}']}),Yt);function qt(t,e){if(1&t&&l.Rb(0,"j-contracts-item",2),2&t){var n=e.$implicit,i=l.mc();l.tc("contract",n)("isDeletable",i.isDeletable)("isSelectable",i.isSelectable)("isSignable",i.isSignable)}}var te,ee=((te=function(){function t(e,n,i){_classCallCheck(this,t),this.navService=e,this.translateService=n,this.locale=i,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.scrolled=new l.n,this.signed=new l.n,this.translatePrefix="CONTRACTS.LIST",this.urlPath="fx-contracts",this.collapsedIds=[],this.modalPartialTitleFn=this.mapModalPartialTitle.bind(this)}return _createClass(t,[{key:"mapModalPartialTitle",value:function(t){var e=this.translateService.instant(this.mapTranslate("ITEM_TITLE"),{date:Object(u.K)(t.created,"d MMMM yyyy",this.locale)});return e?"".concat(e,":"):""}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"onClick",value:function(t){t.isCollapsed=!t.isCollapsed}},{key:"onScroll",value:function(){this.scrolled.emit()}},{key:"onClear",value:function(){this.navService.retrieveContractBadges()}},{key:"onSign",value:function(){this.signed.emit()}}]),t}()).\u0275fac=function(t){return new(t||te)(l.Qb(Ct.a),l.Qb(y.e),l.Qb(l.u))},te.\u0275cmp=l.Kb({type:te,selectors:[["j-contracts-group"]],inputs:{title:"title",list:"list",contractType:"contractType",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},outputs:{scrolled:"scrolled",signed:"signed"},decls:3,vars:9,consts:[[3,"list","title","urlPath","translatePrefix","isHoverable","isDeletable","isSelectable","isSignable","partialTitleFn","clicked","scrolled","cleared","signed"],["defaultTemplate",""],[3,"contract","isDeletable","isSelectable","isSignable"]],template:function(t,e){1&t&&(l.Wb(0,"j-list",0),l.ic("clicked",(function(t){return e.onClick(t)}))("scrolled",(function(t){return e.onScroll()}))("cleared",(function(t){return e.onClear()}))("signed",(function(t){return e.onSign()})),l.Qc(1,qt,1,4,"ng-template",null,1,l.Rc),l.Vb()),2&t&&l.tc("list",e.list)("title",e.title)("urlPath",e.urlPath)("translatePrefix",e.translatePrefix)("isHoverable",!0)("isDeletable",e.isDeletable)("isSelectable",e.isSelectable)("isSignable",e.isSignable)("partialTitleFn",e.modalPartialTitleFn)},directives:[jt.a,Jt],styles:[""]}),te);function ne(t,e){if(1&t){var n=l.Xb();l.Wb(0,"j-contracts-error",7),l.ic("retried",(function(t){return l.Hc(n),l.mc(2).onRetry()})),l.Vb()}}function ie(t,e){if(1&t&&l.Rb(0,"j-empty-placeholder",8),2&t){var n=l.mc(2);l.tc("minHeight",478)("label",n.mapTranslate("EMPTY.ON_SIGN"))}}function ae(t,e){if(1&t){var n=l.Xb();l.Ub(0),l.Wb(1,"j-contracts-group",3),l.ic("signed",(function(t){return l.Hc(n),l.mc().onSign()})),l.Vb(),l.Rb(2,"j-contracts-group",4),l.Qc(3,ne,1,0,"j-contracts-error",5),l.Qc(4,ie,1,2,"j-empty-placeholder",6),l.Tb()}if(2&t){var i=l.mc();l.Ab(1),l.tc("list",i.onSignForMeList)("isSignable",!0)("isSelectable",!0)("isDeletable",!1),l.Ab(1),l.tc("list",i.onSignForOthersList)("title",i.mapTranslate("OTHERS_FOR_SIGN")),l.Ab(1),l.tc("ngIf",i.errorText),l.Ab(1),l.tc("ngIf",0===i.onSignForMeList.length&&0===i.onSignForOthersList.length&&!i.errorText)}}function ce(t,e){1&t&&(l.Wb(0,"section",9),l.Rb(1,"j-contracts-loading"),l.Rb(2,"j-contracts-loading",10),l.Vb()),2&t&&(l.Ab(2),l.tc("hasTitle",!0))}var oe,re=((oe=function(){function t(e,n,i,a,c,o){var r=this;_classCallCheck(this,t),this.contractsService=e,this.navService=n,this.companyService=i,this.router=a,this.featureFlagsService=c,this.tourService=o,this.translatePrefix="CONTRACTS.LIST",this.contractType=H.a.ON_SIGN,this.isLoading=!0,this.onSignForMeList=[],this.onSignForOthersList=[],this.errorText=null,this.subscription=new s.a,this.subscription.add(this.companyService.refresh$.subscribe((function(t){var e=_slicedToArray(t,3);e[0],e[1],e[2]&&r.retrieveContracts()}))),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe((function(){r.retrieveContracts()})))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSign",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.retrieveContracts();case 2:0==this.onSignForMeList.length&&this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()&&this.router.navigateByUrl("contracts/outcoming/".concat(H.a.PENDING));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onRetry",value:function(){this.navService.getContractBadges(),this.retrieveContracts()}},{key:"retrieveContracts",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,t.prev=1,t.next=4,Promise.all([this.retrieveOnSignForMe(),this.retrieveOnSignForOthers()]);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0;case 9:return t.prev=9,this.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,6,9,12]])})))}},{key:"retrieveOnSignForMe",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractsService.getContracts(H.a.ON_SIGN,{onSignForMe:!0});case 2:this.onSignForMeList=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"retrieveOnSignForOthers",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractsService.getContracts(H.a.ON_SIGN,{onSignForOthers:!0});case 2:this.onSignForOthersList=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"startContractsTour",value:function(){var t=[];this.featureFlagsService.isDisabled(_.a.FX_CONTRACTS)||t.push("CONTRACTS.NEW"),t.push("CONTRACTS.STATUSES"),this.onSignForMeList.length>0?(this.onSignForMeList[0].hasTour=!0,t.push("CONTRACTS.FILES")):this.onSignForOthersList.length>0&&(this.onSignForOthersList[0].hasTour=!0,t.push("CONTRACTS.FILES"))}}]),t}()).\u0275fac=function(t){return new(t||oe)(l.Qb(d.b),l.Qb(Ct.a),l.Qb(b.a),l.Qb(c.c),l.Qb(_.b),l.Qb(C.g))},oe.\u0275cmp=l.Kb({type:oe,selectors:[["j-contracts-on-sign"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","isSignable","isSelectable","isDeletable","signed"],[1,"d-block","pt-3",3,"list","title"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"],[3,"hasTitle"]],template:function(t,e){1&t&&(l.Wb(0,"section",0),l.Qc(1,ae,5,8,"ng-container",1),l.Qc(2,ce,3,1,"section",2),l.Vb()),2&t&&(l.Ab(1),l.tc("ngIf",!e.isLoading),l.Ab(1),l.tc("ngIf",e.isLoading))},directives:[u.u,ee,z,B.a,Y],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),oe),se=n("itXk");function le(t,e){if(1&t){var n=l.Xb();l.Wb(0,"j-contracts-error",6),l.ic("retried",(function(t){return l.Hc(n),l.mc(2).retrieveContracts()})),l.Vb()}}function be(t,e){if(1&t&&l.Rb(0,"j-empty-placeholder",7),2&t){var n=l.mc(2);l.tc("minHeight",478)("label",n.emptyLabel)}}function de(t,e){if(1&t&&(l.Ub(0),l.Rb(1,"j-contracts-group",3),l.Qc(2,le,1,0,"j-contracts-error",4),l.Qc(3,be,1,2,"j-empty-placeholder",5),l.Tb()),2&t){var n=l.mc();l.Ab(1),l.tc("list",n.contractsList)("contractType",n.contractType)("isSignable",n.isSignable)("isSelectable",n.isSelectable)("isDeletable",n.isDeletable),l.Ab(1),l.tc("ngIf",n.errorText),l.Ab(1),l.tc("ngIf",0==(null==n.contractsList?null:n.contractsList.length))}}function ue(t,e){1&t&&(l.Wb(0,"section",8),l.Rb(1,"j-contracts-loading"),l.Vb())}var pe,me,ge,fe=((pe=function(){function t(e,n,i){_classCallCheck(this,t),this.contractsService=e,this.companyService=n,this.route=i,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.LIST",this.isLoading=!1,this.subscription=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subscription.add(Object(se.a)([this.route.data,this.companyService.refresh$]).subscribe((function(e){var n=_slicedToArray(e,2),i=n[0];n[1],t.contractType=i.contractType,t.mapListActions(),t.mapEmptyLabel(),t.retrieveContracts()}))),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe((function(){t.retrieveContracts()})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"retrieveContracts",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.getContracts(this.contractType);case 4:this.contractsList=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0.code||t.t0||!0;case 10:return t.prev=10,this.isLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}},{key:"mapListActions",value:function(){switch(this.contractType){case H.a.REJECTED:this.isSelectable=!0}}},{key:"mapEmptyLabel",value:function(){var t="EMPTY.";switch(this.contractType){case H.a.APPROVED:t+="APPROVED";break;case H.a.REJECTED:t+="REJECTED";break;case H.a.PENDING:t+="PENDING"}this.emptyLabel=this.mapTranslate(t)}}]),t}()).\u0275fac=function(t){return new(t||pe)(l.Qb(d.b),l.Qb(b.a),l.Qb(c.a))},pe.\u0275cmp=l.Kb({type:pe,selectors:[["j-contracts-list-base"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","contractType","isSignable","isSelectable","isDeletable"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"]],template:function(t,e){1&t&&(l.Wb(0,"section",0),l.Qc(1,de,4,7,"ng-container",1),l.Qc(2,ue,2,0,"section",2),l.Vb()),2&t&&(l.Ab(1),l.tc("ngIf",!e.isLoading),l.Ab(1),l.tc("ngIf",e.isLoading))},directives:[u.u,ee,z,B.a,Y],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),pe),he=[{path:"",component:(me=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),me.\u0275fac=function(t){return new(t||me)},me.\u0275cmp=l.Kb({type:me,selectors:[["j-contracts"]],decls:1,vars:0,template:function(t,e){1&t&&l.Rb(0,"router-outlet")},directives:[c.h],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),me),data:{title:"CONTRACTS.TITLE"},children:[{path:"outcoming",component:Ft,children:[{path:H.a.ON_SIGN,component:re,data:{contractType:H.a.ON_SIGN}},{path:H.a.APPROVED,component:yt,data:{contractType:H.a.APPROVED}},{path:H.a.PENDING,component:fe,data:{contractType:H.a.PENDING}},{path:H.a.REJECTED,component:fe,data:{contractType:H.a.REJECTED}},{path:"**",redirectTo:H.a.ON_SIGN}]},{path:":id",component:U},{path:"**",redirectTo:"outcoming"}]},{path:"**",redirectTo:""}],_e=((ge=function t(){_classCallCheck(this,t)}).\u0275mod=l.Ob({type:ge}),ge.\u0275inj=l.Nb({factory:function(t){return new(t||ge)},imports:[[c.g.forChild(he)],c.g]}),ge);n("i/as"),n("8Sq6"),n("w657"),n.d(e,"ContractsModule",(function(){return ye}));var ve,xe=[a.a,_e,i.c],ye=((ve=function t(){_classCallCheck(this,t)}).\u0275mod=l.Ob({type:ve}),ve.\u0275inj=l.Nb({factory:function(t){return new(t||ve)},imports:[[xe]]}),ve)},XMRP:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("mrSG"),a=n("tk/3"),c=n("Wgwc"),o=n.n(c),r=n("TwVa"),s=n("8xPB"),l=n("XNiG"),b=n("fXoL"),d=n("VnnJ"),u=n("yZrb"),p=n("ZF+8"),m=n("FhWM"),g=n("tyNb"),f=function(){var t=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.companyService=e,this.apiService=n,this.filesService=i,this.listService=a,this.router=c,this.contractsSubmitted$=new l.a}return _createClass(t,[{key:"getContractsSubmitted",value:function(){return this.contractsSubmitted$.asObservable()}},{key:"mapRemainderMessage",value:function(t){var e;return(null===(e=t.remainder)||void 0===e?void 0:e.amount)<=0?"AMOUNT_CLOSED":o()().isAfter(t.dateTo,"date")?"HAS_EXPIRED":null}},{key:"submitContracts",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,c,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=this.mapApiUrl(),a={attachments:t.filter((function(t){return!t.error&&t.file})).map((function(t){return{fileId:t.file.id}}))},n.next=4,this.apiService.post(i,a);case 4:return c=n.sent,n.next=7,this.checkAndSignIfNeeded(c);case 7:if(this.contractsSubmitted$.next(),!e){n.next=11;break}o="contracts/outcoming/",this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?o+=s.a.PENDING:o+=s.a.ON_SIGN,this.router.navigateByUrl(o);case 11:return n.abrupt("return",c);case 12:case"end":return n.stop()}}),n,this)})))}},{key:"getContracts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.mapApiUrl(),i=new a.h;if(i=i.set("fetchAttachments","true"),e)for(var c in e)if(Object.hasOwnProperty.call(e,c)){var o=e[c];o&&(i=i.append(c,o))}switch(t){case s.a.ON_SIGN:i=i.append("status",r.c.ON_SIGN);break;case s.a.APPROVED:i=i.append("status",r.c.REGED);break;case s.a.PENDING:i=(i=i.append("status",r.c.REGISTERED)).append("status",r.c.PROCESSING);break;case s.a.REJECTED:i=i.append("status",r.c.REJECTED)}return this.apiService.get(n,null,i)}},{key:"getContractCertificate",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mapApiUrl("".concat(t,"/certificate")),i=new a.g,e.abrupt("return",(i=(i=i.set("Accept-File","application/pdf")).set("Content-Type","application/octet-stream"),this.apiService.get(n,i,null,{responseType:"blob"})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"downloadContractCertificate",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractCertificate(t.id);case 2:return n=e.sent,e.next=5,this.filesService.downloadFile(n,"".concat(t.contractor.name,".pdf"));case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"sign",value:function(t){return this.listService.sign("fx-contracts",t.id)}},{key:"checkAndSignIfNeeded",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.companyService.isSecondaryAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme())){e.next=7;break}return e.next=3,this.sign(t);case 3:if(n=e.sent){e.next=6;break}throw!1;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getContractById",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mapApiUrl(t),e.abrupt("return",this.apiService.get(n));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mapApiUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"companies/".concat(this.companyService.currentId,"/fx-contracts").concat(t?"/".concat(t):"")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(b.ec(d.a),b.ec(u.a),b.ec(p.b),b.ec(m.a),b.ec(g.c))},t.\u0275prov=b.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},YjsB:function(t,e,n){"use strict";var i,a=n("XMRP"),c=n("mrSG"),o=n("Kd2e"),r=n("i/as"),s=n("w657"),l=n("8Sq6"),b=n("fXoL"),d=n("1kSV"),u=n("ZF+8"),p=((i=function(){function t(e,n,i){_classCallCheck(this,t),this.modalService=e,this.jModalService=n,this.featureFlagsService=i}return _createClass(t,[{key:"showAddContractModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureFlagsService.isDisabledPromise(o.a.FX_CONTRACTS);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",void this.jModalService.showMaintenanceModal());case 4:return(n=this.modalService.open(r.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0})).componentInstance.shouldNavigateToContracts=t,e.prev=6,e.next=9,n.result;case 9:this.showSuccessModal(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(6),i=e.t0.error,(a=e.t0.uploadingFiles)&&this.showErrorModal(i,a);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})))}},{key:"showSuccessModal",value:function(){this.modalService.open(l.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})}},{key:"showErrorModal",value:function(t,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=this.modalService.open(s.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})).componentInstance.uploadingFiles=e,i.componentInstance.error=t,n.prev=2,n.next=5,i.result;case 5:this.showSuccessModal(),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(2);case 10:case"end":return n.stop()}}),n,this,[[2,8]])})))}}]),t}()).\u0275fac=function(t){return new(t||i)(b.ec(d.q),b.ec(u.c),b.ec(o.b))},i.\u0275prov=b.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);n.d(e,"b",(function(){return a.a})),n.d(e,"a",(function(){return p}))},gfTr:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return g}));var i=n("fXoL"),a=n("PqYM"),c=n("ofXK"),o=["fileSelector"];function r(t,e){if(1&t&&(i.Wb(0,"div",7),i.Sc(1),i.Vb()),2&t){var n=i.mc(2);i.Ab(1),i.Tc(n.dropZoneLabel)}}function s(t,e){if(1&t){var n=i.Xb();i.Wb(0,"div"),i.Wb(1,"input",8),i.ic("click",(function(t){return i.Hc(n),i.mc(2).openFileSelector(t)})),i.Vb(),i.Vb()}if(2&t){var a=i.mc(2);i.Ab(1),i.Db(a.browseBtnClassName),i.uc("value",a.browseBtnLabel)}}function l(t,e){if(1&t&&(i.Qc(0,r,2,1,"div",5),i.Qc(1,s,2,3,"div",6)),2&t){var n=i.mc();i.tc("ngIf",n.dropZoneLabel),i.Ab(1),i.tc("ngIf",n.showBrowseBtn)}}function b(t,e){}var d=function(t){return{openFileSelector:t}},u=function t(e,n){_classCallCheck(this,t),this.relativePath=e,this.fileEntry=n},p=function(){var t=function t(e){_classCallCheck(this,t),this.template=e};return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.L))},t.\u0275dir=i.Lb({type:t,selectors:[["","ngx-file-drop-content-tmp",""]]}),t}(),m=function(){var t=function(){function t(e,n){var a=this;_classCallCheck(this,t),this.zone=e,this.renderer=n,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new i.n,this.onFileOver=new i.n,this.onFileLeave=new i.n,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=function(t){a.fileSelector&&a.fileSelector.nativeElement&&a.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",(function(t){a.globalDraggingInProgress=!0})),this.globalDragEndListener=this.renderer.listen("document","dragend",(function(t){a.globalDraggingInProgress=!1}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}},{key:"onDragOver",value:function(t){this.useDragEnter?(this.preventAndStop(t),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")):this.isDropzoneDisabled()||this.useDragEnter||!t.dataTransfer||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t),t.dataTransfer.dropEffect="copy")}},{key:"onDragEnter",value:function(t){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t))}},{key:"onDragLeave",value:function(t){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(t)),this.preventAndStop(t))}},{key:"dropFiles",value:function(t){var e;!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,t.dataTransfer)&&(e=t.dataTransfer.items?t.dataTransfer.items:t.dataTransfer.files,this.preventAndStop(t),this.checkFiles(e))}},{key:"uploadFiles",value:function(t){!this.isDropzoneDisabled()&&t.target&&(this.checkFiles(t.target.files||[]),this.resetFileInput())}},{key:"checkFiles",value:function(t){for(var e=this,n=function(n){var i=t[n],a=null;if(e.canGetAsEntry(i)&&(a=i.webkitGetAsEntry()),a)if(a.isFile){var c=new u(a.name,a);e.addToQueue(c)}else a.isDirectory&&e.traverseFileTree(a,a.name);else if(i){var o={name:i.name,isDirectory:!1,isFile:!0,file:function(t){return t(i)}},r=new u(o.name,o);e.addToQueue(r)}},i=0;i<t.length;i++)n(i);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(a.a)(200,200).subscribe((function(){if(e.files.length>0&&0===e.numOfActiveReadEntries){var t=e.files;e.files=[],e.onFileDrop.emit(t)}}))}},{key:"traverseFileTree",value:function(t,e){var n=this;if(t.isFile){var i=new u(e,t);this.files.push(i)}else{e+="/";var a=t.createReader(),c=[];!function i(){n.numOfActiveReadEntries++,a.readEntries((function(a){if(a.length)c=c.concat(a),i();else if(0===c.length){var o=new u(e,t);n.zone.run((function(){n.addToQueue(o)}))}else for(var r=function(t){n.zone.run((function(){n.traverseFileTree(c[t],e+c[t].name)}))},s=0;s<c.length;s++)r(s);n.numOfActiveReadEntries--}))}()}}},{key:"resetFileInput",value:function(){if(this.fileSelector&&this.fileSelector.nativeElement){var t=this.fileSelector.nativeElement,e=t.parentElement,n=this.getHelperFormElement(),i=this.getFileInputPlaceholderElement();e!==n&&(this.renderer.insertBefore(e,i,t),this.renderer.appendChild(n,t),n.reset(),this.renderer.insertBefore(e,t,i),this.renderer.removeChild(e,i))}}},{key:"getHelperFormElement",value:function(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}},{key:"getFileInputPlaceholderElement",value:function(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}},{key:"canGetAsEntry",value:function(t){return!!t.webkitGetAsEntry}},{key:"isDropzoneDisabled",value:function(){return this.globalDraggingInProgress||this.disabled}},{key:"addToQueue",value:function(t){this.files.push(t)}},{key:"preventAndStop",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=null!=t&&"false"!=="".concat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.z),i.Qb(i.D))},t.\u0275cmp=i.Kb({type:t,selectors:[["ngx-file-drop"]],contentQueries:function(t,e,n){var a;1&t&&i.Ib(n,p,!0,i.L),2&t&&i.Dc(a=i.jc())&&(e.contentTemplate=a.first)},viewQuery:function(t,e){var n;1&t&&i.Nc(o,!0),2&t&&i.Dc(n=i.jc())&&(e.fileSelector=n.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:17,consts:[[3,"drop","dragover","dragenter","dragleave"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"value","click"]],template:function(t,e){if(1&t&&(i.Wb(0,"div",0),i.ic("drop",(function(t){return e.dropFiles(t)}))("dragover",(function(t){return e.onDragOver(t)}))("dragenter",(function(t){return e.onDragEnter(t)}))("dragleave",(function(t){return e.onDragLeave(t)})),i.Wb(1,"div"),i.Wb(2,"input",1,2),i.ic("change",(function(t){return e.uploadFiles(t)})),i.Vb(),i.Qc(4,l,2,2,"ng-template",null,3,i.Rc),i.Qc(6,b,0,0,"ng-template",4),i.Vb(),i.Vb()),2&t){var n=i.Ec(5);i.Db(e.dropZoneClassName),i.Hb("ngx-file-drop__drop-zone--over",e.isDraggingOverDropZone),i.Ab(1),i.Db(e.contentClassName),i.Ab(1),i.tc("accept",e.accept)("multiple",e.multiple),i.Bb("directory",e.directory||void 0)("webkitdirectory",e.directory||void 0)("mozdirectory",e.directory||void 0)("msdirectory",e.directory||void 0)("odirectory",e.directory||void 0),i.Ab(4),i.tc("ngTemplateOutlet",e.contentTemplate||n)("ngTemplateOutletContext",i.yc(15,d,e.openFileSelector))}},directives:[c.B,c.u],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),t}(),g=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=i.Ob({type:t,bootstrap:function(){return[m]}}),t.\u0275inj=i.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[c.c]]}),t}()},"i/as":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("mrSG"),a=n("fXoL"),c=n("1kSV"),o=n("VnnJ"),r=n("XMRP"),s=n("ZF+8"),l=n("bsP8"),b=n("e8Ap"),d=n("gfTr"),u=n("LFY/"),p=n("M6pS"),m=n("sYmb"),g=["fileDrop"];function f(t,e){1&t&&a.Rb(0,"img",20)}var h=function(){var t=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.modal=e,this.companyService=n,this.contractsService=i,this.filesService=a,this.navService=c,this.shouldNavigateToContracts=!1,this.acceptedFormats=".pdf, .jpg, .jpeg, .doc, .png, .tif",this.uploadingFiles=[],this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.uploadingFiles=[],this.mapSubmitLabel()}},{key:"ngOnDestroy",value:function(){this.uploadingFiles=[]}},{key:"onFileDrop",value:function(t){var e=this,n=!0,i=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var r=c.value;r.fileEntry.isFile&&r.fileEntry.file((function(t){e.filesService.uploading$.next([t])}))}}catch(s){i=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"onUploadingFilesUpdate",value:function(t){this.uploadingFiles=t}},{key:"mapTranslate",value:function(t){return"CONTRACTS.ADD_CONTRACT_MODAL.".concat(t)}},{key:"dismissModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.modal.dismiss({error:t,uploadingFiles:e}),this.uploadingFiles=[]}},{key:"closeModal",value:function(){this.uploadingFiles=[],this.modal.close()}},{key:"openFileSelector",value:function(){this.fileDrop.openFileSelector()}},{key:"submitFiles",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.filesService.checkIfCanBeUploadedAndNotify(this.uploadingFiles)){t.next=15;break}return this.isLoading=!0,t.prev=2,t.next=5,this.contractsService.submitContracts(this.uploadingFiles);case 5:this.navService.retrieveContractBadges(),this.closeModal(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0?this.dismissModal(t.t0,this.uploadingFiles):this.dismissModal(t.t0);case 12:return t.prev=12,this.isLoading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[2,9,12,15]])})))}},{key:"mapSubmitLabel",value:function(){this.submitLabel=this.companyService.isSecondaryAuthority()?this.mapTranslate("SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SIGN_AND_SEND"):this.mapTranslate("SENT_FOR_SIGN")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a),a.Qb(o.a),a.Qb(r.a),a.Qb(s.b),a.Qb(l.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["j-add-contract-modal"]],viewQuery:function(t,e){var n;1&t&&a.Xc(g,!0),2&t&&a.Dc(n=a.jc())&&(e.fileDrop=n.first)},inputs:{shouldNavigateToContracts:"shouldNavigateToContracts"},decls:37,vars:36,consts:[[1,"modal-body","j-modal-body","p-5"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[3,"hidden"],[1,"add-contract-modal__header"],[1,"btn","btn-outline-primary","add-contract-modal__back-button","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"add-contract-modal__wrap"],[3,"dropZoneLabel","accept","onFileDrop"],["fileDrop",""],["ngx-file-drop-content-tmp",""],[1,"text-muted","text-center","my-4",3,"innerHTML"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[3,"isLoading","acceptedFormats","updated"],[1,"add-contract-modal__footer"],[1,"p4","text-muted",3,"innerHTML"],[1,"add-contract-modal__buttons"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","jLoading","click"],["src","./assets/img/contracts/upload.svg"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"button",1),a.ic("click",(function(t){return e.dismissModal()})),a.Rb(2,"img",2),a.nc(3,"translate"),a.Vb(),a.Wb(4,"section",3),a.Wb(5,"div",4),a.Wb(6,"button",5),a.ic("click",(function(t){return e.dismissModal()})),a.Rb(7,"span",6),a.Vb(),a.Wb(8,"h5",7),a.Sc(9),a.nc(10,"translate"),a.Vb(),a.Vb(),a.Wb(11,"div",8),a.Wb(12,"ngx-file-drop",9,10),a.ic("onFileDrop",(function(t){return e.onFileDrop(t)})),a.nc(14,"translate"),a.Qc(15,f,1,0,"ng-template",11),a.Vb(),a.Rb(16,"p",12),a.nc(17,"translate"),a.Wb(18,"button",13),a.ic("click",(function(t){return e.openFileSelector()})),a.Sc(19),a.nc(20,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Wb(21,"section",3),a.Wb(22,"div",4),a.Wb(23,"h5",7),a.Sc(24),a.nc(25,"translate"),a.Vb(),a.Vb(),a.Wb(26,"j-uploading-files",14),a.ic("updated",(function(t){return e.onUploadingFilesUpdate(t)})),a.Vb(),a.Wb(27,"div",15),a.Rb(28,"p",16),a.nc(29,"translate"),a.Vb(),a.Wb(30,"div",17),a.Wb(31,"button",18),a.ic("click",(function(t){return e.openFileSelector()})),a.Sc(32),a.nc(33,"translate"),a.Vb(),a.Wb(34,"button",19),a.ic("click",(function(t){return e.submitFiles()})),a.Sc(35),a.nc(36,"translate"),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Ab(2),a.uc("alt",a.oc(3,18,"SHARED.CLOSE")),a.Ab(2),a.tc("hidden",e.uploadingFiles.length>0),a.Ab(3),a.tc("inlineSVG","assets/icons/arrow-left.svg"),a.Ab(2),a.Uc(" ",a.oc(10,20,e.mapTranslate("HEADING"))," "),a.Ab(3),a.tc("dropZoneLabel",a.oc(14,22,e.mapTranslate("UPLOAD")))("accept",e.acceptedFormats),a.Ab(4),a.tc("innerHTML",a.oc(17,24,e.mapTranslate("DESCRIPTION")),a.Ic),a.Ab(3),a.Uc(" ",a.oc(20,26,e.mapTranslate("UPLOAD"))," "),a.Ab(2),a.tc("hidden",0==e.uploadingFiles.length),a.Ab(3),a.Uc(" ",a.oc(25,28,e.mapTranslate("UPLOADED_HEADING"))," "),a.Ab(2),a.tc("isLoading",e.isLoading)("acceptedFormats",e.acceptedFormats),a.Ab(2),a.tc("innerHTML",a.oc(29,30,e.mapTranslate("AGREEMENT")),a.Ic),a.Ab(3),a.tc("disabled",e.isLoading),a.Ab(1),a.Uc(" ",a.oc(33,32,e.mapTranslate("UPLOAD_FILE"))," "),a.Ab(2),a.tc("disabled",e.isLoading)("jLoading",e.isLoading),a.Ab(1),a.Uc(" ",a.oc(36,34,e.submitLabel)," "))},directives:[b.a,d.a,d.b,u.a,p.a],pipes:[m.d],styles:[":host{position:relative}.add-contract-modal__file-selector{border-radius:30px;border:0;background:none;outline:0;width:100%;height:100%}ngx-file-drop .ngx-file-drop__drop-zone{border-radius:30px!important;border:0!important;background-image:url(/assets/img/contracts/dropzone.svg);width:335px;height:165px!important;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}ngx-file-drop .ngx-file-drop__drop-zone--over,ngx-file-drop .ngx-file-drop__drop-zone:hover{background-color:#f5f9fd!important}ngx-file-drop .ngx-file-drop__content{border-radius:30px!important;width:335px!important;height:165px!important}.add-contract-modal__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.add-contract-modal__header h5{font-size:22px}.add-contract-modal__back-button{width:40px;height:40px;padding:0}.add-contract-modal__back-button,.add-contract-modal__wrap{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.add-contract-modal__wrap{padding:50px 0 0;max-width:360px;margin:0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.add-contract-modal__close{position:absolute;right:24px;top:24px}.modal-body{position:relative}.add-contract-modal__footer{padding-top:20px;border-top:1px solid rgba(183,190,197,.5)}.add-contract-modal__footer p{line-height:18px}.add-contract-modal__buttons{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:repeat(2,calc(50% - 6px))}.add-contract-modal__buttons .btn{padding-left:0;padding-right:0}"],encapsulation:2}),t}()},w657:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("mrSG"),a=n("jtnZ"),c=n("fXoL"),o=n("1kSV"),r=n("XMRP"),s=n("sYmb"),l=n("M6pS"),b=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modal=e,this.contractsService=n,this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.errorText=this.error.code===a.a.FORBIDDEN?"CONTRACTS.ERROR_MODAL.FORBIDDEN":"CONTRACTS.ERROR_MODAL.GENERAL"}},{key:"submitContracts",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.submitContracts(this.uploadingFiles);case 4:this.closeModal(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.prev=9,this.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,7,9,12]])})))}},{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(){this.modal.close()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Qb(o.a),c.Qb(r.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["j-contract-error-modal"]],inputs:{description:"description",error:"error",uploadingFiles:"uploadingFiles"},decls:16,vars:12,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","my-2"],[1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"disabled","jLoading","click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"disabled","click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"button",1),c.ic("click",(function(t){return e.dismissModal()})),c.Rb(2,"img",2),c.nc(3,"translate"),c.Vb(),c.Rb(4,"img",3),c.nc(5,"translate"),c.Wb(6,"h3",4),c.Sc(7," SHARED.ERROR "),c.Vb(),c.Wb(8,"p",5),c.Sc(9),c.nc(10,"translate"),c.Vb(),c.Vb(),c.Wb(11,"div",6),c.Wb(12,"button",7),c.ic("click",(function(t){return e.submitContracts()})),c.Sc(13," SHARED.TRY_AGAIN "),c.Vb(),c.Wb(14,"button",8),c.ic("click",(function(t){return e.dismissModal()})),c.Sc(15," SHARED.BACK_TO_HOME "),c.Vb(),c.Vb()),2&t&&(c.Ab(2),c.uc("alt",c.oc(3,6,"SHARED.CLOSE")),c.Ab(2),c.uc("alt",c.oc(5,8,"SHARED.ERROR")),c.Ab(5),c.Uc(" ",c.oc(10,10,e.errorText)," "),c.Ab(3),c.tc("disabled",e.isLoading)("jLoading",e.isLoading),c.Ab(2),c.tc("disabled",e.isLoading))},directives:[s.a,l.a],pipes:[s.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding:56px 32px 0}"]}),t}()}}]);