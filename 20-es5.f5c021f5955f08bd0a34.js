function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{oTLR:function(e,t,n){"use strict";n.r(t);var i=n("1kSV"),o=n("ofXK"),c=n("3Pt+"),s=n("A3+G"),a=n("5cNS"),l=n("tyNb"),r=n("y5b2"),d=function(e){return e.POS="POS",e.CASHIERS="CASHIERS",e}({}),b=function(e){return e.EDIT="EDIT",e.ADD="ADD",e}({}),u=function(e){return e.ALL="all",e.POS="pos",e.QR="qr",e}({}),p=function(e){return e.POS="pos",e.QR="qr",e}({}),f=[{label:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",value:r.e.DEFAULT},{label:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",value:r.e.AMOUNT_DESC},{label:"\u041f\u043e \u0441\u0443\u043c\u043c\u0435 \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044f",value:r.e.AMOUNT_ASC}],h=n("L+ju"),m=n("lJxs"),g=n("+/Tu"),v=n("2Vo4"),S=function(e){return e.MAP="MAP",e.CONNECTJTOLECONFIRMATION="CONNECTJTOLECONFIRMATION",e.BASE="BASE",e}({}),y=n("wd/R"),C=n.n(y),w=n("fXoL"),k=n("quSY"),P=n("yZrb"),O=n("tk/3"),A=n("VnnJ"),x=n("ZF+8"),T=n("xErE");n("G54m");var _,V,W=((V=function(){function e(t,n,i,o){var c=this;_classCallCheck(this,e),this.companyService=t,this.apiService=n,this.userService=i,this.accountsService=o,this.companyId=null,this.bin=null,this.subscription=new k.a,this.subscription.add(this.companyService.currentCompany$.subscribe((function(e){c.companyId=e.id,c.bin=e.bin})))}return _createClass(e,[{key:"getListPointsOfSell",value:function(){var e=this.getListPointsOfSellUrl(this.companyId);return this.apiService.get(e)}},{key:"getListPointsOfSellUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"companies/".concat(e?"".concat(e):"","/pos")}},{key:"getPointOfSell",value:function(e){var t=this.getPointOfSellUrl(this.companyId,e);return this.apiService.get(t)}},{key:"getPointOfSellUrl",value:function(e,t){if(e&&t)return"companies/".concat(e,"/pos/").concat(t)}},{key:"getInformationByIin",value:function(e){return this.apiService.get("companies/".concat(this.companyId,"/person/").concat(e))}},{key:"getStatementsList",value:function(e){var t=e.dateTimeFrom,n=e.dateTimeTo,i=e.page,o=e.pageSize,c=(new O.h).set("dateTimeFrom",C()(t).format("YYYY-MM-DDTHH:mm:ss")).set("dateTimeTo",C()(n).format("yyyy-MM-DDTHH:mm:ss")).set("page",i).set("pageSize",o);return this.apiService.get("companies/".concat(this.companyId,"/merchant/payments"),null,c)}},{key:"createPointOfSell",value:function(e,t){var n="companies/".concat(this.companyId,"/merchant:connect-to-jpay"),i=e,o=(new O.g).set(P.b.PHONE,t);return this.apiService.post(n,i,o)}},{key:"getAccountsByCompanyId",value:function(e){return this.apiService.get("companies/".concat(e,"/accounts"))}},{key:"updatePointOfSell",value:function(e,t){return this.apiService.put("companies/".concat(this.companyId,"/pos/").concat(t),e)}},{key:"deleteCashier",value:function(e){return this.apiService.delete("companies/".concat(e.companyId,"/pos/").concat(e.posId,"/cashiers/").concat(e.cashierId))}},{key:"user",get:function(){return this.userService.user}},{key:"pointOfSellBin",get:function(){return this.companyService.currentCompany.bin}},{key:"accounts",get:function(){return this.accountsService.getAccountsList()}},{key:"connectionStateToJpay",get:function(){return this.apiService.get("companies/".concat(this.companyId,"/merchant"))}},{key:"paymentsTotalInfo",get:function(){return this.apiService.get("companies/".concat(this.companyId,"/merchant/payments/total-info"))}}]),e}()).\u0275fac=function(e){return new(e||V)(w.ec(A.a),w.ec(P.a),w.ec(x.h),w.ec(T.a))},V.\u0275prov=w.Mb({token:V,factory:V.\u0275fac,providedIn:"root"}),V),R=((_=function e(){_classCallCheck(this,e),this.sellPointsActionForm=new c.k({name:new c.h("",c.H.required),address:new c.h("",c.H.required),assignSelf:new c.h,phoneNumber:new c.h}),this.cashiers=[],this.isReopeningSellPointsActionFormModal=!1,this.addressFromYandexMap="",this.isAssignSelf=!1}).\u0275fac=function(e){return new(e||_)},_.\u0275prov=w.Mb({token:_,factory:_.\u0275fac,providedIn:"root"}),_),I=n("4oqK"),M=n("QfCG"),D=n("2aJj"),F=n("ZVDf"),j=n("hsBV"),E=n("e8Ap"),L=n("2FF4"),N=n("sYmb");function Q(e,t){if(1&e&&w.Sb(0,11),2&e){w.lc();var n=w.Dc(14);w.sc("ngTemplateOutlet",n)}}function H(e,t){if(1&e&&w.Sb(0,11),2&e){w.lc();var n=w.Dc(10);w.sc("ngTemplateOutlet",n)}}function G(e,t){1&e&&w.Sb(0)}function B(e,t){if(1&e&&(w.Wb(0,"div",12),w.Wb(1,"div",13),w.Pc(2,G,1,0,"ng-container",14),w.Rb(3,"label",15),w.Vb(),w.Wb(4,"div"),w.Wb(5,"p"),w.Rc(6),w.Vb(),w.Wb(7,"p",16),w.Rc(8),w.Vb(),w.Wb(9,"p",17),w.Rc(10),w.Vb(),w.Vb(),w.Vb()),2&e){var n=w.lc(),i=w.Dc(6);w.Ab(2),w.sc("ngTemplateOutlet",i),w.Ab(4),w.Vc("",n.user.lastname," ",n.user.firstname," ",n.user.middlename,""),w.Ab(2),w.Tc("\u0418\u0418\u041d: ",n.user.iin,""),w.Ab(2),w.Tc("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430: ",n.user.phone,"")}}function U(e,t){if(1&e){var n=w.Xb();w.Wb(0,"input",18),w.ic("change",(function(e){return w.Gc(n),w.lc().assignSelfChanges(e)})),w.Vb()}if(2&e){var i=w.lc();w.sc("formControl",i.sellPointsActionForm.controls.assignSelf)}}function z(e,t){if(1&e&&(w.Wb(0,"div",19),w.Wb(1,"j-form-field",20),w.Wb(2,"j-label"),w.Rc(3,"\u0424\u0418\u041e"),w.Vb(),w.Rb(4,"input",21),w.Vb(),w.Vb(),w.Wb(5,"div",22),w.Rb(6,"j-phone-input",23),w.Vb()),2&e){var n=t.cashier;w.Ab(4),w.sc("formControl",n.form.controls.fio),w.Ab(2),w.sc("formControl",n.form.controls.phone)}}function J(e,t){1&e&&w.Sb(0)}function q(e,t){if(1&e&&(w.Wb(0,"div",30),w.Wb(1,"div",45),w.Pc(2,J,1,0,"ng-container",14),w.Wb(3,"label",15),w.Rc(4,"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0431\u044f"),w.Vb(),w.Vb(),w.Vb()),2&e){w.lc(2);var n=w.Dc(6);w.Ab(2),w.sc("ngTemplateOutlet",n)}}function X(e,t){1&e&&w.Sb(0)}var $=function(e,t){return{cashier:e,i:t}};function K(e,t){if(1&e){var n=w.Xb();w.Wb(0,"li",47),w.Wb(1,"div",48),w.Wb(2,"p",49),w.Rc(3),w.Vb(),w.Wb(4,"button",50),w.ic("click",(function(e){w.Gc(n);var i=t.index;return w.lc(3).deleteCashierHandler(i)})),w.Vb(),w.Vb(),w.Pc(5,X,1,0,"ng-container",51),w.Vb()}if(2&e){var i=t.$implicit,o=t.index;w.lc(3);var c=w.Dc(8);w.Ab(3),w.Tc("\u041a\u0430\u0441\u0441\u0438\u0440 \u2116",o+1,""),w.Ab(2),w.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",w.yc(3,$,i,o))}}function Y(e,t){if(1&e&&(w.Ub(0),w.Wb(1,"ul"),w.Pc(2,K,6,6,"li",46),w.Vb(),w.Tb()),2&e){var n=w.lc(2);w.Ab(2),w.sc("ngForOf",n.cashiers)}}function Z(e,t){if(1&e&&w.Sb(0,11),2&e){w.lc(2);var n=w.Dc(12);w.sc("ngTemplateOutlet",n)}}function ee(e,t){if(1&e&&w.Sb(0,11),2&e){w.lc(2);var n=w.Dc(18);w.sc("ngTemplateOutlet",n)}}function te(e,t){if(1&e){var n=w.Xb();w.Wb(0,"div",24),w.Wb(1,"div",25),w.Wb(2,"h4"),w.Rc(3),w.mc(4,"translate"),w.Vb(),w.Vb(),w.Wb(5,"div",26),w.Wb(6,"div",27),w.Wb(7,"form",28),w.Wb(8,"div",29),w.Wb(9,"div",30),w.Wb(10,"j-form-field",20),w.Wb(11,"j-label"),w.Rc(12,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),w.Vb(),w.Rb(13,"input",21),w.Vb(),w.Vb(),w.Wb(14,"div",30),w.Wb(15,"j-form-field",31),w.Wb(16,"j-label"),w.Rc(17,"\u0410\u0434\u0440\u0435\u0441"),w.Vb(),w.Rb(18,"input",21),w.Vb(),w.Vb(),w.Wb(19,"div",30),w.Wb(20,"p",32),w.Rc(21,"\u0421\u0447\u0435\u0442"),w.Vb(),w.Wb(22,"j-account-dropdown",33),w.ic("selected",(function(e){return w.Gc(n),w.lc().onAccountSelected(e)})),w.Vb(),w.Vb(),w.Wb(23,"div",34),w.Wb(24,"p",32),w.Rc(25,"\u041a\u0430\u0441\u0441\u0438\u0440\u044b"),w.Vb(),w.Wb(26,"button",35),w.ic("click",(function(e){return w.Gc(n),w.lc().addCashiersHandler()})),w.Wb(27,"p",36),w.Rc(28,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435"),w.Vb(),w.Vb(),w.Vb(),w.Pc(29,q,5,1,"div",37),w.Pc(30,Y,3,1,"ng-container",38),w.Pc(31,Z,1,1,"ng-container",39),w.Vb(),w.Pc(32,ee,1,1,"ng-container",39),w.Vb(),w.Vb(),w.Vb(),w.Wb(33,"div",40),w.Wb(34,"button",41),w.ic("click",(function(e){return w.Gc(n),w.lc().onClose()})),w.Rc(35),w.mc(36,"translate"),w.Vb(),w.Wb(37,"button",42),w.ic("click",(function(e){return w.Gc(n),w.lc().onSaveClick()})),w.Rc(38),w.mc(39,"translate"),w.Vb(),w.Vb(),w.Vb(),w.Wb(40,"div",43),w.Wb(41,"button",44),w.ic("click",(function(e){return w.Gc(n),w.lc().onClose()})),w.Vb(),w.Vb()}if(2&e){var i=w.lc(),o=w.Dc(4);w.Ab(3),w.Tc("",w.nc(4,16,"TEST.TEST1")," \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436"),w.Ab(4),w.sc("formGroup",i.sellPointsActionForm),w.Ab(6),w.sc("formControl",i.sellPointsActionForm.controls.name),w.Ab(2),w.sc("toolTipClickFn",i.boundedOnShowMap),w.Ab(3),w.sc("formControl",i.sellPointsActionForm.controls.address),w.Ab(4),w.sc("accounts",i.accounts)("defaultAccount",i.defaultAccount)("isDisabled",1===i.userAccountsCount),w.Ab(7),w.sc("ngIf",!i.isAssignSelf)("ngIfElse",o),w.Ab(1),w.sc("ngIf",i.cashiers.length),w.Ab(1),w.sc("ngIf",i.action===i.POINTS_OF_SELL_ACTIONS.EDIT),w.Ab(1),w.sc("ngIf",i.showDeletedCashiers.getValue()),w.Ab(3),w.Sc(w.nc(36,18,"SHARED.CANCEL")),w.Ab(2),w.sc("disabled",i.getIsDisabledState()),w.Ab(1),w.Sc(w.nc(39,20,"SHARED.SAVE"))}}function ne(e,t){if(1&e){var n=w.Xb();w.Wb(0,"button",57),w.ic("click",(function(e){w.Gc(n);var t=w.lc().index;return w.lc(2).deleteCashierHandler(t)})),w.Vb()}}function ie(e,t){if(1&e&&(w.Wb(0,"li"),w.Wb(1,"div",53),w.Wb(2,"p",54),w.Rc(3),w.Vb(),w.Wb(4,"p",55),w.Rc(5),w.Rb(6,"br"),w.Rc(7),w.Vb(),w.Pc(8,ne,1,0,"button",56),w.Vb(),w.Vb()),2&e){var n=t.$implicit,i=w.lc(2);w.Ab(3),w.Sc(i.getCashierInitials(n.name)),w.Ab(2),w.Tc("",n.name,"."),w.Ab(2),w.Sc(n.phone),w.Ab(1),w.sc("ngIf",i.editingPointOfSellCashiers.length>1)}}function oe(e,t){if(1&e&&(w.Wb(0,"ul"),w.Pc(1,ie,9,4,"li",52),w.Vb()),2&e){var n=w.lc();w.Ab(1),w.sc("ngForOf",n.editingPointOfSellCashiers)}}function ce(e,t){if(1&e&&w.Sb(0,11),2&e){w.lc(2);var n=w.Dc(16);w.sc("ngTemplateOutlet",n)}}function se(e,t){if(1&e){var n=w.Xb();w.Wb(0,"div",58),w.Wb(1,"j-sms",59),w.ic("submitted",(function(e){return w.Gc(n),w.lc().getSmsToken(e)})),w.Vb(),w.Vb(),w.Pc(2,ce,1,1,"ng-container",39)}if(2&e){var i=w.lc();w.Ab(1),w.sc("hidden",i.showSuccessConnection.getValue())("phone",i.userPhone)("countryCode",i.userCountryCode.code),w.Ab(1),w.sc("ngIf",i.showSuccessConnection.getValue())}}function ae(e,t){if(1&e&&(w.Wb(0,"div",60),w.Rb(1,"span",61),w.Wb(2,"h5"),w.Rc(3,"QR \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d"),w.Vb(),w.Wb(4,"p"),w.Rc(5,"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443 \u0447\u0435\u0440\u0435\u0437 QR"),w.Vb(),w.Vb()),2&e){var n=w.lc();w.sc("ngClass",n.showSuccessConnection?"success-connection":"")}}function le(e,t){if(1&e){var n=w.Xb();w.Wb(0,"div",62),w.Wb(1,"p",63),w.Rc(2,"\u041a\u0430\u0441\u0441\u0438\u0440 \u0443\u0434\u0430\u043b\u0435\u043d"),w.Vb(),w.Wb(3,"button",64),w.ic("click",(function(e){return w.Gc(n),w.lc().onBackDeletedCashiersClick()})),w.Vb(),w.Wb(4,"p",65),w.Rc(5),w.Vb(),w.Vb()}if(2&e){var i=w.lc();w.Ab(5),w.Tc("\u0412\u0435\u0440\u043d\u0443\u0442\u044c ",i.backDeletedCashiersTimer,"")}}var re,de=((re=function(){function e(t,n,i,o){_classCallCheck(this,e),this.activeModal=t,this.jToleService=n,this.pointsOfSellsActionService=i,this.router=o,this.pointsOfSellActions=b,this.isShowMap=new v.a(!1),this.workAllDay=new v.a(!1),this.workWithoutBreak=new v.a(!1),this.showConfirmation=new v.a(!1),this.showSuccessConnection=new v.a(!1),this.showDeletedCashiers=new v.a(!1),this.sellPointsActionForm=new c.k({name:new c.h("",c.H.required),address:new c.h("",c.H.required),assignSelf:new c.h,phoneNumber:new c.h}),this.isAssignSelf=!1,this.userCountryCode=JSON.parse(localStorage.getItem("countryCode")),this.cashiers=[],this.selectedAccount=null,this.POS_TEMPLATES=S,this.POINTS_OF_SELL_ACTIONS=b,this.deletedCashiers=[],this.backDeletedCashiersTimer=5,this.clicked=!1,this.workRegimeDaysFormGroup=new c.k({Monday:new c.h,Tuesday:new c.h,Wednesday:new c.h,Thursday:new c.h,Friday:new c.h,Saturday:new c.h,Sunday:new c.h}),this.workRegimeDays=new c.k({workAllDay:new c.h(!1),withoutBreak:new c.h(!1)}),this.boundedOnShowMap=this.onShowMap.bind(this),this.setPropertiesAfterReopeningModal()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.action===b.EDIT&&this.jToleService.getPointOfSell(this.posId).then((function(t){e.setDefaultFormValues(t),e.editingPointOfSellCashiers=t.cashiers,e.findPosAccountFromList(t.companyId)})),this.bin=this.jToleService.pointOfSellBin,this.user=this.jToleService.user,this.userPhone=this.jToleService.user.phone,this.jToleService.accounts.pipe(Object(m.a)((function(e){return e.filter((function(e){return e.balance.currency===g.a.KZT&&e.accountType!==h.a.DEPOSIT}))}))).subscribe((function(t){e.getUserAccountsCount(t),e.accounts=t,e.getDefaultAccount(t)})),this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm}},{key:"getSelectedDays",value:function(){var e=[];for(var t in this.workRegimeDaysFormGroup.value)this.workRegimeDaysFormGroup.value[t]&&e.push(t);return e}},{key:"getIsDisabledState",value:function(){return this.action===b.EDIT?0===this.cashiers.length&&"INVALID"===this.sellPointsActionForm.status:0===this.cashiers.length||"INVALID"===this.sellPointsActionForm.status}},{key:"getIsLoadingState",value:function(){}},{key:"getParsedFormat",value:function(e){return C()(e).format("dd")}},{key:"setPropertiesAfterReopeningModal",value:function(){this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm,this.cashiers=this.pointsOfSellsActionService.cashiers,this.isAssignSelf=this.pointsOfSellsActionService.isAssignSelf}},{key:"onClose",value:function(){this.activeModal.close()}},{key:"onShowMap",value:function(){this.activeModal.close(),this.pointsOfSellsActionService.cashiers=this.cashiers,this.pointsOfSellsActionService.isAssignSelf=this.isAssignSelf,this.action===b.EDIT&&(this.pointsOfSellsActionService.sellPointsActionForm=this.sellPointsActionForm),this.isShowMap.next(!0),this.router.navigate(["jtole/map"])}},{key:"onCloseMap",value:function(){this.isShowMap.next(!1)}},{key:"getTemplateToBeRendered",value:function(){return this.isShowMap.getValue()?S.MAP:this.showConfirmation.getValue()?S.CONNECTJTOLECONFIRMATION:S.BASE}},{key:"onSaveClick",value:function(){if(this.action===b.EDIT)return this.jToleService.updatePointOfSell({address:this.sellPointsActionForm.controls.address.value,name:this.sellPointsActionForm.controls.name.value,id:this.pos.id},this.pos.companyId);this.showConfirmation.next(!0)}},{key:"getSmsToken",value:function(e){var t=this;if(e.signature){var n,i=this.sellPointsActionForm.value,o=i.address,c=i.name,s=this.cashiers.map((function(e){return{phone:e.form.value.phone,name:e.form.value.fio}}));if(this.isAssignSelf){var a=this.user,l=a.firstname,r=a.lastname,d=a.middlename,b=a.phone;n=[].concat(_toConsumableArray(s),[{phone:b,name:l+r+d}])}else n=s;this.jToleService.createPointOfSell({iban:this.defaultAccount.iban?this.defaultAccount.iban:this.selectedAccount.iban,pos:{name:c,address:o,cashiers:n}},e.signature).then((function(){t.showSuccessConnection.next(!0)}))}}},{key:"addCashiersHandler",value:function(){this.cashiers.push({form:new c.k({phone:new c.h,fio:new c.h})})}},{key:"addWorkRegimesHandler",value:function(){}},{key:"getCashierInitials",value:function(e){var t=e.split(" ");return 1===t.length?t[0][0].toUpperCase():t[0][0].toUpperCase()+t[1][0].toUpperCase()}},{key:"deleteCashierHandler",value:function(e){var t=this;this.showDeletedCashiers.next(!0);var n=setInterval((function(){--t.backDeletedCashiersTimer}),1e3),i=this.editingPointOfSellCashiers[e].id;setTimeout((function(){if(clearInterval(n),t.showDeletedCashiers.next(!1),t.backDeletedCashiersTimer=5,t.action===b.EDIT)return t.jToleService.deleteCashier({companyId:t.pos.companyId,posId:t.posId,cashierId:i})}),5e3),this.action===b.EDIT?(this.deletedCashiers.push(this.editingPointOfSellCashiers[e]),this.editingPointOfSellCashiers.splice(e,1)):(this.deletedCashiers.push(this.cashiers[e]),this.cashiers.splice(e,1))}},{key:"onBackDeletedCashiersClick",value:function(){this.showDeletedCashiers.next(!1),this.action===b.EDIT?this.editingPointOfSellCashiers=[].concat(_toConsumableArray(this.editingPointOfSellCashiers),_toConsumableArray(this.deletedCashiers)):this.cashiers=[].concat(_toConsumableArray(this.cashiers),_toConsumableArray(this.deletedCashiers)),this.deletedCashiers=[],this.backDeletedCashiersTimer=5}},{key:"getDefaultAccount",value:function(e){1===e.length&&(this.defaultAccount=e[0])}},{key:"getUserAccountsCount",value:function(e){this.userAccountsCount=e.length}},{key:"onAccountSelected",value:function(e){this.selectedAccount=e}},{key:"findPosAccountFromList",value:function(e){var t=this;this.jToleService.getAccountsByCompanyId(e).then((function(n){var i=n.find((function(t){return t.companyId===e}));t.defaultAccount=i}))}},{key:"assignSelfChanges",value:function(e){var t=e.target;this.isAssignSelf=t.checked}},{key:"setDefaultFormValues",value:function(e){this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal&&(this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm),this.sellPointsActionForm=new c.k({name:new c.h(e.name),address:new c.h(e.address),assignSelf:new c.h,phoneNumber:new c.h})}},{key:"onDeletePosClick",value:function(){}},{key:"ngOnDestroy",value:function(){this.isShowMap.complete(),this.workAllDay.complete(),this.workWithoutBreak.complete(),this.showConfirmation.complete(),this.showSuccessConnection.complete(),this.showDeletedCashiers.complete()}}]),e}()).\u0275fac=function(e){return new(e||re)(w.Qb(i.a),w.Qb(W),w.Qb(R),w.Qb(l.c))},re.\u0275cmp=w.Kb({type:re,selectors:[["j-points-of-sells-action"]],inputs:{action:"action",pos:"pos",posId:"posId",alreadyShowed:"alreadyShowed"},decls:19,vars:2,consts:[[1,"d-flex","flex-column","wrapper",3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["assignSelfBlock",""],["assignSelfCheckbox",""],["addCashiersForm",""],["baseTemplate",""],["editingCashiers",""],["connectJToleConfirmation",""],["successConnection",""],["deletedCashiers",""],[3,"ngTemplateOutlet"],[1,"assign-self-template"],[1,"custom-control","custom-checkbox"],[4,"ngTemplateOutlet"],["for","customCheck1",1,"custom-control-label"],[1,"iin"],[1,"phone"],["type","checkbox","id","customCheck1",1,"custom-control-input",3,"formControl","change"],[1,"col-12","pr-2","pl-2"],["clearable","true"],["type","text","jFormInput","",1,"form-control",3,"formControl"],[1,"col-12","pr-2","pl-2","mt-3"],[3,"formControl"],[1,"inner-wrapper"],[1,"modal-header"],[1,"modal-body"],[1,"scrolled"],[1,"scrolled--content",3,"formGroup"],[1,"row"],[1,"form-group","col-12","pr-2","pl-2"],["clearable","true","toolTip","\u041d\u0430 \u043a\u0430\u0440\u0442\u0435",3,"toolTipClickFn"],[1,"form-field-title"],["label","C\u0447\u0435\u0442 \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f",3,"accounts","defaultAccount","isDisabled","selected"],[1,"col-12","form-group","cashiers-form-container","pr-2","pl-2"],["type","button",1,"btn",3,"click"],[1,"add-cashiers-label"],["class","form-group col-12 pr-2 pl-2",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"close-btn"],["inlineSVG","/assets/jtole/close-pos-modal.svg",1,"btn",3,"click"],[1,"custom-control","custom-checkbox","checkbox-container"],["class","add-cashiers-form-container mb-3",4,"ngFor","ngForOf"],[1,"add-cashiers-form-container","mb-3"],[1,"add-cashiers-form-header"],[1,"ml-2","mt-3"],["inlineSVG","/assets/icons/delete.svg",1,"btn","delete-cashier-btn",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-start","pl-2","pr-2"],[1,"existing-cashiers-initials"],[1,"existing-cashiers-info"],["class","btn pr-2","inlineSVG","/assets/icons/delete.svg",3,"click",4,"ngIf"],["inlineSVG","/assets/icons/delete.svg",1,"btn","pr-2",3,"click"],[1,"p-5"],[3,"hidden","phone","countryCode","submitted"],[1,"success-connection__wrapper",3,"ngClass"],["inlineSVG","/assets/jtole/pos-connection-done.svg",1,"d-block","mt-3"],[1,"deleted-cashiers__wrapper"],[1,"deleted-cashiers__text"],["inlineSVG","/assets/jtole/back-cashiers.svg",1,"btn","mb-1","pr-2",3,"click"],[1,"deleted-cashiers__count"]],template:function(e,t){1&e&&(w.Wb(0,"div",0),w.Pc(1,Q,1,1,"ng-container",1),w.Pc(2,H,1,1,"ng-container",2),w.Vb(),w.Pc(3,B,11,6,"ng-template",null,3,w.Qc),w.Pc(5,U,1,1,"ng-template",null,4,w.Qc),w.Pc(7,z,7,2,"ng-template",null,5,w.Qc),w.Pc(9,te,42,22,"ng-template",null,6,w.Qc),w.Pc(11,oe,2,1,"ng-template",null,7,w.Qc),w.Pc(13,se,3,4,"ng-template",null,8,w.Qc),w.Pc(15,ae,6,1,"ng-template",null,9,w.Qc),w.Pc(17,le,6,1,"ng-template",null,10,w.Qc)),2&e&&(w.sc("ngSwitch",t.getTemplateToBeRendered()),w.Ab(1),w.sc("ngSwitchCase",t.POS_TEMPLATES.CONNECTJTOLECONFIRMATION))},directives:[o.y,o.z,o.A,o.B,c.a,c.t,c.i,I.a,M.a,D.a,c.c,F.a,c.J,c.u,c.l,j.a,o.u,E.a,o.t,L.a,o.r],pipes:[N.d],styles:["ul[_ngcontent-%COMP%]{margin-left:0;padding-left:0;width:100%}li[_ngcontent-%COMP%]{list-style-type:none}.inner-wrapper[_ngcontent-%COMP%]{padding:20px}.cashiers-form-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.modal-header[_ngcontent-%COMP%]{padding-left:4px;display:-webkit-box;display:flex}.custom-control[_ngcontent-%COMP%]{padding-left:45px}.add-cashiers-label[_ngcontent-%COMP%]{color:#ef5630}.form-field-title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:25px;color:#1a1c1f;margin-top:10px;display:inline-block}.modal-content[_ngcontent-%COMP%]{max-height:calc(110vh - 3rem)}  .modal-open{max-width:100vw!important}.not-displayed-modal-content[_ngcontent-%COMP%]{display:none}.assign-self-template[_ngcontent-%COMP%]{background:#f6f7f8;width:100%;margin-bottom:2rem;margin-left:.5rem;border-radius:8px;padding-left:13px;padding-top:10px;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start}.assign-self-template[_ngcontent-%COMP%]   .iin[_ngcontent-%COMP%], .assign-self-template[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:12px;line-height:18px;color:#666c72}.checkbox-container[_ngcontent-%COMP%]{height:56px;box-sizing:border-box;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding-left:60px;bottom:1rem;border-radius:8px;background:#f6f7f8}.custom-control-input[_ngcontent-%COMP%]{bottom:1rem}.without-break-checkbox[_ngcontent-%COMP%]{flex-basis:10em}.add-cashiers-form-container[_ngcontent-%COMP%]{width:97%;border-radius:8px;background:#f6f7f8;padding:.5rem 10px 1rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-left:.5rem;margin-right:.5rem}.custom-control-label[_ngcontent-%COMP%]:before{border:2px solid #d6dadf;box-sizing:border-box;border-radius:4px}.add-cashiers-form-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.existing-cashiers-info[_ngcontent-%COMP%]{width:70%}.existing-cashiers-initials[_ngcontent-%COMP%]{background:#f6f7f8;border-radius:16px;min-height:40px;width:8%;padding:8px 10px}.close-btn-container[_ngcontent-%COMP%]{width:100%}.close-btn[_ngcontent-%COMP%]{position:fixed;z-index:2;right:1em}@media(max-width:959px){.close-btn[_ngcontent-%COMP%]{position:fixed;z-index:2;right:1em;top:1em}.wrapper[_ngcontent-%COMP%]{left:5em}}.delete-cashier-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transform:translate(20px);transform:translate(20px)}  .ymaps-2-1-79-controls__control_toolbar{display:-webkit-box!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;flex-direction:column!important;-webkit-box-align:start!important;align-items:flex-start!important;padding:24px!important;position:absolute!important;width:455px!important;height:252px!important;left:0!important;top:0!important;background:#fff!important;box-shadow:0 24px 32px rgba(0,0,0,.04),0 16px 24px rgba(0,0,0,.04),0 4px 8px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04)!important;border-radius:8px!important}.work-day__checkbox[_ngcontent-%COMP%],   .work-day__item .j-dropdown-input__item{background:transparent!important}.success-connection__wrapper[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column wrap;-webkit-box-pack:center;justify-content:center}.deleted-cashiers__wrapper[_ngcontent-%COMP%], .success-connection__wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.deleted-cashiers__wrapper[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;background:#f6f7f8;height:48px;padding:1em 1.5em;margin:0 -2em}.deleted-cashiers__wrapper[_ngcontent-%COMP%]   .deleted-cashiers__text[_ngcontent-%COMP%]{color:#666c72;padding-top:1em;-webkit-box-flex:1;flex-grow:1}.deleted-cashiers__wrapper[_ngcontent-%COMP%]   .deleted-cashiers__count[_ngcontent-%COMP%]{color:#1586bb;padding-top:1.2em}"]}),re),be=n("paXB"),ue=n("7/bn"),pe=n("oMXN"),fe=n("EiG8"),he=n("I+WJ"),me=n("oa9T");function ge(e,t){1&e&&w.Sb(0)}function ve(e,t){}function Se(e,t){if(1&e&&(w.Wb(0,"li"),w.Rc(1),w.Vb()),2&e){var n=t.$implicit;w.Ab(1),w.Sc(n.name)}}function ye(e,t){if(1&e){var n=w.Xb();w.Wb(0,"tr",19),w.ic("click",(function(e){w.Gc(n);var i=t.$implicit;return w.lc(3).onRowClick(i)})),w.Wb(1,"td"),w.Rc(2),w.Vb(),w.Wb(3,"td"),w.Rc(4),w.Vb(),w.Wb(5,"td"),w.Wb(6,"ul"),w.Pc(7,Se,2,1,"li",20),w.Vb(),w.Vb(),w.Vb()}if(2&e){var i=t.$implicit;w.Ab(2),w.Sc(i.name),w.Ab(2),w.Sc(i.address),w.Ab(3),w.sc("ngForOf",i.cashiers)}}function Ce(e,t){if(1&e&&(w.Wb(0,"div",15),w.Wb(1,"table",16),w.Wb(2,"thead"),w.Wb(3,"tr"),w.Wb(4,"th",17),w.Rc(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),w.Vb(),w.Wb(6,"th",17),w.Rc(7,"\u0410\u0434\u0440\u0435\u0441"),w.Vb(),w.Wb(8,"th",17),w.Rc(9,"\u041a\u0430\u0441\u0441\u0438\u0440\u044b"),w.Vb(),w.Vb(),w.Vb(),w.Wb(10,"tbody"),w.Pc(11,ye,8,3,"tr",18),w.Vb(),w.Vb(),w.Vb()),2&e){var n=w.lc(2);w.Ab(11),w.sc("ngForOf",n.listPointsOfSell)}}function we(e,t){if(1&e&&w.Pc(0,Ce,12,1,"div",14),2&e){var n=w.lc(),i=w.Dc(24);w.sc("ngIf",n.currentStatus===n.POINT_OF_SELL_STATUSES.CASHIERS)("ngIfElse",i)}}var ke,Pe,Oe=((Pe=function(){function e(t,n,i){_classCallCheck(this,e),this.jToleService=t,this.pointsOfSellsActionService=n,this.modalService=i,this.listPointsOfSell=[],this.statuses=[{label:"\u0422\u043e\u0447\u043a\u0438 \u0438 \u043a\u0430\u0441\u0441\u0438\u0440\u044b",value:d.CASHIERS,count:0,isSelected:!0,isDisabled:!1},{label:"POS \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:d.POS,count:0,isSelected:!1,isDisabled:!1}],this.currentStatus=d.CASHIERS,this.POINT_OF_SELL_STATUSES=d,this.searchControl=new c.h(""),this.searchValue=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.checkIsReopeningSellPointsActionFormModal(),this.jToleService.connectionStateToJpay.then((function(t){if(e.connectionStateToJPay=t,!t.connectedToPay&&t.connectedToMart){var n=e.modalService.open(de,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"});n.componentInstance.action=b.ADD,n.componentInstance.alreadyShowed=t.alreadyShowed}})),this.jToleService.getListPointsOfSell().then((function(t){e.listPointsOfSell=t}))}},{key:"checkIsReopeningSellPointsActionFormModal",value:function(){this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal&&(this.modalService.open(de,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"}).componentInstance.action=this.pointsOfSellsActionService.action)}},{key:"onRowClick",value:function(e){var t=this.modalService.open(de,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"});t.componentInstance.action=b.EDIT,t.componentInstance.posId=e.id,t.componentInstance.pos=e,this.pointsOfSellsActionService.action=b.EDIT,this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal=!0}},{key:"addPointsOfSellHandler",value:function(){this.modalService.open(de,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm add-sell-points-modal modal-adaptive",centered:!0,backdrop:"static"}).componentInstance.action=b.ADD,this.pointsOfSellsActionService.action=b.ADD,this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal=!0}},{key:"onStatusSelect",value:function(e){this.currentStatus=e,this.statuses.forEach((function(t){t.isSelected=t.value===e}))}},{key:"searchHandler",value:function(e){var t=e.target;this.searchValue=t.value}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Pe)(w.Qb(W),w.Qb(R),w.Qb(i.q))},Pe.\u0275cmp=w.Kb({type:Pe,selectors:[["j-pay"]],decls:27,vars:6,consts:[[1,"wrapper"],[1,"row","add-sell-points-wrapper"],[1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","/assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],[1,"filters-wrapper"],[3,"statuses","selected"],[1,"list-page--filter","mt-2"],["clearable","true"],["jPrefix","","inlineSVG","/assets/icons/search.svg",1,"text-primary","d-block","mt-n1"],["type","text","jFormInput","","autocomplete","off",1,"form-control",3,"placeholder","formControl","change"],[4,"ngTemplateOutlet"],["posTerminal",""],["statusesContent",""],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"table","table-striped"],["scope","col"],["class","body-row",3,"click",4,"ngFor","ngForOf"],[1,"body-row",3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(w.Wb(0,"j-layout-home"),w.Wb(1,"j-aside"),w.Rb(2,"j-nav-main"),w.Vb(),w.Wb(3,"j-main"),w.Wb(4,"div",0),w.Wb(5,"h3"),w.Rc(6,"Jusan Tole"),w.Vb(),w.Wb(7,"div"),w.Wb(8,"div",1),w.Wb(9,"h5"),w.Rc(10,"\u0422\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0434\u0430\u0436"),w.Vb(),w.Wb(11,"button",2),w.ic("click",(function(e){return t.addPointsOfSellHandler()})),w.Rb(12,"span",3),w.Wb(13,"span",4),w.Rc(14,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436"),w.Vb(),w.Vb(),w.Vb(),w.Wb(15,"div",5),w.Wb(16,"j-statuses",6),w.ic("selected",(function(e){return t.onStatusSelect(e)})),w.Vb(),w.Wb(17,"div",7),w.Wb(18,"j-form-field",8),w.Rb(19,"span",9),w.Wb(20,"input",10),w.ic("change",(function(e){return t.searchHandler(e)})),w.mc(21,"translate"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Pc(22,ge,1,0,"ng-container",11),w.Vb(),w.Vb(),w.Vb(),w.Pc(23,ve,0,0,"ng-template",null,12,w.Qc),w.Pc(25,we,1,2,"ng-template",null,13,w.Qc),w.Vb()),2&e){var n=w.Dc(26);w.Ab(16),w.sc("statuses",t.statuses),w.Ab(4),w.tc("placeholder",w.nc(21,4,"FILTER.SEARCH.COUNTERPARTY")),w.sc("formControl",t.searchControl),w.Ab(2),w.sc("ngTemplateOutlet",n)}},directives:[be.a,ue.a,pe.a,fe.a,E.a,he.a,I.a,me.a,D.a,c.c,c.t,c.i,o.B,o.u,o.t],pipes:[N.d],styles:[".body-row[_ngcontent-%COMP%]:hover{cursor:pointer}ul[_ngcontent-%COMP%]{margin-left:0;padding-left:0}li[_ngcontent-%COMP%]{list-style-type:none}@media(max-width:959px){.add-sell-points-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{left:5em}}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top:none;border-bottom:#b7bec5}.wrapper[_ngcontent-%COMP%]{margin:30px 133px}.add-sell-points-wrapper[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 0 #e9ebec;border-radius:12px 12px 0 0;min-height:72px;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding:10px 20px}.filters-wrapper[_ngcontent-%COMP%]{min-height:139px;padding-top:20px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}thead[_ngcontent-%COMP%]{min-height:50px;color:#666c72;font-style:normal;font-weight:400;font-size:12px;line-height:18px}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd), tr[_ngcontent-%COMP%]{background-color:#fff}.body-row[_ngcontent-%COMP%]{color:#1a1c1f;font-style:normal;font-weight:400;font-size:14px;line-height:18px;opacity:.95}"]}),Pe),Ae=((ke=function(){function e(t){_classCallCheck(this,e),this.jToleService=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.jToleService.paymentsTotalInfo.then((function(t){e.info=t}))}}]),e}()).\u0275fac=function(e){return new(e||ke)(w.Qb(W))},ke.\u0275cmp=w.Kb({type:ke,selectors:[["j-payment-detail"]],decls:16,vars:2,consts:[[1,"container"],[1,"modal-header"],[1,"payment-detail-modal-content"],[1,"btn","download-btn-container"],["inlineSVG","/assets/icons/pdf.svg"],[1,"ml-1"]],template:function(e,t){1&e&&(w.Wb(0,"div",0),w.Rb(1,"div",1),w.Wb(2,"div",2),w.Wb(3,"div"),w.Wb(4,"p"),w.Rc(5),w.Vb(),w.Wb(6,"p"),w.Rc(7),w.Vb(),w.Wb(8,"button",3),w.Rb(9,"span",4),w.Wb(10,"span",5),w.Rc(11,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),w.Vb(),w.Vb(),w.Vb(),w.Wb(12,"div"),w.Wb(13,"div"),w.Wb(14,"h5"),w.Rc(15,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb()),2&e&&(w.Ab(5),w.Tc("",t.payment.amount," \u20b8"),w.Ab(2),w.Sc(null==t.payment?null:null==t.payment.pos?null:t.payment.pos.name))},directives:[E.a],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.payment-detail-modal-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 3rem)}.download-btn-container[_ngcontent-%COMP%]{color:#ef5630;background:#fff;border:1px solid #ef5630;box-sizing:border-box;border-radius:12px;width:100%}"]}),ke),xe=n("u+5l"),Te=n("zdqJ"),_e=n("0kjH"),Ve=n("9PaV"),We=n("dlKe");function Re(e,t){if(1&e&&(w.Wb(0,"div",6),w.Sb(1,7),w.Vb()),2&e){w.lc();var n=w.Dc(8);w.Ab(1),w.sc("ngTemplateOutlet",n)}}function Ie(e,t){1&e&&(w.Wb(0,"div"),w.Wb(1,"button",14),w.Rc(2,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c"),w.Vb(),w.Vb())}function Me(e,t){if(1&e&&(w.Wb(0,"div",8),w.Rb(1,"p",9),w.Wb(2,"p",10),w.Rc(3,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435 QR"),w.Vb(),w.Vb(),w.Wb(4,"div",11),w.Wb(5,"p",12),w.Rc(6,"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435"),w.Rb(7,"br"),w.Rc(8," \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443"),w.Rb(9,"br"),w.Rc(10," \u043d\u0430 \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e QR"),w.Rb(11,"br"),w.Rc(12," \u0441 \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0435\u0439 0,5%"),w.Vb(),w.Vb(),w.Pc(13,Ie,3,0,"div",13)),2&e){var n=w.lc();w.Ab(13),w.sc("ngIf",n.withConnectButton)}}var De,Fe=((De=function(){function e(){_classCallCheck(this,e),this.isHovered=new v.a(!1),this.withConnectButton=!1,this.withCloseButton=!1}return _createClass(e,[{key:"onMouseOver",value:function(){this.isHovered.next(!0)}},{key:"onMouseOut",value:function(){this.isHovered.next(!1)}},{key:"ngOnDestroy",value:function(){this.isHovered.complete()}}]),e}()).\u0275fac=function(e){return new(e||De)},De.\u0275cmp=w.Kb({type:De,selectors:[["j-tole-not-connected-info"]],inputs:{withConnectButton:"withConnectButton",withCloseButton:"withCloseButton"},decls:9,vars:1,consts:[[1,"wrapper","d-flex","align-content-center","align-items-center","flex-column","pl-5","pr-5"],["inlineSVG","/assets/jtole/not-connected.svg"],[1,"mt-5","info"],[1,"connection-conditions-info",3,"mouseover","mouseout"],["class","on-hovered-tip-container mt-5",4,"ngIf"],["infoAction",""],[1,"on-hovered-tip-container","mt-5"],[3,"ngTemplateOutlet"],[1,"info-action"],["inlineSVG","/assets/jtole/logo-grey.svg"],[1,"connect-title"],[1,"ml-5"],[1,"promo"],[4,"ngIf"],[1,"btn"]],template:function(e,t){1&e&&(w.Wb(0,"div",0),w.Rb(1,"span",1),w.Wb(2,"p",2),w.Rc(3,"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 QR"),w.Vb(),w.Wb(4,"p",3),w.ic("mouseover",(function(e){return t.onMouseOver()}))("mouseout",(function(e){return t.onMouseOut()})),w.Rc(5,"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"),w.Vb(),w.Pc(6,Re,2,1,"div",4),w.Vb(),w.Pc(7,Me,14,1,"ng-template",null,5,w.Qc)),2&e&&(w.Ab(6),w.sc("ngIf",t.isHovered.getValue()))},directives:[E.a,o.u,o.B],styles:[".wrapper[_ngcontent-%COMP%]{background:#fff;min-height:600px;padding-top:7em}.info[_ngcontent-%COMP%]{font-weight:400;color:#666c72}.connection-conditions-info[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{font-style:normal;font-size:15px;line-height:20px;text-align:center;letter-spacing:-.24px}.connection-conditions-info[_ngcontent-%COMP%]{font-weight:600;color:#ef5630}.connection-conditions-info[_ngcontent-%COMP%]:hover{cursor:pointer}.on-hover-tip[_ngcontent-%COMP%]{border:1px solid transparent;box-sizing:border-box;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px;background:#faf7f7}.on-hovered-tip-container[_ngcontent-%COMP%]{border:1px solid #eceef1;box-sizing:border-box;border-radius:8px;padding-top:.9em;padding-right:1em;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]}),De),je=n("h7tf");function Ee(e,t){1&e&&w.Rb(0,"j-tole-not-connected-info")}function Le(e,t){1&e&&(w.Wb(0,"h3",17),w.Rc(1,"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),w.Vb())}function Ne(e,t){if(1&e&&(w.Wb(0,"h3",17),w.Rc(1),w.mc(2,"translate"),w.Vb()),2&e){var n=w.lc();w.Ab(1),w.Sc(w.nc(2,1,n.selectedPeriodLabel))}}function Qe(e,t){if(1&e&&(w.Wb(0,"div",18),w.Wb(1,"div",19),w.Rb(2,"span",20),w.Wb(3,"span"),w.Rc(4),w.Rb(5,"br"),w.Rc(6),w.mc(7,"translate"),w.Vb(),w.Wb(8,"span",21),w.Rc(9),w.Rb(10,"br"),w.Rc(11),w.Rb(12,"br"),w.Rc(13),w.Vb(),w.Vb(),w.Wb(14,"div"),w.Wb(15,"button",22),w.Rb(16,"span",23),w.Vb(),w.Vb(),w.Vb()),2&e){var n=t.$implicit,i=w.lc();w.Ab(4),w.Tc("",n.amount," "),w.Ab(2),w.Uc("",w.nc(7,6,i.selectedPeriodLabel)," ",i.getProcessedTimePayment(n),""),w.Ab(3),w.Tc("",null==n?null:null==n.pos?null:n.pos.name," "),w.Ab(2),w.Tc("\u0410\u0434\u0440\u0435\u0441: ",null==n?null:null==n.pos?null:n.pos.address," "),w.Ab(2),w.Tc("\u041a\u0430\u0441\u0441\u0438\u0440: ",null==n?null:null==n.cashier?null:n.cashier.name,"")}}function He(e,t){if(1&e&&w.Sb(0,25),2&e){w.lc(2);var n=w.Dc(23);w.sc("ngTemplateOutlet",n)}}function Ge(e,t){if(1&e){var n=w.Xb();w.Wb(0,"j-statuses",6),w.ic("selected",(function(e){return w.Gc(n),w.lc().onFilterStatusSelect(e)})),w.Vb(),w.Pc(1,He,1,1,"ng-container",24)}if(2&e){var i=w.lc(),o=w.Dc(25);w.sc("statuses",i.filterStatuses),w.Ab(1),w.sc("ngIf",i.currentFilterStatus===i.STATEMENT_FILTER_STATUSES.QR)("ngIfElse",o)}}function Be(e,t){if(1&e&&(w.Wb(0,"div",31),w.Wb(1,"p"),w.Rc(2),w.Vb(),w.Wb(3,"p"),w.Rc(4),w.Vb(),w.Vb()),2&e){var n=t.$implicit;w.Ab(2),w.Sc(n.name),w.Ab(2),w.Sc(n.address)}}function Ue(e,t){if(1&e&&(w.Wb(0,"div",31),w.Wb(1,"p"),w.Rc(2),w.Vb(),w.Vb()),2&e){var n=t.$implicit;w.Ab(2),w.Sc(n.name)}}function ze(e,t){if(1&e&&(w.Wb(0,"div",31),w.Wb(1,"p"),w.Rc(2),w.Vb(),w.Vb()),2&e){var n=t.$implicit;w.Ab(2),w.Vc("",n.lastname," ",n.firstname[0].toUpperCase(),". ",n.middlename[0].toUpperCase(),".")}}function Je(e,t){if(1&e&&(w.Wb(0,"div",31),w.Wb(1,"p"),w.Rc(2),w.Vb(),w.Vb()),2&e){var n=t.$implicit;w.Ab(2),w.Vc("",n.lastname," ",n.firstname[0].toUpperCase(),". ",n.middlename[0].toUpperCase(),".")}}function qe(e,t){1&e&&w.Sb(0)}function Xe(e,t){if(1&e){var n=w.Xb();w.Wb(0,"j-dropdown-input",26),w.ic("selected",(function(e){return w.Gc(n),w.lc().onSelect(e)})),w.Pc(1,Be,5,2,"ng-template",null,27,w.Qc),w.Pc(3,Ue,3,1,"ng-template",null,28,w.Qc),w.Vb(),w.Wb(5,"j-dropdown-input",29),w.ic("selected",(function(e){return w.Gc(n),w.lc().onCashierSelect(e)})),w.Pc(6,ze,3,3,"ng-template",null,27,w.Qc),w.Pc(8,Je,3,3,"ng-template",null,28,w.Qc),w.Vb(),w.Pc(10,qe,1,0,"ng-container",30)}if(2&e){var i=w.lc(),o=w.Dc(27);w.sc("selectedItem",i.selectedPointOfSell)("options",i.pointsOfSellList),w.Ab(5),w.sc("options",i.cashiersByPointOfSell)("selectedItem",i.selectedCashier),w.Ab(5),w.sc("ngTemplateOutlet",o)}}function $e(e,t){1&e&&w.Sb(0)}function Ke(e,t){if(1&e&&w.Pc(0,$e,1,0,"ng-container",30),2&e){w.lc();var n=w.Dc(27);w.sc("ngTemplateOutlet",n)}}function Ye(e,t){if(1&e&&(w.Wb(0,"div",33),w.Rb(1,"input",34),w.Wb(2,"label",35),w.Rc(3),w.Vb(),w.Vb()),2&e){var n=t.$implicit,i=t.index;w.Ab(1),w.tc("id","sort"+i),w.sc("value",n.value),w.Ab(1),w.tc("for","sort"+i),w.Ab(1),w.Tc(" ",n.label," ")}}function Ze(e,t){if(1&e&&(w.Wb(0,"h5"),w.Rc(1,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),w.Vb(),w.Pc(2,Ye,4,4,"div",32)),2&e){var n=w.lc();w.Ab(2),w.sc("ngForOf",n.sortOptionList)}}var et,tt,nt,it=((et=function(){function e(t,n){_classCallCheck(this,e),this.jToleService=t,this.modalService=n,this.statuses=[{label:"\u0412\u0441\u0435",value:u.ALL,count:0,isSelected:!0,isDisabled:!1},{label:"QR",value:u.QR,count:0,isSelected:!1,isDisabled:!1},{label:"POS-\u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:u.POS,count:0,isSelected:!1,isDisabled:!1}],this.filterStatuses=[{label:"QR",value:p.QR,count:0,isSelected:!0,isDisabled:!1},{label:"POS-\u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:p.POS,count:0,isSelected:!1,isDisabled:!1}],this.sortOptionList=f,this.searchControl=new c.h(""),this.STATEMENT_FILTER_STATUSES=p,this.currentFilterStatus=p.QR,this.pointsOfSellList=[],this.cashiersByPointOfSell=[],this.paymentsList=[],this.selectedFilterPeriod={from:new Date,to:new Date},this.throttle=300,this.scrollDistance=1,this.scrollUpDistance=2,this.page=1,this.pageSize=10,this.filterForm=new c.k({status:new c.h})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.jToleService.getListPointsOfSell().then((function(t){e.pointsOfSellList=t})),this.jToleService.connectionStateToJpay.then((function(t){e.connectionState=t;var n=e.selectedFilterPeriod,i=n.from,o=n.to;e.jToleService.getStatementsList({dateTimeFrom:i,dateTimeTo:o,page:e.page,pageSize:e.pageSize}).then((function(t){e.paymentsList=t}))}))}},{key:"onStatusSelect",value:function(e){this.statuses.forEach((function(t){t.isSelected=t.value===e}))}},{key:"onFilterStatusSelect",value:function(e){var t=this;this.filterStatuses.forEach((function(n){n.value===e?(n.isSelected=!0,t.currentFilterStatus=n.value):n.isSelected=!1}))}},{key:"onSelect",value:function(e){this.selectedPointOfSell=e;var t=this.pointsOfSellList.find((function(t){return t.id===e.id})).cashiers;this.cashiersByPointOfSell=t}},{key:"onCashierSelect",value:function(e){this.selectedCashier=e}},{key:"getSelectedFilterPeriod",value:function(e){var t=this;this.selectedFilterPeriod=e,this.jToleService.getStatementsList({dateTimeFrom:e.from,dateTimeTo:e.to,page:this.page,pageSize:this.pageSize}).then((function(e){t.paymentsList=e}))}},{key:"getStatementList",value:function(){var e=this,t=this.selectedFilterPeriod,n=t.from,i=t.to;this.jToleService.getStatementsList({dateTimeFrom:n,dateTimeTo:i,page:this.page,pageSize:this.pageSize}).then((function(t){e.paymentsList=t}))}},{key:"onScrollDown",value:function(){this.page++,this.getStatementList()}},{key:"onScrollUp",value:function(){this.page--,this.getStatementList()}},{key:"getSelectedPeriodLabel",value:function(e){this.selectedPeriodLabel=e}},{key:"getProcessedTimePayment",value:function(e){return C()(e.processed).format("HH:mm")}},{key:"getClickedPayment",value:function(e){this.modalService.open(Ae,{backdrop:"static",centered:!0,backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm modal-adaptive"}).componentInstance.payment=e}}]),e}()).\u0275fac=function(e){return new(e||et)(w.Qb(W),w.Qb(i.q))},et.\u0275cmp=w.Kb({type:et,selectors:[["j-payments"]],decls:28,vars:12,consts:[[1,"mr-5","ml-5","mt-5","mb-5","payments-container"],[1,"d-flex","justify-content-between","align-items-center","pr-5","pl-5","header-container"],[1,"filter-groups"],["jTour","STATEMENTS_ACCOUNT.FILTER","jTourPosition","left",1,"filter-group","d-none","d-sm-inline-block",3,"selectedPeriodLabel","submitted"],["jTour","STATEMENT.DOWNLOAD","jTourPosition","bottom",1,"filter-group"],[1,"filters-container","p-5"],[3,"statuses","selected"],[3,"customFilterSearchExtraContent","isOnFocusDisabled"],[1,"payments-container"],[4,"ngIf"],["class","pl-5 pt-2",4,"ngIf"],["infiniteScroll","",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled","scrolledUp"],["class","payments-item d-flex flex-wrap justify-content-between",4,"ngFor","ngForOf"],["customFilterSearchExtraContent",""],["qrFilterContent",""],["posFilterContent",""],["sortTypes",""],[1,"pl-5","pt-2"],[1,"payments-item","d-flex","flex-wrap","justify-content-between"],[1,"payments-item-inner"],["inlineSVG","/assets/jtole/statement-status.svg"],[1,"d-inline-block","ml-4"],[1,"btn"],["inlineSVG","/assets/jtole/save-pdf.svg",1,"save-btn-icon"],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["label","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u043e\u0447\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0436",3,"selectedItem","options","selected"],["optionTemplate",""],["selectedTemplate",""],["label","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0441\u0441\u0438\u0440\u0443",3,"options","selectedItem","selected"],[4,"ngTemplateOutlet"],[1,"option-template-container","d-flex","flex-column"],["class","custom-control custom-radio my-3",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio","my-3"],["type","radio","name","sortBy",1,"custom-control-input",3,"id","value"],[1,"custom-control-label","text-muted",3,"for"]],template:function(e,t){if(1&e&&(w.Wb(0,"j-layout-home"),w.Wb(1,"j-aside"),w.Rb(2,"j-nav-main"),w.Vb(),w.Wb(3,"j-main"),w.Wb(4,"div",0),w.Wb(5,"div",1),w.Wb(6,"h3"),w.Rc(7,"\u0412\u044b\u043f\u0438\u0441\u043a\u0430"),w.Vb(),w.Wb(8,"div",2),w.Wb(9,"j-filter-period-dropdown",3),w.ic("selectedPeriodLabel",(function(e){return t.getSelectedPeriodLabel(e)}))("submitted",(function(e){return t.getSelectedFilterPeriod(e)})),w.Vb(),w.Rb(10,"j-filter-download",4),w.Vb(),w.Vb(),w.Wb(11,"div",5),w.Wb(12,"j-statuses",6),w.ic("selected",(function(e){return t.onStatusSelect(e)})),w.Vb(),w.Rb(13,"j-filter-search",7),w.Vb(),w.Wb(14,"div",8),w.Pc(15,Ee,1,0,"j-tole-not-connected-info",9),w.Pc(16,Le,2,0,"h3",10),w.Pc(17,Ne,3,3,"h3",10),w.Wb(18,"div",11),w.ic("scrolled",(function(e){return t.onScrollDown()}))("scrolledUp",(function(e){return t.onScrollUp()})),w.Pc(19,Qe,17,8,"div",12),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Pc(20,Ge,2,3,"ng-template",null,13,w.Qc),w.Pc(22,Xe,11,5,"ng-template",null,14,w.Qc),w.Pc(24,Ke,1,1,"ng-template",null,15,w.Qc),w.Pc(26,Ze,3,1,"ng-template",null,16,w.Qc)),2&e){var n=w.Dc(21);w.Ab(12),w.sc("statuses",t.statuses),w.Ab(1),w.sc("customFilterSearchExtraContent",n)("isOnFocusDisabled",!0),w.Ab(2),w.sc("ngIf",t.connectionState&&!t.connectionState.connectedToPay),w.Ab(1),w.sc("ngIf",!t.selectedPeriodLabel&&(null==t.connectionState?null:t.connectionState.connectedToPay)),w.Ab(1),w.sc("ngIf",null==t.connectionState?null:t.connectionState.connectedToPay),w.Ab(1),w.sc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollUpDistance",20)("infiniteScrollThrottle",1e3),w.Ab(1),w.sc("ngForOf",t.paymentsList)}},directives:[be.a,ue.a,pe.a,fe.a,xe.a,Te.a,_e.a,he.a,Ve.a,o.u,We.a,o.t,Fe,E.a,o.B,je.a],pipes:[N.d],styles:[".header-container[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 0 #e9ebec;border-radius:12px 12px 0 0;height:75px}.filters-container[_ngcontent-%COMP%]{background:#f6f7f8}.payments-list[_ngcontent-%COMP%]{background:#fff}.payments-container[_ngcontent-%COMP%]{box-shadow:0 4px 8px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 0 1px rgba(0,0,0,.04);border-radius:12px;background:#fff}.payments-item[_ngcontent-%COMP%]{margin-right:.5em}.payments-item[_ngcontent-%COMP%]:hover{cursor:pointer}.payments-item-inner[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;padding-left:1rem;gap:1rem}.save-btn-icon[_ngcontent-%COMP%]{position:absolute}.option-template-container[_ngcontent-%COMP%]{height:56px;margin-bottom:10px}.download-btn[_ngcontent-%COMP%]{text-align:end}"]}),et),ot=n("iNf4"),ct=[{path:"",children:[{path:"payments",component:it},{path:"action",component:de},{path:"pos",component:Oe},{path:"map",component:(tt=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.pointsOfSellsActionService=n}return _createClass(e,[{key:"onApplyClick",value:function(e){this.pointsOfSellsActionService.sellPointsActionForm.patchValue({address:e}),this.router.navigate(["jtole/pos"])}}]),e}(),tt.\u0275fac=function(e){return new(e||tt)(w.Qb(l.c),w.Qb(R))},tt.\u0275cmp=w.Kb({type:tt,selectors:[["j-tole-yandex-maps"]],decls:1,vars:0,consts:[[3,"applyClickFn"]],template:function(e,t){1&e&&(w.Wb(0,"j-yandex-maps",0),w.ic("applyClickFn",(function(e){return t.onApplyClick(e)})),w.Vb())},directives:[ot.a],styles:[""]}),tt)}]}],st=((nt=function e(){_classCallCheck(this,e)}).\u0275mod=w.Ob({type:nt}),nt.\u0275inj=w.Nb({factory:function(e){return new(e||nt)},imports:[[l.g.forChild(ct)],l.g]}),nt),at=n("M4UK"),lt=n("PCNd"),rt=n("crCf"),dt=n("qAFH"),bt=n("tmjD"),ut=n("xJkR"),pt=n("JJIx"),ft=n("mQSa"),ht=n("ObZ0");n.d(t,"JToleModule",(function(){return gt}));var mt,gt=((mt=function e(){_classCallCheck(this,e)}).\u0275mod=w.Ob({type:mt}),mt.\u0275inj=w.Nb({factory:function(e){return new(e||mt)},providers:[i.a],imports:[[o.c,c.n,c.D,st,s.a,at.a,lt.a,a.a,rt.a,dt.CardsModule,bt.c.forChild(),i.s,We.b,ut.b,pt.a,ft.a,ht.a]]}),mt)}}]);