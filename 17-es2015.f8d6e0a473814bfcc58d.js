(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"9u+z":function(t,e,n){"use strict";n.r(e);var s=n("ofXK"),i=n("3Pt+"),a=n("dlKe"),c=n("PCNd"),r=n("crCf"),o=n("5cNS"),l=n("tyNb"),u=n("fXoL"),d=n("paXB"),b=n("7/bn"),h=n("oMXN"),m=n("EiG8"),S=n("aZ8m");let p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Kb({type:t,selectors:[["j-history"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"]],template:function(t,e){1&t&&(u.Wb(0,"j-layout-home"),u.Wb(1,"j-aside"),u.Rb(2,"j-nav-main"),u.Vb(),u.Wb(3,"j-main"),u.Wb(4,"section",0),u.Wb(5,"section",1),u.Rb(6,"j-header"),u.Rb(7,"router-outlet"),u.Vb(),u.Vb(),u.Vb(),u.Vb())},directives:[d.a,b.a,h.a,m.a,S.a,l.h],styles:[""]}),t})();var g=n("mrSG"),f=n("quSY"),T=n("itXk"),v=n("lJxs"),y=n("IzEk"),I=n("9N4E"),O=n("y5b2"),E=n("TwVa"),R=n("+/Tu"),A=n("1kSV"),C=n("sYmb"),F=n("e8Ap");let L=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}get failedText(){switch(this.failedCount%20){case 1:return"HISTORY.DELETE.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.DELETE.FAILED.FEW";default:return"HISTORY.DELETE.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.failedCount}}get successText(){switch(this.successCount%10){case 1:return"HISTORY.DELETE.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.DELETE.SUCCESS.FEW";default:return"HISTORY.DELETE.SUCCESS.OTHER"}}get successParams(){return{transactionsCount:this.successCount}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-partial"]],inputs:{failedCount:"failedCount",successCount:"successCount"},decls:17,vars:15,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.DELETE.PARTIAL"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Rb(11,"p",7),u.nc(12,"translate"),u.Vb(),u.Wb(13,"div",8),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,7,"HISTORY.DELETE.PARTIAL")),u.Ab(4),u.tc("innerHTML",u.pc(10,9,e.successText,e.successParams),u.Ic),u.Ab(2),u.tc("innerHTML",u.pc(12,12,e.failedText,e.failedParams),u.Ic),u.Ab(5),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,F.a],pipes:[C.d],styles:[""]}),t})(),V=(()=>{class t extends L{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-error"]],features:[u.xb],decls:17,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.DELETE.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.closeModal()})),u.Sc(13," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.DELETE.FAILED.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,8,e.failedText,e.failedParams),u.Ic),u.Ab(7),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,F.a],pipes:[C.d],styles:[""]}),t})(),_=(()=>{class t extends L{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-success"]],features:[u.xb],decls:15,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","./assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.DELETE.SUCCESS.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(13," HISTORY.BACK_TO_HISTORY "),u.Rb(14,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.DELETE.SUCCESS.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,8,e.successText,e.successParams),u.Ic),u.Ab(5),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,F.a],pipes:[C.d],styles:[""]}),t})();function D(t,e){1&t&&(u.Wb(0,"span"),u.Sc(1,", "),u.Vb())}function H(t,e){if(1&t&&(u.Wb(0,"span"),u.Sc(1),u.Qc(2,D,2,0,"span",12),u.Vb()),2&t){const t=e.$implicit,s=e.index,i=u.mc().$implicit;var n;const a=s<(null==(n=u.mc().retrieveErrors(i.errorData))?null:n.length)-1;u.Ab(1),u.Uc(" ",t,""),u.Ab(1),u.tc("ngIf",a)}}function N(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Sc(2),u.Vb(),u.Qc(3,H,3,2,"span",11),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(2),u.Uc("\u2116",t.documentNumber,": "),u.Ab(1),u.tc("ngForOf",n.retrieveErrors(t.errorData))}}let W=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){return Object.entries(t).map(t=>t[1])}get failedText(){switch(this.signResult&&this.signResult.numberOfFailed%20){case 1:return"HISTORY.PARTIAL.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.FAILED.FEW";default:return"HISTORY.PARTIAL.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.signResult&&this.signResult.numberOfFailed}}get failedTransactions(){return this.signResult&&this.signResult.results}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-partial-error"]],inputs:{signResult:"signResult"},decls:17,vars:12,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Wb(11,"button",7),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",8),u.Vb(),u.Vb(),u.Wb(14,"div",9),u.Rb(15,"h5",10),u.Qc(16,N,4,2,"div",11),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,7,"HISTORY.FAILED.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,9,e.failedText,e.failedParams),u.Ic),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"),u.Ab(3),u.tc("ngForOf",e.failedTransactions))},directives:[C.a,F.a,s.t,s.u],pipes:[C.d],styles:[""]}),t})();var k=n("Kx/q");function P(t,e){if(1&t&&(u.Wb(0,"div",16),u.Sc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",17),u.Vb(),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(1),u.Vc(" ",t.count," ",u.oc(2,3,u.oc(3,5,n.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.tc("money",t.money)}}function M(t,e){1&t&&(u.Wb(0,"span"),u.Sc(1,", "),u.Vb())}function x(t,e){if(1&t&&(u.Wb(0,"span"),u.Sc(1),u.Qc(2,M,2,0,"span",18),u.Vb()),2&t){const t=e.$implicit,s=e.index,i=u.mc().$implicit;var n;const a=s<(null==(n=u.mc().retrieveErrors(i.errorData))?null:n.length)-1;u.Ab(1),u.Uc(" ",t,""),u.Ab(1),u.tc("ngIf",a)}}function j(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Sc(2),u.Vb(),u.Qc(3,x,3,2,"span",15),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(2),u.Uc("\u2116",t.documentNumber,": "),u.Ab(1),u.tc("ngForOf",n.retrieveErrors(t.errorData))}}let w=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){return Object.entries(t).map(t=>t[1])}get successText(){switch(this.result&&this.result.numberOfSuccess%10){case 1:return"HISTORY.PARTIAL.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.SUCCESS.FEW";default:return"HISTORY.PARTIAL.SUCCESS.OTHER"}}get totalBalance(){return this.result&&this.result.totalBalance}get successCount(){return this.result&&this.result.numberOfSuccess}get totalCount(){return this.result&&this.result.results.length}get successParams(){return{transactionsCount:this.successCount}}get failedText(){switch(this.result&&this.result.numberOfFailed%10){case 1:return"HISTORY.PARTIAL.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.FAILED.FEW";default:return"HISTORY.PARTIAL.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.result&&this.result.numberOfFailed}}get failedTransactions(){return this.result&&this.result.results&&this.result.results.filter(t=>t.status===E.b.FAILED)}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";case 2:case 3:case 4:return"HISTORY.OPERATION.FEW";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{const n=e.result.amount;t[n.currency]?(t[n.currency].money.amount+=n.amount,t[n.currency].count++):t[n.currency]={money:{currency:n.currency,amount:n.amount},count:1}}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-partial-success"]],inputs:{result:"result"},decls:26,vars:19,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted"],["translate",""],["class","result-group",4,"ngFor","ngForOf"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[1,"result-group"],[3,"money"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.PARTIAL.TITLE"),u.Vb(),u.Wb(9,"p",6),u.Wb(10,"span",7),u.Sc(11,"HISTORY.OPERATION.FEW"),u.Vb(),u.Sc(12,": "),u.Wb(13,"strong"),u.Sc(14),u.Vb(),u.Vb(),u.Qc(15,P,6,7,"div",8),u.Rb(16,"p",9),u.nc(17,"translate"),u.Rb(18,"p",10),u.nc(19,"translate"),u.Wb(20,"button",11),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(21," HISTORY.BACK_TO_HISTORY "),u.Rb(22,"span",12),u.Vb(),u.Vb(),u.Wb(23,"div",13),u.Rb(24,"h4",14),u.Qc(25,j,4,2,"div",15),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,9,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,11,"HISTORY.PARTIAL.TITLE")),u.Ab(9),u.Vc("",e.successCount,"/",e.totalCount,""),u.Ab(1),u.tc("ngForOf",e.groups),u.Ab(1),u.tc("innerHTML",u.pc(17,13,e.successText,e.successParams),u.Ic),u.Ab(2),u.tc("innerHTML",u.pc(19,16,e.failedText,e.failedParams),u.Ic),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"),u.Ab(3),u.tc("ngForOf",e.failedTransactions))},directives:[C.a,s.t,F.a,k.a,s.u],pipes:[C.d,s.q],styles:[""]}),t})();function Y(t,e){if(1&t&&(u.Wb(0,"p",13),u.Sc(1),u.Vb()),2&t){const t=u.mc();u.Ab(1),u.Uc(" ",t.errorText," ")}}let G=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-error"]],inputs:{errorText:"errorText"},decls:19,vars:8,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted"],["translate",""],["class","mt-3 mb-0 text-danger",4,"ngIf"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"mt-3","mb-0","text-danger"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Wb(9,"p",6),u.Wb(10,"span",7),u.Sc(11,"HISTORY.FAILED.DESCRIPTION"),u.Vb(),u.Vb(),u.Qc(12,Y,2,1,"p",8),u.Vb(),u.Wb(13,"div",9),u.Wb(14,"button",10),u.ic("click",(function(t){return e.closeModal()})),u.Sc(15," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(16,"button",11),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(17," HISTORY.BACK_TO_HISTORY "),u.Rb(18,"span",12),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.FAILED.TITLE")),u.Ab(7),u.tc("ngIf",e.errorText),u.Ab(6),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,s.u,F.a],pipes:[C.d],styles:[""]}),t})();function B(t,e){if(1&t&&(u.Wb(0,"div",10),u.Sc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",11),u.Vb(),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(1),u.Vc(" ",t.count," ",u.oc(2,3,u.oc(3,5,n.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.tc("money",t.money)}}let Q=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";case 2:case 3:case 4:return"HISTORY.OPERATION.FEW";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{const n=e.result.amount;t[n.currency]?(t[n.currency].money.amount+=n.amount,t[n.currency].count++):t[n.currency]={money:{currency:n.currency,amount:n.amount},count:1}}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-success"]],inputs:{result:"result"},decls:14,vars:8,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","./assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["class","result-group",4,"ngFor","ngForOf"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"result-group"],[3,"money"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.SIGNED"),u.Vb(),u.Qc(9,B,6,7,"div",6),u.Vb(),u.Wb(10,"div",7),u.Wb(11,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.SIGNED")),u.Ab(4),u.tc("ngForOf",e.groups),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,s.t,F.a,k.a],pipes:[C.d,s.q],styles:[""]}),t})();function U(t,e){1&t&&(u.Wb(0,"span"),u.Sc(1,", "),u.Vb())}function K(t,e){if(1&t&&(u.Wb(0,"span"),u.Sc(1),u.Qc(2,U,2,0,"span",13),u.Vb()),2&t){const t=e.$implicit,s=e.index,i=u.mc().$implicit;var n;const a=s<(null==(n=u.mc().retrieveErrors(i.errorData))?null:n.length)-1;u.Ab(1),u.Uc(" ",t,""),u.Ab(1),u.tc("ngIf",a)}}function $(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Sc(2),u.Vb(),u.Qc(3,K,3,2,"span",12),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(2),u.Uc("\u2116",t.documentNumber,": "),u.Ab(1),u.tc("ngForOf",n.retrieveErrors(t.errorData))}}let X=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){return Object.entries(t).map(t=>t[1])}get failedCount(){var t;return(null===(t=this.signResult)||void 0===t?void 0:t.numberOfFailed)||0}get successCount(){var t;return(null===(t=this.signResult)||void 0===t?void 0:t.numberOfSuccess)||0}get failedText(){switch(this.failedCount%20){case 1:return"HISTORY.SEND_TO_SIGNED.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.SEND_TO_SIGNED.FAILED.FEW";default:return"HISTORY.SEND_TO_SIGNED.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.failedCount}}get failedTransactions(){return this.signResult&&this.signResult.results&&this.signResult.results.filter(t=>t.status===E.b.FAILED)}get successText(){switch(this.successCount%10){case 1:return"HISTORY.SEND_TO_SIGNED.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.SEND_TO_SIGNED.SUCCESS.FEW";default:return"HISTORY.SEND_TO_SIGNED.SUCCESS.OTHER"}}get successParams(){return{transactionsCount:this.successCount}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-partial"]],inputs:{signResult:"signResult"},decls:19,vars:16,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.SEND_TO_SIGNED.PARTIAL"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Rb(11,"p",7),u.nc(12,"translate"),u.Wb(13,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(14," HISTORY.BACK_TO_HISTORY "),u.Rb(15,"span",9),u.Vb(),u.Vb(),u.Wb(16,"div",10),u.Rb(17,"h4",11),u.Qc(18,$,4,2,"div",12),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,6,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,8,"HISTORY.SEND_TO_SIGNED.PARTIAL")),u.Ab(4),u.tc("innerHTML",u.pc(10,10,e.successText,e.successParams),u.Ic),u.Ab(2),u.tc("innerHTML",u.pc(12,13,e.failedText,e.failedParams),u.Ic),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"),u.Ab(3),u.tc("ngForOf",e.failedTransactions))},directives:[C.a,F.a,s.t,s.u],pipes:[C.d],styles:[""]}),t})(),z=(()=>{class t extends X{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-success"]],features:[u.xb],decls:15,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","./assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.SEND_TO_SIGNED.SUCCESS.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(13," HISTORY.BACK_TO_HISTORY "),u.Rb(14,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.SEND_TO_SIGNED.SUCCESS.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,8,e.successText,e.successParams),u.Ic),u.Ab(5),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,F.a],pipes:[C.d],styles:[""]}),t})(),J=(()=>{class t extends X{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-error"]],features:[u.xb],decls:17,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.SEND_TO_SIGNED.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.closeModal()})),u.Sc(13," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,6,"HISTORY.SEND_TO_SIGNED.FAILED.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,8,e.failedText,e.failedParams),u.Ic),u.Ab(7),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"))},directives:[C.a,F.a],pipes:[C.d],styles:[""]}),t})();function q(t,e){1&t&&(u.Wb(0,"span"),u.Sc(1,", "),u.Vb())}function Z(t,e){if(1&t&&(u.Wb(0,"span"),u.Sc(1),u.Qc(2,q,2,0,"span",12),u.Vb()),2&t){const t=e.$implicit,s=e.index,i=u.mc().$implicit;var n;const a=s<(null==(n=u.mc().retrieveErrors(i.errorData))?null:n.length)-1;u.Ab(1),u.Uc(" ",t,""),u.Ab(1),u.tc("ngIf",a)}}function tt(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Sc(2),u.Vb(),u.Qc(3,Z,3,2,"span",11),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(2),u.Uc("\u2116",t.documentNumber,": "),u.Ab(1),u.tc("ngForOf",n.retrieveErrors(t.errorData))}}let et=(()=>{class t extends X{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-partial-error"]],features:[u.xb],decls:17,vars:12,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Sc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Wb(11,"button",7),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",8),u.Vb(),u.Vb(),u.Wb(14,"div",9),u.Rb(15,"h5",10),u.Qc(16,tt,4,2,"div",11),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.uc("alt",u.oc(6,7,"HISTORY.FAILED.TITLE")),u.Ab(4),u.tc("innerHTML",u.pc(10,9,e.failedText,e.failedParams),u.Ic),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"),u.Ab(3),u.tc("ngForOf",e.failedTransactions))},directives:[C.a,F.a,s.t,s.u],pipes:[C.d],styles:[""]}),t})();function nt(t,e){1&t&&(u.Rb(0,"img",14),u.nc(1,"translate")),2&t&&u.uc("alt",u.oc(1,1,"HISTORY.VALIDATION.ERROR"))}function st(t,e){1&t&&(u.Rb(0,"img",15),u.nc(1,"translate")),2&t&&u.uc("alt",u.oc(1,1,"HISTORY.VALIDATION.ERROR"))}function it(t,e){if(1&t&&(u.Wb(0,"p",16),u.Wb(1,"span",17),u.Sc(2,"HISTORY.OPERATION.FEW"),u.Vb(),u.Sc(3,": "),u.Wb(4,"strong"),u.Sc(5),u.Vb(),u.Vb()),2&t){const t=u.mc();u.Ab(5),u.Vc("",t.successCount,"/",t.totalCount,"")}}function at(t,e){if(1&t&&(u.Wb(0,"div",18),u.Sc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",19),u.Vb(),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(1),u.Vc(" ",t.count," ",u.oc(2,3,u.oc(3,5,n.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.tc("money",t.money)}}function ct(t,e){1&t&&(u.Wb(0,"span"),u.Sc(1,", "),u.Vb())}function rt(t,e){if(1&t&&(u.Wb(0,"span"),u.Sc(1),u.Qc(2,ct,2,0,"span",20),u.Vb()),2&t){const t=e.$implicit,s=e.index,i=u.mc().$implicit;var n;const a=s<(null==(n=u.mc().retrieveErrors(i.errorData))?null:n.length)-1;u.Ab(1),u.Uc(" ",t,""),u.Ab(1),u.tc("ngIf",a)}}function ot(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Sc(2),u.Vb(),u.Qc(3,rt,3,2,"span",13),u.Vb()),2&t){const t=e.$implicit,n=u.mc();u.Ab(2),u.Uc("\u2116",t.documentNumber,": "),u.Ab(1),u.tc("ngForOf",n.retrieveErrors(t.errorData))}}let lt=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){return Object.entries(t).map(t=>t[1])}get totalBalance(){return this.result&&this.result.totalBalance}get successCount(){return this.result&&this.result.numberOfSuccess}get totalCount(){return this.result&&this.result.results.length}get successParams(){return{transactionsCount:this.successCount}}get failedText(){if(!this.result)return"HISTORY.VALIDATION.ERROR";switch(this.result&&this.result.numberOfFailed%10){case 1:return"HISTORY.VALIDATION.ONE";case 2:case 3:case 4:return"HISTORY.VALIDATION.FEW";default:return"HISTORY.VALIDATION.OTHER"}}get failedParams(){return{transactionsCount:this.result&&this.result.numberOfFailed}}get failedTransactions(){return this.result&&this.result.results&&this.result.results.filter(t=>t.status===E.b.FAILED)}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{var n;const s=null===(n=e.result)||void 0===n?void 0:n.amount;s&&(t[s.currency]?(t[s.currency].money.amount+=s.amount,t[s.currency].count++):t[s.currency]={money:{currency:s.currency,amount:s.amount},count:1})}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(A.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-validation-error"]],inputs:{result:"result"},decls:17,vars:13,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","./assets/img/history/modals/partial.svg",3,"alt",4,"ngIf"],["src","./assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["class","m-0 text-muted",4,"ngIf"],["class","result-group",4,"ngFor","ngForOf"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],["src","./assets/img/history/modals/partial.svg",3,"alt"],["src","./assets/img/history/modals/error.svg",3,"alt"],[1,"m-0","text-muted"],["translate",""],[1,"result-group"],[3,"money"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Qc(5,nt,2,3,"img",4),u.Qc(6,st,2,3,"img",5),u.Qc(7,it,6,2,"p",6),u.Qc(8,at,6,7,"div",7),u.Rb(9,"p",8),u.nc(10,"translate"),u.Wb(11,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Sc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",10),u.Vb(),u.Vb(),u.Wb(14,"div",11),u.Rb(15,"h4",12),u.Qc(16,ot,4,2,"div",13),u.Vb()),2&t&&(u.Ab(2),u.uc("alt",u.oc(3,8,"SHARED.CLOSE")),u.Ab(3),u.tc("ngIf",e.successCount>0),u.Ab(1),u.tc("ngIf",0===e.successCount),u.Ab(1),u.tc("ngIf",e.totalCount&&e.successCount),u.Ab(1),u.tc("ngForOf",e.groups),u.Ab(1),u.tc("innerHTML",u.pc(10,10,e.failedText,e.failedParams),u.Ic),u.Ab(4),u.tc("inlineSVG","./assets/icons/shared/arrow-right.svg"),u.Ab(3),u.tc("ngForOf",e.failedTransactions))},directives:[s.u,s.t,C.a,F.a,k.a],pipes:[C.d,s.q],styles:[""]}),t})();var ut=n("tk/3"),dt=n("p6Hd"),bt=n("KWy3"),ht=n("YMfE"),mt=n("Kd2e"),St=n("rEgK"),pt=n("VnnJ"),gt=n("jZlK"),ft=n("mR7B"),Tt=n("7rOj");let vt=(()=>{class t{constructor(t,e,n,s,i,a,c,r){this.statementService=t,this.companyService=e,this.api=n,this.translateService=s,this.filterService=i,this.maskedService=a,this.curSymbolPipe=c,this.featureFlagsService=r,this.loadFeatureFlags()}loadFeatureFlags(){return Object(g.a)(this,void 0,void 0,(function*(){this.featureFlags=yield this.featureFlagsService.featureFlags$.toPromise()}))}getTransactionGroup(t=E.g.DOMESTIC,e,n=1,s=50){return Object(g.a)(this,void 0,void 0,(function*(){if(this.cashedCategory===t&&this.cashedTransactionGroup&&this.cashedFilter===e&&this.cashedPageNumber===n&&this.cashedPageSize===s)return this.cashedTransactionGroup;const i=this.cashedFilter===e&&n>this.cashedPageNumber;this.featureFlags||(yield this.loadFeatureFlags());try{const a=yield this.getHistoryList(t,e,n,s);this.cashedCategory=t,this.cashedFilter=e,this.cashedPageNumber=n,this.cashedPageSize=s;const c=this.mapHistoryPayments(a.body);let r=i?this.cashedTransactionGroup.transactions.concat(c):c;return e.paymentStatus===O.c.FOR_SIGN&&(r=r.sort(this.compareBySignature),r=r.sort(this.compareByDate)),e.paymentStatus===O.c.FAILED&&this.markFailedAsRead(),this.cashedTransactionGroup={title:this.generateGroupTitle(e.paymentStatus),creditSum:null,debitSum:this.getTotalAmount(r),hasLargeTransactions:this.statementService.checkListForLargeTransactions(r),transactionsCount:r.length,transactions:r},this.cashedTransactionGroup}catch(a){throw a}}))}getHistoryList(t,e,n=1,s=50){return Object(g.a)(this,void 0,void 0,(function*(){const i=`companies/${this.companyService.currentId}/payments`,a=new ut.g;let c=new ut.h;return c=this.appendCategoryParams(t,c),c=c.append("page",`${n}`),c=c.append("pageSize",`${s}`),c=this.appendFilterParams(e,c),this.api.get(i,a,c,{observe:"response"})}))}sendMultipleTransactionsForSign(t){const e=`companies/${this.companyService.currentId}/payments:to-created`;let n=new ut.h;return t.forEach(t=>{n=n.append("paymentId",t)}),this.api.patch(e,null,null,n)}validateTransactionsByPaymentId(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/payments/signatures/validate`;let s=new ut.h;return e.forEach(t=>{s=s.append("paymentId",t)}),this.api.post(n,s)}))}signMultipleTransactions(t,e,n){return Object(g.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/payments/signatures`;let i=new ut.g;i=i.set(e.type===E.p.OTP?dt.c.OTP:dt.c.PHONE,e.signature);let a=new ut.h;return n.forEach(t=>{a=a.append("paymentId",t)}),this.api.post(s,null,i,a)}))}deleteTransaction(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/payments`,s=new ut.g;let i=(new ut.h).set("id",e.id);return this.api.delete(n,s,i)}))}revokePayment(t,e){return Object(g.a)(this,void 0,void 0,(function*(){return this.api.patch(`companies/${t}/payments/${e.paymentId}:to-revoked`)}))}deleteMultipleTransactions(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/payments`,s=new ut.g;let i=new ut.h;return e.forEach(t=>{i=i.append("id",t.id)}),this.api.delete(n,s,i)}))}isRemovable(t){return t.status.code===E.h.CREATED||t.status.code===E.h.DRAFT}isEditable(t){return!(t.type===E.i.CONVERSION&&t.status.code!==E.h.CREATED||t.status.code!==E.h.DRAFT&&t.status.code!==E.h.CREATED)}isRevokable(t){return t.status.code===E.h.READY_TO_SEND}getSignsCountText(t){return`${t.signatures&&t.signatures.length||0}/${this.companyService.isMultipleSignScheme(t.signatureScheme)?2:1}`}appendCategoryParams(t,e){switch(t){case E.g.ALL:e=(e=(e=e.append("category",E.g.DOMESTIC)).append("category",E.g.FOREIGN)).append("category",E.g.CONVERSION);break;default:e=e.append("category",t)}return e}appendFilterParams(t,e){switch(e=this.appendStatusToParams(t.paymentStatus,e),t.documentNumber&&(e=e.append("documentNumber",t.documentNumber)),t.periodFrom&&(e=e.append("dateFrom",Object(ht.convertDateToApiFormat)(t.periodFrom))),t.periodTo&&(e=e.append("dateTo",Object(ht.convertDateToApiFormat)(t.periodTo))),t.amountFrom&&(e=e.append("amountFrom",`${t.amountFrom}`)),t.amountTo&&(e=e.append("amountTo",`${t.amountTo}`)),t.recipientIban&&(e=e.append("correspondentAccount",t.recipientIban)),t.recipientBin&&(e=e.append("correspondentBin",t.recipientBin)),t.sortBy){case O.e.AMOUNT_ASC:e=e.append("sortBy","AMOUNT");break;case O.e.AMOUNT_DESC:e=e.append("sortBy","-AMOUNT")}return e}appendStatusToParams(t,e){switch(t){case O.c.ALL:e=(e=(e=(e=(e=(e=(e=(e=e.append("status",E.h.DRAFT)).append("status",E.h.CREATED)).append("status",E.h.REJECTED)).append("status",E.h.BANK_COMPLETED)).append("status",E.h.BANK_PROCESSING)).append("status",E.h.BANK_SENT)).append("status",E.h.READY_TO_SEND)).append("status",E.h.IN_BANK);break;case O.c.DRAFT:e=e.append("status",E.h.DRAFT);break;case O.c.FOR_SIGN:e=e.append("status",E.h.CREATED);break;case O.c.FAILED:e=e.append("status",E.h.REJECTED);break;case O.c.SUCCESS:e=e.append("status",E.h.BANK_COMPLETED);break;case O.c.IN_PROGRESS:e=(e=(e=(e=e.append("status",E.h.BANK_PROCESSING)).append("status",E.h.BANK_SENT)).append("status",E.h.READY_TO_SEND)).append("status",E.h.IN_BANK)}return e}compareByDate(t,e){return t.paymentStatus.timestamp<e.paymentStatus.timestamp?1:t.paymentStatus.timestamp>e.paymentStatus.timestamp?-1:0}updateForSignCount(t=null,e){var n;return Object(g.a)(this,void 0,void 0,(function*(){if(this.filterService.updateForSignCount(null),!t){const n=yield this.retrivePaymentsByStatus(O.c.FOR_SIGN,e);t=n.payments}let s=0,i=0;null===(n=t)||void 0===n||n.forEach(t=>{var e;this.companyService.isSignable(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length)?s++:i++}),0==s&&0==i?this.filterService.updateForSignCount(0):s>0?this.filterService.updateForSignCount(s,!0):this.filterService.updateForSignCount(i)}))}retrivePaymentsByStatus(t,e){return Object(g.a)(this,void 0,void 0,(function*(){let n=0,s=null;const i=`companies/${this.companyService.currentId}/payments`,a=new ut.g;let c=new ut.h;c=this.appendStatusToParams(t,c),c=this.appendCategoryParams(e,c),c=c.append("pageSize","100000");try{const t=yield this.api.get(i,a,c,{observe:"response"});s=t.body,n=+t.headers.get("X-Total-Count")}catch(r){}finally{return{payments:s,count:n}}}))}updateStatusCounts(t){this.updateForSignCount(null,t),this.updateCountsByBadges(t)}isSignable(t){var e;const n=this.companyService.isSignable(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length);return t.status.code===E.h.DRAFT?n&&this.isCorrectlyFullfilled(t):n}isSignableByOthers(t){var e;return this.companyService.isSignableByOthers(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length)}isSendableForSign(t){const e=this.isSignableByOthers(t),n=this.companyService.isSendableForSign(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority);return!e&&n}isCorrectlyFullfilled(t){return!0}markFailedAsRead(){return Object(g.a)(this,void 0,void 0,(function*(){const t=`companies/${this.companyService.currentId}/payments/badges:mark-read-rejected`;try{yield this.api.put(t)}catch(e){}finally{this.filterService.updateFailedCount(0)}}))}updateCountsByBadges(t){return Object(g.a)(this,void 0,void 0,(function*(){this.filterService.updateInProgressCount(null),this.filterService.updateFailedCount(null);let e=0,n=0;const s=`companies/${this.companyService.currentId}/payments/badges`;let i=new ut.h;i=this.appendCategoryParams(t,i);try{(yield this.api.get(s,null,i)).forEach(t=>{switch(t.statusCode){case E.h.READY_TO_SEND:case E.h.IN_BANK:case E.h.BANK_PROCESSING:case E.h.BANK_SENT:e+=t.count;break;case E.h.REJECTED:n+=t.count}})}catch(a){}finally{this.filterService.updateInProgressCount(e),this.filterService.updateFailedCount(n)}}))}getTotalAmount(t){let e=0,n=null;return t.forEach(t=>{t.balance&&(t.balance.currency&&!n&&(n=t.balance.currency),e+=t.balance.amount)}),{currency:n,amount:e}}mapDescription(t){var e,n,s,i,a,c,r;switch(t.type){case E.i.CONVERSION:const o=this.maskedService.getMaskedAmount(null===(e=t.details.exchangeRate)||void 0===e?void 0:e.calculatedSum),l=this.curSymbolPipe.transform(null===(n=t.details.exchangeRate)||void 0===n?void 0:n.currencyTo);let u;return u=o&&l?this.translateService.instant("CONVERSION.DESCRIPTION",{money:`${o} ${l}`,iban:t.paymentRecipient.recipientAccount.iban}):(null===(s=t.details)||void 0===s?void 0:s.description)||null,u?`${u} ${(null===(i=t.details.conversionPurpose)||void 0===i?void 0:i.description)||""}`:(null===(a=t.details.conversionPurpose)||void 0===a?void 0:a.description)?`${null===(c=t.details.conversionPurpose)||void 0===c?void 0:c.description}`:null;default:return(null===(r=t.details)||void 0===r?void 0:r.description)||null}}mapHistoryPayments(t){return t.map((t,e)=>{var n,s,i,a,c,r,o,l,u,d,b,h,m,S,p,g,f,T,v,y,I,O;const E={id:t.id||null,iban:(null===(n=t.details)||void 0===n?void 0:n.payerIban)||null,reference:t.id||null,documentNumber:(null===(s=t.details)||void 0===s?void 0:s.documentId)||null,correspondentBankBic:(null===(a=null===(i=t.paymentRecipient)||void 0===i?void 0:i.recipientAccount)||void 0===a?void 0:a.bic)||null,correspondentAccount:(null===(r=null===(c=t.paymentRecipient)||void 0===c?void 0:c.recipientAccount)||void 0===r?void 0:r.iban)||null,correspondentName:(null===(o=t.paymentRecipient)||void 0===o?void 0:o.name)||null,kbe:(null===(l=t.paymentRecipient)||void 0===l?void 0:l.kbe)||null,correspondentBin:(null===(u=t.paymentRecipient)||void 0===u?void 0:u.iinOrBin)||null,debit:(null===(d=t.details)||void 0===d?void 0:d.paymentAmount)||null,credit:null,description:this.mapDescription(t),documentDate:(null===(b=t.details)||void 0===b?void 0:b.issueDate)||null,valueDate:(null===(h=t.details)||void 0===h?void 0:h.valueDate)||null,knp:(null===(m=t.details)||void 0===m?void 0:m.knp)||null,kbk:(null===(S=t.details)||void 0===S?void 0:S.kbk)||null,signHead:null,signBuch:null,isPayment:!0,paymentId:t.id,paymentStatus:t.status||null,paymentType:t.type||null,paymentEmployees:t.paymentEmployees,createDate:(null===(p=t.details)||void 0===p?void 0:p.createDate)||null,foreignPaymentDetails:t.details.foreignPaymentDetails||null,foreignRecipient:{country:null===(g=t.paymentRecipient)||void 0===g?void 0:g.country,countryCode:null===(f=t.paymentRecipient)||void 0===f?void 0:f.countryCode,cityName:null===(T=t.paymentRecipient)||void 0===T?void 0:T.cityName,bic:null===(y=null===(v=t.paymentRecipient)||void 0===v?void 0:v.recipientAccount)||void 0===y?void 0:y.bic,bankName:null===(O=null===(I=t.paymentRecipient)||void 0===I?void 0:I.recipientAccount)||void 0===O?void 0:O.bankName},emailOnSuccess:t.emailOnSuccess||null,signatureScheme:t.signatureScheme||null,signatures:t.signatures||[]},R=new bt.d(E,this.translateService.currentLang);return this.isFeatureDisabled(t.type)?(R.isExportable=!1,R.isRepeatable=!1,R.isEditable=!1,R.isRemovable=!1,R.isSignable=!1,R.isSendableForSign=!1,R.isRevokable=!1):(R.isExportable=this.isExportable(t),R.isRepeatable=this.isRepeatable(t),R.isEditable=this.isEditable(t),R.isRemovable=this.isRemovable(t),R.isSignable=this.isSignable(t),R.isSendableForSign=this.isSendableForSign(t),R.isRevokable=this.isRevokable(t)),R.hasTour=R.isRepeatable&&0==e&&1==this.cashedPageNumber,R.isSignableByOthers=this.isSignableByOthers(t),R.signsCountText=this.getSignsCountText(R),R})}isFeatureDisabled(t){const e=t==E.i.CONVERSION&&this.featureFlagsService.isDisabled(mt.a.CONVERSION),n=t==E.i.FOREIGN&&this.featureFlagsService.isDisabled(mt.a.FOREIGN_PAYMENT);return e||n||!1}isRepeatable(t){return(t.status.state!=E.d.MIGRATED||t.category!==E.g.CONVERSION)&&t.status.code!=E.h.DRAFT}isExportable(t){return(t.status.state!=E.d.MIGRATED||t.category!==E.g.CONVERSION)&&t.status.code!=E.h.CREATED&&t.status.code!=E.h.DRAFT}generateGroupTitle(t){switch(t){case O.c.ALL:return"HISTORY.LISTS.ALL";case O.c.FOR_SIGN:return"HISTORY.LISTS.FOR_SIGN";case O.c.FOR_SIGN_OTHERS:return"HISTORY.LISTS.FOR_SIGN_OTHERS";case O.c.SUCCESS:return"HISTORY.LISTS.SUCCESS";case O.c.FAILED:return"HISTORY.LISTS.FAILED";case O.c.IN_PROGRESS:return"HISTORY.LISTS.IN_PROGRESS";case O.c.DRAFT:return"HISTORY.LISTS.DRAFT"}}compareBySignature(t,e){return t.isSignable&&e.isSignable?0:t.isSignable&&e.isSignableByOthers?-1:1}}return t.\u0275fac=function(e){return new(e||t)(u.ec(St.a),u.ec(pt.a),u.ec(dt.a),u.ec(C.e),u.ec(gt.a),u.ec(ft.a),u.ec(Tt.c),u.ec(mt.b))},t.\u0275prov=u.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var yt=n("1ua0"),It=n("yZrb"),Ot=n("ZF+8"),Et=n("iCQh"),Rt=n("THGi"),At=n("/68H"),Ct=n("QiVB");function Ft(t,e){if(1&t&&(u.Wb(0,"a",10),u.Sc(1),u.Vb()),2&t){const t=e.$implicit;u.tc("routerLink",t.url),u.Ab(1),u.Tc(t.label)}}function Lt(t,e){1&t&&(u.Wb(0,"div",11),u.Rb(1,"j-statement-loading"),u.Vb())}function Vt(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"div"),u.Wb(2,"span",26),u.Sc(3,"HISTORY.OPERATION.OTHER"),u.Vb(),u.Sc(4,": "),u.Wb(5,"strong"),u.Sc(6),u.Vb(),u.Vb(),u.Wb(7,"div"),u.Wb(8,"span",26),u.Sc(9,"HISTORY.FOR_AMOUNT"),u.Vb(),u.Sc(10,": "),u.Wb(11,"strong"),u.Rb(12,"j-money",27),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.mc(3);u.Ab(6),u.Uc(" ",t.totalCount," "),u.Ab(6),u.tc("money",t.totalBalance)}}function _t(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Sc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.tc("money",t.balance),u.Ab(1),u.Uc(" (",t.count,") ")}}function Dt(t,e){if(1&t&&u.Qc(0,_t,4,2,"div",28),2&t){const t=u.mc(3);u.tc("ngForOf",t.currencies)}}function Ht(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Sc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.tc("money",t.balance),u.Ab(1),u.Uc(" (",t.count,") ")}}function Nt(t,e){if(1&t&&(u.Qc(0,Ht,4,2,"div",28),u.Wb(1,"div",29),u.Sc(2,"+ "),u.Vb()),2&t){u.mc();const t=u.Ec(10),e=u.mc(2);u.tc("ngForOf",e.currencies.splice(0,4)),u.Ab(1),u.tc("ngbTooltip",t)}}function Wt(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Sc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.tc("money",t.balance),u.Ab(1),u.Uc(" (",t.count,") ")}}function kt(t,e){if(1&t&&u.Qc(0,Wt,4,2,"div",30),2&t){const t=u.mc(3);u.tc("ngForOf",t.currencies.splice(3,t.currencies.length))}}function Pt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",31),u.ic("click",(function(e){return u.Hc(t),u.mc(3).signAll(e)})),u.Wb(2,"span",32),u.Sc(3,"HISTORY.SIGN_ALL"),u.Vb(),u.Rb(4,"span",33),u.Vb(),u.Tb()}2&t&&(u.Ab(4),u.tc("inlineSVG","./assets/icons/transaction/sign.svg"))}function Mt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",31),u.ic("click",(function(e){return u.Hc(t),u.mc(3).sendAllForSign(e)})),u.Wb(2,"span",32),u.Sc(3,"HISTORY.SEND_ALL_FOR_SIGN"),u.Vb(),u.Rb(4,"span",33),u.Vb(),u.Tb()}2&t&&(u.Ab(4),u.tc("inlineSVG","./assets/icons/transaction/for-sign.svg"))}function xt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"a",36),u.ic("click",(function(e){return u.Hc(t),u.mc(4).signSelected(e)})),u.nc(1,"translate"),u.Vb()}2&t&&u.tc("ngbTooltip",u.oc(1,2,"HISTORY.SIGN_SELECTED"))("inlineSVG","./assets/icons/transaction/sign.svg")}function jt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"a",36),u.ic("click",(function(e){return u.Hc(t),u.mc(4).sendForSignSelected(e)})),u.nc(1,"translate"),u.Vb()}2&t&&u.tc("ngbTooltip",u.oc(1,2,"HISTORY.SEND_FOR_SIGN_SELECTED"))("inlineSVG","./assets/icons/transaction/for-sign.svg")}function wt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",34),u.ic("click",(function(e){return u.Hc(t),u.mc(3).deleteSelectedTransactions(e)})),u.nc(2,"translate"),u.Vb(),u.Qc(3,xt,2,4,"a",35),u.Qc(4,jt,2,4,"a",35),u.Tb()}if(2&t){const t=u.mc(3);u.Ab(1),u.tc("ngbTooltip",u.oc(2,4,"HISTORY.DELETE_SELECTED"))("inlineSVG","./assets/icons/transaction/delete.svg"),u.Ab(2),u.tc("ngIf",t.isSignable),u.Ab(1),u.tc("ngIf",t.isSendableForSign)}}function Yt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"input",18),u.ic("ngModelChange",(function(e){return u.Hc(t),u.mc(2).isAllSelected=e}))("change",(function(e){return u.Hc(t),u.mc(2).selectAll()})),u.Vb(),u.Wb(3,"label",19),u.Sc(4,"HISTORY.SELECT_ALL"),u.Vb(),u.Vb(),u.Wb(5,"div",20),u.Qc(6,Vt,13,2,"ng-template",21),u.Qc(7,Dt,1,1,"ng-template",21),u.Qc(8,Nt,3,2,"ng-template",21),u.Qc(9,kt,1,1,"ng-template",null,22,u.Rc),u.Wb(11,"div",23),u.Qc(12,Pt,5,1,"ng-container",24),u.Qc(13,Mt,5,1,"ng-container",24),u.Qc(14,wt,5,6,"ng-container",24),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=u.mc(2);u.Ab(2),u.tc("ngModel",t.isAllSelected),u.Ab(4),u.tc("ngIf",!t.currencies||(null==t.currencies?null:t.currencies.length)<=1),u.Ab(1),u.tc("ngIf",(null==t.currencies?null:t.currencies.length)>1&&(null==t.currencies?null:t.currencies.length)<=3),u.Ab(1),u.tc("ngIf",(null==t.currencies?null:t.currencies.length)>3),u.Ab(4),u.tc("ngIf",0==t.selectedCount&&t.isAllSignable),u.Ab(1),u.tc("ngIf",0==t.selectedCount&&t.isAllSendableForSign),u.Ab(1),u.tc("ngIf",t.selectedCount>0)}}function Gt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",17),u.Wb(1,"input",38),u.ic("ngModelChange",(function(e){return u.Hc(t),u.mc(3).isAllSelected=e}))("change",(function(e){return u.Hc(t),u.mc(3).selectAll()})),u.Vb(),u.Wb(2,"label",39),u.Sc(3,"HISTORY.SELECT_ALL"),u.Vb(),u.Vb()}if(2&t){const t=u.mc(3);u.Ab(1),u.tc("ngModel",t.isAllSelected)}}function Bt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",34),u.ic("click",(function(e){return u.Hc(t),u.mc(3).exportSelectedTransactions(e)})),u.nc(2,"translate"),u.Vb(),u.Tb()}2&t&&(u.Ab(1),u.tc("ngbTooltip",u.oc(2,2,"HISTORY.DOWNLOAD_SELECTED"))("inlineSVG","./assets/icons/transaction/pdf.svg"))}function Qt(t,e){if(1&t&&(u.Wb(0,"div",16),u.Qc(1,Gt,4,1,"div",37),u.Wb(2,"div",20),u.Wb(3,"div",25),u.Wb(4,"div"),u.Wb(5,"span",26),u.Sc(6,"HISTORY.OPERATION.OTHER"),u.Vb(),u.Sc(7,": "),u.Wb(8,"strong"),u.Sc(9),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",23),u.Qc(11,Bt,3,4,"ng-container",24),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.mc(2);u.Ab(1),u.tc("ngIf",t.isAllSelectableForExport),u.Ab(8),u.Uc(" ",t.totalCount," "),u.Ab(2),u.tc("ngIf",t.selectedCount>0)}}function Ut(t,e){1&t&&(u.Wb(0,"div",40),u.Sc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),u.Vb())}function Kt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",12),u.Qc(1,Yt,15,7,"div",13),u.Qc(2,Qt,12,3,"div",13),u.Wb(3,"j-statement",14),u.ic("signed",(function(e){return u.Hc(t),u.mc().onSign(e)}))("sentForSign",(function(e){return u.Hc(t),u.mc().onSentForSign(e)}))("deleted",(function(e){return u.Hc(t),u.mc().onDelete(e)}))("revoked",(function(e){return u.Hc(t),u.mc().onRevoke(e)}))("selected",(function(e){return u.Hc(t),u.mc().onSelect()})),u.Vb(),u.Qc(4,Ut,2,0,"div",15),u.Vb()}if(2&t){const t=u.mc();u.Hb("list-statement--scrollable",t.hasMorePages),u.Ab(1),u.tc("ngIf",t.isSelectable),u.Ab(1),u.tc("ngIf",t.isSelectableForExport),u.Ab(1),u.tc("statement",t.statement)("isTotalsShown",!1)("hasExtraPadding",!0)("isSelectable",t.isSelectable||t.isSelectableForExport),u.Ab(1),u.tc("ngIf",!t.hasMorePages&&t.statement.totalTransactionsCount>0)}}let $t=(()=>{class t{constructor(t,e,n,s,i,a,c,r,o,l,u){this.company=t,this.filterService=e,this.historyService=n,this.route=s,this.router=i,this.datePipe=a,this.modalService=c,this.filesService=r,this.maskedService=o,this.statementService=l,this.tourService=u,this.filterScheme={periodTo:null,periodFrom:null},this.filterCurrency=R.a.KZT,this.filterMode=I.a.HISTORY,this.modalConfigSmall={backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0},this.modalConfigMedium={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},this.historyTypes=[{label:"HISTORY.ALL",url:"/history/all"},{label:"HISTORY.TENGE_PAYMENTS",url:"/history/tenge"},{label:"HISTORY.CURRENCY_PAYMENTS",url:"/history/foreign"},{label:"HISTORY.CONVERSION",url:"/history/conversion"}],this.subscription=new f.a,this.pageNumber=1,this.pageSize=25,this.pageSizeForSign=1e5,this.hasMorePages=!0,this.isLoading=!0,this.isLoadingExtra=!0,this.isReady=!1,this.isTourShown=!1,this.tourStep=null,this.hasSignableSelected=!1,this.isAllSelected=!1,this.selectedTransactions=[],this.selectedCount=0,this.SESSION_ROUTE_KEY="historyRouteQuery",this.cashedRouteQuery=JSON.parse(sessionStorage.getItem(this.SESSION_ROUTE_KEY)),this.canBeNavigatedToForSign=!0;const d=this.route.paramMap.pipe(Object(v.a)(()=>window.history.state)).subscribe(t=>{this.tourStep=t.tourStep,this.tourService.onTourStart$.next(null)});this.subscription.add(d);const b=Object(T.a)([this.route.queryParams,this.route.data]).pipe(Object(y.a)(1)).subscribe(([t,e])=>{Object.keys(t).length>0&&(this.canBeNavigatedToForSign=!1),this.paymentCategory=e.category,this.cashedRouteQuery&&!t&&(t=this.cashedRouteQuery),this.updateCashedRouteQuery(t);const n=this.mapQueryParams(t);this.filterScheme=n,this.filterService.updateExtra(this.filterScheme)});this.subscription.add(b);const h=this.company.refresh$.subscribe(t=>{this.init(this.filterScheme),this.historyService.updateStatusCounts(this.paymentCategory)}),m=this.filterService.getScheme().subscribe(t=>{this.init(t)}),S=this.filesService.onImport().subscribe(()=>{this.init(this.filterScheme),this.historyService.updateStatusCounts(this.paymentCategory)}),p=this.filterService.getStatuses().subscribe(t=>{const e=t.find(t=>t.value==O.c.FOR_SIGN);if(e.count>0&&e.classList.includes("badge-primary")&&this.canBeNavigatedToForSign){this.canBeNavigatedToForSign=!1;const t=Object.assign(this.filterScheme,{paymentStatus:O.c.FOR_SIGN});this.filterService.updateExtra(t)}});this.subscription.add(h),this.subscription.add(m),this.subscription.add(S),this.subscription.add(p)}init(t=this.filterService.getDefaults(this.filterMode)){return Object(g.a)(this,void 0,void 0,(function*(){this.filterScheme=Object.assign({},t),this.pageNumber=1,this.hasMorePages=!0,this.isLoading=!0,this.updateQueryParams(),yield this.loadStatement(),this.updateSelectable()}))}ngOnDestroy(){this.subscription.unsubscribe()}onScroll(){this.hasMorePages&&(this.pageNumber++,this.loadStatement())}validateTransactionsByPaymentId(t){return Object(g.a)(this,void 0,void 0,(function*(){try{const e=yield this.historyService.validateTransactionsByPaymentId(this.company.currentId,t);return e.status!==E.b.SUCCESS&&this.showValidationError(e),e.status}catch(e){return this.showValidationError(e),E.b.FAILED}}))}onSign(t){return Object(g.a)(this,void 0,void 0,(function*(){const e={transactionIds:[t.id],totalBalance:t.balance,transactionsCount:1};try{if(t.paymentStatus.code===E.h.DRAFT&&(yield this.validateTransactionsByPaymentId(e.transactionIds))===E.b.FAILED)return;yield this.showSignModal(e),this.historyService.updateForSignCount(null,this.paymentCategory)}catch(n){}}))}onSentForSign(t){return Object(g.a)(this,void 0,void 0,(function*(){this.sendToSigned([t])}))}onSelect(){this.updateSelectable()}selectAll(){this.currentTransactions.forEach(t=>{t.isSelected=this.isAllSelected}),this.updateSelectable(),this.isAllSelected=!0}selectSignable(){this.currentTransactions.forEach(t=>{t.isSelected=!!t.isSignable&&this.hasSignableSelected}),this.updateSelectable(),this.hasSignableSelected=!0}get isAllSignable(){return this.currentTransactions.length>0&&(this.filterScheme.paymentStatus===O.c.FOR_SIGN||this.filterScheme.paymentStatus===O.c.DRAFT)&&this.hasSignableInList(this.currentTransactions)}get isAllSendableForSign(){return!this.isAllSignable&&this.currentTransactions.length>0&&this.filterScheme.paymentStatus===O.c.DRAFT&&this.hasSendableForSignInList(this.currentTransactions)}get isSignable(){return this.currentTransactions&&(this.filterScheme.paymentStatus===O.c.FOR_SIGN||this.filterScheme.paymentStatus===O.c.DRAFT)&&this.isAllSignableInList(this.selectedTransactions)}get isSendableForSign(){return!this.isSignable&&this.currentTransactions&&this.filterScheme.paymentStatus===O.c.DRAFT&&this.isAllSendableForSignInList(this.selectedTransactions)}get isSelectable(){return this.currentTransactions&&(this.filterScheme.paymentStatus===O.c.FOR_SIGN||this.filterScheme.paymentStatus===O.c.DRAFT)}get isSelectableForExport(){return this.filterScheme.paymentStatus===O.c.SUCCESS||this.filterScheme.paymentStatus===O.c.FAILED||this.filterScheme.paymentStatus===O.c.IN_PROGRESS}get isAllSelectableForExport(){return this.filterScheme.paymentStatus===O.c.IN_PROGRESS}get totalBalance(){return this.selectedCount>0?this.selectedBalance:this.countTotalBalanceFromTransactionsList(this.currentTransactions)}get totalCount(){return this.selectedCount>0?this.selectedCount:this.currentTransactionsCount}get currentTransactionsCount(){var t;return(null===(t=this.statement)||void 0===t?void 0:t.totalTransactionsCount)||0}get currentTransactions(){var t,e,n;return(null===(n=null===(e=null===(t=this.statement)||void 0===t?void 0:t.transactionGroups)||void 0===e?void 0:e.map(t=>t.transactions))||void 0===n?void 0:n.flat())||[]}get hasAnySelected(){return this.selectedCount>0}get currencies(){const t={};return(this.selectedCount>0?this.selectedTransactions:this.currentTransactions).forEach(e=>{var n,s,i,a,c,r,o,l;(null===(n=e.balance)||void 0===n?void 0:n.currency)&&(t[null===(s=e.balance)||void 0===s?void 0:s.currency]?(t[null===(i=e.balance)||void 0===i?void 0:i.currency].count++,t[null===(a=e.balance)||void 0===a?void 0:a.currency].balance.amount+=null===(c=e.balance)||void 0===c?void 0:c.amount):t[null===(r=e.balance)||void 0===r?void 0:r.currency]={count:1,balance:{amount:null===(o=e.balance)||void 0===o?void 0:o.amount,currency:null===(l=e.balance)||void 0===l?void 0:l.currency}})}),Object.values(t)}signAll(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={paymentStatus:this.filterScheme.paymentStatus},n=(yield this.historyService.getHistoryList(this.paymentCategory,e,1,this.pageSizeForSign)).body.filter(t=>this.historyService.isSignable(t)),s={transactionIds:this.retrieveIdsFromList(n),totalBalance:this.countTotalBalanceFromPaymentsList(n),transactionsCount:n.length};this.filterScheme.paymentStatus===O.c.DRAFT&&(yield this.validateTransactionsByPaymentId(s.transactionIds))===E.b.FAILED||this.showSignModal(s)}))}sendAllForSign(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={paymentStatus:O.c.DRAFT},n=(yield this.historyService.getHistoryList(this.paymentCategory,e,1,this.pageSizeForSign)).body.filter(t=>this.historyService.isSendableForSign(t));this.sendToSigned(n)}))}signSelected(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={transactionIds:this.retrieveIdsFromList(this.selectedTransactions),totalBalance:this.countTotalBalanceFromTransactionsList(this.selectedTransactions),transactionsCount:this.selectedTransactions.length};this.filterScheme.paymentStatus===O.c.DRAFT&&(yield this.validateTransactionsByPaymentId(e.transactionIds))!==E.b.SUCCESS||this.showSignModal(e)}))}sendForSignSelected(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault(),this.sendToSigned(this.selectedTransactions)}))}deleteSelectedTransactions(t=null){return Object(g.a)(this,void 0,void 0,(function*(){t&&t.preventDefault(),this.deleteTransactions(this.selectedTransactions)}))}exportSelectedTransactions(t=null){return Object(g.a)(this,void 0,void 0,(function*(){t&&t.preventDefault();const e=yield this.statementService.exportTransactions(this.selectedTransactions);this.filesService.downloadFile(e,`${this.selectedCount}_operations.pdf`)}))}onDelete(t){return Object(g.a)(this,void 0,void 0,(function*(){yield this.deleteTransactions([t])}))}onRevoke(t){return Object(g.a)(this,void 0,void 0,(function*(){t.isLoading=!0;try{yield this.historyService.revokePayment(this.company.currentId,t),yield this.init(this.filterScheme)}catch(e){}finally{this.historyService.updateForSignCount(null,this.paymentCategory),this.historyService.updateStatusCounts(this.paymentCategory),this.resetSelectable(),this.updateSelectable()}}))}deleteTransactions(t){return Object(g.a)(this,void 0,void 0,(function*(){t.forEach(t=>{t.isLoading=!0});try{const e=yield this.historyService.deleteMultipleTransactions(this.company.currentId,t);yield this.init(this.filterScheme);const n=e.length,s=t.length-n;0===n?this.showDeleteError(t):0===s?this.showDeleteSuccess(n):this.showDeletePartial(n,s)}catch(e){this.showDeleteError(t)}finally{this.historyService.updateForSignCount(null,this.paymentCategory),this.resetSelectable(),this.updateSelectable()}}))}sendToSigned(t){return Object(g.a)(this,void 0,void 0,(function*(){try{const e=yield this.historyService.sendMultipleTransactionsForSign(t.map(t=>t.id));switch(e.status){case E.b.SUCCESS:this.showSendToSignedSuccess(e),yield this.init(this.filterScheme);break;case E.b.PARTLY_SUCCESS:this.showSendToSignedPartial(e),yield this.init(this.filterScheme);break;case E.b.FAILED:this.showSendToSignedPartialError(e)}}catch(e){console.error(e),this.showSendToSignedError(t)}finally{this.resetSelectable(),this.updateSelectable(),this.historyService.updateForSignCount(null,this.paymentCategory)}}))}showSignModal(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(yt.b,this.modalConfigMedium);Object.assign(e.componentInstance,{additionalParams:{actionIds:t.transactionIds}}),Object.assign(e.componentInstance,{headerParams:{smsHeader:It.c.SIGNING_PAYMENT}}),e.componentInstance.submitted.subscribe(n=>{this.signMultipleTransactions(n,t).then(()=>{localStorage.setItem("preferredSignatureType",n.type===E.p.OTP?yt.a.OTP:yt.a.SMS)}).catch(e=>{this.showMultipleSignError(e.description||e.code,t)}).finally(()=>{this.historyService.updateForSignCount(null,this.paymentCategory),e.close()})}),e.componentInstance.sentForRevision.subscribe(()=>{this.init(this.filterScheme),e.close()})}))}signMultipleTransactions(t,e){return Object(g.a)(this,void 0,void 0,(function*(){try{const n=yield this.historyService.signMultipleTransactions(this.company.currentId,t,e.transactionIds);switch(n.status){case E.b.SUCCESS:this.showMultipleSignSuccess(n),yield this.init(this.filterScheme);break;case E.b.PARTLY_SUCCESS:this.showMultipleSignPartialSuccess(n),yield this.init(this.filterScheme);break;case E.b.FAILED:this.showMultipleSignPartialError(n)}}catch(n){this.showMultipleSignError(n,e)}finally{this.updateSelectable(),this.historyService.updateForSignCount(null,this.paymentCategory)}}))}loadStatement(){return Object(g.a)(this,void 0,void 0,(function*(){this.isLoadingExtra=!0;try{const t=yield this.historyService.getTransactionGroup(this.paymentCategory,this.filterScheme,this.pageNumber,this.filterScheme.paymentStatus===O.c.FOR_SIGN?this.pageSizeForSign:this.pageSize);this.hasMorePages=this.pageSize*this.pageNumber<=t.transactionsCount,this.statement={totalTransactionsCount:t.transactionsCount,transactionGroups:this.filterScheme.paymentStatus===O.c.FOR_SIGN?this.destructureForSignGroups(t):[t]},this.startHistoryTour()}catch(t){console.log(t),this.statement=null}finally{this.isReady=!0,this.isLoading=!1,this.isLoadingExtra=!1}}))}startHistoryTour(){var t,e,n;this.isTourShown||(this.isTourShown=!0,("HISTORY_LIST.REPEAT"==this.tourStep||"HISTORY_HOME.NAV"==this.tourStep)&&(null===(n=null===(e=null===(t=this.statement)||void 0===t?void 0:t.transactionGroups[0])||void 0===e?void 0:e.transactions[0])||void 0===n?void 0:n.hasTour)&&setTimeout(()=>{this.tourService.startTour(Ot.e.HISTORY_LIST)},500))}destructureForSignGroups(t){const e=t.transactions.filter(t=>t.isSignable),n=t.transactions.filter(t=>t.isSignableByOthers);return[{title:this.historyService.generateGroupTitle(O.c.FOR_SIGN),creditSum:null,debitSum:this.historyService.getTotalAmount(e),hasLargeTransactions:this.statementService.checkListForLargeTransactions(e),transactionsCount:e.length,transactions:e},{hasTour:!0,title:this.historyService.generateGroupTitle(O.c.FOR_SIGN_OTHERS),creditSum:null,debitSum:this.historyService.getTotalAmount(n),hasLargeTransactions:this.statementService.checkListForLargeTransactions(n),transactionsCount:n.length,transactions:n}]}showValidationError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(lt,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.result=t}))}showMultipleSignPartialSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(w,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.result=t}))}showMultipleSignPartialError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(W,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showMultipleSignSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(Q,this.modalConfigSmall).componentInstance.result=t}))}showMultipleSignError(t=null,e){return Object(g.a)(this,void 0,void 0,(function*(){const n=this.modalService.open(G,this.modalConfigSmall);n.componentInstance.errorText=t;try{yield n.result,this.showSignModal(e)}catch(s){}}))}showDeleteSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(_,this.modalConfigSmall).componentInstance.successCount=t}))}showDeletePartial(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const n=this.modalService.open(L,this.modalConfigMedium);n.componentInstance.successCount=t,n.componentInstance.failedCount=e}))}showDeleteError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(V,this.modalConfigSmall);e.componentInstance.failedCount=t.length;try{yield e.result,this.deleteTransactions(t)}catch(n){}}))}showSendToSignedSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(z,this.modalConfigSmall).componentInstance.signResult=t}))}showSendToSignedPartial(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(X,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showSendToSignedPartialError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(et,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showSendToSignedError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(J,this.modalConfigSmall);e.componentInstance.signResult={numberOfFailed:t.length,numberOfSuccess:0,status:E.b.FAILED};try{yield e.result,this.sendToSigned(t)}catch(n){}}))}resetSelectable(){this.selectedTransactions=[],this.selectedCount=0,this.selectedBalance={amount:0,currency:null},this.isAllSelected=!1,this.hasSignableSelected=!1}updateSelectable(){this.resetSelectable(),this.updateSelectedValues()}retrieveIdsFromList(t){return t.map(t=>t.id)}updateSelectedValues(){this.currentTransactions.forEach(t=>{t.isSelected&&(this.selectedTransactions.push(t),this.selectedCount++)}),this.selectedBalance=this.countTotalBalanceFromTransactionsList(this.selectedTransactions)}countTotalBalanceFromPaymentsList(t){const e={amount:0,currency:null};return t.forEach(t=>{var n,s;e.currency||(e.currency=null===(n=t.details.paymentAmount)||void 0===n?void 0:n.currency),e.amount+=null===(s=t.details.paymentAmount)||void 0===s?void 0:s.amount}),e}countTotalBalanceFromTransactionsList(t){const e={amount:0,currency:null};return t.forEach(t=>{t.debit&&(!e.currency&&t.debit.currency&&(e.currency=t.debit.currency),e.amount+=t.debit.amount)}),e}isAllSignableInList(t){let e=!0;return t.forEach(t=>{if(!1===e)return e;t.isSignable||(e=!1)}),e}isAllSendableForSignInList(t){let e=!0;return t.forEach(t=>{if(!1===e)return e;t.isSendableForSign||(e=!1)}),e}hasSignableInList(t){return!!t.find(t=>t.isSignable)}hasSendableForSignInList(t){return!!t.find(t=>t.isSendableForSign)}mapQueryParams(t){let e=Object.assign({},this.filterService.getDefaults(this.filterMode));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(!s)continue;e[n]="periodFrom"==n||"periodTo"==n?new Date(s):s}return e}updateQueryParams(){const t=Object.assign({},this.filterScheme),e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];s&&null!=s&&"null"!=s&&(e[n]="periodFrom"==n||"periodTo"==n?this.datePipe.transform(s,"yyyy-MM-dd"):s,"amountFrom"!=n&&"amountTo"!=n||(e[n]=this.maskedService.getNumberedAmount(s)))}this.updateCashedRouteQuery(e),this.router.navigate([],{queryParams:e,relativeTo:this.route})}updateCashedRouteQuery(t){sessionStorage.setItem(this.SESSION_ROUTE_KEY,JSON.stringify(t))}getDocumentNumberById(t){const e=this.currentTransactions.find(e=>e.id==t);return e&&e.documentNumber||null}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(pt.a),u.Qb(I.c),u.Qb(vt),u.Qb(l.a),u.Qb(l.c),u.Qb(s.f),u.Qb(A.q),u.Qb(Et.a),u.Qb(ft.a),u.Qb(bt.b),u.Qb(Ot.g))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-history-list"]],decls:10,vars:9,consts:[[1,"j-list"],[1,"j-list__header"],[1,"j-tabs"],[1,"j-tabs__list"],["class","j-tabs__item","routerLinkActive","active","translate","",3,"routerLink",4,"ngFor","ngForOf"],[1,"j-list__filter"],[3,"currency","mode"],["class","j-list__statement j-list__loading",4,"ngIf"],["infiniteScroll","",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["class","j-list__statement",3,"list-statement--scrollable",4,"ngIf"],["routerLinkActive","active","translate","",1,"j-tabs__item",3,"routerLink"],[1,"j-list__statement","j-list__loading"],[1,"j-list__statement"],["class","total",4,"ngIf"],[3,"statement","isTotalsShown","hasExtraPadding","isSelectable","signed","sentForSign","deleted","revoked","selected"],["class","text-center text-muted mt-5 mb-3 text-small","translate","",4,"ngIf"],[1,"total"],[1,"total__select","custom-control","custom-checkbox"],["type","checkbox","id","checkboxAll",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkboxAll","translate","",1,"custom-control-label"],[1,"total__content"],[3,"ngIf"],["leftCurrencies",""],[1,"total__actions"],[4,"ngIf"],[1,"total__text"],["translate",""],[3,"money"],["class","total__text",4,"ngFor","ngForOf"],[1,"total__text",3,"ngbTooltip"],[4,"ngFor","ngForOf"],["href","#",1,"total__action","total__action--sign",3,"click"],["translate","",1,"mr-2"],[3,"inlineSVG"],["href","#","tooltipClass","tooltip-light",1,"total__action",3,"ngbTooltip","inlineSVG","click"],["href","#","class","total__action total__action--sign","tooltipClass","tooltip-light",3,"ngbTooltip","inlineSVG","click",4,"ngIf"],["href","#","tooltipClass","tooltip-light",1,"total__action","total__action--sign",3,"ngbTooltip","inlineSVG","click"],["class","total__select custom-control custom-checkbox",4,"ngIf"],["type","checkbox","id","checkboxSelectExport",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkboxSelectExport","translate","",1,"custom-control-label"],["translate","",1,"text-center","text-muted","mt-5","mb-3","text-small"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"nav",3),u.Qc(4,Ft,2,2,"a",4),u.Vb(),u.Vb(),u.Wb(5,"div",5),u.Rb(6,"j-filter",6),u.Vb(),u.Vb(),u.Qc(7,Lt,2,0,"div",7),u.Wb(8,"div",8),u.ic("scrolled",(function(t){return e.onScroll()})),u.Qc(9,Kt,5,9,"div",9),u.Vb(),u.Vb()),2&t&&(u.Ab(4),u.tc("ngForOf",e.historyTypes),u.Ab(2),u.tc("currency",e.filterCurrency)("mode",e.filterMode),u.Ab(1),u.tc("ngIf",e.isLoading),u.Ab(1),u.tc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),u.Ab(1),u.tc("ngIf",!e.isLoading))},directives:[s.t,Rt.b,s.u,a.a,l.f,l.e,C.a,At.a,Ct.a,i.a,i.t,i.w,k.a,A.E,F.a],pipes:[C.d],styles:['[_nghost-%COMP%]{margin:1rem 0;display:block}.total[_ngcontent-%COMP%]{min-height:60px;position:relative;font-size:.875rem;color:#666c72;padding-bottom:1rem}@media(min-width:960px){.total[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex}}.total[_ngcontent-%COMP%]:after{content:"";display:block;background:#eceef1;height:1px;position:absolute;bottom:0;left:-1.5rem;right:-1.5rem}.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1c1f}.total__select[_ngcontent-%COMP%]{margin-bottom:1rem}@media(min-width:960px){.total__select[_ngcontent-%COMP%]{margin-right:1.5rem;margin-bottom:0}}.total__select[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{line-height:1.5rem}.total__actions[_ngcontent-%COMP%]{margin-left:auto;display:-webkit-box;display:flex}.total__text[_ngcontent-%COMP%]{margin-right:1rem}@media(min-width:960px){.total__text[_ngcontent-%COMP%]{text-align:right}}.total__action[_ngcontent-%COMP%]{display:block;margin-left:.5rem;color:#b7bec5}.total__action[_ngcontent-%COMP%]:hover{color:#ef5630}.total__action--sign[_ngcontent-%COMP%]{color:#1586bb}.total__content[_ngcontent-%COMP%]{margin-left:auto;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}@media(min-width:960px){.total__content[_ngcontent-%COMP%]{-webkit-box-pack:end;justify-content:flex-end}}']}),t})();const Xt=[{path:"",component:p,data:{title:"HISTORY.TITLE"},children:[{path:"all",component:$t,data:{category:E.g.ALL}},{path:"tenge",component:$t,data:{category:E.g.DOMESTIC}},{path:"foreign",component:$t,data:{category:E.g.FOREIGN}},{path:"conversion",component:$t,data:{category:E.g.CONVERSION}},{path:"**",redirectTo:"all"}]}];let zt=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[l.g.forChild(Xt)],l.g]}),t})();var Jt=n("xJkR");n.d(e,"HistoryModule",(function(){return qt}));let qt=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[s.c,c.a,o.a,i.n,r.a,zt,a.b,C.c,Jt.b]]}),t})()}}]);