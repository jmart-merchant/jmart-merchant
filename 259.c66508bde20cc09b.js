"use strict";(self.webpackChunkjysan=self.webpackChunkjysan||[]).push([[259],{75653:(F,E,p)=>{p.d(E,{I:()=>ce});var t=p(69808),o=p(5e3);let L=1;const j=Promise.resolve(),h={};function _(S){return S in h&&(delete h[S],!0)}const w={setImmediate(S){const m=L++;return h[m]=!0,j.then(()=>_(m)&&S()),m},clearImmediate(S){_(S)}};var v=p(56686),f=p(32268);const D=new class y extends f.v{flush(m){this.active=!0,this.scheduled=void 0;const{actions:l}=this;let d,T=-1,C=l.length;m=m||l.shift();do{if(d=m.execute(m.state,m.delay))break}while(++T<C&&(m=l.shift()));if(this.active=!1,d){for(;++T<C&&(m=l.shift());)m.unsubscribe();throw d}}}(class I extends v.o{constructor(m,l){super(m,l),this.scheduler=m,this.work=l}requestAsyncId(m,l,d=0){return null!==d&&d>0?super.requestAsyncId(m,l,d):(m.actions.push(this),m.scheduled||(m.scheduled=w.setImmediate(m.flush.bind(m,null))))}recycleAsyncId(m,l,d=0){if(null!==d&&d>0||null===d&&this.delay>0)return super.recycleAsyncId(m,l,d);0===m.actions.length&&(w.clearImmediate(l),m.scheduled=void 0)}});var a=p(90352),b=p(8929),u=p(23753),U=p(36787),W=p(20353),B=p(41177);class N{constructor(m){this.durationSelector=m}call(m,l){return l.subscribe(new X(m,this.durationSelector))}}class X extends B.Ds{constructor(m,l){super(m),this.durationSelector=l,this.hasValue=!1}_next(m){if(this.value=m,this.hasValue=!0,!this.throttled){let l;try{const{durationSelector:T}=this;l=T(m)}catch(T){return this.destination.error(T)}const d=(0,B.ft)(l,new B.IY(this));!d||d.closed?this.clearThrottle():this.add(this.throttled=d)}}clearThrottle(){const{value:m,hasValue:l,throttled:d}=this;d&&(this.remove(d),this.throttled=void 0,d.unsubscribe()),l&&(this.value=void 0,this.hasValue=!1,this.destination.next(m))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var q=p(98723);var Z=p(7625),K=p(81635),te=p(94297);const se=["content"],ne=["scroll"],ie=["padding"],Q=function(S){return{searchTerm:S}};function le(S,m){if(1&S&&(o.TgZ(0,"div",6),o.GkF(1,7),o.qZA()),2&S){const l=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",l.headerTemplate)("ngTemplateOutletContext",o.VKq(2,Q,l.filterValue))}}function oe(S,m){if(1&S&&(o.TgZ(0,"div",8),o.GkF(1,7),o.qZA()),2&S){const l=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",l.footerTemplate)("ngTemplateOutletContext",o.VKq(2,Q,l.filterValue))}}const re=["*"],P="j-select-top",R="j-select-bottom",ae="undefined"!=typeof requestAnimationFrame?a.Z:D;let ce=(()=>{class S{constructor(l,d,T,C,J){this._renderer=l,this._zone=d,this._panelService=T,this._document=J,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new o.vpe,this.scroll=new o.vpe,this.scrollToEnd=new o.vpe,this.outsideClick=new o.vpe,this._destroy$=new b.xQ,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=C.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(l){l!==this._itemsLength&&(this._itemsLength=l,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:l,panelHeight:d}=this._panelService.dimensions,T=this.markedItem.index*l;return d>T?0:T}return 0}handleMousedown(l){"INPUT"!==l.target.tagName&&l.preventDefault()}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown()}ngOnChanges(l){if(l.items){const d=l.items;this._onItemsChange(d.currentValue,d.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(l,d=!1){if(!l)return;const T=this.items.indexOf(l);if(T<0||T>=this.itemsLength)return;let C;if(this.virtualScroll){const J=this._panelService.dimensions.itemHeight;C=this._panelService.getScrollTo(T*J,J,this._lastScrollPosition)}else{const J=this._dropdown.querySelector(`#${l.htmlId}`);C=this._panelService.getScrollTo(J.offsetTop,J.clientHeight,d?J.offsetTop:this._lastScrollPosition)}(0,K.$K)(C)&&(this._scrollablePanel.scrollTop=C)}scrollToTag(){const l=this._scrollablePanel;l.scrollTop=l.scrollHeight-l.clientHeight}adjustPosition(){const l=this._parent.getBoundingClientRect(),d=this._select.getBoundingClientRect();this._setOffset(l,d)}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),"top"===this._currentPosition?(this._renderer.addClass(this._dropdown,P),this._renderer.removeClass(this._dropdown,R),this._renderer.addClass(this._select,P),this._renderer.removeClass(this._select,R)):(this._renderer.addClass(this._dropdown,R),this._renderer.removeClass(this._dropdown,P),this._renderer.addClass(this._select,R),this._renderer.removeClass(this._select,P)),this.appendTo&&this._updatePosition(),this._dropdown.style.opacity="1"}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,u.R)(this.scrollElementRef.nativeElement,"scroll").pipe((0,Z.R)(this._destroy$),function ee(S,m=W.P){return function z(S){return function(l){return l.lift(new N(S))}}(()=>(0,q.H)(S,m))}(0,ae)).subscribe(l=>this._onContentScrolled(l.target.scrollTop))})}_handleOutsideClick(){!this._document||this._zone.runOutsideAngular(()=>{(0,U.T)((0,u.R)(this._document,"touchstart",{capture:!0}),(0,u.R)(this._document,"mousedown",{capture:!0})).pipe((0,Z.R)(this._destroy$)).subscribe(l=>this._checkToClose(l))})}_checkToClose(l){if(this._select.contains(l.target)||this._dropdown.contains(l.target))return;const d=l.path||l.composedPath&&l.composedPath();l.target&&l.target.shadowRoot&&d&&d[0]&&this._select.contains(d[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(l,d){this.items=l||[],this._scrollToEndFired=!1,this.itemsLength=l.length,this.virtualScroll?this._updateItemsRange(d):this._updateItems(d)}_updateItems(l){this.update.emit(this.items),!1!==l&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,l)})})}_updateItemsRange(l){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{l?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(l){this.virtualScroll&&this._renderItemsRange(l),this._lastScrollPosition=l,this._fireScrollToEnd(l)}_updateVirtualHeight(l){this._updateScrollHeight&&(this._virtualPadding.style.height=`${l}px`,this._updateScrollHeight=!1)}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(l=null){if(l&&this._lastScrollPosition===l)return;const d=this._panelService.calculateItems(l=l||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(d.scrollHeight),this._contentPanel.style.transform=`translateY(${d.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(d.start,d.end)),this.scroll.emit({start:d.start,end:d.end})}),(0,K.$K)(l)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=l,this._lastScrollPosition=l)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[l]=this.items;return this.update.emit([l]),Promise.resolve().then(()=>{const T=this._dropdown.querySelector(`#${l.htmlId}`).clientHeight;return this._virtualPadding.style.height=T*this.itemsLength+"px",this._panelService.setDimensions(T,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(l){this._scrollToEndFired||0===l||l+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(l){if("auto"!==this.position)return this.position;const d=this._select.getBoundingClientRect(),T=document.documentElement.scrollTop||document.body.scrollTop;return d.top+window.pageYOffset+d.height+l.getBoundingClientRect().height>T+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if("string"==typeof this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`)}else this._parent=this.appendTo;this._parent.appendChild(this._dropdown)}}_updatePosition(){const l=this._select.getBoundingClientRect(),d=this._parent.getBoundingClientRect();this._setOffset(d,l),this._dropdown.style.width=d.width+"px",this._dropdown.style.minWidth=d.width+"px"}_setOffset(l,d){const T=d.height;"top"===this._currentPosition?(this._dropdown.style.bottom=l.bottom-d.bottom+T+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=d.top-l.top+T+"px",this._dropdown.style.bottom="auto")}}return S.\u0275fac=function(l){return new(l||S)(o.Y36(o.Qsj),o.Y36(o.R0b),o.Y36(te.o),o.Y36(o.SBq),o.Y36(t.K0,8))},S.\u0275cmp=o.Xpm({type:S,selectors:[["j-dropdown-panel"]],viewQuery:function(l,d){if(1&l&&(o.Gf(se,7,o.SBq),o.Gf(ne,7,o.SBq),o.Gf(ie,7,o.SBq)),2&l){let T;o.iGM(T=o.CRH())&&(d.contentElementRef=T.first),o.iGM(T=o.CRH())&&(d.scrollElementRef=T.first),o.iGM(T=o.CRH())&&(d.paddingElementRef=T.first)}},hostBindings:function(l,d){1&l&&o.NdJ("mousedown",function(C){return d.handleMousedown(C)})},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[o.TTD],ngContentSelectors:re,decls:9,vars:6,consts:[["class","j-dropdown-header",4,"ngIf"],[1,"j-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","j-dropdown-footer",4,"ngIf"],[1,"j-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"j-dropdown-footer"]],template:function(l,d){1&l&&(o.F$t(),o.YNc(0,le,2,4,"div",0),o.TgZ(1,"div",1,2),o._UZ(3,"div",null,3),o.TgZ(5,"div",null,4),o.Hsn(7),o.qZA()(),o.YNc(8,oe,2,4,"div",5)),2&l&&(o.Q6J("ngIf",d.headerTemplate),o.xp6(3),o.ekj("total-padding",d.virtualScroll),o.xp6(2),o.ekj("scrollable-content",d.virtualScroll&&d.items.length),o.xp6(3),o.Q6J("ngIf",d.footerTemplate))},directives:[t.O5,t.tP],encapsulation:2,changeDetection:0}),S})()},94297:(F,E,p)=>{p.d(E,{o:()=>o});var t=p(5e3);let o=(()=>{class L{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(h,_,w){const x=this._dimensions,v=x.itemHeight*_,f=Math.max(0,h)/v*_;let y=Math.min(_,Math.ceil(f)+(x.itemsPerViewport+1));const k=Math.max(0,y-x.itemsPerViewport);let a=Math.min(k,Math.floor(f)),b=x.itemHeight*Math.ceil(a)-x.itemHeight*Math.min(a,w);return b=isNaN(b)?0:b,a=isNaN(a)?-1:a,y=isNaN(y)?-1:y,a-=w,a=Math.max(0,a),y+=w,y=Math.min(_,y),{topPadding:b,scrollHeight:v,start:a,end:y}}setDimensions(h,_){const w=Math.max(1,Math.floor(_/h));this._dimensions={itemHeight:h,panelHeight:_,itemsPerViewport:w}}getScrollTo(h,_,w){const{panelHeight:x}=this.dimensions,v=h+_,f=w+x;return x>=v&&w===h?null:v>f?w+v-f:h<=w?h:null}}return L.\u0275fac=function(h){return new(h||L)},L.\u0275prov=t.Yz7({token:L,factory:L.\u0275fac}),L})()},2757:(F,E,p)=>{p.d(E,{He:()=>L,Ok:()=>j,u3:()=>h,Fe:()=>_,aR:()=>w,BN:()=>x,yI:()=>v,qg:()=>I,e5:()=>f,NK:()=>y,XF:()=>D,dR:()=>k});var t=p(81635),o=p(5e3);let L=(()=>{class a{constructor(u){this.element=u,this.escape=!0}ngOnChanges(u){this.element.nativeElement.innerHTML=this.escape?(0,t.r)(this.ngItemLabel):this.ngItemLabel}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.SBq))},a.\u0275dir=o.lG2({type:a,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[o.TTD]}),a})(),j=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-option-tmp",""]]}),a})(),h=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-optgroup-tmp",""]]}),a})(),_=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-label-tmp",""]]}),a})(),w=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-multi-label-tmp",""]]}),a})(),x=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-header-tmp",""]]}),a})(),v=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-footer-tmp",""]]}),a})(),I=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-notfound-tmp",""]]}),a})(),f=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-typetosearch-tmp",""]]}),a})(),y=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-loadingtext-tmp",""]]}),a})(),D=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-tag-tmp",""]]}),a})(),k=(()=>{class a{constructor(u){this.template=u}}return a.\u0275fac=function(u){return new(u||a)(o.Y36(o.Rgc))},a.\u0275dir=o.lG2({type:a,selectors:[["","j-loadingspinner-tmp",""]]}),a})()},81635:(F,E,p)=>{p.d(E,{r:()=>j,$K:()=>h,Kn:()=>_,tI:()=>w,mf:()=>x});const t=/[&<>"']/g,o=RegExp(t.source),L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function j(v){return v&&o.test(v)?v.replace(t,I=>L[I]):v}function h(v){return null!=v}function _(v){return"object"==typeof v&&h(v)}function w(v){return v instanceof Promise}function x(v){return v instanceof Function}},91319:(F,E,p)=>{p.d(E,{F:()=>Se,w:()=>de});var t=p(5e3),o=p(7625),L=p(1059),j=p(2994),h=p(80013),_=p(92198),w=p(24850),x=p(8929),v=p(36787),I=p(2757),f=p(81635),y=p(8491);class D{constructor(n,e){this._ngSelect=n,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let n=this.selectedItems.length-1;for(;n>=0;n--){let e=this.selectedItems[n];if(!e.disabled)return e}return null}setItems(n){this._items=n.map((e,s)=>this.mapItem(e,s)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(n){if(n.selected||this.maxItemsSelected)return;const e=this._ngSelect.multiple;e||this.clearSelected(),this._selectionModel.select(n,e,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(n)}unselect(n){!n.selected||(this._selectionModel.unselect(n,this._ngSelect.multiple),this._ngSelect.hideSelected&&(0,f.$K)(n.index)&&this._ngSelect.multiple&&this._showSelected(n))}findItem(n){let e;return e=this._ngSelect.compareWith?s=>this._ngSelect.compareWith(s.value,n):this._ngSelect.bindValue?s=>!s.children&&this.resolveNested(s.value,this._ngSelect.bindValue)===n:s=>s.value===n||!s.children&&s.label&&s.label===this.resolveNested(n,this._ngSelect.bindLabel),this._items.find(s=>e(s))}addItem(n){const e=this.mapItem(n,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(n=!1){this._selectionModel.clear(n),this._items.forEach(e=>{e.selected=n&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(n){return n=n.toLocaleLowerCase(),this.filteredItems.find(e=>e.label.toLocaleLowerCase().substr(0,n.length)===n)}filter(n){if(!n)return void this.resetFilteredItems();this._filteredItems=[],n=this._ngSelect.searchFn?n:n.toLocaleLowerCase();const e=this._ngSelect.searchFn||this._defaultSearchFn,s=this._ngSelect.hideSelected;for(const i of Array.from(this._groups.keys())){const c=[];for(const g of this._groups.get(i))s&&(g.parent&&g.parent.selected||g.selected)||e(n,this._ngSelect.searchFn?g.value:g)&&c.push(g);if(c.length>0){const[g]=c.slice(-1);if(g.parent){const O=this._items.find(M=>M===g.parent);this._filteredItems.push(O)}this._filteredItems.push(...c)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(n=>!n.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(n){this._markedIndex=this._filteredItems.indexOf(n)}markSelectedOrDefault(n){if(0===this._filteredItems.length)return;const e=this._getLastMarkedIndex();this._markedIndex=e>-1?e:n?this.filteredItems.findIndex(s=>!s.disabled):-1}resolveNested(n,e){if(e){if(!(0,f.Kn)(n))return n;if(-1===e.indexOf("."))return n[e];{let s=e.split("."),i=n;for(let c=0,g=s.length;c<g;++c){if(null==i)return null;i=i[s[c]]}return i}}}mapItem(n,e){const s=(0,f.$K)(n.$ngOptionLabel)?n.$ngOptionLabel:this.resolveNested(n,this._ngSelect.bindLabel),i=(0,f.$K)(n.$ngOptionValue)?n.$ngOptionValue:n;return{index:e,label:(0,f.$K)(s)?s.toString():"",value:i,disabled:n.disabled,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){const n=this._ngSelect.multiple;for(const e of this.selectedItems){const s=this._ngSelect.bindValue?this.resolveNested(e.value,this._ngSelect.bindValue):e.value,i=(0,f.$K)(s)?this.findItem(s):null;this._selectionModel.unselect(e,n),this._selectionModel.select(i||e,n,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(e=>-1===this.selectedItems.indexOf(e)))}_showSelected(n){if(this._filteredItems.push(n),n.parent){const e=n.parent;this._filteredItems.find(i=>i===e)||this._filteredItems.push(e)}else if(n.children)for(const e of n.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((e,s)=>e.index-s.index)]}_hideSelected(n){this._filteredItems=this._filteredItems.filter(e=>e!==n),n.parent?n.parent.children.every(s=>s.selected)&&(this._filteredItems=this._filteredItems.filter(s=>s!==n.parent)):n.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==n))}_defaultSearchFn(n,e){return e.label.toLocaleLowerCase().indexOf(n)>-1}_getNextItemIndex(n){return n>0?this._markedIndex===this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(n){0===this._filteredItems.length||this._filteredItems.every(e=>e.disabled)||(this._markedIndex=this._getNextItemIndex(n),this.markedItem.disabled&&this._stepToItem(n))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const n=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&n<0?-1:Math.max(this.markedIndex,n)}_groupBy(n,e){const s=new Map;if(0===n.length)return s;if(Array.isArray(n[0].value[e])){for(const g of n){const O=(g.value[e]||[]).map((M,Y)=>this.mapItem(M,Y));s.set(g,O)}return s}const i=(0,f.mf)(this._ngSelect.groupBy),c=g=>{let O=i?e(g.value):g.value[e];return(0,f.$K)(O)?O:void 0};for(const g of n){let O=c(g);const M=s.get(O);M?M.push(g):s.set(O,[g])}return s}_flatten(n){const e=(0,f.mf)(this._ngSelect.groupBy),s=[];for(const i of Array.from(n.keys())){let c=s.length;if(void 0===i){const A=n.get(void 0)||[];s.push(...A.map(H=>Object.assign(Object.assign({},H),{index:c++})));continue}const g=(0,f.Kn)(i),O={label:g?"":String(i),children:void 0,parent:null,index:c++,disabled:!this._ngSelect.selectableGroup,htmlId:(0,y.generateUniqueId)()},M=e?this._ngSelect.bindLabel:this._ngSelect.groupBy,Y=this._ngSelect.groupValue||(()=>g?i.value:{[M]:i}),G=n.get(i).map(A=>(A.parent=O,A.children=void 0,A.index=c++,A));O.children=G,O.value=Y(i,G.map(A=>A.value)),s.push(O),s.push(...G)}return s}}var k=p(64409),a=p(75653);const b=["*"];let u=(()=>{class r{constructor(e){this.elementRef=e,this.stateChange$=new x.xQ,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=this._isDisabled(e)}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(e){e.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(e){return null!=e&&"false"!=`${e}`}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.SBq))},r.\u0275cmp=t.Xpm({type:r,selectors:[["j-option"]],inputs:{value:"value",disabled:"disabled"},features:[t.TTD],ngContentSelectors:b,decls:1,vars:0,template:function(e,s){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),r})();var U=p(94297),W=p(46758),B=p(61688);let z=(()=>{class r{constructor(){this.notFoundText="PAYMENTS.SELECT.NOT_FOUND",this.typeToSearchText="PAYMENTS.SELECT.SEARCH",this.addTagText="PAYMENTS.SELECT.ADD",this.loadingText="PAYMENTS.SELECT.LOADING",this.clearAllText="PAYMENTS.SELECT.CLEAR",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var N=p(93075),X=p(11685);const q=["searchInput"];function ee(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(2).unselect(i)}),t._uU(1,"\xd7"),t.qZA(),t._UZ(2,"span",16)}if(2&r){const e=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngItemLabel",e.label)("escape",s.escapeHTML)}}function Z(r,n){}const K=function(r,n,e){return{item:r,clear:n,label:e}};function te(r,n){if(1&r&&(t.TgZ(0,"div",12),t.YNc(1,ee,3,2,"ng-template",null,13,t.W1O),t.YNc(3,Z,0,0,"ng-template",14),t.qZA()),2&r){const e=n.$implicit,s=t.MAs(2),i=t.oxw(2);t.ekj("j-value-disabled",e.disabled),t.xp6(3),t.Q6J("ngTemplateOutlet",i.labelTemplate||s)("ngTemplateOutletContext",t.kEZ(4,K,e.value,i.clearItem,e.label))}}function se(r,n){if(1&r&&(t.ynx(0),t.YNc(1,te,4,8,"div",11),t.BQk()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.selectedItems)("ngForTrackBy",e.trackByOption)}}function ne(r,n){}const ie=function(r,n){return{items:r,clear:n}};function Q(r,n){if(1&r&&t.YNc(0,ne,0,0,"ng-template",14),2&r){const e=t.oxw();t.Q6J("ngTemplateOutlet",e.multiLabelTemplate)("ngTemplateOutletContext",t.WLB(2,ie,e.selectedValues,e.clearItem))}}function le(r,n){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",17,18),t.NdJ("input",function(){t.CHM(e);const i=t.MAs(2);return t.oxw().filter(i.value)})("compositionstart",function(){return t.CHM(e),t.oxw().onCompositionStart()})("compositionend",function(){t.CHM(e);const i=t.MAs(2);return t.oxw().onCompositionEnd(i.value)})("focus",function(i){return t.CHM(e),t.oxw().onInputFocus(i)})("blur",function(i){return t.CHM(e),t.oxw().onInputBlur(i)})("change",function(i){return i.stopPropagation()}),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("readOnly",!e.searchable||e.itemsList.maxItemsSelected)("disabled",e.disabled)("value",e.searchTerm?e.searchTerm:"")("jShadow",e.shadow)("mask",e.searchMask),t.uIk("id",e.labelForId)("tabindex",e.tabIndex)("aria-expanded",e.isOpen)("aria-owns",e.isOpen?e.dropdownId:null)("aria-activedescendant",e.isOpen?null==e.itemsList||null==e.itemsList.markedItem?null:e.itemsList.markedItem.htmlId:null)}}function oe(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"input",19,18),t.NdJ("input",function(){t.CHM(e);const i=t.MAs(1);return t.oxw().filter(i.value)})("compositionstart",function(){return t.CHM(e),t.oxw().onCompositionStart()})("compositionend",function(){t.CHM(e);const i=t.MAs(1);return t.oxw().onCompositionEnd(i.value)})("focus",function(i){return t.CHM(e),t.oxw().onInputFocus(i)})("blur",function(i){return t.CHM(e),t.oxw().onInputBlur(i)})("change",function(i){return i.stopPropagation()}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("readOnly",!e.searchable||e.itemsList.maxItemsSelected)("disabled",e.disabled)("value",e.searchTerm?e.searchTerm:""),t.uIk("id",e.labelForId)("tabindex",e.tabIndex)("aria-expanded",e.isOpen)("aria-owns",e.isOpen?e.dropdownId:null)("aria-activedescendant",e.isOpen?null==e.itemsList||null==e.itemsList.markedItem?null:e.itemsList.markedItem.htmlId:null)}}function re(r,n){1&r&&t._UZ(0,"div",22)}function P(r,n){}function R(r,n){if(1&r&&(t.ynx(0),t.YNc(1,re,1,0,"ng-template",null,20,t.W1O),t.YNc(3,P,0,0,"ng-template",21),t.BQk()),2&r){const e=t.MAs(2),s=t.oxw();t.xp6(3),t.Q6J("ngTemplateOutlet",s.loadingSpinnerTemplate||e)}}function ae(r,n){if(1&r&&(t.TgZ(0,"span",23),t.ALo(1,"translate"),t.TgZ(2,"span",24),t._uU(3,"\xd7"),t.qZA()()),2&r){const e=t.oxw();t.s9C("title",t.lcZ(1,1,e.clearAllText))}}function ce(r,n){if(1&r&&t._UZ(0,"span",30),2&r){const e=t.oxw().$implicit,s=t.oxw(2);t.Q6J("ngItemLabel",e.label)("escape",s.escapeHTML)}}function S(r,n){}const m=function(r,n,e,s){return{item:r,item$:n,index:e,searchTerm:s}};function l(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",28),t.NdJ("click",function(i){const g=t.CHM(e).$implicit;return t.oxw(2).toggleItem(g,i)})("mouseover",function(){const c=t.CHM(e).$implicit;return t.oxw(2).onItemHover(c)}),t.YNc(1,ce,1,2,"ng-template",null,29,t.W1O),t.YNc(3,S,0,0,"ng-template",14),t.qZA()}if(2&r){const e=n.$implicit,s=t.MAs(2),i=t.oxw(2);t.ekj("j-option-disabled",e.disabled)("j-option-selected",e.selected)("j-optgroup",e.children)("j-option",!e.children)("j-option-child",!!e.parent)("j-option-marked",e===i.itemsList.markedItem),t.uIk("role",e.children?"group":"option")("aria-selected",e.selected)("id",null==e?null:e.htmlId),t.xp6(3),t.Q6J("ngTemplateOutlet",e.children?i.optgroupTemplate||s:i.optionTemplate||s)("ngTemplateOutletContext",t.l5B(17,m,e.value,e,e.index,i.searchTerm))}}function d(r,n){if(1&r&&(t.TgZ(0,"span")(1,"span",33),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&r){const e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,e.addTagText)),t.xp6(2),t.hij('"',e.searchTerm,'"')}}function T(r,n){}const C=function(r){return{searchTerm:r}};function J(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",31),t.NdJ("mouseover",function(){return t.CHM(e),t.oxw(2).itemsList.unmarkItem()})("click",function(){return t.CHM(e),t.oxw(2).selectTag()}),t.YNc(1,d,5,4,"ng-template",null,32,t.W1O),t.YNc(3,T,0,0,"ng-template",14),t.qZA()}if(2&r){const e=t.MAs(2),s=t.oxw(2);t.ekj("j-option-marked",!s.itemsList.markedItem),t.xp6(3),t.Q6J("ngTemplateOutlet",s.tagTemplate||e)("ngTemplateOutletContext",t.VKq(4,C,s.searchTerm))}}function V(r,n){if(1&r&&(t.TgZ(0,"div",35)(1,"span",36),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&r){const e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,1,e.notFoundText))}}function he(r,n){}function pe(r,n){if(1&r&&(t.ynx(0),t.YNc(1,V,4,3,"ng-template",null,34,t.W1O),t.YNc(3,he,0,0,"ng-template",14),t.BQk()),2&r){const e=t.MAs(2),s=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",s.notFoundTemplate||e)("ngTemplateOutletContext",t.VKq(2,C,s.searchTerm))}}function ue(r,n){if(1&r&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.Oqu(t.lcZ(2,1,e.typeToSearchText))}}function me(r,n){}function _e(r,n){if(1&r&&(t.ynx(0),t.YNc(1,ue,3,3,"ng-template",null,37,t.W1O),t.YNc(3,me,0,0,"ng-template",21),t.BQk()),2&r){const e=t.MAs(2),s=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",s.typeToSearchTemplate||e)}}function fe(r,n){if(1&r&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.Oqu(t.lcZ(2,1,e.loadingText))}}function ge(r,n){}function Te(r,n){if(1&r&&(t.ynx(0),t.YNc(1,fe,3,3,"ng-template",null,38,t.W1O),t.YNc(3,ge,0,0,"ng-template",14),t.BQk()),2&r){const e=t.MAs(2),s=t.oxw(2);t.xp6(3),t.Q6J("ngTemplateOutlet",s.loadingTextTemplate||e)("ngTemplateOutletContext",t.VKq(2,C,s.searchTerm))}}function ve(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"j-dropdown-panel",25),t.NdJ("update",function(i){return t.CHM(e),t.oxw().viewPortItems=i})("scroll",function(i){return t.CHM(e),t.oxw().scroll.emit(i)})("scrollToEnd",function(i){return t.CHM(e),t.oxw().scrollToEnd.emit(i)})("outsideClick",function(){return t.CHM(e),t.oxw().close()}),t.ynx(1),t.YNc(2,l,4,22,"div",26),t.YNc(3,J,4,6,"div",27),t.BQk(),t.YNc(4,pe,4,4,"ng-container",3),t.YNc(5,_e,4,1,"ng-container",3),t.YNc(6,Te,4,4,"ng-container",3),t.qZA()}if(2&r){const e=t.oxw();t.ekj("j-select-multiple",e.multiple),t.Q6J("virtualScroll",e.virtualScroll)("bufferAmount",e.bufferAmount)("appendTo",e.appendTo)("position",e.dropdownPosition)("headerTemplate",e.headerTemplate)("footerTemplate",e.footerTemplate)("filterValue",e.searchTerm)("items",e.itemsList.filteredItems)("markedItem",e.itemsList.markedItem)("ngClass",e.appendTo?e.classes:null)("id",e.dropdownId),t.xp6(2),t.Q6J("ngForOf",e.viewPortItems)("ngForTrackBy",e.trackByOption),t.xp6(1),t.Q6J("ngIf",e.showAddTag),t.xp6(1),t.Q6J("ngIf",e.showNoItemsFound()),t.xp6(1),t.Q6J("ngIf",e.showTypeToSearch()),t.xp6(1),t.Q6J("ngIf",e.loading&&0===e.itemsList.filteredItems.length)}}const de=new t.OlP("j-select-selection-model"),xe=(0,B.F)(class be{constructor(n,e,s,i,c){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=s,this._parentFormGroup=i,this.ngControl=c}});let Se=(()=>{class r extends xe{constructor(e,s,i,c,g,O,M,Y,G,A){super(g,G,M,Y,O),this.classes=e,this.autoFocus=s,this.ngControl=O,this._cd=A,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=H=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.controlType="select",this.blurEvent=new t.vpe,this.focusEvent=new t.vpe,this.changeEvent=new t.vpe,this.openEvent=new t.vpe,this.closeEvent=new t.vpe,this.searchEvent=new t.vpe,this.clearEvent=new t.vpe,this.addEvent=new t.vpe,this.removeEvent=new t.vpe,this.scroll=new t.vpe,this.scrollToEnd=new t.vpe,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=(0,y.generateUniqueId)(),this.id=this.dropdownId,this.escapeHTML=!0,this.useDefaultClass=!0,this.stateChanges=new x.xQ,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new x.xQ,this._keyPress$=new x.xQ,this._onChange=H=>{},this._onTouched=()=>{},this.clearItem=H=>{const $=this.selectedItems.find(we=>we.value===H);this.unselect($)},this.trackByOption=(H,$)=>this.trackByFn?this.trackByFn($.value):$,this.ngControl&&(this.ngControl.valueAccessor=this),this._mergeGlobalConfig(i),this.itemsList=new D(this,c()),this.element=g.nativeElement}get items(){return this._items}set items(e){this._itemsAreUsed=!0,this._items=e}get compareWith(){return this._compareWith}set compareWith(e){if(!(0,f.mf)(e))throw Error("`compareWith` must be a function.");this._compareWith=e}get value(){return this._value}set value(e){e!==this._value&&(this.writeValue(e),this._value=e)}get clearSearchOnAdd(){return(0,f.$K)(this._clearSearchOnAdd)?this._clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(e){this._clearSearchOnAdd=e}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}get shouldLabelFloat(){return this.isOpen&&this.searchable||this.searchable&&this.focused||!this.empty}get empty(){return!this.hasValue}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(e=>e.value)}get hasValue(){return this.selectedItems.some(e=>e.value)}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){}ngOnChanges(e){e.multiple&&this.itemsList.clearSelected(),e.items&&this._setItems(e.items.currentValue||[]),e.isOpen&&(this._manualOpen=(0,f.$K)(e.isOpen.currentValue))}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngAfterViewInit(){this._handleKeyPresses(),this._setInputAttributes(),this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),(0,f.$K)(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(e){if(k.VD[e.which]){if(!1===this.keyDownFn(e))return;this.handleKeyCode(e)}else e.key&&1===e.key.length&&this._keyPress$.next(e.key.toLocaleLowerCase())}handleKeyCode(e){switch(e.which){case k.VD.ArrowDown:this._handleArrowDown(e);break;case k.VD.ArrowUp:this._handleArrowUp(e);break;case k.VD.Space:this._handleSpace(e);break;case k.VD.Enter:this._handleEnter(e);break;case k.VD.Tab:this._handleTab(e);break;case k.VD.Esc:this.close(),e.preventDefault();break;case k.VD.Backspace:this._handleBackspace()}}handleMousedown(e){const s=e.target;"INPUT"!==s.tagName&&e.preventDefault(),s.classList.contains("j-clear-wrapper")?this.handleClearClick():s.classList.contains("j-arrow-wrapper")?this.handleArrowClick():s.classList.contains("j-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}onContainerClick(e){this.handleMousedown(e)}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){!this.clearable||(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(e){this.itemsList.clearSelected(),this._handleWriteValue(e),this._cd.markForCheck()}setDescribedByIds(e){}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled=e}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this.itemsList.maxItemsSelected||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchable&&!this.searchTerm&&this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this.stateChanges.next(),this._cd.markForCheck())}toggleItem(e,s){s&&s.stopPropagation(),e&&!e.disabled&&!this.disabled&&(this.multiple&&e.selected?this.unselect(e):this.select(e),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(e){e.selected||(this.itemsList.select(e),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(e.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(e){!e||(this.itemsList.unselect(e),this.focus(),this._updateNgModel(),this.removeEvent.emit(e))}selectTag(){let e;e=(0,f.mf)(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const s=i=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(i,null):this.itemsList.addItem(i);(0,f.tI)(e)?e.then(i=>this.select(s(i))).catch(()=>{}):e&&this.select(s(e))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}get showAddTag(){if(!this._validTerm)return!1;const e=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(s=>s.label.toLowerCase()===e)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(s=>s.label.toLowerCase()===e))&&!this.loading}showNoItemsFound(){const e=0===this.itemsList.filteredItems.length;return(e&&!this._isTypeahead&&!this.loading||e&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,!this.searchWhileComposing&&this.filter(e)}filter(e){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=e,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(e),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:e,items:this.itemsList.filteredItems.map(s=>s.value)}),this.open())}onInputFocus(e){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("j-select-focused"),this.focusEvent.emit(e),this.focused=!0,this.stateChanges.next())}onInputBlur(e){this.element.classList.remove("j-select-focused"),this.blurEvent.emit(e),!this.isOpen&&!this.disabled&&(this._onTouched(),this.stateChanges.next(),this._cd.markForCheck()),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(e){e.disabled||this.itemsList.markItem(e)}detectChanges(){this._cd.destroyed||this._cd.markForCheck()}_setSearchTermFromItems(){const e=this.selectedItems&&this.selectedItems[0];this.searchTerm=e&&e.label||null}_setItems(e){const s=e[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=(0,f.$K)(s)?!(0,f.Kn)(s):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(e),e.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&(0,f.$K)(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const e=i=>{this.items=i.map(c=>({$ngOptionValue:c.value,$ngOptionLabel:c.elementRef.nativeElement.innerHTML,disabled:c.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},s=()=>{const i=(0,v.T)(this.ngOptions.changes,this._destroy$);(0,v.T)(...this.ngOptions.map(c=>c.stateChange$)).pipe((0,o.R)(i)).subscribe(c=>{const g=this.itemsList.findItem(c.value);g.disabled=c.disabled,g.label=c.label||g.label})};this.ngOptions.changes.pipe((0,L.O)(this.ngOptions),(0,o.R)(this._destroy$)).subscribe(i=>{this.bindLabel=this._defaultLabel,e(i),s()})}_isValidWriteValue(e){if(!(0,f.$K)(e)||this.multiple&&""===e||Array.isArray(e)&&0===e.length)return!1;const s=i=>!(!(0,f.$K)(this.compareWith)&&(0,f.Kn)(i)&&this.bindValue);return this.multiple?!!Array.isArray(e)&&e.every(i=>s(i)):s(e)}_handleWriteValue(e){if(!this._isValidWriteValue(e))return;const s=i=>{let c=this.itemsList.findItem(i);if(c)this.itemsList.select(c);else{const g=(0,f.Kn)(i),O=!g&&!this.bindValue;g||O?this.itemsList.select(this.itemsList.mapItem(i,null)):this.bindValue&&i&&(c={[this.bindLabel]:null,[this.bindValue]:i},this.itemsList.select(this.itemsList.mapItem(c,null)))}};this.multiple?e.forEach(i=>s(i)):s(e)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,o.R)(this._destroy$),(0,j.b)(e=>this._pressedKeys.push(e)),(0,h.b)(200),(0,_.h)(()=>this._pressedKeys.length>0),(0,w.U)(()=>this._pressedKeys.join(""))).subscribe(e=>{const s=this.itemsList.findByLabel(e);s&&(this.isOpen?this.itemsList.markItem(s):this.select(s)),this._pressedKeys=[]})}_setInputAttributes(){const e=this.searchInput.nativeElement,s=Object.assign({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(const i of Object.keys(s))e.setAttribute(i,s[i])}_updateNgModel(){const e=[];for(const i of this.selectedItems)if(this.bindValue){let c=null;c=i.children?i.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(i.value,this.bindValue),e.push(c)}else e.push(i.value);const s=this.selectedItems.map(i=>i.value);this.multiple?(this._onChange(e),this.changeEvent.emit(s)):(this._onChange((0,f.$K)(e[0])?e[0]:null),this.changeEvent.emit(s[0]))}_clearSearch(){!this.searchTerm||(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(e){this.searchTerm=e,this._isTypeahead&&this.typeahead.next(e)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.multiple&&this.appendTo&&this.dropdownPanel.adjustPosition()}_handleTab(e){!1===this.isOpen&&!this.addTag||(this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),e.preventDefault()):this.showAddTag?(this.selectTag(),e.preventDefault()):this.close():this.close())}_handleEnter(e){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}e.preventDefault()}_handleSpace(e){this.isOpen||this._manualOpen||(this.open(),e.preventDefault())}_handleArrowDown(e){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),e.preventDefault()}_handleArrowUp(e){!this.isOpen||(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),e.preventDefault())}_nextItemIsTag(e){const s=this.itemsList.markedIndex+e;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(s<0||s===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const e=this.searchTerm&&this.searchTerm.trim();return e&&e.length>=this.minTermLength}_mergeGlobalConfig(e){this.placeholder=this.placeholder||e.placeholder,this.notFoundText=this.notFoundText||e.notFoundText,this.typeToSearchText=this.typeToSearchText||e.typeToSearchText,this.addTagText=this.addTagText||e.addTagText,this.loadingText=this.loadingText||e.loadingText,this.clearAllText=this.clearAllText||e.clearAllText,this.virtualScroll=(0,f.$K)(this.virtualScroll)?this.virtualScroll:!!(0,f.$K)(e.disableVirtualScroll)&&!e.disableVirtualScroll,this.openOnEnter=(0,f.$K)(this.openOnEnter)?this.openOnEnter:e.openOnEnter,this.appendTo=this.appendTo||e.appendTo,this.bindValue=this.bindValue||e.bindValue,this.appearance=this.appearance||e.appearance}}return r.\u0275fac=function(e){return new(e||r)(t.$8M("class"),t.$8M("autofocus"),t.Y36(z),t.Y36(de),t.Y36(t.SBq),t.Y36(N.a5,10),t.Y36(N.F,8),t.Y36(N.sg,8),t.Y36(X.rD),t.Y36(t.sBO))},r.\u0275cmp=t.Xpm({type:r,selectors:[["j-select"]],contentQueries:function(e,s,i){if(1&e&&(t.Suo(i,I.Ok,5,t.Rgc),t.Suo(i,I.u3,5,t.Rgc),t.Suo(i,I.Fe,5,t.Rgc),t.Suo(i,I.aR,5,t.Rgc),t.Suo(i,I.BN,5,t.Rgc),t.Suo(i,I.yI,5,t.Rgc),t.Suo(i,I.qg,5,t.Rgc),t.Suo(i,I.e5,5,t.Rgc),t.Suo(i,I.NK,5,t.Rgc),t.Suo(i,I.XF,5,t.Rgc),t.Suo(i,I.dR,5,t.Rgc),t.Suo(i,u,5)),2&e){let c;t.iGM(c=t.CRH())&&(s.optionTemplate=c.first),t.iGM(c=t.CRH())&&(s.optgroupTemplate=c.first),t.iGM(c=t.CRH())&&(s.labelTemplate=c.first),t.iGM(c=t.CRH())&&(s.multiLabelTemplate=c.first),t.iGM(c=t.CRH())&&(s.headerTemplate=c.first),t.iGM(c=t.CRH())&&(s.footerTemplate=c.first),t.iGM(c=t.CRH())&&(s.notFoundTemplate=c.first),t.iGM(c=t.CRH())&&(s.typeToSearchTemplate=c.first),t.iGM(c=t.CRH())&&(s.loadingTextTemplate=c.first),t.iGM(c=t.CRH())&&(s.tagTemplate=c.first),t.iGM(c=t.CRH())&&(s.loadingSpinnerTemplate=c.first),t.iGM(c=t.CRH())&&(s.ngOptions=c)}},viewQuery:function(e,s){if(1&e&&(t.Gf(a.I,5),t.Gf(q,5)),2&e){let i;t.iGM(i=t.CRH())&&(s.dropdownPanel=i.first),t.iGM(i=t.CRH())&&(s.searchInput=i.first)}},hostAttrs:["role","listbox"],hostVars:20,hostBindings:function(e,s){1&e&&t.NdJ("keydown",function(c){return s.handleKeyDown(c)}),2&e&&t.ekj("j-select",s.useDefaultClass)("j-select-single",!s.multiple)("j-select-typeahead",s.typeahead)("j-select-multiple",s.multiple)("j-select-taggable",s.addTag)("j-select-searchable",s.searchable)("j-select-clearable",s.clearable)("j-select-opened",s.isOpen)("j-select-disabled",s.disabled)("j-select-filtered",s.filtered)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",errorStateMatcher:"errorStateMatcher",searchMask:"searchMask",keyDownFn:"keyDownFn",shadow:"shadow",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",value:"value",clearSearchOnAdd:"clearSearchOnAdd",required:"required"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[t._Bn([{provide:W.G,useExisting:r},U.o]),t.qOj,t.TTD],decls:15,vars:12,consts:[[1,"j-select-container"],[1,"j-value-container","form-control"],[1,"j-placeholder"],[4,"ngIf"],[1,"j-search-input"],[4,"ngIf","ngIfElse"],["noMask",""],["class","j-clear-wrapper",3,"title",4,"ngIf"],[1,"j-arrow-wrapper"],[1,"j-arrow"],["class","j-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","j-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","j-value",3,"j-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"j-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"j-value-icon","left",3,"click"],[1,"j-value-label","j-value-label-default","text-truncate",3,"ngItemLabel","escape"],["role","combobox",3,"readOnly","disabled","value","jShadow","mask","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["role","combobox",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"j-spinner-loader"],[1,"j-clear-wrapper",3,"title"],["aria-hidden","true",1,"j-clear"],[1,"j-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","j-option",3,"j-option-disabled","j-option-selected","j-optgroup","j-option","j-option-child","j-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","j-option","role","option",3,"j-option-marked","mouseover","click",4,"ngIf"],[1,"j-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"j-option-label",3,"ngItemLabel","escape"],["role","option",1,"j-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"j-tag-label"],["defaultNotFoundTemplate",""],[1,"j-option","j-option-disabled"],[1,"text-center","text-muted"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.YNc(4,se,2,2,"ng-container",3),t.YNc(5,Q,1,5,null,3),t.TgZ(6,"div",4),t.YNc(7,le,3,10,"ng-container",5),t.YNc(8,oe,2,8,"ng-template",null,6,t.W1O),t.qZA()(),t.YNc(10,R,4,1,"ng-container",3),t.YNc(11,ae,4,3,"span",7),t.TgZ(12,"span",8),t._UZ(13,"span",9),t.qZA()(),t.YNc(14,ve,7,19,"j-dropdown-panel",10)),2&e){const i=t.MAs(9);t.ekj("j-appearance-outline","outline"===s.appearance)("j-has-value",s.hasValue),t.xp6(3),t.Oqu(s.placeholder),t.xp6(1),t.Q6J("ngIf",!s.multiLabelTemplate&&s.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",s.multiLabelTemplate&&s.selectedValues.length>0),t.xp6(2),t.Q6J("ngIf",s.searchMask)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",s.loading),t.xp6(1),t.Q6J("ngIf",s.showClear()),t.xp6(3),t.Q6J("ngIf",s.isOpen)}},styles:[".j-select{position:relative;display:block;width:100%}.j-select [hidden]{display:none}.j-select.j-select-searchable .j-select-container .j-value-container .j-search-input{opacity:1}.j-select.j-select-disabled .j-select-container .j-value-container .j-placeholder,.j-select.j-select-disabled .j-select-container .j-value-container .j-value{-webkit-user-select:none;user-select:none;cursor:default}.j-select.j-select-disabled .j-arrow-wrapper{cursor:default}.j-select.j-select-filtered .j-placeholder{display:none}.j-select .j-select-container{cursor:default;display:flex;outline:none;overflow:hidden;width:100%}.j-select .j-select-container .j-value-container{display:flex;flex:1;align-items:center}.j-select .j-select-container .j-value-container .j-search-input{opacity:0}.j-select .j-select-container .j-value-container .j-search-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding-left:2px;cursor:default;width:100%}.j-select .j-select-container .j-value-container .j-search-input>input::-ms-clear{display:none}.j-select .j-select-container .j-value-container .j-search-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.j-select.j-select-single.j-select-filtered .j-select-container .j-value-container .j-value{visibility:hidden}.j-select.j-select-single .j-select-container .j-value-container{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-select.j-select-single .j-select-container .j-value-container .j-value{padding-left:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-select.j-select-single .j-select-container .j-value-container .j-value .j-value-icon{display:none}.j-select.j-select-single .j-select-container .j-value-container .j-search-input{top:1.2em;position:absolute;left:0;width:100%}.j-select.j-select-multiple.j-select-disabled>.j-select-container .j-value-container .j-value .j-value-icon{display:none}.j-select.j-select-multiple .j-select-container .j-value-container{flex-wrap:wrap}.j-select.j-select-multiple .j-select-container .j-value-container .j-placeholder{position:absolute}.j-select.j-select-multiple .j-select-container .j-value-container .j-value{white-space:nowrap}.j-select.j-select-multiple .j-select-container .j-value-container .j-value.j-value-disabled .j-value-icon{display:none}.j-select.j-select-multiple .j-select-container .j-value-container .j-value .j-value-icon{cursor:pointer}.j-select.j-select-multiple .j-select-container .j-value-container .j-search-input{flex:1;z-index:2}.j-select.j-select-multiple .j-select-container .j-value-container .j-placeholder{z-index:1}.j-select .j-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.j-select .j-clear-wrapper .j-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.j-select .j-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.j-select .j-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.j-select .j-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.j-select .j-arrow-wrapper .j-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:absolute}.j-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.j-dropdown-panel .j-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:300px;overflow-y:auto}.j-dropdown-panel .j-dropdown-panel-items .j-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-dropdown-panel .j-dropdown-panel-items .j-option{box-sizing:border-box;cursor:pointer;display:block}.j-dropdown-panel .j-dropdown-panel-items .j-option .highlighted{font-weight:700;text-decoration:underline}.j-dropdown-panel .j-dropdown-panel-items .j-option.disabled{cursor:default}.j-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch;padding-right:.5rem}.j-dropdown-panel .scroll-host::-webkit-scrollbar{width:8px}.j-dropdown-panel .scroll-host::-webkit-scrollbar-track{background:#fff}.j-dropdown-panel .scroll-host::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}.j-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.j-dropdown-panel .total-padding{width:1px;opacity:0}.j-form-field-type-select .j-form-field .j-form-field--infix{border-top:0px;padding:0}.j-form-field-type-select .j-form-field-flex{display:flex}.j-form-field-type-select .j-form-field--label-wrapper{top:0;box-sizing:border-box}.j-select:not(.j-select-filtered) .j-has-value .input-shadow{opacity:0}.j-value-container{position:relative;border:0px;margin-left:.5em;margin-right:.5em;border-radius:0;background:none;padding:0;height:3.5em}.j-form-field-has-label .j-value-container{padding-top:1.7em;padding-bottom:.4em}.j-dropdown-panel{background-color:#fff;padding:1.5rem}.j-dropdown-panel.j-select-bottom{border-radius:0 0 8px 8px;margin-top:1px;box-shadow:0 14px 16px #0000000d}.j-dropdown-panel.j-select-top{border-radius:8px 8px 0 0;margin-bottom:2px;box-shadow:0 -1rem 3rem #1a1c1f2d}.j-dropdown-panel .j-option+.j-option{margin-top:.5rem}.j-value-label-default{display:block}.j-form-field-has-label .j-select.j-select-single .j-select-container .j-search-input{top:1.7em}\n"],encapsulation:2,changeDetection:0}),r})()},31259:(F,E,p)=>{p.d(E,{A:()=>f});var t=p(69808),o=p(75653),L=p(91319),j=p(2757),h=p(64409),_=p(46805),w=p(91995),x=p(5e3),v=p(67089),I=p(89854);let f=(()=>{class y{}return y.\u0275fac=function(k){return new(k||y)},y.\u0275mod=x.oAB({type:y}),y.\u0275inj=x.cJS({providers:[{provide:L.w,useValue:h.Uv}],imports:[[t.ez,w.m,_.yI.forChild()]]}),y})();x.B6R(L.F,[t.O5,t.sg,j.He,t.tP,_.hx,v.N,o.I,t.mk],[I.X$])},64409:(F,E,p)=>{p.d(E,{VD:()=>t,Uv:()=>o});var t=(()=>{return(j=t||(t={}))[j.Tab=9]="Tab",j[j.Enter=13]="Enter",j[j.Esc=27]="Esc",j[j.Space=32]="Space",j[j.ArrowUp=38]="ArrowUp",j[j.ArrowDown=40]="ArrowDown",j[j.Backspace=8]="Backspace",t;var j})();function o(){return new L}class L{constructor(){this._selected=[]}get value(){return this._selected}select(h,_,w){if(h.selected=!0,(!h.children||!_&&w)&&this._selected.push(h),_)if(h.parent){const x=h.parent.children.length,v=h.parent.children.filter(I=>I.selected).length;h.parent.selected=x===v}else h.children&&(this._setChildrenSelectedState(h.children,!0),this._removeChildren(h),this._selected=w&&this._activeChildren(h)?[...this._selected.filter(x=>x.parent!==h),h]:[...this._selected,...h.children.filter(x=>!x.disabled)])}unselect(h,_){if(this._selected=this._selected.filter(w=>w!==h),h.selected=!1,_)if(h.parent&&h.parent.selected){const w=h.parent.children;this._removeParent(h.parent),this._removeChildren(h.parent),this._selected.push(...w.filter(x=>x!==h&&!x.disabled)),h.parent.selected=!1}else h.children&&(this._setChildrenSelectedState(h.children,!1),this._removeChildren(h))}clear(h){this._selected=h?this._selected.filter(_=>_.disabled):[]}_setChildrenSelectedState(h,_){for(const w of h)w.disabled||(w.selected=_)}_removeChildren(h){this._selected=[...this._selected.filter(_=>_.parent!==h),...h.children.filter(_=>_.parent===h&&_.disabled&&_.selected)]}_removeParent(h){this._selected=this._selected.filter(_=>_!==h)}_activeChildren(h){return h.children.every(_=>!_.disabled||_.selected)}}}}]);