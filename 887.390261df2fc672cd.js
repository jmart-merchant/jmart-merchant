"use strict";(self.webpackChunkjysan=self.webpackChunkjysan||[]).push([[887],{67887:(pt,f,i)=>{i.r(f),i.d(f,{ExtraSettingsModule:()=>ut});var d=i(69808),y=i(91995),l=i(59516),t=i(5e3),R=i(99430),_=i(16831),F=i(77337),I=i(194),c=i(89854);const L=function(){return["faq"]},A=function(){return["feature-request"]};let Z=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-extra-settings-tabs"]],decls:5,vars:4,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"SETTINGS.FAQ.TITLE"),t.qZA(),t.TgZ(3,"a",1),t._uU(4,"SETTINGS.FEATURE_REQUEST.TITLE"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(2,L)),t.xp6(2),t.Q6J("routerLink",t.DdM(3,A)))},directives:[l.yS,l.Od,c.Pi],styles:[".tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),n})(),U=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-extra-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title","mb-3"]],template:function(e,o){1&e&&(t.TgZ(0,"j-layout-home")(1,"j-aside"),t._UZ(2,"j-nav-main"),t.qZA(),t.TgZ(3,"j-main")(4,"section",0)(5,"section",1)(6,"section",2)(7,"h2",3),t._uU(8,"EXTRA_SETTINGS.TITLE"),t.qZA(),t._UZ(9,"j-extra-settings-tabs")(10,"router-outlet"),t.qZA()()()()())},directives:[R.Y,_.l,F.F,I.C,c.Pi,Z,l.lC],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:hover{color:#ef5630!important}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}\n"],encapsulation:2}),n})();var p=i(70655),g=i(42654),N=i(72986),h=i(40520),S=i(82524);let M=(()=>{class n{constructor(e){this.apiService=e}getFaq(e){return(0,p.mG)(this,void 0,void 0,function*(){return this.apiService.get(`faqs/${e}`)})}getList(){var e;return(0,p.mG)(this,void 0,void 0,function*(){const a=new h.WM;let u=new h.LE;const C=yield this.apiService.get("faqs",a,u,{observe:"response"});return{list:C.body,totalCount:(null===(e=C.body)||void 0===e?void 0:e.length)||0}})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.sM))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var O=i(54507),Q=i(68221),j=i(69544),k=i(25021);let G=(()=>{class n{constructor(){this.isCollapsed=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-faq-item"]],inputs:{faq:"faq",isCollapsed:"isCollapsed"},decls:9,vars:4,consts:[[1,"faq__block","faq__block--collapsible"],[3,"isCollapsed"],[1,"faq__collapse","d-flex","justify-content-between"],[1,"text-dark"],[1,"faq__arrow",3,"inlineSVG"],[1,"faq_body","text-muted"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"j-collapsible",1)(2,"j-collapsible-trigger")(3,"div",2)(4,"strong",3),t._uU(5),t.qZA(),t._UZ(6,"span",4),t.qZA()(),t.TgZ(7,"j-collapsible-body",5),t._uU(8),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("isCollapsed",!1),t.xp6(4),t.Oqu(o.faq.question),t.xp6(1),t.Q6J("inlineSVG","assets/icons/shared/dropdown.svg"),t.xp6(2),t.hij(" ",o.faq.answer," "))},directives:[O.t,Q.k,j.d$,k.p],styles:[".faq__block{background:#fff;border-radius:.5rem;padding:.65rem 20px;margin:.75rem 0}.faq__block .faq__block--collapsible{padding-top:0;padding-bottom:0;transition:all .2s ease-in-out}.faq__arrow{transition:all .2s ease-in-out;transform:rotate(0)}.faq__collapse{padding:.65rem 0;cursor:pointer;align-items:center}.faq__body{display:block;transition:all .2s ease-in-out}.j-collapsed .faq__body{padding-bottom:1rem}.j-collapsed .faq__collapse .faq__arrow{transform:rotate(540deg)}\n"],encapsulation:2}),n})();var E=i(23918);function J(n,s){1&n&&(t.TgZ(0,"div",4)(1,"strong",5),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SHARED.LIST_LOADING_ERR_REFRESH")," "))}function D(n,s){if(1&n&&(t.TgZ(0,"div",7),t._UZ(1,"j-faq-item",8),t.qZA()),2&n){const e=s.$implicit;t.Q6J("id",e.orderNum),t.xp6(1),t.Q6J("faq",e)}}function Y(n,s){if(1&n&&(t.ynx(0),t.YNc(1,D,2,2,"div",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.faqList)}}const w=function(){return{height:"52px","background-color":"#ECEEF1"}};function P(n,s){1&n&&t._UZ(0,"ngx-skeleton-loader",9),2&n&&t.Q6J("theme",t.DdM(1,w))}let T=(()=>{class n{constructor(e,o){this.route=e,this.faqService=o,this.errorText="",this.subscription=new g.w,this.orderNum=0;const a=this.route.queryParams.pipe((0,N.q)(1)).subscribe(u=>{this.loadFaqList()});this.subscription.add(a)}ngOnDestroy(){this.subscription.unsubscribe()}loadFaqList(){return(0,p.mG)(this,void 0,void 0,function*(){this.errorText=null,this.isLoading=!0;try{const e=yield this.faqService.getList();this.faqList=e.list,this.errorText=e.totalCount>0?null:"no data",this.orderNum=parseInt(this.faqList[this.faqList.length-1].orderNum)||0}catch(e){this.errorText=e.status?e.status:"unknown error",this.faqList=[]}finally{this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-settings-faq"]],decls:4,vars:3,consts:[[1,"faq"],["class","alert alert-danger faq","role","alert",4,"ngIf"],[4,"ngIf"],["count","6",3,"theme",4,"ngIf"],["role","alert",1,"alert","alert-danger","faq"],[1,"d-block"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[3,"faq"],["count","6",3,"theme"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,J,4,3,"div",1),t.YNc(2,Y,2,1,"ng-container",2),t.YNc(3,P,1,2,"ngx-skeleton-loader",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.errorText),t.xp6(1),t.Q6J("ngIf",o.faqList),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[d.O5,d.sg,G,E.xr],pipes:[c.X$],styles:[".faq[_ngcontent-%COMP%]{margin:2rem 0}"]}),n})();var r=i(93075),X=i(591),x=(i(32110),i(40703));let b=(()=>{class n{constructor(e){this.modal=e}closeModal(){this.modal.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.Kz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-function-message-success"]],decls:11,vars:3,consts:[[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t.ALo(3,"translate"),t.TgZ(4,"h3",3),t._uU(5," SETTINGS.FEATURE_REQUEST.SUCCESS_MODAL.TITLE "),t.qZA(),t.TgZ(6,"p",4),t._uU(7," SETTINGS.FEATURE_REQUEST.SUCCESS_MODAL.DESCRIPTION "),t.qZA()(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return o.closeModal()}),t._uU(10," SHARED.CLOSE "),t.qZA()()),2&e&&(t.xp6(2),t.s9C("alt",t.lcZ(3,1,"SHARED.DONE")))},directives:[c.Pi],pipes:[c.X$],styles:[""]}),n})();i(42710),i(72551);let H=(()=>{class n{constructor(e){this.apiService=e}create(e){return this.apiService.post("feature-requests/",e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.sM))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=i(66013),W=i(50235),K=i(85814);function tt(n,s){1&n&&(t.TgZ(0,"div",4)(1,"strong",5),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SHARED.LIST_LOADING_ERR_REFRESH")," "))}function et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"h6",7),t._uU(2,"SETTINGS.FEATURE_REQUEST.SUB_TITLE"),t.qZA(),t._UZ(3,"div",8),t.TgZ(4,"form",9),t._UZ(5,"j-input",10),t.ALo(6,"async"),t.TgZ(7,"div",11)(8,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(9,"SETTINGS.FEATURE_REQUEST.SEND "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("label","SETTINGS.FEATURE_REQUEST.INPUT_LABEL")("inputExtra",t.lcZ(6,10,e.bodyLengthMessage$))("maxLength",e.bodyMaxLength)("formControl",e.f.description)("hasError",e.f.description.invalid&&e.isSubmitted)("errorText",e.mapMessageErrors())("isClearable",!1),t.xp6(3),t.Q6J("jLoading",e.isSubmitting)("disabled",e.isSubmitting||!e.form.valid)}}const nt=function(){return{height:"70px","background-color":"#ECEEF1"}},st=function(){return{height:"130px","background-color":"#ECEEF1"}},ot=function(){return{height:"56px",width:"200px","background-color":"#ECEEF1"}};function it(n,s){1&n&&(t.ynx(0),t._UZ(1,"ngx-skeleton-loader",13)(2,"ngx-skeleton-loader",13),t.TgZ(3,"div",11),t._UZ(4,"ngx-skeleton-loader",13),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("theme",t.DdM(3,nt)),t.xp6(1),t.Q6J("theme",t.DdM(4,st)),t.xp6(2),t.Q6J("theme",t.DdM(5,ot)))}var m=(()=>((m||(m={})).SAVE_REQUEST_ERROR="NOTIFICATIONS.SAVE_REQUEST_ERROR",m))();const ct=[{path:"",component:U,data:{title:"EXTRA_SETTINGS.TITLE"},children:[{path:"faq",component:T},{path:"feature-request",component:(()=>{class n{constructor(e,o,a,u){this.modalService=e,this.featureRequestService=o,this.notifierService=a,this.translateService=u,this.errorText="",this.bodyMaxLength=1e3,this.bodyLengthMessage$=new X.X(`0/${this.bodyMaxLength}`),this.isSubmitted=!1,this.subscription=new g.w,this.form=new r.cw({description:new r.NI("",[r.kI.maxLength(this.bodyMaxLength),r.kI.required,r.kI.pattern("(?!^\\d+$)^.+$"),this.noWhitespaceValidator])}),this.listenDescription()}noWhitespaceValidator(e){return 0!==(e.value||"").trim().length?null:{whitespace:!0}}get f(){return this.form.controls}create(){return(0,p.mG)(this,void 0,void 0,function*(){if(!this.isSubmitting&&this.prepareCreate()){this.isSubmitting=!0;try{const o={description:this.f.description.value};yield this.featureRequestService.create(o),this.isSubmitting=!1,this.showSuccessModal()}catch(o){this.showNotification(m.SAVE_REQUEST_ERROR,"error"),this.isSubmitting=!1}}})}prepareCreate(){return this.isSubmitted=!0,!this.form.invalid}ngAfterViewInit(){const e=this.form.valueChanges.subscribe(o=>{this.isSubmitted=!1});this.subscription.add(e)}ngOnDestroy(){this.subscription.unsubscribe()}listenDescription(){this.f.description.valueChanges.subscribe(e=>{this.bodyLengthMessage$.next(`${e.length}/${this.bodyMaxLength}`)})}showSuccessModal(){return(0,p.mG)(this,void 0,void 0,function*(){const e=this.modalService.open(b,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield e.result,this.form.setValue({description:""})}catch(o){}})}showNotification(e,o="default"){const a=this.mapTranslate(e),u=this.translateService.instant(a);this.notifierService.notify(o,u)}mapTranslate(e){return`SETTINGS.FEATURE_REQUEST.${e}`}mapMessageErrors(){return this.f.description.errors?this.f.description.errors.maxlength?"ERRORS.MAX_LENGTH":void 0:null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.FF),t.Y36(H),t.Y36(z.lG),t.Y36(c.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["j-settings-feature-request"]],decls:4,vars:3,consts:[[1,"feature-request"],["class","alert alert-danger faq","role","alert",4,"ngIf"],["class","function-form",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","faq"],[1,"d-block"],[1,"function-form"],["translate","",1,"settings-heading"],["translate","SETTINGS.FEATURE_REQUEST.DESCRIPTION",1,"p2","mb-4"],[3,"formGroup"],["type","textarea","inputClass","j-input--medium-textarea",3,"label","inputExtra","maxLength","formControl","hasError","errorText","isClearable"],[1,"d-flex","justify-content-end"],["translate","","type","submit",1,"btn","btn-static","btn-primary","btn-lg",3,"jLoading","disabled","click"],[3,"theme"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,tt,4,3,"div",1),t.YNc(2,et,10,12,"div",2),t.YNc(3,it,5,6,"ng-container",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.errorText),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[d.O5,c.Pi,r._Y,r.JL,r.sg,W.N,r.JJ,r.oH,K.T,E.xr],pipes:[c.X$,d.Ov],styles:[".feature-request[_ngcontent-%COMP%]{margin:2rem 0;width:60%}"]}),n})()},{path:"**",redirectTo:"faq"}]}];let lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild(ct)],l.Bz]}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,y.m,lt,r.u5,r.UX]]}),n})()}}]);