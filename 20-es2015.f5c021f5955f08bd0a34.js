(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{oTLR:function(e,t,n){"use strict";n.r(t);var i=n("1kSV"),o=n("ofXK"),s=n("3Pt+"),c=n("A3+G"),l=n("5cNS"),a=n("tyNb"),r=n("y5b2"),d=function(e){return e.POS="POS",e.CASHIERS="CASHIERS",e}({}),b=function(e){return e.EDIT="EDIT",e.ADD="ADD",e}({}),p=function(e){return e.ALL="all",e.POS="pos",e.QR="qr",e}({}),h=function(e){return e.POS="pos",e.QR="qr",e}({});const u=[{label:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",value:r.e.DEFAULT},{label:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",value:r.e.AMOUNT_DESC},{label:"\u041f\u043e \u0441\u0443\u043c\u043c\u0435 \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044f",value:r.e.AMOUNT_ASC}];var m=n("L+ju"),f=n("lJxs"),g=n("+/Tu"),S=n("2Vo4"),C=function(e){return e.MAP="MAP",e.CONNECTJTOLECONFIRMATION="CONNECTJTOLECONFIRMATION",e.BASE="BASE",e}({}),w=n("wd/R"),P=n.n(w),O=n("fXoL"),v=n("quSY"),x=n("yZrb"),y=n("tk/3"),A=n("VnnJ"),T=n("ZF+8"),V=n("xErE");n("G54m");let k=(()=>{class e{constructor(e,t,n,i){this.companyService=e,this.apiService=t,this.userService=n,this.accountsService=i,this.companyId=null,this.bin=null,this.subscription=new v.a,this.subscription.add(this.companyService.currentCompany$.subscribe(e=>{this.companyId=e.id,this.bin=e.bin}))}getListPointsOfSell(){const e=this.getListPointsOfSellUrl(this.companyId);return this.apiService.get(e)}getListPointsOfSellUrl(e=""){return`companies/${e?`${e}`:""}/pos`}getPointOfSell(e){const t=this.getPointOfSellUrl(this.companyId,e);return this.apiService.get(t)}getPointOfSellUrl(e,t){if(e&&t)return`companies/${e}/pos/${t}`}getInformationByIin(e){return this.apiService.get(`companies/${this.companyId}/person/${e}`)}getStatementsList({dateTimeFrom:e,dateTimeTo:t,page:n,pageSize:i}){const o=(new y.h).set("dateTimeFrom",P()(e).format("YYYY-MM-DDTHH:mm:ss")).set("dateTimeTo",P()(t).format("yyyy-MM-DDTHH:mm:ss")).set("page",n).set("pageSize",i);return this.apiService.get(`companies/${this.companyId}/merchant/payments`,null,o)}get user(){return this.userService.user}get pointOfSellBin(){return this.companyService.currentCompany.bin}get accounts(){return this.accountsService.getAccountsList()}get connectionStateToJpay(){return this.apiService.get(`companies/${this.companyId}/merchant`)}createPointOfSell(e,t){const n=`companies/${this.companyId}/merchant:connect-to-jpay`,i=e,o=(new y.g).set(x.b.PHONE,t);return this.apiService.post(n,i,o)}get paymentsTotalInfo(){return this.apiService.get(`companies/${this.companyId}/merchant/payments/total-info`)}getAccountsByCompanyId(e){return this.apiService.get(`companies/${e}/accounts`)}updatePointOfSell(e,t){return this.apiService.put(`companies/${this.companyId}/pos/${t}`,e)}deleteCashier(e){return this.apiService.delete(`companies/${e.companyId}/pos/${e.posId}/cashiers/${e.cashierId}`)}}return e.\u0275fac=function(t){return new(t||e)(O.ec(A.a),O.ec(x.a),O.ec(T.h),O.ec(V.a))},e.\u0275prov=O.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W=(()=>{class e{constructor(){this.sellPointsActionForm=new s.k({name:new s.h("",s.H.required),address:new s.h("",s.H.required),assignSelf:new s.h,phoneNumber:new s.h}),this.cashiers=[],this.isReopeningSellPointsActionFormModal=!1,this.addressFromYandexMap="",this.isAssignSelf=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=O.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=n("4oqK"),R=n("QfCG"),I=n("2aJj"),M=n("ZVDf"),D=n("hsBV"),F=n("e8Ap"),j=n("2FF4"),E=n("sYmb");function L(e,t){if(1&e&&O.Sb(0,11),2&e){O.lc();const e=O.Dc(14);O.sc("ngTemplateOutlet",e)}}function N(e,t){if(1&e&&O.Sb(0,11),2&e){O.lc();const e=O.Dc(10);O.sc("ngTemplateOutlet",e)}}function Q(e,t){1&e&&O.Sb(0)}function G(e,t){if(1&e&&(O.Wb(0,"div",12),O.Wb(1,"div",13),O.Pc(2,Q,1,0,"ng-container",14),O.Rb(3,"label",15),O.Vb(),O.Wb(4,"div"),O.Wb(5,"p"),O.Rc(6),O.Vb(),O.Wb(7,"p",16),O.Rc(8),O.Vb(),O.Wb(9,"p",17),O.Rc(10),O.Vb(),O.Vb(),O.Vb()),2&e){const e=O.lc(),t=O.Dc(6);O.Ab(2),O.sc("ngTemplateOutlet",t),O.Ab(4),O.Vc("",e.user.lastname," ",e.user.firstname," ",e.user.middlename,""),O.Ab(2),O.Tc("\u0418\u0418\u041d: ",e.user.iin,""),O.Ab(2),O.Tc("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430: ",e.user.phone,"")}}function H(e,t){if(1&e){const e=O.Xb();O.Wb(0,"input",18),O.ic("change",(function(t){return O.Gc(e),O.lc().assignSelfChanges(t)})),O.Vb()}if(2&e){const e=O.lc();O.sc("formControl",e.sellPointsActionForm.controls.assignSelf)}}function B(e,t){if(1&e&&(O.Wb(0,"div",19),O.Wb(1,"j-form-field",20),O.Wb(2,"j-label"),O.Rc(3,"\u0424\u0418\u041e"),O.Vb(),O.Rb(4,"input",21),O.Vb(),O.Vb(),O.Wb(5,"div",22),O.Rb(6,"j-phone-input",23),O.Vb()),2&e){const e=t.cashier;O.Ab(4),O.sc("formControl",e.form.controls.fio),O.Ab(2),O.sc("formControl",e.form.controls.phone)}}function U(e,t){1&e&&O.Sb(0)}function $(e,t){if(1&e&&(O.Wb(0,"div",30),O.Wb(1,"div",45),O.Pc(2,U,1,0,"ng-container",14),O.Wb(3,"label",15),O.Rc(4,"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0431\u044f"),O.Vb(),O.Vb(),O.Vb()),2&e){O.lc(2);const e=O.Dc(6);O.Ab(2),O.sc("ngTemplateOutlet",e)}}function z(e,t){1&e&&O.Sb(0)}const J=function(e,t){return{cashier:e,i:t}};function q(e,t){if(1&e){const e=O.Xb();O.Wb(0,"li",47),O.Wb(1,"div",48),O.Wb(2,"p",49),O.Rc(3),O.Vb(),O.Wb(4,"button",50),O.ic("click",(function(n){O.Gc(e);const i=t.index;return O.lc(3).deleteCashierHandler(i)})),O.Vb(),O.Vb(),O.Pc(5,z,1,0,"ng-container",51),O.Vb()}if(2&e){const e=t.$implicit,n=t.index;O.lc(3);const i=O.Dc(8);O.Ab(3),O.Tc("\u041a\u0430\u0441\u0441\u0438\u0440 \u2116",n+1,""),O.Ab(2),O.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",O.yc(3,J,e,n))}}function X(e,t){if(1&e&&(O.Ub(0),O.Wb(1,"ul"),O.Pc(2,q,6,6,"li",46),O.Vb(),O.Tb()),2&e){const e=O.lc(2);O.Ab(2),O.sc("ngForOf",e.cashiers)}}function K(e,t){if(1&e&&O.Sb(0,11),2&e){O.lc(2);const e=O.Dc(12);O.sc("ngTemplateOutlet",e)}}function Y(e,t){if(1&e&&O.Sb(0,11),2&e){O.lc(2);const e=O.Dc(18);O.sc("ngTemplateOutlet",e)}}function Z(e,t){if(1&e){const e=O.Xb();O.Wb(0,"div",24),O.Wb(1,"div",25),O.Wb(2,"h4"),O.Rc(3),O.mc(4,"translate"),O.Vb(),O.Vb(),O.Wb(5,"div",26),O.Wb(6,"div",27),O.Wb(7,"form",28),O.Wb(8,"div",29),O.Wb(9,"div",30),O.Wb(10,"j-form-field",20),O.Wb(11,"j-label"),O.Rc(12,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),O.Vb(),O.Rb(13,"input",21),O.Vb(),O.Vb(),O.Wb(14,"div",30),O.Wb(15,"j-form-field",31),O.Wb(16,"j-label"),O.Rc(17,"\u0410\u0434\u0440\u0435\u0441"),O.Vb(),O.Rb(18,"input",21),O.Vb(),O.Vb(),O.Wb(19,"div",30),O.Wb(20,"p",32),O.Rc(21,"\u0421\u0447\u0435\u0442"),O.Vb(),O.Wb(22,"j-account-dropdown",33),O.ic("selected",(function(t){return O.Gc(e),O.lc().onAccountSelected(t)})),O.Vb(),O.Vb(),O.Wb(23,"div",34),O.Wb(24,"p",32),O.Rc(25,"\u041a\u0430\u0441\u0441\u0438\u0440\u044b"),O.Vb(),O.Wb(26,"button",35),O.ic("click",(function(t){return O.Gc(e),O.lc().addCashiersHandler()})),O.Wb(27,"p",36),O.Rc(28,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435"),O.Vb(),O.Vb(),O.Vb(),O.Pc(29,$,5,1,"div",37),O.Pc(30,X,3,1,"ng-container",38),O.Pc(31,K,1,1,"ng-container",39),O.Vb(),O.Pc(32,Y,1,1,"ng-container",39),O.Vb(),O.Vb(),O.Vb(),O.Wb(33,"div",40),O.Wb(34,"button",41),O.ic("click",(function(t){return O.Gc(e),O.lc().onClose()})),O.Rc(35),O.mc(36,"translate"),O.Vb(),O.Wb(37,"button",42),O.ic("click",(function(t){return O.Gc(e),O.lc().onSaveClick()})),O.Rc(38),O.mc(39,"translate"),O.Vb(),O.Vb(),O.Vb(),O.Wb(40,"div",43),O.Wb(41,"button",44),O.ic("click",(function(t){return O.Gc(e),O.lc().onClose()})),O.Vb(),O.Vb()}if(2&e){const e=O.lc(),t=O.Dc(4);O.Ab(3),O.Tc("",O.nc(4,16,"TEST.TEST1")," \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436"),O.Ab(4),O.sc("formGroup",e.sellPointsActionForm),O.Ab(6),O.sc("formControl",e.sellPointsActionForm.controls.name),O.Ab(2),O.sc("toolTipClickFn",e.boundedOnShowMap),O.Ab(3),O.sc("formControl",e.sellPointsActionForm.controls.address),O.Ab(4),O.sc("accounts",e.accounts)("defaultAccount",e.defaultAccount)("isDisabled",1===e.userAccountsCount),O.Ab(7),O.sc("ngIf",!e.isAssignSelf)("ngIfElse",t),O.Ab(1),O.sc("ngIf",e.cashiers.length),O.Ab(1),O.sc("ngIf",e.action===e.POINTS_OF_SELL_ACTIONS.EDIT),O.Ab(1),O.sc("ngIf",e.showDeletedCashiers.getValue()),O.Ab(3),O.Sc(O.nc(36,18,"SHARED.CANCEL")),O.Ab(2),O.sc("disabled",e.getIsDisabledState()),O.Ab(1),O.Sc(O.nc(39,20,"SHARED.SAVE"))}}function ee(e,t){if(1&e){const e=O.Xb();O.Wb(0,"button",57),O.ic("click",(function(t){O.Gc(e);const n=O.lc().index;return O.lc(2).deleteCashierHandler(n)})),O.Vb()}}function te(e,t){if(1&e&&(O.Wb(0,"li"),O.Wb(1,"div",53),O.Wb(2,"p",54),O.Rc(3),O.Vb(),O.Wb(4,"p",55),O.Rc(5),O.Rb(6,"br"),O.Rc(7),O.Vb(),O.Pc(8,ee,1,0,"button",56),O.Vb(),O.Vb()),2&e){const e=t.$implicit,n=O.lc(2);O.Ab(3),O.Sc(n.getCashierInitials(e.name)),O.Ab(2),O.Tc("",e.name,"."),O.Ab(2),O.Sc(e.phone),O.Ab(1),O.sc("ngIf",n.editingPointOfSellCashiers.length>1)}}function ne(e,t){if(1&e&&(O.Wb(0,"ul"),O.Pc(1,te,9,4,"li",52),O.Vb()),2&e){const e=O.lc();O.Ab(1),O.sc("ngForOf",e.editingPointOfSellCashiers)}}function ie(e,t){if(1&e&&O.Sb(0,11),2&e){O.lc(2);const e=O.Dc(16);O.sc("ngTemplateOutlet",e)}}function oe(e,t){if(1&e){const e=O.Xb();O.Wb(0,"div",58),O.Wb(1,"j-sms",59),O.ic("submitted",(function(t){return O.Gc(e),O.lc().getSmsToken(t)})),O.Vb(),O.Vb(),O.Pc(2,ie,1,1,"ng-container",39)}if(2&e){const e=O.lc();O.Ab(1),O.sc("hidden",e.showSuccessConnection.getValue())("phone",e.userPhone)("countryCode",e.userCountryCode.code),O.Ab(1),O.sc("ngIf",e.showSuccessConnection.getValue())}}function se(e,t){if(1&e&&(O.Wb(0,"div",60),O.Rb(1,"span",61),O.Wb(2,"h5"),O.Rc(3,"QR \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d"),O.Vb(),O.Wb(4,"p"),O.Rc(5,"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443 \u0447\u0435\u0440\u0435\u0437 QR"),O.Vb(),O.Vb()),2&e){const e=O.lc();O.sc("ngClass",e.showSuccessConnection?"success-connection":"")}}function ce(e,t){if(1&e){const e=O.Xb();O.Wb(0,"div",62),O.Wb(1,"p",63),O.Rc(2,"\u041a\u0430\u0441\u0441\u0438\u0440 \u0443\u0434\u0430\u043b\u0435\u043d"),O.Vb(),O.Wb(3,"button",64),O.ic("click",(function(t){return O.Gc(e),O.lc().onBackDeletedCashiersClick()})),O.Vb(),O.Wb(4,"p",65),O.Rc(5),O.Vb(),O.Vb()}if(2&e){const e=O.lc();O.Ab(5),O.Tc("\u0412\u0435\u0440\u043d\u0443\u0442\u044c ",e.backDeletedCashiersTimer,"")}}let le=(()=>{class e{constructor(e,t,n,i){this.activeModal=e,this.jToleService=t,this.pointsOfSellsActionService=n,this.router=i,this.pointsOfSellActions=b,this.isShowMap=new S.a(!1),this.workAllDay=new S.a(!1),this.workWithoutBreak=new S.a(!1),this.showConfirmation=new S.a(!1),this.showSuccessConnection=new S.a(!1),this.showDeletedCashiers=new S.a(!1),this.sellPointsActionForm=new s.k({name:new s.h("",s.H.required),address:new s.h("",s.H.required),assignSelf:new s.h,phoneNumber:new s.h}),this.isAssignSelf=!1,this.userCountryCode=JSON.parse(localStorage.getItem("countryCode")),this.cashiers=[],this.selectedAccount=null,this.POS_TEMPLATES=C,this.POINTS_OF_SELL_ACTIONS=b,this.deletedCashiers=[],this.backDeletedCashiersTimer=5,this.clicked=!1,this.workRegimeDaysFormGroup=new s.k({Monday:new s.h,Tuesday:new s.h,Wednesday:new s.h,Thursday:new s.h,Friday:new s.h,Saturday:new s.h,Sunday:new s.h}),this.workRegimeDays=new s.k({workAllDay:new s.h(!1),withoutBreak:new s.h(!1)}),this.boundedOnShowMap=this.onShowMap.bind(this),this.setPropertiesAfterReopeningModal()}ngOnInit(){this.action===b.EDIT&&this.jToleService.getPointOfSell(this.posId).then(e=>{this.setDefaultFormValues(e),this.editingPointOfSellCashiers=e.cashiers,this.findPosAccountFromList(e.companyId)}),this.bin=this.jToleService.pointOfSellBin,this.user=this.jToleService.user,this.userPhone=this.jToleService.user.phone,this.jToleService.accounts.pipe(Object(f.a)(e=>e.filter(e=>e.balance.currency===g.a.KZT&&e.accountType!==m.a.DEPOSIT))).subscribe(e=>{this.getUserAccountsCount(e),this.accounts=e,this.getDefaultAccount(e)}),this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm}getSelectedDays(){const e=[];for(const t in this.workRegimeDaysFormGroup.value)this.workRegimeDaysFormGroup.value[t]&&e.push(t);return e}getIsDisabledState(){return this.action===b.EDIT?0===this.cashiers.length&&"INVALID"===this.sellPointsActionForm.status:0===this.cashiers.length||"INVALID"===this.sellPointsActionForm.status}getIsLoadingState(){}getParsedFormat(e){return P()(e).format("dd")}setPropertiesAfterReopeningModal(){this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm,this.cashiers=this.pointsOfSellsActionService.cashiers,this.isAssignSelf=this.pointsOfSellsActionService.isAssignSelf}onClose(){this.activeModal.close()}onShowMap(){this.activeModal.close(),this.pointsOfSellsActionService.cashiers=this.cashiers,this.pointsOfSellsActionService.isAssignSelf=this.isAssignSelf,this.action===b.EDIT&&(this.pointsOfSellsActionService.sellPointsActionForm=this.sellPointsActionForm),this.isShowMap.next(!0),this.router.navigate(["jtole/map"])}onCloseMap(){this.isShowMap.next(!1)}getTemplateToBeRendered(){return this.isShowMap.getValue()?C.MAP:this.showConfirmation.getValue()?C.CONNECTJTOLECONFIRMATION:C.BASE}onSaveClick(){if(this.action===b.EDIT)return this.jToleService.updatePointOfSell({address:this.sellPointsActionForm.controls.address.value,name:this.sellPointsActionForm.controls.name.value,id:this.pos.id},this.pos.companyId);this.showConfirmation.next(!0)}getSmsToken(e){if(e.signature){const{value:{address:t,name:n}}=this.sellPointsActionForm,i=this.cashiers.map(e=>({phone:e.form.value.phone,name:e.form.value.fio}));let o;if(this.isAssignSelf){const{firstname:e,lastname:t,middlename:n,phone:s}=this.user;o=[...i,{phone:s,name:e+t+n}]}else o=i;this.jToleService.createPointOfSell({iban:this.defaultAccount.iban?this.defaultAccount.iban:this.selectedAccount.iban,pos:{name:n,address:t,cashiers:o}},e.signature).then(()=>{this.showSuccessConnection.next(!0)})}}addCashiersHandler(){this.cashiers.push({form:new s.k({phone:new s.h,fio:new s.h})})}addWorkRegimesHandler(){}getCashierInitials(e){const t=e.split(" ");return 1===t.length?t[0][0].toUpperCase():t[0][0].toUpperCase()+t[1][0].toUpperCase()}deleteCashierHandler(e){this.showDeletedCashiers.next(!0);const t=setInterval(()=>{--this.backDeletedCashiersTimer},1e3),n=this.editingPointOfSellCashiers[e].id;setTimeout(()=>{if(clearInterval(t),this.showDeletedCashiers.next(!1),this.backDeletedCashiersTimer=5,this.action===b.EDIT)return this.jToleService.deleteCashier({companyId:this.pos.companyId,posId:this.posId,cashierId:n})},5e3),this.action===b.EDIT?(this.deletedCashiers.push(this.editingPointOfSellCashiers[e]),this.editingPointOfSellCashiers.splice(e,1)):(this.deletedCashiers.push(this.cashiers[e]),this.cashiers.splice(e,1))}onBackDeletedCashiersClick(){this.showDeletedCashiers.next(!1),this.action===b.EDIT?this.editingPointOfSellCashiers=[...this.editingPointOfSellCashiers,...this.deletedCashiers]:this.cashiers=[...this.cashiers,...this.deletedCashiers],this.deletedCashiers=[],this.backDeletedCashiersTimer=5}getDefaultAccount(e){1===e.length&&(this.defaultAccount=e[0])}getUserAccountsCount(e){this.userAccountsCount=e.length}onAccountSelected(e){this.selectedAccount=e}findPosAccountFromList(e){this.jToleService.getAccountsByCompanyId(e).then(t=>{const n=t.find(t=>t.companyId===e);this.defaultAccount=n})}assignSelfChanges({target:e}){this.isAssignSelf=e.checked}setDefaultFormValues(e){this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal&&(this.sellPointsActionForm=this.pointsOfSellsActionService.sellPointsActionForm),this.sellPointsActionForm=new s.k({name:new s.h(e.name),address:new s.h(e.address),assignSelf:new s.h,phoneNumber:new s.h})}onDeletePosClick(){}ngOnDestroy(){this.isShowMap.complete(),this.workAllDay.complete(),this.workWithoutBreak.complete(),this.showConfirmation.complete(),this.showSuccessConnection.complete(),this.showDeletedCashiers.complete()}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(i.a),O.Qb(k),O.Qb(W),O.Qb(a.c))},e.\u0275cmp=O.Kb({type:e,selectors:[["j-points-of-sells-action"]],inputs:{action:"action",pos:"pos",posId:"posId",alreadyShowed:"alreadyShowed"},decls:19,vars:2,consts:[[1,"d-flex","flex-column","wrapper",3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["assignSelfBlock",""],["assignSelfCheckbox",""],["addCashiersForm",""],["baseTemplate",""],["editingCashiers",""],["connectJToleConfirmation",""],["successConnection",""],["deletedCashiers",""],[3,"ngTemplateOutlet"],[1,"assign-self-template"],[1,"custom-control","custom-checkbox"],[4,"ngTemplateOutlet"],["for","customCheck1",1,"custom-control-label"],[1,"iin"],[1,"phone"],["type","checkbox","id","customCheck1",1,"custom-control-input",3,"formControl","change"],[1,"col-12","pr-2","pl-2"],["clearable","true"],["type","text","jFormInput","",1,"form-control",3,"formControl"],[1,"col-12","pr-2","pl-2","mt-3"],[3,"formControl"],[1,"inner-wrapper"],[1,"modal-header"],[1,"modal-body"],[1,"scrolled"],[1,"scrolled--content",3,"formGroup"],[1,"row"],[1,"form-group","col-12","pr-2","pl-2"],["clearable","true","toolTip","\u041d\u0430 \u043a\u0430\u0440\u0442\u0435",3,"toolTipClickFn"],[1,"form-field-title"],["label","C\u0447\u0435\u0442 \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f",3,"accounts","defaultAccount","isDisabled","selected"],[1,"col-12","form-group","cashiers-form-container","pr-2","pl-2"],["type","button",1,"btn",3,"click"],[1,"add-cashiers-label"],["class","form-group col-12 pr-2 pl-2",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"close-btn"],["inlineSVG","/assets/jtole/close-pos-modal.svg",1,"btn",3,"click"],[1,"custom-control","custom-checkbox","checkbox-container"],["class","add-cashiers-form-container mb-3",4,"ngFor","ngForOf"],[1,"add-cashiers-form-container","mb-3"],[1,"add-cashiers-form-header"],[1,"ml-2","mt-3"],["inlineSVG","/assets/icons/delete.svg",1,"btn","delete-cashier-btn",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-start","pl-2","pr-2"],[1,"existing-cashiers-initials"],[1,"existing-cashiers-info"],["class","btn pr-2","inlineSVG","/assets/icons/delete.svg",3,"click",4,"ngIf"],["inlineSVG","/assets/icons/delete.svg",1,"btn","pr-2",3,"click"],[1,"p-5"],[3,"hidden","phone","countryCode","submitted"],[1,"success-connection__wrapper",3,"ngClass"],["inlineSVG","/assets/jtole/pos-connection-done.svg",1,"d-block","mt-3"],[1,"deleted-cashiers__wrapper"],[1,"deleted-cashiers__text"],["inlineSVG","/assets/jtole/back-cashiers.svg",1,"btn","mb-1","pr-2",3,"click"],[1,"deleted-cashiers__count"]],template:function(e,t){1&e&&(O.Wb(0,"div",0),O.Pc(1,L,1,1,"ng-container",1),O.Pc(2,N,1,1,"ng-container",2),O.Vb(),O.Pc(3,G,11,6,"ng-template",null,3,O.Qc),O.Pc(5,H,1,1,"ng-template",null,4,O.Qc),O.Pc(7,B,7,2,"ng-template",null,5,O.Qc),O.Pc(9,Z,42,22,"ng-template",null,6,O.Qc),O.Pc(11,ne,2,1,"ng-template",null,7,O.Qc),O.Pc(13,oe,3,4,"ng-template",null,8,O.Qc),O.Pc(15,se,6,1,"ng-template",null,9,O.Qc),O.Pc(17,ce,6,1,"ng-template",null,10,O.Qc)),2&e&&(O.sc("ngSwitch",t.getTemplateToBeRendered()),O.Ab(1),O.sc("ngSwitchCase",t.POS_TEMPLATES.CONNECTJTOLECONFIRMATION))},directives:[o.y,o.z,o.A,o.B,s.a,s.t,s.i,_.a,R.a,I.a,s.c,M.a,s.J,s.u,s.l,D.a,o.u,F.a,o.t,j.a,o.r],pipes:[E.d],styles:["ul[_ngcontent-%COMP%]{margin-left:0;padding-left:0;width:100%}li[_ngcontent-%COMP%]{list-style-type:none}.inner-wrapper[_ngcontent-%COMP%]{padding:20px}.cashiers-form-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.modal-header[_ngcontent-%COMP%]{padding-left:4px;display:-webkit-box;display:flex}.custom-control[_ngcontent-%COMP%]{padding-left:45px}.add-cashiers-label[_ngcontent-%COMP%]{color:#ef5630}.form-field-title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:25px;color:#1a1c1f;margin-top:10px;display:inline-block}.modal-content[_ngcontent-%COMP%]{max-height:calc(110vh - 3rem)}  .modal-open{max-width:100vw!important}.not-displayed-modal-content[_ngcontent-%COMP%]{display:none}.assign-self-template[_ngcontent-%COMP%]{background:#f6f7f8;width:100%;margin-bottom:2rem;margin-left:.5rem;border-radius:8px;padding-left:13px;padding-top:10px;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start}.assign-self-template[_ngcontent-%COMP%]   .iin[_ngcontent-%COMP%], .assign-self-template[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:12px;line-height:18px;color:#666c72}.checkbox-container[_ngcontent-%COMP%]{height:56px;box-sizing:border-box;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding-left:60px;bottom:1rem;border-radius:8px;background:#f6f7f8}.custom-control-input[_ngcontent-%COMP%]{bottom:1rem}.without-break-checkbox[_ngcontent-%COMP%]{flex-basis:10em}.add-cashiers-form-container[_ngcontent-%COMP%]{width:97%;border-radius:8px;background:#f6f7f8;padding:.5rem 10px 1rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-left:.5rem;margin-right:.5rem}.custom-control-label[_ngcontent-%COMP%]:before{border:2px solid #d6dadf;box-sizing:border-box;border-radius:4px}.add-cashiers-form-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.existing-cashiers-info[_ngcontent-%COMP%]{width:70%}.existing-cashiers-initials[_ngcontent-%COMP%]{background:#f6f7f8;border-radius:16px;min-height:40px;width:8%;padding:8px 10px}.close-btn-container[_ngcontent-%COMP%]{width:100%}.close-btn[_ngcontent-%COMP%]{position:fixed;z-index:2;right:1em}@media(max-width:959px){.close-btn[_ngcontent-%COMP%]{position:fixed;z-index:2;right:1em;top:1em}.wrapper[_ngcontent-%COMP%]{left:5em}}.delete-cashier-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transform:translate(20px);transform:translate(20px)}  .ymaps-2-1-79-controls__control_toolbar{display:-webkit-box!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;flex-direction:column!important;-webkit-box-align:start!important;align-items:flex-start!important;padding:24px!important;position:absolute!important;width:455px!important;height:252px!important;left:0!important;top:0!important;background:#fff!important;box-shadow:0 24px 32px rgba(0,0,0,.04),0 16px 24px rgba(0,0,0,.04),0 4px 8px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04)!important;border-radius:8px!important}.work-day__checkbox[_ngcontent-%COMP%],   .work-day__item .j-dropdown-input__item{background:transparent!important}.success-connection__wrapper[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column wrap;-webkit-box-pack:center;justify-content:center}.deleted-cashiers__wrapper[_ngcontent-%COMP%], .success-connection__wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.deleted-cashiers__wrapper[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;background:#f6f7f8;height:48px;padding:1em 1.5em;margin:0 -2em}.deleted-cashiers__wrapper[_ngcontent-%COMP%]   .deleted-cashiers__text[_ngcontent-%COMP%]{color:#666c72;padding-top:1em;-webkit-box-flex:1;flex-grow:1}.deleted-cashiers__wrapper[_ngcontent-%COMP%]   .deleted-cashiers__count[_ngcontent-%COMP%]{color:#1586bb;padding-top:1.2em}"]}),e})();var ae=n("paXB"),re=n("7/bn"),de=n("oMXN"),be=n("EiG8"),pe=n("I+WJ"),he=n("oa9T");function ue(e,t){1&e&&O.Sb(0)}function me(e,t){}function fe(e,t){if(1&e&&(O.Wb(0,"li"),O.Rc(1),O.Vb()),2&e){const e=t.$implicit;O.Ab(1),O.Sc(e.name)}}function ge(e,t){if(1&e){const e=O.Xb();O.Wb(0,"tr",19),O.ic("click",(function(n){O.Gc(e);const i=t.$implicit;return O.lc(3).onRowClick(i)})),O.Wb(1,"td"),O.Rc(2),O.Vb(),O.Wb(3,"td"),O.Rc(4),O.Vb(),O.Wb(5,"td"),O.Wb(6,"ul"),O.Pc(7,fe,2,1,"li",20),O.Vb(),O.Vb(),O.Vb()}if(2&e){const e=t.$implicit;O.Ab(2),O.Sc(e.name),O.Ab(2),O.Sc(e.address),O.Ab(3),O.sc("ngForOf",e.cashiers)}}function Se(e,t){if(1&e&&(O.Wb(0,"div",15),O.Wb(1,"table",16),O.Wb(2,"thead"),O.Wb(3,"tr"),O.Wb(4,"th",17),O.Rc(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),O.Vb(),O.Wb(6,"th",17),O.Rc(7,"\u0410\u0434\u0440\u0435\u0441"),O.Vb(),O.Wb(8,"th",17),O.Rc(9,"\u041a\u0430\u0441\u0441\u0438\u0440\u044b"),O.Vb(),O.Vb(),O.Vb(),O.Wb(10,"tbody"),O.Pc(11,ge,8,3,"tr",18),O.Vb(),O.Vb(),O.Vb()),2&e){const e=O.lc(2);O.Ab(11),O.sc("ngForOf",e.listPointsOfSell)}}function Ce(e,t){if(1&e&&O.Pc(0,Se,12,1,"div",14),2&e){const e=O.lc(),t=O.Dc(24);O.sc("ngIf",e.currentStatus===e.POINT_OF_SELL_STATUSES.CASHIERS)("ngIfElse",t)}}let we=(()=>{class e{constructor(e,t,n){this.jToleService=e,this.pointsOfSellsActionService=t,this.modalService=n,this.listPointsOfSell=[],this.statuses=[{label:"\u0422\u043e\u0447\u043a\u0438 \u0438 \u043a\u0430\u0441\u0441\u0438\u0440\u044b",value:d.CASHIERS,count:0,isSelected:!0,isDisabled:!1},{label:"POS \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:d.POS,count:0,isSelected:!1,isDisabled:!1}],this.currentStatus=d.CASHIERS,this.POINT_OF_SELL_STATUSES=d,this.searchControl=new s.h(""),this.searchValue=""}ngOnInit(){this.checkIsReopeningSellPointsActionFormModal(),this.jToleService.connectionStateToJpay.then(e=>{if(this.connectionStateToJPay=e,!e.connectedToPay&&e.connectedToMart){const t=this.modalService.open(le,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"});t.componentInstance.action=b.ADD,t.componentInstance.alreadyShowed=e.alreadyShowed}}),this.jToleService.getListPointsOfSell().then(e=>{this.listPointsOfSell=e})}checkIsReopeningSellPointsActionFormModal(){this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal&&(this.modalService.open(le,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"}).componentInstance.action=this.pointsOfSellsActionService.action)}onRowClick(e){const t=this.modalService.open(le,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm sell-points-action-modal modal-adaptive",centered:!0,backdrop:"static"});t.componentInstance.action=b.EDIT,t.componentInstance.posId=e.id,t.componentInstance.pos=e,this.pointsOfSellsActionService.action=b.EDIT,this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal=!0}addPointsOfSellHandler(){this.modalService.open(le,{backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm add-sell-points-modal modal-adaptive",centered:!0,backdrop:"static"}).componentInstance.action=b.ADD,this.pointsOfSellsActionService.action=b.ADD,this.pointsOfSellsActionService.isReopeningSellPointsActionFormModal=!0}onStatusSelect(e){this.currentStatus=e,this.statuses.forEach(t=>{t.isSelected=t.value===e})}searchHandler({target:e}){this.searchValue=e.value}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(k),O.Qb(W),O.Qb(i.q))},e.\u0275cmp=O.Kb({type:e,selectors:[["j-pay"]],decls:27,vars:6,consts:[[1,"wrapper"],[1,"row","add-sell-points-wrapper"],[1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","/assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],[1,"filters-wrapper"],[3,"statuses","selected"],[1,"list-page--filter","mt-2"],["clearable","true"],["jPrefix","","inlineSVG","/assets/icons/search.svg",1,"text-primary","d-block","mt-n1"],["type","text","jFormInput","","autocomplete","off",1,"form-control",3,"placeholder","formControl","change"],[4,"ngTemplateOutlet"],["posTerminal",""],["statusesContent",""],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"table","table-striped"],["scope","col"],["class","body-row",3,"click",4,"ngFor","ngForOf"],[1,"body-row",3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(O.Wb(0,"j-layout-home"),O.Wb(1,"j-aside"),O.Rb(2,"j-nav-main"),O.Vb(),O.Wb(3,"j-main"),O.Wb(4,"div",0),O.Wb(5,"h3"),O.Rc(6,"Jusan Tole"),O.Vb(),O.Wb(7,"div"),O.Wb(8,"div",1),O.Wb(9,"h5"),O.Rc(10,"\u0422\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0434\u0430\u0436"),O.Vb(),O.Wb(11,"button",2),O.ic("click",(function(e){return t.addPointsOfSellHandler()})),O.Rb(12,"span",3),O.Wb(13,"span",4),O.Rc(14,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436"),O.Vb(),O.Vb(),O.Vb(),O.Wb(15,"div",5),O.Wb(16,"j-statuses",6),O.ic("selected",(function(e){return t.onStatusSelect(e)})),O.Vb(),O.Wb(17,"div",7),O.Wb(18,"j-form-field",8),O.Rb(19,"span",9),O.Wb(20,"input",10),O.ic("change",(function(e){return t.searchHandler(e)})),O.mc(21,"translate"),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Pc(22,ue,1,0,"ng-container",11),O.Vb(),O.Vb(),O.Vb(),O.Pc(23,me,0,0,"ng-template",null,12,O.Qc),O.Pc(25,Ce,1,2,"ng-template",null,13,O.Qc),O.Vb()),2&e){const e=O.Dc(26);O.Ab(16),O.sc("statuses",t.statuses),O.Ab(4),O.tc("placeholder",O.nc(21,4,"FILTER.SEARCH.COUNTERPARTY")),O.sc("formControl",t.searchControl),O.Ab(2),O.sc("ngTemplateOutlet",e)}},directives:[ae.a,re.a,de.a,be.a,F.a,pe.a,_.a,he.a,I.a,s.c,s.t,s.i,o.B,o.u,o.t],pipes:[E.d],styles:[".body-row[_ngcontent-%COMP%]:hover{cursor:pointer}ul[_ngcontent-%COMP%]{margin-left:0;padding-left:0}li[_ngcontent-%COMP%]{list-style-type:none}@media(max-width:959px){.add-sell-points-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{left:5em}}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top:none;border-bottom:#b7bec5}.wrapper[_ngcontent-%COMP%]{margin:30px 133px}.add-sell-points-wrapper[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 0 #e9ebec;border-radius:12px 12px 0 0;min-height:72px;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding:10px 20px}.filters-wrapper[_ngcontent-%COMP%]{min-height:139px;padding-top:20px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}thead[_ngcontent-%COMP%]{min-height:50px;color:#666c72;font-style:normal;font-weight:400;font-size:12px;line-height:18px}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd), tr[_ngcontent-%COMP%]{background-color:#fff}.body-row[_ngcontent-%COMP%]{color:#1a1c1f;font-style:normal;font-weight:400;font-size:14px;line-height:18px;opacity:.95}"]}),e})(),Pe=(()=>{class e{constructor(e){this.jToleService=e}ngOnInit(){this.jToleService.paymentsTotalInfo.then(e=>{this.info=e})}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(k))},e.\u0275cmp=O.Kb({type:e,selectors:[["j-payment-detail"]],decls:16,vars:2,consts:[[1,"container"],[1,"modal-header"],[1,"payment-detail-modal-content"],[1,"btn","download-btn-container"],["inlineSVG","/assets/icons/pdf.svg"],[1,"ml-1"]],template:function(e,t){1&e&&(O.Wb(0,"div",0),O.Rb(1,"div",1),O.Wb(2,"div",2),O.Wb(3,"div"),O.Wb(4,"p"),O.Rc(5),O.Vb(),O.Wb(6,"p"),O.Rc(7),O.Vb(),O.Wb(8,"button",3),O.Rb(9,"span",4),O.Wb(10,"span",5),O.Rc(11,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),O.Vb(),O.Vb(),O.Vb(),O.Wb(12,"div"),O.Wb(13,"div"),O.Wb(14,"h5"),O.Rc(15,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&e&&(O.Ab(5),O.Tc("",t.payment.amount," \u20b8"),O.Ab(2),O.Sc(null==t.payment?null:null==t.payment.pos?null:t.payment.pos.name))},directives:[F.a],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.payment-detail-modal-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 3rem)}.download-btn-container[_ngcontent-%COMP%]{color:#ef5630;background:#fff;border:1px solid #ef5630;box-sizing:border-box;border-radius:12px;width:100%}"]}),e})();var Oe=n("u+5l"),ve=n("zdqJ"),xe=n("0kjH"),ye=n("9PaV"),Ae=n("dlKe");function Te(e,t){if(1&e&&(O.Wb(0,"div",6),O.Sb(1,7),O.Vb()),2&e){O.lc();const e=O.Dc(8);O.Ab(1),O.sc("ngTemplateOutlet",e)}}function Ve(e,t){1&e&&(O.Wb(0,"div"),O.Wb(1,"button",14),O.Rc(2,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c"),O.Vb(),O.Vb())}function ke(e,t){if(1&e&&(O.Wb(0,"div",8),O.Rb(1,"p",9),O.Wb(2,"p",10),O.Rc(3,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435 QR"),O.Vb(),O.Vb(),O.Wb(4,"div",11),O.Wb(5,"p",12),O.Rc(6,"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0434\u0430\u0436 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435"),O.Rb(7,"br"),O.Rc(8," \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u043f\u043b\u0430\u0442\u0443"),O.Rb(9,"br"),O.Rc(10," \u043d\u0430 \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e QR"),O.Rb(11,"br"),O.Rc(12," \u0441 \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0435\u0439 0,5%"),O.Vb(),O.Vb(),O.Pc(13,Ve,3,0,"div",13)),2&e){const e=O.lc();O.Ab(13),O.sc("ngIf",e.withConnectButton)}}let We=(()=>{class e{constructor(){this.isHovered=new S.a(!1),this.withConnectButton=!1,this.withCloseButton=!1}onMouseOver(){this.isHovered.next(!0)}onMouseOut(){this.isHovered.next(!1)}ngOnDestroy(){this.isHovered.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=O.Kb({type:e,selectors:[["j-tole-not-connected-info"]],inputs:{withConnectButton:"withConnectButton",withCloseButton:"withCloseButton"},decls:9,vars:1,consts:[[1,"wrapper","d-flex","align-content-center","align-items-center","flex-column","pl-5","pr-5"],["inlineSVG","/assets/jtole/not-connected.svg"],[1,"mt-5","info"],[1,"connection-conditions-info",3,"mouseover","mouseout"],["class","on-hovered-tip-container mt-5",4,"ngIf"],["infoAction",""],[1,"on-hovered-tip-container","mt-5"],[3,"ngTemplateOutlet"],[1,"info-action"],["inlineSVG","/assets/jtole/logo-grey.svg"],[1,"connect-title"],[1,"ml-5"],[1,"promo"],[4,"ngIf"],[1,"btn"]],template:function(e,t){1&e&&(O.Wb(0,"div",0),O.Rb(1,"span",1),O.Wb(2,"p",2),O.Rc(3,"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 QR"),O.Vb(),O.Wb(4,"p",3),O.ic("mouseover",(function(e){return t.onMouseOver()}))("mouseout",(function(e){return t.onMouseOut()})),O.Rc(5,"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"),O.Vb(),O.Pc(6,Te,2,1,"div",4),O.Vb(),O.Pc(7,ke,14,1,"ng-template",null,5,O.Qc)),2&e&&(O.Ab(6),O.sc("ngIf",t.isHovered.getValue()))},directives:[F.a,o.u,o.B],styles:[".wrapper[_ngcontent-%COMP%]{background:#fff;min-height:600px;padding-top:7em}.info[_ngcontent-%COMP%]{font-weight:400;color:#666c72}.connection-conditions-info[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{font-style:normal;font-size:15px;line-height:20px;text-align:center;letter-spacing:-.24px}.connection-conditions-info[_ngcontent-%COMP%]{font-weight:600;color:#ef5630}.connection-conditions-info[_ngcontent-%COMP%]:hover{cursor:pointer}.on-hover-tip[_ngcontent-%COMP%]{border:1px solid transparent;box-sizing:border-box;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px;background:#faf7f7}.on-hovered-tip-container[_ngcontent-%COMP%]{border:1px solid #eceef1;box-sizing:border-box;border-radius:8px;padding-top:.9em;padding-right:1em;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]}),e})();var _e=n("h7tf");function Re(e,t){1&e&&O.Rb(0,"j-tole-not-connected-info")}function Ie(e,t){1&e&&(O.Wb(0,"h3",17),O.Rc(1,"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),O.Vb())}function Me(e,t){if(1&e&&(O.Wb(0,"h3",17),O.Rc(1),O.mc(2,"translate"),O.Vb()),2&e){const e=O.lc();O.Ab(1),O.Sc(O.nc(2,1,e.selectedPeriodLabel))}}function De(e,t){if(1&e&&(O.Wb(0,"div",18),O.Wb(1,"div",19),O.Rb(2,"span",20),O.Wb(3,"span"),O.Rc(4),O.Rb(5,"br"),O.Rc(6),O.mc(7,"translate"),O.Vb(),O.Wb(8,"span",21),O.Rc(9),O.Rb(10,"br"),O.Rc(11),O.Rb(12,"br"),O.Rc(13),O.Vb(),O.Vb(),O.Wb(14,"div"),O.Wb(15,"button",22),O.Rb(16,"span",23),O.Vb(),O.Vb(),O.Vb()),2&e){const e=t.$implicit,n=O.lc();O.Ab(4),O.Tc("",e.amount," "),O.Ab(2),O.Uc("",O.nc(7,6,n.selectedPeriodLabel)," ",n.getProcessedTimePayment(e),""),O.Ab(3),O.Tc("",null==e?null:null==e.pos?null:e.pos.name," "),O.Ab(2),O.Tc("\u0410\u0434\u0440\u0435\u0441: ",null==e?null:null==e.pos?null:e.pos.address," "),O.Ab(2),O.Tc("\u041a\u0430\u0441\u0441\u0438\u0440: ",null==e?null:null==e.cashier?null:e.cashier.name,"")}}function Fe(e,t){if(1&e&&O.Sb(0,25),2&e){O.lc(2);const e=O.Dc(23);O.sc("ngTemplateOutlet",e)}}function je(e,t){if(1&e){const e=O.Xb();O.Wb(0,"j-statuses",6),O.ic("selected",(function(t){return O.Gc(e),O.lc().onFilterStatusSelect(t)})),O.Vb(),O.Pc(1,Fe,1,1,"ng-container",24)}if(2&e){const e=O.lc(),t=O.Dc(25);O.sc("statuses",e.filterStatuses),O.Ab(1),O.sc("ngIf",e.currentFilterStatus===e.STATEMENT_FILTER_STATUSES.QR)("ngIfElse",t)}}function Ee(e,t){if(1&e&&(O.Wb(0,"div",31),O.Wb(1,"p"),O.Rc(2),O.Vb(),O.Wb(3,"p"),O.Rc(4),O.Vb(),O.Vb()),2&e){const e=t.$implicit;O.Ab(2),O.Sc(e.name),O.Ab(2),O.Sc(e.address)}}function Le(e,t){if(1&e&&(O.Wb(0,"div",31),O.Wb(1,"p"),O.Rc(2),O.Vb(),O.Vb()),2&e){const e=t.$implicit;O.Ab(2),O.Sc(e.name)}}function Ne(e,t){if(1&e&&(O.Wb(0,"div",31),O.Wb(1,"p"),O.Rc(2),O.Vb(),O.Vb()),2&e){const e=t.$implicit;O.Ab(2),O.Vc("",e.lastname," ",e.firstname[0].toUpperCase(),". ",e.middlename[0].toUpperCase(),".")}}function Qe(e,t){if(1&e&&(O.Wb(0,"div",31),O.Wb(1,"p"),O.Rc(2),O.Vb(),O.Vb()),2&e){const e=t.$implicit;O.Ab(2),O.Vc("",e.lastname," ",e.firstname[0].toUpperCase(),". ",e.middlename[0].toUpperCase(),".")}}function Ge(e,t){1&e&&O.Sb(0)}function He(e,t){if(1&e){const e=O.Xb();O.Wb(0,"j-dropdown-input",26),O.ic("selected",(function(t){return O.Gc(e),O.lc().onSelect(t)})),O.Pc(1,Ee,5,2,"ng-template",null,27,O.Qc),O.Pc(3,Le,3,1,"ng-template",null,28,O.Qc),O.Vb(),O.Wb(5,"j-dropdown-input",29),O.ic("selected",(function(t){return O.Gc(e),O.lc().onCashierSelect(t)})),O.Pc(6,Ne,3,3,"ng-template",null,27,O.Qc),O.Pc(8,Qe,3,3,"ng-template",null,28,O.Qc),O.Vb(),O.Pc(10,Ge,1,0,"ng-container",30)}if(2&e){const e=O.lc(),t=O.Dc(27);O.sc("selectedItem",e.selectedPointOfSell)("options",e.pointsOfSellList),O.Ab(5),O.sc("options",e.cashiersByPointOfSell)("selectedItem",e.selectedCashier),O.Ab(5),O.sc("ngTemplateOutlet",t)}}function Be(e,t){1&e&&O.Sb(0)}function Ue(e,t){if(1&e&&O.Pc(0,Be,1,0,"ng-container",30),2&e){O.lc();const e=O.Dc(27);O.sc("ngTemplateOutlet",e)}}function $e(e,t){if(1&e&&(O.Wb(0,"div",33),O.Rb(1,"input",34),O.Wb(2,"label",35),O.Rc(3),O.Vb(),O.Vb()),2&e){const e=t.$implicit,n=t.index;O.Ab(1),O.tc("id","sort"+n),O.sc("value",e.value),O.Ab(1),O.tc("for","sort"+n),O.Ab(1),O.Tc(" ",e.label," ")}}function ze(e,t){if(1&e&&(O.Wb(0,"h5"),O.Rc(1,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),O.Vb(),O.Pc(2,$e,4,4,"div",32)),2&e){const e=O.lc();O.Ab(2),O.sc("ngForOf",e.sortOptionList)}}let Je=(()=>{class e{constructor(e,t){this.jToleService=e,this.modalService=t,this.statuses=[{label:"\u0412\u0441\u0435",value:p.ALL,count:0,isSelected:!0,isDisabled:!1},{label:"QR",value:p.QR,count:0,isSelected:!1,isDisabled:!1},{label:"POS-\u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:p.POS,count:0,isSelected:!1,isDisabled:!1}],this.filterStatuses=[{label:"QR",value:h.QR,count:0,isSelected:!0,isDisabled:!1},{label:"POS-\u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b",value:h.POS,count:0,isSelected:!1,isDisabled:!1}],this.sortOptionList=u,this.searchControl=new s.h(""),this.STATEMENT_FILTER_STATUSES=h,this.currentFilterStatus=h.QR,this.pointsOfSellList=[],this.cashiersByPointOfSell=[],this.paymentsList=[],this.selectedFilterPeriod={from:new Date,to:new Date},this.throttle=300,this.scrollDistance=1,this.scrollUpDistance=2,this.page=1,this.pageSize=10,this.filterForm=new s.k({status:new s.h})}ngOnInit(){this.jToleService.getListPointsOfSell().then(e=>{this.pointsOfSellList=e}),this.jToleService.connectionStateToJpay.then(e=>{this.connectionState=e;const{from:t,to:n}=this.selectedFilterPeriod;this.jToleService.getStatementsList({dateTimeFrom:t,dateTimeTo:n,page:this.page,pageSize:this.pageSize}).then(e=>{this.paymentsList=e})})}onStatusSelect(e){this.statuses.forEach(t=>{t.isSelected=t.value===e})}onFilterStatusSelect(e){this.filterStatuses.forEach(t=>{t.value===e?(t.isSelected=!0,this.currentFilterStatus=t.value):t.isSelected=!1})}onSelect(e){this.selectedPointOfSell=e;const t=this.pointsOfSellList.find(t=>t.id===e.id).cashiers;this.cashiersByPointOfSell=t}onCashierSelect(e){this.selectedCashier=e}getSelectedFilterPeriod(e){this.selectedFilterPeriod=e,this.jToleService.getStatementsList({dateTimeFrom:e.from,dateTimeTo:e.to,page:this.page,pageSize:this.pageSize}).then(e=>{this.paymentsList=e})}getStatementList(){const{from:e,to:t}=this.selectedFilterPeriod;this.jToleService.getStatementsList({dateTimeFrom:e,dateTimeTo:t,page:this.page,pageSize:this.pageSize}).then(e=>{this.paymentsList=e})}onScrollDown(){this.page++,this.getStatementList()}onScrollUp(){this.page--,this.getStatementList()}getSelectedPeriodLabel(e){this.selectedPeriodLabel=e}getProcessedTimePayment(e){return P()(e.processed).format("HH:mm")}getClickedPayment(e){this.modalService.open(Pe,{backdrop:"static",centered:!0,backdropClass:"backdrop_light",windowClass:"modal_light modal-adaptive_sm modal-adaptive"}).componentInstance.payment=e}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(k),O.Qb(i.q))},e.\u0275cmp=O.Kb({type:e,selectors:[["j-payments"]],decls:28,vars:12,consts:[[1,"mr-5","ml-5","mt-5","mb-5","payments-container"],[1,"d-flex","justify-content-between","align-items-center","pr-5","pl-5","header-container"],[1,"filter-groups"],["jTour","STATEMENTS_ACCOUNT.FILTER","jTourPosition","left",1,"filter-group","d-none","d-sm-inline-block",3,"selectedPeriodLabel","submitted"],["jTour","STATEMENT.DOWNLOAD","jTourPosition","bottom",1,"filter-group"],[1,"filters-container","p-5"],[3,"statuses","selected"],[3,"customFilterSearchExtraContent","isOnFocusDisabled"],[1,"payments-container"],[4,"ngIf"],["class","pl-5 pt-2",4,"ngIf"],["infiniteScroll","",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled","scrolledUp"],["class","payments-item d-flex flex-wrap justify-content-between",4,"ngFor","ngForOf"],["customFilterSearchExtraContent",""],["qrFilterContent",""],["posFilterContent",""],["sortTypes",""],[1,"pl-5","pt-2"],[1,"payments-item","d-flex","flex-wrap","justify-content-between"],[1,"payments-item-inner"],["inlineSVG","/assets/jtole/statement-status.svg"],[1,"d-inline-block","ml-4"],[1,"btn"],["inlineSVG","/assets/jtole/save-pdf.svg",1,"save-btn-icon"],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["label","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u043e\u0447\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0436",3,"selectedItem","options","selected"],["optionTemplate",""],["selectedTemplate",""],["label","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0441\u0441\u0438\u0440\u0443",3,"options","selectedItem","selected"],[4,"ngTemplateOutlet"],[1,"option-template-container","d-flex","flex-column"],["class","custom-control custom-radio my-3",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio","my-3"],["type","radio","name","sortBy",1,"custom-control-input",3,"id","value"],[1,"custom-control-label","text-muted",3,"for"]],template:function(e,t){if(1&e&&(O.Wb(0,"j-layout-home"),O.Wb(1,"j-aside"),O.Rb(2,"j-nav-main"),O.Vb(),O.Wb(3,"j-main"),O.Wb(4,"div",0),O.Wb(5,"div",1),O.Wb(6,"h3"),O.Rc(7,"\u0412\u044b\u043f\u0438\u0441\u043a\u0430"),O.Vb(),O.Wb(8,"div",2),O.Wb(9,"j-filter-period-dropdown",3),O.ic("selectedPeriodLabel",(function(e){return t.getSelectedPeriodLabel(e)}))("submitted",(function(e){return t.getSelectedFilterPeriod(e)})),O.Vb(),O.Rb(10,"j-filter-download",4),O.Vb(),O.Vb(),O.Wb(11,"div",5),O.Wb(12,"j-statuses",6),O.ic("selected",(function(e){return t.onStatusSelect(e)})),O.Vb(),O.Rb(13,"j-filter-search",7),O.Vb(),O.Wb(14,"div",8),O.Pc(15,Re,1,0,"j-tole-not-connected-info",9),O.Pc(16,Ie,2,0,"h3",10),O.Pc(17,Me,3,3,"h3",10),O.Wb(18,"div",11),O.ic("scrolled",(function(e){return t.onScrollDown()}))("scrolledUp",(function(e){return t.onScrollUp()})),O.Pc(19,De,17,8,"div",12),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Pc(20,je,2,3,"ng-template",null,13,O.Qc),O.Pc(22,He,11,5,"ng-template",null,14,O.Qc),O.Pc(24,Ue,1,1,"ng-template",null,15,O.Qc),O.Pc(26,ze,3,1,"ng-template",null,16,O.Qc)),2&e){const e=O.Dc(21);O.Ab(12),O.sc("statuses",t.statuses),O.Ab(1),O.sc("customFilterSearchExtraContent",e)("isOnFocusDisabled",!0),O.Ab(2),O.sc("ngIf",t.connectionState&&!t.connectionState.connectedToPay),O.Ab(1),O.sc("ngIf",!t.selectedPeriodLabel&&(null==t.connectionState?null:t.connectionState.connectedToPay)),O.Ab(1),O.sc("ngIf",null==t.connectionState?null:t.connectionState.connectedToPay),O.Ab(1),O.sc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollUpDistance",20)("infiniteScrollThrottle",1e3),O.Ab(1),O.sc("ngForOf",t.paymentsList)}},directives:[ae.a,re.a,de.a,be.a,Oe.a,ve.a,xe.a,pe.a,ye.a,o.u,Ae.a,o.t,We,F.a,o.B,_e.a],pipes:[E.d],styles:[".header-container[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 0 #e9ebec;border-radius:12px 12px 0 0;height:75px}.filters-container[_ngcontent-%COMP%]{background:#f6f7f8}.payments-list[_ngcontent-%COMP%]{background:#fff}.payments-container[_ngcontent-%COMP%]{box-shadow:0 4px 8px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 0 1px rgba(0,0,0,.04);border-radius:12px;background:#fff}.payments-item[_ngcontent-%COMP%]{margin-right:.5em}.payments-item[_ngcontent-%COMP%]:hover{cursor:pointer}.payments-item-inner[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;padding-left:1rem;gap:1rem}.save-btn-icon[_ngcontent-%COMP%]{position:absolute}.option-template-container[_ngcontent-%COMP%]{height:56px;margin-bottom:10px}.download-btn[_ngcontent-%COMP%]{text-align:end}"]}),e})();var qe=n("iNf4");const Xe=[{path:"",children:[{path:"payments",component:Je},{path:"action",component:le},{path:"pos",component:we},{path:"map",component:(()=>{class e{constructor(e,t){this.router=e,this.pointsOfSellsActionService=t}onApplyClick(e){this.pointsOfSellsActionService.sellPointsActionForm.patchValue({address:e}),this.router.navigate(["jtole/pos"])}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(a.c),O.Qb(W))},e.\u0275cmp=O.Kb({type:e,selectors:[["j-tole-yandex-maps"]],decls:1,vars:0,consts:[[3,"applyClickFn"]],template:function(e,t){1&e&&(O.Wb(0,"j-yandex-maps",0),O.ic("applyClickFn",(function(e){return t.onApplyClick(e)})),O.Vb())},directives:[qe.a],styles:[""]}),e})()}]}];let Ke=(()=>{class e{}return e.\u0275mod=O.Ob({type:e}),e.\u0275inj=O.Nb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(Xe)],a.g]}),e})();var Ye=n("M4UK"),Ze=n("PCNd"),et=n("crCf"),tt=n("qAFH"),nt=n("tmjD"),it=n("xJkR"),ot=n("JJIx"),st=n("mQSa"),ct=n("ObZ0");n.d(t,"JToleModule",(function(){return lt}));let lt=(()=>{class e{}return e.\u0275mod=O.Ob({type:e}),e.\u0275inj=O.Nb({factory:function(t){return new(t||e)},providers:[i.a],imports:[[o.c,s.n,s.D,Ke,c.a,Ye.a,Ze.a,l.a,et.a,tt.CardsModule,nt.c.forChild(),i.s,Ae.b,it.b,ot.a,st.a,ct.a]]}),e})()}}]);