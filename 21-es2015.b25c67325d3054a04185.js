(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"7wo0":function(e,t,n){"use strict";n.r(t);var s=n("ofXK"),i=n("PCNd"),c=n("3Pt+"),a=n("tyNb"),r=n("fXoL"),o=n("paXB"),l=n("7/bn"),u=n("oMXN"),b=n("EiG8"),d=n("sYmb"),g=n("mCLR");const m=function(){return["main"]},p=function(){return["password"]},h=function(){return["package"]};let f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"a",1),r.Rc(2,"SETTINGS.MAIN"),r.Vb(),r.Wb(3,"a",1),r.Rc(4,"SETTINGS.PASSWORD.TITLE"),r.Vb(),r.Wb(5,"a",2),r.Rc(6,"SETTINGS.PACKAGE.NAV"),r.Vb(),r.Vb()),2&e&&(r.Ab(1),r.sc("routerLink",r.wc(3,m)),r.Ab(2),r.sc("routerLink",r.wc(4,p)),r.Ab(2),r.sc("routerLink",r.wc(5,h)))},directives:[a.f,a.e,d.a,g.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),e})(),y=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(e,t){1&e&&(r.Wb(0,"j-layout-home"),r.Wb(1,"j-aside"),r.Rb(2,"j-nav-main"),r.Vb(),r.Wb(3,"j-main"),r.Wb(4,"section",0),r.Wb(5,"section",1),r.Wb(6,"section",2),r.Wb(7,"h2",3),r.Rc(8,"SETTINGS.TITLE"),r.Vb(),r.Rb(9,"j-settings-tabs"),r.Rb(10,"router-outlet"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb())},directives:[o.a,l.a,u.a,b.a,d.a,f,a.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),e})();var k=n("mrSG"),S=n("4Nuw"),A=n("ZF+8"),T=n("VnnJ"),v=n("JqCM"),P=n("VO+5"),C=n("Kcpt"),I=n("e8Ap"),w=n("L+ju"),R=n("zN9f");let E=(()=>{class e{constructor(){this.selected=new r.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(e){var t;switch(null===(t=e)||void 0===t?void 0:t.accountType){case w.a.CARD:return"ACCOUNTS.CARD";case w.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case w.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"input",1),r.ic("change",(function(e){return t.onSelect()})),r.Vb(),r.Wb(2,"label",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Rb(5,"j-entity-logo",5),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"small",6),r.Wb(8,"div"),r.Rc(9),r.mc(10,"translate"),r.Vb(),r.Vb(),r.Wb(11,"span",7),r.Rc(12),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Ab(1),r.sc("id",t.account.id)("ngModel",t.account.isSelected),r.Ab(1),r.sc("for",t.account.id),r.Ab(3),r.sc("name",t.account.balance.currency),r.Ab(4),r.Sc(r.nc(10,6,t.mapSelectedAccountLabel(t.account))),r.Ab(3),r.Sc(t.account.iban))},directives:[c.a,c.t,c.w,R.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),e})();function O(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div"),r.Wb(1,"j-all-requisites-item",15),r.ic("selected",(function(t){return r.Gc(e),r.lc().onSelect()})),r.Vb(),r.Vb()}if(2&e){const e=t.$implicit;r.Ab(1),r.sc("account",e)}}function x(e,t){1&e&&(r.Wb(0,"div",16),r.Rb(1,"ngx-spinner",17),r.Vb()),2&e&&(r.Ab(1),r.sc("fullScreen",!1))}let _=(()=>{class e{constructor(e,t,n,s,i,c){this.accountsService=e,this.filesService=t,this.companyService=n,this.spinner=s,this.notifier=i,this.translateService=c,this.closed=new r.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(e=>{e.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(e=>(e.isSelected=this.isAllSelected,e))}onSelect(){this.isAllSelected=this.accounts.every(e=>e.isSelected)}onDownload(){const e=this.accounts.filter(e=>e.isSelected).map(e=>e.iban);e.length>0?this.download(e):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}download(e){return Object(k.a)(this,void 0,void 0,(function*(){try{const t=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,e);this.filesService.downloadFile(t,`${this.companyService.currentCompany.bin}.pdf`)}catch(t){console.error(t)}}))}onClose(){this.closed.emit()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(S.c),r.Qb(A.b),r.Qb(T.a),r.Qb(v.c),r.Qb(P.c),r.Qb(d.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(e,t){1&e&&(r.Wb(0,"section",0),r.Wb(1,"div",1),r.Rc(2),r.mc(3,"translate"),r.Vb(),r.Wb(4,"button",2),r.ic("click",(function(e){return t.onClose()})),r.Rb(5,"j-icon",3),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"input",6),r.ic("change",(function(e){return t.selectAll()})),r.Vb(),r.Wb(9,"label",7),r.Rc(10),r.mc(11,"translate"),r.Vb(),r.Vb(),r.Wb(12,"div",8),r.Pc(13,O,2,1,"div",9),r.Vb(),r.Vb(),r.Pc(14,x,2,1,"div",10),r.Wb(15,"div",11),r.Wb(16,"button",12),r.ic("click",(function(e){return t.onDownload()})),r.Rb(17,"div",13),r.Wb(18,"strong",14),r.Rc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Ab(2),r.Tc(" ",r.nc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),r.Ab(6),r.sc("id","all")("ngModel",t.isAllSelected),r.Ab(1),r.sc("for","all"),r.Ab(1),r.Tc(" ",r.nc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),r.Ab(3),r.sc("ngForOf",t.accounts),r.Ab(1),r.sc("ngIf",t.isLoading),r.Ab(3),r.sc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[C.a,c.a,c.t,c.w,s.t,s.u,I.a,d.a,E,v.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),e})();var W=n("quSY"),V=n("lJxs"),N=n("TwVa"),M=n("S09V"),D=n("kmKP"),G=n("mR7B"),j=n("tmjD");let L=(()=>{class e{constructor(e,t,n,s,i){this.companyService=e,this.userService=t,this.translateService=n,this.maskedService=s,this.maskPipe=i}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,M.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const e=this.userService.user;if(e)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${e.lastname||""} ${e.firstname||""} ${e.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(e.iin,M.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:e.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(e.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(V.a)(e=>{var t;return null===(t=e)||void 0===t?void 0:t.sort(this.sortPersons).map(e=>({initials:this.retrieveInitials(e),name:this.companyService.retrieveShortName(e),role:this.mapRole(e),startDate:e.fromDate,endDate:e.toDate,sign:this.mapSignText(e),color:this.mapInitialsColor(e)}))}))}mapAuthoritiesPrefix(e){return this.mapTranslatePrefix("AUTHORITIES",e)}mapCompanyPrefix(e){return this.mapTranslatePrefix("COMPANY",e)}mapPrivatePrefix(e){return this.mapTranslatePrefix("PRIVATE",e)}mapContactsPrefix(e){return this.mapTranslatePrefix("CONTACTS",e)}mapTranslatePrefix(e,t){return`SETTINGS.${e}.${t}`}mapDate(e){return e?Object(s.K)(e,"d MMMM yyyy",this.translateService.currentLang):null}sortPersons(e,t){return e.authority===t.authority?0:e.authority===N.a.PRIMARY_SIGNATURE?-1:e.authority===N.a.SECONDARY_SIGNATURE&&t.authority===N.a.NO_SIGNATURE?-1:1}mapRole(e){switch(e.authority){case N.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case N.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case N.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(e){switch(e.authority){case N.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case N.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case N.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(e){switch(e.authority){case N.a.PRIMARY_SIGNATURE:return"first-sign";case N.a.SECONDARY_SIGNATURE:return"second-sign";case N.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(e){return`${e.lastname[0]}${e.firstname[0]}`}}return e.\u0275fac=function(t){return new(t||e)(r.ec(T.a),r.ec(D.b),r.ec(d.e),r.ec(G.a),r.ec(j.b))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function U(e,t){if(1&e&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.ROLE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.Vb(),r.Vb()),2&e){const e=r.lc().$implicit;r.Ab(5),r.Sc(e.role)}}function q(e,t){if(1&e&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.START_DATE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.mc(6,"date"),r.Vb(),r.Vb()),2&e){const e=r.lc().$implicit;r.Ab(5),r.Sc(r.oc(6,1,e.startDate,"dd.MM.yyyy"))}}function K(e,t){if(1&e&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.END_DATE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.mc(6,"date"),r.Vb(),r.Vb()),2&e){const e=r.lc().$implicit;r.Ab(5),r.Sc(r.oc(6,1,e.endDate,"dd.MM.yyyy"))}}function F(e,t){if(1&e&&(r.Wb(0,"div",13),r.Rc(1),r.Vb()),2&e){const e=r.lc().$implicit;r.Ab(1),r.Tc(" ",e.sign," ")}}function z(e,t){if(1&e&&(r.Wb(0,"div",4),r.Wb(1,"div",5),r.Rc(2),r.Vb(),r.Wb(3,"div",6),r.Wb(4,"div",7),r.Rc(5),r.Vb(),r.Wb(6,"div",8),r.Pc(7,U,6,1,"div",9),r.Pc(8,q,7,4,"div",9),r.Pc(9,K,7,4,"div",9),r.Vb(),r.Vb(),r.Pc(10,F,2,1,"div",10),r.Vb()),2&e){const e=t.$implicit;r.Ab(1),r.Db(e.color),r.Ab(1),r.Tc(" ",e.initials," "),r.Ab(3),r.Sc(e.name),r.Ab(2),r.sc("ngIf",e.role),r.Ab(1),r.sc("ngIf",e.startDate),r.Ab(1),r.sc("ngIf",e.endDate),r.Ab(1),r.sc("ngIf",e.sign)}}function B(e,t){if(1&e&&(r.Wb(0,"section",1),r.Wb(1,"h6",2),r.Rc(2,"SETTINGS.AUTHORITIES.TITLE"),r.Vb(),r.Pc(3,z,11,8,"div",3),r.Vb()),2&e){const e=r.lc();r.Ab(3),r.sc("ngForOf",e.authorities)}}let Q=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(e,t){1&e&&r.Pc(0,B,4,1,"section",0),2&e&&r.sc("ngIf",t.authorities)},directives:[s.u,d.a,s.t],pipes:[s.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),e})();var $=n("xJkR"),H=n("lABO");function Y(e,t){if(1&e&&r.Rb(0,"e-authorities",3),2&e){const e=r.lc();r.sc("authorities",e.authorities)}}const X=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},J=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function Z(e,t){1&e&&(r.Wb(0,"div",4),r.Rb(1,"ngx-skeleton-loader",5),r.Rb(2,"ngx-skeleton-loader",6),r.Vb()),2&e&&(r.Ab(1),r.sc("theme",r.wc(2,X)),r.Ab(1),r.sc("theme",r.wc(3,J)))}function ee(e,t){if(1&e){const e=r.Xb();r.Wb(0,"j-error-placeholder",7),r.ic("retried",(function(t){return r.Gc(e),r.lc().onRetry()})),r.Vb()}}let te=(()=>{class e{constructor(e,t){this.settingsService=e,this.companyService=t,this.subscription=new W.a;const n=this.settingsService.getAuthoritiesList().subscribe(e=>{this.authorities=e});this.subscription.add(n)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(L),r.Qb(T.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(e,t){1&e&&(r.Pc(0,Y,1,1,"e-authorities",0),r.Pc(1,Z,3,4,"div",1),r.Pc(2,ee,1,0,"j-error-placeholder",2)),2&e&&(r.sc("ngIf",(null==t.authorities?null:t.authorities.length)>0),r.Ab(1),r.sc("ngIf",0==(null==t.authorities?null:t.authorities.length)),r.Ab(1),r.sc("ngIf",!t.authorities))},directives:[s.u,Q,$.a,H.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),e})();var ne=n("zdqJ");const se=["footerTemplate"];function ie(e,t){if(1&e&&r.Sb(0,4),2&e){const e=r.lc(2);r.sc("ngTemplateOutlet",e.footerTemplate)}}function ce(e,t){if(1&e&&(r.Wb(0,"section",3),r.Sb(1,4),r.Pc(2,ie,1,1,"ng-container",5),r.Vb()),2&e){const e=r.lc(),t=r.Dc(3);r.Ab(1),r.sc("ngTemplateOutlet",t),r.Ab(1),r.sc("ngIf",e.footerTemplate)}}function ae(e,t){if(1&e&&(r.Wb(0,"section",6),r.Sb(1,4),r.Vb()),2&e){r.lc();const e=r.Dc(3);r.Ab(1),r.sc("ngTemplateOutlet",e)}}function re(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",12),r.ic("click",(function(t){return r.Gc(e),r.lc(3).openRequisites()})),r.Rc(1),r.Vb()}if(2&e){const e=r.lc(3);r.Ab(1),r.Tc(" ",e.info.titleAdditional," ")}}function oe(e,t){if(1&e&&(r.Wb(0,"div",18),r.Rc(1),r.Vb()),2&e){const e=r.lc(2).$implicit;r.Ab(1),r.Tc(" ",e.value," ")}}function le(e,t){if(1&e&&(r.Wb(0,"a",19),r.Rc(1),r.Vb()),2&e){const e=r.lc(2).$implicit;r.uc("href","tel:",e.value,"",r.Ic),r.Ab(1),r.Sc(e.value)}}function ue(e,t){if(1&e&&(r.Wb(0,"a",19),r.Rc(1),r.Vb()),2&e){const e=r.lc(2).$implicit;r.uc("href","mailto:",e.value,"",r.Ic),r.Ab(1),r.Sc(e.value)}}function be(e,t){if(1&e&&(r.Wb(0,"div",14),r.Wb(1,"div",15),r.Rc(2),r.Vb(),r.Pc(3,oe,2,1,"div",16),r.Pc(4,le,2,2,"a",17),r.Pc(5,ue,2,2,"a",17),r.Vb()),2&e){const e=r.lc().$implicit;r.Ab(2),r.Tc(" ",e.label," "),r.Ab(1),r.sc("ngIf",!e.isPhone&&!e.isEmail),r.Ab(1),r.sc("ngIf",e.isPhone),r.Ab(1),r.sc("ngIf",e.isEmail)}}function de(e,t){if(1&e&&(r.Ub(0),r.Pc(1,be,6,4,"div",13),r.Tb()),2&e){const e=t.$implicit;r.Ab(1),r.sc("ngIf",e.value)}}function ge(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",8),r.Wb(2,"h6",9),r.Rc(3),r.Vb(),r.Pc(4,re,2,1,"button",10),r.Vb(),r.Pc(5,de,2,1,"ng-container",11),r.Tb()),2&e){const e=r.lc(2);r.Ab(3),r.Sc(e.info.title),r.Ab(1),r.sc("ngIf",e.info.titleAdditional),r.Ab(1),r.sc("ngForOf",e.info.fields)}}function me(e,t){if(1&e&&r.Pc(0,ge,6,3,"ng-container",7),2&e){const e=r.lc();r.sc("ngIf",e.info)}}let pe=(()=>{class e{constructor(){this.requisitesClicked=new r.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-info"]],contentQueries:function(e,t,n){var s;1&e&&r.Ib(n,se,!0),2&e&&r.Cc(s=r.jc())&&(t.footerTemplate=s.first)},inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(e,t){1&e&&(r.Pc(0,ce,3,2,"section",0),r.Pc(1,ae,2,1,"section",1),r.Pc(2,me,1,1,"ng-template",null,2,r.Qc)),2&e&&(r.sc("ngIf",t.hasTour),r.Ab(1),r.sc("ngIf",!t.hasTour))},directives:[s.u,ne.a,s.B,d.a,s.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),e})();const he=function(){return["/authorities"]};function fe(e,t){1&e&&(r.Wb(0,"a",4),r.Rc(1),r.mc(2,"translate"),r.Vb()),2&e&&(r.sc("routerLink",r.wc(4,he)),r.Ab(1),r.Tc(" ",r.nc(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function ye(e,t){if(1&e){const e=r.Xb();r.Wb(0,"section",5),r.Wb(1,"div",6),r.ic("click",(function(t){return r.Gc(e),r.lc().hideSelector()})),r.Vb(),r.Wb(2,"section",7),r.Wb(3,"j-all-requisites",8),r.ic("closed",(function(t){return r.Gc(e),r.lc().hideSelector()})),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.lc();r.sc("ngClass",e.wrapperClasses),r.Ab(2),r.sc("ngClass",e.allRequisitesClasses)}}let ke=(()=>{class e{constructor(e,t,n){this.settingsService=e,this.companyService=t,this.document=n,this.subscription=new W.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const s=this.companyService.refresh$.subscribe(()=>{this.loadData()});this.subscription.add(s)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(L),r.Qb(T.a),r.Qb(s.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-main"]],decls:6,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(e,t){1&e&&(r.Wb(0,"j-settings-info",0),r.ic("requisitesClicked",(function(e){return t.showSelector()})),r.Pc(1,fe,3,5,"ng-template",null,1,r.Qc),r.Vb(),r.Rb(3,"j-settings-info",2),r.Rb(4,"j-settings-info",2),r.Pc(5,ye,4,2,"section",3)),2&e&&(r.sc("info",t.mainInfo)("hasTour",!0),r.Ab(3),r.sc("info",t.privateInfo),r.Ab(1),r.sc("info",t.contactsInfo),r.Ab(1),r.sc("ngIf",t.isAllRequisitesShown))},directives:[pe,s.u,a.f,s.r,_],pipes:[d.d],styles:[""]}),e})();var Se=n("p6Hd"),Ae=n("tWFC"),Te=n("1kSV"),ve=n("kUBv");const Pe=["newPassword"];let Ce=(()=>{class e{constructor(e,t){this.userService=e,this.modalService=t,this.isLoading=!1}onSubmit(e){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(e.oldPassword,e.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(t){switch(t.code){case Se.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case Se.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case Se.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=t.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(k.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(Ae.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield e.result}catch(t){}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.b),r.Qb(Te.q))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-password"]],viewQuery:function(e,t){var n;1&e&&r.Wc(Pe,!0),2&e&&r.Cc(n=r.jc())&&(t.newPassword=n.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Rb(3,"div",3),r.Wb(4,"j-new-password",4,5),r.ic("submitted",(function(e){return t.onSubmit(e)})),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Ab(4),r.sc("isOldShown",!0)("isLoading",t.isLoading)("errorText",t.errorText))},directives:[d.a,ve.a],styles:[""]}),e})();var Ie=n("LRne");class we{constructor(e,t,n,s){this.numberOfPayments=e,this.depositAndWithdrawal=t,this.discountInRubles=n,this.discountInForeignCurrency=s}}class Re{constructor(e,t,n){this.title=e,this.helpText=t,this.description=Object(Ie.a)(n)}}class Ee{constructor(e,t){this.totalCost=e,this.saving=t}}var Oe=function(e){return e.Loading="loading",e.Change="change",e.Success="success",e.NotFound="not_found",e.Error="error",e.Forbidden="forbidden",e}({});const xe=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],_e=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],We=[{name:"\u0412 \u0440\u0443\u0431\u043b\u044f\u0445",text:"2 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 50% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435",text:"3 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 30% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],Ve=[Object.assign(Object.assign({},We[0]),{disabled:!0}),Object.assign(Object.assign({},We[1]),{disabled:!0})],Ne={current:0,total:0,description:Object(Ie.a)(""),color:""},Me={current:0,total:0,description:Object(Ie.a)(""),color:""},De={totalCost:0,nextWriteOff:""},Ge={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},je=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];n("eIyQ");const Le={connect:{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"close"}},prepared:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},error:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"50x",description:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.\n\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u044d\u0442\u0438\u043c, \n\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",buttonOk:{text:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",key:"smsAfter"},buttonClose:{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u043f\u0430\u043a\u0435\u0442\u0430",key:"close"}},change:{title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \n\u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},connect_standart:{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439?",description:"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \n\u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u043a\u0435\u0442 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0414\u0430",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},prepared_standart:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444 Standart",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},payment:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"402",description:"\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0447\u0451\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},payment_locked:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",description:"\u041d\u0430 \u0441\u0447\u0451\u0442\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",buttonClose:{text:"\u041e\u041a",key:"close"}},working_days:{icon:"error",description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \n\u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438. \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435 \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},same_day:{icon:"error",description:"\u041c\u0435\u043d\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c",buttonClose:{text:"\u041e\u041a",key:"close"}}};var Ue=n("Ts65");function qe(e,t){if(1&e&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Wb(2,"span"),r.Rc(3),r.mc(4,"translate"),r.Wb(5,"span",3),r.Rc(6),r.mc(7,"number"),r.Vb(),r.Rc(8),r.mc(9,"translate"),r.mc(10,"number"),r.Vb(),r.Vb(),r.Wb(11,"div",2),r.Wb(12,"small"),r.Rc(13),r.Vb(),r.Vb(),r.Wb(14,"div",4),r.Wb(15,"div",5),r.Rb(16,"div",6),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.lc();r.Ab(3),r.Tc("",r.nc(4,10,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),r.Ab(2),r.sc("title",null==e.item?null:e.item.current),r.Ab(1),r.Tc("",r.nc(7,12,null==e.item?null:e.item.current)," "),r.Ab(2),r.Uc(" ",r.nc(9,14,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM")," ",r.nc(10,16,null==e.item?null:e.item.total),""),r.Ab(5),r.Tc(" ",null==e.item?null:e.item.description," "),r.Ab(3),r.Eb("progress-bar ",null!=e.item&&e.item.color?null==e.item?null:e.item.color:"NONE",""),r.sc("ngStyle",e.style)}}function Ke(e,t){1&e&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Rc(2),r.mc(3,"translate"),r.Vb(),r.Wb(4,"div",2),r.Wb(5,"small"),r.Rc(6),r.mc(7,"translate"),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Ab(2),r.Tc(" ",r.nc(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),r.Ab(4),r.Tc(" ",r.nc(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}let Fe=(()=>{class e{constructor(){this.style={width:"0%","border-radius":"0.375rem"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(e){var t,n;const s=Math.round((null===(t=e)||void 0===t?void 0:t.current)/(null===(n=e)||void 0===n?void 0:n.total)*100);this.style.width=`${0!==s?s:1}%`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar ","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",3,"ngStyle"]],template:function(e,t){1&e&&(r.Pc(0,qe,17,18,"div",0),r.Pc(1,Ke,8,6,"div",0)),2&e&&(r.sc("ngIf",null==t.item?null:t.item.total),r.Ab(1),r.sc("ngIf",!(null!=t.item&&t.item.total)))},directives:[s.u,s.x],pipes:[d.d,s.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.GREEN[_ngcontent-%COMP%]{background-color:#74ba72!important}.YELLOW[_ngcontent-%COMP%]{background-color:#ef8f00!important}.RED[_ngcontent-%COMP%]{background-color:red!important}.NONE[_ngcontent-%COMP%]{background-color:#e9ecf1!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),e})();var ze=n("Bl/x");function Be(e,t){if(1&e){const e=r.Xb();r.Wb(0,"j-switch",10),r.ic("change",(function(t){r.Gc(e);const n=r.lc().$implicit;return r.lc().setValue(n)})),r.Vb()}if(2&e){const e=r.lc().$implicit;r.sc("value",e.checked)}}function Qe(e,t){1&e&&r.Rb(0,"img",13)}function $e(e,t){1&e&&r.Rb(0,"img",14)}function He(e,t){if(1&e&&(r.Ub(0),r.Pc(1,Qe,1,0,"img",11),r.Pc(2,$e,1,0,"img",12),r.Tb()),2&e){const e=r.lc().$implicit;r.Ab(1),r.sc("ngIf",e.checked),r.Ab(1),r.sc("ngIf",!e.checked)}}function Ye(e,t){1&e&&r.Rb(0,"div",15)}function Xe(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Rc(5),r.Vb(),r.Rc(6),r.Vb(),r.Wb(7,"div",5),r.Rc(8),r.Vb(),r.Vb(),r.Wb(9,"div",6),r.Pc(10,Be,1,1,"j-switch",7),r.Pc(11,He,3,2,"ng-container",8),r.Vb(),r.Vb(),r.Pc(12,Ye,1,0,"div",9),r.Tb()),2&e){const e=t.$implicit,n=t.last;r.Ab(4),r.Hb("bg-sale-success-color",e.checked),r.Ab(1),r.Tc("-",e.sale,"%"),r.Ab(1),r.Tc(" ",e.name," "),r.Ab(2),r.Tc(" ",e.text," "),r.Ab(2),r.sc("ngIf",!(null!=e&&e.disabled)),r.Ab(1),r.sc("ngIf",null==e?null:e.disabled),r.Ab(1),r.sc("ngIf",!n)}}let Je=(()=>{class e{constructor(){this.getValue=new r.n}ngOnInit(){}set select(e){this.items[0].checked=e.discountInRubles,this.items[1].checked=e.discountInForeignCurrency}setValue(e){e.checked=!e.checked,this.getValue.emit({[e.key]:e.checked})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","./assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","./assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","./assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","./assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(e,t){1&e&&r.Pc(0,Xe,13,8,"ng-container",0),2&e&&r.sc("ngForOf",t.items)},directives:[s.t,s.u,ze.a],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),e})();const Ze=function(e){return{totalCost:e}},et=function(){return["my_package"]},tt=function(e){return{faq:e}},nt=function(e){return{outlets:e}},st=function(e){return[e]};let it=(()=>{class e{constructor(e){this.translateService=e,this.isAnotherCompany=!1,this.payment=new Re("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new Re("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new Re("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Me,this.myRefillData=Ne,this.myPriceData=De,this.mySaleData=Ve}ngOnInit(){this.defaultView()}defaultView(){this.isAnotherCompany||(this.payment=new Re("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new Re("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new Re("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}set data(e){this.myPaymentData.current=e.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=e.restOfPayments.totalNumberOfPayments,this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:e.restOfPayments.totalNumberOfPayments,payment:e.restOfPayments.costNextPayment}).subscribe(e=>{this.myPaymentData.description=e}),this.myPaymentData.color=e.restOfPayments.colorIndicator,this.myRefillData.current=e.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=e.depositAndWithdrawals.totalDepositAndWithdrawals,this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:e.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:e.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:e.depositAndWithdrawals.withdrawalOverLimit}).subscribe(e=>{this.myRefillData.description=this.refill.description=e}),this.myRefillData.color=e.depositAndWithdrawals.colorIndicator,this.mySaleData.find((t,n)=>{"discountInRubles"===t.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:e.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===t.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:e.discountOnTransferInCurrency.hasDiscount}))}),this.myPriceData.totalCost=e.totalCost,this.myPriceData.nextWriteOff=e.nextWriteOff}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(d.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:19,vars:29,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"],[1,"row","justify-content-center",2,"max-width","27.2rem","margin-top","1.875rem"],[1,"d-flex"],[1,"faq-link",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"j-settings-package-card",0),r.Rb(1,"j-settings-package-progressbar",1),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Rb(3,"j-settings-package-progressbar",2),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Rb(5,"j-settings-package-form",3),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"p",4),r.Rc(8),r.mc(9,"translate"),r.mc(10,"number"),r.Vb(),r.Wb(11,"p",5),r.Rc(12),r.mc(13,"translate"),r.mc(14,"date"),r.Vb(),r.Vb(),r.Wb(15,"div",6),r.Wb(16,"div",7),r.Wb(17,"a",8),r.Rc(18,"\u041a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442?"),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.sc("itemCardSettingsPackage",t.payment),r.Ab(1),r.sc("item",t.myPaymentData),r.Ab(1),r.sc("itemCardSettingsPackage",t.refill),r.Ab(1),r.sc("item",t.myRefillData),r.Ab(1),r.sc("itemCardSettingsPackage",t.sale),r.Ab(1),r.sc("items",t.mySaleData),r.Ab(3),r.Tc(" ",r.oc(9,10,"SETTINGS.PACKAGE.CALCULATE.COST",r.xc(20,Ze,r.nc(10,13,null==t.myPriceData?null:t.myPriceData.totalCost)))," "),r.Ab(4),r.Uc("",r.nc(13,15,"SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW")," \u2014 ",r.oc(14,17,null==t.myPriceData?null:t.myPriceData.nextWriteOff,"dd.MM.yyyy"),""),r.Ab(5),r.sc("routerLink",r.xc(27,st,r.xc(25,nt,r.xc(23,tt,r.wc(22,et))))))},directives:[Ue.a,Fe,Je,a.f],pipes:[d.d,s.g,s.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}.faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;text-align:center;color:#ef5630;cursor:pointer}"]}),e})();var ct=n("yZrb"),at=n("tk/3");let rt=(()=>{class e{constructor(e){this.apiService=e}getCompanyCurrentPackage(e){return Object(k.a)(this,void 0,void 0,(function*(){const t=`companies/${e}/packages/current`;return yield this.apiService.get(t)}))}calculatePackageCost(e,t){return Object(k.a)(this,void 0,void 0,(function*(){const n=`companies/${e}/packages/calculate`;return yield this.apiService.post(n,t)}))}changeCompanyPackage(e,t,n){return Object(k.a)(this,void 0,void 0,(function*(){const s=`companies/${e}/packages/current`,i=(new at.g).set(ct.b.PHONE,n);return yield this.apiService.put(s,t,i)}))}}return e.\u0275fac=function(t){return new(t||e)(r.ec(ct.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ot=n("2FF4"),lt=n("4zJ+");function ut(e,t){1&e&&(r.Rb(0,"img",8),r.mc(1,"translate")),2&e&&r.tc("alt",r.nc(1,1,"SHARED.DONE"))}function bt(e,t){1&e&&(r.Rb(0,"img",9),r.mc(1,"translate")),2&e&&r.tc("alt",r.nc(1,1,"SHARED.DONE"))}function dt(e,t){if(1&e&&(r.Wb(0,"h3",10),r.Rc(1),r.Vb()),2&e){const e=r.lc(2);r.Ab(1),r.Tc(" ",e.alertMessage.title," ")}}function gt(e,t){if(1&e&&(r.Wb(0,"p",11),r.Rc(1),r.Vb()),2&e){const e=r.lc(2);r.Ab(1),r.Tc(" ",e.alertMessage.description," ")}}function mt(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",13),r.ic("click",(function(t){r.Gc(e);const n=r.lc(2);return n.buttonClick(n.alertMessage.buttonOk.key)})),r.Rc(2),r.Vb(),r.Vb()}if(2&e){const e=r.lc(2);r.Ab(2),r.Tc(" ",e.alertMessage.buttonOk.text," ")}}function pt(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",14),r.ic("click",(function(t){r.Gc(e);const n=r.lc(2);return n.buttonClick(n.alertMessage.buttonClose.key)})),r.Rc(2),r.Vb(),r.Vb()}if(2&e){const e=r.lc(2);r.Ab(2),r.Tc(" ",e.alertMessage.buttonClose.text," ")}}function ht(e,t){if(1&e&&(r.Ub(0),r.Rb(1,"div",1),r.Wb(2,"div",2),r.Pc(3,ut,2,3,"img",3),r.Pc(4,bt,2,3,"img",4),r.Pc(5,dt,2,1,"h3",5),r.Pc(6,gt,2,1,"p",6),r.Vb(),r.Pc(7,mt,3,1,"div",7),r.Pc(8,pt,3,1,"div",7),r.Tb()),2&e){const e=r.lc();r.Ab(3),r.sc("ngIf","success"===(null==e.alertMessage?null:e.alertMessage.icon)),r.Ab(1),r.sc("ngIf","error"===(null==e.alertMessage?null:e.alertMessage.icon)),r.Ab(1),r.sc("ngIf",null==e.alertMessage?null:e.alertMessage.title),r.Ab(1),r.sc("ngIf",null==e.alertMessage?null:e.alertMessage.description),r.Ab(1),r.sc("ngIf",null==e.alertMessage?null:e.alertMessage.buttonOk),r.Ab(1),r.sc("ngIf",null==e.alertMessage?null:e.alertMessage.buttonClose)}}function ft(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",18),r.ic("click",(function(t){return r.Gc(e),r.lc(2).buttonClick("close")})),r.Rb(1,"img",19),r.mc(2,"translate"),r.Vb()}2&e&&(r.Ab(1),r.tc("alt",r.nc(2,1,"SHARED.CLOSE")))}function yt(e,t){1&e&&(r.Wb(0,"div",20),r.Rb(1,"j-animated-loading"),r.Vb())}function kt(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",1),r.Pc(2,ft,3,3,"button",15),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"j-sms",16),r.ic("loaded",(function(t){return r.Gc(e),r.lc().onSmsLoaded()}))("submitted",(function(t){return r.Gc(e),r.lc().onSubmit(t)})),r.Vb(),r.Pc(5,yt,2,0,"div",17),r.Vb(),r.Tb()}if(2&e){const e=r.lc();r.Ab(2),r.sc("ngIf",e.isReady),r.Ab(2),r.sc("phone",e.phone)("countryCode",e.countryCode)("headers",e.headerParams)("hidden",!e.isReady),r.Ab(1),r.sc("ngIf",!e.isReady)}}let St=(()=>{class e{constructor(e,t){this.modal=e,this.packageRequestsService=t,this.refresh=new r.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:ct.c.SIGNING_PACKAGE}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Le.same_day:Le[this.alertMessageType]:Le.working_days}onSmsLoaded(){this.isReady=!0}onSubmit(e){this.isReady=!1,this.changePackage(e.signature)}changePackage(e){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,e).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?Le.prepared_standart:Le.prepared}).catch(e=>{this.alertMessage=402===e.status?Le.payment:423===e.status?Le.payment_locked:Le.error}).finally(()=>{var e,t;const n="connect"===this.alertMessageType?"new":"old",s=(null===(e=this.alertMessage)||void 0===e?void 0:e.code)?null===(t=this.alertMessage)||void 0===t?void 0:t.code:"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:n,statusCode:s})})}buttonClick(e){"smsAfter"===e&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===e&&this.modal.close(),"close"===e&&this.modal.close()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Te.a),r.Qb(rt))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(e,t){1&e&&(r.Pc(0,ht,9,6,"ng-container",0),r.Pc(1,kt,6,6,"ng-container",0)),2&e&&(r.sc("ngIf",!t.smsAfterOpen),r.Ab(1),r.sc("ngIf",t.smsAfterOpen))},directives:[s.u,d.a,ot.a,lt.a],pipes:[d.d],styles:[""]}),e})();var At=n("5gsm");function Tt(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(t){return r.Gc(e),r.lc(3).resetPackageTerms.emit("cancel")})),r.Rc(1),r.mc(2,"translate"),r.Vb()}2&e&&(r.Ab(1),r.Tc(" ",r.nc(2,1,"SETTINGS.PACKAGE.RESET")," "))}function vt(e,t){if(1&e&&(r.Wb(0,"div",3),r.Pc(1,Tt,3,3,"button",6),r.Vb()),2&e){const e=r.lc(2);r.Ab(1),r.sc("ngIf","change"===e.status)}}function Pt(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(t){r.Gc(e),r.lc();const n=r.Dc(2),s=r.lc(2);return n.close(),s.resetPackageTerms.emit("change")})),r.Rc(1),r.mc(2,"translate"),r.Vb(),r.Wb(3,"button",11),r.ic("click",(function(t){r.Gc(e),r.lc();const n=r.Dc(2),s=r.lc(2);return n.close(),s.resetPackageTerms.emit("reset")})),r.Rc(4),r.mc(5,"translate"),r.Vb()}2&e&&(r.Ab(1),r.Tc(" ",r.nc(2,2,"SETTINGS.PACKAGE.CHANGE")," "),r.Ab(3),r.Tc(" ",r.nc(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function Ct(e,t){if(1&e&&(r.Wb(0,"div",3),r.Wb(1,"button",8,9),r.Rc(3),r.mc(4,"translate"),r.Vb(),r.Pc(5,Pt,6,6,"ng-template",null,10,r.Qc),r.Vb()),2&e){const e=r.Dc(6);r.Ab(1),r.sc("autoClose","outside")("ngbPopover",e),r.Ab(2),r.Tc(" ",r.nc(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function It(e,t){if(1&e&&(r.Wb(0,"section",1),r.Wb(1,"div",2),r.Wb(2,"div",3),r.Wb(3,"h4",4),r.Rc(4),r.mc(5,"translate"),r.Vb(),r.Vb(),r.Pc(6,vt,2,1,"div",5),r.Pc(7,Ct,7,5,"div",5),r.Vb(),r.Vb()),2&e){const e=r.lc();r.Ab(4),r.Sc(r.nc(5,3,e.packageTitle[e.status])),r.Ab(2),r.sc("ngIf","change"===e.status),r.Ab(1),r.sc("ngIf","success"===e.status)}}const wt=function(){return["success","change","not_found"]};let Rt=(()=>{class e{constructor(){this.status=Oe.Loading,this.resetPackageTerms=new r.n,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(e,t){1&e&&r.Pc(0,It,8,5,"section",0),2&e&&r.sc("ngIf",r.wc(1,wt).includes(t.status))},directives:[s.u,Te.C],pipes:[d.d],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),e})();function Et(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",2),r.Wb(1,"label"),r.Wb(2,"input",3),r.ic("change",(function(n){r.Gc(e);const s=t.$implicit,i=t.index;return r.lc().setValue(s,i)})),r.Vb(),r.Wb(3,"div",4),r.Wb(4,"div",5),r.Rc(5),r.mc(6,"translate"),r.Vb(),r.Wb(7,"div",6),r.Rc(8),r.mc(9,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=t.$implicit,n=t.index,s=r.lc();r.Ab(2),r.sc("name",s.key+n)("value",e.value)("checked",e.checked),r.Ab(3),r.Uc("",e.value," ",r.nc(6,6,s.textType[s.key]),""),r.Ab(3),r.Tc(" ",r.pc(9,8,e.currency,"\u20b8","symbol","0.0-2")," ")}}let Ot=(()=>{class e{constructor(){this.key="numberOfPayments",this.getValue=new r.n,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}ngOnInit(){}set select(e){this.items.map(t=>t.checked=t.value===e)}setValue(e,t){e.checked=!e.checked,this.items.filter((e,n)=>n!==t).map(e=>e.checked=!1),this.getValue.emit({[this.key]:e.checked?e.value:0})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Pc(1,Et,10,13,"div",1),r.Vb()),2&e&&(r.Ab(1),r.sc("ngForOf",t.items))},directives:[s.t],pipes:[d.d,s.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),e})(),xt=(()=>{class e{constructor(e){this.translateService=e,this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new r.n,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe(()=>{this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(d.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:26,vars:30,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"ngbTooltip","inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(e,t){if(1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Rc(5),r.mc(6,"translate"),r.Vb(),r.Vb(),r.Wb(7,"div",3),r.Wb(8,"span"),r.Wb(9,"span",5),r.Rc(10),r.mc(11,"currency"),r.Vb(),r.Wb(12,"span",5),r.Rc(13,"-"),r.Vb(),r.Rb(14,"a",6),r.mc(15,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",7),r.Wb(17,"button",8,9),r.ic("click",(function(e){return t.openModal.emit()})),r.mc(19,"translate"),r.Wb(20,"span"),r.Rc(21),r.mc(22,"translate"),r.Vb(),r.Wb(23,"span",10),r.Rc(24),r.mc(25,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.Dc(18);r.Ab(5),r.Sc(r.nc(6,12,"SETTINGS.PACKAGE.PRICE.TITLE")),r.Ab(4),r.sc("hidden",!(null!=t.item&&t.item.saving)),r.Ab(1),r.Sc(r.pc(11,14,null==t.item?null:t.item.saving,"\u20b8","symbol","0.0-2")),r.Ab(2),r.sc("hidden",null==t.item?null:t.item.saving),r.Ab(2),r.sc("ngbTooltip",r.nc(15,19,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question.svg"),r.Ab(3),r.sc("ngbTooltip",r.nc(19,21,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",t.disabledButton),r.Ab(4),r.Uc("",r.nc(22,23,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",t.isWorkingDay?e.close():e.open(),""),r.Ab(2),r.sc("hidden",!(null!=t.item&&t.item.saving)),r.Ab(1),r.Tc("\xa0",r.pc(25,25,null==t.item?null:t.item.totalCost,t.currency,"symbol","0.0-2"),"")}},directives:[Te.E,I.a],pipes:[d.d,s.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),e})();const _t=function(){return["calculate"]},Wt=function(e){return{faq:e}},Vt=function(e){return{outlets:e}},Nt=function(e){return[e]};let Mt=(()=>{class e{constructor(e){this.translateService=e,this.calculatePackage=new r.n,this.openModal=new r.n,this.isWorkingDay=!0,this.packageRest=null,this.packageTermsRedirect=null,this.paymentData=xe,this.refillData=_e,this.saleData=We,this.disabledButton=!0}ngOnInit(){this.packageTerms=new we(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(e=>!this.packageTerms[e])||(this.payment=new Re("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new Re("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new Re("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new Ee(0,0),!1)}packageCalculate(e){"depositAndWithdrawal"in e&&(e.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),e),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(e){e&&(this.price.totalCost=e.conditions.packageCost,this.price.saving=e.saving,this.payment.description=e.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:e.conditions.costNextPayment}):Object(Ie.a)(""),this.refill.description=e.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:e.depositAndWithdrawal/1e6,depositingOverLimit:e.conditions.depositingOverLimit,withdrawalOverLimit:e.conditions.withdrawalOverLimit}):Object(Ie.a)(""),this.disabledButton=!this.isWorkingDay)}getPackageTerms(e){e&&(this.packageTerms.numberOfPayments=e.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=e.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=e.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=e.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms)),this.packageTermsRedirect&&(console.log(this.packageTermsRedirect),this.packageTerms.numberOfPayments=+this.packageTermsRedirect.numberOfPayments||0,this.packageTerms.depositAndWithdrawal=1e6*+this.packageTermsRedirect.depositAndWithdrawal||0,this.packageTerms.discountInRubles=this.packageTermsRedirect.discountInRubles,this.packageTerms.discountInForeignCurrency=this.packageTermsRedirect.discountInForeignCurrency,this.calculatePackage.emit(this.packageTerms))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(d.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",packageTerms:"packageTerms",packageTermsRedirect:"packageTermsRedirect",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:12,vars:20,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"],[1,"row","justify-content-center",2,"max-width","27.2rem","margin-top","1.875rem"],[1,"d-flex"],[1,"faq-link",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"j-settings-package-card",0),r.Wb(1,"j-settings-package-tabs",1),r.ic("getValue",(function(e){return t.packageCalculate(e)})),r.Vb(),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Wb(3,"j-settings-package-tabs",2),r.ic("getValue",(function(e){return t.packageCalculate(e)})),r.Vb(),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Wb(5,"j-settings-package-form",3),r.ic("getValue",(function(e){return t.packageCalculate(e)})),r.Vb(),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"j-settings-package-price",4),r.ic("openModal",(function(e){return t.openModal.emit(t.packageTerms)})),r.Vb(),r.Vb(),r.Wb(8,"div",5),r.Wb(9,"div",6),r.Wb(10,"a",7),r.Rc(11,"\u041a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442?"),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.sc("itemCardSettingsPackage",t.payment),r.Ab(1),r.sc("items",t.paymentData)("select",t.packageTerms.numberOfPayments),r.Ab(1),r.sc("itemCardSettingsPackage",t.refill),r.Ab(1),r.sc("items",t.refillData)("select",t.packageTerms.depositAndWithdrawal/1e6),r.Ab(1),r.sc("itemCardSettingsPackage",t.sale),r.Ab(1),r.sc("items",t.saleData)("select",t.packageTerms),r.Ab(2),r.sc("item",t.price)("disabledButton",t.disabledButton)("isWorkingDay",t.isWorkingDay),r.Ab(3),r.sc("routerLink",r.xc(18,Nt,r.xc(16,Vt,r.xc(14,Wt,r.wc(13,_t))))))},directives:[Ue.a,Ot,Je,xt,a.f],styles:["faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;text-align:center;color:#ef5630;cursor:pointer;margin-bottom:1rem}"]}),e})();function Dt(e,t){if(1&e&&(r.Ub(0),r.Rb(1,"j-my-package",5),r.Tb()),2&e){const e=r.lc();r.Ab(1),r.sc("data",e.packageRest)}}function Gt(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",6),r.ic("openModal",(function(t){return r.Gc(e),r.lc().changePackageTerms("connect",t)}))("calculatePackage",(function(t){return r.Gc(e),r.lc().calculatePackageTerms(t)})),r.Vb(),r.Tb()}if(2&e){const e=r.lc();r.Ab(1),r.sc("data",e.packageCalculation)("packageTermsRedirect",e.packageTerms)("isWorkingDay",e.packageRest.isWorkingDay)}}function jt(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",7),r.ic("openModal",(function(t){return r.Gc(e),r.lc().changePackageTerms("change",t)}))("calculatePackage",(function(t){return r.Gc(e),r.lc().calculatePackageTerms(t)})),r.Vb(),r.Tb()}if(2&e){const e=r.lc();r.Ab(1),r.sc("data",e.packageCalculation)("packageRest",e.packageRest)}}function Lt(e,t){1&e&&(r.Ub(0),r.Rb(1,"j-error-placeholder",8),r.mc(2,"translate"),r.mc(3,"translate"),r.Tb()),2&e&&(r.Ab(1),r.sc("errorText",r.nc(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",r.nc(3,6,"SHARED.SOON"))("imgLink","./assets/img/shared/empty.svg")("isRetryable",!1))}function Ut(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"j-error-placeholder",9),r.ic("retried",(function(t){return r.Gc(e),r.lc().getPackageRest()})),r.Vb(),r.Tb()}}function qt(e,t){1&e&&r.Rb(0,"ngx-skeleton-loader",11),2&e&&r.sc("theme",t.$implicit)}function Kt(e,t){if(1&e&&(r.Ub(0),r.Pc(1,qt,1,1,"ngx-skeleton-loader",10),r.Tb()),2&e){const e=r.lc();r.Ab(1),r.sc("ngForOf",e.themes)}}let Ft=(()=>{class e{constructor(e,t,n,s){this.packageRequestsService=e,this.companyService=t,this.analytics=n,this.modalService=s,this.subscription=new W.a,this.themes=je,sessionStorage.getItem("packageTerms")&&(this.packageTerms=JSON.parse(sessionStorage.getItem("packageTerms")),console.log(this.packageTerms),sessionStorage.removeItem("packageTerms"))}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(e=>{this.companyId=e[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=Oe.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(e=>{var t;this.packageRest=e,this.packageResponseStatus=(null===(t=this.packageRest)||void 0===t?void 0:t.totalCost)?Oe.Success:Oe.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(e=>{403===e.status?(this.packageResponseStatus=Oe.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=Oe.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(e){this.packageRequestsService.calculatePackageCost(this.companyId,e).then(e=>{this.packageCalculation=e}).catch(()=>{this.packageResponseStatus=Oe.Error})}changePackageTerms(e,t){const n=this.modalService.open(St,Ge);n.componentInstance.alertMessageType=e,n.componentInstance.packageTerms=t,n.componentInstance.companyId=this.companyId,n.componentInstance.isSameDay=this.packageRest.isSameDay,n.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,n.componentInstance.refresh.subscribe(({typeUser:e,statusCode:t})=>{this.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:e,Status:t}),this.getPackageRest()}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(e){if(this.packageCalculation=void 0,"change"===e)this.packageResponseStatus=Oe.Change;else if("cancel"===e)this.packageResponseStatus=Oe.Success;else if("reset"===e){const e=new we(0,0,!1,!1);this.changePackageTerms("connect_standart",e)}}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(rt),r.Qb(T.a),r.Qb(At.b),r.Qb(Te.q))},e.\u0275cmp=r.Kb({type:e,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","packageTermsRedirect","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"j-settings-package-header",2),r.ic("resetPackageTerms",(function(e){return t.resetPackageTerms(e)})),r.Vb(),r.Pc(3,Dt,2,1,"ng-container",3),r.Pc(4,Gt,2,3,"ng-container",3),r.Pc(5,jt,2,2,"ng-container",3),r.Pc(6,Lt,4,8,"ng-container",3),r.Pc(7,Ut,2,0,"ng-container",3),r.Vb(),r.Pc(8,Kt,2,1,"ng-container",3),r.Vb(),r.Rb(9,"router-outlet",4)),2&e&&(r.sc("ngSwitch",t.packageResponseStatus),r.Ab(2),r.sc("status",t.packageResponseStatus),r.Ab(1),r.sc("ngSwitchCase","success"),r.Ab(1),r.sc("ngSwitchCase","not_found"),r.Ab(1),r.sc("ngSwitchCase","change"),r.Ab(1),r.sc("ngSwitchCase","forbidden"),r.Ab(1),r.sc("ngSwitchCase","error"),r.Ab(1),r.sc("ngSwitchCase","loading"))},directives:[s.y,Rt,s.z,a.h,it,Mt,H.a,s.t,$.a],pipes:[d.d],encapsulation:2}),e})();var zt=n("KJdv");const Bt=[{path:"",component:y,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:ke},{path:"authorities",component:te},{path:"password",component:Ce},{path:"package",component:Ft,canActivate:[n("RW1d").a],children:[{path:":key",component:zt.a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let Qt=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(Bt)],a.g]}),e})();var $t=n("MN0s");n("qcJj"),n("/Fsc"),n.d(t,"SettingsModule",(function(){return Ht}));let Ht=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[s.c,i.a,Qt,c.n,c.D,$t.a]]}),e})()}}]);