(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"7wo0":function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),s=i("PCNd"),r=i("3Pt+"),c=i("tyNb"),o=i("fXoL"),a=i("paXB"),l=i("7/bn"),u=i("oMXN"),b=i("EiG8"),d=i("sYmb"),h=i("zdqJ");const f=function(){return["main"]},p=function(){return["authorities"]},m=function(){return["password"]},g=function(){return["faq"]},S=function(){return["feature-request"]};let v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-tabs"]],decls:11,vars:10,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["jTour","SETTINGS.AUTHORITIES","jTourPosition","bottom","routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"a",1),o.Qc(2,"SETTINGS.MAIN"),o.Vb(),o.Wb(3,"a",2),o.Qc(4,"SETTINGS.AUTHORITIES.TITLE"),o.Vb(),o.Wb(5,"a",1),o.Qc(6,"SETTINGS.PASSWORD.TITLE"),o.Vb(),o.Wb(7,"a",1),o.Qc(8,"SETTINGS.FAQ.TITLE"),o.Vb(),o.Wb(9,"a",1),o.Qc(10,"SETTINGS.FEATURE_REQUEST.TITLE"),o.Vb(),o.Vb()),2&t&&(o.Ab(1),o.rc("routerLink",o.vc(5,f)),o.Ab(2),o.rc("routerLink",o.vc(6,p)),o.Ab(2),o.rc("routerLink",o.vc(7,m)),o.Ab(2),o.rc("routerLink",o.vc(8,g)),o.Ab(2),o.rc("routerLink",o.vc(9,S)))},directives:[c.f,c.e,d.a,h.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),t})(),A=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(t,e){1&t&&(o.Wb(0,"j-layout-home"),o.Wb(1,"j-aside"),o.Rb(2,"j-nav-main"),o.Vb(),o.Wb(3,"j-main"),o.Wb(4,"section",0),o.Wb(5,"section",1),o.Wb(6,"section",2),o.Wb(7,"h2",3),o.Qc(8,"SETTINGS.TITLE"),o.Vb(),o.Rb(9,"j-settings-tabs"),o.Rb(10,"router-outlet"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb())},directives:[a.a,l.a,u.a,b.a,d.a,v,c.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:hover{color:#ef5630!important}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),t})();var T=i("mrSG"),I=i("4Nuw"),_=i("ZF+8"),y=i("VnnJ"),O=i("JqCM"),w=i("VO+5"),x=i("Kcpt"),C=i("e8Ap"),P=i("L+ju"),E=i("zN9f");let k=(()=>{class t{constructor(){this.selected=new o.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case P.a.CARD:return"ACCOUNTS.CARD";case P.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case P.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"input",1),o.ic("change",(function(t){return e.onSelect()})),o.Vb(),o.Wb(2,"label",2),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Rb(5,"j-entity-logo",5),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"small",6),o.Wb(8,"div"),o.Qc(9),o.mc(10,"translate"),o.Vb(),o.Vb(),o.Wb(11,"span",7),o.Qc(12),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(1),o.rc("id",e.account.id)("ngModel",e.account.isSelected),o.Ab(1),o.rc("for",e.account.id),o.Ab(3),o.rc("name",e.account.balance.currency),o.Ab(4),o.Rc(o.nc(10,6,e.mapSelectedAccountLabel(e.account))),o.Ab(3),o.Rc(e.account.iban))},directives:[r.a,r.t,r.w,E.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),t})();function R(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div"),o.Wb(1,"j-all-requisites-item",15),o.ic("selected",(function(e){return o.Fc(t),o.lc().onSelect()})),o.Vb(),o.Vb()}if(2&t){const t=e.$implicit;o.Ab(1),o.rc("account",t)}}function W(t,e){1&t&&(o.Wb(0,"div",16),o.Rb(1,"ngx-spinner",17),o.Vb()),2&t&&(o.Ab(1),o.rc("fullScreen",!1))}let V=(()=>{class t{constructor(t,e,i,n,s){this.accountsService=t,this.filesService=e,this.companyService=i,this.spinner=n,this.notifier=s,this.closed=new o.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(T.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(t=>{t.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(t=>(t.isSelected=this.isAllSelected,t))}onSelect(){this.isAllSelected=this.accounts.every(t=>t.isSelected)}onDownload(){const t=this.accounts.filter(t=>t.isSelected).map(t=>t.iban);t.length>0?this.download(t):this.notifier.show({type:"error",message:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0441\u0447\u0435\u0442. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0441\u043a\u0430\u0447\u0430\u0442\u044c"})}download(t){return Object(T.a)(this,void 0,void 0,(function*(){try{const e=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,t);this.filesService.downloadFile(e,`${this.companyService.currentCompany.bin}.pdf`)}catch(e){console.error(e)}}))}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(I.c),o.Qb(_.b),o.Qb(y.a),o.Qb(O.c),o.Qb(w.c))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 1)",3,"fullScreen"]],template:function(t,e){1&t&&(o.Wb(0,"section",0),o.Wb(1,"div",1),o.Qc(2),o.mc(3,"translate"),o.Vb(),o.Wb(4,"button",2),o.ic("click",(function(t){return e.onClose()})),o.Rb(5,"j-icon",3),o.Vb(),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"div",5),o.Wb(8,"input",6),o.ic("change",(function(t){return e.selectAll()})),o.Vb(),o.Wb(9,"label",7),o.Qc(10),o.mc(11,"translate"),o.Vb(),o.Vb(),o.Wb(12,"div",8),o.Oc(13,R,2,1,"div",9),o.Vb(),o.Vb(),o.Oc(14,W,2,1,"div",10),o.Wb(15,"div",11),o.Wb(16,"button",12),o.ic("click",(function(t){return e.onDownload()})),o.Rb(17,"div",13),o.Wb(18,"strong",14),o.Qc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(2),o.Sc(" ",o.nc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),o.Ab(6),o.rc("id","all")("ngModel",e.isAllSelected),o.Ab(1),o.rc("for","all"),o.Ab(1),o.Sc(" ",o.nc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),o.Ab(3),o.rc("ngForOf",e.accounts),o.Ab(1),o.rc("ngIf",e.isLoading),o.Ab(3),o.rc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[x.a,r.a,r.t,r.w,n.t,n.u,C.a,d.a,k,O.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),t})();var N=i("quSY"),M=i("lJxs"),D=i("TwVa"),q=i("S09V"),L=i("kmKP"),j=i("mR7B"),Q=i("tmjD");let G=(()=>{class t{constructor(t,e,i,n,s){this.companyService=t,this.userService=e,this.translateService=i,this.maskedService=n,this.maskPipe=s,this.locale=this.translateService.currentLang}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,q.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const t=this.userService.user;if(t)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${t.lastname} ${t.firstname} ${t.middlename}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(t.iin,q.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:t.email},{label:this.mapPrivatePrefix("PHONE"),value:`${this.maskPipe.transform(this.maskedService.getPastedPhone(t.phone),q.a.phone.mask)}`,isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(M.a)(t=>{var e;return null===(e=t)||void 0===e?void 0:e.sort(this.sortPersons).map(t=>({initials:this.retrieveInitials(t),name:this.companyService.retrieveShortName(t),role:this.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:this.mapSignText(t),color:this.mapInitialsColor(t)}))}))}mapAuthoritiesPrefix(t){return this.mapTranslatePrefix("AUTHORITIES",t)}mapCompanyPrefix(t){return this.mapTranslatePrefix("COMPANY",t)}mapPrivatePrefix(t){return this.mapTranslatePrefix("PRIVATE",t)}mapContactsPrefix(t){return this.mapTranslatePrefix("CONTACTS",t)}mapTranslatePrefix(t,e){return`SETTINGS.${t}.${e}`}mapDate(t){return t?Object(n.K)(t,"d MMMM yyyy",this.locale):null}sortPersons(t,e){return t.authority===e.authority?0:t.authority===D.a.PRIMARY_SIGNATURE?-1:t.authority===D.a.SECONDARY_SIGNATURE&&e.authority===D.a.NO_SIGNATURE?-1:1}mapRole(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case D.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case D.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case D.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case D.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return"first-sign";case D.a.SECONDARY_SIGNATURE:return"second-sign";case D.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(t){return`${t.lastname[0]}${t.firstname[0]}`}}return t.\u0275fac=function(e){return new(e||t)(o.ec(y.a),o.ec(L.b),o.ec(d.e),o.ec(j.a),o.ec(Q.b))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function U(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Qc(2,"SETTINGS.AUTHORITIES.ROLE"),o.Vb(),o.Qc(3,": "),o.Wb(4,"span",12),o.Qc(5),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Rc(t.role)}}function F(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Qc(2,"SETTINGS.AUTHORITIES.START_DATE"),o.Vb(),o.Qc(3,": "),o.Wb(4,"span",12),o.Qc(5),o.mc(6,"date"),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Rc(o.oc(6,1,t.startDate,"dd.MM.yyyy"))}}function $(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Qc(2,"SETTINGS.AUTHORITIES.END_DATE"),o.Vb(),o.Qc(3,": "),o.Wb(4,"span",12),o.Qc(5),o.mc(6,"date"),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Rc(o.oc(6,1,t.endDate,"dd.MM.yyyy"))}}function z(t,e){if(1&t&&(o.Wb(0,"div",13),o.Qc(1),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(1),o.Sc(" ",t.sign," ")}}function K(t,e){if(1&t&&(o.Wb(0,"div",4),o.Wb(1,"div",5),o.Qc(2),o.Vb(),o.Wb(3,"div",6),o.Wb(4,"div",7),o.Qc(5),o.Vb(),o.Wb(6,"div",8),o.Oc(7,U,6,1,"div",9),o.Oc(8,F,7,4,"div",9),o.Oc(9,$,7,4,"div",9),o.Vb(),o.Vb(),o.Oc(10,z,2,1,"div",10),o.Vb()),2&t){const t=e.$implicit;o.Ab(1),o.Db(t.color),o.Ab(1),o.Sc(" ",t.initials," "),o.Ab(3),o.Rc(t.name),o.Ab(2),o.rc("ngIf",t.role),o.Ab(1),o.rc("ngIf",t.startDate),o.Ab(1),o.rc("ngIf",t.endDate),o.Ab(1),o.rc("ngIf",t.sign)}}function H(t,e){if(1&t&&(o.Wb(0,"section",1),o.Wb(1,"h6",2),o.Qc(2,"SETTINGS.AUTHORITIES.TITLE"),o.Vb(),o.Oc(3,K,11,8,"div",3),o.Vb()),2&t){const t=o.lc();o.Ab(3),o.rc("ngForOf",t.authorities)}}let Y=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(t,e){1&t&&o.Oc(0,H,4,1,"section",0),2&t&&o.rc("ngIf",e.authorities)},directives:[n.u,d.a,n.t],pipes:[n.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),t})();var J=i("xJkR"),X=i("lABO");function B(t,e){if(1&t&&o.Rb(0,"e-authorities",3),2&t){const t=o.lc();o.rc("authorities",t.authorities)}}const Z=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},tt=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function et(t,e){1&t&&(o.Wb(0,"div",4),o.Rb(1,"ngx-skeleton-loader",5),o.Rb(2,"ngx-skeleton-loader",6),o.Vb()),2&t&&(o.Ab(1),o.rc("theme",o.vc(2,Z)),o.Ab(1),o.rc("theme",o.vc(3,tt)))}function it(t,e){if(1&t){const t=o.Xb();o.Wb(0,"j-error-placeholder",7),o.ic("retried",(function(e){return o.Fc(t),o.lc().onRetry()})),o.Vb()}}let nt=(()=>{class t{constructor(t,e){this.settingsService=t,this.companyService=e,this.subscription=new N.a;const i=this.settingsService.getAuthoritiesList().subscribe(t=>{console.log(t),this.authorities=t});this.subscription.add(i)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(G),o.Qb(y.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(t,e){1&t&&(o.Oc(0,B,1,1,"e-authorities",0),o.Oc(1,et,3,4,"div",1),o.Oc(2,it,1,0,"j-error-placeholder",2)),2&t&&(o.rc("ngIf",(null==e.authorities?null:e.authorities.length)>0),o.Ab(1),o.rc("ngIf",0==(null==e.authorities?null:e.authorities.length)),o.Ab(1),o.rc("ngIf",!e.authorities))},directives:[n.u,Y,J.a,X.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),t})();function st(t,e){if(1&t&&(o.Wb(0,"section",3),o.Sb(1,4),o.Vb()),2&t){o.lc();const t=o.Cc(3);o.Ab(1),o.rc("ngTemplateOutlet",t)}}function rt(t,e){if(1&t&&(o.Wb(0,"section",5),o.Sb(1,4),o.Vb()),2&t){o.lc();const t=o.Cc(3);o.Ab(1),o.rc("ngTemplateOutlet",t)}}function ct(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",11),o.ic("click",(function(e){return o.Fc(t),o.lc(3).openRequisites()})),o.Qc(1),o.Vb()}if(2&t){const t=o.lc(3);o.Ab(1),o.Sc(" ",t.info.titleAdditional," ")}}function ot(t,e){if(1&t&&(o.Wb(0,"div",17),o.Qc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.Ab(1),o.Sc(" ",t.value," ")}}function at(t,e){if(1&t&&(o.Wb(0,"a",18),o.Qc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.tc("href","tel:",t.value,"",o.Hc),o.Ab(1),o.Rc(t.value)}}function lt(t,e){if(1&t&&(o.Wb(0,"a",18),o.Qc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.tc("href","mailto:",t.value,"",o.Hc),o.Ab(1),o.Rc(t.value)}}function ut(t,e){if(1&t&&(o.Wb(0,"div",13),o.Wb(1,"div",14),o.Qc(2),o.Vb(),o.Oc(3,ot,2,1,"div",15),o.Oc(4,at,2,2,"a",16),o.Oc(5,lt,2,2,"a",16),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(2),o.Sc(" ",t.label," "),o.Ab(1),o.rc("ngIf",!t.isPhone&&!t.isEmail),o.Ab(1),o.rc("ngIf",t.isPhone),o.Ab(1),o.rc("ngIf",t.isEmail)}}function bt(t,e){if(1&t&&(o.Ub(0),o.Oc(1,ut,6,4,"div",12),o.Tb()),2&t){const t=e.$implicit;o.Ab(1),o.rc("ngIf",t.value)}}function dt(t,e){if(1&t&&(o.Ub(0),o.Wb(1,"div",7),o.Wb(2,"h6",8),o.Qc(3),o.Vb(),o.Oc(4,ct,2,1,"button",9),o.Vb(),o.Oc(5,bt,2,1,"ng-container",10),o.Tb()),2&t){const t=o.lc(2);o.Ab(3),o.Rc(t.info.title),o.Ab(1),o.rc("ngIf",t.info.titleAdditional),o.Ab(1),o.rc("ngForOf",t.info.fields)}}function ht(t,e){if(1&t&&o.Oc(0,dt,6,3,"ng-container",6),2&t){const t=o.lc();o.rc("ngIf",t.info)}}let ft=(()=>{class t{constructor(){this.requisitesClicked=new o.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-info"]],inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(t,e){1&t&&(o.Oc(0,st,2,1,"section",0),o.Oc(1,rt,2,1,"section",1),o.Oc(2,ht,1,1,"ng-template",null,2,o.Pc)),2&t&&(o.rc("ngIf",e.hasTour),o.Ab(1),o.rc("ngIf",!e.hasTour))},directives:[n.u,h.a,n.B,d.a,n.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),t})();function pt(t,e){if(1&t){const t=o.Xb();o.Wb(0,"section",3),o.Wb(1,"div",4),o.ic("click",(function(e){return o.Fc(t),o.lc().hideSelector()})),o.Vb(),o.Wb(2,"section",5),o.Wb(3,"j-all-requisites",6),o.ic("closed",(function(e){return o.Fc(t),o.lc().hideSelector()})),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.lc();o.rc("ngClass",t.wrapperClasses),o.Ab(2),o.rc("ngClass",t.allRequisitesClasses)}}let mt=(()=>{class t{constructor(t,e,i,n){this.settingsService=t,this.companyService=e,this.tourService=i,this.document=n,this.subscription=new N.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const s=this.companyService.refresh$.subscribe(()=>{this.loadData()});this.subscription.add(s)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(G),o.Qb(y.a),o.Qb(_.g),o.Qb(n.e))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-main"]],decls:4,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(t,e){1&t&&(o.Wb(0,"j-settings-info",0),o.ic("requisitesClicked",(function(t){return e.showSelector()})),o.Vb(),o.Rb(1,"j-settings-info",1),o.Rb(2,"j-settings-info",1),o.Oc(3,pt,4,2,"section",2)),2&t&&(o.rc("info",e.mainInfo)("hasTour",!0),o.Ab(1),o.rc("info",e.privateInfo),o.Ab(1),o.rc("info",e.contactsInfo),o.Ab(1),o.rc("ngIf",e.isAllRequisitesShown))},directives:[ft,n.u,n.r,V],styles:[""]}),t})();var gt=i("p6Hd"),St=i("tWFC"),vt=i("1kSV"),At=i("kUBv");const Tt=["newPassword"],It=[{path:"",component:A,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:mt},{path:"authorities",component:nt},{path:"password",component:(()=>{class t{constructor(t,e){this.userService=t,this.modalService=e,this.isLoading=!1}onSubmit(t){return Object(T.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(t.oldPassword,t.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(e){switch(e.code){case gt.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case gt.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case gt.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=e.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(T.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(St.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(L.b),o.Qb(vt.q))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-password"]],viewQuery:function(t,e){var i;1&t&&o.Vc(Tt,!0),2&t&&o.Bc(i=o.jc())&&(e.newPassword=i.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Rb(3,"div",3),o.Wb(4,"j-new-password",4,5),o.ic("submitted",(function(t){return e.onSubmit(t)})),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(4),o.rc("isOldShown",!0)("isLoading",e.isLoading)("errorText",e.errorText))},directives:[d.a,At.a],styles:[""]}),t})()},{path:"**",redirectTo:"main"}]}];let _t=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[c.g.forChild(It)],c.g]}),t})();i("qcJj"),i("/Fsc"),i.d(e,"SettingsModule",(function(){return yt}));let yt=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[n.c,s.a,_t,r.n,r.D]]}),t})()}}]);