(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"7wo0":function(t,e,s){"use strict";s.r(e);var n=s("ofXK"),i=s("PCNd"),c=s("3Pt+"),a=s("tyNb"),o=s("fXoL"),r=s("paXB"),l=s("7/bn"),u=s("oMXN"),b=s("EiG8"),d=s("sYmb"),g=s("mCLR");const m=function(){return["main"]},p=function(){return["password"]},h=function(){return["package"]};let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"a",1),o.Rc(2,"SETTINGS.MAIN"),o.Vb(),o.Wb(3,"a",1),o.Rc(4,"SETTINGS.PASSWORD.TITLE"),o.Vb(),o.Wb(5,"a",2),o.Rc(6,"\u041c\u043e\u0439 \u043f\u0430\u043a\u0435\u0442"),o.Vb(),o.Vb()),2&t&&(o.Ab(1),o.sc("routerLink",o.wc(3,m)),o.Ab(2),o.sc("routerLink",o.wc(4,p)),o.Ab(2),o.sc("routerLink",o.wc(5,h)))},directives:[a.f,a.e,d.a,g.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),t})(),y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(t,e){1&t&&(o.Wb(0,"j-layout-home"),o.Wb(1,"j-aside"),o.Rb(2,"j-nav-main"),o.Vb(),o.Wb(3,"j-main"),o.Wb(4,"section",0),o.Wb(5,"section",1),o.Wb(6,"section",2),o.Wb(7,"h2",3),o.Rc(8,"SETTINGS.TITLE"),o.Vb(),o.Rb(9,"j-settings-tabs"),o.Rb(10,"router-outlet"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb())},directives:[r.a,l.a,u.a,b.a,d.a,f,a.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),t})();var k=s("mrSG"),v=s("4Nuw"),P=s("ZF+8"),S=s("VnnJ"),A=s("JqCM"),w=s("VO+5"),C=s("Kcpt"),T=s("e8Ap"),I=s("L+ju"),R=s("zN9f");let O=(()=>{class t{constructor(){this.selected=new o.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case I.a.CARD:return"ACCOUNTS.CARD";case I.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case I.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"input",1),o.ic("change",(function(t){return e.onSelect()})),o.Vb(),o.Wb(2,"label",2),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Rb(5,"j-entity-logo",5),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"small",6),o.Wb(8,"div"),o.Rc(9),o.mc(10,"translate"),o.Vb(),o.Vb(),o.Wb(11,"span",7),o.Rc(12),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(1),o.sc("id",e.account.id)("ngModel",e.account.isSelected),o.Ab(1),o.sc("for",e.account.id),o.Ab(3),o.sc("name",e.account.balance.currency),o.Ab(4),o.Sc(o.nc(10,6,e.mapSelectedAccountLabel(e.account))),o.Ab(3),o.Sc(e.account.iban))},directives:[c.a,c.t,c.w,R.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),t})();function x(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div"),o.Wb(1,"j-all-requisites-item",15),o.ic("selected",(function(e){return o.Gc(t),o.lc().onSelect()})),o.Vb(),o.Vb()}if(2&t){const t=e.$implicit;o.Ab(1),o.sc("account",t)}}function W(t,e){1&t&&(o.Wb(0,"div",16),o.Rb(1,"ngx-spinner",17),o.Vb()),2&t&&(o.Ab(1),o.sc("fullScreen",!1))}let _=(()=>{class t{constructor(t,e,s,n,i){this.accountsService=t,this.filesService=e,this.companyService=s,this.spinner=n,this.notifier=i,this.closed=new o.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(t=>{t.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(t=>(t.isSelected=this.isAllSelected,t))}onSelect(){this.isAllSelected=this.accounts.every(t=>t.isSelected)}onDownload(){const t=this.accounts.filter(t=>t.isSelected).map(t=>t.iban);t.length>0?this.download(t):this.notifier.show({type:"error",message:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0441\u0447\u0435\u0442. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0441\u043a\u0430\u0447\u0430\u0442\u044c"})}download(t){return Object(k.a)(this,void 0,void 0,(function*(){try{const e=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,t);this.filesService.downloadFile(e,`${this.companyService.currentCompany.bin}.pdf`)}catch(e){console.error(e)}}))}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(v.c),o.Qb(P.b),o.Qb(S.a),o.Qb(A.c),o.Qb(w.c))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(t,e){1&t&&(o.Wb(0,"section",0),o.Wb(1,"div",1),o.Rc(2),o.mc(3,"translate"),o.Vb(),o.Wb(4,"button",2),o.ic("click",(function(t){return e.onClose()})),o.Rb(5,"j-icon",3),o.Vb(),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"div",5),o.Wb(8,"input",6),o.ic("change",(function(t){return e.selectAll()})),o.Vb(),o.Wb(9,"label",7),o.Rc(10),o.mc(11,"translate"),o.Vb(),o.Vb(),o.Wb(12,"div",8),o.Pc(13,x,2,1,"div",9),o.Vb(),o.Vb(),o.Pc(14,W,2,1,"div",10),o.Wb(15,"div",11),o.Wb(16,"button",12),o.ic("click",(function(t){return e.onDownload()})),o.Rb(17,"div",13),o.Wb(18,"strong",14),o.Rc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(2),o.Tc(" ",o.nc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),o.Ab(6),o.sc("id","all")("ngModel",e.isAllSelected),o.Ab(1),o.sc("for","all"),o.Ab(1),o.Tc(" ",o.nc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),o.Ab(3),o.sc("ngForOf",e.accounts),o.Ab(1),o.sc("ngIf",e.isLoading),o.Ab(3),o.sc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[C.a,c.a,c.t,c.w,n.t,n.u,T.a,d.a,O,A.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),t})();var V=s("quSY"),M=s("lJxs"),E=s("TwVa"),D=s("S09V"),j=s("kmKP"),N=s("mR7B"),G=s("tmjD");let L=(()=>{class t{constructor(t,e,s,n,i){this.companyService=t,this.userService=e,this.translateService=s,this.maskedService=n,this.maskPipe=i,this.locale=this.translateService.currentLang}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,D.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const t=this.userService.user;if(t)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${t.lastname||""} ${t.firstname||""} ${t.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(t.iin,D.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:t.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(t.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(M.a)(t=>{var e;return null===(e=t)||void 0===e?void 0:e.sort(this.sortPersons).map(t=>({initials:this.retrieveInitials(t),name:this.companyService.retrieveShortName(t),role:this.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:this.mapSignText(t),color:this.mapInitialsColor(t)}))}))}mapAuthoritiesPrefix(t){return this.mapTranslatePrefix("AUTHORITIES",t)}mapCompanyPrefix(t){return this.mapTranslatePrefix("COMPANY",t)}mapPrivatePrefix(t){return this.mapTranslatePrefix("PRIVATE",t)}mapContactsPrefix(t){return this.mapTranslatePrefix("CONTACTS",t)}mapTranslatePrefix(t,e){return`SETTINGS.${t}.${e}`}mapDate(t){return t?Object(n.K)(t,"d MMMM yyyy",this.locale):null}sortPersons(t,e){return t.authority===e.authority?0:t.authority===E.a.PRIMARY_SIGNATURE?-1:t.authority===E.a.SECONDARY_SIGNATURE&&e.authority===E.a.NO_SIGNATURE?-1:1}mapRole(t){switch(t.authority){case E.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case E.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case E.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(t){switch(t.authority){case E.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case E.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case E.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(t){switch(t.authority){case E.a.PRIMARY_SIGNATURE:return"first-sign";case E.a.SECONDARY_SIGNATURE:return"second-sign";case E.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(t){return`${t.lastname[0]}${t.firstname[0]}`}}return t.\u0275fac=function(e){return new(e||t)(o.ec(S.a),o.ec(j.b),o.ec(d.e),o.ec(N.a),o.ec(G.b))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function q(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Rc(2,"SETTINGS.AUTHORITIES.ROLE"),o.Vb(),o.Rc(3,": "),o.Wb(4,"span",12),o.Rc(5),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Sc(t.role)}}function U(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Rc(2,"SETTINGS.AUTHORITIES.START_DATE"),o.Vb(),o.Rc(3,": "),o.Wb(4,"span",12),o.Rc(5),o.mc(6,"date"),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Sc(o.oc(6,1,t.startDate,"dd.MM.yyyy"))}}function F(t,e){if(1&t&&(o.Wb(0,"div",11),o.Wb(1,"span",12),o.Rc(2,"SETTINGS.AUTHORITIES.END_DATE"),o.Vb(),o.Rc(3,": "),o.Wb(4,"span",12),o.Rc(5),o.mc(6,"date"),o.Vb(),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(5),o.Sc(o.oc(6,1,t.endDate,"dd.MM.yyyy"))}}function $(t,e){if(1&t&&(o.Wb(0,"div",13),o.Rc(1),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(1),o.Tc(" ",t.sign," ")}}function z(t,e){if(1&t&&(o.Wb(0,"div",4),o.Wb(1,"div",5),o.Rc(2),o.Vb(),o.Wb(3,"div",6),o.Wb(4,"div",7),o.Rc(5),o.Vb(),o.Wb(6,"div",8),o.Pc(7,q,6,1,"div",9),o.Pc(8,U,7,4,"div",9),o.Pc(9,F,7,4,"div",9),o.Vb(),o.Vb(),o.Pc(10,$,2,1,"div",10),o.Vb()),2&t){const t=e.$implicit;o.Ab(1),o.Db(t.color),o.Ab(1),o.Tc(" ",t.initials," "),o.Ab(3),o.Sc(t.name),o.Ab(2),o.sc("ngIf",t.role),o.Ab(1),o.sc("ngIf",t.startDate),o.Ab(1),o.sc("ngIf",t.endDate),o.Ab(1),o.sc("ngIf",t.sign)}}function Q(t,e){if(1&t&&(o.Wb(0,"section",1),o.Wb(1,"h6",2),o.Rc(2,"SETTINGS.AUTHORITIES.TITLE"),o.Vb(),o.Pc(3,z,11,8,"div",3),o.Vb()),2&t){const t=o.lc();o.Ab(3),o.sc("ngForOf",t.authorities)}}let B=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(t,e){1&t&&o.Pc(0,Q,4,1,"section",0),2&t&&o.sc("ngIf",e.authorities)},directives:[n.u,d.a,n.t],pipes:[n.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),t})();var K=s("xJkR"),X=s("lABO");function J(t,e){if(1&t&&o.Rb(0,"e-authorities",3),2&t){const t=o.lc();o.sc("authorities",t.authorities)}}const H=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},Y=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function Z(t,e){1&t&&(o.Wb(0,"div",4),o.Rb(1,"ngx-skeleton-loader",5),o.Rb(2,"ngx-skeleton-loader",6),o.Vb()),2&t&&(o.Ab(1),o.sc("theme",o.wc(2,H)),o.Ab(1),o.sc("theme",o.wc(3,Y)))}function tt(t,e){if(1&t){const t=o.Xb();o.Wb(0,"j-error-placeholder",7),o.ic("retried",(function(e){return o.Gc(t),o.lc().onRetry()})),o.Vb()}}let et=(()=>{class t{constructor(t,e){this.settingsService=t,this.companyService=e,this.subscription=new V.a;const s=this.settingsService.getAuthoritiesList().subscribe(t=>{this.authorities=t});this.subscription.add(s)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(L),o.Qb(S.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(t,e){1&t&&(o.Pc(0,J,1,1,"e-authorities",0),o.Pc(1,Z,3,4,"div",1),o.Pc(2,tt,1,0,"j-error-placeholder",2)),2&t&&(o.sc("ngIf",(null==e.authorities?null:e.authorities.length)>0),o.Ab(1),o.sc("ngIf",0==(null==e.authorities?null:e.authorities.length)),o.Ab(1),o.sc("ngIf",!e.authorities))},directives:[n.u,B,K.a,X.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),t})();var st=s("zdqJ");const nt=["footerTemplate"];function it(t,e){if(1&t&&o.Sb(0,4),2&t){const t=o.lc(2);o.sc("ngTemplateOutlet",t.footerTemplate)}}function ct(t,e){if(1&t&&(o.Wb(0,"section",3),o.Sb(1,4),o.Pc(2,it,1,1,"ng-container",5),o.Vb()),2&t){const t=o.lc(),e=o.Dc(3);o.Ab(1),o.sc("ngTemplateOutlet",e),o.Ab(1),o.sc("ngIf",t.footerTemplate)}}function at(t,e){if(1&t&&(o.Wb(0,"section",6),o.Sb(1,4),o.Vb()),2&t){o.lc();const t=o.Dc(3);o.Ab(1),o.sc("ngTemplateOutlet",t)}}function ot(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",12),o.ic("click",(function(e){return o.Gc(t),o.lc(3).openRequisites()})),o.Rc(1),o.Vb()}if(2&t){const t=o.lc(3);o.Ab(1),o.Tc(" ",t.info.titleAdditional," ")}}function rt(t,e){if(1&t&&(o.Wb(0,"div",18),o.Rc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.Ab(1),o.Tc(" ",t.value," ")}}function lt(t,e){if(1&t&&(o.Wb(0,"a",19),o.Rc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.uc("href","tel:",t.value,"",o.Ic),o.Ab(1),o.Sc(t.value)}}function ut(t,e){if(1&t&&(o.Wb(0,"a",19),o.Rc(1),o.Vb()),2&t){const t=o.lc(2).$implicit;o.uc("href","mailto:",t.value,"",o.Ic),o.Ab(1),o.Sc(t.value)}}function bt(t,e){if(1&t&&(o.Wb(0,"div",14),o.Wb(1,"div",15),o.Rc(2),o.Vb(),o.Pc(3,rt,2,1,"div",16),o.Pc(4,lt,2,2,"a",17),o.Pc(5,ut,2,2,"a",17),o.Vb()),2&t){const t=o.lc().$implicit;o.Ab(2),o.Tc(" ",t.label," "),o.Ab(1),o.sc("ngIf",!t.isPhone&&!t.isEmail),o.Ab(1),o.sc("ngIf",t.isPhone),o.Ab(1),o.sc("ngIf",t.isEmail)}}function dt(t,e){if(1&t&&(o.Ub(0),o.Pc(1,bt,6,4,"div",13),o.Tb()),2&t){const t=e.$implicit;o.Ab(1),o.sc("ngIf",t.value)}}function gt(t,e){if(1&t&&(o.Ub(0),o.Wb(1,"div",8),o.Wb(2,"h6",9),o.Rc(3),o.Vb(),o.Pc(4,ot,2,1,"button",10),o.Vb(),o.Pc(5,dt,2,1,"ng-container",11),o.Tb()),2&t){const t=o.lc(2);o.Ab(3),o.Sc(t.info.title),o.Ab(1),o.sc("ngIf",t.info.titleAdditional),o.Ab(1),o.sc("ngForOf",t.info.fields)}}function mt(t,e){if(1&t&&o.Pc(0,gt,6,3,"ng-container",7),2&t){const t=o.lc();o.sc("ngIf",t.info)}}let pt=(()=>{class t{constructor(){this.requisitesClicked=new o.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-info"]],contentQueries:function(t,e,s){var n;1&t&&o.Ib(s,nt,!0),2&t&&o.Cc(n=o.jc())&&(e.footerTemplate=n.first)},inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(t,e){1&t&&(o.Pc(0,ct,3,2,"section",0),o.Pc(1,at,2,1,"section",1),o.Pc(2,mt,1,1,"ng-template",null,2,o.Qc)),2&t&&(o.sc("ngIf",e.hasTour),o.Ab(1),o.sc("ngIf",!e.hasTour))},directives:[n.u,st.a,n.B,d.a,n.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),t})();const ht=function(){return["/authorities"]};function ft(t,e){1&t&&(o.Wb(0,"a",4),o.Rc(1),o.mc(2,"translate"),o.Vb()),2&t&&(o.sc("routerLink",o.wc(4,ht)),o.Ab(1),o.Tc(" ",o.nc(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function yt(t,e){if(1&t){const t=o.Xb();o.Wb(0,"section",5),o.Wb(1,"div",6),o.ic("click",(function(e){return o.Gc(t),o.lc().hideSelector()})),o.Vb(),o.Wb(2,"section",7),o.Wb(3,"j-all-requisites",8),o.ic("closed",(function(e){return o.Gc(t),o.lc().hideSelector()})),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.lc();o.sc("ngClass",t.wrapperClasses),o.Ab(2),o.sc("ngClass",t.allRequisitesClasses)}}let kt=(()=>{class t{constructor(t,e,s){this.settingsService=t,this.companyService=e,this.document=s,this.subscription=new V.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const n=this.companyService.refresh$.subscribe(()=>{this.loadData()});this.subscription.add(n)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(L),o.Qb(S.a),o.Qb(n.e))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-main"]],decls:6,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(t,e){1&t&&(o.Wb(0,"j-settings-info",0),o.ic("requisitesClicked",(function(t){return e.showSelector()})),o.Pc(1,ft,3,5,"ng-template",null,1,o.Qc),o.Vb(),o.Rb(3,"j-settings-info",2),o.Rb(4,"j-settings-info",2),o.Pc(5,yt,4,2,"section",3)),2&t&&(o.sc("info",e.mainInfo)("hasTour",!0),o.Ab(3),o.sc("info",e.privateInfo),o.Ab(1),o.sc("info",e.contactsInfo),o.Ab(1),o.sc("ngIf",e.isAllRequisitesShown))},directives:[pt,n.u,a.f,n.r,_],pipes:[d.d],styles:[""]}),t})();var vt=s("p6Hd"),Pt=s("tWFC"),St=s("1kSV"),At=s("kUBv");const wt=["newPassword"];let Ct=(()=>{class t{constructor(t,e){this.userService=t,this.modalService=e,this.isLoading=!1}onSubmit(t){return Object(k.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(t.oldPassword,t.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(e){switch(e.code){case vt.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case vt.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case vt.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=e.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(k.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(Pt.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(j.b),o.Qb(St.q))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-password"]],viewQuery:function(t,e){var s;1&t&&o.Wc(wt,!0),2&t&&o.Cc(s=o.jc())&&(e.newPassword=s.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Rb(3,"div",3),o.Wb(4,"j-new-password",4,5),o.ic("submitted",(function(t){return e.onSubmit(t)})),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(4),o.sc("isOldShown",!0)("isLoading",e.isLoading)("errorText",e.errorText))},directives:[d.a,At.a],styles:[""]}),t})();class Tt{constructor(t,e,s,n){this.numberOfPayments=t,this.depositAndWithdrawal=e,this.discountInRubles=s,this.discountInForeignCurrency=n}}class It{constructor(t,e,s){this.title=t,this.helpText=e,this.description=s}}class Rt{constructor(t,e){this.totalCost=t,this.saving=e}}var Ot=function(t){return t.Loading="loading",t.Change="change",t.Success="success",t.NotFound="not_found",t.Error="error",t.Forbidden="forbidden",t}({});const xt=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],Wt=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],_t=[{name:"\u0412 \u0440\u0443\u0431\u043b\u044f\u0445",text:"2 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 50% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435",text:"3 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 30% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],Vt=[Object.assign(Object.assign({},_t[0]),{disabled:!0}),Object.assign(Object.assign({},_t[1]),{disabled:!0})],Mt={current:0,total:0,description:""},Et={current:0,total:0,description:""},Dt={totalCost:0,nextWriteOff:""},jt={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},Nt=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];s("eIyQ");const Gt={connect:{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"close"}},prepared:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},error:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"50x",description:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.\n\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u044d\u0442\u0438\u043c, \n\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",buttonOk:{text:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",key:"smsAfter"},buttonClose:{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u043f\u0430\u043a\u0435\u0442\u0430",key:"close"}},change:{title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \n\u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},connect_standart:{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439?",description:"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \n\u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u043a\u0435\u0442 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0414\u0430",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},prepared_standart:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444 Standart",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},payment:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"402",description:"\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0447\u0451\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},payment_locked:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",description:"\u041d\u0430 \u0441\u0447\u0451\u0442\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",buttonClose:{text:"\u041e\u041a",key:"close"}},working_days:{icon:"error",description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \n\u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438. \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435 \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},same_day:{icon:"error",description:"\u041c\u0435\u043d\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c",buttonClose:{text:"\u041e\u041a",key:"close"}}};var Lt=s("Ts65");function qt(t,e){if(1&t&&(o.Wb(0,"div",1),o.Wb(1,"div",2),o.Wb(2,"span"),o.Rc(3,"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c "),o.Wb(4,"span",3),o.Rc(5),o.mc(6,"number"),o.Vb(),o.Rc(7),o.mc(8,"number"),o.Vb(),o.Vb(),o.Wb(9,"div",2),o.Wb(10,"small"),o.Rc(11),o.Vb(),o.Vb(),o.Wb(12,"div",4),o.Wb(13,"div",5),o.Rb(14,"div",6),o.Vb(),o.Vb(),o.Vb()),2&t){const t=o.lc();o.Ab(4),o.sc("title",null==t.item?null:t.item.current),o.Ab(1),o.Tc("",o.nc(6,5,null==t.item?null:t.item.current)," "),o.Ab(2),o.Tc(" \u0438\u0437 ",o.nc(8,7,null==t.item?null:t.item.total),""),o.Ab(4),o.Tc(" ",null==t.item?null:t.item.description," "),o.Ab(3),o.sc("ngStyle",t.style)}}function Ut(t,e){1&t&&(o.Wb(0,"div",1),o.Wb(1,"div",2),o.Rc(2," \u041d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b "),o.Vb(),o.Wb(3,"div",2),o.Wb(4,"small"),o.Rc(5," \u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0430\u0440\u0438\u0444 \u201cStandart\u201d "),o.Vb(),o.Vb(),o.Vb())}let Ft=(()=>{class t{constructor(){this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(t){var e,s;const n=Math.round((null===(e=t)||void 0===e?void 0:e.current)/(null===(s=t)||void 0===s?void 0:s.total)*100);this.style.width=`${n}%`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success-color",3,"ngStyle"]],template:function(t,e){1&t&&(o.Pc(0,qt,15,9,"div",0),o.Pc(1,Ut,6,0,"div",0)),2&t&&(o.sc("ngIf",null==e.item?null:e.item.total),o.Ab(1),o.sc("ngIf",!(null!=e.item&&e.item.total)))},directives:[n.u,n.x],pipes:[n.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.bg-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),t})();var $t=s("Bl/x");function zt(t,e){if(1&t){const t=o.Xb();o.Wb(0,"j-switch",10),o.ic("change",(function(e){o.Gc(t);const s=o.lc().$implicit;return o.lc().setValue(s)})),o.Vb()}if(2&t){const t=o.lc().$implicit;o.sc("value",t.checked)}}function Qt(t,e){1&t&&o.Rb(0,"img",13)}function Bt(t,e){1&t&&o.Rb(0,"img",14)}function Kt(t,e){if(1&t&&(o.Ub(0),o.Pc(1,Qt,1,0,"img",11),o.Pc(2,Bt,1,0,"img",12),o.Tb()),2&t){const t=o.lc().$implicit;o.Ab(1),o.sc("ngIf",t.checked),o.Ab(1),o.sc("ngIf",!t.checked)}}function Xt(t,e){1&t&&o.Rb(0,"div",15)}function Jt(t,e){if(1&t&&(o.Ub(0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"div",3),o.Wb(4,"span",4),o.Rc(5),o.Vb(),o.Rc(6),o.Vb(),o.Wb(7,"div",5),o.Rc(8),o.Vb(),o.Vb(),o.Wb(9,"div",6),o.Pc(10,zt,1,1,"j-switch",7),o.Pc(11,Kt,3,2,"ng-container",8),o.Vb(),o.Vb(),o.Pc(12,Xt,1,0,"div",9),o.Tb()),2&t){const t=e.$implicit,s=e.last;o.Ab(4),o.Hb("bg-sale-success-color",t.checked),o.Ab(1),o.Tc("-",t.sale,"%"),o.Ab(1),o.Tc(" ",t.name," "),o.Ab(2),o.Tc(" ",t.text," "),o.Ab(2),o.sc("ngIf",!(null!=t&&t.disabled)),o.Ab(1),o.sc("ngIf",null==t?null:t.disabled),o.Ab(1),o.sc("ngIf",!s)}}let Ht=(()=>{class t{constructor(){this.getValue=new o.n}ngOnInit(){}set select(t){this.items[0].checked=t.discountInRubles,this.items[1].checked=t.discountInForeignCurrency}setValue(t){t.checked=!t.checked,this.getValue.emit({[t.key]:t.checked})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","./assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","./assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","./assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","./assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(t,e){1&t&&o.Pc(0,Jt,13,8,"ng-container",0),2&t&&o.sc("ngForOf",e.items)},directives:[n.t,n.u,$t.a],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),t})(),Yt=(()=>{class t{constructor(){this.isAnotherCompany=!1,this.payment=new It("\u041f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0442\u0435\u043d\u0433\u0435","",""),this.refill=new It("\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438 \u0441\u043d\u044f\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0433\u0435","",""),this.sale=new It("\u0421\u043a\u0438\u0434\u043a\u0438 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b \u0432 \u0432\u0430\u043b\u044e\u0442\u0435","",""),this.myPaymentData=Et,this.myRefillData=Mt,this.myPriceData=Dt,this.mySaleData=Vt}ngOnInit(){this.defaultView()}defaultView(){this.isAnotherCompany||(this.payment=new It("\u041f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0442\u0435\u043d\u0433\u0435","payments",""),this.refill=new It("\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438 \u0441\u043d\u044f\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0433\u0435","deposits",""),this.sale=new It("\u0421\u043a\u0438\u0434\u043a\u0438 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b \u0432 \u0432\u0430\u043b\u044e\u0442\u0435","sales",""))}set data(t){this.myPaymentData.current=t.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=t.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=`\u0411\u043e\u043b\u0435\u0435 ${t.restOfPayments.totalNumberOfPayments} \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439 \u2014            ${t.restOfPayments.costNextPayment} \u20b8 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439`,this.myRefillData.current=t.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=t.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=`\u0411\u043e\u043b\u0435\u0435 ${t.depositAndWithdrawals.totalDepositAndWithdrawals/1e6} \u043c\u043b\u043d. \u2014 \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u0435            ${t.depositAndWithdrawals.depositingOverLimit}%, \u0441\u043d\u044f\u0442\u0438\u0435            ${t.depositAndWithdrawals.withdrawalOverLimit}%`,this.mySaleData.find((e,s)=>{"discountInRubles"===e.key&&(this.mySaleData[s]=Object.assign(Object.assign({},this.mySaleData[s]),{checked:t.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===e.key&&(this.mySaleData[s]=Object.assign(Object.assign({},this.mySaleData[s]),{checked:t.discountOnTransferInCurrency.hasDiscount}))}),this.myPriceData.totalCost=t.totalCost,this.myPriceData.nextWriteOff=t.nextWriteOff}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:13,vars:13,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"]],template:function(t,e){1&t&&(o.Wb(0,"j-settings-package-card",0),o.Rb(1,"j-settings-package-progressbar",1),o.Vb(),o.Wb(2,"j-settings-package-card",0),o.Rb(3,"j-settings-package-progressbar",2),o.Vb(),o.Wb(4,"j-settings-package-card",0),o.Rb(5,"j-settings-package-form",3),o.Vb(),o.Wb(6,"j-settings-package-card"),o.Wb(7,"p",4),o.Rc(8),o.mc(9,"number"),o.Vb(),o.Wb(10,"p",5),o.Rc(11),o.mc(12,"date"),o.Vb(),o.Vb()),2&t&&(o.sc("itemCardSettingsPackage",e.payment),o.Ab(1),o.sc("item",e.myPaymentData),o.Ab(1),o.sc("itemCardSettingsPackage",e.refill),o.Ab(1),o.sc("item",e.myRefillData),o.Ab(1),o.sc("itemCardSettingsPackage",e.sale),o.Ab(1),o.sc("items",e.mySaleData),o.Ab(3),o.Tc("\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0430\u043a\u0435\u0442\u0430 ",o.nc(9,8,null==e.myPriceData?null:e.myPriceData.totalCost)," \u20b8/\u043c\u0435\u0441"),o.Ab(3),o.Tc("\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u2014 ",o.oc(12,10,null==e.myPriceData?null:e.myPriceData.nextWriteOff,"dd.MM.yyyy"),""))},directives:[Lt.a,Ft,Ht],pipes:[n.g,n.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}"]}),t})();var Zt=s("yZrb"),te=s("tk/3");let ee=(()=>{class t{constructor(t){this.apiService=t}getCompanyCurrentPackage(t){return Object(k.a)(this,void 0,void 0,(function*(){const e=`companies/${t}/packages/current`;return yield this.apiService.get(e)}))}calculatePackageCost(t,e){return Object(k.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/packages/calculate`;return yield this.apiService.post(s,e)}))}changeCompanyPackage(t,e,s){return Object(k.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/packages/current`,i=(new te.g).set(Zt.b.PHONE,s);return yield this.apiService.put(n,e,i)}))}}return t.\u0275fac=function(e){return new(e||t)(o.ec(Zt.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var se=s("2FF4"),ne=s("4zJ+");function ie(t,e){1&t&&(o.Rb(0,"img",8),o.mc(1,"translate")),2&t&&o.tc("alt",o.nc(1,1,"SHARED.DONE"))}function ce(t,e){1&t&&(o.Rb(0,"img",9),o.mc(1,"translate")),2&t&&o.tc("alt",o.nc(1,1,"SHARED.DONE"))}function ae(t,e){if(1&t&&(o.Wb(0,"h3",10),o.Rc(1),o.Vb()),2&t){const t=o.lc(2);o.Ab(1),o.Tc(" ",t.alertMessage.title," ")}}function oe(t,e){if(1&t&&(o.Wb(0,"p",11),o.Rc(1),o.Vb()),2&t){const t=o.lc(2);o.Ab(1),o.Tc(" ",t.alertMessage.description," ")}}function re(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",12),o.Wb(1,"button",13),o.ic("click",(function(e){o.Gc(t);const s=o.lc(2);return s.buttonClick(s.alertMessage.buttonOk.key)})),o.Rc(2),o.Vb(),o.Vb()}if(2&t){const t=o.lc(2);o.Ab(2),o.Tc(" ",t.alertMessage.buttonOk.text," ")}}function le(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",12),o.Wb(1,"button",14),o.ic("click",(function(e){o.Gc(t);const s=o.lc(2);return s.buttonClick(s.alertMessage.buttonClose.key)})),o.Rc(2),o.Vb(),o.Vb()}if(2&t){const t=o.lc(2);o.Ab(2),o.Tc(" ",t.alertMessage.buttonClose.text," ")}}function ue(t,e){if(1&t&&(o.Ub(0),o.Rb(1,"div",1),o.Wb(2,"div",2),o.Pc(3,ie,2,3,"img",3),o.Pc(4,ce,2,3,"img",4),o.Pc(5,ae,2,1,"h3",5),o.Pc(6,oe,2,1,"p",6),o.Vb(),o.Pc(7,re,3,1,"div",7),o.Pc(8,le,3,1,"div",7),o.Tb()),2&t){const t=o.lc();o.Ab(3),o.sc("ngIf","success"===(null==t.alertMessage?null:t.alertMessage.icon)),o.Ab(1),o.sc("ngIf","error"===(null==t.alertMessage?null:t.alertMessage.icon)),o.Ab(1),o.sc("ngIf",null==t.alertMessage?null:t.alertMessage.title),o.Ab(1),o.sc("ngIf",null==t.alertMessage?null:t.alertMessage.description),o.Ab(1),o.sc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonOk),o.Ab(1),o.sc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonClose)}}function be(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",18),o.ic("click",(function(e){return o.Gc(t),o.lc(2).buttonClick("close")})),o.Rb(1,"img",19),o.mc(2,"translate"),o.Vb()}2&t&&(o.Ab(1),o.tc("alt",o.nc(2,1,"SHARED.CLOSE")))}function de(t,e){1&t&&(o.Wb(0,"div",20),o.Rb(1,"j-animated-loading"),o.Vb())}function ge(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"div",1),o.Pc(2,be,3,3,"button",15),o.Vb(),o.Wb(3,"div",2),o.Wb(4,"j-sms",16),o.ic("loaded",(function(e){return o.Gc(t),o.lc().onSmsLoaded()}))("submitted",(function(e){return o.Gc(t),o.lc().onSubmit(e)})),o.Vb(),o.Pc(5,de,2,0,"div",17),o.Vb(),o.Tb()}if(2&t){const t=o.lc();o.Ab(2),o.sc("ngIf",t.isReady),o.Ab(2),o.sc("phone",t.phone)("countryCode",t.countryCode)("headers",t.headerParams)("hidden",!t.isReady),o.Ab(1),o.sc("ngIf",!t.isReady)}}let me=(()=>{class t{constructor(t,e){this.modal=t,this.packageRequestsService=e,this.refresh=new o.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:Zt.c.SIGNING_PACKAGE}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Gt.same_day:Gt[this.alertMessageType]:Gt.working_days}onSmsLoaded(){this.isReady=!0}onSubmit(t){this.isReady=!1,this.changePackage(t.signature)}changePackage(t){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,t).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?Gt.prepared_standart:Gt.prepared}).catch(t=>{this.alertMessage=402===t.status?Gt.payment:423===t.status?Gt.payment_locked:Gt.error}).finally(()=>{var t,e;const s="connect"===this.alertMessageType?"new":"old",n=(null===(t=this.alertMessage)||void 0===t?void 0:t.code)?null===(e=this.alertMessage)||void 0===e?void 0:e.code:"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:s,statusCode:n})})}buttonClick(t){"smsAfter"===t&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===t&&this.modal.close(),"close"===t&&this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(St.a),o.Qb(ee))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(t,e){1&t&&(o.Pc(0,ue,9,6,"ng-container",0),o.Pc(1,ge,6,6,"ng-container",0)),2&t&&(o.sc("ngIf",!e.smsAfterOpen),o.Ab(1),o.sc("ngIf",e.smsAfterOpen))},directives:[n.u,d.a,se.a,ne.a],pipes:[d.d],styles:[""]}),t})();var pe=s("5gsm");function he(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",7),o.ic("click",(function(e){return o.Gc(t),o.lc(3).resetPackageTerms.emit("cancel")})),o.Rc(1," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),o.Vb()}}function fe(t,e){if(1&t&&(o.Wb(0,"div",3),o.Pc(1,he,2,0,"button",6),o.Vb()),2&t){const t=o.lc(2);o.Ab(1),o.sc("ngIf","change"===t.status)}}function ye(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",7),o.ic("click",(function(e){o.Gc(t),o.lc();const s=o.Dc(2),n=o.lc(2);return s.close(),n.resetPackageTerms.emit("change")})),o.Rc(1," \u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 "),o.Vb(),o.Wb(2,"button",11),o.ic("click",(function(e){o.Gc(t),o.lc();const s=o.Dc(2),n=o.lc(2);return s.close(),n.resetPackageTerms.emit("reset")})),o.Rc(3," \u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 "),o.Vb()}}function ke(t,e){if(1&t&&(o.Wb(0,"div",3),o.Wb(1,"button",8,9),o.Rc(3," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "),o.Vb(),o.Pc(4,ye,4,0,"ng-template",null,10,o.Qc),o.Vb()),2&t){const t=o.Dc(5);o.Ab(1),o.sc("autoClose","outside")("ngbPopover",t)}}function ve(t,e){if(1&t&&(o.Wb(0,"section",1),o.Wb(1,"div",2),o.Wb(2,"div",3),o.Wb(3,"h4",4),o.Rc(4),o.Vb(),o.Vb(),o.Pc(5,fe,2,1,"div",5),o.Pc(6,ke,6,2,"div",5),o.Vb(),o.Vb()),2&t){const t=o.lc();o.Ab(4),o.Sc(t.packageTitle[t.status]),o.Ab(1),o.sc("ngIf","change"===t.status),o.Ab(1),o.sc("ngIf","success"===t.status)}}const Pe=function(){return["success","change","not_found"]};let Se=(()=>{class t{constructor(){this.status=Ot.Loading,this.resetPackageTerms=new o.n,this.packageTitle={not_found:"\u0421\u043e\u0431\u0440\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",change:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",success:"\u041c\u043e\u0439 \u043f\u0430\u043a\u0435\u0442"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&o.Pc(0,ve,7,3,"section",0),2&t&&o.sc("ngIf",o.wc(1,Pe).includes(e.status))},directives:[n.u,St.C],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),t})();function Ae(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",2),o.Wb(1,"label"),o.Wb(2,"input",3),o.ic("change",(function(s){o.Gc(t);const n=e.$implicit,i=e.index;return o.lc().setValue(n,i)})),o.Vb(),o.Wb(3,"div",4),o.Wb(4,"div",5),o.Rc(5),o.Vb(),o.Wb(6,"div",6),o.Rc(7),o.mc(8,"currency"),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=e.$implicit,s=e.index,n=o.lc();o.Ab(2),o.sc("name",n.key+s)("value",t.value)("checked",t.checked),o.Ab(3),o.Uc("",t.value," ",n.textType[n.key],""),o.Ab(2),o.Tc(" ",o.pc(8,6,t.currency,"\u20b8","symbol","0.0-2")," ")}}let we=(()=>{class t{constructor(){this.key="numberOfPayments",this.getValue=new o.n,this.textType={numberOfPayments:"\u0448\u0442.",depositAndWithdrawal:"\u043c\u043b\u043d."}}ngOnInit(){}set select(t){this.items.map(e=>e.checked=e.value===t)}setValue(t,e){t.checked=!t.checked,this.items.filter((t,s)=>s!==e).map(t=>t.checked=!1),this.getValue.emit({[this.key]:t.checked?t.value:0})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Pc(1,Ae,9,11,"div",1),o.Vb()),2&t&&(o.Ab(1),o.sc("ngForOf",e.items))},directives:[n.t],pipes:[n.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),t})(),Ce=(()=>{class t{constructor(){this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new o.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:22,vars:18,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","ngbTooltip","\u0420\u0430\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u043e\u0442 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438\u0445 \u0442\u0430\u0440\u0438\u0444\u043e\u0432","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","ngbTooltip","\u0421\u043e\u0431\u0440\u0430\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(t,e){if(1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"div",3),o.Wb(4,"span",4),o.Rc(5,"\u042d\u043a\u043e\u043d\u043e\u043c\u0438\u0442\u0435"),o.Vb(),o.Vb(),o.Wb(6,"div",3),o.Wb(7,"span"),o.Wb(8,"span",5),o.Rc(9),o.mc(10,"currency"),o.Vb(),o.Wb(11,"span",5),o.Rc(12,"-"),o.Vb(),o.Rb(13,"a",6),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(14,"div",7),o.Wb(15,"button",8,9),o.ic("click",(function(t){return e.openModal.emit()})),o.Wb(17,"span"),o.Rc(18),o.Vb(),o.Wb(19,"span",10),o.Rc(20),o.mc(21,"currency"),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t){const t=o.Dc(16);o.Ab(8),o.sc("hidden",!(null!=e.item&&e.item.saving)),o.Ab(1),o.Sc(o.pc(10,8,null==e.item?null:e.item.saving,"\u20b8","symbol","0.0-2")),o.Ab(2),o.sc("hidden",null==e.item?null:e.item.saving),o.Ab(2),o.sc("inlineSVG","/assets/icons/payments/question.svg"),o.Ab(2),o.sc("disabled",e.disabledButton),o.Ab(3),o.Tc("\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c ",e.isWorkingDay?t.close():t.open(),""),o.Ab(1),o.sc("hidden",!(null!=e.item&&e.item.saving)),o.Ab(1),o.Tc("\xa0",o.pc(21,13,null==e.item?null:e.item.totalCost,"\u20b8 / \u043c\u0435\u0441","symbol","0.0-2"),"")}},directives:[St.E,T.a],pipes:[n.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),t})(),Te=(()=>{class t{constructor(){this.calculatePackage=new o.n,this.openModal=new o.n,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=xt,this.refillData=Wt,this.saleData=_t,this.disabledButton=!0}ngOnInit(){this.packageTerms=new Tt(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(t=>!this.packageTerms[t])||(this.payment=new It("\u041f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0442\u0435\u043d\u0433\u0435","payments",""),this.refill=new It("\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438 \u0441\u043d\u044f\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0433\u0435","deposits",""),this.sale=new It("\u0421\u043a\u0438\u0434\u043a\u0438 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b \u0432 \u0432\u0430\u043b\u044e\u0442\u0435","sales",""),this.price=new Rt(0,0),!1)}packageCalculate(t){"depositAndWithdrawal"in t&&(t.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),t),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(t){t&&(this.price.totalCost=t.conditions.packageCost,this.price.saving=t.saving,this.payment.description=t.conditions.costNextPayment?`\u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u2014             ${t.conditions.costNextPayment} \u20b8`:"",this.refill.description=t.depositAndWithdrawal?`\u0411\u043e\u043b\u0435\u0435 ${t.depositAndWithdrawal/1e6} \u043c\u043b\u043d. \u2014 \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u0435             ${t.conditions.depositingOverLimit}%, \u0441\u043d\u044f\u0442\u0438\u0435             ${t.conditions.withdrawalOverLimit}%`:"",this.disabledButton=!this.isWorkingDay)}getPackageTerms(t){t&&(this.packageTerms.numberOfPayments=t.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=t.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=t.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=t.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:8,vars:12,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"]],template:function(t,e){1&t&&(o.Wb(0,"j-settings-package-card",0),o.Wb(1,"j-settings-package-tabs",1),o.ic("getValue",(function(t){return e.packageCalculate(t)})),o.Vb(),o.Vb(),o.Wb(2,"j-settings-package-card",0),o.Wb(3,"j-settings-package-tabs",2),o.ic("getValue",(function(t){return e.packageCalculate(t)})),o.Vb(),o.Vb(),o.Wb(4,"j-settings-package-card",0),o.Wb(5,"j-settings-package-form",3),o.ic("getValue",(function(t){return e.packageCalculate(t)})),o.Vb(),o.Vb(),o.Wb(6,"j-settings-package-card"),o.Wb(7,"j-settings-package-price",4),o.ic("openModal",(function(t){return e.openModal.emit(e.packageTerms)})),o.Vb(),o.Vb()),2&t&&(o.sc("itemCardSettingsPackage",e.payment),o.Ab(1),o.sc("items",e.paymentData)("select",e.packageTerms.numberOfPayments),o.Ab(1),o.sc("itemCardSettingsPackage",e.refill),o.Ab(1),o.sc("items",e.refillData)("select",e.packageTerms.depositAndWithdrawal/1e6),o.Ab(1),o.sc("itemCardSettingsPackage",e.sale),o.Ab(1),o.sc("items",e.saleData)("select",e.packageTerms),o.Ab(2),o.sc("item",e.price)("disabledButton",e.disabledButton)("isWorkingDay",e.isWorkingDay))},directives:[Lt.a,we,Ht,Ce],styles:[""]}),t})();function Ie(t,e){if(1&t&&(o.Ub(0),o.Rb(1,"j-my-package",5),o.Tb()),2&t){const t=o.lc();o.Ab(1),o.sc("data",t.packageRest)}}function Re(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"j-calculate-package",6),o.ic("openModal",(function(e){return o.Gc(t),o.lc().changePackageTerms("connect",e)}))("calculatePackage",(function(e){return o.Gc(t),o.lc().calculatePackageTerms(e)})),o.Vb(),o.Tb()}if(2&t){const t=o.lc();o.Ab(1),o.sc("data",t.packageCalculation)("isWorkingDay",t.packageRest.isWorkingDay)}}function Oe(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"j-calculate-package",7),o.ic("openModal",(function(e){return o.Gc(t),o.lc().changePackageTerms("change",e)}))("calculatePackage",(function(e){return o.Gc(t),o.lc().calculatePackageTerms(e)})),o.Vb(),o.Tb()}if(2&t){const t=o.lc();o.Ab(1),o.sc("data",t.packageCalculation)("packageRest",t.packageRest)}}function xe(t,e){1&t&&(o.Ub(0),o.Rb(1,"j-error-placeholder",8),o.Tb()),2&t&&(o.Ab(1),o.sc("errorText","\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444\u043e\u043c \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e")("errorBadge","\u0421\u043a\u043e\u0440\u043e")("imgLink","./assets/img/shared/empty.svg")("isRetryable",!1))}function We(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"j-error-placeholder",9),o.ic("retried",(function(e){return o.Gc(t),o.lc().getPackageRest()})),o.Vb(),o.Tb()}}function _e(t,e){1&t&&o.Rb(0,"ngx-skeleton-loader",11),2&t&&o.sc("theme",e.$implicit)}function Ve(t,e){if(1&t&&(o.Ub(0),o.Pc(1,_e,1,1,"ngx-skeleton-loader",10),o.Tb()),2&t){const t=o.lc();o.Ab(1),o.sc("ngForOf",t.themes)}}let Me=(()=>{class t{constructor(t,e,s,n){this.packageRequestsService=t,this.companyService=e,this.analytics=s,this.modalService=n,this.subscription=new V.a,this.themes=Nt}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(t=>{this.companyId=t[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=Ot.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(t=>{var e;this.packageRest=t,this.packageResponseStatus=(null===(e=this.packageRest)||void 0===e?void 0:e.totalCost)?Ot.Success:Ot.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(t=>{403===t.status?(this.packageResponseStatus=Ot.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=Ot.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(t){this.packageRequestsService.calculatePackageCost(this.companyId,t).then(t=>{this.packageCalculation=t}).catch(()=>{this.packageResponseStatus=Ot.Error})}changePackageTerms(t,e){const s=this.modalService.open(me,jt);s.componentInstance.alertMessageType=t,s.componentInstance.packageTerms=e,s.componentInstance.companyId=this.companyId,s.componentInstance.isSameDay=this.packageRest.isSameDay,s.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,s.componentInstance.refresh.subscribe(({typeUser:t,statusCode:e})=>{this.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:t,Status:e}),this.getPackageRest()}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(t){if(this.packageCalculation=void 0,"change"===t)this.packageResponseStatus=Ot.Change;else if("cancel"===t)this.packageResponseStatus=Ot.Success;else if("reset"===t){const t=new Tt(0,0,!1,!1);this.changePackageTerms("connect_standart",t)}}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(ee),o.Qb(S.a),o.Qb(pe.b),o.Qb(St.q))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"j-settings-package-header",2),o.ic("resetPackageTerms",(function(t){return e.resetPackageTerms(t)})),o.Vb(),o.Pc(3,Ie,2,1,"ng-container",3),o.Pc(4,Re,2,2,"ng-container",3),o.Pc(5,Oe,2,2,"ng-container",3),o.Pc(6,xe,2,4,"ng-container",3),o.Pc(7,We,2,0,"ng-container",3),o.Vb(),o.Pc(8,Ve,2,1,"ng-container",3),o.Vb(),o.Rb(9,"router-outlet",4)),2&t&&(o.sc("ngSwitch",e.packageResponseStatus),o.Ab(2),o.sc("status",e.packageResponseStatus),o.Ab(1),o.sc("ngSwitchCase","success"),o.Ab(1),o.sc("ngSwitchCase","not_found"),o.Ab(1),o.sc("ngSwitchCase","change"),o.Ab(1),o.sc("ngSwitchCase","forbidden"),o.Ab(1),o.sc("ngSwitchCase","error"),o.Ab(1),o.sc("ngSwitchCase","loading"))},directives:[n.y,Se,n.z,a.h,Yt,Te,X.a,n.t,K.a],encapsulation:2}),t})();var Ee=s("KJdv");const De=[{path:"",component:y,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:kt},{path:"authorities",component:et},{path:"password",component:Ct},{path:"package",component:Me,canActivate:[s("RW1d").a],children:[{path:":key",component:Ee.a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let je=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(De)],a.g]}),t})();var Ne=s("MN0s");s("qcJj"),s("/Fsc"),s.d(e,"SettingsModule",(function(){return Ge}));let Ge=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[n.c,i.a,je,c.n,c.D,Ne.a]]}),t})()}}]);