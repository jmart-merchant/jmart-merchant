(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"7wo0":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),s=n("PCNd"),c=n("3Pt+"),a=n("tyNb"),r=n("fXoL"),o=n("paXB"),l=n("7/bn"),u=n("oMXN"),b=n("EiG8"),d=n("sYmb"),g=n("zdqJ"),m=n("mCLR");const p=function(){return["main"]},h=function(){return["authorities"]},f=function(){return["password"]},y=function(){return["package"]};let A=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-tabs"]],decls:9,vars:8,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["jTour","SETTINGS.AUTHORITIES","jTourPosition","bottom","routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"a",1),r.Tc(2,"SETTINGS.MAIN"),r.Vb(),r.Wb(3,"a",2),r.Tc(4,"SETTINGS.AUTHORITIES.TITLE"),r.Vb(),r.Wb(5,"a",1),r.Tc(6,"SETTINGS.PASSWORD.TITLE"),r.Vb(),r.Wb(7,"a",3),r.Tc(8,"SETTINGS.PACKAGE.NAV"),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.uc("routerLink",r.yc(4,p)),r.Ab(2),r.uc("routerLink",r.yc(5,h)),r.Ab(2),r.uc("routerLink",r.yc(6,f)),r.Ab(2),r.uc("routerLink",r.yc(7,y)))},directives:[a.f,a.e,d.a,g.a,m.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),t})(),S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(t,e){1&t&&(r.Wb(0,"j-layout-home"),r.Wb(1,"j-aside"),r.Rb(2,"j-nav-main"),r.Vb(),r.Wb(3,"j-main"),r.Wb(4,"section",0),r.Wb(5,"section",1),r.Wb(6,"section",2),r.Wb(7,"h2",3),r.Tc(8,"SETTINGS.TITLE"),r.Vb(),r.Rb(9,"j-settings-tabs"),r.Rb(10,"router-outlet"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb())},directives:[o.a,l.a,u.a,b.a,d.a,A,a.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:hover{color:#ef5630!important}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),t})();var T=n("mrSG"),k=n("4Nuw"),v=n("ZF+8"),C=n("VnnJ"),I=n("JqCM"),P=n("VO+5"),E=n("Kcpt"),w=n("e8Ap"),R=n("L+ju"),O=n("zN9f");let _=(()=>{class t{constructor(){this.selected=new r.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case R.a.CARD:return"ACCOUNTS.CARD";case R.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case R.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"input",1),r.ic("change",(function(t){return e.onSelect()})),r.Vb(),r.Wb(2,"label",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Rb(5,"j-entity-logo",5),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"small",6),r.Wb(8,"div"),r.Tc(9),r.nc(10,"translate"),r.Vb(),r.Vb(),r.Wb(11,"span",7),r.Tc(12),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.uc("id",e.account.id)("ngModel",e.account.isSelected),r.Ab(1),r.uc("for",e.account.id),r.Ab(3),r.uc("name",e.account.balance.currency),r.Ab(4),r.Uc(r.oc(10,6,e.mapSelectedAccountLabel(e.account))),r.Ab(3),r.Uc(e.account.iban))},directives:[c.a,c.t,c.w,O.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),t})();function W(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div"),r.Wb(1,"j-all-requisites-item",15),r.ic("selected",(function(e){return r.Ic(t),r.mc().onSelect()})),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.Ab(1),r.uc("account",t)}}function V(t,e){1&t&&(r.Wb(0,"div",16),r.Rb(1,"ngx-spinner",17),r.Vb()),2&t&&(r.Ab(1),r.uc("fullScreen",!1))}let x=(()=>{class t{constructor(t,e,n,i,s,c){this.accountsService=t,this.filesService=e,this.companyService=n,this.spinner=i,this.notifier=s,this.translateService=c,this.closed=new r.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(T.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(t=>{t.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(t=>(t.isSelected=this.isAllSelected,t))}onSelect(){this.isAllSelected=this.accounts.every(t=>t.isSelected)}onDownload(){const t=this.accounts.filter(t=>t.isSelected).map(t=>t.iban);t.length>0?this.download(t):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}download(t){return Object(T.a)(this,void 0,void 0,(function*(){try{const e=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,t);this.filesService.downloadFile(e,`${this.companyService.currentCompany.bin}.pdf`)}catch(e){console.error(e)}}))}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(k.c),r.Qb(v.b),r.Qb(C.a),r.Qb(I.c),r.Qb(P.c),r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(t,e){1&t&&(r.Wb(0,"section",0),r.Wb(1,"div",1),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Wb(4,"button",2),r.ic("click",(function(t){return e.onClose()})),r.Rb(5,"j-icon",3),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"input",6),r.ic("change",(function(t){return e.selectAll()})),r.Vb(),r.Wb(9,"label",7),r.Tc(10),r.nc(11,"translate"),r.Vb(),r.Vb(),r.Wb(12,"div",8),r.Rc(13,W,2,1,"div",9),r.Vb(),r.Vb(),r.Rc(14,V,2,1,"div",10),r.Wb(15,"div",11),r.Wb(16,"button",12),r.ic("click",(function(t){return e.onDownload()})),r.Rb(17,"div",13),r.Wb(18,"strong",14),r.Tc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Vc(" ",r.oc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),r.Ab(6),r.uc("id","all")("ngModel",e.isAllSelected),r.Ab(1),r.uc("for","all"),r.Ab(1),r.Vc(" ",r.oc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),r.Ab(3),r.uc("ngForOf",e.accounts),r.Ab(1),r.uc("ngIf",e.isLoading),r.Ab(3),r.uc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[E.a,c.a,c.t,c.w,i.t,i.u,w.a,d.a,_,I.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),t})();var N=n("quSY"),M=n("lJxs"),D=n("TwVa"),G=n("S09V"),j=n("kmKP"),L=n("mR7B"),U=n("tmjD");let K=(()=>{class t{constructor(t,e,n,i,s){this.companyService=t,this.userService=e,this.translateService=n,this.maskedService=i,this.maskPipe=s}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,G.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const t=this.userService.user;if(t)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${t.lastname||""} ${t.firstname||""} ${t.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(t.iin,G.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:t.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(t.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(M.a)(t=>{var e;return null===(e=t)||void 0===e?void 0:e.sort(this.sortPersons).map(t=>({initials:this.retrieveInitials(t),name:this.companyService.retrieveShortName(t),role:this.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:this.mapSignText(t),color:this.mapInitialsColor(t)}))}))}mapAuthoritiesPrefix(t){return this.mapTranslatePrefix("AUTHORITIES",t)}mapCompanyPrefix(t){return this.mapTranslatePrefix("COMPANY",t)}mapPrivatePrefix(t){return this.mapTranslatePrefix("PRIVATE",t)}mapContactsPrefix(t){return this.mapTranslatePrefix("CONTACTS",t)}mapTranslatePrefix(t,e){return`SETTINGS.${t}.${e}`}mapDate(t){return t?Object(i.K)(t,"d MMMM yyyy",this.translateService.currentLang):null}sortPersons(t,e){return t.authority===e.authority?0:t.authority===D.a.PRIMARY_SIGNATURE?-1:t.authority===D.a.SECONDARY_SIGNATURE&&e.authority===D.a.NO_SIGNATURE?-1:1}mapRole(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case D.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case D.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case D.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case D.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(t){switch(t.authority){case D.a.PRIMARY_SIGNATURE:return"first-sign";case D.a.SECONDARY_SIGNATURE:return"second-sign";case D.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(t){return`${t.lastname[0]}${t.firstname[0]}`}}return t.\u0275fac=function(e){return new(e||t)(r.ec(C.a),r.ec(j.b),r.ec(d.e),r.ec(L.a),r.ec(U.b))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function q(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.ROLE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(t.role)}}function F(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.START_DATE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.nc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(r.pc(6,1,t.startDate,"dd.MM.yyyy"))}}function B(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.END_DATE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.nc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(r.pc(6,1,t.endDate,"dd.MM.yyyy"))}}function z(t,e){if(1&t&&(r.Wb(0,"div",13),r.Tc(1),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(1),r.Vc(" ",t.sign," ")}}function $(t,e){if(1&t&&(r.Wb(0,"div",4),r.Wb(1,"div",5),r.Tc(2),r.Vb(),r.Wb(3,"div",6),r.Wb(4,"div",7),r.Tc(5),r.Vb(),r.Wb(6,"div",8),r.Rc(7,q,6,1,"div",9),r.Rc(8,F,7,4,"div",9),r.Rc(9,B,7,4,"div",9),r.Vb(),r.Vb(),r.Rc(10,z,2,1,"div",10),r.Vb()),2&t){const t=e.$implicit;r.Ab(1),r.Db(t.color),r.Ab(1),r.Vc(" ",t.initials," "),r.Ab(3),r.Uc(t.name),r.Ab(2),r.uc("ngIf",t.role),r.Ab(1),r.uc("ngIf",t.startDate),r.Ab(1),r.uc("ngIf",t.endDate),r.Ab(1),r.uc("ngIf",t.sign)}}function Q(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"h6",2),r.Tc(2,"SETTINGS.AUTHORITIES.TITLE"),r.Vb(),r.Rc(3,$,11,8,"div",3),r.Vb()),2&t){const t=r.mc();r.Ab(3),r.uc("ngForOf",t.authorities)}}let H=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(t,e){1&t&&r.Rc(0,Q,4,1,"section",0),2&t&&r.uc("ngIf",e.authorities)},directives:[i.u,d.a,i.t],pipes:[i.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),t})();var Y=n("xJkR"),X=n("lABO");function J(t,e){if(1&t&&r.Rb(0,"e-authorities",3),2&t){const t=r.mc();r.uc("authorities",t.authorities)}}const Z=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},tt=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function et(t,e){1&t&&(r.Wb(0,"div",4),r.Rb(1,"ngx-skeleton-loader",5),r.Rb(2,"ngx-skeleton-loader",6),r.Vb()),2&t&&(r.Ab(1),r.uc("theme",r.yc(2,Z)),r.Ab(1),r.uc("theme",r.yc(3,tt)))}function nt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-error-placeholder",7),r.ic("retried",(function(e){return r.Ic(t),r.mc().onRetry()})),r.Vb()}}let it=(()=>{class t{constructor(t,e){this.settingsService=t,this.companyService=e,this.subscription=new N.a;const n=this.settingsService.getAuthoritiesList().subscribe(t=>{this.authorities=t});this.subscription.add(n)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(K),r.Qb(C.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(t,e){1&t&&(r.Rc(0,J,1,1,"e-authorities",0),r.Rc(1,et,3,4,"div",1),r.Rc(2,nt,1,0,"j-error-placeholder",2)),2&t&&(r.uc("ngIf",(null==e.authorities?null:e.authorities.length)>0),r.Ab(1),r.uc("ngIf",0==(null==e.authorities?null:e.authorities.length)),r.Ab(1),r.uc("ngIf",!e.authorities))},directives:[i.u,H,Y.a,X.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),t})();function st(t,e){if(1&t&&(r.Wb(0,"section",3),r.Sb(1,4),r.Vb()),2&t){r.mc();const t=r.Fc(3);r.Ab(1),r.uc("ngTemplateOutlet",t)}}function ct(t,e){if(1&t&&(r.Wb(0,"section",5),r.Sb(1,4),r.Vb()),2&t){r.mc();const t=r.Fc(3);r.Ab(1),r.uc("ngTemplateOutlet",t)}}function at(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",11),r.ic("click",(function(e){return r.Ic(t),r.mc(3).openRequisites()})),r.Tc(1),r.Vb()}if(2&t){const t=r.mc(3);r.Ab(1),r.Vc(" ",t.info.titleAdditional," ")}}function rt(t,e){if(1&t&&(r.Wb(0,"div",17),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.Ab(1),r.Vc(" ",t.value," ")}}function ot(t,e){if(1&t&&(r.Wb(0,"a",18),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.wc("href","tel:",t.value,"",r.Kc),r.Ab(1),r.Uc(t.value)}}function lt(t,e){if(1&t&&(r.Wb(0,"a",18),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.wc("href","mailto:",t.value,"",r.Kc),r.Ab(1),r.Uc(t.value)}}function ut(t,e){if(1&t&&(r.Wb(0,"div",13),r.Wb(1,"div",14),r.Tc(2),r.Vb(),r.Rc(3,rt,2,1,"div",15),r.Rc(4,ot,2,2,"a",16),r.Rc(5,lt,2,2,"a",16),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(2),r.Vc(" ",t.label," "),r.Ab(1),r.uc("ngIf",!t.isPhone&&!t.isEmail),r.Ab(1),r.uc("ngIf",t.isPhone),r.Ab(1),r.uc("ngIf",t.isEmail)}}function bt(t,e){if(1&t&&(r.Ub(0),r.Rc(1,ut,6,4,"div",12),r.Tb()),2&t){const t=e.$implicit;r.Ab(1),r.uc("ngIf",t.value)}}function dt(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",7),r.Wb(2,"h6",8),r.Tc(3),r.Vb(),r.Rc(4,at,2,1,"button",9),r.Vb(),r.Rc(5,bt,2,1,"ng-container",10),r.Tb()),2&t){const t=r.mc(2);r.Ab(3),r.Uc(t.info.title),r.Ab(1),r.uc("ngIf",t.info.titleAdditional),r.Ab(1),r.uc("ngForOf",t.info.fields)}}function gt(t,e){if(1&t&&r.Rc(0,dt,6,3,"ng-container",6),2&t){const t=r.mc();r.uc("ngIf",t.info)}}let mt=(()=>{class t{constructor(){this.requisitesClicked=new r.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-info"]],inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(t,e){1&t&&(r.Rc(0,st,2,1,"section",0),r.Rc(1,ct,2,1,"section",1),r.Rc(2,gt,1,1,"ng-template",null,2,r.Sc)),2&t&&(r.uc("ngIf",e.hasTour),r.Ab(1),r.uc("ngIf",!e.hasTour))},directives:[i.u,g.a,i.B,d.a,i.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),t})();function pt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"section",3),r.Wb(1,"div",4),r.ic("click",(function(e){return r.Ic(t),r.mc().hideSelector()})),r.Vb(),r.Wb(2,"section",5),r.Wb(3,"j-all-requisites",6),r.ic("closed",(function(e){return r.Ic(t),r.mc().hideSelector()})),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.mc();r.uc("ngClass",t.wrapperClasses),r.Ab(2),r.uc("ngClass",t.allRequisitesClasses)}}let ht=(()=>{class t{constructor(t,e,n){this.settingsService=t,this.companyService=e,this.document=n,this.subscription=new N.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const i=this.companyService.refresh$.subscribe(()=>{this.loadData()});this.subscription.add(i)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(K),r.Qb(C.a),r.Qb(i.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-main"]],decls:4,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-info",0),r.ic("requisitesClicked",(function(t){return e.showSelector()})),r.Vb(),r.Rb(1,"j-settings-info",1),r.Rb(2,"j-settings-info",1),r.Rc(3,pt,4,2,"section",2)),2&t&&(r.uc("info",e.mainInfo)("hasTour",!0),r.Ab(1),r.uc("info",e.privateInfo),r.Ab(1),r.uc("info",e.contactsInfo),r.Ab(1),r.uc("ngIf",e.isAllRequisitesShown))},directives:[mt,i.u,i.r,x],styles:[""]}),t})();var ft=n("p6Hd"),yt=n("tWFC"),At=n("1kSV"),St=n("kUBv");const Tt=["newPassword"];let kt=(()=>{class t{constructor(t,e){this.userService=t,this.modalService=e,this.isLoading=!1}onSubmit(t){return Object(T.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(t.oldPassword,t.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(e){switch(e.code){case ft.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case ft.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case ft.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=e.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(T.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(yt.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(j.b),r.Qb(At.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-password"]],viewQuery:function(t,e){var n;1&t&&r.Yc(Tt,!0),2&t&&r.Ec(n=r.jc())&&(e.newPassword=n.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Rb(3,"div",3),r.Wb(4,"j-new-password",4,5),r.ic("submitted",(function(t){return e.onSubmit(t)})),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(4),r.uc("isOldShown",!0)("isLoading",e.isLoading)("errorText",e.errorText))},directives:[d.a,St.a],styles:[""]}),t})();var vt=n("LRne");class Ct{constructor(t,e,n,i){this.numberOfPayments=t,this.depositAndWithdrawal=e,this.discountInRubles=n,this.discountInForeignCurrency=i}}class It{constructor(t,e,n){this.title=t,this.helpText=e,this.description=Object(vt.a)(n)}}class Pt{constructor(t,e){this.totalCost=t,this.saving=e}}var Et=function(t){return t.Loading="loading",t.Change="change",t.Success="success",t.NotFound="not_found",t.Error="error",t.Forbidden="forbidden",t}({});const wt=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],Rt=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],Ot=[{name:"\u0412 \u0440\u0443\u0431\u043b\u044f\u0445",text:"2 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 50% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435",text:"3 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 30% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],_t=[Object.assign(Object.assign({},Ot[0]),{disabled:!0}),Object.assign(Object.assign({},Ot[1]),{disabled:!0})],Wt={current:0,total:0,description:Object(vt.a)("")},Vt={current:0,total:0,description:Object(vt.a)("")},xt={totalCost:0,nextWriteOff:""},Nt={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},Mt=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];n("eIyQ");const Dt={connect:{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"close"}},prepared:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},error:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"50x",description:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.\n\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u044d\u0442\u0438\u043c, \n\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",buttonOk:{text:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",key:"smsAfter"},buttonClose:{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u043f\u0430\u043a\u0435\u0442\u0430",key:"close"}},change:{title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \n\u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},connect_standart:{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439?",description:"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \n\u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u043a\u0435\u0442 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0414\u0430",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},prepared_standart:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444 Standart",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},payment:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"402",description:"\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0447\u0451\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},payment_locked:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",description:"\u041d\u0430 \u0441\u0447\u0451\u0442\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",buttonClose:{text:"\u041e\u041a",key:"close"}},working_days:{icon:"error",description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \n\u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438. \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435 \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},same_day:{icon:"error",description:"\u041c\u0435\u043d\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c",buttonClose:{text:"\u041e\u041a",key:"close"}}};var Gt=n("Ts65");function jt(t,e){if(1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Wb(2,"span"),r.Tc(3),r.nc(4,"translate"),r.Wb(5,"span",3),r.Tc(6),r.nc(7,"number"),r.Vb(),r.Tc(8),r.nc(9,"translate"),r.nc(10,"number"),r.Vb(),r.Vb(),r.Wb(11,"div",2),r.Wb(12,"small"),r.Tc(13),r.Vb(),r.Vb(),r.Wb(14,"div",4),r.Wb(15,"div",5),r.Rb(16,"div",6),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.mc();r.Ab(3),r.Vc("",r.oc(4,7,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),r.Ab(2),r.uc("title",null==t.item?null:t.item.current),r.Ab(1),r.Vc("",r.oc(7,9,null==t.item?null:t.item.current)," "),r.Ab(2),r.Wc(" ",r.oc(9,11,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM")," ",r.oc(10,13,null==t.item?null:t.item.total),""),r.Ab(5),r.Vc(" ",null==t.item?null:t.item.description," "),r.Ab(3),r.uc("ngStyle",t.style)}}function Lt(t,e){1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Wb(4,"div",2),r.Wb(5,"small"),r.Tc(6),r.nc(7,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Vc(" ",r.oc(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),r.Ab(4),r.Vc(" ",r.oc(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}let Ut=(()=>{class t{constructor(){this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(t){var e,n;const i=Math.round((null===(e=t)||void 0===e?void 0:e.current)/(null===(n=t)||void 0===n?void 0:n.total)*100);this.style.width=`${i}%`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success-color",3,"ngStyle"]],template:function(t,e){1&t&&(r.Rc(0,jt,17,15,"div",0),r.Rc(1,Lt,8,6,"div",0)),2&t&&(r.uc("ngIf",null==e.item?null:e.item.total),r.Ab(1),r.uc("ngIf",!(null!=e.item&&e.item.total)))},directives:[i.u,i.x],pipes:[d.d,i.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.bg-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),t})();var Kt=n("Bl/x");function qt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-switch",10),r.ic("change",(function(e){r.Ic(t);const n=r.mc().$implicit;return r.mc().setValue(n)})),r.Vb()}if(2&t){const t=r.mc().$implicit;r.uc("value",t.checked)}}function Ft(t,e){1&t&&r.Rb(0,"img",13)}function Bt(t,e){1&t&&r.Rb(0,"img",14)}function zt(t,e){if(1&t&&(r.Ub(0),r.Rc(1,Ft,1,0,"img",11),r.Rc(2,Bt,1,0,"img",12),r.Tb()),2&t){const t=r.mc().$implicit;r.Ab(1),r.uc("ngIf",t.checked),r.Ab(1),r.uc("ngIf",!t.checked)}}function $t(t,e){1&t&&r.Rb(0,"div",15)}function Qt(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Tc(5),r.Vb(),r.Tc(6),r.Vb(),r.Wb(7,"div",5),r.Tc(8),r.Vb(),r.Vb(),r.Wb(9,"div",6),r.Rc(10,qt,1,1,"j-switch",7),r.Rc(11,zt,3,2,"ng-container",8),r.Vb(),r.Vb(),r.Rc(12,$t,1,0,"div",9),r.Tb()),2&t){const t=e.$implicit,n=e.last;r.Ab(4),r.Hb("bg-sale-success-color",t.checked),r.Ab(1),r.Vc("-",t.sale,"%"),r.Ab(1),r.Vc(" ",t.name," "),r.Ab(2),r.Vc(" ",t.text," "),r.Ab(2),r.uc("ngIf",!(null!=t&&t.disabled)),r.Ab(1),r.uc("ngIf",null==t?null:t.disabled),r.Ab(1),r.uc("ngIf",!n)}}let Ht=(()=>{class t{constructor(){this.getValue=new r.n}ngOnInit(){}set select(t){this.items[0].checked=t.discountInRubles,this.items[1].checked=t.discountInForeignCurrency}setValue(t){t.checked=!t.checked,this.getValue.emit({[t.key]:t.checked})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","/assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","/assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","/assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","/assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(t,e){1&t&&r.Rc(0,Qt,13,8,"ng-container",0),2&t&&r.uc("ngForOf",e.items)},directives:[i.t,i.u,Kt.a],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),t})();const Yt=function(t){return{totalCost:t}};let Xt=(()=>{class t{constructor(t){this.translateService=t,this.isAnotherCompany=!1,this.payment=new It("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new It("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new It("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Vt,this.myRefillData=Wt,this.myPriceData=xt,this.mySaleData=_t}ngOnInit(){this.defaultView()}defaultView(){this.isAnotherCompany||(this.payment=new It("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new It("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new It("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}set data(t){this.myPaymentData.current=t.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=t.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:t.restOfPayments.totalNumberOfPayments,payment:t.restOfPayments.costNextPayment}),this.myRefillData.current=t.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=t.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=this.refill.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:t.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:t.depositAndWithdrawals.withdrawalOverLimit}),this.mySaleData.find((e,n)=>{"discountInRubles"===e.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:t.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===e.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:t.discountOnTransferInCurrency.hasDiscount}))}),this.myPriceData.totalCost=t.totalCost,this.myPriceData.nextWriteOff=t.nextWriteOff}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:14,vars:19,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Rb(1,"j-settings-package-progressbar",1),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Rb(3,"j-settings-package-progressbar",2),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Rb(5,"j-settings-package-form",3),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"p",4),r.Tc(8),r.nc(9,"translate"),r.nc(10,"number"),r.Vb(),r.Wb(11,"p",5),r.Tc(12),r.nc(13,"date"),r.Vb(),r.Vb()),2&t&&(r.uc("itemCardSettingsPackage",e.payment),r.Ab(1),r.uc("item",e.myPaymentData),r.Ab(1),r.uc("itemCardSettingsPackage",e.refill),r.Ab(1),r.uc("item",e.myRefillData),r.Ab(1),r.uc("itemCardSettingsPackage",e.sale),r.Ab(1),r.uc("items",e.mySaleData),r.Ab(3),r.Vc(" ",r.pc(9,9,"SETTINGS.PACKAGE.CALCULATE.COST",r.zc(17,Yt,r.oc(10,12,null==e.myPriceData?null:e.myPriceData.totalCost)))," "),r.Ab(4),r.Wc("","SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW"," \u2014 ",r.pc(13,14,null==e.myPriceData?null:e.myPriceData.nextWriteOff,"dd.MM.yyyy"),""))},directives:[Gt.a,Ut,Ht],pipes:[d.d,i.g,i.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}"]}),t})();var Jt=n("yZrb"),Zt=n("tk/3");let te=(()=>{class t{constructor(t){this.apiService=t}getCompanyCurrentPackage(t){return Object(T.a)(this,void 0,void 0,(function*(){const e=`companies/${t}/packages/current`;return yield this.apiService.get(e)}))}calculatePackageCost(t,e){return Object(T.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/packages/calculate`;return yield this.apiService.post(n,e)}))}changeCompanyPackage(t,e,n){return Object(T.a)(this,void 0,void 0,(function*(){const i=`companies/${t}/packages/current`,s=(new Zt.g).set(Jt.b.PHONE,n);return yield this.apiService.put(i,e,s)}))}}return t.\u0275fac=function(e){return new(e||t)(r.ec(Jt.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ee=n("2FF4"),ne=n("4zJ+");function ie(t,e){1&t&&(r.Rb(0,"img",8),r.nc(1,"translate")),2&t&&r.vc("alt",r.oc(1,1,"SHARED.DONE"))}function se(t,e){1&t&&(r.Rb(0,"img",9),r.nc(1,"translate")),2&t&&r.vc("alt",r.oc(1,1,"SHARED.DONE"))}function ce(t,e){if(1&t&&(r.Wb(0,"h3",10),r.Tc(1),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.Vc(" ",t.alertMessage.title," ")}}function ae(t,e){if(1&t&&(r.Wb(0,"p",11),r.Tc(1),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.Vc(" ",t.alertMessage.description," ")}}function re(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",13),r.ic("click",(function(e){r.Ic(t);const n=r.mc(2);return n.buttonClick(n.alertMessage.buttonOk.key)})),r.Tc(2),r.Vb(),r.Vb()}if(2&t){const t=r.mc(2);r.Ab(2),r.Vc(" ",t.alertMessage.buttonOk.text," ")}}function oe(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",14),r.ic("click",(function(e){r.Ic(t);const n=r.mc(2);return n.buttonClick(n.alertMessage.buttonClose.key)})),r.Tc(2),r.Vb(),r.Vb()}if(2&t){const t=r.mc(2);r.Ab(2),r.Vc(" ",t.alertMessage.buttonClose.text," ")}}function le(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"div",1),r.Wb(2,"div",2),r.Rc(3,ie,2,3,"img",3),r.Rc(4,se,2,3,"img",4),r.Rc(5,ce,2,1,"h3",5),r.Rc(6,ae,2,1,"p",6),r.Vb(),r.Rc(7,re,3,1,"div",7),r.Rc(8,oe,3,1,"div",7),r.Tb()),2&t){const t=r.mc();r.Ab(3),r.uc("ngIf","success"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.uc("ngIf","error"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.title),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.description),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonOk),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonClose)}}function ue(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",18),r.ic("click",(function(e){return r.Ic(t),r.mc(2).buttonClick("close")})),r.Rb(1,"img",19),r.nc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.vc("alt",r.oc(2,1,"SHARED.CLOSE")))}function be(t,e){1&t&&(r.Wb(0,"div",20),r.Rb(1,"j-animated-loading"),r.Vb())}function de(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"div",1),r.Rc(2,ue,3,3,"button",15),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"j-sms",16),r.ic("loaded",(function(e){return r.Ic(t),r.mc().onSmsLoaded()}))("submitted",(function(e){return r.Ic(t),r.mc().onSubmit(e)})),r.Vb(),r.Rc(5,be,2,0,"div",17),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(2),r.uc("ngIf",t.isReady),r.Ab(2),r.uc("phone",t.phone)("countryCode",t.countryCode)("headers",t.headerParams)("hidden",!t.isReady),r.Ab(1),r.uc("ngIf",!t.isReady)}}let ge=(()=>{class t{constructor(t,e){this.modal=t,this.packageRequestsService=e,this.refresh=new r.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:Jt.c.SIGNING_PACKAGE}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Dt.same_day:Dt[this.alertMessageType]:Dt.working_days}onSmsLoaded(){this.isReady=!0}onSubmit(t){this.isReady=!1,this.changePackage(t.signature)}changePackage(t){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,t).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?Dt.prepared_standart:Dt.prepared}).catch(t=>{this.alertMessage=402===t.status?Dt.payment:423===t.status?Dt.payment_locked:Dt.error}).finally(()=>{var t,e;const n="connect"===this.alertMessageType?"new":"old",i=(null===(t=this.alertMessage)||void 0===t?void 0:t.code)?null===(e=this.alertMessage)||void 0===e?void 0:e.code:"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:n,statusCode:i})})}buttonClick(t){"smsAfter"===t&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===t&&this.modal.close(),"close"===t&&this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(At.a),r.Qb(te))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(t,e){1&t&&(r.Rc(0,le,9,6,"ng-container",0),r.Rc(1,de,6,6,"ng-container",0)),2&t&&(r.uc("ngIf",!e.smsAfterOpen),r.Ab(1),r.uc("ngIf",e.smsAfterOpen))},directives:[i.u,d.a,ee.a,ne.a],pipes:[d.d],styles:[""]}),t})();var me=n("5gsm");function pe(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){return r.Ic(t),r.mc(3).resetPackageTerms.emit("cancel")})),r.Tc(1),r.nc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Vc(" ",r.oc(2,1,"SETTINGS.PACKAGE.RESET")," "))}function he(t,e){if(1&t&&(r.Wb(0,"div",3),r.Rc(1,pe,3,3,"button",6),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.uc("ngIf","change"===t.status)}}function fe(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){r.Ic(t),r.mc();const n=r.Fc(2),i=r.mc(2);return n.close(),i.resetPackageTerms.emit("change")})),r.Tc(1),r.nc(2,"translate"),r.Vb(),r.Wb(3,"button",11),r.ic("click",(function(e){r.Ic(t),r.mc();const n=r.Fc(2),i=r.mc(2);return n.close(),i.resetPackageTerms.emit("reset")})),r.Tc(4),r.nc(5,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Vc(" ",r.oc(2,2,"SETTINGS.PACKAGE.CHANGE")," "),r.Ab(3),r.Vc(" ",r.oc(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function ye(t,e){if(1&t&&(r.Wb(0,"div",3),r.Wb(1,"button",8,9),r.Tc(3),r.nc(4,"translate"),r.Vb(),r.Rc(5,fe,6,6,"ng-template",null,10,r.Sc),r.Vb()),2&t){const t=r.Fc(6);r.Ab(1),r.uc("autoClose","outside")("ngbPopover",t),r.Ab(2),r.Vc(" ",r.oc(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function Ae(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"div",2),r.Wb(2,"div",3),r.Wb(3,"h4",4),r.Tc(4),r.nc(5,"translate"),r.Vb(),r.Vb(),r.Rc(6,he,2,1,"div",5),r.Rc(7,ye,7,5,"div",5),r.Vb(),r.Vb()),2&t){const t=r.mc();r.Ab(4),r.Uc(r.oc(5,3,t.packageTitle[t.status])),r.Ab(2),r.uc("ngIf","change"===t.status),r.Ab(1),r.uc("ngIf","success"===t.status)}}const Se=function(){return["success","change","not_found"]};let Te=(()=>{class t{constructor(){this.status=Et.Loading,this.resetPackageTerms=new r.n,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&r.Rc(0,Ae,8,5,"section",0),2&t&&r.uc("ngIf",r.yc(1,Se).includes(e.status))},directives:[i.u,At.C],pipes:[d.d],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),t})();function ke(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",2),r.Wb(1,"label"),r.Wb(2,"input",3),r.ic("change",(function(n){r.Ic(t);const i=e.$implicit,s=e.index;return r.mc().setValue(i,s)})),r.Vb(),r.Wb(3,"div",4),r.Wb(4,"div",5),r.Tc(5),r.nc(6,"translate"),r.Vb(),r.Wb(7,"div",6),r.Tc(8),r.nc(9,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,n=e.index,i=r.mc();r.Ab(2),r.uc("name",i.key+n)("value",t.value)("checked",t.checked),r.Ab(3),r.Wc("",t.value," ",r.oc(6,6,i.textType[i.key]),""),r.Ab(3),r.Vc(" ",r.rc(9,8,t.currency,"\u20b8","symbol","0.0-2")," ")}}let ve=(()=>{class t{constructor(){this.key="numberOfPayments",this.getValue=new r.n,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}ngOnInit(){}set select(t){this.items.map(e=>e.checked=e.value===t)}setValue(t,e){t.checked=!t.checked,this.items.filter((t,n)=>n!==e).map(t=>t.checked=!1),this.getValue.emit({[this.key]:t.checked?t.value:0})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Rc(1,ke,10,13,"div",1),r.Vb()),2&t&&(r.Ab(1),r.uc("ngForOf",e.items))},directives:[i.t],pipes:[d.d,i.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),t})(),Ce=(()=>{class t{constructor(t){this.translateService=t,this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new r.n,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe(()=>{this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:26,vars:30,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"ngbTooltip","inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Tc(5),r.nc(6,"translate"),r.Vb(),r.Vb(),r.Wb(7,"div",3),r.Wb(8,"span"),r.Wb(9,"span",5),r.Tc(10),r.nc(11,"currency"),r.Vb(),r.Wb(12,"span",5),r.Tc(13,"-"),r.Vb(),r.Rb(14,"a",6),r.nc(15,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",7),r.Wb(17,"button",8,9),r.ic("click",(function(t){return e.openModal.emit()})),r.nc(19,"translate"),r.Wb(20,"span"),r.Tc(21),r.nc(22,"translate"),r.Vb(),r.Wb(23,"span",10),r.Tc(24),r.nc(25,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.Fc(18);r.Ab(5),r.Uc(r.oc(6,12,"SETTINGS.PACKAGE.PRICE.TITLE")),r.Ab(4),r.uc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Uc(r.rc(11,14,null==e.item?null:e.item.saving,"\u20b8","symbol","0.0-2")),r.Ab(2),r.uc("hidden",null==e.item?null:e.item.saving),r.Ab(2),r.uc("ngbTooltip",r.oc(15,19,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question.svg"),r.Ab(3),r.uc("ngbTooltip",r.oc(19,21,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",e.disabledButton),r.Ab(4),r.Wc("",r.oc(22,23,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",e.isWorkingDay?t.close():t.open(),""),r.Ab(2),r.uc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Vc("\xa0",r.rc(25,25,null==e.item?null:e.item.totalCost,e.currency,"symbol","0.0-2"),"")}},directives:[At.E,w.a],pipes:[d.d,i.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),t})(),Ie=(()=>{class t{constructor(t){this.translateService=t,this.calculatePackage=new r.n,this.openModal=new r.n,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=wt,this.refillData=Rt,this.saleData=Ot,this.disabledButton=!0}ngOnInit(){this.packageTerms=new Ct(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(t=>!this.packageTerms[t])||(this.payment=new It("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new It("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new It("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new Pt(0,0),!1)}packageCalculate(t){"depositAndWithdrawal"in t&&(t.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),t),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(t){t&&(this.price.totalCost=t.conditions.packageCost,this.price.saving=t.saving,this.payment.description=t.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:t.conditions.costNextPayment}):Object(vt.a)(""),this.refill.description=t.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawal/1e6,depositingOverLimit:t.conditions.depositingOverLimit,withdrawalOverLimit:t.conditions.withdrawalOverLimit}):Object(vt.a)(""),this.disabledButton=!this.isWorkingDay)}getPackageTerms(t){t&&(this.packageTerms.numberOfPayments=t.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=t.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=t.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=t.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:8,vars:12,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Wb(1,"j-settings-package-tabs",1),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Wb(3,"j-settings-package-tabs",2),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Wb(5,"j-settings-package-form",3),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"j-settings-package-price",4),r.ic("openModal",(function(t){return e.openModal.emit(e.packageTerms)})),r.Vb(),r.Vb()),2&t&&(r.uc("itemCardSettingsPackage",e.payment),r.Ab(1),r.uc("items",e.paymentData)("select",e.packageTerms.numberOfPayments),r.Ab(1),r.uc("itemCardSettingsPackage",e.refill),r.Ab(1),r.uc("items",e.refillData)("select",e.packageTerms.depositAndWithdrawal/1e6),r.Ab(1),r.uc("itemCardSettingsPackage",e.sale),r.Ab(1),r.uc("items",e.saleData)("select",e.packageTerms),r.Ab(2),r.uc("item",e.price)("disabledButton",e.disabledButton)("isWorkingDay",e.isWorkingDay))},directives:[Gt.a,ve,Ht,Ce],styles:[""]}),t})();function Pe(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"j-my-package",5),r.Tb()),2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageRest)}}function Ee(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",6),r.ic("openModal",(function(e){return r.Ic(t),r.mc().changePackageTerms("connect",e)}))("calculatePackage",(function(e){return r.Ic(t),r.mc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageCalculation)("isWorkingDay",t.packageRest.isWorkingDay)}}function we(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",7),r.ic("openModal",(function(e){return r.Ic(t),r.mc().changePackageTerms("change",e)}))("calculatePackage",(function(e){return r.Ic(t),r.mc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageCalculation)("packageRest",t.packageRest)}}function Re(t,e){1&t&&(r.Ub(0),r.Rb(1,"j-error-placeholder",8),r.nc(2,"translate"),r.nc(3,"translate"),r.Tb()),2&t&&(r.Ab(1),r.uc("errorText",r.oc(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",r.oc(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function Oe(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-error-placeholder",9),r.ic("retried",(function(e){return r.Ic(t),r.mc().getPackageRest()})),r.Vb(),r.Tb()}}function _e(t,e){1&t&&r.Rb(0,"ngx-skeleton-loader",11),2&t&&r.uc("theme",e.$implicit)}function We(t,e){if(1&t&&(r.Ub(0),r.Rc(1,_e,1,1,"ngx-skeleton-loader",10),r.Tb()),2&t){const t=r.mc();r.Ab(1),r.uc("ngForOf",t.themes)}}let Ve=(()=>{class t{constructor(t,e,n,i){this.packageRequestsService=t,this.companyService=e,this.analytics=n,this.modalService=i,this.subscription=new N.a,this.themes=Mt}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(t=>{this.companyId=t[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=Et.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(t=>{var e;this.packageRest=t,this.packageResponseStatus=(null===(e=this.packageRest)||void 0===e?void 0:e.totalCost)?Et.Success:Et.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(t=>{403===t.status?(this.packageResponseStatus=Et.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=Et.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(t){this.packageRequestsService.calculatePackageCost(this.companyId,t).then(t=>{this.packageCalculation=t}).catch(()=>{this.packageResponseStatus=Et.Error})}changePackageTerms(t,e){const n=this.modalService.open(ge,Nt);n.componentInstance.alertMessageType=t,n.componentInstance.packageTerms=e,n.componentInstance.companyId=this.companyId,n.componentInstance.isSameDay=this.packageRest.isSameDay,n.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,n.componentInstance.refresh.subscribe(({typeUser:t,statusCode:e})=>{this.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:t,Status:e}),this.getPackageRest()}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(t){if(this.packageCalculation=void 0,"change"===t)this.packageResponseStatus=Et.Change;else if("cancel"===t)this.packageResponseStatus=Et.Success;else if("reset"===t){const t=new Ct(0,0,!1,!1);this.changePackageTerms("connect_standart",t)}}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(te),r.Qb(C.a),r.Qb(me.b),r.Qb(At.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"j-settings-package-header",2),r.ic("resetPackageTerms",(function(t){return e.resetPackageTerms(t)})),r.Vb(),r.Rc(3,Pe,2,1,"ng-container",3),r.Rc(4,Ee,2,2,"ng-container",3),r.Rc(5,we,2,2,"ng-container",3),r.Rc(6,Re,4,8,"ng-container",3),r.Rc(7,Oe,2,0,"ng-container",3),r.Vb(),r.Rc(8,We,2,1,"ng-container",3),r.Vb(),r.Rb(9,"router-outlet",4)),2&t&&(r.uc("ngSwitch",e.packageResponseStatus),r.Ab(2),r.uc("status",e.packageResponseStatus),r.Ab(1),r.uc("ngSwitchCase","success"),r.Ab(1),r.uc("ngSwitchCase","not_found"),r.Ab(1),r.uc("ngSwitchCase","change"),r.Ab(1),r.uc("ngSwitchCase","forbidden"),r.Ab(1),r.uc("ngSwitchCase","error"),r.Ab(1),r.uc("ngSwitchCase","loading"))},directives:[i.y,Te,i.z,a.h,Xt,Ie,X.a,i.t,Y.a],pipes:[d.d],encapsulation:2}),t})();var xe=n("KJdv");const Ne=[{path:"",component:S,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:ht},{path:"authorities",component:it},{path:"password",component:kt},{path:"package",component:Ve,canActivate:[n("RW1d").a],children:[{path:":key",component:xe.a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let Me=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(Ne)],a.g]}),t})();var De=n("MN0s");n("qcJj"),n("/Fsc"),n.d(e,"SettingsModule",(function(){return Ge}));let Ge=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[i.c,s.a,Me,c.n,c.D,De.a]]}),t})()}}]);