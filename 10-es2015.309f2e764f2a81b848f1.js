(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"E+oP":function(t,e,n){var s=n("A90E"),i=n("QqLw"),o=n("03A+"),r=n("Z0cm"),c=n("MMmD"),a=n("DSRE"),l=n("6sVZ"),b=n("c6wG"),u=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(r(t)||"string"==typeof t||"function"==typeof t.splice||a(t)||b(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!s(t).length;for(var n in t)if(u.call(t,n))return!1;return!0}},T9EB:function(t,e,n){"use strict";n.r(e);var s=n("ofXK"),i=n("3Pt+"),o=n("tmjD"),r=n("1kSV"),c=n("sYmb"),a=n("xJkR"),l=n("4Nuw"),b=n("Rreu"),u=n("PCNd"),d=n("fXoL"),m=n("eNwd");let p=1;const h=(()=>Promise.resolve())(),f={};function g(t){return t in f&&(delete f[t],!0)}const v={setImmediate(t){const e=p++;return f[e]=!0,h.then(()=>g(e)&&t()),e},clearImmediate(t){g(t)}};var y=n("3N8a");class R extends y.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=v.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(v.clearImmediate(e),t.scheduled=void 0)}}var C=n("IjjT");class T extends C.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,s=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++s<i&&(t=e.shift()));if(this.active=!1,n){for(;++s<i&&(t=e.shift());)t.unsubscribe();throw n}}}const A=new T(R);var S=n("XNiG"),j=n("xgIS"),k=n("VRyK"),I=n("1G5W"),V=n("D0XW"),E=n("l7GE"),_=n("ZUHj");class W{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new O(t,this.durationSelector))}}class O extends E.a{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const s=Object(_.a)(this,n);!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,s){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var P=n("PqYM");const x=/[&<>"']/g,w=RegExp(x.source),N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function D(t){return null!=t}function M(t){return"object"==typeof t&&D(t)}function L(t){return t instanceof Function}let $=(()=>{class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(t,e,n){const s=this._dimensions,i=s.itemHeight*e,o=Math.max(0,t)/i*e;let r=Math.min(e,Math.ceil(o)+(s.itemsPerViewport+1));const c=Math.max(0,r-s.itemsPerViewport);let a=Math.min(c,Math.floor(o)),l=s.itemHeight*Math.ceil(a)-s.itemHeight*Math.min(a,n);return l=isNaN(l)?0:l,a=isNaN(a)?-1:a,r=isNaN(r)?-1:r,a-=n,a=Math.max(0,a),r+=n,r=Math.min(e,r),{topPadding:l,scrollHeight:i,start:a,end:r}}setDimensions(t,e){const n=Math.max(1,Math.floor(e/t));this._dimensions={itemHeight:t,panelHeight:e,itemsPerViewport:n}}getScrollTo(t,e,n){const{panelHeight:s}=this.dimensions,i=t+e,o=n+s;return s>=i&&n===t?null:i>o?n+i-o:t<=n?t:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac}),t})();const F=["content"],U=["scroll"],Y=["padding"],B=function(t){return{searchTerm:t}};function H(t,e){if(1&t&&(d.Wb(0,"div",6),d.Sb(1,7),d.Vb()),2&t){const t=d.lc();d.Ab(1),d.sc("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",d.xc(2,B,t.filterValue))}}function Q(t,e){if(1&t&&(d.Wb(0,"div",8),d.Sb(1,7),d.Vb()),2&t){const t=d.lc();d.Ab(1),d.sc("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",d.xc(2,B,t.filterValue))}}const G=["*"],K="undefined"!=typeof requestAnimationFrame?m.a:A;let q=(()=>{class t{constructor(t,e,n,s,i){this._renderer=t,this._zone=e,this._panelService=n,this._document=i,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new d.n,this.scroll=new d.n,this.scrollToEnd=new d.n,this.outsideClick=new d.n,this._destroy$=new S.a,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=s.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(t){t!==this._itemsLength&&(this._itemsLength=t,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:t,panelHeight:e}=this._panelService.dimensions,n=this.markedItem.index*t;return e>n?0:n}return 0}handleMousedown(t){"INPUT"!==t.target.tagName&&t.preventDefault()}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown()}ngOnChanges(t){if(t.items){const e=t.items;this._onItemsChange(e.currentValue,e.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(t,e=!1){if(!t)return;const n=this.items.indexOf(t);if(n<0||n>=this.itemsLength)return;let s;if(this.virtualScroll){const t=this._panelService.dimensions.itemHeight;s=this._panelService.getScrollTo(n*t,t,this._lastScrollPosition)}else{const n=this._dropdown.querySelector(`#${t.htmlId}`);s=this._panelService.getScrollTo(n.offsetTop,n.clientHeight,e?n.offsetTop:this._lastScrollPosition)}D(s)&&(this._scrollablePanel.scrollTop=s)}scrollToTag(){const t=this._scrollablePanel;t.scrollTop=t.scrollHeight-t.clientHeight}adjustPosition(){const t=this._parent.getBoundingClientRect(),e=this._select.getBoundingClientRect();this._setOffset(t,e)}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),"top"===this._currentPosition?(this._renderer.addClass(this._dropdown,"j-select-top"),this._renderer.removeClass(this._dropdown,"j-select-bottom"),this._renderer.addClass(this._select,"j-select-top"),this._renderer.removeClass(this._select,"j-select-bottom")):(this._renderer.addClass(this._dropdown,"j-select-bottom"),this._renderer.removeClass(this._dropdown,"j-select-top"),this._renderer.addClass(this._select,"j-select-bottom"),this._renderer.removeClass(this._select,"j-select-top")),this.appendTo&&this._updatePosition(),this._dropdown.style.opacity="1"}_handleScroll(){this._zone.runOutsideAngular(()=>{Object(j.a)(this.scrollElementRef.nativeElement,"scroll").pipe(Object(I.a)(this._destroy$),function(t,e=V.a){return n=()=>Object(P.a)(t,e),function(t){return t.lift(new W(n))};var n}(0,K)).subscribe(t=>this._onContentScrolled(t.target.scrollTop))})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{Object(k.a)(Object(j.a)(this._document,"touchstart",{capture:!0}),Object(j.a)(this._document,"mousedown",{capture:!0})).pipe(Object(I.a)(this._destroy$)).subscribe(t=>this._checkToClose(t))})}_checkToClose(t){if(this._select.contains(t.target)||this._dropdown.contains(t.target))return;const e=t.path||t.composedPath&&t.composedPath();t.target&&t.target.shadowRoot&&e&&e[0]&&this._select.contains(e[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(t,e){this.items=t||[],this._scrollToEndFired=!1,this.itemsLength=t.length,this.virtualScroll?this._updateItemsRange(e):this._updateItems(e)}_updateItems(t){this.update.emit(this.items),!1!==t&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,t)})})}_updateItemsRange(t){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{t?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(t){this.virtualScroll&&this._renderItemsRange(t),this._lastScrollPosition=t,this._fireScrollToEnd(t)}_updateVirtualHeight(t){this._updateScrollHeight&&(this._virtualPadding.style.height=`${t}px`,this._updateScrollHeight=!1)}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(t=null){if(t&&this._lastScrollPosition===t)return;const e=this._panelService.calculateItems(t=t||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(e.scrollHeight),this._contentPanel.style.transform=`translateY(${e.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(e.start,e.end)),this.scroll.emit({start:e.start,end:e.end})}),D(t)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=t,this._lastScrollPosition=t)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[t]=this.items;return this.update.emit([t]),Promise.resolve().then(()=>{const e=this._dropdown.querySelector(`#${t.htmlId}`).clientHeight;return this._virtualPadding.style.height=`${e*this.itemsLength}px`,this._panelService.setDimensions(e,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(t){this._scrollToEndFired||0===t||t+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(t){if("auto"!==this.position)return this.position;const e=this._select.getBoundingClientRect(),n=document.documentElement.scrollTop||document.body.scrollTop;return e.top+window.pageYOffset+e.height+t.getBoundingClientRect().height>n+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if("string"==typeof this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`)}else this._parent=this.appendTo;this._parent.appendChild(this._dropdown)}}_updatePosition(){const t=this._select.getBoundingClientRect(),e=this._parent.getBoundingClientRect();this._setOffset(e,t),this._dropdown.style.width=e.width+"px",this._dropdown.style.minWidth=e.width+"px"}_setOffset(t,e){const n=e.height;"top"===this._currentPosition?(this._dropdown.style.bottom=t.bottom-e.bottom+n+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=e.top-t.top+n+"px",this._dropdown.style.bottom="auto")}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.D),d.Qb(d.z),d.Qb($),d.Qb(d.l),d.Qb(s.e,8))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-dropdown-panel"]],viewQuery:function(t,e){var n;1&t&&(d.Mc(F,!0,d.l),d.Mc(U,!0,d.l),d.Mc(Y,!0,d.l)),2&t&&(d.Cc(n=d.jc())&&(e.contentElementRef=n.first),d.Cc(n=d.jc())&&(e.scrollElementRef=n.first),d.Cc(n=d.jc())&&(e.paddingElementRef=n.first))},hostBindings:function(t,e){1&t&&d.ic("mousedown",(function(t){return e.handleMousedown(t)}))},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[d.yb()],ngContentSelectors:G,decls:9,vars:6,consts:[["class","j-dropdown-header",4,"ngIf"],[1,"j-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","j-dropdown-footer",4,"ngIf"],[1,"j-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"j-dropdown-footer"]],template:function(t,e){1&t&&(d.rc(),d.Pc(0,H,2,4,"div",0),d.Wb(1,"div",1,2),d.Rb(3,"div",null,3),d.Wb(5,"div",null,4),d.qc(7),d.Vb(),d.Vb(),d.Pc(8,Q,2,4,"div",5)),2&t&&(d.sc("ngIf",e.headerTemplate),d.Ab(3),d.Hb("total-padding",e.virtualScroll),d.Ab(2),d.Hb("scrollable-content",e.virtualScroll&&e.items.length),d.Ab(3),d.sc("ngIf",e.footerTemplate))},directives:[s.u,s.B],encapsulation:2,changeDetection:0}),t})();const z=["*"];let X=(()=>{class t{constructor(t){this.elementRef=t,this.stateChange$=new S.a,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=this._isDisabled(t)}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(t){t.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(t){return null!=t&&"false"!==`${t}`}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.l))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-option"]],inputs:{value:"value",disabled:"disabled"},features:[d.yb()],ngContentSelectors:z,decls:1,vars:0,template:function(t,e){1&t&&(d.rc(),d.qc(0))},encapsulation:2,changeDetection:0}),t})();var Z=n("JX91"),J=n("vkgz"),tt=n("Kj3r"),et=n("pLZG"),nt=n("lJxs");let st=(()=>{class t{constructor(t){this.element=t,this.escape=!0}ngOnChanges(t){var e;this.element.nativeElement.innerHTML=this.escape?(e=this.ngItemLabel)&&w.test(e)?e.replace(x,t=>N[t]):e:this.ngItemLabel}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.l))},t.\u0275dir=d.Lb({type:t,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[d.yb()]}),t})(),it=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-option-tmp",""]]}),t})(),ot=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-optgroup-tmp",""]]}),t})(),rt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-label-tmp",""]]}),t})(),ct=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-multi-label-tmp",""]]}),t})(),at=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-header-tmp",""]]}),t})(),lt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-footer-tmp",""]]}),t})(),bt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-notfound-tmp",""]]}),t})(),ut=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-typetosearch-tmp",""]]}),t})(),dt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-loadingtext-tmp",""]]}),t})(),mt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-tag-tmp",""]]}),t})(),pt=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(d.L))},t.\u0275dir=d.Lb({type:t,selectors:[["","j-loadingspinner-tmp",""]]}),t})();var ht=n("YMfE");class ft{constructor(t,e){this._ngSelect=t,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let t=this.selectedItems.length-1;for(;t>=0;t--){let e=this.selectedItems[t];if(!e.disabled)return e}return null}setItems(t){this._items=t.map((t,e)=>this.mapItem(t,e)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(t){if(t.selected||this.maxItemsSelected)return;const e=this._ngSelect.multiple;e||this.clearSelected(),this._selectionModel.select(t,e,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(t)}unselect(t){t.selected&&(this._selectionModel.unselect(t,this._ngSelect.multiple),this._ngSelect.hideSelected&&D(t.index)&&this._ngSelect.multiple&&this._showSelected(t))}findItem(t){let e;return e=this._ngSelect.compareWith?e=>this._ngSelect.compareWith(e.value,t):this._ngSelect.bindValue?e=>!e.children&&this.resolveNested(e.value,this._ngSelect.bindValue)===t:e=>e.value===t||!e.children&&e.label&&e.label===this.resolveNested(t,this._ngSelect.bindLabel),this._items.find(t=>e(t))}addItem(t){const e=this.mapItem(t,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(t=!1){this._selectionModel.clear(t),this._items.forEach(e=>{e.selected=t&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(t){return t=t.toLocaleLowerCase(),this.filteredItems.find(e=>e.label.toLocaleLowerCase().substr(0,t.length)===t)}filter(t){if(!t)return void this.resetFilteredItems();this._filteredItems=[],t=this._ngSelect.searchFn?t:t.toLocaleLowerCase();const e=this._ngSelect.searchFn||this._defaultSearchFn,n=this._ngSelect.hideSelected;for(const s of Array.from(this._groups.keys())){const i=[];for(const o of this._groups.get(s))n&&(o.parent&&o.parent.selected||o.selected)||e(t,this._ngSelect.searchFn?o.value:o)&&i.push(o);if(i.length>0){const[t]=i.slice(-1);if(t.parent){const e=this._items.find(e=>e===t.parent);this._filteredItems.push(e)}this._filteredItems.push(...i)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(t=>!t.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(t){this._markedIndex=this._filteredItems.indexOf(t)}markSelectedOrDefault(t){if(0===this._filteredItems.length)return;const e=this._getLastMarkedIndex();this._markedIndex=e>-1?e:t?this.filteredItems.findIndex(t=>!t.disabled):-1}resolveNested(t,e){if(e){if(!M(t))return t;if(-1===e.indexOf("."))return t[e];{let n=e.split("."),s=t;for(let t=0,e=n.length;t<e;++t){if(null==s)return null;s=s[n[t]]}return s}}}mapItem(t,e){const n=D(t.$ngOptionLabel)?t.$ngOptionLabel:this.resolveNested(t,this._ngSelect.bindLabel),s=D(t.$ngOptionValue)?t.$ngOptionValue:t;return{index:e,label:D(n)?n.toString():"",value:s,disabled:t.disabled,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){const t=this._ngSelect.multiple;for(const e of this.selectedItems){const n=this._ngSelect.bindValue?this.resolveNested(e.value,this._ngSelect.bindValue):e.value,s=D(n)?this.findItem(n):null;this._selectionModel.unselect(e,t),this._selectionModel.select(s||e,t,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(t=>-1===this.selectedItems.indexOf(t)))}_showSelected(t){if(this._filteredItems.push(t),t.parent){const e=t.parent;this._filteredItems.find(t=>t===e)||this._filteredItems.push(e)}else if(t.children)for(const e of t.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((t,e)=>t.index-e.index)]}_hideSelected(t){this._filteredItems=this._filteredItems.filter(e=>e!==t),t.parent?t.parent.children.every(t=>t.selected)&&(this._filteredItems=this._filteredItems.filter(e=>e!==t.parent)):t.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==t))}_defaultSearchFn(t,e){return e.label.toLocaleLowerCase().indexOf(t)>-1}_getNextItemIndex(t){return t>0?this._markedIndex===this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(t){0===this._filteredItems.length||this._filteredItems.every(t=>t.disabled)||(this._markedIndex=this._getNextItemIndex(t),this.markedItem.disabled&&this._stepToItem(t))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected)return-1;if(this._markedIndex>-1&&void 0===this.markedItem)return-1;const t=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&t<0?-1:Math.max(this.markedIndex,t)}_groupBy(t,e){const n=new Map;if(0===t.length)return n;if(Array.isArray(t[0].value[e])){for(const s of t){const t=(s.value[e]||[]).map((t,e)=>this.mapItem(t,e));n.set(s,t)}return n}const s=L(this._ngSelect.groupBy),i=t=>{let n=s?e(t.value):t.value[e];return D(n)?n:void 0};for(const o of t){let t=i(o);const e=n.get(t);e?e.push(o):n.set(t,[o])}return n}_flatten(t){const e=L(this._ngSelect.groupBy),n=[];for(const s of Array.from(t.keys())){let i=n.length;if(void 0===s){const e=t.get(void 0)||[];n.push(...e.map(t=>Object.assign(Object.assign({},t),{index:i++})));continue}const o=M(s),r={label:o?"":String(s),children:void 0,parent:null,index:i++,disabled:!this._ngSelect.selectableGroup,htmlId:Object(ht.generateUniqueId)()},c=e?this._ngSelect.bindLabel:this._ngSelect.groupBy,a=this._ngSelect.groupValue||(()=>o?s.value:{[c]:s}),l=t.get(s).map(t=>(t.parent=r,t.children=void 0,t.index=i++,t));r.children=l,r.value=a(s,l.map(t=>t.value)),n.push(r),n.push(...l)}return n}}var gt=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.Backspace=8]="Backspace",t}({});function vt(){return new yt}class yt{constructor(){this._selected=[]}get value(){return this._selected}select(t,e,n){if(t.selected=!0,(!t.children||!e&&n)&&this._selected.push(t),e)if(t.parent){const e=t.parent.children.length,n=t.parent.children.filter(t=>t.selected).length;t.parent.selected=e===n}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),this._selected=n&&this._activeChildren(t)?[...this._selected.filter(e=>e.parent!==t),t]:[...this._selected,...t.children.filter(t=>!t.disabled)])}unselect(t,e){if(this._selected=this._selected.filter(e=>e!==t),t.selected=!1,e)if(t.parent&&t.parent.selected){const e=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...e.filter(e=>e!==t&&!e.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(t,e){for(const n of t)n.disabled||(n.selected=e)}_removeChildren(t){this._selected=[...this._selected.filter(e=>e.parent!==t),...t.children.filter(e=>e.parent===t&&e.disabled&&e.selected)]}_removeParent(t){this._selected=this._selected.filter(e=>e!==t)}_activeChildren(t){return t.children.every(t=>!t.disabled||t.selected)}}var Rt=n("fbp8"),Ct=n("6tGF");let Tt=(()=>{class t{constructor(){this.notFoundText="\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",this.typeToSearchText="\u041f\u043e\u0438\u0441\u043a",this.addTagText="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",this.loadingText="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",this.clearAllText="\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var At=n("eEJz");const St=["searchInput"];function jt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"span",15),d.ic("click",(function(e){d.Gc(t);const n=d.lc().$implicit;return d.lc(2).unselect(n)})),d.Rc(1,"\xd7"),d.Vb(),d.Rb(2,"span",16)}if(2&t){const t=d.lc().$implicit,e=d.lc(2);d.Ab(2),d.sc("ngItemLabel",t.label)("escape",e.escapeHTML)}}function kt(t,e){}const It=function(t,e,n){return{item:t,clear:e,label:n}};function Vt(t,e){if(1&t&&(d.Wb(0,"div",12),d.Pc(1,jt,3,2,"ng-template",null,13,d.Qc),d.Pc(3,kt,0,0,"ng-template",14),d.Vb()),2&t){const t=e.$implicit,n=d.Dc(2),s=d.lc(2);d.Hb("j-value-disabled",t.disabled),d.Ab(3),d.sc("ngTemplateOutlet",s.labelTemplate||n)("ngTemplateOutletContext",d.zc(4,It,t.value,s.clearItem,t.label))}}function Et(t,e){if(1&t&&(d.Ub(0),d.Pc(1,Vt,4,8,"div",11),d.Tb()),2&t){const t=d.lc();d.Ab(1),d.sc("ngForOf",t.selectedItems)("ngForTrackBy",t.trackByOption)}}function _t(t,e){}const Wt=function(t,e){return{items:t,clear:e}};function Ot(t,e){if(1&t&&d.Pc(0,_t,0,0,"ng-template",14),2&t){const t=d.lc();d.sc("ngTemplateOutlet",t.multiLabelTemplate)("ngTemplateOutletContext",d.yc(2,Wt,t.selectedValues,t.clearItem))}}function Pt(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"input",17,18),d.ic("input",(function(e){d.Gc(t);const n=d.Dc(2);return d.lc().filter(n.value)}))("compositionstart",(function(e){return d.Gc(t),d.lc().onCompositionStart()}))("compositionend",(function(e){d.Gc(t);const n=d.Dc(2);return d.lc().onCompositionEnd(n.value)}))("focus",(function(e){return d.Gc(t),d.lc().onInputFocus(e)}))("blur",(function(e){return d.Gc(t),d.lc().onInputBlur(e)}))("change",(function(e){return d.Gc(t),e.stopPropagation()})),d.Vb(),d.Tb()}if(2&t){const t=d.lc();d.Ab(1),d.sc("readOnly",!t.searchable||t.itemsList.maxItemsSelected)("disabled",t.disabled)("value",t.searchTerm?t.searchTerm:"")("jShadow",t.shadow)("mask",t.searchMask),d.Bb("id",t.labelForId)("tabindex",t.tabIndex)("aria-expanded",t.isOpen)("aria-owns",t.isOpen?t.dropdownId:null)("aria-activedescendant",t.isOpen?null==t.itemsList?null:null==t.itemsList.markedItem?null:t.itemsList.markedItem.htmlId:null)}}function xt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"input",19,18),d.ic("input",(function(e){d.Gc(t);const n=d.Dc(1);return d.lc().filter(n.value)}))("compositionstart",(function(e){return d.Gc(t),d.lc().onCompositionStart()}))("compositionend",(function(e){d.Gc(t);const n=d.Dc(1);return d.lc().onCompositionEnd(n.value)}))("focus",(function(e){return d.Gc(t),d.lc().onInputFocus(e)}))("blur",(function(e){return d.Gc(t),d.lc().onInputBlur(e)}))("change",(function(e){return d.Gc(t),e.stopPropagation()})),d.Vb()}if(2&t){const t=d.lc();d.sc("readOnly",!t.searchable||t.itemsList.maxItemsSelected)("disabled",t.disabled)("value",t.searchTerm?t.searchTerm:""),d.Bb("id",t.labelForId)("tabindex",t.tabIndex)("aria-expanded",t.isOpen)("aria-owns",t.isOpen?t.dropdownId:null)("aria-activedescendant",t.isOpen?null==t.itemsList?null:null==t.itemsList.markedItem?null:t.itemsList.markedItem.htmlId:null)}}function wt(t,e){1&t&&d.Rb(0,"div",22)}function Nt(t,e){}function Dt(t,e){if(1&t&&(d.Ub(0),d.Pc(1,wt,1,0,"ng-template",null,20,d.Qc),d.Pc(3,Nt,0,0,"ng-template",21),d.Tb()),2&t){const t=d.Dc(2),e=d.lc();d.Ab(3),d.sc("ngTemplateOutlet",e.loadingSpinnerTemplate||t)}}function Mt(t,e){if(1&t&&(d.Wb(0,"span",23),d.Wb(1,"span",24),d.Rc(2,"\xd7"),d.Vb(),d.Vb()),2&t){const t=d.lc();d.tc("title",t.clearAllText)}}function Lt(t,e){if(1&t&&d.Rb(0,"span",30),2&t){const t=d.lc().$implicit,e=d.lc(2);d.sc("ngItemLabel",t.label)("escape",e.escapeHTML)}}function $t(t,e){}const Ft=function(t,e,n,s){return{item:t,item$:e,index:n,searchTerm:s}};function Ut(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",28),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc(2).toggleItem(s,n)}))("mouseover",(function(n){d.Gc(t);const s=e.$implicit;return d.lc(2).onItemHover(s)})),d.Pc(1,Lt,1,2,"ng-template",null,29,d.Qc),d.Pc(3,$t,0,0,"ng-template",14),d.Vb()}if(2&t){const t=e.$implicit,n=d.Dc(2),s=d.lc(2);d.Hb("j-option-disabled",t.disabled)("j-option-selected",t.selected)("j-optgroup",t.children)("j-option",!t.children)("j-option-child",!!t.parent)("j-option-marked",t===s.itemsList.markedItem),d.Bb("role",t.children?"group":"option")("aria-selected",t.selected)("id",null==t?null:t.htmlId),d.Ab(3),d.sc("ngTemplateOutlet",t.children?s.optgroupTemplate||n:s.optionTemplate||n)("ngTemplateOutletContext",d.Ac(17,Ft,t.value,t,t.index,s.searchTerm))}}function Yt(t,e){if(1&t&&(d.Wb(0,"span"),d.Wb(1,"span",33),d.Rc(2),d.Vb(),d.Rc(3),d.Vb()),2&t){const t=d.lc(3);d.Ab(2),d.Sc(t.addTagText),d.Ab(1),d.Tc('"',t.searchTerm,'"')}}function Bt(t,e){}const Ht=function(t){return{searchTerm:t}};function Qt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",31),d.ic("mouseover",(function(e){return d.Gc(t),d.lc(2).itemsList.unmarkItem()}))("click",(function(e){return d.Gc(t),d.lc(2).selectTag()})),d.Pc(1,Yt,4,2,"ng-template",null,32,d.Qc),d.Pc(3,Bt,0,0,"ng-template",14),d.Vb()}if(2&t){const t=d.Dc(2),e=d.lc(2);d.Hb("j-option-marked",!e.itemsList.markedItem),d.Ab(3),d.sc("ngTemplateOutlet",e.tagTemplate||t)("ngTemplateOutletContext",d.xc(4,Ht,e.searchTerm))}}function Gt(t,e){if(1&t&&(d.Wb(0,"div",35),d.Wb(1,"span",36),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=d.lc(3);d.Ab(2),d.Sc(t.notFoundText)}}function Kt(t,e){}function qt(t,e){if(1&t&&(d.Ub(0),d.Pc(1,Gt,3,1,"ng-template",null,34,d.Qc),d.Pc(3,Kt,0,0,"ng-template",14),d.Tb()),2&t){const t=d.Dc(2),e=d.lc(2);d.Ab(3),d.sc("ngTemplateOutlet",e.notFoundTemplate||t)("ngTemplateOutletContext",d.xc(2,Ht,e.searchTerm))}}function zt(t,e){if(1&t&&(d.Wb(0,"div",35),d.Rc(1),d.Vb()),2&t){const t=d.lc(3);d.Ab(1),d.Sc(t.typeToSearchText)}}function Xt(t,e){}function Zt(t,e){if(1&t&&(d.Ub(0),d.Pc(1,zt,2,1,"ng-template",null,37,d.Qc),d.Pc(3,Xt,0,0,"ng-template",21),d.Tb()),2&t){const t=d.Dc(2),e=d.lc(2);d.Ab(3),d.sc("ngTemplateOutlet",e.typeToSearchTemplate||t)}}function Jt(t,e){if(1&t&&(d.Wb(0,"div",35),d.Rc(1),d.Vb()),2&t){const t=d.lc(3);d.Ab(1),d.Sc(t.loadingText)}}function te(t,e){}function ee(t,e){if(1&t&&(d.Ub(0),d.Pc(1,Jt,2,1,"ng-template",null,38,d.Qc),d.Pc(3,te,0,0,"ng-template",14),d.Tb()),2&t){const t=d.Dc(2),e=d.lc(2);d.Ab(3),d.sc("ngTemplateOutlet",e.loadingTextTemplate||t)("ngTemplateOutletContext",d.xc(2,Ht,e.searchTerm))}}function ne(t,e){if(1&t){const t=d.Xb();d.Wb(0,"j-dropdown-panel",25),d.ic("update",(function(e){return d.Gc(t),d.lc().viewPortItems=e}))("scroll",(function(e){return d.Gc(t),d.lc().scroll.emit(e)}))("scrollToEnd",(function(e){return d.Gc(t),d.lc().scrollToEnd.emit(e)}))("outsideClick",(function(e){return d.Gc(t),d.lc().close()})),d.Ub(1),d.Pc(2,Ut,4,22,"div",26),d.Pc(3,Qt,4,6,"div",27),d.Tb(),d.Pc(4,qt,4,4,"ng-container",3),d.Pc(5,Zt,4,1,"ng-container",3),d.Pc(6,ee,4,4,"ng-container",3),d.Vb()}if(2&t){const t=d.lc();d.Hb("j-select-multiple",t.multiple),d.sc("virtualScroll",t.virtualScroll)("bufferAmount",t.bufferAmount)("appendTo",t.appendTo)("position",t.dropdownPosition)("headerTemplate",t.headerTemplate)("footerTemplate",t.footerTemplate)("filterValue",t.searchTerm)("items",t.itemsList.filteredItems)("markedItem",t.itemsList.markedItem)("ngClass",t.appendTo?t.classes:null)("id",t.dropdownId),d.Ab(2),d.sc("ngForOf",t.viewPortItems)("ngForTrackBy",t.trackByOption),d.Ab(1),d.sc("ngIf",t.showAddTag),d.Ab(1),d.sc("ngIf",t.showNoItemsFound()),d.Ab(1),d.sc("ngIf",t.showTypeToSearch()),d.Ab(1),d.sc("ngIf",t.loading&&0===t.itemsList.filteredItems.length)}}const se=new d.q("j-select-selection-model"),ie=Object(Ct.a)(class{constructor(t,e,n,s,i){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=s,this.ngControl=i}});let oe=(()=>{class t extends ie{constructor(t,e,n,s,i,o,r,c,a,l){super(i,a,r,c,o),this.classes=t,this.autoFocus=e,this.ngControl=o,this._cd=l,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=t=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.controlType="select",this.blurEvent=new d.n,this.focusEvent=new d.n,this.changeEvent=new d.n,this.openEvent=new d.n,this.closeEvent=new d.n,this.searchEvent=new d.n,this.clearEvent=new d.n,this.addEvent=new d.n,this.removeEvent=new d.n,this.scroll=new d.n,this.scrollToEnd=new d.n,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=Object(ht.generateUniqueId)(),this.id=this.dropdownId,this.escapeHTML=!0,this.useDefaultClass=!0,this.stateChanges=new S.a,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new S.a,this._keyPress$=new S.a,this._onChange=t=>{},this._onTouched=()=>{},this.clearItem=t=>{const e=this.selectedItems.find(e=>e.value===t);this.unselect(e)},this.trackByOption=(t,e)=>this.trackByFn?this.trackByFn(e.value):e,this.ngControl&&(this.ngControl.valueAccessor=this),this._mergeGlobalConfig(n),this.itemsList=new ft(this,s()),this.element=i.nativeElement}get items(){return this._items}set items(t){this._itemsAreUsed=!0,this._items=t}get compareWith(){return this._compareWith}set compareWith(t){if(!L(t))throw Error("`compareWith` must be a function.");this._compareWith=t}get value(){return this._value}set value(t){t!==this._value&&(this.writeValue(t),this._value=t)}get clearSearchOnAdd(){return D(this._clearSearchOnAdd)?this._clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(t){this._clearSearchOnAdd=t}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}get shouldLabelFloat(){return this.isOpen&&this.searchable||this.searchable&&this.focused||!this.empty}get empty(){return!this.hasValue}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(t=>t.value)}get hasValue(){return this.selectedItems.some(t=>t.value)}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){}ngOnChanges(t){t.multiple&&this.itemsList.clearSelected(),t.items&&this._setItems(t.items.currentValue||[]),t.isOpen&&(this._manualOpen=D(t.isOpen.currentValue))}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngAfterViewInit(){this._handleKeyPresses(),this._setInputAttributes(),this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),D(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(t){if(gt[t.which]){if(!1===this.keyDownFn(t))return;this.handleKeyCode(t)}else t.key&&1===t.key.length&&this._keyPress$.next(t.key.toLocaleLowerCase())}handleKeyCode(t){switch(t.which){case gt.ArrowDown:this._handleArrowDown(t);break;case gt.ArrowUp:this._handleArrowUp(t);break;case gt.Space:this._handleSpace(t);break;case gt.Enter:this._handleEnter(t);break;case gt.Tab:this._handleTab(t);break;case gt.Esc:this.close(),t.preventDefault();break;case gt.Backspace:this._handleBackspace()}}handleMousedown(t){const e=t.target;"INPUT"!==e.tagName&&t.preventDefault(),e.classList.contains("j-clear-wrapper")?this.handleClearClick():e.classList.contains("j-arrow-wrapper")?this.handleArrowClick():e.classList.contains("j-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}onContainerClick(t){this.handleMousedown(t)}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(t){this.itemsList.clearSelected(),this._handleWriteValue(t),this._cd.markForCheck()}setDescribedByIds(t){}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._disabled=t}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this.itemsList.maxItemsSelected||this._manualOpen||(this._isTypeahead||this.addTag||!this.itemsList.noItemsToSelect)&&(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchable&&!this.searchTerm&&this.focus(),this.detectChanges())}close(){this.isOpen&&!this._manualOpen&&(this.isOpen=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this.stateChanges.next(),this._cd.markForCheck())}toggleItem(t,e){e&&e.stopPropagation(),!t||t.disabled||this.disabled||(this.multiple&&t.selected?this.unselect(t):this.select(t),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(t){t.selected||(this.itemsList.select(t),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(t.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(t){t&&(this.itemsList.unselect(t),this.focus(),this._updateNgModel(),this.removeEvent.emit(t))}selectTag(){let t;t=L(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const e=t=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(t,null):this.itemsList.addItem(t);t instanceof Promise?t.then(t=>this.select(e(t))).catch(()=>{}):t&&this.select(e(t))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}get showAddTag(){if(!this._validTerm)return!1;const t=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(e=>e.label.toLowerCase()===t)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(e=>e.label.toLowerCase()===t))&&!this.loading}showNoItemsFound(){const t=0===this.itemsList.filteredItems.length;return(t&&!this._isTypeahead&&!this.loading||t&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,this.searchWhileComposing||this.filter(t)}filter(t){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=t,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(t),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:t,items:this.itemsList.filteredItems.map(t=>t.value)}),this.open())}onInputFocus(t){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("j-select-focused"),this.focusEvent.emit(t),this.focused=!0,this.stateChanges.next())}onInputBlur(t){this.element.classList.remove("j-select-focused"),this.blurEvent.emit(t),this.isOpen||this.disabled||(this._onTouched(),this.stateChanges.next(),this._cd.markForCheck()),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(t){t.disabled||this.itemsList.markItem(t)}detectChanges(){this._cd.destroyed||this._cd.markForCheck()}_setSearchTermFromItems(){const t=this.selectedItems&&this.selectedItems[0];this.searchTerm=t&&t.label||null}_setItems(t){const e=t[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=D(e)?!M(e):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(t),t.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&D(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const t=t=>{this.items=t.map(t=>({$ngOptionValue:t.value,$ngOptionLabel:t.elementRef.nativeElement.innerHTML,disabled:t.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},e=()=>{const t=Object(k.a)(this.ngOptions.changes,this._destroy$);Object(k.a)(...this.ngOptions.map(t=>t.stateChange$)).pipe(Object(I.a)(t)).subscribe(t=>{const e=this.itemsList.findItem(t.value);e.disabled=t.disabled,e.label=t.label||e.label})};this.ngOptions.changes.pipe(Object(Z.a)(this.ngOptions),Object(I.a)(this._destroy$)).subscribe(n=>{this.bindLabel=this._defaultLabel,t(n),e()})}_isValidWriteValue(t){if(!D(t)||this.multiple&&""===t||Array.isArray(t)&&0===t.length)return!1;const e=t=>!(!D(this.compareWith)&&M(t)&&this.bindValue);return this.multiple?!!Array.isArray(t)&&t.every(t=>e(t)):e(t)}_handleWriteValue(t){if(!this._isValidWriteValue(t))return;const e=t=>{let e=this.itemsList.findItem(t);if(e)this.itemsList.select(e);else{const n=M(t),s=!n&&!this.bindValue;n||s?this.itemsList.select(this.itemsList.mapItem(t,null)):this.bindValue&&t&&(e={[this.bindLabel]:null,[this.bindValue]:t},this.itemsList.select(this.itemsList.mapItem(e,null)))}};this.multiple?t.forEach(t=>e(t)):e(t)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(Object(I.a)(this._destroy$),Object(J.a)(t=>this._pressedKeys.push(t)),Object(tt.a)(200),Object(et.a)(()=>this._pressedKeys.length>0),Object(nt.a)(()=>this._pressedKeys.join(""))).subscribe(t=>{const e=this.itemsList.findByLabel(t);e&&(this.isOpen?this.itemsList.markItem(e):this.select(e)),this._pressedKeys=[]})}_setInputAttributes(){const t=this.searchInput.nativeElement,e=Object.assign({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(const n of Object.keys(e))t.setAttribute(n,e[n])}_updateNgModel(){const t=[];for(const n of this.selectedItems)if(this.bindValue){let e=null;e=n.children?n.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(n.value,this.bindValue),t.push(e)}else t.push(n.value);const e=this.selectedItems.map(t=>t.value);this.multiple?(this._onChange(t),this.changeEvent.emit(e)):(this._onChange(D(t[0])?t[0]:null),this.changeEvent.emit(e[0]))}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(t){this.searchTerm=t,this._isTypeahead&&this.typeahead.next(t)}_scrollToMarked(){this.isOpen&&this.dropdownPanel&&this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){this.isOpen&&this.dropdownPanel&&this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.multiple&&this.appendTo&&this.dropdownPanel.adjustPosition()}_handleTab(t){(!1!==this.isOpen||this.addTag)&&(this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),t.preventDefault()):this.showAddTag?(this.selectTag(),t.preventDefault()):this.close():this.close())}_handleEnter(t){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}t.preventDefault()}_handleSpace(t){this.isOpen||this._manualOpen||(this.open(),t.preventDefault())}_handleArrowDown(t){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),t.preventDefault()}_handleArrowUp(t){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),t.preventDefault())}_nextItemIsTag(t){const e=this.itemsList.markedIndex+t;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(e<0||e===this.itemsList.filteredItems.length)}_handleBackspace(){!this.searchTerm&&this.clearable&&this.clearOnBackspace&&this.hasValue&&(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const t=this.searchTerm&&this.searchTerm.trim();return t&&t.length>=this.minTermLength}_mergeGlobalConfig(t){this.placeholder=this.placeholder||t.placeholder,this.notFoundText=this.notFoundText||t.notFoundText,this.typeToSearchText=this.typeToSearchText||t.typeToSearchText,this.addTagText=this.addTagText||t.addTagText,this.loadingText=this.loadingText||t.loadingText,this.clearAllText=this.clearAllText||t.clearAllText,this.virtualScroll=D(this.virtualScroll)?this.virtualScroll:!!D(t.disableVirtualScroll)&&!t.disableVirtualScroll,this.openOnEnter=D(this.openOnEnter)?this.openOnEnter:t.openOnEnter,this.appendTo=this.appendTo||t.appendTo,this.bindValue=this.bindValue||t.bindValue,this.appearance=this.appearance||t.appearance}}return t.\u0275fac=function(e){return new(e||t)(d.fc("class"),d.fc("autofocus"),d.Qb(Tt),d.Qb(se),d.Qb(d.l),d.Qb(i.s,10),d.Qb(i.v,8),d.Qb(i.l,8),d.Qb(At.a),d.Qb(d.h))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-select"]],contentQueries:function(t,e,n){var s;1&t&&(d.Ib(n,it,!0,d.L),d.Ib(n,ot,!0,d.L),d.Ib(n,rt,!0,d.L),d.Ib(n,ct,!0,d.L),d.Ib(n,at,!0,d.L),d.Ib(n,lt,!0,d.L),d.Ib(n,bt,!0,d.L),d.Ib(n,ut,!0,d.L),d.Ib(n,dt,!0,d.L),d.Ib(n,mt,!0,d.L),d.Ib(n,pt,!0,d.L),d.Ib(n,X,!0)),2&t&&(d.Cc(s=d.jc())&&(e.optionTemplate=s.first),d.Cc(s=d.jc())&&(e.optgroupTemplate=s.first),d.Cc(s=d.jc())&&(e.labelTemplate=s.first),d.Cc(s=d.jc())&&(e.multiLabelTemplate=s.first),d.Cc(s=d.jc())&&(e.headerTemplate=s.first),d.Cc(s=d.jc())&&(e.footerTemplate=s.first),d.Cc(s=d.jc())&&(e.notFoundTemplate=s.first),d.Cc(s=d.jc())&&(e.typeToSearchTemplate=s.first),d.Cc(s=d.jc())&&(e.loadingTextTemplate=s.first),d.Cc(s=d.jc())&&(e.tagTemplate=s.first),d.Cc(s=d.jc())&&(e.loadingSpinnerTemplate=s.first),d.Cc(s=d.jc())&&(e.ngOptions=s))},viewQuery:function(t,e){var n;1&t&&(d.Wc(q,!0),d.Wc(St,!0)),2&t&&(d.Cc(n=d.jc())&&(e.dropdownPanel=n.first),d.Cc(n=d.jc())&&(e.searchInput=n.first))},hostAttrs:["role","listbox"],hostVars:20,hostBindings:function(t,e){1&t&&d.ic("keydown",(function(t){return e.handleKeyDown(t)})),2&t&&d.Hb("j-select",e.useDefaultClass)("j-select-single",!e.multiple)("j-select-typeahead",e.typeahead)("j-select-multiple",e.multiple)("j-select-taggable",e.addTag)("j-select-searchable",e.searchable)("j-select-clearable",e.clearable)("j-select-opened",e.isOpen)("j-select-disabled",e.disabled)("j-select-filtered",e.filtered)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",errorStateMatcher:"errorStateMatcher",searchMask:"searchMask",keyDownFn:"keyDownFn",shadow:"shadow",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",value:"value",clearSearchOnAdd:"clearSearchOnAdd",required:"required"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[d.zb([{provide:Rt.a,useExisting:t},$]),d.xb,d.yb()],decls:15,vars:12,consts:[[1,"j-select-container"],[1,"j-value-container","form-control"],[1,"j-placeholder"],[4,"ngIf"],[1,"j-search-input"],[4,"ngIf","ngIfElse"],["noMask",""],["class","j-clear-wrapper",3,"title",4,"ngIf"],[1,"j-arrow-wrapper"],[1,"j-arrow"],["class","j-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","j-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","j-value",3,"j-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"j-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"j-value-icon","left",3,"click"],[1,"j-value-label","j-value-label-default","text-truncate",3,"ngItemLabel","escape"],["role","combobox",3,"readOnly","disabled","value","jShadow","mask","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["role","combobox",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"j-spinner-loader"],[1,"j-clear-wrapper",3,"title"],["aria-hidden","true",1,"j-clear"],[1,"j-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","j-option",3,"j-option-disabled","j-option-selected","j-optgroup","j-option","j-option-child","j-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","j-option","role","option",3,"j-option-marked","mouseover","click",4,"ngIf"],[1,"j-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"j-option-label",3,"ngItemLabel","escape"],["role","option",1,"j-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"j-tag-label"],["defaultNotFoundTemplate",""],[1,"j-option","j-option-disabled"],[1,"text-center","text-muted"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(t,e){if(1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"div",2),d.Rc(3),d.Vb(),d.Pc(4,Et,2,2,"ng-container",3),d.Pc(5,Ot,1,5,void 0,3),d.Wb(6,"div",4),d.Pc(7,Pt,3,10,"ng-container",5),d.Pc(8,xt,2,8,"ng-template",null,6,d.Qc),d.Vb(),d.Vb(),d.Pc(10,Dt,4,1,"ng-container",3),d.Pc(11,Mt,3,1,"span",7),d.Wb(12,"span",8),d.Rb(13,"span",9),d.Vb(),d.Vb(),d.Pc(14,ne,7,19,"j-dropdown-panel",10)),2&t){const t=d.Dc(9);d.Hb("j-appearance-outline","outline"===e.appearance)("j-has-value",e.hasValue),d.Ab(3),d.Sc(e.placeholder),d.Ab(1),d.sc("ngIf",!e.multiLabelTemplate&&e.selectedItems.length>0),d.Ab(1),d.sc("ngIf",e.multiLabelTemplate&&e.selectedValues.length>0),d.Ab(2),d.sc("ngIf",e.searchMask)("ngIfElse",t),d.Ab(3),d.sc("ngIf",e.loading),d.Ab(1),d.sc("ngIf",e.showClear()),d.Ab(3),d.sc("ngIf",e.isOpen)}},styles:[".j-select{position:relative;display:block;width:100%}.j-select [hidden]{display:none}.j-select.j-select-searchable .j-select-container .j-value-container .j-search-input{opacity:1}.j-select.j-select-disabled .j-select-container .j-value-container .j-placeholder,.j-select.j-select-disabled .j-select-container .j-value-container .j-value{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.j-select.j-select-disabled .j-arrow-wrapper{cursor:default}.j-select.j-select-filtered .j-placeholder{display:none}.j-select .j-select-container{cursor:default;display:-webkit-box;display:flex;outline:none;overflow:hidden;width:100%}.j-select .j-select-container .j-value-container{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.j-select .j-select-container .j-value-container .j-search-input{opacity:0}.j-select .j-select-container .j-value-container .j-search-input>input{box-sizing:content-box;background:none transparent;border:0;box-shadow:none;outline:none;padding-left:2px;cursor:default;width:100%}.j-select .j-select-container .j-value-container .j-search-input>input::-ms-clear{display:none}.j-select .j-select-container .j-value-container .j-search-input>input[readonly]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:0;padding:0}.j-select.j-select-single.j-select-filtered .j-select-container .j-value-container .j-value{visibility:hidden}.j-select.j-select-single .j-select-container .j-value-container{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-select.j-select-single .j-select-container .j-value-container .j-value{padding-left:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-select.j-select-single .j-select-container .j-value-container .j-value .j-value-icon{display:none}.j-select.j-select-single .j-select-container .j-value-container .j-search-input{top:1.2em;position:absolute;left:0;width:100%}.j-select.j-select-multiple.j-select-disabled>.j-select-container .j-value-container .j-value .j-value-icon{display:none}.j-select.j-select-multiple .j-select-container .j-value-container{flex-wrap:wrap}.j-select.j-select-multiple .j-select-container .j-value-container .j-placeholder{position:absolute}.j-select.j-select-multiple .j-select-container .j-value-container .j-value{white-space:nowrap}.j-select.j-select-multiple .j-select-container .j-value-container .j-value.j-value-disabled .j-value-icon{display:none}.j-select.j-select-multiple .j-select-container .j-value-container .j-value .j-value-icon{cursor:pointer}.j-select.j-select-multiple .j-select-container .j-value-container .j-search-input{-webkit-box-flex:1;flex:1;z-index:2}.j-select.j-select-multiple .j-select-container .j-value-container .j-placeholder{z-index:1}.j-select .j-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.j-select .j-clear-wrapper .j-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.j-select .j-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border:2px solid rgba(66,66,66,.2);border-left-color:#424242;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load8 .8s linear infinite;animation:load8 .8s linear infinite}.j-select .j-spinner-loader:after{border-radius:50%;width:17px;height:17px}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.j-select .j-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.j-select .j-arrow-wrapper .j-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:absolute}.j-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.j-dropdown-panel .j-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:300px;overflow-y:auto}.j-dropdown-panel .j-dropdown-panel-items .j-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.j-dropdown-panel .j-dropdown-panel-items .j-option{box-sizing:border-box;cursor:pointer;display:block}.j-dropdown-panel .j-dropdown-panel-items .j-option .highlighted{font-weight:700;text-decoration:underline}.j-dropdown-panel .j-dropdown-panel-items .j-option.disabled{cursor:default}.j-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch;padding-right:.5rem}.j-dropdown-panel .scroll-host::-webkit-scrollbar{width:8px}.j-dropdown-panel .scroll-host::-webkit-scrollbar-track{background:#fff}.j-dropdown-panel .scroll-host::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}.j-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.j-dropdown-panel .total-padding{width:1px;opacity:0}.j-form-field-type-select .j-form-field .j-form-field--infix{border-top:0;padding:0}.j-form-field-type-select .j-form-field-flex{display:-webkit-box;display:flex}.j-form-field-type-select .j-form-field--label-wrapper{top:0;box-sizing:border-box}.j-select:not(.j-select-filtered) .j-has-value .input-shadow{opacity:0}.j-value-container{position:relative;border:0;margin-left:.5em;margin-right:.5em;border-radius:0;background:none;padding:0;height:3.5em}.j-form-field-has-label .j-value-container{padding-top:1.7em;padding-bottom:.4em}.j-dropdown-panel{background-color:#fff;padding:1.5rem}.j-dropdown-panel.j-select-bottom{border-radius:0 0 8px 8px;margin-top:1px;box-shadow:0 14px 16px rgba(0,0,0,.05)}.j-dropdown-panel.j-select-top{border-radius:8px 8px 0 0;margin-bottom:2px;box-shadow:0 -1rem 3rem rgba(26,28,31,.175)}.j-dropdown-panel .j-option+.j-option{margin-top:.5rem}.j-value-label-default{display:block}.j-form-field-has-label .j-select.j-select-single .j-select-container .j-search-input{top:1.7em}"],encapsulation:2,changeDetection:0}),t})();var re=n("JvPu"),ce=n("wwEr"),ae=n("3v+J"),le=n("Y+uv"),be=n("/zfT"),ue=n("xWtO"),de=n("BV3K"),me=n("B+58"),pe=n("zOyH"),he=n("Cg+c"),fe=n("Dwsl"),ge=n("+uUT"),ve=n("Ya7Z"),ye=n("13E/"),Re=n("cZYL"),Ce=n("jMpN"),Te=n("ttPG"),Ae=n("vZvt"),Se=n("mCLR"),je=n("0eeg"),ke=n("Wo9y"),Ie=n("EBek"),Ve=n("570E"),Ee=n("zdqJ"),_e=n("i2Gl"),We=n("Kcpt"),Oe=n("Frqi"),Pe=n("M6pS"),xe=n("paXB"),we=n("Q98t"),Ne=n("EiG8"),De=n("4oqK"),Me=n("c66K"),Le=n("QfCG"),$e=n("oa9T"),Fe=n("SfXN"),Ue=n("H6TZ"),Ye=n("jRXw"),Be=n("2aJj"),He=n("VA2L"),Qe=n("0AMz"),Ge=n("W3Es"),Ke=n("R4CF"),qe=n("9txL"),ze=n("LXWx"),Xe=n("5I09"),Ze=n("S1F0"),Je=n("oKsb"),tn=n("fvpk"),en=n("Tile"),nn=n("aF9I"),sn=n("aZ8m"),on=n("UhoJ"),rn=n("sCra"),cn=n("fGuG"),an=n("7/bn"),ln=n("Bl/x"),bn=n("zN9f"),un=n("Kx/q"),dn=n("2FF4"),mn=n("bSvt"),pn=n("jH+I"),hn=n("4cI0"),fn=n("kUBv"),gn=n("9Udv"),vn=n("0jn5"),yn=n("fK/r"),Rn=n("Hjq/"),Cn=n("PGAL"),Tn=n("Kx0l"),An=n("gdaf"),Sn=n("LFY/"),jn=n("I+WJ"),kn=n("lABO"),In=n("hJI6"),Vn=n("JB36"),En=n("4zJ+"),_n=n("XpgD"),Wn=n("MfWJ"),On=n("B8HE"),Pn=n("DHTX"),xn=n("6goL"),wn=n("kDIH"),Nn=n("NpBu"),Dn=n("TaxS"),Mn=n("tkTF"),Ln=n("yy4r"),$n=n("wGsJ"),Fn=n("ZVDf"),Un=n("l/gM"),Yn=n("UoEe"),Bn=n("gN/K"),Hn=n("+hcb"),Qn=n("h7tf"),Gn=n("9odQ"),Kn=n("WqMH"),qn=n("3MRA"),zn=n("Zgqj"),Xn=n("oMXN"),Zn=n("rqas"),Jn=n("dnqU"),ts=n("tp+K"),es=n("saU0"),ns=n("ZF3e"),ss=n("JqCM"),is=n("qew9"),os=n("d/d6"),rs=n("e8Ap"),cs=n("Dvla"),as=n("K1R0"),ls=n("dlKe"),bs=n("DPnb"),us=n("C6g9"),ds=n("3M96"),ms=n("DHcY"),ps=n("adOO"),hs=n("Eajh"),fs=n("Ub7F"),gs=n("OHc7"),vs=n("I0Rk"),ys=n("tepA"),Rs=n("Bs9s"),Cs=n("ScFe"),Ts=n("SCaJ"),As=n("wV3k"),Ss=n("wY9W"),js=n("7Fmj"),ks=n("g1SY"),Is=n("3skF");let Vs=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},providers:[{provide:se,useValue:vt}],imports:[[s.c,u.a,o.c.forChild()]]}),t})();d.Jc(oe,[q,X,oe,ot,it,rt,ct,at,lt,bt,ut,dt,mt,pt,st,s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,re.a,ce.a,ae.a,le.a,be.a,ue.a,de.b,me.a,pe.a,he.a,fe.a,ge.a,ve.a,de.a,ye.a,Re.b,Re.a,Ce.a,Te.a,Ae.a,Se.a,je.a,ke.a,Ie.a,Ve.a,Ee.a,_e.b,We.a,Oe.a,Pe.a,xe.a,we.a,Ne.a,De.a,Me.a,Le.a,$e.a,Fe.a,Ue.a,Ye.a,Be.a,He.a,Qe.a,Ge.a,Ke.a,qe.a,ze.a,Xe.a,Ze.a,Je.a,tn.a,en.a,nn.a,sn.a,on.a,rn.a,cn.a,an.a,ln.a,bn.a,un.a,dn.a,mn.a,pn.a,hn.a,fn.a,gn.a,vn.a,yn.a,Rn.a,Cn.a,Tn.a,An.a,Sn.a,jn.a,kn.a,In.a,Vn.a,En.a,_n.a,Wn.a,On.a,Pn.a,xn.a,wn.a,Nn.a,Dn.a,Mn.a,Ln.a,$n.a,Fn.a,Un.a,Yn.a,Bn.a,Hn.a,Qn.a,Gn.b,Kn.a,qn.a,zn.a,Xn.a,Zn.a,Jn.a,ts.a,es.a,ns.a,o.a,ss.a,is.a,os.a,rs.a,c.a,r.E,r.C,cs.a,cs.b,as.a,a.a,ls.a,bs.a,bs.c,bs.b,us.a,ds.a],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m,ms.a,ps.a,hs.a,fs.a,gs.a,vs.a,ys.a,Rs.a,Cs.a,Ts.a,As.a,Ss.a,js.a,ks.a,o.b,Is.a,c.d]);var Es=n("ebvF"),_s=n("tyNb"),Ws=n("gzBp"),Os=n("FSxY"),Ps=n("gm23"),xs=n("bsP8"),ws=n("0mgW"),Ns=n("mrSG"),Ds=n("2Vo4"),Ms=n("itXk"),Ls=n("EY2u"),$s=n("LRne"),Fs=n("Cfvw"),Us=n("/uUt"),Ys=n("zp1y"),Bs=n("3E0/"),Hs=n("eIep"),Qs=n("JIr8"),Gs=n("IzEk"),Ks=n("TwVa"),qs=n("+/Tu"),zs=n("S09V"),Xs=n("SMdK"),Zs=n("SpoB"),Js=n("VnnJ"),ti=n("B1Ao"),ei=n("Kd2e");function ni(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",19),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit,i=d.lc().$implicit;return d.lc().closeModal(i,s)})),d.Wb(1,"div",20),d.Rb(2,"j-entity-logo",21),d.mc(3,"bankFromAccount"),d.Vb(),d.Wb(4,"div",22),d.Wb(5,"p",23),d.Rc(6),d.Vb(),d.Wb(7,"p",24),d.Rc(8),d.mc(9,"bankFromAccount"),d.mc(10,"bankFromAccount"),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Ab(2),d.sc("name",d.nc(3,4,t.iban)),d.Ab(4),d.Tc("\u0421\u0447\u0435\u0442: ",t.iban,""),d.Ab(2),d.Uc(" ",d.nc(9,6,t.iban),": ",d.oc(10,8,t.iban,"name")," ")}}function si(t,e){if(1&t&&(d.Wb(0,"li"),d.Wb(1,"div",15),d.Wb(2,"p",16),d.Rc(3),d.Vb(),d.Wb(4,"p",17),d.Rc(5),d.Vb(),d.Pc(6,ni,11,11,"div",18),d.Vb(),d.Vb()),2&t){const t=e.$implicit;d.Ab(3),d.Sc(t.name),d.Ab(2),d.Tc("\u0418\u0418\u041d/\u0411\u0418\u041d: ",t.iinOrBin,""),d.Ab(1),d.sc("ngForOf",t.accounts)}}function ii(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"p",25),d.Rc(2,"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),d.Vb(),d.Vb())}let oi=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.recipients=e,this.modal=n,this.collectionSize$=new Ds.a(0),this.currentPage$=new Ds.a(0),this.pageSize=10}ngOnInit(){this.recipients.getRecipients(),this.search=new i.h(""),this.list$=Object(Ms.a)([this.recipients.store.items$.pipe(Object(nt.a)(t=>t.filter(t=>!!t.accounts))),this.search.valueChanges.pipe(Object(tt.a)(100),Object(Us.a)(),Object(Z.a)(this.search.value)),this.currentPage$]).pipe(Object(nt.a)(([t,e,n])=>{const s=this.recipients.filterRecipients(t,e);return this.collectionSize$.next(s.length>this.pageSize?s.length-this.pageSize:s.length),s.slice(n>1?n*this.pageSize:0,(n+1)*this.pageSize)}))}get page(){return this.currentPage$.getValue()}set page(t){this.currentPage$.next(t)}onClose(){this.modal.dismiss()}closeModal(t,e){this.modal.close({recipient:t,account:e})}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(ti.a),d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-recipients-dictionary"]],decls:21,vars:17,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","viewBox","0 0 24 24","name","search",1,"ttext-gray","d-block","mt-n1"],["type","text","jFormInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u043a\u043e\u0434\u0443",1,"form-control",3,"formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"page","maxSize","rotate","pageSize","collectionSize","pageChange"],[1,"recipient-dict-item"],[1,"recipient-title"],[1,"small","text-gray","mb-2"],["class","account-pill account-pill_gray account-pill_fill",3,"click",4,"ngFor","ngForOf"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h5"),d.Rc(6,"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"),d.Vb(),d.Wb(7,"div",4),d.Wb(8,"j-form-field",5),d.Rb(9,"j-icon",6),d.Rb(10,"input",7),d.Vb(),d.Vb(),d.Wb(11,"div",8),d.Wb(12,"div",9),d.Wb(13,"div",10),d.Wb(14,"ul",11),d.Pc(15,si,7,3,"li",12),d.mc(16,"async"),d.Vb(),d.Pc(17,ii,3,0,"div",13),d.mc(18,"async"),d.Wb(19,"ngb-pagination",14),d.ic("pageChange",(function(t){return e.page=t})),d.mc(20,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.tc("alt",d.nc(3,9,"SHARED.CLOSE")),d.Ab(8),d.sc("formControl",e.search),d.Ab(5),d.sc("ngForOf",d.nc(16,11,e.list$)),d.Ab(2),d.sc("ngIf",0===d.nc(18,13,e.list$).length),d.Ab(2),d.sc("page",e.page)("maxSize",5)("rotate",!0)("pageSize",e.pageSize)("collectionSize",d.nc(20,15,e.collectionSize$)))},directives:[De.a,We.a,$e.a,Be.a,i.c,i.t,i.i,s.t,s.u,r.u,bn.a],pipes:[c.d,s.b,hs.a],styles:[".recipient-dict-item{padding:1rem 0}.recipient-dict-item .recipient-title{font-weight:500;font-size:16px}.recipient-dict-item .account-pill{margin-top:.5rem}.recipient-dict-item p{margin-bottom:.5em;line-height:1.4}"],encapsulation:2}),t})();var ri=n("bHA9");function ci(t,e){if(1&t){const t=d.Xb();d.Wb(0,"li",14),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc().closeModal(s)})),d.Wb(1,"div",15),d.Rc(2),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Ab(2),d.Sc(t.label)}}function ai(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"p",16),d.Rc(2,"\u041a\u041d\u041f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),d.Vb(),d.Vb())}let li=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.dictionaries=e,this.modal=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(Ms.a)([this.dictionaries.KNPDictionary.items$,this.search.valueChanges.pipe(Object(tt.a)(100),Object(Us.a)(),Object(Z.a)(this.search.value))]).pipe(Object(nt.a)(([t,e])=>this.paymentType?this.dictionaries.selectByPaymentType(t,{type:this.paymentType}).filter(t=>this.paymentsS.genericSearchTerm(e,t)).sort((t,e)=>t.code>e.code?1:-1):t.filter(t=>this.paymentsS.genericSearchTerm(e,t)).sort((t,e)=>t.code>e.code?1:-1)))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(ri.a),d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-knp-dictionary"]],inputs:{paymentType:"paymentType"},decls:18,vars:7,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u043a\u043e\u0434\u0443",1,"form-control",3,"formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(2,"img",2),d.Vb(),d.Wb(3,"div",3),d.Wb(4,"h5"),d.Rc(5,"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"),d.Vb(),d.Wb(6,"div",4),d.Wb(7,"j-form-field",5),d.Rb(8,"j-icon",6),d.Rb(9,"input",7),d.Vb(),d.Vb(),d.Wb(10,"div",8),d.Wb(11,"div",9),d.Wb(12,"div",10),d.Wb(13,"ul",11),d.Pc(14,ci,3,1,"li",12),d.mc(15,"async"),d.Vb(),d.Pc(16,ai,3,0,"div",13),d.mc(17,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(9),d.sc("formControl",e.search),d.Ab(5),d.sc("ngForOf",d.nc(15,3,e.list$)),d.Ab(2),d.sc("ngIf",0===d.nc(17,5,e.list$).length))},directives:[De.a,We.a,$e.a,Be.a,i.c,i.t,i.i,s.t,s.u],pipes:[s.b],styles:[""],encapsulation:2}),t})();function bi(t,e){if(1&t){const t=d.Xb();d.Wb(0,"li",14),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc().closeModal(s)})),d.Wb(1,"p",15),d.Rc(2),d.Vb(),d.Wb(3,"p",16),d.Rc(4),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Ab(2),d.Sc(t.label),d.Ab(2),d.Tc("\u0411\u0418\u041d: ",t.bin,"")}}function ui(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"p",17),d.Rc(2,"\u0423\u0413\u0414 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),d.Vb(),d.Vb())}let di=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.dictionaries=e,this.modal=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(Ms.a)(this.dictionaries.UGDictionary.items$,this.search.valueChanges.pipe(Object(tt.a)(100),Object(Us.a)(),Object(Z.a)(this.search.value))).pipe(Object(nt.a)(([t,e])=>t.filter(t=>this.paymentsS.ugdSearchFn(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(ri.a),d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-ugd-dictionary"]],decls:19,vars:10,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u043a\u043e\u0434\u0443",1,"form-control",3,"formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,"m-0","text-wrap"],[1,"p3","text-gray","m-0"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h5"),d.Rc(6,"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, \u043a\u043e\u0434\u0443 \u0438 \u0411\u0418\u041d-\u0443 \u0423\u0413\u0414"),d.Vb(),d.Wb(7,"div",4),d.Wb(8,"j-form-field",5),d.Rb(9,"j-icon",6),d.Rb(10,"input",7),d.Vb(),d.Vb(),d.Wb(11,"div",8),d.Wb(12,"div",9),d.Wb(13,"div",10),d.Wb(14,"ul",11),d.Pc(15,bi,5,2,"li",12),d.mc(16,"async"),d.Vb(),d.Pc(17,ui,3,0,"div",13),d.mc(18,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.tc("alt",d.nc(3,4,"SHARED.CLOSE")),d.Ab(8),d.sc("formControl",e.search),d.Ab(5),d.sc("ngForOf",d.nc(16,6,e.list$)),d.Ab(2),d.sc("ngIf",0===d.nc(18,8,e.list$).length))},directives:[De.a,We.a,$e.a,Be.a,i.c,i.t,i.i,s.t,s.u],pipes:[c.d,s.b],styles:[""],encapsulation:2}),t})();var mi=n("HghS");function pi(t,e){if(1&t){const t=d.Xb();d.Wb(0,"li",14),d.Wb(1,"div",15),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc().closeModal(s)})),d.Wb(2,"div",16),d.Rb(3,"j-entity-logo",17),d.Vb(),d.Wb(4,"div",18),d.Wb(5,"p",19),d.Rc(6),d.Vb(),d.Wb(7,"p",20),d.Rc(8),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Ab(3),d.sc("name",t.bic),d.Ab(3),d.Sc(t.salaryTransitIban?"\u0421\u0447\u0435\u0442: "+t.salaryTransitIban:t.name),d.Ab(2),d.Uc("",t.bic,": ",t.name,"")}}function hi(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"p",21),d.Rc(2,"\u0411\u0430\u043d\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),d.Vb(),d.Vb())}let fi=(()=>{class t{constructor(t,e,n){this.modal=t,this.paymentsS=e,this.dict=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(Ms.a)(this.dict.bankDictionary.items$,this.search.valueChanges.pipe(Object(tt.a)(100),Object(Us.a)(),Object(Z.a)(this.search.value))).pipe(Object(nt.a)(([t,e])=>t.filter(t=>this.paymentsS.bankReceiverSearchFn(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(r.a),d.Qb(ws.c),d.Qb(ri.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-banks-receivers"]],decls:19,vars:10,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, IBAN \u0438\u043b\u0438 \u0411\u0418\u041a-\u0443",1,"form-control",3,"formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-2"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h5"),d.Rc(6,"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, IBAN \u0438 \u0411\u0418\u041a-\u0443"),d.Vb(),d.Wb(7,"div",4),d.Wb(8,"j-form-field",5),d.Rb(9,"j-icon",6),d.Rb(10,"input",7),d.Vb(),d.Vb(),d.Wb(11,"div",8),d.Wb(12,"div",9),d.Wb(13,"div",10),d.Wb(14,"ul",11),d.Pc(15,pi,9,4,"li",12),d.mc(16,"async"),d.Vb(),d.Pc(17,hi,3,0,"div",13),d.mc(18,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.tc("alt",d.nc(3,4,"SHARED.CLOSE")),d.Ab(8),d.sc("formControl",e.search),d.Ab(5),d.sc("ngForOf",d.nc(16,6,e.list$)),d.Ab(2),d.sc("ngIf",!d.nc(18,8,e.list$)))},directives:[De.a,We.a,$e.a,Be.a,i.c,i.t,i.i,s.t,s.u,bn.a],pipes:[c.d,s.b],styles:[""]}),t})();function gi(t,e){if(1&t){const t=d.Xb();d.Wb(0,"li",14),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc().closeModal(s)})),d.Wb(1,"div",15),d.Rc(2),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Ab(2),d.Sc(t.label||t.description)}}function vi(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"p",16),d.Rc(2,"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b"),d.Vb(),d.Vb())}let yi=(()=>{class t{constructor(t,e){this.paymentsS=t,this.modal=e,this.searchPlaceholder="\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u043a\u043e\u0434\u0443",this.title="\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"}ngOnInit(){this.search=new i.h(""),this.list$=Object(Ms.a)(this.store.items$,this.search.valueChanges.pipe(Object(tt.a)(100),Object(Us.a)(),Object(Z.a)(this.search.value))).pipe(Object(nt.a)(([t,e])=>t.filter(t=>this.searchFn?this.searchFn(e,t):this.paymentsS.genericSearchTerm(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-generic-dictionary"]],inputs:{store:"store",searchFn:"searchFn",searchPlaceholder:"searchPlaceholder",title:"title"},decls:19,vars:11,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u043a\u043e\u0434\u0443",1,"form-control",3,"formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"button",1),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(2,"img",2),d.mc(3,"translate"),d.Vb(),d.Wb(4,"div",3),d.Wb(5,"h5"),d.Rc(6),d.Vb(),d.Wb(7,"div",4),d.Wb(8,"j-form-field",5),d.Rb(9,"j-icon",6),d.Rb(10,"input",7),d.Vb(),d.Vb(),d.Wb(11,"div",8),d.Wb(12,"div",9),d.Wb(13,"div",10),d.Wb(14,"ul",11),d.Pc(15,gi,3,1,"li",12),d.mc(16,"async"),d.Vb(),d.Pc(17,vi,3,0,"div",13),d.mc(18,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(2),d.tc("alt",d.nc(3,5,"SHARED.CLOSE")),d.Ab(4),d.Sc(e.title),d.Ab(4),d.sc("formControl",e.search),d.Ab(5),d.sc("ngForOf",d.nc(16,7,e.list$)),d.Ab(2),d.sc("ngIf",0===d.nc(18,9,e.list$).length))},directives:[De.a,We.a,$e.a,Be.a,i.c,i.t,i.i,s.t,s.u],pipes:[c.d,s.b],styles:[""],encapsulation:2}),t})();var Ri=n("Stn5");let Ci=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Kb({type:t,selectors:[["j-bic-info"]],decls:15,vars:0,consts:[[1,"p4"]],template:function(t,e){1&t&&(d.Wb(0,"article",0),d.Wb(1,"p"),d.Wb(2,"strong"),d.Rc(3," SWIFT \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 11 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0415\u0441\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u043e 8-\u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0432 \u043a\u043e\u043d\u0446\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0425\u0425\u0425 "),d.Vb(),d.Vb(),d.Wb(4,"p"),d.Rc(5," \u041f\u0440\u0438\u043c\u0435\u0440: "),d.Rb(6,"br"),d.Rc(7," \u2022 COBADEFFXXX - COMMERZBANK AG "),d.Vb(),d.Wb(8,"p"),d.Wb(9,"strong"),d.Rc(10," BIC \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 9 \u0446\u0438\u0444\u0440 "),d.Vb(),d.Vb(),d.Wb(11,"p"),d.Rc(12," \u041f\u0440\u0438\u043c\u0435\u0440: "),d.Rb(13,"br"),d.Rc(14," \u2022 044525225 - \u0410\u041e \u0421\u0431\u0435\u0440\u0431\u0430\u043d\u043a "),d.Vb(),d.Vb())},styles:[""]}),t})(),Ti=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Kb({type:t,selectors:[["j-iban-info"]],decls:4,vars:0,consts:[["translate","",1,"p2","font-weight-medium"],["translate","",1,"p4"]],template:function(t,e){1&t&&(d.Wb(0,"p",0),d.Rc(1,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.TITLE"),d.Vb(),d.Wb(2,"p",1),d.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.DESCRIPTION"),d.Vb())},directives:[c.a],styles:[""]}),t})();var Ai=n("quSY"),Si=n("O/Ur");const ji=["input"],ki=function(){return{width:"100%",height:"56px","background-color":"#ECEEF1"}};function Ii(t,e){1&t&&(d.Wb(0,"div",7),d.Rb(1,"ngx-skeleton-loader",8),d.Vb()),2&t&&(d.Ab(1),d.sc("theme",d.wc(1,ki)))}function Vi(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",10),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc(2).onBankSelect(s)})),d.Rc(1),d.Vb()}if(2&t){const t=e.$implicit,n=d.lc(2);d.Ab(1),d.Tc(" ",n.mapBankLabel(t)," ")}}function Ei(t,e){if(1&t&&(d.Wb(0,"div",7),d.Pc(1,Vi,2,1,"div",9),d.Vb()),2&t){const t=d.lc();d.Ab(1),d.sc("ngForOf",t.banks)}}function _i(t,e){1&t&&(d.Ub(0),d.Rb(1,"j-empty-placeholder",13),d.Tb())}function Wi(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate")),2&t){const t=d.lc(2);d.Tc(" ",d.nc(1,1,t.placeholderText)," ")}}function Oi(t,e){if(1&t&&(d.Wb(0,"div",7),d.Pc(1,_i,2,0,"ng-container",11),d.Pc(2,Wi,2,3,"ng-template",null,12,d.Qc),d.Vb()),2&t){const t=d.Dc(3),e=d.lc();d.Ab(1),d.sc("ngIf",(null==e.labelControl?null:null==e.labelControl.value?null:e.labelControl.value.length)>0)("ngIfElse",t)}}function Pi(t,e){1&t&&d.Rb(0,"j-bic-info")}let xi=(()=>{class t{constructor(t){this.currencyPaymentService=t,this.labelText="CURRENCY_PAYMENT.RECIPIENT.BIC",this.placeholderText="CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED",this.isLoading=!1,this.isBicFocused=!1,this.subscription=new Ai.a}selectByBic(t){return Object(Ns.a)(this,void 0,void 0,(function*(){yield this.retrieveBanks(t);const e=this.banks.find(e=>e.bic==t);if(e)return this.onBankSelect(e)}))}ngOnInit(){this.listenBankSearch()}ngOnDestroy(){this.subscription.unsubscribe()}focus(){setTimeout(()=>{this.input.nativeElement.focus()},100)}onBicFocus(t){this.isBicFocused=!0,this.labelControl.setValue(""),this.banks=[]}onBicBlur(t){setTimeout(()=>{this.isBicFocused=!1},300)}mapBankLabel(t){return`${t.bic} - ${t.name}`}onBankSelect(t){this.labelControl.setValue(this.mapBankLabel(t),{emitEvent:!1}),this.bankControl.setValue(t)}listenBankSearch(){var t;this.subscription.add(null===(t=this.labelControl)||void 0===t?void 0:t.valueChanges.pipe(Object(tt.a)(300)).pipe(Object(Us.a)()).subscribe(t=>{var e;(null===(e=t)||void 0===e?void 0:e.length)>=1&&this.retrieveBanks(t,this.countryCode)}))}retrieveBanks(t,e=null){var n;return Object(Ns.a)(this,void 0,void 0,(function*(){this.isLoading=!0;const s=(null===(n=e)||void 0===n?void 0:n.substring(0,2))||null;try{this.banks=yield this.currencyPaymentService.getBanks(t,s)}catch(i){}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(Si.b))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-foreign-bank-select"]],viewQuery:function(t,e){var n;1&t&&d.Wc(ji,!0),2&t&&d.Cc(n=d.jc())&&(e.input=n.first)},inputs:{labelControl:"labelControl",bankControl:"bankControl",countryCode:"countryCode",errorMessages:"errorMessages",labelText:"labelText",placeholderText:"placeholderText"},decls:14,vars:14,consts:[["type","text","jFormInput","","jFocusOnReturn","",1,"form-control","bic-input",3,"formControl","focus","blur"],["input",""],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-medium","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[3,"control","errorMessages"],[1,"bic-dropdown",3,"hidden"],["class","bic-dropdown-body",4,"ngIf"],["bicInfo",""],[1,"bic-dropdown-body"],["count","4",3,"theme"],["class","j-option-label text-wrap",3,"click",4,"ngFor","ngForOf"],[1,"j-option-label","text-wrap",3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],["label","SHARED.SEARCH_NOT_FOUND"]],template:function(t,e){if(1&t&&(d.Wb(0,"j-form-field"),d.Wb(1,"j-label"),d.Rc(2),d.mc(3,"translate"),d.Vb(),d.Wb(4,"input",0,1),d.ic("focus",(function(t){return e.onBicFocus(t)}))("blur",(function(t){return e.onBicBlur(t)})),d.Vb(),d.Rb(6,"a",2),d.Rb(7,"j-error",3),d.Vb(),d.Wb(8,"div",4),d.Pc(9,Ii,2,2,"div",5),d.Pc(10,Ei,2,1,"div",5),d.Pc(11,Oi,4,2,"div",5),d.Vb(),d.Pc(12,Pi,1,0,"ng-template",null,6,d.Qc)),2&t){const t=d.Dc(13);d.Ab(2),d.Sc(d.nc(3,12,e.labelText)),d.Ab(2),d.Hb("has-dropdown",null==e.banks?null:e.banks.length),d.sc("formControl",e.labelControl),d.Ab(2),d.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(1),d.sc("control",e.labelControl)("errorMessages",e.errorMessages),d.Ab(1),d.sc("hidden",!e.isBicFocused),d.Ab(1),d.sc("ngIf",e.isLoading),d.Ab(1),d.sc("ngIf",!e.isLoading&&(null==e.banks?null:e.banks.length)),d.Ab(1),d.sc("ngIf",!(e.isLoading||null!=e.banks&&e.banks.length))}},directives:[De.a,Le.a,Be.a,i.c,de.a,i.t,i.i,Fe.a,r.E,rs.a,Ye.a,s.u,a.a,s.t,hn.a,Ci],pipes:[c.d],styles:["[_nghost-%COMP%]{display:block;position:relative}.bic-dropdown[_ngcontent-%COMP%]{border-radius:0 8px 8px 0;left:0;right:0;padding:1.5rem;background:#fff;position:absolute;max-height:300px;height:30vh;z-index:1000;box-shadow:0 14px 16px rgba(0,0,0,.05)}.bic-dropdown[_ngcontent-%COMP%]   .j-option-label[_ngcontent-%COMP%]{cursor:pointer}.bic-input.has-dropdown[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.bic-dropdown-body[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;height:100%;overflow-y:auto;padding-right:.5rem}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}"]}),t})();function wi(t,e){if(1&t&&(d.Wb(0,"div",32),d.Rc(1),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.Sc(t.primaryRecipient.name)}}function Ni(t,e){if(1&t&&(d.Wb(0,"div",26),d.Wb(1,"div",27),d.Wb(2,"span",28),d.Rc(3,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CONTRACT_TYPE"),d.Vb(),d.Rc(4,": "),d.Vb(),d.Wb(5,"div",29),d.Rc(6),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(6),d.Tc(" ",t.contract.type.description," ")}}function Di(t,e){if(1&t&&(d.Wb(0,"div",26),d.Wb(1,"div",27),d.Wb(2,"span",28),d.Rc(3,"CONTRACTS.DETAILS.UNK"),d.Vb(),d.Rc(4,": "),d.Vb(),d.Wb(5,"div",29),d.Rc(6),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(6),d.Tc(" ",t.contract.registrationNumberContract," ")}}function Mi(t,e){if(1&t&&(d.Wb(0,"div",26),d.Wb(1,"div",27),d.Wb(2,"span",28),d.Rc(3,"CONTRACTS.DETAILS.UNK_DATE"),d.Vb(),d.Rc(4,": "),d.Vb(),d.Wb(5,"div",29),d.Rc(6),d.mc(7,"date"),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(6),d.Tc(" ",d.oc(7,1,t.contract.documentDate,"d MMMM yyyy")," ")}}function Li(t,e){1&t&&(d.Wb(0,"span"),d.Rc(1," 1"),d.Vb())}function $i(t,e){if(1&t&&(d.Wb(0,"section",20),d.Wb(1,"j-collapsible"),d.Wb(2,"j-collapsible-trigger"),d.Wb(3,"div",21),d.Wb(4,"h5",11),d.Wb(5,"span",28),d.Rc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),d.Vb(),d.Pc(7,Li,2,0,"span",33),d.Vb(),d.Rb(8,"span",23),d.Vb(),d.Vb(),d.Wb(9,"j-collapsible-body"),d.Wb(10,"div",24),d.Wb(11,"div",26),d.Wb(12,"div",27),d.Wb(13,"span",28),d.Rc(14,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),d.Vb(),d.Rc(15,": "),d.Vb(),d.Wb(16,"div",29),d.Rc(17),d.Vb(),d.Vb(),d.Wb(18,"div",26),d.Wb(19,"div",27),d.Wb(20,"span",28),d.Rc(21,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),d.Vb(),d.Rc(22,": "),d.Vb(),d.Wb(23,"div",29),d.Rc(24),d.Vb(),d.Vb(),d.Wb(25,"div",26),d.Wb(26,"div",27),d.Wb(27,"span",28),d.Rc(28,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.CITY"),d.Vb(),d.Rc(29,": "),d.Vb(),d.Wb(30,"div",29),d.Rc(31),d.Vb(),d.Vb(),d.Wb(32,"div",26),d.Wb(33,"div",27),d.Wb(34,"span",28),d.Rc(35,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.BANK"),d.Vb(),d.Rc(36,": "),d.Vb(),d.Wb(37,"div",29),d.Rc(38),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(7),d.sc("ngIf",(null==t.extraRecipients?null:t.extraRecipients.length)>0),d.Ab(10),d.Tc(" ",t.primaryRecipient.name," "),d.Ab(7),d.Tc(" ",t.mapCountry(t.primaryRecipient)," "),d.Ab(7),d.Tc(" ",t.primaryRecipient.cityName||t.primaryRecipient.defaultCityName||"-"," "),d.Ab(7),d.Tc(" ",t.mapBank(t.primaryRecipient)," ")}}function Fi(t,e){if(1&t&&(d.Wb(0,"section",20),d.Wb(1,"j-collapsible"),d.Wb(2,"j-collapsible-trigger"),d.Wb(3,"div",21),d.Wb(4,"h5",11),d.Wb(5,"span",28),d.Rc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),d.Vb(),d.Wb(7,"span"),d.Rc(8),d.Vb(),d.Vb(),d.Rb(9,"span",23),d.Vb(),d.Vb(),d.Wb(10,"j-collapsible-body"),d.Wb(11,"div",24),d.Wb(12,"div",26),d.Wb(13,"div",27),d.Wb(14,"span",28),d.Rc(15,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),d.Vb(),d.Rc(16,": "),d.Vb(),d.Wb(17,"div",29),d.Rc(18),d.Vb(),d.Vb(),d.Wb(19,"div",26),d.Wb(20,"div",27),d.Wb(21,"span",28),d.Rc(22,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),d.Vb(),d.Rc(23,": "),d.Vb(),d.Wb(24,"div",29),d.Rc(25),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){const t=e.$implicit,n=e.index,s=d.lc(2);d.Ab(8),d.Tc(" ",n+2,""),d.Ab(10),d.Tc(" ",t.name," "),d.Ab(7),d.Tc(" ",s.mapCountry(t)," ")}}function Ui(t,e){if(1&t){const t=d.Xb();d.Wb(0,"section",1),d.Wb(1,"div",2),d.ic("click",(function(e){return d.Gc(t),d.lc().close()})),d.Vb(),d.Wb(2,"section",3),d.Wb(3,"section",4),d.Wb(4,"article",5),d.Rb(5,"span",6),d.Wb(6,"span",7),d.Rc(7,"CURRENCY_PAYMENT.CONTRACTS.STATUS.REGED"),d.Vb(),d.Vb(),d.Wb(8,"a",8),d.ic("click",(function(e){return d.Gc(t),d.lc().close(e)})),d.Vb(),d.Vb(),d.Wb(9,"section",9),d.Wb(10,"section",10),d.Wb(11,"h3",11),d.Wb(12,"span",12),d.Rc(13,"\u2116"),d.Vb(),d.Rc(14),d.Vb(),d.Pc(15,wi,2,1,"div",13),d.Wb(16,"div",14),d.Wb(17,"div",15),d.Rb(18,"small",16),d.Wb(19,"div",17),d.Rb(20,"j-money",18),d.Vb(),d.Vb(),d.Wb(21,"div",15),d.Rb(22,"small",19),d.Wb(23,"div",17),d.Rb(24,"j-money",18),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(25,"section",20),d.Wb(26,"j-collapsible"),d.Wb(27,"j-collapsible-trigger"),d.Wb(28,"div",21),d.Wb(29,"h5",22),d.Rc(30,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.TITLE"),d.Vb(),d.Rb(31,"span",23),d.Vb(),d.Vb(),d.Wb(32,"j-collapsible-body"),d.Wb(33,"div",24),d.Pc(34,Ni,7,1,"div",25),d.Wb(35,"div",26),d.Wb(36,"div",27),d.Wb(37,"span",28),d.Rc(38,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_FROM"),d.Vb(),d.Rc(39,": "),d.Vb(),d.Wb(40,"div",29),d.Rc(41),d.mc(42,"date"),d.Vb(),d.Vb(),d.Wb(43,"div",26),d.Wb(44,"div",27),d.Wb(45,"span",28),d.Rc(46,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_TO"),d.Vb(),d.Rc(47,": "),d.Vb(),d.Wb(48,"div",29),d.Rc(49),d.mc(50,"date"),d.Vb(),d.Vb(),d.Pc(51,Di,7,1,"div",25),d.Pc(52,Mi,8,4,"div",25),d.Wb(53,"div",26),d.Wb(54,"div",27),d.Wb(55,"span",28),d.Rc(56,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CURRENCIES"),d.Vb(),d.Rc(57,": "),d.Vb(),d.Wb(58,"div",29),d.Rc(59),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Pc(60,$i,39,5,"section",30),d.Pc(61,Fi,26,3,"section",31),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=d.lc();d.Hb("is-shown",t.isShown),d.Ab(2),d.Hb("is-shown",t.isShown),d.Ab(3),d.sc("inlineSVG","/assets/icons/counterparty/status.svg"),d.Ab(9),d.Tc(" ",t.contract.contractNumber," "),d.Ab(1),d.sc("ngIf",0==(null==t.extraRecipients?null:t.extraRecipients.length)),d.Ab(5),d.sc("money",t.contract.amount),d.Ab(4),d.sc("money",t.contract.remainder),d.Ab(10),d.sc("ngIf",t.contract.type),d.Ab(7),d.Tc("",d.oc(42,17,t.contract.dateFrom,"d MMMM yyyy")," "),d.Ab(8),d.Tc("",d.oc(50,20,t.contract.dateTo,"d MMMM yyyy")," "),d.Ab(2),d.sc("ngIf",t.contract.registrationNumberContract),d.Ab(1),d.sc("ngIf",t.contract.documentDate),d.Ab(7),d.Tc("",t.contract.permittedCurrencies.join(", ")," "),d.Ab(1),d.sc("ngIf",t.primaryRecipient),d.Ab(1),d.sc("ngForOf",t.extraRecipients)}}let Yi=(()=>{class t{constructor(t,e){this.document=t,this.translateService=e,this.isShown=!1}get primaryRecipient(){var t;return null===(t=this.contract.recipients)||void 0===t?void 0:t.find(t=>t.primary)}get extraRecipients(){var t;return null===(t=this.contract.recipients)||void 0===t?void 0:t.filter(t=>!t.primary)}mapBank(t){const{bankBic:e,bankName:n}=t;return`${e}${e?n?`- ${n}`:"":n||""}`}mapCountry(t){var e,n,s,i;if(t.country){const i=t.country.code;let o="";switch(this.translateService.currentLang){case"ru":default:o=null===(e=t.country)||void 0===e?void 0:e.nameRu;case"kz":o=null===(n=t.country)||void 0===n?void 0:n.nameKk;case"en":o=null===(s=t.country)||void 0===s?void 0:s.nameEn}return`${i} - ${o}`}return t.primary&&(null===(i=this.contract.contractor)||void 0===i?void 0:i.country)?`${this.contract.contractor.country.code} - ${this.contract.contractor.country.name}`:t.countryCode?t.countryCode:"-"}ngOnDestroy(){this.close()}show(){this.document.body.classList.add("overflow-hidden"),this.isShown=!0}close(t=null){var e;null===(e=t)||void 0===e||e.preventDefault(),this.document.body.classList.remove("overflow-hidden"),this.isShown=!1}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(s.e),d.Qb(c.e))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-fx-contract-details"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","f-page-wrapper",3,"is-shown",4,"ngIf"],[1,"f-page-wrapper"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","fx"],[1,"fx__header"],[1,"fx__status"],[1,"text-success",3,"inlineSVG"],["translate","",1,"text-muted","ml-3","p3"],["href","#","inlineSVG","assets/icons/payments/close.svg",1,"fx__close","ml-auto",3,"click"],[1,"fx__scrollable"],[1,"fx__block","py-3","mt-0"],[1,"mb-0"],[1,"text-light"],["class","p2",4,"ngIf"],[1,"fx__amounts"],[1,"fx__amounts-item"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.AMOUNT",1,"text-muted"],[1,"text-dark"],[3,"money"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.REMAINDER",1,"text-muted","p4"],[1,"fx__block","fx__block--collapsible"],[1,"fx__collapse","d-flex","align-items-center"],["translate","",1,"mb-0"],["inlineSVG","assets/icons/payments/collapse.svg",1,"ml-auto","text-primary","fx__arrow"],[1,"fx__body","p2"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],[1,"text-muted","j-desc-child"],["translate",""],[1,"text-dark","j-desc-child"],["class","fx__block fx__block--collapsible",4,"ngIf"],["class","fx__block fx__block--collapsible",4,"ngFor","ngForOf"],[1,"p2"],[4,"ngIf"]],template:function(t,e){1&t&&d.Pc(0,Ui,62,23,"section",0),2&t&&d.sc("ngIf",e.contract)},directives:[s.u,rs.a,c.a,un.a,yn.a,Cn.a,Rn.a,s.t],pipes:[s.f],styles:[".fx{padding:1rem;width:100%;max-width:425px}.fx__header{-webkit-box-pack:justify;justify-content:space-between;margin-top:.5rem;margin-bottom:1.5rem}.fx__header,.fx__status{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.fx__status{padding-left:1rem}.fx__scrollable{-webkit-box-flex:1;flex-grow:1;overflow-y:auto}.fx__scrollable::-webkit-scrollbar{width:8px}.fx__scrollable::-webkit-scrollbar-track{background:#fff}.fx__scrollable::-webkit-scrollbar-thumb{background:#d6dadf;border-radius:10px}.fx__collapse{padding:1rem 0}.j-collapsed .fx__body{padding-bottom:1rem}.j-collapsed .fx__collapse .fx__arrow{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.fx__block{background:#fff;border-radius:.5rem;padding:1.5rem 1rem;margin:.75rem 0}.fx__block--collapsible{padding-top:0;padding-bottom:0}.fx__arrow,.fx__block--collapsible{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.fx__arrow{-webkit-transform:rotate(540deg);transform:rotate(540deg)}.fx__collapse{cursor:pointer;-webkit-box-align:center;align-items:center}.fx__link{color:#1586bb;display:-webkit-box;display:flex;padding-left:1rem;padding-right:1rem;width:100%}.fx__link:hover{color:#ef5630}.fx__icon{margin-right:.5rem;display:block}.fx__amounts{display:-webkit-box;display:flex;border-top:1px solid #eceef1;margin-top:1.5rem;padding-top:1rem}.fx__amounts-item{-webkit-box-flex:1;flex-grow:1}.fx__amounts-item small{display:block;margin-bottom:.25rem}"],encapsulation:2}),t})();function Bi(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",4),d.ic("click",(function(n){d.Gc(t);const s=e.$implicit;return d.lc().onSelect(s)})),d.Wb(1,"div",5),d.Rb(2,"span",6),d.Rc(3,": "),d.Rb(4,"span",7),d.mc(5,"highlight"),d.mc(6,"formatIban"),d.Vb(),d.Wb(7,"div",8),d.Rb(8,"span",7),d.mc(9,"highlight"),d.Rc(10,": "),d.Rb(11,"span",7),d.mc(12,"highlight"),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit,n=d.lc();d.Ab(4),d.sc("innerHTML",d.oc(5,3,d.nc(6,6,t.iban),n.searchTerm),d.Hc),d.Ab(4),d.sc("innerHTML",d.oc(9,8,t.bic,n.searchTerm),d.Hc),d.Ab(3),d.sc("innerHTML",d.oc(12,11,t.bankName,n.searchTerm),d.Hc)}}let Hi=(()=>{class t{constructor(t){this.translateService=t,this.selected=new d.n}get countryName(){var t,e,n,s,i,o;switch(this.translateService.currentLang){case"ru":default:return null===(e=null===(t=this.recipient)||void 0===t?void 0:t.country)||void 0===e?void 0:e.nameRu;case"kz":return null===(s=null===(n=this.recipient)||void 0===n?void 0:n.country)||void 0===s?void 0:s.nameKk;case"en":return null===(o=null===(i=this.recipient)||void 0===i?void 0:i.country)||void 0===o?void 0:o.nameEn}}onSelect(t){this.selected.emit({recipient:this.recipient,account:t})}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(c.e))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-foreign-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:6,vars:9,consts:[[1,"recipient"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],[1,"text-muted","p3","recipient__country",3,"innerHTML"],["class","recipient__account p3",3,"click",4,"ngFor","ngForOf"],[1,"recipient__account","p3",3,"click"],[1,"text-dark"],["translate","CURRENCY_PAYMENT.DICTIONARY.IBAN"],[3,"innerHTML"],[1,"text-muted"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Rb(1,"h5",1),d.mc(2,"highlight"),d.Rb(3,"div",2),d.mc(4,"highlight"),d.Pc(5,Bi,13,14,"div",3),d.Vb()),2&t&&(d.Ab(1),d.sc("innerHTML",d.oc(2,3,e.recipient.name,e.searchTerm),d.Hc),d.Ab(2),d.sc("innerHTML",d.oc(4,6,e.countryName,e.searchTerm),d.Hc),d.Ab(2),d.sc("ngForOf",e.recipient.accounts))},directives:[s.t,c.a],pipes:[Ts.a,ys.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();function Qi(t,e){1&t&&d.Rb(0,"j-empty-placeholder",9)}function Gi(t,e){1&t&&d.Rb(0,"j-empty-placeholder",10)}function Ki(t,e){if(1&t){const t=d.Xb();d.Wb(0,"j-foreign-recipient",11),d.ic("selected",(function(e){return d.Gc(t),d.lc().onRecipientSelect(e)})),d.Vb()}if(2&t){const t=e.$implicit,n=d.lc();d.sc("recipient",t)("searchTerm",n.searchTerm)}}let qi=(()=>{class t{constructor(t,e){this.modal=t,this.recipientsService=e,this.searchTerm="",this.loadRecipients()}ngOnInit(){}loadRecipients(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.recipients=yield this.recipientsService.getForeignRecipients(),this.filteredRecipients=[...this.recipients]}))}onQueryChange(t){return Object(Ns.a)(this,void 0,void 0,(function*(){this.searchTerm=t,this.filteredRecipients=yield this.recipientsService.getForeignRecipients(t)}))}onRecipientSelect(t){this.modal.close(t)}onClose(){this.modal.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(r.a),d.Qb(ti.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-foreign-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Rb(2,"h5",2),d.Wb(3,"div",3),d.Wb(4,"j-search-input",4),d.ic("valueChanged",(function(t){return e.onQueryChange(t)})),d.Vb(),d.Vb(),d.Vb(),d.Pc(5,Qi,1,0,"j-empty-placeholder",5),d.Pc(6,Gi,1,0,"j-empty-placeholder",6),d.Wb(7,"div",7),d.Pc(8,Ki,1,2,"j-foreign-recipient",8),d.Vb(),d.Vb()),2&t&&(d.Ab(4),d.sc("placeholder","CURRENCY_PAYMENT.DICTIONARY.SEARCH"),d.Ab(1),d.sc("ngIf",0==(null==e.recipients?null:e.recipients.length)),d.Ab(1),d.sc("ngIf",(null==e.recipients?null:e.recipients.length)>0&&0==(null==e.filteredRecipients?null:e.filteredRecipients.length)),d.Ab(2),d.sc("ngForOf",e.filteredRecipients))},directives:[c.a,Yn.a,s.u,s.t,hn.a,Hi],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();var zi=n("q46q");function Xi(t,e){if(1&t&&(d.Rb(0,"div",3),d.mc(1,"highlight")),2&t){const t=d.lc();d.sc("innerHTML",d.oc(1,1,t.bic,t.searchTerm),d.Hc)}}let Zi=(()=>{class t{constructor(){this.selected=new d.n}get bic(){if(this.recipient.bankBic&&this.recipient.bankName)return`${this.recipient.bankBic} - ${this.recipient.bankName}`}onSelect(){this.selected.emit(this.recipient)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Kb({type:t,selectors:[["j-foreign-contracts-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:4,vars:5,consts:[[1,"recipient__account","p3","mt-3","pt-3",3,"click"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],["class","text-muted p3 recipient__country mb-0",3,"innerHTML",4,"ngIf"],[1,"text-muted","p3","recipient__country","mb-0",3,"innerHTML"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.ic("click",(function(t){return e.onSelect()})),d.Rb(1,"h5",1),d.mc(2,"highlight"),d.Pc(3,Xi,2,4,"div",2),d.Vb()),2&t&&(d.Ab(1),d.sc("innerHTML",d.oc(2,2,e.recipient.name,e.searchTerm),d.Hc),d.Ab(2),d.sc("ngIf",e.bic))},directives:[s.u],pipes:[Ts.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();function Ji(t,e){1&t&&d.Rb(0,"j-empty-placeholder",9)}function to(t,e){1&t&&d.Rb(0,"j-empty-placeholder",10)}function eo(t,e){if(1&t){const t=d.Xb();d.Wb(0,"j-foreign-contracts-recipient",11),d.ic("selected",(function(e){return d.Gc(t),d.lc().onRecipientSelect(e)})),d.Vb()}if(2&t){const t=e.$implicit,n=d.lc();d.sc("recipient",t)("searchTerm",n.searchTerm)}}let no=(()=>{class t{constructor(t){this.modal=t,this.searchTerm=""}ngOnInit(){this.filteredRecipients=[...this.recipients]}onQueryChange(t){return Object(Ns.a)(this,void 0,void 0,(function*(){this.searchTerm=t,t||(this.filteredRecipients=[...this.recipients]),this.filteredRecipients=this.recipients.filter(e=>this.includesQuery(e.name,t)||this.includesQuery(e.bankBic,t))}))}onRecipientSelect(t){this.modal.close(t)}onClose(){this.modal.dismiss()}includesQuery(t,e){var n,s;return null===(n=t)||void 0===n?void 0:n.toLowerCase().includes(null===(s=e)||void 0===s?void 0:s.toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-foreign-contracts-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Rb(2,"h5",2),d.Wb(3,"div",3),d.Wb(4,"j-search-input",4),d.ic("valueChanged",(function(t){return e.onQueryChange(t)})),d.Vb(),d.Vb(),d.Vb(),d.Pc(5,Ji,1,0,"j-empty-placeholder",5),d.Pc(6,to,1,0,"j-empty-placeholder",6),d.Wb(7,"div",7),d.Pc(8,eo,1,2,"j-foreign-contracts-recipient",8),d.Vb(),d.Vb()),2&t&&(d.Ab(4),d.sc("placeholder","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.SEARCH"),d.Ab(1),d.sc("ngIf",0==(null==e.recipients?null:e.recipients.length)),d.Ab(1),d.sc("ngIf",(null==e.recipients?null:e.recipients.length)>0&&0==(null==e.filteredRecipients?null:e.filteredRecipients.length)),d.Ab(2),d.sc("ngForOf",e.filteredRecipients))},directives:[c.a,Yn.a,s.u,s.t,hn.a,Zi],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})(),so=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){}close(){this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(r.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-iin-check-error"]],decls:13,vars:3,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","./assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"button",2),d.ic("click",(function(t){return e.modal.dismiss()})),d.Rb(3,"img",3),d.mc(4,"translate"),d.Vb(),d.Vb(),d.Wb(5,"div",4),d.Wb(6,"div",5),d.Wb(7,"h5"),d.Rc(8,"\u0421\u0435\u0440\u0432\u0438\u0441 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"div",6),d.Wb(10,"div",7),d.Wb(11,"button",8),d.ic("click",(function(t){return e.close()})),d.Rc(12,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c "),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(3),d.tc("alt",d.nc(4,1,"SHARED.CLOSE")))},pipes:[c.d],styles:[""]}),t})();var io=n("JPBo"),oo=n("CVrE"),ro=n("CqXF"),co=n("w1tV"),ao=n("wd/R"),lo=n("E+oP"),bo=n.n(lo);const uo=["formDirective"],mo=["senderAccountDropdown"];let po=(()=>{class t{constructor(t,e,n,s,i,o,r,c,a,l,b){this.form=t,this.api=e,this.route=n,this.router=s,this.companyService=i,this.paymentsService=o,this.maskService=r,this.modals=c,this.dictionaries=a,this.pipeline=l,this.authorityPermissionsService=b,this.isRestricted=!1,this.PAYMENT_STATUS=Ks.h,this.SPINNER="BasePaymentContainer",this.restoredData={},this.amountMessage$=new Ds.a(""),this.periodMessage$=new Ds.a(""),this.commission$=new Ds.a(null),this.vat$=new Ds.a(0),this.total$=new Ds.a(0),this.purposeMessage$=new Ds.a(""),this.dateMessage$=new Ds.a(""),this.purposeLength$=new Ds.a(0),this.workingHours$=new Ds.a(null),this.workingDays$=new Ds.a([]),this.processingPayment$=new Ds.a(null),this.isImported=!1,this.subs=new Ai.a,this.errors=this.paymentsService.errors,this.rules=this.paymentsService.rules,this.ugdStore=this.dictionaries.UGDictionary,this.knpStore=this.dictionaries.KNPDictionary,this.kbkStore=this.dictionaries.KBKDictionary,this.getWorkingHours()}getPermission(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.isRestricted=yield this.authorityPermissionsService.isRestricted(this.paymentType)}))}getWorkingHours(){return Object(Ns.a)(this,void 0,void 0,(function*(){const t=yield this.api.getWorkingHours();this.workingHours$.next(t)}))}ngOnInit(){this.getPermission(),this.listenRouterParams(),this.createControlsStream(this.form),this.combineUrgentStream(),this.subs.add(this.processingPayment$.pipe(Object(Us.a)(),Object(Bs.a)(0)).subscribe(t=>{t?this.paymentsService.spinner.show(this.SPINNER):this.paymentsService.spinner.hide(this.SPINNER)}))}ngOnDestroy(){this.subs.unsubscribe(),this.paymentsService.spinner.hide(this.SPINNER)}get paymentId(){return this.route.snapshot.params.paymentId}get dateHelper(){return this.form.controls.date.value?"":"\u041f\u0440\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u043c \u0431\u0430\u043b\u0430\u043d\u0441\u0435 \u043f\u043b\u0430\u0442\u0435\u0436 \u0441\u0440\u0430\u0437\u0443 \u0443\u0439\u0434\u0435\u0442 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}get senderAccountLabel(){return this.form.controls.senderAccount?"\u0421\u0447\u0435\u0442 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}get submitLabel(){return"SHARED."+(this.paymentsService.isSignatureRequired?"TO_SIGN":"FOR_SIGN")}get paymentType(){return this.form.controls.type.value}set paymentType(t){this.form.controls.type.patchValue(t)}onSenderAccountSelect(t){this.form.controls.senderAccount.setValue(t)}hasError(t,e){var n,s;return e.invalid&&(e.dirty&&!(null===(n=t)||void 0===n?void 0:n.isFocused)||(null===(s=this.formDirective)||void 0===s?void 0:s.submitted)&&e.touched)}sendPayment(t){var e;this.formDirective.form.markAsPristine();const n=this.paymentsService.paymentNumber,s=t||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join(". ")});return this.processingPayment$.next(s),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:this.total$.getValue()-this.commission$.getValue(),commission:this.commission$.getValue(),status:null===(e=this.restoredData)||void 0===e?void 0:e.status,userPurpose:this.form.value.purpose,rawBody:s}).then(t=>{t?this.restoredData={status:t.status.code,signatures:t.signatures,companyId:t.companyId}:(this.restoredData=null,n.entity||n.fetching||(n.entity=s.number))}).catch(t=>{}).finally(()=>{this.processingPayment$.next(null)})}onSubmit(t){t&&t.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}processPayment(){return Object(Ns.a)(this,void 0,void 0,(function*(){const t=this.form.getRawValue();this.processingPayment$.next(t);try{const e=yield this.api.checkWorkingTime(t.date),n=yield this.api.checkAmountLimit(t.amount,this.paymentType);e&&n?this.sendPayment():this.processingPayment$.next(null)}catch(e){this.processingPayment$.next(null)}}))}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(li,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=this.paymentType,t.result.then(t=>{this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}knpComparator(t,e){return t.code===e}combineUrgentStream(){var t;const{date:e,bankAccount:n,bankReceiver:s}=this.controlsStream,{urgent:i}=this.form.controls;if(!i)return;const o=new Date,r=Object(ht.getTimeZoneOffset)(new Date,"Asia/Almaty");o.setHours(o.getHours()+-r/60);const c=new Date(o);c.setHours(9,0,0);const a=new Date(o);let l;a.setHours(16,0,0);let b,u=!0;l=o>=c&&o<=a?Object(P.a)(+a-+o).pipe(Object(ro.a)(!1)):o<c?Object(P.a)(+c-+o).pipe(Object(ro.a)(u=!u)):Object(P.a)(c.setDate(c.getDate()+1)-+o).pipe(Object(ro.a)(u=!u)),l=l.pipe(Object(Gs.a)(1),Object(Z.a)(u)),s?b=Object(Ms.a)([n,s,this.dictionaries.bankDictionary.entities$]).pipe(Object(nt.a)(([t,e,n])=>{let s;return e&&(s=n[e])&&s.salaryTransitIban?s.salaryTransitIban:s&&!s.salaryTransitIban&&t?Object(ht.ibanPrefix)(t,qs.a.KZT):""})):n&&(b=n.pipe(Object(nt.a)(t=>Object(ht.ibanPrefix)(t,qs.a.KZT)))),b=(null===(t=b)||void 0===t?void 0:t.pipe(Object(nt.a)(t=>this.paymentsService.bankFromAccount.transform(t))))||Object($s.a)(""),this.subs.add(Object(Ms.a)([e.pipe(Object(nt.a)(t=>!t)),b.pipe(Object(tt.a)(300),Object(nt.a)(t=>"TSESKZKA"!==t)),l]).pipe(Object(nt.a)(t=>t.every(t=>t))).subscribe(t=>{t&&i.disabled?i.enable():!t&&i.enabled&&(i.disable(),i.setValue(!1))}))}listenRouterParams(){this.subs.add(this.route.params.pipe(Object(nt.a)(t=>({state:window.history.state,params:t,route:this.route})),Object(tt.a)(0),Object(Hs.a)(({params:t,state:e})=>{var n,s,i;if(null===(n=e)||void 0===n?void 0:n.silent)return this.restoredData.status===Ks.h.DRAFT?this.paymentsService.rootTitle=ws.b.EDIT_DRAFT:this.restoredData.status===Ks.h.CREATED&&(this.paymentsService.rootTitle=ws.b.EDIT_PAYMENT),Ls.a;if(null===(s=e)||void 0===s?void 0:s.resolvedPayment)return Object($s.a)(e.resolvedPayment);if(t.paymentId||(null===(i=e)||void 0===i?void 0:i.repeatPaymentId)){const n=t.paymentId||e.repeatPaymentId;return Object(Fs.a)(this.api.getPaymentById(n)).pipe(Object(Qs.a)(t=>(this.router.navigate([this.router.url.replace("/"+n,"")]),Ls.a)))}return this.setAutoNumeration(),this.paymentsService.rootTitle=ws.b.NEW,Ls.a})).subscribe(t=>{this.restorePayment(t)}))}getMaskConfig(){Object.entries(this.masks).forEach(([t,e])=>this.masks[t]=this.maskService.getConfig(e))}checkPersonalAccounts(t){0!==t.length?t.every(t=>t.isClosed||t.isLocked)?this.paymentsService.infoMessage.entity={type:ws.a.info,message:ws.d.allLocked}:(1===t.length&&(this.form.patchValue({senderAccount:t[0]}),this.senderAccountDropdown.selectAccount(t[0]),this.form.markAsPristine()),this.paymentsService.infoMessage.entity=null):this.paymentsService.infoMessage.entity={type:ws.a.info,message:ws.d.noAccounts}}createControlsStream(t){this.controlsStream=Object.entries(t.controls).reduce((t,[e,n],s,i)=>(t[e]=n.valueChanges.pipe(Object(Z.a)(n.value)),t),{})}listenCommission(){const{amount:t,date:e,urgent:n,kbk:s,knp:i,senderAccount:o}=this.controlsStream;this.subs.add(Object(Ms.a)([Object(Ms.a)(Object.entries({amount:t,date:e,urgent:n,kbk:s,knp:i,senderAccount:o}).filter(([t,e])=>!!e).map(([t,e])=>e.pipe(Object(Us.a)(),Object(nt.a)(e=>[t,e])))),this.controlsStream.type.pipe(Object(Us.a)()),this.companyService.currentCompany$.pipe(Object(et.a)(t=>!!t),Object(Us.a)())]).pipe(Object(tt.a)(300),Object(et.a)(([t])=>t.every(([t,e])=>!e||!this.form.controls[t]||this.form.controls[t].valid)),Object(Hs.a)(([t,e,n])=>{const{amount:s,date:i,kbk:o,knp:r,urgent:c,senderAccount:a}=t.reduce((t,[e,n])=>(t[e]=n,t),{}),l={amount:this.maskService.getNumberedAmount(s),date:i,urgent:c,currency:qs.a.KZT,category:Ks.g.DOMESTIC,type:e,companyId:n.id,kbk:o,knp:r,senderAccount:a};return this.paymentsService.calculateCommission$(l).pipe(Object(Qs.a)(t=>Object($s.a)(null)))})).subscribe(this.commission$))}listenVAT(){this.controlsStream.vat&&this.controlsStream.amount&&this.subs.add(Object(Ms.a)([this.controlsStream.vat,this.controlsStream.amount]).pipe(Object(nt.a)(([t,e])=>t?12*this.maskService.getNumberedAmount(e)/112:0)).subscribe(this.vat$))}listenTotal(){this.form.controls.amount&&this.subs.add(Object(Ms.a)(this.commission$,this.controlsStream.amount).pipe(Object(nt.a)(([t,e])=>t+this.maskService.getNumberedAmount(e))).subscribe(this.total$))}combineEmployeesAmount(){this.subs.add(this.controlsStream.employees.pipe(Object(tt.a)(100),Object(nt.a)(t=>(t||[]).reduce((t,e)=>t+e.amount,0))).subscribe(t=>{this.form.controls.amount.patchValue(t)}))}combineKNP(t=[t=>this.dictionaries.selectByPaymentType(t,{type:this.paymentType,sortFavourite:!0})],e){const n=[this.knpStore.items$];return e&&n.push(...e),Object(Ms.a)(n).pipe(Object(nt.a)(e=>t.reduce((t,n)=>n(t,e.slice(1)),e[0])),Object(co.a)())}combineKBK(t){this.kbk$=this.kbkStore.items$,Object(Ms.a)([this.kbkStore.items$.pipe(Object(nt.a)(e=>this.dictionaries.selectByPaymentType(e,{type:t,sortFavourite:!0})))]).pipe(Object(nt.a)(([t])=>t))}saveToDraft(t){this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();const e=this.paymentsService.paymentNumber,n=t||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join("; ")});e.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},n)),this.pipeline.saveToDrafts(n,{paymentId:this.paymentId,type:this.paymentType,commission:this.commission$.value,userPurpose:this.form.value.purpose,category:Ks.g.DOMESTIC}).then(t=>{t.id!==this.paymentId&&(t&&(this.restoredData={status:t.status,signatures:t.signatures,companyId:t.companyId}),this.router.navigate([this.route.snapshot.params.paymentId?"../":".",t.id],{relativeTo:this.route,state:{silent:!0}}))}).catch(t=>{e.entity||e.fetching||(e.entity=n.number)}).finally(()=>this.processingPayment$.next(null))}setAutoNumeration(){this.subs.add(this.paymentsService.paymentNumber$.pipe(Object(Ys.a)(this.controlsStream.number)).subscribe(([t,e])=>{e||this.form.controls.number.setValue(t)}))}provideAmountMessage(){if(this.form.controls.amount){const{senderAccount:t,date:e}=this.controlsStream;this.subs.add(Object(Ms.a)([this.companyService.authorityLevel$,this.total$,t.pipe(Object(et.a)(t=>!!t)),e,this.workingHours$.asObservable()]).pipe(Object(nt.a)(([t,e,n,s,i])=>{var o;if(t!==Ks.a.PRIMARY_SIGNATURE)return"";const r=(null===(o=i)||void 0===o?void 0:o.endTime)||ht.edgeTimeLabel,c=n.balance.amount-e;if(c<0){const t=this.maskService.formatAmount(Math.abs(c));return s?((t,e,n)=>`\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ${t} \u20b8 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430, \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0431\u0430\u043b\u0430\u043d\u0441 \u043d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 <span class="text-danger">${Object(ht.formatNgbDate)(e,"g")} ${n}</span> \u0434\u043b\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u0411\u0430\u043d\u043a\u043e\u043c`)(t,s,r):`\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ${t} \u20b8 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430, \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0431\u0430\u043b\u0430\u043d\u0441 \u0434\u043b\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f  \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u0411\u0430\u043d\u043a\u043e\u043c`}})).subscribe(this.amountMessage$))}}listenWorkingDays(){this.subs.add(this.dictionaries.workingDays.entity$.pipe(Object(nt.a)(t=>this.dictionaries.selectDaysTimeline(ao(Object(ht.ngbDateToDate)(this.dateLimit.minDate)).format(ht.ISO_8061),ao(Object(ht.ngbDateToDate)(this.dateLimit.maxDate)).format(ht.ISO_8061),t))).subscribe(this.workingDays$))}listenDateMessageStream(){this.subs.add(Object(Ms.a)([this.companyService.authorityLevel$,this.controlsStream.date,this.controlsStream.senderAccount.pipe(Object(et.a)(t=>!!t))]).pipe(Object(nt.a)(([t,e,n])=>t===Ks.a.PRIMARY_SIGNATURE?"\u041f\u0440\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u043c \u0431\u0430\u043b\u0430\u043d\u0441\u0435 \u043f\u043b\u0430\u0442\u0435\u0436 \u0441\u0440\u0430\u0437\u0443 \u0443\u0439\u0434\u0435\u0442 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443":e?"\u041f\u0440\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u043c \u0431\u0430\u043b\u0430\u043d\u0441\u0435 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0432\u0441\u0435\u0445 \u043f\u043e\u0434\u043f\u0438\u0441\u0435\u0439 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442 \u0440\u0430\u043d\u044c\u0448\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0434\u0430\u0442\u044b":"\u041f\u0440\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u043c \u0431\u0430\u043b\u0430\u043d\u0441\u0435 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0432\u0441\u0435\u0445 \u043f\u043e\u0434\u043f\u0438\u0441\u0435\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 \u0441\u0440\u0430\u0437\u0443 \u0443\u0439\u0434\u0435\u0442 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443")).subscribe(this.dateMessage$))}listenPurposeMessageStream(t=[],e=["vat","kbk","knp"]){const n={vat:t=>t?`\u0412\u043a\u043b\u044e\u0447\u0430\u044f \u041d\u0414\u0421 = ${this.maskService.formatAmount(t)} \u20b8.`:"",kbk:t=>{let e;return t&&(e=this.kbkStore.items.find(e=>e.code===t))?`${e.name}.`:""},knp:t=>{let e;return t&&(e=this.knpStore.items.find(e=>e.code===t))?`${e.name}.`:""}},s=[];s.push((this.controlsStream.vat&&this.vat$||Object($s.a)(0)).pipe(Object(nt.a)(t=>["vat",t])),this.controlsStream.knp.pipe(Object(nt.a)(t=>["knp",t]))),s.push(...t),this.subs.add(Object(Ms.a)(s).pipe(Object(tt.a)(100),Object(nt.a)(t=>t.reduce((t,e)=>(t[e[0]]=e[1],t),{})),Object(nt.a)(t=>e.reduce((e,s)=>(Array.isArray(s)?e.push(s[1](t[s[0]],t)):e.push(n[s]?n[s](t[s],t):t[s]),e),[]).filter(t=>!!t).join(" ")),Object(J.a)(t=>{this.form.controls.purpose.patchValue(this.form.controls.purpose.value),t&&this.form.controls.purpose.markAllAsTouched()})).subscribe(this.purposeMessage$)),this.subs.add(Object(Ms.a)(this.purposeMessage$,this.controlsStream.purpose).pipe(Object(nt.a)(([t,e])=>(t||"").length+(e||"").length)).subscribe(this.purposeLength$)),this.validatePurpose()}validatePurpose(){this.subs.add(Object(Ms.a)(this.purposeMessage$,this.controlsStream.purpose).subscribe(([t,e])=>{const n=(e||"").length+(t||"").length,s=this.form.touched?this.form.controls.purpose.errors:{};s&&n>this.rules.purposeLength&&(s.maxlength=n),this.form.controls.purpose.setErrors(bo()(s)?null:s,{emitEvent:!0})}))}restorePayment(t){this.subs.add(Object(Ms.a)([this.knpStore.fetched$,this.kbkStore.fetched$,this.ugdStore.fetched$,this.dictionaries.bankDictionary.fetched$,this.accountStore.fetched$]).pipe(Object(et.a)(t=>t.every(t=>t)),Object(J.a)(()=>{var e,n,s,i,o;let r;try{r=this.pipeline.flattenPaymentToModel(t)}catch(c){r={}}this.restoredData={companyId:t.companyId,status:null===(e=t.status)||void 0===e?void 0:e.code,signatures:t.signatures},t.id&&!this.paymentId?(r.number="",r.date=null,this.restoredData.status=null,this.paymentsService.rootTitle=ws.b.NEW):this.paymentsService.rootTitle=this.restoredData.status===Ks.h.DRAFT?ws.b.EDIT_DRAFT:ws.b.EDIT_PAYMENT,r.emailOnSuccess&&(r.notify=!0),this.form.patchValue(Object.assign(Object.assign({},r),{purpose:null===(s=null===(n=t.details.associatedField)||void 0===n?void 0:n.parameters)||void 0===s?void 0:s.paymentPurpose})),this.senderAccountDropdown.selectByIban(null===(o=null===(i=t)||void 0===i?void 0:i.details)||void 0===o?void 0:o.payerIban),this.isImported=t.imported,r.number||this.setAutoNumeration()}),Object(tt.a)(10),Object(Gs.a)(1)).subscribe())}}return t.\u0275fac=function(t){d.hc()},t.\u0275dir=d.Lb({type:t,viewQuery:function(t,e){var n;1&t&&(d.Wc(uo,!0),d.Wc(mo,!0)),2&t&&(d.Cc(n=d.jc())&&(e.formDirective=n.first),d.Cc(n=d.jc())&&(e.senderAccountDropdown=n.first))}}),t})();var ho=n("mR7B"),fo=n("2A1n"),go=n("7rOj"),vo=n("FSKB"),yo=n("YjsB"),Ro=n("hsBV");const Co=["emailOnSuccess"],To=["senderAccountDropdown"],Ao=["contractsSelect"],So=["contractDetails"],jo=["bankDropdown"],ko=["intermediaryBankDropdown"],Io=["commissionAccountDropdown"],Vo=["rubNonRussiaBankDropdown"],Eo=["rubNonRussiaCorrespondentBankDropdown"],_o=["rubNonRussiaCorrespondentIbanInput"];function Wo(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function Oo(t,e){if(1&t&&(d.Wb(0,"div",72),d.Rb(1,"small",73),d.mc(2,"translate"),d.Vb()),2&t){const t=d.lc(2);d.Hb("is-loading",t.isContractsDescriptionLoading),d.sc("jLoading",t.isContractsDescriptionLoading)("jLoadingInverted",!0),d.Ab(1),d.sc("innerHTML",d.oc(2,5,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.DESCRIPTION",t.contractsSwitchDescriptionParams),d.Hc)}}function Po(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",83),d.ic("click",(function(e){return d.Gc(t),d.lc(5).openContractsAddingModal()})),d.Wb(1,"span",13),d.Rc(2," CURRENCY_PAYMENT.CONTRACTS.ADD_NEW "),d.Vb(),d.Vb()}}function xo(t,e){if(1&t&&(d.Wb(0,"div",81),d.Pc(1,Po,3,0,"button",82),d.Wb(2,"h6",13),d.Rc(3,"CURRENCY_PAYMENT.CONTRACTS.TITLE"),d.Vb(),d.Vb()),2&t){const t=d.lc(4);d.Ab(1),d.sc("ngIf",t.filteredContracts.length>0)}}function wo(t,e){if(1&t&&d.Pc(0,xo,4,1,"div",80),2&t){const t=e.searchTerm,n=d.lc(3);d.sc("ngIf",!t&&!n.isContractsLoading)}}function No(t,e){if(1&t&&(d.Wb(0,"div",84),d.Wb(1,"div",85),d.Wb(2,"span"),d.Rc(3),d.Vb(),d.Rb(4,"j-money",86),d.Vb(),d.Wb(5,"div",87),d.Wb(6,"span"),d.Rc(7),d.Vb(),d.Wb(8,"div"),d.Rb(9,"span",88),d.Rc(10,"\xa0 "),d.Rb(11,"j-money",86),d.Vb(),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(3),d.Sc(t.contractor.name),d.Ab(1),d.sc("money",t.amount),d.Ab(3),d.Sc(t.contractNumber),d.Ab(4),d.sc("money",t.remainder)}}function Do(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"div",89),d.Rb(2,"img",90),d.Rb(3,"div",91),d.mc(4,"translate"),d.Wb(5,"a",92),d.ic("click",(function(e){return d.Gc(t),d.lc(4).openContractsAddingModal(e)})),d.Rc(6),d.mc(7,"translate"),d.Vb(),d.Vb(),d.Tb()}2&t&&(d.Ab(3),d.sc("innerHTML",d.nc(4,2,"CURRENCY_PAYMENT.CONTRACTS.EMPTY_STATE"),d.Hc),d.Ab(3),d.Tc(" ",d.nc(7,4,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function Mo(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Rb(1,"j-empty-placeholder",93),d.Wb(2,"div",94),d.Wb(3,"a",95),d.ic("click",(function(e){return d.Gc(t),d.lc(4).openContractsAddingModal(e)})),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Vb(),d.Tb()}2&t&&(d.Ab(4),d.Tc(" ",d.nc(5,1,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function Lo(t,e){if(1&t&&(d.Pc(0,Do,8,6,"ng-container",1),d.Pc(1,Mo,6,3,"ng-container",1)),2&t){const t=d.lc(3);d.sc("ngIf",0==t.contracts.length),d.Ab(1),d.sc("ngIf",t.contracts.length>0)}}function $o(t,e){if(1&t&&d.Rc(0),2&t){const t=e.item,n=d.lc(3);d.Tc(" ",n.mapContractLabel(t||n.form.controls.contract.value)," ")}}function Fo(t,e){if(1&t){const t=d.Xb();d.Wb(0,"a",96),d.ic("click",(function(e){return d.Gc(t),d.lc(3).showContractDetails(e)})),d.Rc(1,"CURRENCY_PAYMENT.CONTRACTS.SHOW_DETAILS"),d.Vb()}}function Uo(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"div",74),d.Wb(2,"j-form-field",null,75),d.Wb(4,"j-label",13),d.Rc(5,"CURRENCY_PAYMENT.RECIPIENT.CONTRACT"),d.Vb(),d.Wb(6,"j-select",76,77),d.ic("change",(function(e){return d.Gc(t),d.lc(2).onContractSelect(e)})),d.Pc(8,wo,1,1,"ng-template",39),d.Pc(9,No,12,4,"ng-template",26),d.Pc(10,Lo,2,2,"ng-template",78),d.Pc(11,$o,1,1,"ng-template",27),d.Vb(),d.Pc(12,Fo,2,0,"a",79),d.Rb(13,"j-error",28),d.Vb(),d.Vb(),d.Tb()}if(2&t){const t=d.Dc(3),e=d.Dc(7),n=d.lc(2);d.Ab(6),d.sc("loading",n.isContractsLoading)("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",n.form.controls.contractId)("clearable",!1)("searchFn",n.contractComparator)("items",n.filteredContracts),d.Ab(6),d.sc("ngIf",n.isContractSelected),d.Ab(1),d.sc("control",n.form.controls.contractId)("errorMessages",n.errors.contractId)}}function Yo(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",97),d.ic("click",(function(e){return d.Gc(t),d.lc(2).openForeignContractsRecipientsDictionary()})),d.Vb()}}function Bo(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",98),d.ic("click",(function(e){return d.Gc(t),d.lc(2).openForeignRecipientsDictionary()})),d.Vb()}}function Ho(t,e){if(1&t&&(d.Wb(0,"div",99),d.Rc(1),d.Vb()),2&t){const t=e.item,n=d.lc(2);d.Ab(1),d.Tc(" ",n.mapCountryLabel(t)," ")}}function Qo(t,e){if(1&t&&d.Rc(0),2&t){const t=e.item;d.lc();const n=d.Dc(33),s=d.lc();d.Tc(" ",n.focused?"":s.mapCountryLabel(t)," ")}}function Go(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field"),d.Wb(2,"j-label"),d.Rc(3),d.mc(4,"translate"),d.mc(5,"async"),d.Vb(),d.Rb(6,"input",100),d.Rb(7,"j-error",28),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(3),d.Sc(d.nc(4,7,d.nc(5,9,t.cityPlaceholder$))),d.Ab(3),d.sc("mask",t.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",t.cityMaxLength)("formControl",t.form.controls.cityName),d.Ab(1),d.sc("control",t.form.controls.cityName)("errorMessages",t.errors.purpose)}}function Ko(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",101),d.Wb(2,"div",20),d.Wb(3,"j-form-field"),d.Wb(4,"j-label",13),d.Rc(5,"CURRENCY_PAYMENT.AUD.INDEX"),d.Vb(),d.Rb(6,"input",102),d.Vb(),d.Vb(),d.Wb(7,"div",20),d.Wb(8,"j-form-field"),d.Wb(9,"j-label",13),d.Rc(10,"CURRENCY_PAYMENT.AUD.STATE"),d.Vb(),d.Rb(11,"input",103),d.Vb(),d.Vb(),d.Vb(),d.Wb(12,"div",101),d.Wb(13,"div",20),d.Wb(14,"j-form-field"),d.Wb(15,"j-label",13),d.Rc(16,"CURRENCY_PAYMENT.AUD.BUILDING_NUMBER"),d.Vb(),d.Rb(17,"input",104),d.Vb(),d.Vb(),d.Wb(18,"div",20),d.Wb(19,"j-form-field"),d.Wb(20,"j-label",13),d.Rc(21,"CURRENCY_PAYMENT.AUD.STREET"),d.Vb(),d.Rb(22,"input",105),d.Vb(),d.Vb(),d.Vb(),d.Rb(23,"hr",106),d.Tb()),2&t){const t=d.lc(2);d.Ab(6),d.sc("formControl",t.form.controls.audIndex),d.Ab(5),d.sc("formControl",t.form.controls.audState),d.Ab(6),d.sc("formControl",t.form.controls.audBuildingNumber),d.Ab(5),d.sc("formControl",t.form.controls.audStreet)}}function qo(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Wb(2,"j-form-field"),d.Wb(3,"j-label",13),d.Rc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),d.Vb(),d.Rb(5,"input",107),d.Vb(),d.Vb(),d.Tb()),2&t){const t=d.lc(2);d.Ab(5),d.sc("formControl",t.form.controls.audAddress)}}function zo(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Wb(2,"j-form-field"),d.Wb(3,"j-label",13),d.Rc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),d.Vb(),d.Rb(5,"input",107),d.Vb(),d.Vb(),d.Tb()),2&t){const t=d.lc(2);d.Ab(5),d.sc("formControl",t.form.controls.canAddress)}}function Xo(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Rb(2,"j-foreign-bank-select",108,109),d.Vb(),d.Wb(4,"div",20),d.Wb(5,"j-form-field",21),d.Wb(6,"j-label",13),d.Rc(7,"CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_IBAN"),d.Vb(),d.Rb(8,"input",110,111),d.Rb(10,"j-error",28),d.Vb(),d.Vb(),d.Tb()),2&t){const t=d.lc(2);d.Ab(2),d.sc("labelText","CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_BIC")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_CORRESPONDENT_BIC_ENTERED")("labelControl",t.form.controls.rubNonRussiaCorrespondentBankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.rubNonRussiaCorrespondentBank),d.Ab(6),d.sc("validation",!1)("mask",t.masks.rubNonRussiaCorrespondentIban.mask)("formControl",t.form.controls.rubNonRussiaCorrespondentIban),d.Ab(2),d.sc("control",t.form.controls.rubNonRussiaCorrespondentIban)("errorMessages",t.errors.bankAccount)}}function Zo(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field",21),d.Wb(2,"j-label",13),d.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KBE"),d.Vb(),d.Rb(4,"input",112),d.Rb(5,"a",113),d.Rb(6,"j-error",28),d.Vb(),d.Vb()),2&t){d.lc();const t=d.Dc(146),e=d.lc();d.Ab(4),d.sc("mask",e.masks.kbeCode.mask)("jShadow",e.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",e.form.controls.kbeCode),d.Ab(1),d.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(1),d.sc("control",e.form.controls.kbeCode)("errorMessages",e.errors.kbeCode)}}function Jo(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Rb(2,"j-foreign-bank-select",108,114),d.Vb(),d.Wb(4,"div",20),d.Wb(5,"j-form-field"),d.Wb(6,"j-label"),d.Rc(7),d.mc(8,"translate"),d.mc(9,"async"),d.Vb(),d.Rb(10,"input",100),d.Vb(),d.Vb(),d.Tb()),2&t){const t=d.lc(2);d.Ab(2),d.sc("labelText","CURRENCY_PAYMENT.RECIPIENT.BANK")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",t.form.controls.rubNonRussiaBankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.rubNonRussiaBank),d.Ab(5),d.Sc(d.nc(8,10,d.nc(9,12,t.cityPlaceholder$))),d.Ab(3),d.sc("mask",t.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",t.cityMaxLength)("formControl",t.form.controls.cityName)}}function tr(t,e){1&t&&(d.Wb(0,"div",45),d.Rc(1," CURRENCY_PAYMENT.RECIPIENT.BIC_DESCRIPTION "),d.Vb())}function er(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Rb(2,"j-foreign-bank-select",115,116),d.Pc(4,tr,2,0,"div",117),d.Vb(),d.Tb()),2&t){const t=d.lc(2);d.Ab(2),d.sc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",t.form.controls.bankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.bank),d.Ab(2),d.sc("ngIf",!t.isBicRequired)}}function nr(t,e){if(1&t&&d.Rb(0,"j-foreign-bank-select",121,122),2&t){const t=d.lc(3);d.sc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_INTERMEDIARY_BIC_ENTERED")("labelControl",t.form.controls.intermediaryBankLabel)("bankControl",t.form.controls.intermediaryBank)("errorMessages",t.errors.bankSelect)}}function sr(t,e){if(1&t&&(d.Wb(0,"div",10),d.Rb(1,"j-switch",11),d.Wb(2,"div",118),d.Wb(3,"strong",13),d.Rc(4,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.TITLE"),d.Vb(),d.Pc(5,nr,2,4,"j-foreign-bank-select",119),d.Wb(6,"small",120),d.Rc(7,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.DESCRIPTION"),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.sc("formControl",t.form.controls.hasIntermediaryBank),d.Ab(4),d.sc("ngIf",t.hasIntermediaryBank)}}function ir(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field",21),d.Wb(2,"j-label",13),d.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KIO"),d.Vb(),d.Rb(4,"input",123),d.Rb(5,"j-error",28),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(4),d.sc("mask",t.masks.kio.mask)("dropSpecialCharacters",!1)("formControl",t.form.controls.kio),d.Ab(1),d.sc("control",t.form.controls.kio)("errorMessages",t.errors.kio)}}function or(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field",21),d.Wb(2,"j-label",13),d.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KPP"),d.Vb(),d.Rb(4,"input",124),d.Rb(5,"a",113),d.Vb(),d.Wb(6,"div",45),d.Rc(7," CURRENCY_PAYMENT.RECIPIENT.KPP_DESCRIPTION "),d.Vb(),d.Vb()),2&t){d.lc();const t=d.Dc(148),e=d.lc();d.Ab(4),d.sc("mask",e.masks.kpp.mask)("jShadow",e.masks.kpp.shadow)("validation",!1)("formControl",e.form.controls.kpp),d.Ab(1),d.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg")}}function rr(t,e){if(1&t&&(d.Wb(0,"div",130),d.Wb(1,"j-form-field",21),d.Wb(2,"j-label",13),d.Rc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KIO"),d.Vb(),d.Rb(4,"input",142),d.Rb(5,"j-error",28),d.Vb(),d.Wb(6,"j-form-field",21),d.Wb(7,"j-label",13),d.Rc(8,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KPP"),d.Vb(),d.Rb(9,"input",135),d.Rb(10,"a",113),d.Vb(),d.Vb()),2&t){d.lc(2);const t=d.Dc(148),e=d.lc();d.Ab(4),d.sc("formControl",e.form.controls.payerInn),d.Ab(1),d.sc("control",e.form.controls.payerInn)("errorMessages",e.errors.payerInn),d.Ab(4),d.sc("mask",e.masks.kpp.mask)("jShadow",e.masks.kpp.shadow)("formControl",e.form.controls.payerKpp),d.Ab(1),d.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg")}}function cr(t,e){if(1&t&&(d.Wb(0,"div",84),d.Wb(1,"strong"),d.Rc(2),d.Vb(),d.Wb(3,"span"),d.Rc(4," - "),d.Vb(),d.Wb(5,"span"),d.Rc(6),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(2),d.Sc(t.code),d.Ab(4),d.Sc(t.description)}}function ar(t,e){1&t&&d.Rb(0,"j-empty-placeholder",143)}function lr(t,e){if(1&t&&d.Rc(0),2&t){const t=e.item;d.lc();const n=d.Dc(17);d.Tc(" ",n.focused?"":t.code+" - "+t.description," ")}}function br(t,e){if(1&t&&(d.Wb(0,"div",84),d.Wb(1,"strong"),d.Rc(2),d.Vb(),d.Wb(3,"span"),d.Rc(4," - "),d.Vb(),d.Wb(5,"span"),d.Rc(6),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(2),d.Sc(t.code),d.Ab(4),d.Sc(t.description)}}function ur(t,e){1&t&&d.Rb(0,"j-empty-placeholder",144)}function dr(t,e){if(1&t&&d.Rc(0),2&t){const t=e.item;d.lc();const n=d.Dc(32);d.Tc(" ",n.focused?"":t.code+" - "+t.description," ")}}function mr(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"div",20),d.Wb(2,"j-form-field",21),d.Wb(3,"j-label",13),d.Rc(4,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PURPOSE"),d.Vb(),d.Rb(5,"input",135),d.Rb(6,"a",113),d.Vb(),d.Vb(),d.Wb(7,"div",20),d.Wb(8,"j-form-field",21),d.Wb(9,"j-label",13),d.Rc(10,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TAX_NUMBER"),d.Vb(),d.Rb(11,"input",135),d.Vb(),d.Vb(),d.Wb(12,"div",130),d.Wb(13,"div"),d.Wb(14,"j-form-field",21),d.Wb(15,"j-label",13),d.Rc(16,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD"),d.Vb(),d.Rb(17,"input",145),d.Rb(18,"a",113),d.Vb(),d.Wb(19,"div",45),d.Rc(20,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD_DESCRIPTION "),d.Vb(),d.Vb(),d.Wb(21,"j-form-field",21),d.Wb(22,"j-label",13),d.Rc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.UIP"),d.Vb(),d.Rb(24,"input",146),d.Vb(),d.Vb(),d.Tb()),2&t){d.lc(2);const t=d.Dc(152),e=d.Dc(154),n=d.lc();d.Ab(5),d.sc("mask",n.masks.paymentBasis.mask)("jShadow",n.masks.paymentBasis.shadow)("formControl",n.form.controls.paymentBasis),d.Ab(1),d.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(5),d.sc("mask",n.masks.budgetDocNumber.mask)("jShadow",n.masks.budgetDocNumber.shadow)("formControl",n.form.controls.budgetDocNumber),d.Ab(6),d.sc("mask",n.masks.budgetPeriod.mask)("jShadow",n.masks.budgetPeriod.shadow)("dropSpecialCharacters",!1)("formControl",n.form.controls.budgetPeriod),d.Ab(1),d.sc("ngbTooltip",e)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(6),d.sc("formControl",n.form.controls.uip)}}function pr(t,e){if(1&t&&(d.Ub(0),d.Wb(1,"fieldset",15),d.Wb(2,"h5",7),d.Rc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TITLE"),d.Vb(),d.Wb(4,"div",20),d.Wb(5,"div",125),d.Rb(6,"input",126),d.Wb(7,"label",127),d.Rb(8,"span",128),d.Vb(),d.Vb(),d.Vb(),d.Pc(9,rr,11,8,"div",129),d.Wb(10,"div",130,131),d.Wb(12,"j-form-field",null,132),d.Wb(14,"j-label",13),d.Rc(15,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK"),d.Vb(),d.Wb(16,"j-select",133,134),d.Pc(18,cr,7,2,"ng-template",26),d.Pc(19,ar,1,0,"ng-template",78),d.Pc(20,lr,1,1,"ng-template",27),d.Vb(),d.Vb(),d.Wb(21,"j-form-field",21),d.Wb(22,"j-label",13),d.Rc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.OKTMO"),d.Vb(),d.Rb(24,"input",135),d.Rb(25,"a",113),d.Vb(),d.Vb(),d.Wb(26,"div",20),d.Wb(27,"j-form-field",null,136),d.Wb(29,"j-label",13),d.Rc(30,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PAYER_STATUS"),d.Vb(),d.Wb(31,"j-select",137,138),d.Pc(33,br,7,2,"ng-template",26),d.Pc(34,ur,1,0,"ng-template",78),d.Pc(35,dr,1,1,"ng-template",27),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(36,"fieldset",15),d.Wb(37,"div",20),d.Wb(38,"div",125),d.Rb(39,"input",139),d.Wb(40,"label",140),d.Rb(41,"span",141),d.Vb(),d.Vb(),d.Vb(),d.Pc(42,mr,25,15,"ng-container",1),d.Vb(),d.Tb()),2&t){const t=d.Dc(11),e=d.Dc(17),n=d.Dc(28),s=d.Dc(32);d.lc();const i=d.Dc(150),o=d.lc();d.Ab(6),d.sc("formControl",o.form.controls.isRussianTaxPayer),d.Ab(3),d.sc("ngIf",o.isRussianTaxpayer),d.Ab(7),d.sc("loading",o.isKbkLoading)("appendTo",t)("jFocusOnReturn",e)("formControl",o.form.controls.kbk)("clearable",!1)("searchFn",o.kbkComparator)("items",o.kbkList),d.Ab(8),d.sc("mask",o.masks.oktmo.mask)("jShadow",o.masks.oktmo.shadow)("formControl",o.form.controls.oktmo),d.Ab(1),d.sc("ngbTooltip",i)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(6),d.sc("loading",o.isStatusesLoading)("appendTo",n.elementRef.nativeElement)("jFocusOnReturn",s)("formControl",o.form.controls.payerStatus)("clearable",!1)("searchFn",o.statusComparator)("items",o.statuses),d.Ab(8),d.sc("formControl",o.form.controls.hasRussianBudgetExtras),d.Ab(3),d.sc("ngIf",o.hasRussianBudgetExtras)}}function hr(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div"),d.Wb(1,"button",83),d.ic("click",(function(e){d.Gc(t),d.lc(2);const n=d.Dc(88);return d.lc().openKnpDictionary(n,e)})),d.Rb(2,"span",147),d.Wb(3,"span",13),d.Rc(4," CURRENCY_PAYMENT.DETAILS.KNP.DICTIONARY "),d.Vb(),d.Vb(),d.Wb(5,"p",148),d.Rc(6,"CURRENCY_PAYMENT.DETAILS.KNP.FREQUENT"),d.Vb(),d.Wb(7,"p",149),d.Rc(8,"CURRENCY_PAYMENT.DETAILS.KNP.DESCRIPTION"),d.Vb(),d.Vb()}2&t&&(d.Ab(2),d.sc("inlineSVG","/assets/icons/payments/list.svg"))}function fr(t,e){1&t&&d.Pc(0,hr,9,1,"div",1),2&t&&d.sc("ngIf",!e.searchTerm)}function gr(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field"),d.Wb(2,"j-label",13),d.Rc(3,"CURRENCY_PAYMENT.DETAILS.KVO"),d.Vb(),d.Rb(4,"input",33),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(4),d.sc("mask",t.masks.kvo.mask)("formControl",t.form.controls.kvo)}}function vr(t,e){if(1&t&&(d.Wb(0,"div",84),d.Rc(1),d.Vb()),2&t){const t=e.item,n=d.lc(3);d.Ab(1),d.Tc(" ",n.mapCodeWordLabel(t)," ")}}function yr(t,e){if(1&t&&d.Rc(0),2&t){const t=e.item;d.lc();const n=d.Dc(8),s=d.lc(2);d.Tc(" ",n.focused?"":s.mapCodeWordLabel(t||(null==s.form.controls.codeWord?null:s.form.controls.codeWord.value))," ")}}function Rr(t,e){if(1&t&&(d.Wb(0,"div",20),d.Wb(1,"j-form-field",null,150),d.Wb(3,"j-label"),d.Rc(4),d.mc(5,"translate"),d.mc(6,"async"),d.Vb(),d.Wb(7,"j-select",133,151),d.Pc(9,vr,2,1,"ng-template",26),d.Pc(10,yr,1,1,"ng-template",27),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.Dc(2),e=d.Dc(8),n=d.lc(2);d.Ab(4),d.Sc(d.nc(5,8,d.nc(6,10,n.codeWordLabel$))),d.Ab(3),d.sc("loading",n.isCodeWordsLoading)("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",n.form.controls.codeWord)("clearable",!1)("searchFn",n.codeWordComparator)("items",n.codeWords)}}function Cr(t,e){if(1&t&&(d.Wb(0,"div",152),d.Wb(1,"div",153),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function Tr(t,e){if(1&t&&(d.Wb(0,"div",154),d.Rb(1,"span",155),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.sc("innerHTML",t.comissionMessage,d.Hc)}}function Ar(t,e){if(1&t&&(d.Wb(0,"div",156),d.Rb(1,"span",155),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.sc("innerHTML",t.amountMessage,d.Hc)}}const Sr=function(t){return{amount:t}};function jr(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",156),d.Rb(1,"span",157),d.mc(2,"money"),d.Wb(3,"a",158),d.ic("click",(function(e){return d.Gc(t),d.lc(2).scrollToContracts(e)})),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Vb()}if(2&t){const t=d.lc(2);d.Ab(1),d.sc("translate","ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT")("translateParams",d.xc(7,Sr,d.nc(2,3,t.contractMaxAmount))),d.Ab(3),d.Sc(d.nc(5,5,"ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT_LINK"))}}function kr(t,e){if(1&t&&(d.Wb(0,"div",156),d.Rb(1,"span",155),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.sc("innerHTML",t.comissionMessage,d.Hc)}}function Ir(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Vr(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.Rb(2,"j-money",86)),2&t){const t=d.lc(2);d.Tc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": "),d.Ab(2),d.sc("money",t.commissionBalance)}}function Er(t,e){1&t&&d.Rb(0,"div",159)}function _r(t,e){if(1&t&&(d.Wb(0,"li",59),d.Rb(1,"j-switch",11),d.Wb(2,"span",12),d.Wb(3,"strong",13),d.Rc(4,"CURRENCY_PAYMENT.AGENT.TITLE"),d.Vb(),d.Rb(5,"br"),d.Wb(6,"small",160),d.Rc(7,"CURRENCY_PAYMENT.AGENT.DESCRIPTION"),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(1),d.sc("formControl",t.form.controls.payComission)}}function Wr(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"small",161),d.Rc(2,"\u041d\u0430 \u043f\u043e\u0447\u0442\u0443 \u043f\u0440\u0438\u0434\u0435\u0442 \u043a\u0432\u0438\u0442\u0430\u043d\u0446\u0438\u044f \u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u0435"),d.Vb(),d.Vb())}function Or(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",162),d.Wb(1,"j-form-field"),d.Wb(2,"j-label"),d.Rc(3,"Email \u0430\u0434\u0440\u0435\u0441"),d.Vb(),d.Wb(4,"input",163,164),d.ic("focus",(function(e){return d.Gc(t),d.lc(2).onEmailOnSuccessFocus(e)})),d.Vb(),d.Rb(6,"j-error",28),d.Vb(),d.Wb(7,"small",161),d.Rc(8,"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441 "),d.Vb(),d.Vb()}if(2&t){const t=d.lc(2);d.Ab(4),d.sc("ngbTypeahead",t.search)("formControl",t.form.controls.emailOnSuccess),d.Ab(2),d.sc("control",t.form.controls.emailOnSuccess)("errorMessages",t.errors.email)}}function Pr(t,e){if(1&t&&(d.Rb(0,"p",165),d.mc(1,"translate")),2&t){const t=d.lc(2);d.sc("innerHTML",d.nc(1,1,t.agreementText),d.Hc)}}function xr(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",166),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Wb(2,"strong",13),d.Rc(3,"SHARED.SAVE"),d.Vb(),d.Vb(),d.Wb(4,"button",167),d.Rc(5),d.mc(6,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(5),d.Tc("",d.nc(6,1,t.submitLabel)," ")}}function wr(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",168),d.Rc(2,"SHARED.SAVE_EDITING"),d.Vb(),d.Tb())}function Nr(t,e){if(1&t&&d.Rb(0,"j-fx-contract-details",169,170),2&t){const t=d.lc(2);d.sc("contract",t.form.controls.contract.value)}}function Dr(t,e){}function Mr(t,e){1&t&&d.Rb(0,"j-kbe-info")}function Lr(t,e){1&t&&(d.Wb(0,"p",171),d.Rc(1,"\u041a\u041f\u041f - \u043a\u043e\u0434 \u043f\u0440\u0438\u0447\u0438\u043d\u044b \u043f\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043d\u0430 \u0443\u0447\u0435\u0442 \u043d\u0430\u043b\u043e\u0433\u043e\u043f\u043b\u0430\u0442\u0435\u043b\u044c\u0449\u0438\u043a\u0430"),d.Vb(),d.Wb(2,"p",171),d.Rc(3,"\u041a\u041f\u041f \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 9 \u0437\u043d\u0430\u043a\u043e\u0432 (\u0446\u0438\u0444\u0440)"),d.Vb())}function $r(t,e){1&t&&(d.Wb(0,"p",171),d.Rc(1,"\u041e\u041a\u0422\u041c\u041e (\u041e\u0431\u0449\u0435\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u043a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0439 \u043c\u0443\u043d\u0438\u0446\u0438\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0439) - \u044d\u0442\u043e \u043a\u043e\u0434, \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0438 \u043c\u0443\u043d\u0438\u0446\u0438\u043f\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u043b\u0438 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u043d\u043a\u0442\u0443, \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u043c\u0443 \u0432 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u0430\u0432"),d.Vb())}function Fr(t,e){1&t&&(d.Wb(0,"p",171),d.Rc(1,"2 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u044b\u0435 \u0431\u0443\u043a\u0432\u044b \u043d\u0430 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0435"),d.Vb())}function Ur(t,e){1&t&&(d.Wb(0,"p",171),d.Rc(1," \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f \u043d\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430 \u0438\u043c\u0435\u0435\u0442 10 \u0437\u043d\u0430\u043a\u043e\u0432 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0414\u0414.\u041c\u041c.\u0413\u0413\u0413\u0413 "),d.Vb(),d.Wb(2,"p",171),d.Rc(3," \xab\u0414\u0414\xbb \u2013 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u0443\u043f\u043b\u0430\u0442\u044b; "),d.Rb(4,"br"),d.Rc(5," \xab\u041c\u0421\xbb - \u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0438;"),d.Rb(6,"br"),d.Rc(7," \xab\u041a\u0412\xbb - \u043a\u0432\u0430\u0440\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0438;"),d.Rb(8,"br"),d.Rc(9," \xab\u041f\u041b\xbb - \u043f\u043e\u043b\u0443\u0433\u043e\u0434\u043e\u0432\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0438;"),d.Rb(10,"br"),d.Rc(11," \xab\u0413\u0414\xbb - \u0433\u043e\u0434\u043e\u0432\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0438; "),d.Vb(),d.Wb(12,"p",171),d.Rc(13," \xab01\xbb - \xab31\xbb - \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439 \u0434\u0435\u043d\u044c."),d.Rb(14,"br"),d.Rc(15," \xab\u041c\u041c\xbb \u2013 \u043c\u0435\u0441\u044f\u0446/\u043a\u0432\u0430\u0440\u0442\u0430\u043b/\u043f\u043e\u043b\u0443\u0433\u043e\u0434\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u043e\u0433\u043e \u0433\u043e\u0434\u0430."),d.Rb(16,"br"),d.Rc(17," \xab\u0413\u0413\u0413\u0413\xbb \u2013 \u0413\u043e\u0434, \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043e\u043f\u043b\u0430\u0442\u0430. "),d.Vb(),d.Wb(18,"p",171),d.Rc(19," \u041d\u043e\u043c\u0435\u0440 \u043c\u0435\u0441\u044f\u0446\u0430 \u2013 \u043e\u0442 01 \u0434\u043e 12 "),d.Rb(20,"br"),d.Rc(21," \u041d\u043e\u043c\u0435\u0440 \u043a\u0432\u0430\u0440\u0442\u0430\u043b\u0430 - \u043e\u0442 01 \u0434\u043e 04"),d.Rb(22,"br"),d.Rc(23," \u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u0443\u0433\u043e\u0434\u0438\u044f - 01 \u0438\u043b\u0438 02"),d.Rb(24,"br"),d.Rc(25," \u0413\u043e\u0434\u043e\u0432\u043e\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 \u2013 00 "),d.Vb())}function Yr(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"div",3),d.Wb(2,"form",4,5),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(4,"fieldset",6),d.Wb(5,"h5",7),d.Rc(6,"CURRENCY_PAYMENT.DEBIT_ACCOUNT"),d.Vb(),d.Wb(7,"j-account-dropdown",8,9),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.Vb(),d.Wb(9,"div",10),d.Rb(10,"j-switch",11),d.Wb(11,"div",12),d.Wb(12,"strong",13),d.Rc(13,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.TITLE"),d.Vb(),d.Pc(14,Oo,3,8,"div",14),d.Vb(),d.Vb(),d.Pc(15,Uo,14,10,"ng-container",1),d.Vb(),d.Wb(16,"fieldset",15),d.Wb(17,"div",16),d.Wb(18,"h5",17),d.Rc(19,"CURRENCY_PAYMENT.RECIPIENT.TITLE"),d.Vb(),d.Pc(20,Yo,1,0,"button",18),d.Pc(21,Bo,1,0,"button",19),d.Vb(),d.Wb(22,"div",20),d.Wb(23,"j-form-field",21),d.Wb(24,"j-label",13),d.Rc(25,"CURRENCY_PAYMENT.RECIPIENT.NAME"),d.Vb(),d.Wb(26,"input",22),d.ic("paste",(function(e){return d.Gc(t),d.lc().onNamePaste(e)})),d.Vb(),d.Vb(),d.Vb(),d.Wb(27,"div",20),d.Wb(28,"j-form-field",null,23),d.Wb(30,"j-label",13),d.Rc(31,"CURRENCY_PAYMENT.RECIPIENT.COUNTRY"),d.Vb(),d.Wb(32,"j-select",24,25),d.ic("change",(function(e){return d.Gc(t),d.lc().onCountrySelect(e)}))("focus",(function(e){return d.Gc(t),d.lc().onCountryFocus()}))("search",(function(e){return d.Gc(t),d.lc().onCountrySearch(e)})),d.mc(34,"async"),d.Pc(35,Ho,2,1,"ng-template",26),d.Pc(36,Qo,1,1,"ng-template",27),d.Vb(),d.Rb(37,"j-error",28),d.Vb(),d.Vb(),d.Pc(38,Go,8,11,"div",29),d.Pc(39,Ko,24,4,"ng-container",1),d.mc(40,"async"),d.Pc(41,qo,6,1,"ng-container",1),d.mc(42,"async"),d.Pc(43,zo,6,1,"ng-container",1),d.mc(44,"async"),d.Pc(45,Xo,11,10,"ng-container",1),d.mc(46,"async"),d.Wb(47,"div"),d.mc(48,"async"),d.Pc(49,Zo,7,8,"div",29),d.Pc(50,Jo,11,14,"ng-container",1),d.mc(51,"async"),d.Wb(52,"div",20),d.Wb(53,"j-form-field",21),d.Wb(54,"j-label",13),d.Rc(55,"CURRENCY_PAYMENT.RECIPIENT.IBAN"),d.Vb(),d.Rb(56,"input",30,31),d.Rb(58,"j-error",28),d.Vb(),d.Vb(),d.Vb(),d.Pc(59,er,5,5,"ng-container",1),d.mc(60,"async"),d.Pc(61,sr,8,2,"div",32),d.Pc(62,ir,6,5,"div",29),d.mc(63,"async"),d.Pc(64,or,8,6,"div",29),d.mc(65,"async"),d.Vb(),d.Pc(66,pr,43,23,"ng-container",1),d.mc(67,"async"),d.Wb(68,"fieldset",15),d.Wb(69,"h5",7),d.Rc(70,"CURRENCY_PAYMENT.DETAILS.TITLE"),d.Vb(),d.Wb(71,"div",20),d.Wb(72,"j-form-field"),d.Wb(73,"j-label",13),d.Rc(74,"CURRENCY_PAYMENT.DETAILS.DOCUMENT_NUMBER"),d.Vb(),d.Rb(75,"input",33),d.Vb(),d.Vb(),d.Wb(76,"div",20),d.Rb(77,"j-date-picker",34,35),d.mc(79,"async"),d.mc(80,"translate"),d.mc(81,"async"),d.Vb(),d.Wb(82,"div",20),d.Wb(83,"j-form-field",null,36),d.Wb(85,"j-label",13),d.Rc(86,"CURRENCY_PAYMENT.DETAILS.KNP.TITLE"),d.Vb(),d.Wb(87,"j-select",37,38),d.ic("change",(function(e){return d.Gc(t),d.lc().knpIsChanged()})),d.mc(89,"async"),d.Pc(90,fr,1,1,"ng-template",39),d.Vb(),d.Vb(),d.Vb(),d.Pc(91,gr,5,2,"div",29),d.mc(92,"async"),d.Pc(93,Rr,11,12,"div",29),d.mc(94,"async"),d.Wb(95,"div",40),d.Wb(96,"span",41),d.Rc(97),d.mc(98,"async"),d.Vb(),d.Wb(99,"j-form-field"),d.Wb(100,"j-label",13),d.Rc(101,"CURRENCY_PAYMENT.DETAILS.PURPOSE"),d.Vb(),d.Rb(102,"textarea",42,43),d.Rb(104,"j-error",28),d.Pc(105,Cr,3,1,"div",44),d.mc(106,"async"),d.Vb(),d.Wb(107,"div",45),d.Rc(108," CURRENCY_PAYMENT.DETAILS.PURPOSE_DESCRIPTION "),d.Vb(),d.Vb(),d.Vb(),d.Wb(109,"fieldset",15),d.Wb(110,"div",46),d.Wb(111,"j-account-dropdown",47,48),d.ic("selected",(function(e){return d.Gc(t),d.lc().onCommissionAccountSelect(e)})),d.Vb(),d.Pc(113,Tr,2,1,"div",49),d.Vb(),d.Wb(114,"div",20),d.Wb(115,"j-form-field",50),d.Wb(116,"j-label",13),d.Rc(117,"CURRENCY_PAYMENT.AMOUNT.TITLE"),d.Vb(),d.Wb(118,"input",51),d.ic("paste",(function(e){return d.Gc(t),d.lc().onAmountPaste(e)})),d.Vb(),d.Vb(),d.Pc(119,Ar,2,1,"div",52),d.Pc(120,jr,6,9,"div",52),d.Pc(121,kr,2,1,"div",52),d.Wb(122,"div",53),d.Pc(123,Ir,3,3,"ng-container",54),d.Pc(124,Vr,3,4,"ng-template",null,55,d.Qc),d.Pc(126,Er,1,0,"div",56),d.Vb(),d.Vb(),d.Wb(127,"ul",57),d.Pc(128,_r,8,1,"li",58),d.Wb(129,"li",59),d.Rb(130,"j-switch",11),d.Wb(131,"div",60),d.Wb(132,"strong"),d.Rc(133,"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438"),d.Vb(),d.Rb(134,"br"),d.Pc(135,Wr,3,0,"div",1),d.Pc(136,Or,9,4,"div",61),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Pc(137,Pr,2,3,"p",62),d.Wb(138,"div",63),d.Pc(139,xr,7,3,"ng-container",1),d.Pc(140,wr,3,0,"ng-container",1),d.Vb(),d.Rb(141,"ngx-spinner",64),d.Vb(),d.Vb(),d.Pc(142,Nr,2,1,"j-fx-contract-details",65),d.Pc(143,Dr,0,0,"ng-template",null,66,d.Qc),d.Pc(145,Mr,1,0,"ng-template",null,67,d.Qc),d.Pc(147,Lr,4,0,"ng-template",null,68,d.Qc),d.Pc(149,$r,2,0,"ng-template",null,69,d.Qc),d.Pc(151,Fr,2,0,"ng-template",null,70,d.Qc),d.Pc(153,Ur,26,0,"ng-template",null,71,d.Qc),d.Tb()}if(2&t){const t=d.Dc(29),e=d.Dc(33),n=d.Dc(78),s=d.Dc(84),i=d.Dc(88),o=d.Dc(125),r=d.lc();d.Ab(2),d.sc("formGroup",r.form),d.Ab(5),d.sc("isLoading",r.isAccountsLoading)("isDisabledSelectable",!0)("label","CURRENCY_PAYMENT.DEBIT_ACCOUNT")("hasError",r.form.controls.senderAccount.touched&&r.form.controls.senderAccount.errors)("accounts",r.senderAccountsList),d.Ab(3),d.sc("formControl",r.form.controls.withinContract),d.Ab(4),d.sc("ngIf",r.isContractsDescriptionShown),d.Ab(1),d.sc("ngIf",r.withinContract),d.Ab(5),d.sc("ngIf",r.withinContract&&(null==r.form.controls.contract?null:null==r.form.controls.contract.value?null:null==r.form.controls.contract.value.recipients?null:r.form.controls.contract.value.recipients.length)>1),d.Ab(1),d.sc("ngIf",!r.withinContract),d.Ab(5),d.sc("mask",r.masks.name.mask)("dropSpecialCharacters",!1)("maxlength",r.withinContract?null:r.nameMaxLength)("formControl",r.form.controls.name),d.Ab(6),d.sc("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",r.form.controls.countryCode)("readonly",r.form.controls.countryCode.disabled)("clearable",!1)("searchFn",r.countryComparator)("items",d.nc(34,101,r.countries$)),d.Ab(5),d.sc("control",r.form.controls.countryCode)("errorMessages",r.errors.country),d.Ab(1),d.sc("ngIf",r.isCityShown),d.Ab(1),d.sc("ngIf",d.nc(40,103,r.isAustraliaAud$)),d.Ab(2),d.sc("ngIf",d.nc(42,105,r.isAustraliaNonAud$)),d.Ab(2),d.sc("ngIf",d.nc(44,107,r.isCountryCanada$)),d.Ab(2),d.sc("ngIf",d.nc(46,109,r.isRubNonRussia$)),d.Ab(2),d.Hb("kbe-account-row",!(d.nc(48,111,r.isRubNonRussia$)||r.withinContract)),d.Ab(2),d.sc("ngIf",!r.withinContract),d.Ab(1),d.sc("ngIf",d.nc(51,113,r.isRubNonRussia$)),d.Ab(2),d.Hb("mb-3",r.withinContract),d.Ab(4),d.sc("mask",r.masks.bankAccount.mask)("formControl",r.form.controls.bankAccount),d.Ab(2),d.sc("control",r.form.controls.bankAccount)("errorMessages",r.errors.bankAccount),d.Ab(1),d.sc("ngIf",!d.nc(60,115,r.isRubNonRussia$)),d.Ab(2),d.sc("ngIf",r.isIntermediaryBankSwitchable),d.Ab(1),d.sc("ngIf",d.nc(63,117,r.isKioEnabled$)),d.Ab(2),d.sc("ngIf",d.nc(65,119,r.isKppEnabled$)),d.Ab(2),d.sc("ngIf",d.nc(67,121,r.isRussianBudget$)),d.Ab(9),d.sc("mask",r.masks.number.mask)("formControl",r.form.controls.number),d.Ab(2),d.sc("datesEnabled",d.nc(79,123,r.workingDays$))("formControl",r.form.controls.date)("formatValue",!0)("jFocusOnReturn",n)("label",d.nc(80,125,"CURRENCY_PAYMENT.DETAILS.VALUE_DATE"))("minDate",r.dateLimit.minDate)("maxDate",r.dateLimit.maxDate)("helperText",d.nc(81,127,r.dateMessage$)),d.Ab(10),d.sc("jFocusOnReturn",i)("appendTo",s.elementRef.nativeElement)("formControl",r.form.controls.knp)("clearable",!1)("searchMask",r.masks.knp.mask)("shadow",r.masks.knp.shadow)("compareWith",r.knpComparator)("items",d.nc(89,129,r.knp$)),d.Ab(4),d.sc("ngIf",d.nc(92,131,r.isKvoEnabled$)),d.Ab(2),d.sc("ngIf",d.nc(94,133,r.isCodeWordEnabled$)),d.Ab(4),d.Uc(" ",d.nc(98,135,r.purposeLength$),"/",r.rules.purposeLength,""),d.Ab(5),d.sc("formControl",r.form.controls.purpose)("mask",r.masks.purpose.mask)("dropSpecialCharacters",!1),d.Ab(2),d.sc("control",r.form.controls.purpose)("errorMessages",r.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(106,137,r.purposeMessage$)),d.Ab(5),d.sc("hidden",!r.isCommissionAccountSelectable),d.Ab(1),d.sc("isLoading",r.isAccountsLoading)("accounts",r.commissionAccountsList)("isDisabledSelectable",!0)("hasError",r.form.controls.commissionAccount.touched&&r.form.controls.commissionAccount.errors)("label","CURRENCY_PAYMENT.COMISSION.ACCOUNT"),d.Ab(2),d.sc("ngIf",r.comissionMessage),d.Ab(2),d.sc("floatLabel","always"),d.Ab(3),d.sc("suffix",r.amountSuffix)("placeholder",r.amountPlaceholder)("mask",r.amountMask)("dropSpecialCharacters",!0)("formControl",r.form.controls.amount),d.Ab(1),d.sc("ngIf",r.amountMessage),d.Ab(1),d.sc("ngIf",r.shouldBindContract),d.Ab(1),d.sc("ngIf",r.comissionMessage&&!r.isCommissionAccountSelectable),d.Ab(2),d.sc("ngIf",null===r.commissionBalance)("ngIfElse",o),d.Ab(3),d.sc("ngIf",0==r.isOurComission),d.Ab(2),d.sc("ngIf",r.canPayCommission),d.Ab(2),d.sc("formControl",r.form.controls.notify),d.Ab(5),d.sc("ngIf",!r.form.controls.notify.value),d.Ab(1),d.sc("ngIf",r.form.controls.notify.value),d.Ab(1),d.sc("ngIf",r.isContractsAgreementShown),d.Ab(2),d.sc("ngIf",r.restoredData.status!==r.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",r.restoredData.status===r.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",r.SPINNER)("fullScreen",!1),d.Ab(1),d.sc("ngIf",r.form.controls.contract.value)}}var Br=function(t){return t.JYSAN="TSESKZKA",t}({});const Hr=qs.a.JPY,Qr=["342","343","314","312"],Gr=new RegExp(/(([a-zA-Z]{1}[a-zA-Z0-9\/\-?:().,\'+\ ]+)|([a-zA-Z]{1}))+/g),Kr=t=>!!t&&"810"!=t.substring(5,8),qr=t=>!!t&&["000","001","002"].includes(t.substring(6,9)),zr=t=>!!t&&"0"==t[0],Xr=t=>{var e,n,s;return t.value&&5!=(null===(e=t.value)||void 0===e?void 0:e.length)&&10!=(null===(n=t.value)||void 0===n?void 0:n.length)&&12!=(null===(s=t.value)||void 0===s?void 0:s.length)?{lengthMismatch:!0}:null},Zr=t=>{const e=new RegExp("^[0-9]+$");return t.value&&!t.value.match(e)?{rubInvalidNumbers:!0}:t.value&&t.value.length>8&&!zr(t.value)&&Kr(t.value)?{rubInvalid:!0}:t.value&&20!=t.value.length?{rubLength:!0}:null};let Jr=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d,m,p,h,f,g,v,y){super(b.createCurrencyForm(),o,s,i,t,e,n,a,r,l,c),this.companyService=t,this.paymentsService=e,this.maskService=n,this.route=s,this.router=i,this.api=o,this.dictionaries=r,this.authorityPermissionsService=c,this.modalService=a,this.pipelines=l,this.paymentsFormsFactory=b,this.maskPipe=u,this.recipientsService=d,this.accountsService=m,this.currencyPaymentService=p,this.translateService=h,this.curSymbolPipe=f,this.conversionService=g,this.featureFlagsService=v,this.contractsModalsService=y,this.nameMaxLength=103,this.cityMaxLength=32,this.paymentCategory=Ks.g.FOREIGN,this.isCounterPartyLoading$=new Ds.a(null),this.masks={iinOrBin:"iin",bankAccount:"foreignAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount",name:"foreignLatin",cityName:"foreignLatin",purpose:"foreignLatin",kvo:"kvo",kio:"kio",kpp:"kpp",oktmo:"oktmo",paymentBasis:"basis",budgetDocNumber:"budgetDocNumber",budgetPeriod:"budgetPeriod",rubNonRussiaCorrespondentIban:"russianAccount"},this.focusEmail$=new S.a,this.prevEmails$=new Ds.a([]),this.fetchingEmailsFor$=new Ds.a(null),this.accounts=[],this.isAccountsLoading=!0,this.contracts=[],this.filteredContracts=[],this.isContractsLoading=!1,this.isContractSelected=!1,this.withinContract=!1,this.isContractsDescriptionShown=!1,this.isContractsAgreementShown=!0,this.isContractsDescriptionLoading=!1,this.contractMaxAmount={amount:1e4,currency:qs.a.USD},this.countries=[],this.countries$=new Ds.a([]),this.hasDefaultCity=!1,this.isCityShown=!1,this.cityPlaceholder$=new Ds.a("CURRENCY_PAYMENT.RECIPIENT.CITY"),this.isBicRequired=!0,this.isIntermediaryBankSwitchable=!1,this.hasIntermediaryBank=!1,this.ibanMaxLength=34,this.amountMask="separator.2",this.amountPlaceholder="0,00",this.amountSuffix=" ",this.isCommissionAccountSelectable=!0,this.isOurComission=!1,this.canPayCommission=!0,this.commissionBalance=null,this.isKppEnabled$=new Ds.a(!1),this.isKioEnabled$=new Ds.a(!1),this.isKvoEnabled$=new Ds.a(!1),this.codeWordLabel$=new Ds.a("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"),this.isCodeWordEnabled$=new Ds.a(!1),this.isRubNonRussia$=new Ds.a(!1),this.isRubToRussia$=new Ds.a(!1),this.isRussianBudgetDisabled=!1,this.isRussianBudget$=new Ds.a(!1),this.isRussianTaxpayer=!1,this.kbkList=[],this.isKbkLoading=!1,this.statuses=[],this.isStatusesLoading=!1,this.hasRussianBudgetExtras=!1,this.isForeignContractDisabled=!1,this.isAustraliaAud$=new Ds.a(!1),this.isAustraliaNonAud$=new Ds.a(!1),this.isCountryCanada$=new Ds.a(!1),this.rules.purposeLength=335,this.featureFlagsService.checkFeatureRoute(ei.a.FOREIGN_PAYMENT).then(()=>{this.isRussianBudgetDisabled=this.featureFlagsService.isDisabled(ei.a.RUB_BUDGET_PAYMENT),this.isForeignContractDisabled=this.featureFlagsService.isDisabled(ei.a.FOREIGN_CONTRACT)}),this.isForeignContractDisabled=this.featureFlagsService.isDisabled(ei.a.FOREIGN_CONTRACT)}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.retrieveKnps(),this.retrieveAccounts(),this.retrieveCountries(),this.retrieveContracts(),this.retrieveCodeWords(),this.retrieveKbks(),this.retrieveStatuses(),this.createControlsStream(this.form),this.getMaskConfig(),this.listenCommission(),this.listenCountrySelect(),this.listenWithinContractSwitch(),this.listenContractsSwitchDescription(),this.listenContractSelect(),this.listenEmailSearch(),this.listenWorkingDays(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenPurpose(),this.listenPayComission(),this.listenIntermediaryBankSwitch(),this.listenIntermediaryBankSwitchable(),this.listenAmount(),this.applyAmountValidation(),this.listenAmountMessage(),this.setAutoNumeration(),this.listenCompanyType(),this.listenIsRussianBudget(),this.listenIsRussianTaxpayer(),this.listenHasRussianBudgetExtras(),this.listenRouterParams(),this.listenKvo(),this.listenKio(),this.listenCodeWordEnabling(),this.listenCodeWord(),this.listenCodeWordsList(),this.listenRubToNonRussia(),this.listenRubNonRussiaCorrespondentBank(),this.listenAudToAustralia(),this.listenAudNonAustralia(),this.listenCountryIsCanada(),this.listenMaxLengths(),this.applyKbeRules(),this.applyNameRules(),this.applyCountryRules(),this.applyIbanRules()}applyKbeRules(){this.subs.add(this.controlsStream.withinContract.subscribe(t=>{t?this.clearValidation([this.form.controls.kbeCode]):this.setValidation([this.form.controls.kbeCode],[i.H.required,Xs.a.kbe])}))}applyNameRules(){const{name:t}=this.form.controls,{withinContract:e,senderAccount:n}=this.controlsStream;this.subs.add(Object(Ms.a)([e,n]).pipe(Object(Us.a)()).subscribe(e=>{var n,s;const[o,r]=e,c=null===(s=null===(n=r)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,a=t.pristine;o?(t.disable(),this.clearValidation([t]),this.masks.name={mask:null}):(t.enable(),this.setValidation([t],[i.H.required]),this.masks.name=c==qs.a.RUB?zs.a.foreignCyrillic:zs.a.foreignLatin),setTimeout(()=>{a&&t.markAsPristine()},0)}))}onNamePaste(t){t.preventDefault();let e=(t.clipboardData||window.clipboardData).getData("text").substring(0,this.nameMaxLength);this.form.controls.name.setValue(e)}applyCountryRules(){const{countryCode:t}=this.form.controls,{withinContract:e,senderAccount:n,contract:s}=this.controlsStream;this.subs.add(Object(Ms.a)([e,n,s]).pipe(Object(Us.a)()).subscribe(e=>{var n,s;const[o,r]=e,c=null===(s=null===(n=r)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,a=t.pristine;if(o)t.disable(),this.clearValidation([t]);else{t.enable();const e=[i.H.required];c===qs.a.CNY&&e.push(t=>t.value!=oo.a.CN?{cnyOnlyToChina:!0}:null),this.setValidation([t],e)}setTimeout(()=>{a&&t.markAsPristine()},0)}))}onCountrySearch({term:t}){if(!t)return void this.countries$.next(this.countries);const e=this.countries.filter(e=>e.code.toLowerCase().includes(t.toLowerCase())||e.nameEn.toLowerCase().includes(t.toLowerCase())||e.nameKk.toLowerCase().includes(t.toLowerCase())||e.nameRu.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>this.countrySorter(e,n,t));this.countries$.next(e)}onCountryFocus(){this.form.controls.senderAccount.value||(this.senderAccountDropdown.hasError=!0)}onCountrySelect(t){this.hasDefaultCity=!!t.defaultCityName,this.form.controls.country.setValue(t)}countrySorter(t,e,n){if(t.code.toLowerCase()===n.toLowerCase())return-1;if(e.code.toLowerCase()===n.toLowerCase())return 1;if(t.code.toLowerCase().includes(n.toLowerCase()))return-1;if(e.code.toLowerCase().includes(n.toLowerCase()))return 1;switch(this.translateService.currentLang){case"ru":return t.nameRu<e.nameRu?-1:1;case"en":return t.nameEn<e.nameEn?-1:1;case"kz":return t.nameKk<e.nameKk?-1:1;default:return 0}}countryComparator(t,e){return!0}mapCountryLabel(t){let e;switch(this.translateService.currentLang){case"ru":default:e=t.nameRu;break;case"kz":e=t.nameKk;break;case"en":e=t.nameEn}return`${t.code} - ${e||t.name}`}get currentCountryCode(){var t,e,n;const s=(null===(n=null===(e=null===(t=this.formValue.contract)||void 0===t?void 0:t.contractor)||void 0===e?void 0:e.country)||void 0===n?void 0:n.code)||null;return this.formValue.withinContract&&s?s.substring(0,2):!this.formValue.withinContract&&this.formValue.countryCode?this.formValue.countryCode.substring(0,2):null}retrieveCountries(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.countries=yield this.currencyPaymentService.getCountries(),this.countries$.next(this.countries)}))}applyIbanRules(){const{senderAccount:t,country:e,countryCode:n,contract:s,contractId:o,bank:r,rubNonRussiaBank:c,withinContract:a}=this.controlsStream;this.subs.add(Object(Ms.a)([t,r,c,e,n,s,o,a,this.countries$]).subscribe(t=>{var e,n,s;const[o,r,c]=t,a=[i.H.required],l=null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,b=this.form.controls.bankAccount.pristine;if(l===qs.a.RUB&&this.currentCountryCode==oo.a.RU)this.masks.bankAccount=zs.a.russianAccount,a.push(t=>{var e;return((t,e)=>{const n=new RegExp("^[0-9]+$");return t.value&&!t.value.match(n)?{rubInvalidNumbers:!0}:t.value&&e&&!zr(t.value)&&qr(e)?{rubInvalidBudget:!0}:t.value&&e&&t.value.length>8&&!zr(t.value)&&Kr(t.value)?{rubInvalid:!0}:t.value&&20!=t.value.length?{rubLength:!0}:null})(t,null===(e=r)||void 0===e?void 0:e.bic)});else{const t=l===qs.a.RUB?c:r,e=null===(s=this.countries.find(e=>{var n;return e.id===(null===(n=t)||void 0===n?void 0:n.countryId)}))||void 0===s?void 0:s.code;this.masks.bankAccount=zs.a.foreignAccount,a.push(t=>((t,e)=>{var n,s,i;const o=null===(n=t.value)||void 0===n?void 0:n.substring(0,2).match(/[A-Za-z]{2}/);return e&&o&&(null===(s=t.value)||void 0===s?void 0:s.substring(0,2).toUpperCase())!=(null===(i=e)||void 0===i?void 0:i.substring(0,2).toUpperCase())?{currencyMismatch:!0}:null})(t,e)),a.push(i.H.maxLength(this.ibanMaxLength))}this.setValidation([this.form.controls.bankAccount],a),setTimeout(()=>{b&&this.form.controls.bankAccount.markAsPristine()},0)}))}mapContractLabel(t){var e,n,s,i,o;const r=this.form.getRawValue().contract;return(null===(e=t)||void 0===e?void 0:e.contractNumber)||(null===(s=null===(n=t)||void 0===n?void 0:n.contractor)||void 0===s?void 0:s.name)?`${t.contractNumber} - ${null===(i=t.contractor)||void 0===i?void 0:i.name}`:r?`${r.contractNumber} - ${null===(o=r.contractor)||void 0===o?void 0:o.name}`:""}openForeignContractsRecipientsDictionary(){return Object(Ns.a)(this,void 0,void 0,(function*(){const t=this.modals.open(no,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0}),{contract:e}=this.form.getRawValue();t.componentInstance.recipients=e.recipients;try{const e=yield t.result;this.selectContractRecipient(e)}catch(n){}}))}selectContractRecipient(t){var e,n,s,i;if(!t)return;const{name:o,country:r,countryCode:c,bankAccount:a,bank:l,cityName:b,fxContractRecipient:u,fxContractRecipientId:d}=this.form.controls;u.setValue(t),d.setValue(t.id),o.setValue(t.name||""),(null===(e=t.country)||void 0===e?void 0:e.code)&&!this.countries.find(e=>{var n;return e.code==(null===(n=t.country)||void 0===n?void 0:n.code)})&&this.countries$.next([...this.countries,t.country]),r.setValue(t.country),c.setValue((null===(n=t.country)||void 0===n?void 0:n.code)||t.countryCode),(t.cityName||t.defaultCityName)&&b.setValue(t.cityName||t.defaultCityName||""),t.iban&&a.setValue(t.iban),t.bankBic&&(l.setValue({code:t.bankBic,name:t.bankName}),null===(s=this.bankDropdown)||void 0===s||s.selectByBic(t.bankBic),null===(i=this.rubNonRussiaBankDropdown)||void 0===i||i.selectByBic(t.bankBic))}showContractDetails(t){t.preventDefault(),t.stopPropagation(),this.contractDetails.show()}onContractSelect(t,e=!1){var n,s,i;return Object(Ns.a)(this,void 0,void 0,(function*(){const{contract:o,kio:r,contractId:c}=this.form.controls,a=yield this.currencyPaymentService.getContractById(t.id);Object.assign(t,a),o.setValue(t),c.setValue(t.id),t.contractor.iinOrBin&&!e&&(null===(n=r)||void 0===n||n.setValue(t.contractor.iinOrBin));let l=null===(s=t.recipients)||void 0===s?void 0:s.find(t=>t.primary);const{fxContractRecipient:b,fxContractRecipientId:u}=this.form.getRawValue();if(!b&&!u&&l)return void this.selectContractRecipient(l);const d=null===(i=t.recipients)||void 0===i?void 0:i.find(t=>{var e;return(null===(e=b)||void 0===e?void 0:e.id)===t.id||u===t.id});d&&(l=d),this.selectContractRecipient(l)}))}contractComparator(t,e){if(!t)return!0;const n=e.contractor.name.toLowerCase().includes(t.toLowerCase()),s=e.contractNumber.toLowerCase().includes(t.toLowerCase());return n||s}onEmailOnSuccessFocus(t){this.focusEmail$.next(t.target.value)}onSenderAccountSelect(t){t&&(this.form.controls.senderAccount.setValue(t),this.form.controls.senderAccount.markAsDirty(),this.senderAccountDropdown.hasError=!1)}onCommissionAccountSelect(t){this.form.controls.commissionAccount.setValue(t)}get senderAccountsList(){return this.accounts.filter(t=>t.balance.currency!=qs.a.KZT)}get commissionAccountsList(){const t=this.form.getRawValue().senderAccount;return this.accounts.filter(e=>{var n,s;return e.balance.currency==qs.a.KZT||e.balance.currency==(null===(s=null===(n=t)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency)})}codeWordComparator(t,e){return!t||e.name.toLowerCase().includes(t.toLowerCase())||e.code.toLowerCase().includes(t.toLowerCase())}kbkComparator(t,e){return!t||e.code.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())}statusComparator(t,e){return!t||e.code.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())}scrollToContracts(t){return Object(Ns.a)(this,void 0,void 0,(function*(){t.preventDefault(),yield this.form.controls.withinContract.setValue(!0),setTimeout(()=>{document.getElementById("contractGroup").scrollIntoView({behavior:"smooth"}),this.contractsSelect.focus(),this.contractsSelect.open()},100)}))}onAmountPaste(t){var e,n;t.preventDefault();const s=this.form.getRawValue(),i=(t.clipboardData||window.clipboardData).getData("text");let o=this.maskService.getNumberedAmount(i);(null===(n=null===(e=s.senderAccount)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)==Hr&&(o=Math.trunc(o)),this.form.controls.amount.setValue(o)}mapCodeWordLabel(t){if(t)return`${t.code} - ${t.name}`}listenMaxLengths(){this.subs.add(Object(Ms.a)([this.isAustraliaAud$,this.isAustraliaNonAud$,this.isCountryCanada$,this.isRubNonRussia$,this.isRubToRussia$,this.controlsStream.name,this.controlsStream.purpose,this.purposeMessage$,this.controlsStream.countryCode]).subscribe(t=>{var e,n;let[s,o,r,c,a,l,b,u]=t;if(a=a||"",l=l||"",b=b||"",s?(this.nameMaxLength=35,this.cityMaxLength=26):o?(this.nameMaxLength=35,this.cityMaxLength=31):r?(this.nameMaxLength=35,this.cityMaxLength=32):(this.nameMaxLength=103,this.cityMaxLength=32),c||r){this.rules.purposeLength=203;const t=a.match(Gr);(null===(e=t)||void 0===e?void 0:e.length)>0&&(this.nameMaxLength-=2*t.length);const s=l.match(Gr);(null===(n=s)||void 0===n?void 0:n.length)>0&&(this.rules.purposeLength-=2*s.length)}else this.rules.purposeLength=u==oo.a.CN?300:335;this.setValidation([this.form.controls.purpose],[i.H.maxLength(u===oo.a.CN?this.rules.purposeLength:this.rules.purposeLength-b.length)],!1)}))}listenAudToAustralia(){this.subs.add(this.isAustraliaAud$.subscribe(t=>{const{audIndex:e,audState:n,audStreet:s,audBuildingNumber:o}=this.form.controls;t?this.setValidation([e,n,s,o],[i.H.required]):this.clearValidation([e,n,s,o])}))}listenAudNonAustralia(){this.subs.add(this.isAustraliaNonAud$.subscribe(t=>{const{audAddress:e}=this.form.controls;t?this.setValidation([e],[i.H.required]):this.clearValidation([e])}))}listenCountryIsCanada(){this.subs.add(this.isCountryCanada$.subscribe(t=>{const{canAddress:e}=this.form.controls;t?this.setValidation([e],[i.H.required]):this.clearValidation([e])}))}listenCompanyType(){this.subs.add(this.companyService.refresh$.subscribe(t=>{this.companyService.currentCompany.type==Zs.b.CORPORATE?(this.agreementText="CURRENCY_PAYMENT.AGREEMENT.CORPORATE",this.isForeignContractDisabled&&(this.isContractsAgreementShown=!1),this.isContractsDescriptionShown=!0):(this.agreementText="CURRENCY_PAYMENT.AGREEMENT.ENTREPRENEUR",this.isForeignContractDisabled&&(this.isContractsAgreementShown=!0),this.isContractsDescriptionShown=!1)}))}retrieveKnps(){this.knp$=this.combineKNP([t=>this.dictionaries.selectByPaymentType(t,{type:Ks.i.FOREIGN,sortFavourite:!1})])}retrieveAccounts(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.isAccountsLoading=!0;try{const t=yield this.accountsService.getAccounts(this.companyService.currentId);this.accounts=t.filter(t=>t.balance.currency&&t.accountType==l.a.ACCOUNT).sort(this.sortAccounts),this.selectDefaultSenderAccount(),this.listenCommissionAccount()}catch(t){}finally{this.isAccountsLoading=!1}}))}selectDefaultSenderAccount(){try{1==this.senderAccountsList.length&&(this.senderAccountDropdown.selectAccount(this.senderAccountsList[0]),this.onSenderAccountSelect(this.senderAccountsList[0]),this.senderAccountDropdown.isDisabled=!0)}catch(t){}}retrieveContracts(){var t,e;return Object(Ns.a)(this,void 0,void 0,(function*(){this.isContractsLoading=!0;try{const n=yield this.currencyPaymentService.getContracts();this.contracts=n.filter(t=>t.status===Ks.c.REGED);const s=null===(e=null===(t=this.formValue.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency;this.filteredContracts=s?this.contracts.filter(t=>t.permittedCurrencies.includes(s)):[...this.contracts]}catch(n){}finally{this.isContractsLoading=!1}}))}retrieveKbks(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.isKbkLoading=!0;try{this.kbkList=yield this.currencyPaymentService.getKbkList()}catch(t){}finally{this.isKbkLoading=!1}}))}retrieveStatuses(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.isStatusesLoading=!0;try{this.statuses=yield this.currencyPaymentService.getStatuses()}catch(t){}finally{this.isStatusesLoading=!1}}))}retrieveCodeWords(t=this.currentCountryCode){return Object(Ns.a)(this,void 0,void 0,(function*(){if(!this.isCodeWordsLoading){this.isCodeWordsLoading=!0;try{if(t){this.codeWords=yield this.currencyPaymentService.getCodeWords(t);const e=this.form.controls.codeWord.value;this.codeWords.find(t=>e.code===t.code&&e.countryCode===t.countryCode)||this.form.controls.codeWord.setValue("")}}catch(e){}finally{this.isCodeWordsLoading=!1}}}))}listenCountrySelect(){const{countryCode:t,senderAccount:e,country:n}=this.controlsStream;this.subs.add(Object(Ms.a)([t,e,n]).pipe(Object(Us.a)()).subscribe(t=>{var e,n;const[s,o]=t;s&&(this.form.controls.bankLabel.setValue(""),this.form.controls.bank.setValue(null),(null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)==qs.a.RUB||this.hasDefaultCity?(this.isCityShown=!1,this.clearValidation([this.form.controls.cityName])):(this.isCityShown=!0,this.setValidation([this.form.controls.cityName],[i.H.required])))}))}listenContractsSwitchDescription(){this.subs.add(this.controlsStream.senderAccount.subscribe(t=>{var e,n,s,i,o,r;this.filteredContracts=this.contracts.filter(e=>{var n,s,i;return null===(n=e.permittedCurrencies)||void 0===n?void 0:n.includes(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)}),(null===(n=null===(e=this.formValue.contract)||void 0===e?void 0:e.amount)||void 0===n?void 0:n.currency)!==(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)&&(this.form.controls.contract.setValue(null),this.form.controls.contractId.setValue("")),this.updateContractsSwitchDescriptionParams((null===(r=null===(o=t)||void 0===o?void 0:o.balance)||void 0===r?void 0:r.currency)||null)}))}listenIsRussianBudget(){this.subs.add(Object(Ms.a)([this.controlsStream.senderAccount,this.controlsStream.bankAccount,this.controlsStream.bank,this.controlsStream.withinContract,this.controlsStream.contract,this.controlsStream.country]).subscribe(t=>{var e,n,s;const[i,o,r]=t,c=zr(o)&&qr(null===(e=r)||void 0===e?void 0:e.bic);this.currentCountryCode==oo.a.RU&&(null===(s=null===(n=i)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency)===qs.a.RUB&&c&&!this.featureFlagsService.isDisabled(ei.a.RUB_BUDGET_PAYMENT)?(this.isRussianBudget$.next(!0),this.form.controls.isRussianBudget.setValue(!0)):(this.isRussianBudget$.next(!1),this.form.controls.isRussianBudget.setValue(!1))}))}listenWithinContractSwitch(){const{withinContract:t,senderAccount:e,contract:n,country:s}=this.controlsStream;this.subs.add(Object(Ms.a)([t,e,n,s]).pipe(Object(Us.a)()).subscribe(t=>{var e,n,s;const[o,r,c,a]=t;this.withinContract=o;const l=null===(n=null===(e=r)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,{bank:b,bankLabel:u}=this.form.controls,d=[b,u];if(this.currentCountryCode===oo.a.US?(this.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_STATE"),this.clearValidation([this.form.controls.bankLabel,this.form.controls.bank])):this.cityPlaceholder$.next(this.formValue.isRubNonRussia?"CURRENCY_PAYMENT.RECIPIENT.CITY_BANK":"CURRENCY_PAYMENT.RECIPIENT.CITY"),o){const t=l===qs.a.RUB;!(null===(s=c)||void 0===s?void 0:s.contractor.iinOrBin)&&t?this.isKioEnabled$.next(!0):this.isKioEnabled$.next(!1),this.clearValidation(d),this.setValidation([this.form.controls.contractId],[t=>this.currentCountryCode!=oo.a.CN&&l==qs.a.CNY?{cnyOnlyToChina:!0}:null,i.H.required],!1);const e=l===qs.a.AUD,n=this.currentCountryCode===oo.a.CA,o=this.currentCountryCode===oo.a.AU;this.isAustraliaAud$.next(e&&o),this.isAustraliaNonAud$.next(!e&&o),this.isCountryCanada$.next(n),this.currentCountryCode&&l==qs.a.RUB&&(this.rubNonRussiaWithinContractCountry=c.contractor.country.code,this.applyRubPaymentRules(this.rubNonRussiaWithinContractCountry))}else{this.form.controls.contract.setValue(null,{emitEvent:!1}),this.form.controls.contractId.setValue(null),this.clearValidation([this.form.controls.contractId]),this.setValidation(d,[i.H.required]);const t=l===qs.a.AUD,e=this.currentCountryCode===oo.a.AU,n=this.currentCountryCode===oo.a.CA;this.isAustraliaAud$.next(t&&e),this.isAustraliaNonAud$.next(!t&&e),this.isCountryCanada$.next(n),l===qs.a.RUB?this.applyRubPaymentRules(this.currentCountryCode):l===qs.a.CNY?(this.form.controls.codeWord.setValue(""),this.applyChinaPaymentRules(this.currentCountryCode)):this.applyDefaultPaymentRules()}}))}listenCodeWordEnabling(){const{withinContract:t,contract:e,country:n}=this.controlsStream;this.subs.add(Object(Ms.a)([t,e,n]).subscribe(t=>{this.currentCountryCode===oo.a.AE?(this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD_AE")):this.currentCountryCode===oo.a.CN?(this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")):(this.isCodeWordEnabled$.next(!1),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"))}))}listenContractSelect(){this.subs.add(this.controlsStream.contractId.pipe(Object(Us.a)()).subscribe(t=>{this.isContractSelected=!!t}))}updateContractsSwitchDescriptionParams(t=qs.a.USD){return Object(Ns.a)(this,void 0,void 0,(function*(){if(t&&t!==qs.a.USD){this.isContractsDescriptionLoading=!0;const e={currencyFrom:t,currencyTo:qs.a.USD,sum:{amount:1e4,currency:qs.a.USD}};try{const n=yield this.conversionService.getRate(e);this.contractMaxAmount={amount:n.calculatedSum,currency:t}}catch(s){this.contractMaxAmount={amount:1e4,currency:qs.a.USD}}finally{this.isContractsDescriptionLoading=!1}}else this.contractMaxAmount={amount:1e4,currency:qs.a.USD};let e=this.maskService.getMaskedAmount(this.contractMaxAmount.amount);e=e.split(",").filter(t=>parseInt(t)>0).map((t,e)=>1==e&&t.length<2?`${t}0`:t).join(",");const n=this.curSymbolPipe.transform(this.contractMaxAmount.currency);this.contractsSwitchDescriptionParams={amount:`${e} ${n}`}}))}openForeignRecipientsDictionary(){var t,e;return Object(Ns.a)(this,void 0,void 0,(function*(){const n=this.modals.open(qi,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0});try{const s=yield n.result,{countryCode:i,cityName:o,name:r,bankAccount:c,kbeCode:a,bank:l,kio:b}=this.form.controls,{recipient:u,account:d}=s;i.setValue(u.countryCode),o.setValue(u.cityName||""),r.setValue(u.name||""),c.setValue(d.iban),a.setValue(u.kbe.code),l.setValue({bic:d.bic,name:d.bankName}),this.bankDropdown.selectByBic(d.bic),null===(t=this.rubNonRussiaBankDropdown)||void 0===t||t.selectByBic(d.bic),null===(e=b)||void 0===e||e.setValue(u.iinOrBin)}catch(s){}}))}get formValue(){return this.form.getRawValue()}get shouldBindContract(){var t,e;return-1==Qr.indexOf(this.formValue.knp)&&!this.isForeignContractDisabled&&(null===(e=null===(t=this.formValue.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency)===this.contractMaxAmount.currency&&null==this.formValue.contractId&&this.maskService.getNumberedAmount(this.formValue.amount)>this.contractMaxAmount.amount}applyAmountValidation(){this.subs.add(Object(Ms.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe(t=>{var e,n;const[s,o]=t;let r=[i.H.required,i.H.min(this.paymentsService.rules.minAmount),i.H.max(this.paymentsService.rules.maxAmount),t=>{var e;return 0==(null===(e=t)||void 0===e?void 0:e.value)?{cantBeZero:!0}:null}];(null===(n=null===(e=s)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)!==this.contractMaxAmount.currency||o||r.push(t=>{const e=this.maskService.getNumberedAmount(t.value);if(!this.isForeignContractDisabled)return e>this.contractMaxAmount.amount?-1!=Qr.indexOf(this.formValue.knp)?null:{mustIncludeContract:!0}:null}),this.setValidation([this.form.controls.amount],r,!1)}))}setValidation(t,e,n=!0){t.forEach(t=>{const s=t.pristine;t.setValidators(e),t.updateValueAndValidity({emitEvent:n}),setTimeout(()=>{s&&t.markAsPristine()},0)})}clearValidation(t,e=!0){t.forEach(t=>{const n=t.pristine;t.clearValidators(),t.updateValueAndValidity({emitEvent:e}),setTimeout(()=>{n&&t.markAsPristine()},0)})}listenPayComission(){this.subs.add(this.controlsStream.payComission.pipe(Object(Us.a)()).subscribe(t=>{this.isOurComission=t}))}listenIntermediaryBankSwitchable(){const{senderAccount:t,country:e,bank:n}=this.controlsStream;this.subs.add(Object(Ms.a)([t,e,n]).subscribe(t=>{var e,n,s;const[i,o,r]=t,c=null===(n=null===(e=i)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,a=null===(s=r)||void 0===s?void 0:s.bic;(c==qs.a.EUR||c==qs.a.USD&&this.currentCountryCode!=oo.a.US)&&a!=Br.JYSAN?(this.isIntermediaryBankSwitchable=!0,this.setValidation([this.form.controls.intermediaryBankLabel],[t=>{const e=this.form.getRawValue();return t.value&&t.value===e.bankLabel?{equalBanks:!0}:null}])):(this.clearValidation([this.form.controls.intermediaryBankLabel]),this.isIntermediaryBankSwitchable=!1)}))}listenIntermediaryBankSwitch(){this.subs.add(this.controlsStream.hasIntermediaryBank.pipe(Object(Us.a)()).subscribe(t=>{this.hasIntermediaryBank=t,t||(this.form.controls.intermediaryBankLabel.setValue(""),this.form.controls.intermediaryBank.setValue(null))}))}listenEmailSearch(){const{emailOnSuccess:t}=this.form.controls;this.subs.add(this.controlsStream.notify.pipe(Object(tt.a)(100)).subscribe(e=>e?t.enable():t.disable())),this.search=t=>Object(Ms.a)([this.prevEmails$.pipe(Object(nt.a)(t=>t.map(t=>t.email))),t.pipe(Object(tt.a)(200),Object(Us.a)(),Object(Z.a)("")),this.focusEmail$]).pipe(Object(nt.a)(([t,e,n])=>e?t.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,3):t.slice(0,3)))}setAutoNumeration(){this.subs.add(this.paymentsService.foreignPaymentNumber$.pipe(Object(Ys.a)(this.controlsStream.number)).subscribe(([t,e])=>{e||this.form.controls.number.setValue(t)}))}listenCommission(){const{senderAccount:t,date:e,commissionAccount:n,amount:s,payComission:i}=this.controlsStream;Object(Ms.a)([t,e,n,s,i,this.workingHours$.asObservable()]).pipe(Object(tt.a)(300)).subscribe(t=>{this.updateComission()})}updateComission(){var t,e,n,s,i,o,r,c,a,l,b,u;return Object(Ns.a)(this,void 0,void 0,(function*(){const{senderAccount:d,date:m,commissionAccount:p,amount:h,payComission:f}=this.form.controls;let g=!0;if([d,m,p,h,f].forEach(t=>{t.invalid&&(g=!1)}),!g)return;const v=this.form.getRawValue();try{const d=v.date?Object(ht.ngbStructToISO)(v.date):null,m=this.maskService.getNumberedAmount(v.amount),p={companyId:this.companyService.currentId,category:Ks.g.FOREIGN,type:Ks.i.FOREIGN,details:{valueDate:d,paymentAmount:{amount:m,currency:null===(e=null===(t=v.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency},foreignPaymentDetails:{type:v.payComission?"OUR":"SHA"},urgent:!1,payerIban:v.senderAccount.iban}};this.commissionBalance=yield this.api.getCommissionWithCurrency(p),this.form.controls.comission.setValue((null===(n=this.commissionBalance)||void 0===n?void 0:n.amount)||0),this.form.controls.comissionCurrency.setValue(this.commissionBalance.currency),this.comissionMessage=(null===(i=null===(s=v.commissionAccount)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.amount)<(null===(o=this.commissionBalance)||void 0===o?void 0:o.amount)&&(null===(c=null===(r=v.commissionAccount)||void 0===r?void 0:r.balance)||void 0===c?void 0:c.currency)===(null===(a=this.commissionBalance)||void 0===a?void 0:a.currency)?this.mapCommissionMessage({amount:(null===(l=this.commissionBalance)||void 0===l?void 0:l.amount)-(null===(u=null===(b=v.commissionAccount)||void 0===b?void 0:b.balance)||void 0===u?void 0:u.amount),currency:this.commissionBalance.currency}):null}catch(y){this.commission$.next(null),this.comissionMessage=null}}))}mapCommissionMessage(t,e=this.workingHours$.value){var n;const s=this.form.getRawValue().date;let i=`\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ${this.maskService.formatAmount(t.amount)} ${this.curSymbolPipe.transform(t.currency)} \u043d\u0430 \u0441\u0447\u0435\u0442\u0435 \u0434\u043b\u044f \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438. \u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0431\u0430\u043b\u0430\u043d\u0441 `;const o=(null===(n=e)||void 0===n?void 0:n.endTime)||ht.edgeTimeLabel;return s&&(i+=`\u043d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 <span class="text-danger">${Object(ht.formatNgbDate)(s,"g")} ${o}</span> `),i+="\u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u0411\u0430\u043d\u043a\u043e\u043c",i}mapAmountMessage(t,e=this.workingHours$.value){var n;const s=this.form.getRawValue().date;let i=`\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 ${this.maskService.formatAmount(t.amount)} ${this.curSymbolPipe.transform(t.currency)} \u043d\u0430 \u0441\u0447\u0435\u0442\u0435. \u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0431\u0430\u043b\u0430\u043d\u0441 `;const o=(null===(n=e)||void 0===n?void 0:n.endTime)||ht.edgeTimeLabel;return s&&(i+=`\u043d\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435 <span class="text-danger">${Object(ht.formatNgbDate)(s,"g")} ${o}</span> `),i+="\u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u0411\u0430\u043d\u043a\u043e\u043c",i}sortAccounts(t,e){return t.balance.currency===e.balance.currency?0:t.balance.currency===qs.a.USD?-1:1}listenAmount(){const{amount:t}=this.form.controls;this.subs.add(this.controlsStream.senderAccount.pipe(Object(Us.a)(),Object(nt.a)(e=>{var n,s;const i=null===(s=null===(n=e)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,o=t.pristine;return this.amountSuffix=` ${this.curSymbolPipe.transform(i)||i||this.curSymbolPipe.transform(qs.a.KZT)}`,i==Hr?(this.amountMask="separator.0",this.amountPlaceholder="0"):(this.amountMask="separator.2",this.amountPlaceholder="0,00"),o}),Object(Bs.a)(0)).subscribe(e=>{e&&e!==t.pristine&&t.markAsPristine()}))}listenAmountMessage(){const{senderAccount:t,date:e,amount:n,contractId:s}=this.controlsStream;Object(Ms.a)([t,e,n,s,this.workingHours$.asObservable()]).pipe(Object(Us.a)()).subscribe(t=>{var e,n,s,i;const[o,r,c,a,l]=t,b=this.maskService.getNumberedAmount(c),u=(null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.amount)<b&&!this.shouldBindContract;this.amountMessage=u?this.mapAmountMessage({amount:b-(null===(i=null===(s=o)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.amount),currency:o.balance.currency}):null})}listenCommissionAccount(){this.subs.add(this.controlsStream.senderAccount.pipe(Object(Us.a)()).subscribe(t=>{var e,n,s,i,o,r,c,a;const l=this.form.getRawValue().commissionAccount;if(l&&(null===(n=null===(e=l)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)!=(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)&&(this.commissionAccountDropdown.clearSelected(),this.onCommissionAccountSelect(null)),1==this.commissionAccountsList.length){const t=this.commissionAccountsList[0];null===(o=this.commissionAccountDropdown)||void 0===o||o.selectAccount(t),this.onCommissionAccountSelect(t),this.isCommissionAccountSelectable=!1}else this.isCommissionAccountSelectable=!0;const b=this.commissionAccountsList.filter(t=>t.balance.currency===qs.a.KZT);1==(null===(r=b)||void 0===r?void 0:r.length)?(null===(c=this.commissionAccountDropdown)||void 0===c||c.selectAccount(b[0]),this.onCommissionAccountSelect(b[0])):0===b.length&&t&&(null===(a=this.commissionAccountDropdown)||void 0===a||a.selectAccount(t),this.onCommissionAccountSelect(t))}))}saveToDraft(t){var e;this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();const n=this.paymentsService.foreignPaymentNumber,s=t||Object.assign({},this.form.value);n.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},s)),this.pipeline.saveToDrafts(s,{paymentId:this.paymentId,type:Ks.i.FOREIGN,commission:null===(e=this.commissionBalance)||void 0===e?void 0:e.amount,userPurpose:this.form.value.purpose,category:Ks.g.FOREIGN}).then(t=>{t.id!==this.paymentId&&(t&&(this.restoredData={status:t.status,signatures:t.signatures,companyId:t.companyId}),this.router.navigate([this.route.snapshot.params.paymentId?"../":".",t.id],{relativeTo:this.route,state:{silent:!0,resolvedPayment:this.currencyPaymentService.mapForm(this.form.getRawValue())}}))}).catch(t=>{n.entity||n.fetching||(n.entity=s.number)}).finally(()=>{this.processingPayment$.next(null)})}listenRouterParams(){this.subs.add(this.route.params.pipe(Object(nt.a)(t=>({state:window.history.state,params:t,route:this.route})),Object(tt.a)(0),Object(Hs.a)(({params:t,state:e})=>{var n,s,i;if(null===(n=e)||void 0===n?void 0:n.silent)return this.restoredData.status===Ks.h.DRAFT?this.paymentsService.rootTitle=oo.d.EDIT_DRAFT:this.restoredData.status===Ks.h.CREATED&&(this.paymentsService.rootTitle=oo.d.EDIT_PAYMENT),Ls.a;if(null===(s=e)||void 0===s?void 0:s.resolvedPayment)return Object($s.a)(e.resolvedPayment);if(t.paymentId||(null===(i=e)||void 0===i?void 0:i.repeatPaymentId)){const n=t.paymentId||e.repeatPaymentId;return Object(Fs.a)(this.api.getPaymentById(n)).pipe(Object(Qs.a)(t=>(this.router.navigate([this.router.url.replace("/"+n,"")]),Ls.a)))}return this.setAutoNumeration(),this.paymentsService.rootTitle=oo.d.NEW,Ls.a})).subscribe(t=>{this.restorePayment(t)}))}restorePayment(t){this.subs.add(Object(Ms.a)([this.knpStore.fetched$]).pipe(Object(et.a)(t=>t.every(t=>t)),Object(J.a)(()=>{var e;let n;try{n=this.pipeline.flattenPaymentToModel(t)}catch(s){n={}}this.restoredData={companyId:t.companyId,status:null===(e=t.status)||void 0===e?void 0:e.code,signatures:t.signatures},t.isNewPayment||t.id&&!this.paymentId?(n.number="",n.date=null,this.restoredData.status=null,this.paymentsService.rootTitle=oo.d.NEW):this.paymentsService.rootTitle=this.restoredData.status===Ks.h.DRAFT?oo.d.EDIT_DRAFT:oo.d.EDIT_PAYMENT,n.emailOnSuccess&&(n.notify=!0),this.form.patchValue(Object.assign({},n)),this.restoreAsyncData(t),this.isImported=t.imported,n.number||this.setAutoNumeration()}),Object(tt.a)(10),Object(Gs.a)(1)).subscribe())}sendPayment(t){var e,n;this.formDirective.form.markAsPristine();const s=this.paymentsService.paymentNumber,i=t||Object.assign({},this.form.value);return this.processingPayment$.next(i),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:i.amount,commission:null===(e=this.commissionBalance)||void 0===e?void 0:e.amount,status:null===(n=this.restoredData)||void 0===n?void 0:n.status,userPurpose:this.form.value.purpose,rawBody:i}).then(t=>{t?this.restoredData={status:t.status.code,signatures:t.signatures,companyId:t.companyId}:(this.restoredData=null,s.entity||s.fetching||(s.entity=i.number))}).catch(t=>{}).finally(()=>{this.processingPayment$.next(null)})}onSubmit(t){t&&t.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}processPayment(){return Object(Ns.a)(this,void 0,void 0,(function*(){const t=this.form.getRawValue();this.processingPayment$.next(t);try{const e=yield this.api.checkWorkingTime(t.date),n=yield this.api.checkAmountLimit(t.amount,this.paymentType);e&&n?this.sendPayment():this.processingPayment$.next(null)}catch(e){this.processingPayment$.next(null)}}))}openContractsAddingModal(t=null){var e;null===(e=t)||void 0===e||e.preventDefault(),this.contractsModalsService.showAddContractModal(!1)}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{this.modals.open(li,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>{this.form.controls.knp.patchValue(t),this.form.controls.knpObject.patchValue(t)}).catch(()=>{})},0)}restoreAsyncData(t){var e,n,s,o,r,c,a,l,b,u,d,m,p,h,f,g,v;return Object(Ns.a)(this,void 0,void 0,(function*(){yield this.retrieveAccounts(),this.senderAccountDropdown.selectByIban(null===(e=t.details)||void 0===e?void 0:e.payerIban);const y=null===(o=null===(s=null===(n=t)||void 0===n?void 0:n.paymentRecipient)||void 0===s?void 0:s.recipientAccount)||void 0===o?void 0:o.bic,R=null===(a=null===(c=null===(r=t)||void 0===r?void 0:r.details)||void 0===c?void 0:c.foreignPaymentDetails)||void 0===a?void 0:a.intermediaryBankBic,C=null===(u=null===(b=null===(l=t)||void 0===l?void 0:l.details)||void 0===b?void 0:b.foreignPaymentDetails)||void 0===u?void 0:u.intermediaryBankIban;(null===(d=this.formValue.senderAccount)||void 0===d?void 0:d.balance.currency)==qs.a.RUB&&this.currentCountryCode!=oo.a.RU&&this.isRubNonRussia$.next(!0),y&&setTimeout(()=>{var t,e;this.formValue.isRubNonRussia?null===(t=this.rubNonRussiaBankDropdown)||void 0===t||t.selectByBic(y):null===(e=this.bankDropdown)||void 0===e||e.selectByBic(y)},100),R&&setTimeout(()=>{var t;this.formValue.isRubNonRussia?this.rubNonRussiaCorrespondentBankDropdown.selectByBic(R):null===(t=this.intermediaryBankDropdown)||void 0===t||t.selectByBic(R)},100),C&&this.formValue.isRubNonRussia&&this.form.controls.rubNonRussiaCorrespondentIban.setValue(C),this.withinContract&&this.onContractSelect(this.formValue.contract,!0),(null===(m=t.details)||void 0===m?void 0:m.foreignPaymentDetails.codeWord)&&(yield this.retrieveCodeWords(),this.form.controls.codeWord.setValue(t.details.foreignPaymentDetails.codeWord)),this.commissionAccountDropdown.selectByIban(t.details.foreignPaymentDetails.commissionWithdrawalIban),this.hasDefaultCity=!!(null===(h=null===(p=t.paymentRecipient)||void 0===p?void 0:p.country)||void 0===h?void 0:h.defaultCityName),(null===(v=null===(g=null===(f=t)||void 0===f?void 0:f.details)||void 0===g?void 0:g.paymentAmount)||void 0===v?void 0:v.currency)==qs.a.RUB||this.hasDefaultCity?(this.isCityShown=!1,this.clearValidation([this.form.controls.cityName])):(this.isCityShown=!0,this.setValidation([this.form.controls.cityName],[i.H.required]))}))}listenPurposeMessageStream(){this.subs.add(Object(Ms.a)([this.purposeMessage$,this.controlsStream.purpose,this.controlsStream.countryCode]).pipe(Object(nt.a)(t=>{const[e,n,s]=t;return s==oo.a.CN?(n||"").length:(e||"").length+(n||"").length})).subscribe(this.purposeLength$)),this.validatePurpose()}listenIsRussianTaxpayer(){this.subs.add(this.controlsStream.isRussianTaxPayer.subscribe(t=>{t?(this.isRussianTaxpayer=!0,this.setValidation([this.form.controls.payerInn],[i.H.required,Xr])):(this.isRussianTaxpayer=!1,this.clearValidation([this.form.controls.payerInn]))}))}listenHasRussianBudgetExtras(){this.subs.add(this.controlsStream.hasRussianBudgetExtras.subscribe(t=>{this.hasRussianBudgetExtras=!!t}))}listenKvo(){this.subs.add(this.isKvoEnabled$.pipe(Object(Us.a)()).subscribe(t=>{t?this.setValidation([this.form.controls.kvo],[i.H.required]):this.clearValidation([this.form.controls.kvo])}))}listenPurpose(){this.subs.add(Object(Ms.a)([this.isKvoEnabled$.pipe(Object(Us.a)()),this.controlsStream.kvo.pipe(Object(Us.a)()),this.controlsStream.isRubNonRussia.pipe(Object(Us.a)()),this.controlsStream.name.pipe(Object(Us.a)()),this.controlsStream.withinContract.pipe(Object(Us.a)()),this.controlsStream.bankAccount,this.controlsStream.country,this.controlsStream.countryCode,this.controlsStream.codeWord]).subscribe(t=>{var e;const[n,s,i,o,r,c,a,l,b]=t;let u="";n&&(u+=`'(VO${s||""})'`),i&&!r&&(u+=` \u0434\u043b\u044f ${o||""} \u0441\u0447\u0451\u0442 '${c||""}'`),l==oo.a.CN&&(u+=`//${(null===(e=b)||void 0===e?void 0:e.code)||""}`),this.purposeMessage$.next(u)}))}listenKio(){this.subs.add(Object(Ms.a)([this.isKioEnabled$,this.isRussianBudget$]).pipe(Object(Us.a)()).subscribe(t=>{const[e,n]=t;if(e){let t;t=n?[Xr,i.H.required]:[Xr],this.setValidation([this.form.controls.kio],t)}else this.clearValidation([this.form.controls.kio])}))}listenCodeWordsList(){const{country:t,countryCode:e,contract:n,withinContract:s}=this.controlsStream;this.subs.add(Object(Ms.a)([t,e,n,s]).subscribe(t=>{this.retrieveCodeWords()}))}listenCodeWord(){this.subs.add(this.isCodeWordEnabled$.pipe(Object(Us.a)()).subscribe(t=>{t?this.setValidation([this.form.controls.codeWord],[i.H.required]):this.clearValidation([this.form.controls.codeWord])}))}listenRubToNonRussia(){this.subs.add(Object(Ms.a)([this.isRussianBudget$,this.isRubToRussia$,this.isRubNonRussia$,this.controlsStream.senderAccount,this.controlsStream.contract,this.controlsStream.withinContract,this.controlsStream.bankAccount,this.controlsStream.bank]).subscribe(t=>{var e;const[n,s,o,r,c,a,l,b]=t;this.form.controls.isRubNonRussia.setValue(o);const u=null===(e=c)||void 0===e?void 0:e.contractor.bankCountryCode;o?(u&&u==oo.a.RU?setTimeout(()=>{this.rubNonRussiaCorrespondentBankDropdown.selectByBic(c.contractor.bank.code)},100):u&&u!=oo.a.RU&&setTimeout(()=>{var t;this.rubNonRussiaBankDropdown.selectByBic(null===(t=this.formValue.contract)||void 0===t?void 0:t.contractor.bank.code)},100),this.clearValidation([this.form.controls.bank,this.form.controls.bankLabel],!1),this.setValidation([this.form.controls.rubNonRussiaCorrespondentBankLabel],[i.H.required]),this.setValidation([this.form.controls.rubNonRussiaCorrespondentIban],[i.H.required,Zr])):(a?this.clearValidation([this.form.controls.bank,this.form.controls.bankLabel],!1):(this.setValidation([this.form.controls.bank],[i.H.required],!1),this.setValidation([this.form.controls.bankLabel],[i.H.required,t=>{var e,n,s,i,o,c;return this.currentCountryCode==oo.a.RU&&(null===(n=null===(e=r)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)===qs.a.RUB&&zr(l)&&qr(null===(s=b)||void 0===s?void 0:s.bic)&&this.isRussianBudgetDisabled?{rubBudgetDisabled:!0}:this.currentCountryCode==oo.a.RU&&(null===(o=null===(i=r)||void 0===i?void 0:i.balance)||void 0===o?void 0:o.currency)===qs.a.RUB&&zr(l)&&!qr(null===(c=b)||void 0===c?void 0:c.bic)?{rubBudgetWrongBic:!0}:null}])),this.clearValidation([this.form.controls.rubNonRussiaCorrespondentBankLabel,this.form.controls.rubNonRussiaCorrespondentIban]))}))}listenRubNonRussiaCorrespondentBank(){this.subs.add(this.controlsStream.rubNonRussiaBank.subscribe(t=>{var e;(null===(e=t)||void 0===e?void 0:e.cityName)&&this.form.controls.cityName.setValue(t.cityName)}))}applyRubPaymentRules(t){t&&(this.applyRubPurposeRules(),t==oo.a.RU?(this.isRubNonRussia$.next(!1),this.isRubToRussia$.next(!0),this.applyRubToRussiaKvoAndKioRules(),this.applyRubToRussiaPayCommissionRules()):(this.isRubNonRussia$.next(!0),this.isRubToRussia$.next(!1),this.applyRubToNonRussiaCorrespondentRules(),this.applyRubToNonRussiaKvoAndKioRules()))}applyRubPurposeRules(){this.masks.purpose=zs.a.foreignCyrillic}applyRubToRussiaKvoAndKioRules(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!0),this.isKppEnabled$.next(!0)}applyRubToRussiaPayCommissionRules(){this.canPayCommission=!1,this.form.controls.payComission.setValue(!1)}applyRubToNonRussiaCorrespondentRules(){this.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_BANK")}applyRubToNonRussiaKvoAndKioRules(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!1),this.isKppEnabled$.next(!1)}applyDefaultPaymentRules(){this.isRubNonRussia$.next(!1),this.applyDefaultPaymentPurposeRules(),this.applyDefaultPaymentKvoAndKioRules(),this.applyDefaultPaymentPayCommissionRules(),this.applyDefaultPaymentCodeWordRules()}applyDefaultPaymentPayCommissionRules(){this.canPayCommission=!0}applyDefaultPaymentPurposeRules(){this.masks.purpose=zs.a.foreignLatin}applyDefaultPaymentKvoAndKioRules(){this.isKioEnabled$.next(!1),this.isKvoEnabled$.next(!1),this.isKppEnabled$.next(!1)}applyDefaultPaymentCodeWordRules(){this.isCodeWordEnabled$.next(!1)}applyChinaPaymentRules(t){t||(this.form.controls.countryCode.setValue(oo.a.CN),this.hasDefaultCity=!1,this.retrieveCodeWords(oo.a.CN)),this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")}knpIsChanged(){this.subs.add(Object(Ms.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe(t=>{let e=[i.H.required,i.H.min(this.paymentsService.rules.minAmount),i.H.max(this.paymentsService.rules.maxAmount),t=>{var e;return 0==(null===(e=t)||void 0===e?void 0:e.value)?{cantBeZero:!0}:null}];e.push(t=>{const e=this.maskService.getNumberedAmount(t.value);if(!this.isForeignContractDisabled)return e>this.contractMaxAmount.amount?-1!=Qr.indexOf(this.formValue.knp)?null:{mustIncludeContract:!0}:null}),this.setValidation([this.form.controls.amount],e,!1)}))}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(Js.a),d.Qb(oo.g),d.Qb(ho.a),d.Qb(_s.a),d.Qb(_s.c),d.Qb(oo.c),d.Qb(ri.a),d.Qb(fo.c),d.Qb(r.q),d.Qb(oo.f),d.Qb(oo.e),d.Qb(o.b),d.Qb(ti.a),d.Qb(l.c),d.Qb(oo.b),d.Qb(c.e),d.Qb(go.c),d.Qb(vo.a),d.Qb(ei.b),d.Qb(yo.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-currency-payment"]],viewQuery:function(t,e){var n;1&t&&(d.Mc(Co,!0),d.Wc(To,!0),d.Wc(Ao,!0),d.Wc(So,!0),d.Wc(jo,!0),d.Wc(ko,!0),d.Wc(Io,!0),d.Wc(Vo,!0),d.Wc(Eo,!0),d.Wc(_o,!0)),2&t&&(d.Cc(n=d.jc())&&(e.emailOnSuccess=n.first),d.Cc(n=d.jc())&&(e.senderAccountDropdown=n.first),d.Cc(n=d.jc())&&(e.contractsSelect=n.first),d.Cc(n=d.jc())&&(e.contractDetails=n.first),d.Cc(n=d.jc())&&(e.bankDropdown=n.first),d.Cc(n=d.jc())&&(e.intermediaryBankDropdown=n.first),d.Cc(n=d.jc())&&(e.commissionAccountDropdown=n.first),d.Cc(n=d.jc())&&(e.rubNonRussiaBankDropdown=n.first),d.Cc(n=d.jc())&&(e.rubNonRussiaCorrespondentBankDropdown=n.first),d.Cc(n=d.jc())&&(e.rubNonRussiaCorrespondentIbanInput=n.first))},features:[d.zb([{provide:At.a,useClass:At.b}]),d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],[1,"payment-section"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"mb-4"],["translate","",1,"mb-4"],[3,"isLoading","isDisabledSelectable","label","hasError","accounts","selected"],["senderAccountDropdown",""],[1,"j-switch-wrap","form-group"],[3,"formControl"],[1,"ml-3"],["translate",""],["class","contracts-description",3,"jLoading","jLoadingInverted","is-loading",4,"ngIf"],[1,"form-section"],[1,"recipient-title","mb-4"],["translate","",1,"m-0"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",3,"click",4,"ngIf"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",3,"click",4,"ngIf"],[1,"form-group"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl","paste"],["countryWrapper",""],["bindValue","code",3,"appendTo","jFocusOnReturn","formControl","readonly","clearable","searchFn","items","change","focus","search"],["countrySelect",""],["j-option-tmp",""],["j-label-tmp",""],[3,"control","errorMessages"],["class","form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"mask","formControl"],["accountInput","jFormInput"],["class","j-switch-wrap form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","label","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindLabel","label","bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items","change"],["knpSelect",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl","mask","dropSpecialCharacters"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],["translate","",1,"j-input-helper","text-muted","mt-1","mb-0","p3"],[3,"hidden"],[3,"isLoading","accounts","isDisabledSelectable","hasError","label","selected"],["commissionAccountDropdown",""],["class","j-input-helper text-muted comission-message p3",4,"ngIf"],["clearable","true",3,"floatLabel"],["jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","thousandSeparator"," ","decimalMarker",",","maxlength","29",1,"form-control",3,"suffix","placeholder","mask","dropSpecialCharacters","formControl","paste"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-2","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],["class","mt-2","translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex align-items-center",4,"ngIf"],[1,"list-group-item","d-flex","align-items-center"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],["class","my-3 p3 text-muted",3,"innerHTML",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[3,"contract",4,"ngIf"],["amountInfo",""],["kbeInfo",""],["kppInfo",""],["oktmoInfo",""],["basisInfo",""],["budgetPeriodInfo",""],[1,"contracts-description",3,"jLoading","jLoadingInverted"],[1,"text-gray",3,"innerHTML"],["id","contractGroup",1,"form-group","mt-4"],["contractsWrapper",""],["bindValue","id",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items","change"],["contractsSelect",""],["j-notfound-tmp",""],["href","#","jSuffix","","class","mr-1 p3","translate","",3,"click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["type","button","class","list-dictionary form-section--action btn btn-xs btn-link float-right",3,"click",4,"ngIf"],["type","button",1,"list-dictionary","form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"j-option-label","text-wrap","p3"],[1,"text-dark","contract-row"],[3,"money"],[1,"text-muted","contract-row"],["translate","CURRENCY_PAYMENT.CONTRACTS.SELECT.REMAINDER"],[1,"contracts__empty"],["src","assets/img/payments/no_contract.svg"],[1,"mx-auto","mt-3","p2","text-muted",3,"innerHTML"],["href","#",1,"link","d-inline-block","mt-3",3,"click"],["label","CURRENCY_PAYMENT.CONTRACTS.NOT_FOUND"],[1,"text-center","my-2"],["href","#",1,"link","d-inline-block",3,"click"],["href","#","jSuffix","","translate","",1,"mr-1","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],[1,"j-option-label","text-wrap"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl"],[1,"kbe-account-row"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","4",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","28",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","10",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","25",1,"form-control",3,"formControl"],[1,"mt-0"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","70",1,"form-control",3,"formControl"],[3,"labelText","placeholderText","labelControl","errorMessages","bankControl"],["rubNonRussiaCorrespondentBankDropdown",""],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"validation","mask","formControl"],["rubNonRussiaCorrespondentIbanInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],["rubNonRussiaBankDropdown",""],[3,"placeholderText","labelControl","errorMessages","bankControl"],["bankDropdown",""],["class","j-input-helper text-muted mt-1 mb-0 p3","translate","",4,"ngIf"],[1,"intermediatory-content","ml-3"],["class","intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages",4,"ngIf"],["translate","",1,"d-block","text-gray"],[1,"intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages"],["intermediaryBankDropdown",""],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"mask","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","validation","formControl"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isRussianTaxPayer",1,"custom-control-input",3,"formControl"],["for","isRussianTaxPayer",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.IS_TAXPAYER",1,"p3","text-muted"],["class","russian-row",4,"ngIf"],[1,"russian-row"],["kbkRowWrapper",""],["kbkWrapper",""],[3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["kbkSelect",""],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","formControl"],["payerStatusWrap",""],["bindValue","code",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["payerStatusSelect",""],["type","checkbox","id","hasRussianBudgetExtras",1,"custom-control-input",3,"formControl"],["for","hasRussianBudgetExtras",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.EXTRAS",1,"p3","text-muted"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"formControl"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK_NOT_FOUND"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.STATUS_NOT_FOUND"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],[1,"mr-2",3,"inlineSVG"],["translate","",1,"p2","m-0"],["translate","",1,"p3","text-gray"],["codeWordsWrapper",""],["codeWordsSelect",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","comission-message","p3"],[3,"innerHTML"],[1,"j-input-helper","text-muted","mt-1","p3"],[1,"text-danger","mr-1",3,"translate","translateParams"],["href","#",1,"link-blue","contracts-scroll-link",3,"click"],["translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",1,"mt-2"],["translate","",1,"text-gray"],[1,"text-gray"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],[1,"my-3","p3","text-muted",3,"innerHTML"],["type","button",1,"btn","btn-link","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit","translate","",1,"btn","btn-outline-primary","btn-static"],[3,"contract"],["contractDetails",""],[1,"p4"]],template:function(t,e){1&t&&(d.Pc(0,Wo,1,0,"j-restricted-placeholder",0),d.Pc(1,Yr,155,139,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,c.a,Ro.a,ln.a,i.t,i.i,De.a,Le.a,Be.a,i.c,de.a,o.a,i.o,oe,it,rt,Ye.a,ve.a,we.a,at,me.a,he.a,ss.a,Pe.a,bt,un.a,hn.a,Fe.a,xi,ye.a,r.E,rs.a,i.a,Ue.a,r.G,Yi,Tn.a],pipes:[s.b,c.d,As.a],styles:[".payments__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}@media(min-width:960px){.payment-section--summary .payment-section--amount-warn{width:70%;text-align:right;margin-left:auto}}.kbe-account-row{margin-bottom:1rem}@media(min-width:960px){.kbe-account-row{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:130px 1fr}}@media(min-width:960px){.kbe-account-row .form-group{margin-bottom:0}}.intermediatory-content{width:100%}.intermediatory-input{margin-top:.5rem;position:relative;margin-bottom:.25rem}.intermediatory-input .bic-dropdown{left:0;right:0}.contract-row{display:-webkit-box;display:flex;width:100%;-webkit-box-pack:justify;justify-content:space-between}.contract-row>:first-child{padding-right:1rem}.list-dictionary{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;line-height:1}.list-dictionary span{display:block}.comission-message{margin-top:-12px}.j-select .j-spinner-loader{top:19px}.contracts__empty{text-align:center;max-width:312px;margin:0 auto}.russian-row{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1rem}.russian-row>*{width:100%;max-width:calc(50% - 6px)}.contracts-description{position:relative}.contracts-description.is-loading small{opacity:.5}.contracts-scroll-link{border-bottom:1px dashed #1586bb}.contracts-scroll-link:hover{border-color:#ef5630}.recipient-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}"],encapsulation:2}),t})();const tc=["paymentComponent"];let ec=(()=>{class t{constructor(t,e,n){this.router=t,this.navService=e,this.paymentsService=n}ngOnInit(){this.title$=this.paymentsService.rootTitle$.pipe(Object(nt.a)(t=>`CURRENCY_PAYMENT.${t}`))}onClose(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}ngAfterViewInit(){this.formDirective=this.paymentComponent.formDirective,this.form=this.paymentComponent.form}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(_s.c),d.Qb(xs.a),d.Qb(ws.c))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-currency-payments"]],viewQuery:function(t,e){var n;1&t&&d.Wc(tc,!0),2&t&&d.Cc(n=d.jc())&&(e.paymentComponent=n.first)},features:[d.zb([{provide:At.a,useClass:At.b}])],decls:9,vars:5,consts:[[3,"closed"],[1,"f-page-title"],["paymentComponent",""]],template:function(t,e){1&t&&(d.Wb(0,"f-page",0),d.ic("closed",(function(t){return e.onClose()})),d.Wb(1,"f-page-header"),d.Wb(2,"h1",1),d.Rc(3),d.mc(4,"translate"),d.mc(5,"async"),d.Vb(),d.Vb(),d.Wb(6,"f-page-body"),d.Rb(7,"j-currency-payment",null,2),d.Vb(),d.Vb()),2&t&&(d.Ab(3),d.Tc(" ",d.nc(4,1,d.nc(5,3,e.title$))," "))},directives:[Ze.a,Je.a,tn.a,Jr],pipes:[c.d,s.b],styles:[""]}),t})();var nc=n("aDQ/"),sc=n("7o/Q");class ic{call(t,e){return e.subscribe(new oc(t))}}class oc extends sc.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}let rc=(()=>{class t{constructor(){this.subs=new Ai.a,this.itemChanges$=new Ds.a(0),this.routerTrigger$=this.itemChanges$.pipe(Object(Z.a)(this.itemChanges$.getValue()),t=>t.lift(new ic),Object(nt.a)(([t,e])=>{const n={offsetEnterX:0,offsetLeaveX:0};return 0!==t&&(n.offsetEnterX=t>e?-100:100,n.offsetLeaveX=t>e?100:-100),{value:e,params:n}}),Object(co.a)())}ngOnInit(){this.subs.add(this.routerTrigger$.subscribe())}ngOnDestroy(){this.subs.unsubscribe()}onActivate(t,e){e.activatedRouteData&&e.activatedRouteData.animation&&e.activatedRouteData.index!==this.itemChanges$.getValue()&&this.itemChanges$.next(e.activatedRouteData.index)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=d.Lb({type:t}),t})();const cc=function(t){return[t]};let ac=(()=>{class t extends rc{constructor(t,e,n){super(),this.navService=t,this.router=e,this.paymentsService=n,this.routes=Ws.a}ngOnInit(){super.ngOnInit(),this.title$=this.paymentsService.rootTitle$.pipe(Object(nt.a)(t=>`PAYMENTS.${t}`))}onClose(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(xs.a),d.Qb(_s.c),d.Qb(ws.c))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-tenge-payments"]],features:[d.zb([{provide:At.a,useClass:At.b}]),d.xb],decls:20,vars:14,consts:[[3,"closed"],[1,"f-page-title"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active",3,"routerLink"],[1,"outlet-animation-wrapper"],["outlet","outlet"]],template:function(t,e){1&t&&(d.Wb(0,"f-page",0),d.ic("closed",(function(t){return e.onClose()})),d.Wb(1,"f-page-header"),d.Wb(2,"h1",1),d.Rc(3),d.mc(4,"translate"),d.mc(5,"async"),d.Vb(),d.Wb(6,"div",2),d.Wb(7,"nav",3),d.Wb(8,"a",4),d.Wb(9,"span"),d.Rc(10,"\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u043e\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435"),d.Vb(),d.Vb(),d.Wb(11,"a",4),d.Wb(12,"span"),d.Rc(13,"\u0412 \u0431\u044e\u0434\u0436\u0435\u0442"),d.Vb(),d.Vb(),d.Wb(14,"a",4),d.Rc(15," \u0417\u0430\u0440\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(16,"f-page-body"),d.Wb(17,"div",5),d.Rb(18,"router-outlet",null,6),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Ab(3),d.Tc(" ",d.nc(4,4,d.nc(5,6,e.title$))," "),d.Ab(5),d.sc("routerLink",d.xc(8,cc,e.routes.tenge.order)),d.Ab(3),d.sc("routerLink",d.xc(10,cc,e.routes.tenge.state.root)),d.Ab(3),d.sc("routerLink",d.xc(12,cc,e.routes.tenge.salary)))},directives:[Ze.a,Je.a,_s.f,_s.e,tn.a,_s.h],pipes:[c.d,s.b],styles:[".payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}"],encapsulation:2,data:{animation:[nc.c]}}),t})();var lc=n("gcYM"),bc=n("wtV8"),uc=n("kFTB"),dc=n("+BgI");const mc=["vinTpl"],pc=["protocolNumberTpl"];function hc(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function fc(t,e){if(1&t&&(d.Wb(0,"div",51),d.Wb(1,"p",52),d.Rc(2),d.Vb(),d.Wb(3,"p",53),d.Rc(4),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(2),d.Sc(t.label),d.Ab(2),d.Tc("\u0411\u0418\u041d: ",t.bin,"")}}function gc(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div"),d.Wb(1,"button",54),d.ic("click",(function(e){d.Gc(t),d.lc(2);const n=d.Dc(18);return d.lc().openDepartmentDictionary(n,e)})),d.Rc(2," \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a "),d.Vb(),d.Wb(3,"p",55),d.Rc(4,"\u0427\u0430\u0441\u0442\u044b\u0435 \u0423\u0413\u0414"),d.Vb(),d.Vb()}}function vc(t,e){1&t&&d.Pc(0,gc,5,0,"div",1),2&t&&d.sc("ngIf",!e.searchTerm)}function yc(t,e){1&t&&d.Rb(0,"div",9)}function Rc(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div"),d.Wb(1,"button",54),d.ic("click",(function(e){d.Gc(t),d.lc(2);const n=d.Dc(53);return d.lc().openKBKDictionary(n,e)})),d.Rc(2," \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a "),d.Vb(),d.Wb(3,"p",55),d.Rc(4,"\u0427\u0430\u0441\u0442\u044b\u0435 \u041a\u0411\u041a"),d.Vb(),d.Vb()}}function Cc(t,e){1&t&&d.Pc(0,Rc,5,0,"div",1),2&t&&d.sc("ngIf",!e.searchTerm)}function Tc(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div"),d.Wb(1,"button",54),d.ic("click",(function(e){d.Gc(t),d.lc(2);const n=d.Dc(62);return d.lc().openKnpDictionary(n,e)})),d.Rc(2," \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a "),d.Vb(),d.Wb(3,"p",56),d.Rc(4,"\u0427\u0430\u0441\u0442\u044b\u0435 \u041a\u041d\u041f"),d.Vb(),d.Wb(5,"p",57),d.Rc(6,"\u0412\u044b\u0431\u043e\u0440 \u041a\u041d\u041f \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0446\u0435\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Vb()}}function Ac(t,e){1&t&&d.Pc(0,Tc,7,0,"div",1),2&t&&d.sc("ngIf",!e.searchTerm)}function Sc(t,e){if(1&t&&(d.Wb(0,"div",58),d.Wb(1,"div",59),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function jc(t,e){1&t&&d.Rb(0,"div",9)}function kc(t,e){if(1&t&&(d.Wb(0,"div",60),d.Rb(1,"span",61),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function Ic(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Vc(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function Ec(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",62),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",63),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function _c(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",64),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function Wc(t,e){if(1&t&&(d.Wb(0,"div",65),d.Wb(1,"div",66),d.Rb(2,"j-period-input",67,68),d.mc(4,"translate"),d.Vb(),d.Vb()),2&t){const t=d.Dc(3),e=d.lc(2);d.Ab(2),d.sc("hasError",e.hasError(t,e.form.controls.period))("label",d.nc(4,3,"SHARED.TIME.PERIOD"))("formControl",e.form.controls.period)}}function Oc(t,e){if(1&t&&(d.Wb(0,"div",65),d.Wb(1,"div",69),d.Rb(2,"j-period-input",67,70),d.mc(4,"translate"),d.mc(5,"translate"),d.Vb(),d.Wb(6,"div",69),d.Rb(7,"j-period-input",67,71),d.mc(9,"translate"),d.mc(10,"translate"),d.Vb(),d.Vb()),2&t){const t=d.Dc(3),e=d.Dc(8),n=d.lc(2);d.Ab(2),d.vc("label","",d.nc(4,8,"SHARED.TIME.MONTH")," ",d.nc(5,10,"SHARED.PREPOSITION.FROM"),""),d.sc("hasError",n.hasError(t,n.form.controls.periodStart)||n.hasError(e,n.form.controls.periodEnd))("formControl",n.form.controls.periodStart),d.Ab(5),d.vc("label","",d.nc(9,12,"SHARED.TIME.MONTH")," ",d.nc(10,14,"SHARED.PREPOSITION.TO"),""),d.sc("hasError",n.hasError(e,n.form.controls.periodEnd)||n.hasError(t,n.form.controls.periodStart))("formControl",n.form.controls.periodEnd)}}function Pc(t,e){if(1&t&&(d.Wb(0,"j-form-field",72),d.Wb(1,"j-label"),d.Rc(2,"VIN \u043a\u043e\u0434"),d.Vb(),d.Rb(3,"input",73),d.Rb(4,"j-error",34),d.Vb(),d.Wb(5,"div",60),d.Rb(6,"span",61),d.Vb()),2&t){const t=d.lc(2);d.Ab(3),d.sc("formControl",t.form.controls.vin),d.Ab(1),d.sc("control",t.form.controls.vin)("errorMessages",t.errors.vin),d.Ab(2),d.sc("innerHTML",t.vinMessage,d.Hc)}}function xc(t,e){if(1&t&&(d.Wb(0,"j-form-field",72),d.Wb(1,"j-label"),d.Rc(2,"\u041d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430"),d.Vb(),d.Rb(3,"input",16),d.Vb()),2&t){const t=d.lc(2);d.Ab(3),d.sc("mask",t.masks.protocolNumber.mask)("formControl",t.form.controls.protocolNumber)}}function wc(t,e){1&t&&(d.Wb(0,"p",74),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function Nc(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"form",3,4),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(3,"div",5),d.Wb(4,"fieldset"),d.Wb(5,"div",6),d.Wb(6,"h2",7),d.Rc(7),d.mc(8,"translate"),d.Vb(),d.Wb(9,"button",8),d.ic("click",(function(e){d.Gc(t);const n=d.Dc(18);return d.lc().openDepartmentDictionary(n,e)})),d.Rc(10),d.mc(11,"translate"),d.Vb(),d.Vb(),d.Wb(12,"div",9),d.Wb(13,"j-form-field",null,10),d.Wb(15,"j-label"),d.Rc(16,"\u041e\u0440\u0433\u0430\u043d \u0433\u043e\u0441. \u0434\u043e\u0445\u043e\u0434\u043e\u0432"),d.Vb(),d.Wb(17,"j-select",11,12),d.mc(19,"async"),d.Pc(20,fc,5,2,"ng-template",13),d.Pc(21,vc,1,1,"ng-template",14),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(22,"div",5),d.Wb(23,"fieldset"),d.Wb(24,"legend",15),d.Rc(25,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(26,"div",9),d.Wb(27,"j-form-field"),d.Wb(28,"j-label"),d.Rc(29,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(30,"input",16),d.Vb(),d.Vb(),d.Pc(31,yc,1,0,"div",17),d.Wb(32,"div",9),d.Wb(33,"ul",18),d.Wb(34,"li",19),d.Rb(35,"j-switch",20),d.Wb(36,"span",21),d.Rc(37),d.mc(38,"translate"),d.Rb(39,"br"),d.Wb(40,"small",22),d.Rc(41),d.mc(42,"translate"),d.Wb(43,"span",23),d.Rc(44),d.mc(45,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(46,"div",9),d.Wb(47,"div",9),d.Wb(48,"j-form-field",null,24),d.Wb(50,"j-label"),d.Rc(51,"\u041a\u0411\u041a/\u0422\u0438\u043f \u043d\u0430\u043b\u043e\u0433\u0430"),d.Vb(),d.Wb(52,"j-select",25,26),d.ic("change",(function(e){return d.Gc(t),d.lc().onKbkSelect(e)})),d.mc(54,"async"),d.Pc(55,Cc,1,1,"ng-template",14),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(56,"div",9),d.Wb(57,"j-form-field",null,27),d.Wb(59,"j-label"),d.Rc(60,"\u041a\u041d\u041f \u2014 \u041a\u043e\u0434 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(61,"j-select",28,29),d.Pc(63,Ac,1,1,"ng-template",14),d.Vb(),d.Vb(),d.Vb(),d.Wb(64,"div",30),d.Wb(65,"span",31),d.Rc(66),d.mc(67,"async"),d.Vb(),d.Wb(68,"j-form-field"),d.Wb(69,"j-label"),d.Rc(70,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(71,"textarea",32,33),d.Rb(73,"j-error",34),d.Pc(74,Sc,3,1,"div",35),d.mc(75,"async"),d.Vb(),d.Vb(),d.Pc(76,jc,1,0,"div",17),d.Vb(),d.Vb(),d.Wb(77,"div",5),d.Wb(78,"fieldset"),d.Wb(79,"div",9),d.Wb(80,"j-account-dropdown",36,37),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(82,"async"),d.mc(83,"async"),d.Vb(),d.Vb(),d.Wb(84,"div",9),d.Wb(85,"div",9),d.Wb(86,"j-form-field",38),d.Wb(87,"j-label"),d.Rc(88,"\u0421\u0443\u043c\u043c\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(89,"input",39),d.Vb(),d.Pc(90,kc,2,1,"div",40),d.mc(91,"async"),d.Wb(92,"div",41),d.Pc(93,Ic,3,3,"ng-container",42),d.mc(94,"async"),d.Pc(95,Vc,4,8,"ng-template",null,43,d.Qc),d.Vb(),d.Vb(),d.Vb(),d.Wb(97,"div",9),d.Wb(98,"ul",18),d.Wb(99,"li",19),d.Rb(100,"j-switch",20),d.Wb(101,"span",21),d.Rc(102,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(103,"br"),d.Wb(104,"small",22),d.Rc(105),d.mc(106,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(107,"div",44),d.Wb(108,"div",44),d.Pc(109,Ec,6,3,"ng-container",1),d.Pc(110,_c,3,0,"ng-container",1),d.Vb(),d.Vb(),d.Pc(111,Wc,5,5,"ng-template",null,45,d.Qc),d.Pc(113,Oc,11,16,"ng-template",null,46,d.Qc),d.Pc(115,Pc,7,4,"ng-template",null,47,d.Qc),d.Pc(117,xc,4,2,"ng-template",null,48,d.Qc),d.Rb(119,"ngx-spinner",49),d.Rb(120,"ngx-spinner",49),d.Vb(),d.Pc(121,wc,6,0,"ng-template",null,50,d.Qc),d.Tb()}if(2&t){const t=d.Dc(14),e=d.Dc(18),n=d.Dc(49),s=d.Dc(53),i=d.Dc(58),o=d.Dc(62),r=d.Dc(96),c=d.Dc(112),a=d.Dc(114),l=d.lc();d.Ab(1),d.sc("formGroup",l.form),d.Ab(6),d.Tc(" ",d.nc(8,56,"PAYMENTS.RECIPIENT.TITLE")," "),d.Ab(3),d.Tc(" ",d.nc(11,58,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),d.Ab(7),d.sc("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",l.form.controls.ugd)("clearable",!1)("searchFn",l.paymentsService.ugdSearchFn)("items",d.nc(19,60,l.ugdStore.items$)),d.Ab(13),d.sc("mask",l.masks.number.mask)("formControl",l.form.controls.number),d.Ab(1),d.sc("ngTemplateOutlet",l.form.controls.intervalEnabled.value?a:c),d.Ab(4),d.sc("formControl",l.form.controls.intervalEnabled),d.Ab(2),d.Tc(" ",d.nc(38,62,"PAYMENTS.FORPERIOD")," "),d.Ab(4),d.Tc(" ",d.nc(42,64,l.intervalSwitchLabel)," "),d.Ab(2),d.sc("hidden",!l.form.controls.intervalEnabled.value),d.Ab(1),d.Tc(": ",d.nc(45,66,l.periodMessage$)," "),d.Ab(8),d.sc("jFocusOnReturn",s)("appendTo",n.elementRef.nativeElement)("formControl",l.form.controls.kbk)("clearable",!1)("searchMask",l.masks.kbk.mask)("shadow",l.masks.kbk.shadow)("items",d.nc(54,68,l.kbkStore.items$)),d.Ab(9),d.sc("appendTo",i.elementRef.nativeElement)("jFocusOnReturn",o)("formControl",l.form.controls.knp)("clearable",!1)("searchMask",l.masks.knp.mask)("shadow",l.masks.knp.shadow)("items",l.filteredKnpList),d.Ab(5),d.Uc(" ",d.nc(67,70,l.purposeLength$),"/",l.rules.purposeLength,""),d.Ab(5),d.sc("formControl",l.form.controls.purpose),d.Ab(2),d.sc("control",l.form.controls.purpose)("errorMessages",l.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(75,72,l.purposeMessage$)),d.Ab(2),d.sc("ngTemplateOutlet",l.associatedFieldTpl),d.Ab(4),d.sc("isLoading",d.nc(82,74,l.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",l.form.controls.senderAccount.touched&&l.form.controls.senderAccount.errors)("accounts",d.nc(83,76,l.acceptableAccounts$)),d.Ab(6),d.sc("floatLabel","always"),d.Ab(3),d.sc("dropSpecialCharacters",!0)("formControl",l.form.controls.amount),d.Ab(1),d.sc("ngIf",d.nc(91,78,l.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(94,80,l.commission$))("ngIfElse",r),d.Ab(7),d.sc("formControl",l.form.controls.urgent),d.Ab(5),d.Sc(d.nc(106,82,"PAYMENTS.URGENT_HELPER")),d.Ab(4),d.sc("ngIf",l.restoredData.status!==l.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",l.restoredData.status===l.PAYMENT_STATUS.CREATED),d.Ab(9),d.sc("name",l.SPINNER)("fullScreen",!1),d.Ab(1),d.sc("name",l.SPINNER)("fullScreen",!1)}}let Dc=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d,m,p){super(u.createTaxForm(),a,r,c,e,t,s,m,l,p,b),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.maskService=s,this.translate=i,this.datePipe=o,this.route=r,this.router=c,this.api=a,this.dictionaries=l,this.authorityPermissionsService=b,this.paymentsFormsFactory=u,this.accountsService=d,this.modalService=m,this.pipelines=p,this.associatedFieldTpl=void 0,this.masks={number:"paymentNum",amount:"amount",vin:"vin",knp:"knp",kbk:"kbk",protocolNumber:"protocol"},this.commission$=new Ds.a(0),this.protocolMessage$=new Ds.a(""),this.vinLength=17,this.subs=new Ai.a,this.paymentType=Ks.i.TAX}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.combineKBK(this.paymentType),this.knp$=this.combineKNP([(t,e)=>{if(e[0]){const t=this.knpStore.getItemsByIds(this.kbkStore.entities[e[0]].associatedKnpList),n=this.form.controls.knp;return n.enable(),setTimeout(()=>{1===t.length?(n.patchValue(t[0].code),this.focusableContainer.focusNext()):t.some(t=>t.code===n.value)||n.patchValue("")},100),t}return[]}],[this.controlsStream.kbk]),this.listenWorkingDays(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenKnpUpdates(),this.subs.add(this.createPeriodMessage$().subscribe(this.periodMessage$)),this.subs.add(Object(Ms.a)([this.controlsStream.vin.pipe(Object(nt.a)(t=>t?`VIN${t}/V`:"")),this.controlsStream.protocolNumber.pipe(Object(nt.a)(t=>t?`ADM${t}/A`:""))]).subscribe(t=>{this.protocolMessage$.next(t.join(" "))}));const t=[this.protocolMessage$.pipe(Object(nt.a)(t=>["protocol",t])),Object(Ms.a)([this.translate.get("SHARED.NOT_SELECTED"),this.translate.get("SHARED.TIME.PERIOD"),this.periodMessage$]).pipe(Object(nt.a)(([t,e,n])=>n&&n!==t?`${e}: ${n}.`:""),Object(nt.a)(t=>["period",t]))];this.listenPurposeMessageStream(t,["protocol","kbk","knp","period"]),this.subs.add(this.controlsStream.kbk.pipe().subscribe(t=>{const{protocolNumber:e,vin:n}=this.form.controls;this.rules.kbkCodeVinReq.some(e=>e===t)?(n.enable(),e.disable(),e.value&&e.patchValue(""),this.associatedFieldTpl=this.vinTpl):/^204\d+$/.test(t)?(n.disable(),n.value&&n.patchValue(""),e.enable(),this.associatedFieldTpl=this.protocolNumberTpl):(this.associatedFieldTpl=null,n.disable(),e.disable(),e.value&&e.patchValue(""),n.value&&n.patchValue(""))})),this.subs.add(this.controlsStream.intervalEnabled.pipe(Object(lc.a)(300,void 0,{leading:!0,trailing:!0}),Object(Us.a)()).subscribe(t=>{const{period:e,periodEnd:n,periodStart:s}=this.form.controls;t?([n,s].forEach(t=>t.enable()),e.disable()):([n,s].forEach(t=>t.disable()),e.enable())}))}get intervalSwitchLabel(){return this.form.controls.intervalEnabled.value?"\u041e\u043f\u043b\u0430\u0442\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0430 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434":"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434 \u0434\u043b\u044f \u043e\u043f\u043b\u0430\u0442\u044b"}onKbkSelect(t){!this.form.controls.knp.value&&t.associatedKnpList&&this.form.controls.knp.setValue(t.associatedKnpList[0])}openDepartmentDictionary(t,e){e&&e.preventDefault(),t&&(t.blur(),t.close()),this.modalService.open(di,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>{this.form.controls.ugd.setValue(t.code)}).catch(()=>{})}openKBKDictionary(t,e){e&&e.preventDefault(),t&&(t.blur(),t.close());const n=this.modalService.open(yi,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});Object.assign(n.componentInstance,{store:this.kbkStore}),n.result.then(t=>{this.form.controls.kbk.setValue(t.code)}).catch(()=>{})}onUgdSelect(t){}createPeriodMessage$(){const{intervalEnabled:t,periodEnd:e,periodStart:n,period:s}=this.controlsStream;return Object(Ms.a)([t,this.translate.get("SHARED.NOT_SELECTED"),s,n,e]).pipe(Object(tt.a)(0),Object(nt.a)(([t,e,...n])=>{const[s,i,o]=n.map(t=>t?this.datePipe.transform(t,"MM.yyyy"):"");return!t&&!s||t&&!i&&!o?e:t?`${i||e} - ${o||e}`:`${s||e}`}))}sendPayment(){return super.sendPayment(this.constructTaxPaymentBody())}saveToDraft(){return super.saveToDraft(this.constructTaxPaymentBody())}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(li,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=this.paymentType,t.result.then(t=>{if(!this.filteredKnpList.includes(t)){const e=this.kbkStore.items.find(t=>{var e;return t.code==(null===(e=this.form.controls.kbk)||void 0===e?void 0:e.value)}),n=this.knpStore.getItemsByIds(e.associatedKnpList);this.filteredKnpList=[...n,t]}this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}constructTaxPaymentBody(){const t=this.form.value,e=this.protocolMessage$.getValue();let n="";return n=e?this.purposeMessage$.getValue().replace(e,[e,t.purpose].filter(t=>!!t).join(" ")):[t.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join(". "),Object.assign(Object.assign({},t),{purpose:n})}listenKnpUpdates(){this.knp$.subscribe(t=>{this.filteredKnpList=t})}get vinMessage(){var t,e;return this.form.controls.vin.value&&0!==this.form.controls.vin.value.length?(null===(t=this.form.controls.vin.value)||void 0===t?void 0:t.length)<this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.LESS",{length:this.vinLength}):(null===(e=this.form.controls.vin.value)||void 0===e?void 0:e.length)>this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.MORE",{length:this.vinLength}):"":this.translate.instant("PAYMENTS.VIN_MESSAGE.OPTIONAL")}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(Js.a),d.Qb(r.c),d.Qb(ho.a),d.Qb(c.e),d.Qb(s.f),d.Qb(_s.a),d.Qb(_s.c),d.Qb(bc.a),d.Qb(ri.a),d.Qb(fo.c),d.Qb(uc.a),d.Qb(l.c),d.Qb(r.q),d.Qb(dc.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-tax-payment"]],viewQuery:function(t,e){var n;1&t&&(d.Wc(i.v,!0),d.Wc(de.b,!0),d.Wc(mc,!0,d.L),d.Wc(pc,!0,d.L)),2&t&&(d.Cc(n=d.jc())&&(e.ngForm=n.first),d.Cc(n=d.jc())&&(e.focusableContainer=n.first),d.Cc(n=d.jc())&&(e.vinTpl=n.first),d.Cc(n=d.jc())&&(e.protocolNumberTpl=n.first))},features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",1,"p-relative",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["selectWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["ugdSelect",""],["j-option-tmp",""],["j-header-tmp",""],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["class","form-group",4,"ngTemplateOutlet"],[1,"list-group"],[1,"list-group-item","text-left","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[3,"hidden"],["kbkWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items","change"],["kbkSelect",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchMask","shadow","items"],["knpSelect",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","suffix"," \u20b8","jFormInput","","jCursorBound","","placeholder","0,00","mask","separator.2","jReplaceDot","","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"payment-section--submit","form-group","pt-4"],["periodTpl",""],["intervalTpl",""],["vinTpl",""],["protocolNumberTpl",""],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],[1,"j-option-label","text-wrap"],[1,"m-0"],[1,"p3","text-gray","m-0"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"row"],[1,"col"],[3,"hasError","label","formControl"],["period",""],[1,"col","col-md-6"],["periodStart",""],["periodEnd",""],["clearable","true"],["type","text","jFormInput","","jFocusOnReturn","","maxlength","64","jUppercase","",1,"form-control",3,"formControl"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,hc,1,0,"j-restricted-placeholder",0),d.Pc(1,Nc,123,84,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,Le.a,oe,de.a,i.t,i.i,it,at,Be.a,i.c,o.a,s.B,ln.a,Ye.a,Ro.a,me.a,he.a,ss.a,Ue.a,$n.a,i.o,ve.a],pipes:[c.d,s.b,vs.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),t})();const Mc=function(t){return[t]};let Lc=(()=>{class t extends rc{constructor(){super(),this.routes=Ws.a}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Kb({type:t,selectors:[["j-budget-payments"]],features:[d.xb],decls:13,vars:12,consts:[[1,"payment-section"],[1,"form-group","mb-5"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow",3,"routerLink"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow","ml-2",3,"routerLink"],[1,"outlet-animation-wrapper"],[3,"activate"],["outlet","outlet"]],template:function(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"a",2),d.Rc(3,"\u041d\u0430\u043b\u043e\u0433\u043e\u0432\u044b\u0439"),d.Vb(),d.Wb(4,"a",3),d.Rc(5,"\u041f\u0435\u043d\u0441\u0438\u043e\u043d\u043d\u044b\u0439"),d.Vb(),d.Wb(6,"a",3),d.Rc(7,"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439"),d.Vb(),d.Wb(8,"a",3),d.Rc(9,"\u041e\u0421\u041c\u0421"),d.Vb(),d.Vb(),d.Wb(10,"div",4),d.Wb(11,"router-outlet",5,6),d.ic("activate",(function(n){d.Gc(t);const s=d.Dc(12);return e.onActivate(n,s)})),d.Vb(),d.Vb(),d.Vb()}2&t&&(d.Ab(2),d.sc("routerLink",d.xc(4,Mc,e.routes.tenge.state.tax)),d.Ab(2),d.sc("routerLink",d.xc(6,Mc,e.routes.tenge.state.pension)),d.Ab(2),d.sc("routerLink",d.xc(8,Mc,e.routes.tenge.state.social)),d.Ab(2),d.sc("routerLink",d.xc(10,Mc,e.routes.tenge.state.osms)))},directives:[_s.f,_s.e,_s.h],styles:[""],data:{animation:[nc.c]}}),t})();var $c=n("ZF+8");const Fc=["emailOnSuccess"];function Uc(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function Yc(t,e){if(1&t){const t=d.Xb();d.Wb(0,"button",57),d.ic("click",(function(e){return d.Gc(t),d.lc(2).checkIin()})),d.Rc(1,"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c"),d.Vb()}}function Bc(t,e){1&t&&(d.Wb(0,"span"),d.Wb(1,"span",58),d.Rc(2,"PAYMENTS.TRUSTED_COUNTERPARTY"),d.Vb(),d.Rb(3,"span",59),d.Vb()),2&t&&(d.Ab(3),d.sc("inlineSVG","/assets/icons/counterparty/status.svg"))}function Hc(t,e){1&t&&(d.Wb(0,"span"),d.Wb(1,"span",58),d.Rc(2,"PAYMENTS.UNTRUSTED_COUNTERPARTY"),d.Vb(),d.Rb(3,"span",60),d.Vb()),2&t&&(d.Ab(3),d.sc("inlineSVG","/assets/icons/counterparty/status.svg"))}function Qc(t,e){if(1&t&&(d.Wb(0,"li",61),d.Rc(1),d.Vb()),2&t){const t=e.$implicit;d.Ab(1),d.Tc(" \u2022 ",t.name," ")}}function Gc(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div"),d.Wb(1,"button",62),d.ic("click",(function(e){d.Gc(t),d.lc(2);const n=d.Dc(71);return d.lc().openKnpDictionary(n,e)})),d.Rc(2," \u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a "),d.Vb(),d.Wb(3,"p",63),d.Rc(4,"\u0427\u0430\u0441\u0442\u044b\u0435 \u041a\u041d\u041f"),d.Vb(),d.Wb(5,"p",64),d.Rc(6,"\u0412\u044b\u0431\u043e\u0440 \u041a\u041d\u041f \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0446\u0435\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Vb()}}function Kc(t,e){1&t&&d.Pc(0,Gc,7,0,"div",1),2&t&&d.sc("ngIf",!e.searchTerm)}function qc(t,e){if(1&t&&(d.Wb(0,"div",65),d.Wb(1,"div",66),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function zc(t,e){if(1&t&&(d.Wb(0,"div",37),d.Rb(1,"span",67),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function Xc(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Zc(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function Jc(t,e){1&t&&(d.Wb(0,"div"),d.Wb(1,"small",50),d.Rc(2,"\u041d\u0430 \u043f\u043e\u0447\u0442\u0443 \u043f\u0440\u0438\u0434\u0435\u0442 \u043a\u0432\u0438\u0442\u0430\u043d\u0446\u0438\u044f \u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u0435"),d.Vb(),d.Vb())}function ta(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",68),d.Wb(1,"j-form-field"),d.Wb(2,"j-label"),d.Rc(3,"Email \u0430\u0434\u0440\u0435\u0441"),d.Vb(),d.Wb(4,"input",69,70),d.ic("focus",(function(e){return d.Gc(t),d.lc(2).onEmailOnSuccessFocus(e)})),d.Vb(),d.Rb(6,"j-error",14),d.Vb(),d.Wb(7,"small",50),d.Rc(8,"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441 "),d.Vb(),d.Vb()}if(2&t){const t=d.lc(2);d.Ab(4),d.sc("ngbTypeahead",t.search)("formControl",t.form.controls.emailOnSuccess),d.Ab(2),d.sc("control",t.form.controls.emailOnSuccess)("errorMessages",t.errors.email)}}function ea(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",71),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",72),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function na(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",73),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function sa(t,e){1&t&&(d.Wb(0,"p",74),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function ia(t,e){1&t&&d.Rb(0,"j-kbe-info")}function oa(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"div",3),d.Wb(2,"form",4,5),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(4,"div",6),d.Wb(5,"fieldset"),d.Wb(6,"div",7),d.Wb(7,"h2",8),d.Rc(8),d.mc(9,"translate"),d.Vb(),d.Wb(10,"button",9),d.ic("click",(function(e){return d.Gc(t),d.lc().openSavedPayments()})),d.Rc(11),d.mc(12,"translate"),d.Vb(),d.Vb(),d.Wb(13,"div",10),d.Wb(14,"j-form-field"),d.Wb(15,"j-label"),d.Rc(16,"\u0411\u0418\u041d/\u0418\u0418\u041d"),d.Vb(),d.Rb(17,"input",11),d.Pc(18,Yc,2,0,"button",12),d.mc(19,"async"),d.mc(20,"async"),d.Wb(21,"div",13),d.mc(22,"async"),d.Pc(23,Bc,4,1,"span",1),d.mc(24,"async"),d.Pc(25,Hc,4,1,"span",1),d.mc(26,"async"),d.Vb(),d.Rb(27,"j-error",14),d.Vb(),d.Wb(28,"ul",15),d.Pc(29,Qc,2,1,"li",16),d.Vb(),d.Vb(),d.Wb(30,"div",10),d.Wb(31,"j-form-field",17),d.Wb(32,"j-label"),d.Rc(33,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f"),d.Vb(),d.Rb(34,"input",18),d.Vb(),d.Vb(),d.Wb(35,"div",10),d.Wb(36,"j-form-field",17),d.Rb(37,"j-entity-logo",19),d.mc(38,"bankFromAccount"),d.Wb(39,"j-label"),d.Rc(40,"\u0421\u0447\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f"),d.Vb(),d.Rb(41,"input",20,21),d.Rb(43,"j-error",14),d.Vb(),d.Vb(),d.Wb(44,"div",10),d.Wb(45,"j-form-field",17),d.Wb(46,"j-label"),d.Rc(47,"\u041a\u0411\u0435"),d.Vb(),d.Rb(48,"input",22),d.Rb(49,"a",23),d.Rb(50,"j-error",14),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(51,"div",6),d.Wb(52,"fieldset"),d.Wb(53,"legend",24),d.Rc(54,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(55,"div",10),d.Wb(56,"j-form-field"),d.Wb(57,"j-label"),d.Rc(58,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(59,"input",25),d.Vb(),d.Vb(),d.Wb(60,"div",10),d.Rb(61,"j-date-picker",26,27),d.mc(63,"async"),d.mc(64,"async"),d.Vb(),d.Wb(65,"div",10),d.Wb(66,"j-form-field",null,28),d.Wb(68,"j-label"),d.Rc(69,"\u041a\u041d\u041f \u2014 \u041a\u043e\u0434 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(70,"j-select",29,30),d.mc(72,"async"),d.Pc(73,Kc,1,1,"ng-template",31),d.Vb(),d.Vb(),d.Vb(),d.Wb(74,"div",32),d.Wb(75,"span",33),d.Rc(76),d.mc(77,"async"),d.Vb(),d.Wb(78,"j-form-field"),d.Wb(79,"j-label"),d.Rc(80,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(81,"textarea",34,35),d.Rb(83,"j-error",14),d.Pc(84,qc,3,1,"div",36),d.mc(85,"async"),d.Vb(),d.Wb(86,"div",37),d.Rc(87," \u041f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0435 \u0437\u0430 \u0442\u043e\u0432\u0430\u0440\u044b/\u0443\u0441\u043b\u0443\u0433\u0438 \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442, \u0443\u0441\u043b\u0443\u0433, \u043d\u043e\u043c\u0435\u0440\u0430 \u0438 \u0434\u0430\u0442\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432/\u0441\u0447\u0435\u0442\u043e\u0432 "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(88,"div",6),d.Wb(89,"fieldset"),d.Wb(90,"div",10),d.Wb(91,"j-account-dropdown",38,39),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(93,"async"),d.mc(94,"async"),d.Vb(),d.Vb(),d.Wb(95,"div",10),d.Wb(96,"div",10),d.Wb(97,"j-form-field",40),d.Wb(98,"j-label"),d.Rc(99,"\u0421\u0443\u043c\u043c\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(100,"input",41),d.Vb(),d.Pc(101,zc,2,1,"div",42),d.mc(102,"async"),d.Wb(103,"div",43),d.Pc(104,Xc,3,3,"ng-container",44),d.mc(105,"async"),d.Pc(106,Zc,4,8,"ng-template",null,45,d.Qc),d.Vb(),d.Vb(),d.Vb(),d.Wb(108,"div",10),d.Wb(109,"ul",46),d.Wb(110,"li",47),d.Rb(111,"j-switch",48),d.Wb(112,"span",49),d.Rc(113,"\u041d\u0414\u0421 (12%) "),d.Rb(114,"br"),d.Wb(115,"small",50),d.Rc(116),d.mc(117,"amountFormat"),d.mc(118,"async"),d.Vb(),d.Vb(),d.Vb(),d.Wb(119,"li",47),d.Rb(120,"j-switch",48),d.Wb(121,"span",49),d.Rc(122,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(123,"br"),d.Wb(124,"small",50),d.Rc(125),d.mc(126,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Wb(127,"li",47),d.Rb(128,"j-switch",48),d.Wb(129,"div",51),d.Rc(130,"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 "),d.Rb(131,"br"),d.Pc(132,Jc,3,0,"div",1),d.Pc(133,ta,9,4,"div",52),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(134,"div",53),d.Wb(135,"div",53),d.Pc(136,ea,6,3,"ng-container",1),d.Pc(137,na,3,0,"ng-container",1),d.Vb(),d.Vb(),d.Rb(138,"ngx-spinner",54),d.Vb(),d.Vb(),d.Pc(139,sa,6,0,"ng-template",null,55,d.Qc),d.Pc(141,ia,1,0,"ng-template",null,56,d.Qc),d.Tb()}if(2&t){const t=d.Dc(62),e=d.Dc(67),n=d.Dc(71),s=d.Dc(107),i=d.Dc(142),o=d.lc();d.Ab(2),d.sc("formGroup",o.form),d.Ab(6),d.Tc(" ",d.nc(9,75,"PAYMENTS.RECIPIENT.TITLE")," "),d.Ab(3),d.Tc(" ",d.nc(12,77,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),d.Ab(6),d.sc("dropSpecialCharacters",!0)("jShadow",o.masks.iinOrBin.shadow)("mask",o.masks.iinOrBin.mask)("formControl",o.form.controls.iinOrBin),d.Ab(1),d.sc("ngIf",o.form.controls.iinOrBin.valid&&o.iinIsNotOwn&&!d.nc(19,79,o.iinIsSubmitted$)&&!d.nc(20,81,o.iinIsFound$)),d.Ab(3),d.sc("jLoading",d.nc(22,83,o.isCounterPartyLoading$))("jLoadingInverted",!0),d.Ab(2),d.sc("ngIf",d.nc(24,85,o.counterParty$)===o.counterPartyStatus.SUCCESS),d.Ab(2),d.sc("ngIf",d.nc(26,87,o.counterParty$)===o.counterPartyStatus.ERROR),d.Ab(2),d.sc("control",o.form.controls.iinOrBin)("errorMessages",o.errors.iinOrBin),d.Ab(2),d.sc("ngForOf",o.riskGroups),d.Ab(5),d.sc("formControl",o.form.controls.name),d.Ab(3),d.sc("name",d.nc(38,89,"KZ"+o.form.controls.bankAccount.value)),d.Ab(4),d.sc("jShadow",o.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",o.masks.bankAccount.mask)("formControl",o.form.controls.bankAccount),d.Ab(2),d.sc("control",o.form.controls.bankAccount)("errorMessages",o.errors.bankAccount),d.Ab(5),d.sc("mask",o.masks.kbeCode.mask)("jShadow",o.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",o.form.controls.kbeCode),d.Ab(1),d.sc("ngbTooltip",i)("inlineSVG","/assets/icons/payments/question.svg"),d.Ab(1),d.sc("control",o.form.controls.kbeCode)("errorMessages",o.errors.kbeCode),d.Ab(9),d.sc("mask",o.masks.number.mask)("formControl",o.form.controls.number),d.Ab(2),d.sc("datesEnabled",d.nc(63,91,o.workingDays$))("formControl",o.form.controls.date)("formatValue",!0)("jFocusOnReturn",t)("minDate",o.dateLimit.minDate)("maxDate",o.dateLimit.maxDate)("helperText",d.nc(64,93,o.dateMessage$)),d.Ab(9),d.sc("jFocusOnReturn",n)("appendTo",e.elementRef.nativeElement)("formControl",o.form.controls.knp)("clearable",!1)("searchMask",o.masks.knp.mask)("shadow",o.masks.knp.shadow)("compareWith",o.knpComparator)("items",d.nc(72,95,o.knp$)),d.Ab(6),d.Uc(" ",d.nc(77,97,o.purposeLength$),"/",o.rules.purposeLength,""),d.Ab(5),d.sc("formControl",o.form.controls.purpose),d.Ab(2),d.sc("control",o.form.controls.purpose)("errorMessages",o.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(85,99,o.purposeMessage$)),d.Ab(7),d.sc("isLoading",d.nc(93,101,o.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",o.form.controls.senderAccount.touched&&o.form.controls.senderAccount.errors)("accounts",d.nc(94,103,o.acceptableAccounts$)),d.Ab(6),d.sc("floatLabel","always"),d.Ab(3),d.sc("dropSpecialCharacters",!0)("formControl",o.form.controls.amount),d.Ab(1),d.sc("ngIf",d.nc(102,105,o.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(105,107,o.commission$))("ngIfElse",s),d.Ab(7),d.sc("formControl",o.form.controls.vat),d.Ab(5),d.Tc("\u0412 \u0441\u0443\u043c\u043c\u0443 \u0432\u0445\u043e\u0434\u0438\u0442 \u041d\u0414\u0421 = ",d.nc(117,109,d.nc(118,111,o.vat$))," \u20b8"),d.Ab(4),d.sc("formControl",o.form.controls.urgent),d.Ab(5),d.Sc(d.nc(126,113,"PAYMENTS.URGENT_HELPER")),d.Ab(3),d.sc("formControl",o.form.controls.notify),d.Ab(4),d.sc("ngIf",!o.form.controls.notify.value),d.Ab(1),d.sc("ngIf",o.form.controls.notify.value),d.Ab(3),d.sc("ngIf",o.restoredData.status!==o.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",o.restoredData.status===o.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",o.SPINNER)("fullScreen",!1)}}var ra=function(t){return t.SUCCESS="SUCCESS",t.ERROR="ERROR",t}({});let ca=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d,m){super(u.createPaymentInTengeForm(),o,s,i,t,e,n,l,r,b,c),this.companyService=t,this.paymentsService=e,this.maskService=n,this.route=s,this.router=i,this.api=o,this.dictionaries=r,this.authorityPermissionsService=c,this.accountsService=a,this.modalService=l,this.pipelines=b,this.paymentsFormsFactory=u,this.recipientsService=d,this.userService=m,this.isCounterPartyLoading$=new Ds.a(null),this.masks={iinOrBin:"iin",bankAccount:"tengeAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount"},this.riskGroups=[],this.counterPartyStatus=ra,this.counterParty$=new Ds.a(null),this.focusEmail$=new S.a,this.prevEmails$=new Ds.a([]),this.fetchingEmailsFor$=new Ds.a(null),this.iinIsSubmitted$=new Ds.a(null),this.iinIsFound$=new Ds.a(null),this.paymentType=Ks.i.REGULAR_PAYMENT_ORDER,this.user=this.userService.user}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.knp$=this.combineKNP([t=>this.dictionaries.selectByPaymentType(t,{type:Ks.i.REGULAR_PAYMENT_ORDER,sortFavourite:!0})]),this.listenWorkingDays(),this.getMaskConfig(),this.createControlsStream(this.form),this.listenVAT(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenEmailSearch();const{bankAccount:t,senderAccount:e}=this.controlsStream;this.subs.add(Object(Ms.a)([t.pipe(Object(et.a)(t=>this.form.controls.bankAccount.valid),Object(Z.a)("")),e.pipe(Object(et.a)(t=>this.form.controls.senderAccount.valid),Object(nt.a)(t=>t.iban),Object(Z.a)(""))]).pipe(Object(nt.a)(([t,e])=>this.paymentsService.checkPaymentTypeFromIban(e,"KZ"+t))).subscribe(t=>this.paymentType=t)),this.applyCounterAgentVerification()}openSavedPayments(){this.modalService.open(oi,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(({recipient:t,account:e})=>{this.form.patchValue({bankAccount:e.iban,iinOrBin:t.iinOrBin,name:t.name,kbeCode:t.kbe.code}),this.form.markAsDirty()}).catch(()=>{})}onEmailOnSuccessFocus(t){this.focusEmail$.next(t.target.value)}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(li,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=Ks.i.REGULAR_PAYMENT_ORDER,t.result.then(t=>{this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}applyCounterAgentVerification(){const{iinOrBin:t}=this.form.controls;this.subs.add(this.controlsStream.iinOrBin.pipe(Object(Us.a)(),Object(tt.a)(300),Object(Hs.a)(e=>(this.counterParty$.next(null),this.iinIsFound$.next(null),this.iinIsSubmitted$.next(null),t.valid&&(this.iinIsNotOwn=this.user.iin!==e,this.isCounterPartyLoading$.next(e)),this.isCounterPartyLoading$.next(null),Object($s.a)(null)))).subscribe(t=>{t&&this.checkCounterParty(t),this.isCounterPartyLoading$.next(null)}))}checkCounterParty(t){var e,n,s;(null===(e=t.companyInfo)||void 0===e?void 0:e.name)&&this.form.controls.name.setValue(null===(n=t.companyInfo)||void 0===n?void 0:n.name),t.riskGroups&&(this.riskGroups=t.riskGroups),this.counterParty$.next(0===(null===(s=t.riskGroups)||void 0===s?void 0:s.length)?this.counterPartyStatus.SUCCESS:this.counterPartyStatus.ERROR)}listenEmailSearch(){const{emailOnSuccess:t}=this.form.controls;this.subs.add(this.controlsStream.notify.pipe(Object(tt.a)(100)).subscribe(e=>e?t.enable():t.disable())),this.subs.add(this.controlsStream.iinOrBin.pipe(Object(tt.a)(200),Object(et.a)(t=>this.form.controls.iinOrBin.valid),Object(Hs.a)(t=>(this.fetchingEmailsFor$.next(t),this.prevEmails$.next([]),this.recipientsService.getPrevNotifications(t).catch(t=>[])))).subscribe(t=>{this.prevEmails$.next(t),this.fetchingEmailsFor$.next(null)})),this.search=t=>Object(Ms.a)([this.prevEmails$.pipe(Object(nt.a)(t=>t.map(t=>t.email))),t.pipe(Object(tt.a)(200),Object(Us.a)(),Object(Z.a)("")),this.focusEmail$]).pipe(Object(nt.a)(([t,e,n])=>e?t.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,3):t.slice(0,3)))}checkIin(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.riskGroups=[],this.iinIsSubmitted$.next(!0);const t=this.form.controls.iinOrBin.value;this.isCounterPartyLoading$.next(t),this.recipientsService.checkCounterParty(t).then(t=>Object(Ns.a)(this,void 0,void 0,(function*(){t&&this.checkCounterParty(t),yield this.successfulCounterPartyResult()}))).catch(t=>{console.error(t),this.iinIsSubmitted$.next(null),this.iinIsFound$.next(null),this.isCounterPartyLoading$.next(null),this.showSignError()})}))}showSignError(){return Object(Ns.a)(this,void 0,void 0,(function*(){return this.modalService.open(so,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result}))}successfulCounterPartyResult(){return Object(Ns.a)(this,void 0,void 0,(function*(){this.iinIsSubmitted$.next(null),this.iinIsFound$.next(!0),this.isCounterPartyLoading$.next(null)}))}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(Js.a),d.Qb(ws.c),d.Qb(ho.a),d.Qb(_s.a),d.Qb(_s.c),d.Qb(bc.a),d.Qb(ri.a),d.Qb(fo.c),d.Qb(l.c),d.Qb(r.q),d.Qb(dc.a),d.Qb(uc.a),d.Qb(ti.a),d.Qb($c.h))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-payment-order"]],viewQuery:function(t,e){var n;1&t&&d.Mc(Fc,!0),2&t&&d.Cc(n=d.jc())&&(e.emailOnSuccess=n.first)},features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],[1,"payment-section"],["jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"dropSpecialCharacters","jShadow","mask","formControl"],["jSuffix","","type","button","class","btn btn-xs btn-link",3,"click",4,"ngIf"],["jSuffix","",1,"counterParty","p3",3,"jLoading","jLoadingInverted"],[3,"control","errorMessages"],[1,"navbar-nav","mt-2"],["class","p3 risk-li text-muted",4,"ngFor","ngForOf"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],["jPrefix","","hideEmpty","true",3,"name"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true","label","\u0414\u0430\u0442\u0430 \u0432\u0430\u043b\u044e\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items"],["select",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","suffix"," \u20b8","placeholder","0,00","mask","separator.2","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],["kbeInfo",""],["jSuffix","","type","button",1,"btn","btn-xs","btn-link",3,"click"],["translate","",1,"text-muted","mr-2"],[1,"text-success",3,"inlineSVG"],[1,"text-danger",3,"inlineSVG"],[1,"p3","risk-li","text-muted"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[3,"innerHTML"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,Uc,1,0,"j-restricted-placeholder",0),d.Pc(1,oa,143,115,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,Le.a,Be.a,i.c,de.a,ye.a,o.a,i.t,i.i,Fe.a,Pe.a,Ye.a,s.t,bn.a,$e.a,pe.a,Ce.a,ve.a,r.E,rs.a,we.a,oe,at,Ro.a,me.a,he.a,ln.a,ss.a,c.a,Ue.a,r.G,Tn.a],pipes:[c.d,s.b,hs.a,vs.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.counterParty[_ngcontent-%COMP%]{position:relative;min-width:40px;height:100%}li.risk-li[_ngcontent-%COMP%] + li.risk-li[_ngcontent-%COMP%]{margin-top:.5rem}"]}),t})();function aa(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function la(t,e){if(1&t&&(d.Wb(0,"div",37),d.Wb(1,"div",38),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function ba(t,e){if(1&t&&(d.Wb(0,"div",39),d.Rb(1,"span",40),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function ua(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function da(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function ma(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",41),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",42),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function pa(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",43),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function ha(t,e){1&t&&(d.Wb(0,"p",44),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function fa(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"form",3,4),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(3,"div",5),d.Wb(4,"fieldset"),d.Wb(5,"legend",6),d.Rc(6,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(7,"div",7),d.Wb(8,"j-form-field"),d.Wb(9,"j-label"),d.Rc(10,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(11,"input",8),d.Vb(),d.Vb(),d.Wb(12,"div",7),d.Wb(13,"j-form-field",null,9),d.Wb(15,"j-label"),d.Rc(16,"\u041a\u041d\u041f/\u0422\u0438\u043f \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),d.Vb(),d.Rb(17,"j-select",10,11),d.mc(19,"async"),d.Vb(),d.Vb(),d.Wb(20,"div",12),d.Wb(21,"span",13),d.Rc(22),d.mc(23,"async"),d.Vb(),d.Wb(24,"j-form-field"),d.Wb(25,"j-label"),d.Rc(26,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(27,"textarea",14,15),d.Rb(29,"j-error",16),d.Pc(30,la,3,1,"div",17),d.mc(31,"async"),d.Vb(),d.Vb(),d.Wb(32,"div",7),d.Wb(33,"j-account-dropdown",18,19),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(35,"async"),d.mc(36,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(37,"div",5),d.Wb(38,"fieldset"),d.Wb(39,"j-employee-group-control",20),d.Rb(40,"j-error",16),d.Vb(),d.Vb(),d.Vb(),d.Wb(41,"div",21),d.Wb(42,"div",7),d.Wb(43,"fieldset"),d.Wb(44,"ul",22),d.Wb(45,"li",23),d.Wb(46,"h5",24),d.Rc(47,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: "),d.Wb(48,"span",25),d.Wb(49,"strong"),d.Rc(50),d.mc(51,"amountFormat"),d.mc(52,"async"),d.Vb(),d.Rc(53," \u20b8"),d.Vb(),d.Vb(),d.Pc(54,ba,2,1,"div",26),d.mc(55,"async"),d.Wb(56,"p",27),d.Pc(57,ua,3,3,"ng-container",28),d.mc(58,"async"),d.Pc(59,da,4,8,"ng-template",null,29,d.Qc),d.Vb(),d.Vb(),d.Wb(61,"li",30),d.Rb(62,"j-switch",31),d.Wb(63,"span",32),d.Rc(64,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(65,"br"),d.Wb(66,"small",33),d.Rc(67),d.mc(68,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(69,"div",34),d.Wb(70,"div",34),d.Pc(71,ma,6,3,"ng-container",1),d.Pc(72,pa,3,0,"ng-container",1),d.Vb(),d.Vb(),d.Rb(73,"ngx-spinner",35),d.Vb(),d.Pc(74,ha,6,0,"ng-template",null,36,d.Qc),d.Tb()}if(2&t){const t=d.Dc(14),e=d.Dc(18),n=d.Dc(60),s=d.lc();d.Ab(1),d.sc("formGroup",s.form),d.Ab(10),d.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),d.Ab(6),d.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",d.nc(19,37,s.knp$)),d.Ab(5),d.Uc(" ",d.nc(23,39,s.purposeLength$),"/",s.rules.purposeLength,""),d.Ab(5),d.sc("formControl",s.form.controls.purpose),d.Ab(2),d.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(31,41,s.purposeMessage$)),d.Ab(3),d.sc("isLoading",d.nc(35,43,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",d.nc(36,45,s.acceptableAccounts$)),d.Ab(6),d.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),d.Ab(1),d.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),d.Ab(10),d.Sc(d.nc(51,47,d.nc(52,49,s.total$))),d.Ab(4),d.sc("ngIf",d.nc(55,51,s.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(58,53,s.commission$))("ngIfElse",n),d.Ab(5),d.sc("formControl",s.form.controls.urgent),d.Ab(5),d.Sc(d.nc(68,55,"PAYMENTS.URGENT_HELPER")),d.Ab(4),d.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",s.SPINNER)("fullScreen",!1)}}let ga=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d){super(d.createPensionForm(),c,i,o,e,t,s,b,r,a,l),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.maskService=s,this.route=i,this.router=o,this.dictionaries=r,this.api=c,this.pipeline=a,this.authorityPermissionsService=l,this.modalService=b,this.accountsService=u,this.paymentsFormsFactory=d,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.employees$=new Ds.a([]),this.amount$=new Ds.a(0),this.subs=new Ai.a,this.paymentType=Ks.i.PENSION}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(oo.g),d.Qb(Js.a),d.Qb(r.c),d.Qb(ho.a),d.Qb(_s.a),d.Qb(_s.c),d.Qb($c.a),d.Qb(oo.c),d.Qb(oo.f),d.Qb(fo.c),d.Qb(r.q),d.Qb(l.c),d.Qb(oo.e))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-pension-payment"]],features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,aa,1,0,"j-restricted-placeholder",0),d.Pc(1,fa,76,57,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,Le.a,Be.a,i.c,de.a,o.a,i.t,i.i,oe,Ye.a,Ro.a,ze.a,ln.a,ss.a,Ue.a],pipes:[s.b,vs.a,c.d],styles:[""],encapsulation:2}),t})();function va(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function ya(t,e){if(1&t&&(d.Wb(0,"div",37),d.Wb(1,"div",38),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function Ra(t,e){if(1&t&&(d.Wb(0,"div",39),d.Rb(1,"span",40),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function Ca(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Ta(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function Aa(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",41),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",42),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function Sa(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",43),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function ja(t,e){1&t&&(d.Wb(0,"p",44),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function ka(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"form",3,4),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(3,"div",5),d.Wb(4,"fieldset"),d.Wb(5,"legend",6),d.Rc(6,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(7,"div",7),d.Wb(8,"j-form-field"),d.Wb(9,"j-label"),d.Rc(10,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(11,"input",8),d.Vb(),d.Vb(),d.Wb(12,"div",7),d.Wb(13,"j-form-field",null,9),d.Wb(15,"j-label"),d.Rc(16,"\u041a\u041d\u041f/\u0422\u0438\u043f \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),d.Vb(),d.Rb(17,"j-select",10,11),d.mc(19,"async"),d.Vb(),d.Vb(),d.Wb(20,"div",12),d.Wb(21,"span",13),d.Rc(22),d.mc(23,"async"),d.Vb(),d.Wb(24,"j-form-field"),d.Wb(25,"j-label"),d.Rc(26,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(27,"textarea",14,15),d.Rb(29,"j-error",16),d.Pc(30,ya,3,1,"div",17),d.mc(31,"async"),d.Vb(),d.Vb(),d.Wb(32,"div",7),d.Wb(33,"j-account-dropdown",18,19),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(35,"async"),d.mc(36,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(37,"div",5),d.Wb(38,"fieldset"),d.Wb(39,"j-employee-group-control",20),d.Rb(40,"j-error",16),d.Vb(),d.Vb(),d.Vb(),d.Wb(41,"div",21),d.Wb(42,"div",7),d.Wb(43,"fieldset"),d.Wb(44,"ul",22),d.Wb(45,"li",23),d.Wb(46,"h5",24),d.Rc(47,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: "),d.Wb(48,"span",25),d.Wb(49,"strong"),d.Rc(50),d.mc(51,"amountFormat"),d.mc(52,"async"),d.Vb(),d.Rc(53," \u20b8"),d.Vb(),d.Vb(),d.Pc(54,Ra,2,1,"div",26),d.mc(55,"async"),d.Wb(56,"p",27),d.Pc(57,Ca,3,3,"ng-container",28),d.mc(58,"async"),d.Pc(59,Ta,4,8,"ng-template",null,29,d.Qc),d.Vb(),d.Vb(),d.Wb(61,"li",30),d.Rb(62,"j-switch",31),d.Wb(63,"span",32),d.Rc(64,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(65,"br"),d.Wb(66,"small",33),d.Rc(67),d.mc(68,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(69,"div",34),d.Wb(70,"div",34),d.Pc(71,Aa,6,3,"ng-container",1),d.Pc(72,Sa,3,0,"ng-container",1),d.Vb(),d.Vb(),d.Rb(73,"ngx-spinner",35),d.Vb(),d.Pc(74,ja,6,0,"ng-template",null,36,d.Qc),d.Tb()}if(2&t){const t=d.Dc(14),e=d.Dc(18),n=d.Dc(60),s=d.lc();d.Ab(1),d.sc("formGroup",s.form),d.Ab(10),d.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),d.Ab(6),d.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",d.nc(19,37,s.knp$)),d.Ab(5),d.Uc(" ",d.nc(23,39,s.purposeLength$),"/",s.rules.purposeLength,""),d.Ab(5),d.sc("formControl",s.form.controls.purpose),d.Ab(2),d.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(31,41,s.purposeMessage$)),d.Ab(3),d.sc("isLoading",d.nc(35,43,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",d.nc(36,45,s.acceptableAccounts$)),d.Ab(6),d.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),d.Ab(1),d.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),d.Ab(10),d.Sc(d.nc(51,47,d.nc(52,49,s.total$))),d.Ab(4),d.sc("ngIf",d.nc(55,51,s.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(58,53,s.commission$))("ngIfElse",n),d.Ab(5),d.sc("formControl",s.form.controls.urgent),d.Ab(5),d.Sc(d.nc(68,55,"PAYMENTS.URGENT_HELPER")),d.Ab(4),d.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",s.SPINNER)("fullScreen",!1)}}let Ia=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d){super(d.createSocialForm(),a,s,i,e,t,o,c,l,b,u),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.route=s,this.router=i,this.maskService=o,this.accountsService=r,this.modalService=c,this.api=a,this.dictionaries=l,this.pipeline=b,this.authorityPermissionsService=u,this.paymentsFormsFactory=d,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.paymentType=Ks.i.SOCIAL}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(Js.a),d.Qb(r.c),d.Qb(_s.a),d.Qb(_s.c),d.Qb(ho.a),d.Qb(l.c),d.Qb(r.q),d.Qb(bc.a),d.Qb(ri.a),d.Qb(dc.a),d.Qb(fo.c),d.Qb(uc.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-social-payment"]],features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,va,1,0,"j-restricted-placeholder",0),d.Pc(1,ka,76,57,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,Le.a,Be.a,i.c,de.a,o.a,i.t,i.i,oe,Ye.a,Ro.a,ze.a,ln.a,ss.a,Ue.a],pipes:[s.b,vs.a,c.d],styles:[""]}),t})();function Va(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function Ea(t,e){if(1&t&&(d.Wb(0,"div",37),d.Wb(1,"div",38),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function _a(t,e){if(1&t&&(d.Wb(0,"div",39),d.Rb(1,"span",40),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function Wa(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Oa(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function Pa(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",41),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",42),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function xa(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",43),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function wa(t,e){1&t&&(d.Wb(0,"p",44),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function Na(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"form",3,4),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(3,"div",5),d.Wb(4,"fieldset"),d.Wb(5,"legend",6),d.Rc(6,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(7,"div",7),d.Wb(8,"j-form-field"),d.Wb(9,"j-label"),d.Rc(10,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(11,"input",8),d.Vb(),d.Vb(),d.Wb(12,"div",7),d.Wb(13,"j-form-field",null,9),d.Wb(15,"j-label"),d.Rc(16,"\u041a\u041d\u041f/\u0422\u0438\u043f \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),d.Vb(),d.Rb(17,"j-select",10,11),d.mc(19,"async"),d.Vb(),d.Vb(),d.Wb(20,"div",12),d.Wb(21,"span",13),d.Rc(22),d.mc(23,"async"),d.Vb(),d.Wb(24,"j-form-field"),d.Wb(25,"j-label"),d.Rc(26,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(27,"textarea",14,15),d.Rb(29,"j-error",16),d.Pc(30,Ea,3,1,"div",17),d.mc(31,"async"),d.Vb(),d.Vb(),d.Wb(32,"div",7),d.Wb(33,"j-account-dropdown",18,19),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(35,"async"),d.mc(36,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(37,"div",5),d.Wb(38,"fieldset"),d.Wb(39,"j-employee-group-control",20),d.Rb(40,"j-error",16),d.Vb(),d.Vb(),d.Vb(),d.Wb(41,"div",21),d.Wb(42,"div",7),d.Wb(43,"fieldset"),d.Wb(44,"ul",22),d.Wb(45,"li",23),d.Wb(46,"h5",24),d.Rc(47,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: "),d.Wb(48,"span",25),d.Wb(49,"strong"),d.Rc(50),d.mc(51,"amountFormat"),d.mc(52,"async"),d.Vb(),d.Rc(53," \u20b8"),d.Vb(),d.Vb(),d.Pc(54,_a,2,1,"div",26),d.mc(55,"async"),d.Wb(56,"p",27),d.Pc(57,Wa,3,3,"ng-container",28),d.mc(58,"async"),d.Pc(59,Oa,4,8,"ng-template",null,29,d.Qc),d.Vb(),d.Vb(),d.Wb(61,"li",30),d.Rb(62,"j-switch",31),d.Wb(63,"span",32),d.Rc(64,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(65,"br"),d.Wb(66,"small",33),d.Rc(67),d.mc(68,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(69,"div",34),d.Pc(70,Pa,6,3,"ng-container",1),d.Pc(71,xa,3,0,"ng-container",1),d.Vb(),d.Rb(72,"ngx-spinner",35),d.Vb(),d.Pc(73,wa,6,0,"ng-template",null,36,d.Qc),d.Tb()}if(2&t){const t=d.Dc(14),e=d.Dc(18),n=d.Dc(60),s=d.lc();d.Ab(1),d.sc("formGroup",s.form),d.Ab(10),d.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),d.Ab(6),d.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",d.nc(19,37,s.knp$)),d.Ab(5),d.Uc(" ",d.nc(23,39,s.purposeLength$),"/",s.rules.purposeLength,""),d.Ab(5),d.sc("formControl",s.form.controls.purpose),d.Ab(2),d.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(31,41,s.purposeMessage$)),d.Ab(3),d.sc("isLoading",d.nc(35,43,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",d.nc(36,45,s.acceptableAccounts$)),d.Ab(6),d.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),d.Ab(1),d.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),d.Ab(10),d.Sc(d.nc(51,47,d.nc(52,49,s.total$))),d.Ab(4),d.sc("ngIf",d.nc(55,51,s.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(58,53,s.commission$))("ngIfElse",n),d.Ab(5),d.sc("formControl",s.form.controls.urgent),d.Ab(5),d.Sc(d.nc(68,55,"PAYMENTS.URGENT_HELPER")),d.Ab(3),d.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",s.SPINNER)("fullScreen",!1)}}let Da=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d){super(d.createMedicalForm(),l,s,i,e,t,o,c,a,b,u),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.route=s,this.router=i,this.maskService=o,this.accountsService=r,this.modalService=c,this.dictionaries=a,this.api=l,this.pipeline=b,this.authorityPermissionsService=u,this.paymentsFormsFactory=d,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.paymentType=Ks.i.MEDICAL}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(Js.a),d.Qb(r.c),d.Qb(_s.a),d.Qb(_s.c),d.Qb(ho.a),d.Qb(l.c),d.Qb(r.q),d.Qb(ri.a),d.Qb(bc.a),d.Qb(dc.a),d.Qb(fo.c),d.Qb(uc.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-medical-payment"]],features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,Va,1,0,"j-restricted-placeholder",0),d.Pc(1,Na,75,57,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,Le.a,Be.a,i.c,de.a,o.a,i.t,i.i,oe,Ye.a,Ro.a,ze.a,ln.a,ss.a,Ue.a],pipes:[s.b,vs.a,c.d],styles:[""]}),t})();function Ma(t,e){1&t&&d.Rb(0,"j-restricted-placeholder",2)}function La(t,e){1&t&&(d.Wb(0,"j-label"),d.Rc(1,"\u0411\u0430\u043d\u043a \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f"),d.Vb())}function $a(t,e){if(1&t&&(d.Wb(0,"div",57),d.Wb(1,"div",58),d.Rb(2,"j-entity-logo",59),d.Vb(),d.Wb(3,"div",60),d.Wb(4,"p",61),d.Rc(5),d.Vb(),d.Wb(6,"p",62),d.Rc(7),d.Vb(),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(2),d.sc("name",t.bic),d.Ab(3),d.Tc(" ",t.salaryTransitIban?"\u0421\u0447\u0435\u0442: "+t.salaryTransitIban:t.name," "),d.Ab(2),d.Uc("",t.bic,": ",t.name,"")}}function Fa(t,e){if(1&t&&(d.Wb(0,"div",63),d.Wb(1,"div",58),d.Rb(2,"j-entity-logo",59),d.Vb(),d.Wb(3,"div",60),d.Wb(4,"p",61),d.Rc(5),d.Vb(),d.Wb(6,"p",62),d.Rc(7),d.Vb(),d.Vb(),d.Vb()),2&t){const t=e.item;d.Ab(2),d.sc("name",t.bic),d.Ab(3),d.Tc(" ",t.salaryTransitIban?"\u0421\u0447\u0435\u0442: "+t.salaryTransitIban:t.name," "),d.Ab(2),d.Uc("",t.bic,": ",t.name," ")}}function Ua(t,e){if(1&t&&(d.Wb(0,"div",10),d.Wb(1,"j-form-field",64),d.Wb(2,"j-label"),d.Rc(3,"\u0421\u0447\u0435\u0442 \u0411\u0430\u043d\u043a\u0430"),d.Vb(),d.Rb(4,"input",65,66),d.Rb(6,"j-error",28),d.Vb(),d.Vb()),2&t){const t=d.lc(2);d.Ab(4),d.sc("jShadow",t.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",t.masks.bankAccount.mask)("formControl",t.form.controls.bankAccount),d.Ab(2),d.sc("control",t.form.controls.bankAccount)("errorMessages",t.errors.bankAccount)}}function Ya(t,e){if(1&t&&(d.Wb(0,"div",67),d.Rc(1),d.Vb()),2&t){const t=e.item;d.Ab(1),d.Sc(t.label)}}function Ba(t,e){if(1&t&&(d.Wb(0,"div",68),d.Wb(1,"div",69),d.Rc(2),d.Vb(),d.Vb()),2&t){const t=e.ngIf;d.Ab(2),d.Tc(" ",t," ")}}function Ha(t,e){if(1&t&&(d.Wb(0,"div",70),d.Rb(1,"span",71),d.Vb()),2&t){const t=e.ngIf;d.Ab(1),d.sc("innerHTML",t,d.Hc)}}function Qa(t,e){1&t&&(d.Ub(0),d.Rc(1),d.mc(2,"translate"),d.Tb()),2&t&&(d.Ab(1),d.Tc(" ",d.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Ga(t,e){if(1&t&&(d.Rc(0),d.mc(1,"translate"),d.mc(2,"amountFormat"),d.mc(3,"async")),2&t){const t=d.lc(2);d.Uc(" ",d.nc(1,2,"PAYMENTS.COMMISSION"),": ",d.nc(2,4,d.nc(3,6,t.commission$))," \u20b8 ")}}function Ka(t,e){1&t&&(d.Wb(0,"p",72),d.Rc(1,"\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442, \u0432\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u0432\u0441\u0435 "),d.Rb(2,"br"),d.Rc(3," \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u0430\u043c\u0438 \u0420\u041a"),d.Vb())}function qa(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"button",73),d.ic("click",(function(e){return d.Gc(t),d.lc(2).saveToDraft()})),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),d.Vb(),d.Wb(3,"button",74),d.Rc(4),d.mc(5,"translate"),d.Vb(),d.Tb()}if(2&t){const t=d.lc(2);d.Ab(4),d.Tc("",d.nc(5,1,t.submitLabel)," ")}}function za(t,e){1&t&&(d.Ub(0),d.Wb(1,"button",75),d.Rc(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),d.Vb(),d.Tb())}function Xa(t,e){1&t&&(d.Wb(0,"p",76),d.Rc(1," \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 "),d.Rb(2,"br"),d.Rc(3," \u041f\u043e \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u043a\u0430\u043a\u043e\u0439 "),d.Rb(4,"br"),d.Rc(5," \u0416\u0434\u0443 \u0438\u043d\u0444\u0443 "),d.Vb())}function Za(t,e){if(1&t){const t=d.Xb();d.Ub(0),d.Wb(1,"div",3),d.Wb(2,"form",4,5),d.ic("submit",(function(e){return d.Gc(t),d.lc().onSubmit(e)})),d.Wb(4,"div",6),d.Wb(5,"fieldset"),d.Wb(6,"div",7),d.Wb(7,"h2",8),d.Rc(8),d.mc(9,"translate"),d.Vb(),d.Wb(10,"button",9),d.ic("click",(function(e){return d.Gc(t),d.lc().openBanksDictionary()})),d.Rc(11),d.mc(12,"translate"),d.Vb(),d.Vb(),d.Wb(13,"div",10),d.Wb(14,"j-form-field",null,11),d.Pc(16,La,2,0,"j-label",1),d.Wb(17,"j-select",12,13),d.mc(19,"async"),d.Pc(20,$a,8,4,"ng-template",14),d.Pc(21,Fa,8,4,"ng-template",15),d.Vb(),d.Vb(),d.Vb(),d.Pc(22,Ua,7,6,"div",16),d.Vb(),d.Vb(),d.Wb(23,"div",6),d.Wb(24,"fieldset"),d.Wb(25,"legend",17),d.Rc(26,"\u0414\u0435\u0442\u0430\u043b\u0438 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Wb(27,"div",10),d.Wb(28,"j-form-field"),d.Wb(29,"j-label"),d.Rc(30,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),d.Vb(),d.Rb(31,"input",18),d.Vb(),d.Vb(),d.Wb(32,"div",10),d.Rb(33,"j-date-picker",19,20),d.mc(35,"async"),d.mc(36,"async"),d.Vb(),d.Wb(37,"div",10),d.Wb(38,"j-form-field",null,21),d.Wb(40,"j-label"),d.Rc(41,"\u041a\u041d\u041f/\u0422\u0438\u043f \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),d.Vb(),d.Wb(42,"j-select",22,23),d.mc(44,"async"),d.Pc(45,Ya,2,1,"ng-template",14),d.Vb(),d.Vb(),d.Vb(),d.Wb(46,"div",24),d.Wb(47,"span",25),d.Rc(48),d.mc(49,"async"),d.Vb(),d.Wb(50,"j-form-field"),d.Wb(51,"j-label"),d.Rc(52,"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),d.Vb(),d.Rb(53,"textarea",26,27),d.Rb(55,"j-error",28),d.Pc(56,Ba,3,1,"div",29),d.mc(57,"async"),d.Vb(),d.Vb(),d.Wb(58,"div",10),d.Wb(59,"j-account-dropdown",30,31),d.ic("selected",(function(e){return d.Gc(t),d.lc().onSenderAccountSelect(e)})),d.mc(61,"async"),d.mc(62,"async"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(63,"div",6),d.Wb(64,"fieldset"),d.Wb(65,"j-employee-group-control",32),d.Wb(66,"div",33),d.Wb(67,"div",34),d.Wb(68,"div",35),d.Rb(69,"input",36),d.Wb(70,"label",37),d.Rc(71," \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u0420\u041a "),d.Vb(),d.Vb(),d.Vb(),d.Wb(72,"div",34),d.Wb(73,"div",35),d.Rb(74,"input",38),d.Wb(75,"label",39),d.Rc(76," \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u043d\u0435\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u0420\u041a "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Rb(77,"j-error",28),d.Vb(),d.Vb(),d.Vb(),d.Wb(78,"div",40),d.Wb(79,"div",10),d.Wb(80,"fieldset"),d.Wb(81,"ul",41),d.Wb(82,"li",42),d.Wb(83,"h5",43),d.Rc(84,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: "),d.Wb(85,"span",44),d.Wb(86,"strong"),d.Rc(87),d.mc(88,"amountFormat"),d.mc(89,"async"),d.Vb(),d.Rc(90," \u20b8"),d.Vb(),d.Vb(),d.Pc(91,Ha,2,1,"div",45),d.mc(92,"async"),d.Wb(93,"p",46),d.Pc(94,Qa,3,3,"ng-container",47),d.mc(95,"async"),d.Pc(96,Ga,4,8,"ng-template",null,48,d.Qc),d.Vb(),d.Vb(),d.Wb(98,"li",49),d.Rb(99,"j-switch",50),d.Wb(100,"span",51),d.Rc(101,"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436 "),d.Rb(102,"br"),d.Wb(103,"small",52),d.Rc(104),d.mc(105,"translate"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(106,"div",53),d.Pc(107,Ka,4,0,"p",54),d.mc(108,"async"),d.Wb(109,"div",53),d.Pc(110,qa,6,3,"ng-container",1),d.Pc(111,za,3,0,"ng-container",1),d.Vb(),d.Vb(),d.Rb(112,"ngx-spinner",55),d.Vb(),d.Vb(),d.Pc(113,Xa,6,0,"ng-template",null,56,d.Qc),d.Tb()}if(2&t){const t=d.Dc(15),e=d.Dc(18),n=d.Dc(34),s=d.Dc(39),i=d.Dc(43),o=d.Dc(97),r=d.lc();d.Ab(2),d.sc("formGroup",r.form),d.Ab(6),d.Tc(" ",d.nc(9,57,"PAYMENTS.RECIPIENT.TITLE")," "),d.Ab(3),d.Tc(" ",d.nc(12,59,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),d.Ab(5),d.sc("ngIf",!r.form.controls.bankReceiver.value),d.Ab(1),d.sc("searchFn",r.paymentsService.bankReceiverSearchFn)("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",r.form.controls.bankReceiver)("clearable",!1)("items",d.nc(19,61,r.banks.items$)),d.Ab(5),d.sc("ngIf",r.form.controls.bankAccount.enabled),d.Ab(9),d.sc("mask",r.masks.number.mask)("formControl",r.form.controls.number),d.Ab(2),d.sc("jFocusOnReturn",n)("datesEnabled",d.nc(35,63,r.workingDays$))("formControl",r.form.controls.date)("formatValue",!0)("minDate",r.dateLimit.minDate)("maxDate",r.dateLimit.maxDate)("helperText",d.nc(36,65,r.dateMessage$)),d.Ab(9),d.sc("jFocusOnReturn",i)("appendTo",s.elementRef.nativeElement)("formControl",r.form.controls.knp)("clearable",!1)("searchMask",r.masks.knp.mask)("shadow",r.masks.knp.shadow)("items",d.nc(44,67,r.knp$)),d.Ab(6),d.Uc(" ",d.nc(49,69,r.purposeLength$),"/",r.rules.purposeLength,""),d.Ab(5),d.sc("formControl",r.form.controls.purpose),d.Ab(2),d.sc("control",r.form.controls.purpose)("errorMessages",r.errors.purpose),d.Ab(1),d.sc("ngIf",d.nc(57,71,r.purposeMessage$)),d.Ab(3),d.sc("isLoading",d.nc(61,73,r.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",r.form.controls.senderAccount.touched&&r.form.controls.senderAccount.errors)("accounts",d.nc(62,75,r.acceptableAccounts$)),d.Ab(6),d.sc("formControl",r.form.controls.employees)("paymentType",r.paymentType)("maxAmount",r.employeeMaxAmount)("birthDateRequired",!1)("ibanRequired",!0),d.Ab(4),d.sc("value",!0),d.Ab(5),d.sc("value",!1),d.Ab(3),d.sc("control",r.form.controls.employees)("errorMessages",r.errors.employees),d.Ab(10),d.Sc(d.nc(88,77,d.nc(89,79,r.total$))),d.Ab(4),d.sc("ngIf",d.nc(92,81,r.amountMessage$)),d.Ab(3),d.sc("ngIf",null===d.nc(95,83,r.commission$))("ngIfElse",o),d.Ab(5),d.sc("formControl",r.form.controls.urgent),d.Ab(5),d.Sc(d.nc(105,85,"PAYMENTS.URGENT_HELPER")),d.Ab(3),d.sc("ngIf",d.nc(108,87,r.controlsStream.isResidents)),d.Ab(3),d.sc("ngIf",r.restoredData.status!==r.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("ngIf",r.restoredData.status===r.PAYMENT_STATUS.CREATED),d.Ab(1),d.sc("name",r.SPINNER)("fullScreen",!1)}}let Ja=(()=>{class t extends po{constructor(t,e,n,s,i,o,r,c,a,l,b,u,d){super(d.createSalaryForm(),a,s,i,e,t,o,c,l,b,u),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.route=s,this.router=i,this.maskService=o,this.accountsService=r,this.modalService=c,this.api=a,this.dictionaries=l,this.pipeline=b,this.authorityPermissionsService=u,this.paymentsFormsFactory=d,this.masks={number:"paymentNum",amount:"amount",knp:"knp",bankAccount:"tengeAccount"},this.employeeMaxAmount=null,this.paymentType=Ks.i.SALARY}ngOnInit(){super.ngOnInit(),this.banks=this.dictionaries.bankDictionary,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(J.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP(),this.subs.add(this.controlsStream.bankReceiver.pipe(Object(Ys.a)(this.banks.entities$),Object(nt.a)(([t,e])=>t&&e[t]),Object(Us.a)()).subscribe(t=>{const{bankAccount:e}=this.form.controls;!t||t.salaryTransitIban&&e.enabled?(e.disable(),e.patchValue("")):t&&!t.salaryTransitIban&&e.disabled?e.enable():t&&e.updateValueAndValidity()}))}openBanksDictionary(){this.modals.open(fi,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>t&&this.form.controls.bankReceiver.patchValue(t.id)).catch(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(ws.c),d.Qb(Js.a),d.Qb(r.c),d.Qb(_s.a),d.Qb(_s.c),d.Qb(ho.a),d.Qb(l.c),d.Qb(r.q),d.Qb(bc.a),d.Qb(ri.a),d.Qb(dc.a),d.Qb(fo.c),d.Qb(uc.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["j-salary-payment"]],features:[d.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER"],[1,"payment-section"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["receiverWrapper",""],["bindValue","id",3,"searchFn","jFocusOnReturn","appendTo","formControl","clearable","items"],["receiverSelect",""],["j-label-tmp",""],["j-option-tmp",""],["class","form-group",4,"ngIf"],[1,"h2"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["allowAuto","true","label","\u0414\u0430\u0442\u0430 \u0432\u0430\u043b\u044e\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",3,"jFocusOnReturn","datesEnabled","formControl","formatValue","minDate","maxDate","helperText"],["datepicker",""],["knpWrapper",""],["bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","maxAmount","birthDateRequired","ibanRequired"],["ngProjectAs","[header]",5,["","header",""],1,"row"],[1,"form-group","col"],[1,"custom-control","custom-radio"],["type","radio","id","residents","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","residents",1,"custom-control-label","text-muted","p3"],["type","radio","id","nonResident","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","nonResident",1,"custom-control-label","text-muted","p3"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["class","p3 text-gray text-right",4,"ngIf"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["amountInfo",""],[1,"account-pill","pl-0","pr-0"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"account-pill","account-pill_gray","account-pill_fill"],["clearable","true"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],[1,"text-truncate"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],[1,"p3","text-gray","text-right"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"p3"]],template:function(t,e){1&t&&(d.Pc(0,Ma,1,0,"j-restricted-placeholder",0),d.Pc(1,Za,115,89,"ng-container",1)),2&t&&(d.sc("ngIf",e.isRestricted),d.Ab(1),d.sc("ngIf",!e.isRestricted))},directives:[s.u,wn.a,i.J,i.u,Re.b,de.b,i.l,De.a,oe,de.a,i.t,i.i,rt,it,Le.a,Be.a,i.c,o.a,we.a,Ye.a,Ro.a,ze.a,i.B,i.j,ln.a,ss.a,bn.a,pe.a,Ce.a,ve.a,ye.a,Ue.a],pipes:[c.d,s.b,vs.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),t})();const tl=[{path:Ws.c.root,component:ac,children:[{path:"",canActivate:[Ps.a]},{path:Ws.b.root,component:Lc,data:{animation:"slideOrFade",index:2},children:[{path:Ws.b.tax,matcher:Object(ht.factoryUserPageMatcher)(Ws.b.tax,"paymentId"),component:Dc,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:21}},{path:Ws.b.pension,matcher:Object(ht.factoryUserPageMatcher)(Ws.b.pension,"paymentId"),component:ga,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:22}},{path:Ws.b.social,matcher:Object(ht.factoryUserPageMatcher)(Ws.b.social,"paymentId"),component:Ia,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:23}},{path:Ws.b.osms,matcher:Object(ht.factoryUserPageMatcher)(Ws.b.osms,"paymentId"),component:Da,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:24}},{path:"**",redirectTo:Ws.b.tax}]},{path:Ws.c.order,matcher:Object(ht.factoryUserPageMatcher)(Ws.c.order,"paymentId"),component:ca,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:1}},{path:Ws.c.salary,matcher:Object(ht.factoryUserPageMatcher)(Ws.c.salary,"paymentId"),component:Ja,canDeactivate:[Os.a],data:{animation:"slideOrFade",index:3}},{path:":paymentId",canActivate:[Ps.a]},{path:"**",redirectTo:Ws.c.order}]},{path:Ws.a.foreignCurrency,canDeactivate:[Os.a],matcher:Object(ht.factoryUserPageMatcher)(Ws.a.foreignCurrency,"paymentId"),component:ec},{path:"**",redirectTo:Ws.c.root}];let el=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[_s.g.forChild(tl)],_s.g]}),t})();var nl=n("3bMa"),sl=n("pZP7"),il=n("UZjs"),ol=n("i/as"),rl=n("8Sq6"),cl=n("w657");n.d(e,"PaymentsModule",(function(){return al}));let al=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},providers:[Es.a],imports:[[s.c,i.n,i.D,o.c,r.g,r.D,r.H,r.y,a.b,c.c,l.b,u.a,Vs,el,b.ContractsModule],r.r,r.D]}),t})();d.Jc(mi.a,[ec,Jr,ac,Dc,Lc,ca,ga,Ia,Da,Ja,li,di,mi.a,fi,yi,Ri.a,so,oi,xi,Ci,Ti,Yi,qi,no,Hi,zi.b,Zi,io.a,s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,i.J,i.y,i.I,i.c,i.z,i.C,i.a,i.F,i.G,i.B,i.t,i.u,i.E,i.p,i.o,i.A,i.b,i.d,i.w,i.x,i.v,i.i,i.l,i.j,i.m,i.f,o.a,r.d,r.e,r.p,r.h,r.C,r.G,r.o,r.u,r.v,r.w,r.x,r.z,r.A,r.B,a.a,c.a,nl.a,Ro.a,sl.a,il.a,re.a,ce.a,ae.a,le.a,be.a,ue.a,de.b,me.a,pe.a,he.a,fe.a,ge.a,ve.a,de.a,ye.a,Re.b,Re.a,Ce.a,Te.a,Ae.a,Se.a,je.a,ke.a,Ie.a,Ve.a,Ee.a,_e.b,We.a,Oe.a,Pe.a,xe.a,we.a,Ne.a,De.a,Me.a,Le.a,$e.a,Fe.a,Ue.a,Ye.a,Be.a,He.a,Qe.a,Ge.a,Ke.a,qe.a,ze.a,Xe.a,Ze.a,Je.a,tn.a,en.a,nn.a,sn.a,on.a,rn.a,cn.a,an.a,ln.a,bn.a,un.a,dn.a,mn.a,pn.a,hn.a,fn.a,gn.a,vn.a,yn.a,Rn.a,Cn.a,Tn.a,An.a,Sn.a,jn.a,kn.a,In.a,Vn.a,En.a,_n.a,Wn.a,On.a,Pn.a,xn.a,wn.a,Nn.a,Dn.a,Mn.a,Ln.a,$n.a,Fn.a,Un.a,Yn.a,Bn.a,Hn.a,Qn.a,Gn.b,Kn.a,qn.a,zn.a,Xn.a,Zn.a,Jn.a,ts.a,es.a,ns.a,ss.a,is.a,os.a,rs.a,r.E,cs.a,cs.b,as.a,ls.a,bs.a,bs.c,bs.b,us.a,ds.a,oe,X,ot,it,rt,ct,at,lt,bt,ut,dt,mt,pt,_s.h,_s.d,_s.f,_s.e,_s.i,ol.a,rl.a,cl.a],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m,o.b,c.d,ms.a,ps.a,hs.a,fs.a,gs.a,vs.a,ys.a,Rs.a,Cs.a,Ts.a,As.a,Ss.a,js.a,ks.a,Is.a])}}]);