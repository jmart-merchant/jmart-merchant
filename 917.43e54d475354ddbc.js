(self.webpackChunkjysan=self.webpackChunkjysan||[]).push([[917],{48149:(Pt,X,r)=>{"use strict";r.d(X,{j:()=>G});var a=r(69808),t=r(59516),N=r(93075),A=r(91995),e=r(5e3),b=r(70853),_=r(50312),h=r(45619),l=r(81522),E=r(69544),O=r(84685),F=r(72159),M=r(89854);let G=(()=>{class f{}return f.\u0275fac=function(k){return new(k||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[a.ez,A.m,t.Bz,N.u5,N.UX]]}),f})();e.B6R(b.S,[l.i,a.RF,a.n9,E.d$,a.ED,O.k,a.O5,F.y,_.v,h.f],[M.X$]),e.B6R(_.v,[a.tP,M.Pi,a.O5,E.d$,F.y,O.k],[]),e.B6R(h.f,[E.d$,a.O5,F.y],[M.X$])},45619:(Pt,X,r)=>{"use strict";r.d(X,{f:()=>b});var a=r(89129),t=r(5e3),N=r(14181);function A(_,h){if(1&_&&t._UZ(0,"j-money",9),2&_){const l=t.oxw();t.Q6J("money",null==l.card?null:l.card.balance)}}function e(_,h){if(1&_&&(t.TgZ(0,"small",10),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_){const l=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,l.status))}}let b=(()=>{class _{constructor(l){this.cardsService=l}ngOnInit(){}get cardImage(){const l="/assets/icons/accounts";return this.card.category===a.kk.PRIVATE?`${l}/card-private.svg`:`${l}/card-commercial.svg`}get cardMps(){const l="/assets/icons/cards/mps";return"4"===this.card.cardNumber[0]?`${l}/visa.svg`:`${l}/mastercard.svg`}get status(){if(this.card.status!==a.ti.ACTIVE)return this.cardsService.mapCardStatus(this.card.status)}get label(){return this.cardsService.mapCardLabel(this.card)}get isBalanceShown(){return this.card.category===a.kk.COMMERCIAL}get maskedCardNumber(){var l;const E=null===(l=this.card)||void 0===l?void 0:l.cardNumber;return E?`${E.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${E.substring(E.length-4,E.length)}`:""}}return _.\u0275fac=function(l){return new(l||_)(t.Y36(N.d))},_.\u0275cmp=t.Xpm({type:_,selectors:[["j-account-card"]],inputs:{card:"card"},decls:13,vars:8,consts:[[1,"account-item"],[1,"account-item__img",3,"inlineSVG"],[1,"account-item__body","p3"],[1,"text-muted"],[1,"text-dark","d-flex"],[1,"mr-2",3,"inlineSVG"],[1,"ml-auto","p3","text-right"],[3,"money",4,"ngIf"],["class","d-block text-muted",4,"ngIf"],[3,"money"],[1,"d-block","text-muted"]],template:function(l,E){1&l&&(t.TgZ(0,"div",0),t._UZ(1,"span",1),t.TgZ(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"span",5),t.TgZ(8,"span"),t._uU(9),t.qZA()()(),t.TgZ(10,"div",6),t.YNc(11,A,1,1,"j-money",7),t.YNc(12,e,3,3,"small",8),t.qZA()()),2&l&&(t.xp6(1),t.Q6J("inlineSVG",E.cardImage),t.xp6(3),t.Oqu(t.lcZ(5,6,E.label)),t.xp6(3),t.Q6J("inlineSVG",E.cardMps),t.xp6(2),t.Oqu(E.maskedCardNumber),t.xp6(2),t.Q6J("ngIf",E.isBalanceShown),t.xp6(1),t.Q6J("ngIf",E.status))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:flex;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;transform:scale(.75)}.selected-account__label--all[_ngcontent-%COMP%]{left:21px!important}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%]{transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;border-radius:50%;display:flex;align-items:center;background:#fff;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),_})()},70853:(Pt,X,r)=>{"use strict";r.d(X,{S:()=>i});var a=r(5e3),t=r(41777),N=r(89129),A=r(5157),e=r(14181),b=r(53145);const _=["accountsDropdown"];function h(Y,S){if(1&Y&&(a.ynx(0),a._UZ(1,"span",11),a.TgZ(2,"div",12),a._UZ(3,"span",13),a.TgZ(4,"span"),a._uU(5),a.qZA()(),a.BQk()),2&Y){const U=a.oxw().$implicit,x=a.oxw();a.xp6(1),a.Q6J("inlineSVG",x.getCardImage(U)),a.xp6(2),a.Q6J("inlineSVG",x.getCardMps(U)),a.xp6(2),a.Oqu(x.getMaskedCardNumber(U))}}function l(Y,S){if(1&Y&&(a.ynx(0),a._UZ(1,"span",14),a.TgZ(2,"div",12)(3,"span"),a._uU(4),a.qZA()(),a.BQk()),2&Y){const U=a.oxw().$implicit,x=a.oxw();a.xp6(4),a.Oqu(x.getMaskedIban(U))}}function E(Y,S){1&Y&&(a.ynx(0),a.TgZ(1,"div",15),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.BQk()),2&Y&&(a.xp6(2),a.hij(" ",a.lcZ(3,1,"ACCOUNTS.DROPDOWN.ALL")," "))}function O(Y,S){if(1&Y&&(a.ynx(0),a._UZ(1,"j-entity-logo",16),a.TgZ(2,"div",12)(3,"span"),a._uU(4),a.qZA()(),a.BQk()),2&Y){const U=a.oxw().$implicit,x=a.oxw();a.xp6(1),a.Q6J("name",null==U||null==U.balance?null:U.balance.currency),a.xp6(3),a.Oqu(x.getMaskedIban(U))}}function F(Y,S){if(1&Y&&a._UZ(0,"j-money",17),2&Y){const U=a.oxw().$implicit;a.Q6J("money",null==U?null:U.balance)}}function M(Y,S){if(1&Y&&(a.ynx(0,5),a.TgZ(1,"div",6)(2,"label",7),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.YNc(5,h,6,3,"ng-container",8),a.YNc(6,l,5,1,"ng-container",8),a.YNc(7,E,4,3,"ng-container",8),a.YNc(8,O,5,2,"ng-container",9),a.qZA(),a.BQk(),a.YNc(9,F,1,1,"j-money",10)),2&Y){const U=S.$implicit,x=a.oxw();a.Q6J("ngSwitch",U.accountType),a.xp6(2),a.ekj("selected-account__label--all",U.accountType===x.ACCOUNT_TYPE.ALL),a.xp6(1),a.hij(" ",a.lcZ(4,8,x.label||x.mapSelectedAccountLabel(U))," "),a.xp6(2),a.Q6J("ngSwitchCase",x.ACCOUNT_TYPE.CARD),a.xp6(1),a.Q6J("ngSwitchCase",x.ACCOUNT_TYPE.DEPOSIT),a.xp6(1),a.Q6J("ngSwitchCase",x.ACCOUNT_TYPE.ALL),a.xp6(2),a.Q6J("ngIf",x.getIsBalanceShown(U)&&(null==U?null:U.balance))}}function G(Y,S){if(1&Y&&a._UZ(0,"j-account-item",21),2&Y){const U=a.oxw().$implicit;a.Q6J("account",U)}}function f(Y,S){if(1&Y&&a._UZ(0,"j-account-card",22),2&Y){const U=a.oxw().$implicit;a.Q6J("card",U)}}function B(Y,S){1&Y&&(a.TgZ(0,"div",23),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&Y&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"ACCOUNTS.DROPDOWN.ALL")," "))}function k(Y,S){if(1&Y&&(a.YNc(0,G,1,1,"j-account-item",18),a.YNc(1,f,1,1,"j-account-card",19),a.YNc(2,B,3,3,"div",20)),2&Y){const U=S.$implicit,x=a.oxw();a.Q6J("ngIf",U.accountType===x.ACCOUNT_TYPE.ACCOUNT||U.accountType===x.ACCOUNT_TYPE.DEPOSIT),a.xp6(1),a.Q6J("ngIf",U.accountType===x.ACCOUNT_TYPE.CARD),a.xp6(1),a.Q6J("ngIf",U.accountType===x.ACCOUNT_TYPE.ALL)}}function $(Y,S){1&Y&&a._UZ(0,"div",24),2&Y&&a.Q6J("inlineSVG","/assets/icons/transfers/arrow.svg")}let i=(()=>{class Y{constructor(U,x){this.cardsService=U,this.accountsService=x,this.hasError=!1,this.isLoading=!1,this.isDisabled=!1,this.isSmall=!1,this.isFromArrowShown=!1,this.isDisabledSelectable=!1,this.accounts=[],this.selected=new a.vpe,this.ACCOUNT_TYPE=A.Q5,this.blockedFn=this.isAccountBlocked.bind(this)}clearSelected(){this.accountsDropdown.clearSelected()}selectAccount(U){!U||U.accountType===A.Q5.CARD&&U.hasLockedState&&!this.isDisabledSelectable||U.isMigrated||(this.selectedAccount=U,this.accountsDropdown.selectItem(U))}selectByIban(U){var x;const ot=null===(x=this.accounts)||void 0===x?void 0:x.find(vt=>(null==vt?void 0:vt.iban)===U);this.onSelect(ot)}isAccountBlocked(U){return!!U.isMigrated}onSelect(U){this.selectAccount(U),this.selected.emit(U)}mapSelectedAccountLabel(U){switch(null==U?void 0:U.accountType){case A.Q5.CARD:return this.cardsService.mapCardLabel(U);case A.Q5.ACCOUNT:return"ACCOUNTS.REGULAR";case A.Q5.DEPOSIT:return this.accountsService.getDepositName(U);default:return null}}getMaskedCardNumber(U){if(U.accountType!=A.Q5.CARD)return null;const x=U.cardNumber;return x?`${x.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${x.substring(x.length-4,x.length)}`:""}getMaskedIban(U){const x=U.iban;return x?`${x.substring(0,4)} \u2022\u2022\u2022\u2022 ${x.substring(x.length-4,x.length)}`:""}getCardImage(U){if(U.accountType!=A.Q5.CARD)return null;const x="/assets/icons/accounts";return U.category===N.kk.PRIVATE?`${x}/card-private.svg`:`${x}/card-commercial.svg`}getCardMps(U){if(U.accountType!=A.Q5.CARD)return null;const x="/assets/icons/cards/mps";return"4"===U.cardNumber[0]?`${x}/visa.svg`:`${x}/mastercard.svg`}getIsBalanceShown(U){return!(U.accountType===A.Q5.ALL||U.accountType===A.Q5.CARD&&U.category===N.kk.PRIVATE)}}return Y.\u0275fac=function(U){return new(U||Y)(a.Y36(e.d),a.Y36(b.iu))},Y.\u0275cmp=a.Xpm({type:Y,selectors:[["j-account-dropdown"]],viewQuery:function(U,x){if(1&U&&a.Gf(_,5),2&U){let ot;a.iGM(ot=a.CRH())&&(x.accountsDropdown=ot.first)}},inputs:{label:"label",inputClass:"inputClass",hasError:"hasError",isLoading:"isLoading",isDisabled:"isDisabled",isSmall:"isSmall",isFromArrowShown:"isFromArrowShown",isDisabledSelectable:"isDisabledSelectable",accounts:"accounts"},outputs:{selected:"selected"},decls:7,vars:6,consts:[["label","ACCOUNTS.EMPTY",3,"isLoading","label","options","hasError","blockedFn","selected"],["accountsDropdown",""],["selectedTemplate",""],["optionTemplate",""],["class","account-dropdown__from-arrow",3,"inlineSVG",4,"ngIf"],[3,"ngSwitch"],[1,"account-item"],[1,"j-input--float-label","selected-account__label"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","selected-account__money p3",3,"money",4,"ngIf"],[3,"inlineSVG"],[1,"text-truncate","selected-account__value"],[1,"mr-2",3,"inlineSVG"],["inlineSVG","/assets/icons/v2/deposit-28.svg"],[1,"text-truncate","selected-account__value","pl-0","mt-1"],["size","sm",1,"selected-account__img",3,"name"],[1,"selected-account__money","p3",3,"money"],[3,"account",4,"ngIf"],[3,"card",4,"ngIf"],["class","account-item p3",4,"ngIf"],[3,"account"],[3,"card"],[1,"account-item","p3"],[1,"account-dropdown__from-arrow",3,"inlineSVG"]],template:function(U,x){1&U&&(a.TgZ(0,"j-dropdown-input",0,1),a.NdJ("selected",function(vt){return x.onSelect(vt)}),a.YNc(2,M,10,10,"ng-template",null,2,a.W1O),a.YNc(4,k,3,3,"ng-template",null,3,a.W1O),a.qZA(),a.YNc(6,$,1,1,"div",4)),2&U&&(a.Q6J("isLoading",x.isLoading)("label",x.label)("options",x.accounts)("hasError",x.hasError)("blockedFn",x.blockedFn),a.xp6(6),a.Q6J("ngIf",x.isFromArrowShown))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:flex;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;transform:scale(.75)}.selected-account__label--all[_ngcontent-%COMP%]{left:21px!important}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%]{transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;border-radius:50%;display:flex;align-items:center;background:#fff;justify-content:center;left:-14px;bottom:-22px;z-index:2}"],data:{animation:[(0,t.X$)("smoothCollapse",[(0,t.SB)("initial",(0,t.oB)({height:"0",overflow:"hidden",opacity:"0.5",zIndex:"unset"})),(0,t.SB)("final",(0,t.oB)({overflow:"hidden",opacity:"1",zIndex:"50"})),(0,t.eR)("initial=>final",(0,t.jt)("300ms ease-in-out")),(0,t.eR)("final=>initial",(0,t.jt)("300ms ease-in-out"))])]}}),Y})()},50312:(Pt,X,r)=>{"use strict";r.d(X,{v:()=>l});var a=r(5157),t=r(5e3),N=r(53145);function A(E,O){1&E&&t._UZ(0,"span",14)}function e(E,O){1&E&&(t.TgZ(0,"small",15),t._uU(1,"ACCOUNTS.INACTIVE"),t.qZA())}function b(E,O){if(1&E&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&E){const F=t.oxw();t.xp6(1),t.Oqu(F.lockedMessage)}}function _(E,O){if(1&E&&t._UZ(0,"j-entity-logo",17),2&E){const F=t.oxw();t.Q6J("name",null==F.account||null==F.account.balance?null:F.account.balance.currency)}}function h(E,O){1&E&&t._UZ(0,"span",18)}let l=(()=>{class E{constructor(F){this.accountsService=F}ngOnInit(){}get lockedMessage(){return`ACCOUNTS.STATE.${this.account.blockType}`}get label(){return this.account.accountType===a.Q5.DEPOSIT?this.accountsService.getDepositName(this.account):"ACCOUNTS.DROPDOWN.REGULAR"}get isBlocked(){return this.account.isMigrated}}return E.\u0275fac=function(F){return new(F||E)(t.Y36(N.iu))},E.\u0275cmp=t.Xpm({type:E,selectors:[["j-account-item"]],inputs:{account:"account"},decls:18,vars:7,consts:[[1,"account-item"],[3,"ngTemplateOutlet"],[1,"account-item__body","p3"],["translate","",1,"text-muted"],[1,"d-flex","align-items-center"],["class","mr-2","inlineSVG","assets/icons/v2/atf-24.svg",4,"ngIf"],[1,"text-dark"],[1,"ml-auto","d-flex","align-items-center"],["class","d-block text-muted mr-2","translate","",4,"ngIf"],[1,"p3","text-right"],[3,"money"],["class","d-block text-muted","translate","",4,"ngIf"],["accountImgTemplate",""],["depositImgTemplate",""],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"],["translate","",1,"d-block","text-muted","mr-2"],["translate","",1,"d-block","text-muted"],["size","sm",1,"account-item__img",3,"name"],["inlineSVG","/assets/icons/v2/deposit-28.svg",1,"account-item__img"]],template:function(F,M){if(1&F&&(t.TgZ(0,"div",0),t.GkF(1,1),t.TgZ(2,"div",2)(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,A,1,0,"span",5),t.TgZ(7,"div",6),t._uU(8),t.qZA()()(),t.TgZ(9,"div",7),t.YNc(10,e,2,0,"small",8),t.TgZ(11,"div",9),t._UZ(12,"j-money",10),t.YNc(13,b,2,1,"small",11),t.qZA()()(),t.YNc(14,_,1,1,"ng-template",null,12,t.W1O),t.YNc(16,h,1,0,"ng-template",null,13,t.W1O)),2&F){const G=t.MAs(15),f=t.MAs(17);t.xp6(1),t.Q6J("ngTemplateOutlet","DEPOSIT"===M.account.accountType?f:G),t.xp6(3),t.Oqu(M.label),t.xp6(2),t.Q6J("ngIf",null==M.account?null:M.account.alterCode),t.xp6(2),t.Oqu(null==M.account?null:M.account.maskedIban),t.xp6(2),t.Q6J("ngIf",null==M.account?null:M.account.isMigrated),t.xp6(2),t.Q6J("money",null==M.account?null:M.account.balance),t.xp6(1),t.Q6J("ngIf",null==M.account?null:M.account.hasLockedState)}},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:flex;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;transform:scale(.75)}.selected-account__label--all[_ngcontent-%COMP%]{left:21px!important}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%]{transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;border-radius:50%;display:flex;align-items:center;background:#fff;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),E})()},56104:(Pt,X,r)=>{"use strict";r.d(X,{Q5:()=>a.Q5,jW:()=>N.j,iu:()=>t.i,X7:()=>a.X7});var a=r(5157),t=r(76759),N=r(48149);r(45619),r(70853),r(50312)},46507:(Pt,X,r)=>{"use strict";r.d(X,{Yg:()=>A,US:()=>e,Jx:()=>b});var a=r(5e3),t=r(26164),N=r(1790),A=(()=>{return(_=A||(A={})).PDF="PDF",_.XLSX="XLSX",_.ONE_C="ONE_C",A;var _})(),e=(()=>{return(_=e||(e={})).DAILY="DAILY",_.MONTHLY="MONTHLY",e;var _})();let b=(()=>{class _{constructor(l,E){this.companyService=l,this.api=E}getSubscriptions(l){const E=this.getApiUrl(l);return this.api.get(E)}saveSubscription(l,E){const O=this.getApiUrl(l.accountId,E);return this.api.put(O,l)}createSubscription(l){const E=this.getApiUrl(l.accountId);return this.api.post(E,l)}deleteSubscription(l,E){const O=this.getApiUrl(l,E);return this.api.delete(O)}getApiUrl(l,E=null){return`companies/${this.companyService.currentId}/accounts/${l}/statements-subscriptions${E?"/"+E:""}`}}return _.\u0275fac=function(l){return new(l||_)(a.LFG(t.J),a.LFG(N.sM))},_.\u0275prov=a.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},53145:(Pt,X,r)=>{"use strict";r.d(X,{iu:()=>a.i});var a=r(76759);r(46507)},30441:(Pt,X,r)=>{"use strict";r.r(X),r.d(X,{CardsModule:()=>Oe});var a=r(69808),t=r(23918),N=r(65832),A=r(91995),e=r(48925),b=r(59516),_=r(70655),h=r(42654),l=r(5e3),E=r(26164),O=r(19208),F=r(14181),M=r(66013),G=r(89854),f=r(17687),B=r(79311),k=r(94114),$=r(33770),i=r(72159);const Y=function(){return{width:"300px",height:"20px","background-color":"#ECEEF1"}},S=function(){return{width:"500px",height:"36px","background-color":"#ECEEF1"}};function U(lt,wt){1&lt&&(l.ynx(0),l._UZ(1,"ngx-skeleton-loader",1)(2,"br")(3,"ngx-skeleton-loader",1),l.BQk()),2&lt&&(l.xp6(1),l.Q6J("theme",l.DdM(2,Y)),l.xp6(2),l.Q6J("theme",l.DdM(3,S)))}function x(lt,wt){if(1&lt&&(l.TgZ(0,"section",4)(1,"div",5),l._UZ(2,"img",6),l.TgZ(3,"span",7),l._uU(4),l.qZA(),l._UZ(5,"j-card-status",8),l.qZA(),l.TgZ(6,"h1",9),l._UZ(7,"j-money",10),l.qZA()()),2&lt){const q=l.oxw(2);l.xp6(4),l.AsE("",q.card.alias," ",q.card.maskedNumber,""),l.xp6(1),l.Q6J("cardId",q.card.cardId)("status",q.card.status),l.xp6(2),l.Q6J("money",q.card.balance)}}function ot(lt,wt){if(1&lt&&(l.TgZ(0,"div",11),l._uU(1),l.qZA()),2&lt){const q=l.oxw(2);l.xp6(1),l.Oqu(q.errorText)}}function vt(lt,wt){if(1&lt&&(l.ynx(0),l.YNc(1,x,8,5,"section",2),l.YNc(2,ot,2,1,"div",3),l.BQk()),2&lt){const q=l.oxw();l.xp6(1),l.Q6J("ngIf",q.card),l.xp6(1),l.Q6J("ngIf",q.errorText)}}let At=(()=>{class lt{constructor(q,Ct){this.route=q,this.cardsService=Ct,this.isLoading=!0,this.loaded=new l.vpe,this.failed=new l.vpe,this.subscription=new h.w;const P=this.route.params.subscribe(ut=>{this.cardId=ut.id,this.init()});this.subscription.add(P)}ngOnDestroy(){this.subscription.unsubscribe()}init(){this.loadCard()}loadCard(){return(0,_.mG)(this,void 0,void 0,function*(){this.isLoading=!0;try{this.card=yield this.cardsService.getCardById(this.cardId),this.loaded.emit(this.card)}catch(q){this.errorText=q.description,this.failed.emit()}finally{this.isLoading=!1}})}}return lt.\u0275fac=function(q){return new(q||lt)(l.Y36(b.gz),l.Y36(F.d))},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-header"]],outputs:{loaded:"loaded",failed:"failed"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"theme"],["class","account-header",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"account-header"],[1,"iban"],["src","/assets/img/cards/card-black.svg"],[1,"ml-3","text-muted"],[3,"cardId","status"],[1,"f-page-title"],[3,"money"],[1,"alert","alert-danger"]],template:function(q,Ct){1&q&&(l.YNc(0,U,4,4,"ng-container",0),l.YNc(1,vt,3,2,"ng-container",0)),2&q&&(l.Q6J("ngIf",Ct.isLoading),l.xp6(1),l.Q6J("ngIf",!Ct.isLoading))},directives:[a.O5,t.xr,$.d,i.y],styles:["[_nghost-%COMP%]{display:block;min-height:90px}.iban[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;min-height:25px}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}"]}),lt})();const Zt=function(){return["../statement"]},kt=function(){return["../info"]},Yt=function(){return["../settings"]};let H=(()=>{class lt{constructor(){}ngOnInit(){}}return lt.\u0275fac=function(q){return new(q||lt)},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-tabs"]],decls:8,vars:6,consts:[[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active","translate","",3,"routerLink"]],template:function(q,Ct){1&q&&(l.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),l._uU(3," CARDS.STATEMENT "),l.qZA(),l.TgZ(4,"a",2),l._uU(5," CARDS.INFO.TITLE "),l.qZA(),l.TgZ(6,"a",2),l._uU(7," CARDS.SETTINGS.TITLE "),l.qZA()()()),2&q&&(l.xp6(2),l.Q6J("routerLink",l.DdM(3,Zt)),l.xp6(2),l.Q6J("routerLink",l.DdM(4,kt)),l.xp6(2),l.Q6J("routerLink",l.DdM(5,Yt)))},directives:[b.yS,b.Od,G.Pi],styles:[""]}),lt})();var at=r(61459),yt=r(69544),rt=r(70805);const ht=function(){return{width:"435px",height:"96px","background-color":"#ECEEF1"}},_t=function(){return{width:"435px",height:"56px","background-color":"#ECEEF1"}},Nt=function(){return{width:"435px",height:"276px","background-color":"#ECEEF1"}};function nt(lt,wt){1&lt&&(l.ynx(0),l._UZ(1,"ngx-skeleton-loader",3)(2,"ngx-skeleton-loader",3)(3,"ngx-skeleton-loader",3),l.BQk()),2&lt&&(l.xp6(1),l.Q6J("theme",l.DdM(3,ht)),l.xp6(1),l.Q6J("theme",l.DdM(4,_t)),l.xp6(1),l.Q6J("theme",l.DdM(5,Nt)))}function Bt(lt,wt){if(1&lt&&(l.TgZ(0,"div",19)(1,"div",20),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",21),l._uU(5),l.ALo(6,"translate"),l.qZA()()),2&lt){const q=wt.$implicit;l.xp6(2),l.hij(" ",l.lcZ(3,2,q.label),": "),l.xp6(3),l.hij(" ",l.lcZ(6,4,q.value)," ")}}function Lt(lt,wt){if(1&lt&&(l.TgZ(0,"div",19)(1,"div",20),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"div",21),l._uU(5),l.qZA()()),2&lt){const q=wt.$implicit;l.xp6(2),l.hij(" ",l.lcZ(3,2,q.label),": "),l.xp6(3),l.hij(" ",q.value," ")}}function bt(lt,wt){if(1&lt&&(l.TgZ(0,"div",22)(1,"strong"),l._uU(2),l.qZA()()),2&lt){const q=l.oxw(2);l.xp6(2),l.Oqu(q.errorText)}}function $t(lt,wt){if(1&lt){const q=l.EpF();l.ynx(0),l.TgZ(1,"div",4)(2,"div",5)(3,"div",6),l._UZ(4,"div",7),l.TgZ(5,"button",8),l.NdJ("click",function(P){return l.CHM(q),l.oxw().onQrPrint(P)}),l._UZ(6,"span",9)(7,"span",10),l.qZA()(),l._UZ(8,"img",11),l.qZA()(),l.TgZ(9,"div",4),l.YNc(10,Bt,7,6,"div",12),l.qZA(),l.TgZ(11,"div",4),l.YNc(12,Lt,6,4,"div",12),l.TgZ(13,"div",13)(14,"button",14),l.NdJ("click",function(){return l.CHM(q),l.oxw().onCopy()}),l._UZ(15,"div",15),l.TgZ(16,"strong",16),l._uU(17,"CARDS.INFO.COPY"),l.qZA()(),l.TgZ(18,"button",17),l.NdJ("click",function(){return l.CHM(q),l.oxw().onDownload()}),l._UZ(19,"div",15),l.TgZ(20,"strong",16),l._uU(21,"ACCOUNTS.REQUISITES.DOWNLOAD"),l.qZA()()()(),l.YNc(22,bt,3,1,"div",18),l.BQk()}if(2&lt){const q=l.oxw();l.xp6(5),l.Q6J("disabled",!q.qrFile),l.xp6(1),l.Q6J("inlineSVG","assets/icons/account/print.svg"),l.xp6(4),l.Q6J("ngForOf",q.status),l.xp6(2),l.Q6J("ngForOf",q.requisites),l.xp6(2),l.Q6J("cbContent",q.textToCopy),l.xp6(1),l.Q6J("inlineSVG","assets/icons/account/copy.svg"),l.xp6(4),l.Q6J("inlineSVG","assets/icons/account/pdf.svg"),l.xp6(3),l.Q6J("ngIf",q.errorText)}}let an=(()=>{class lt{constructor(q,Ct,P,ut,u,it,xt,Qt){this.router=q,this.companyService=Ct,this.bankFromAccount=P,this.formatIban=ut,this.cardsService=u,this.notifierService=it,this.translateService=xt,this.filesService=Qt,this.isLoaded=!1,this.subscription=new h.w}ngOnDestroy(){this.subscription.unsubscribe()}onCardLoad(q){this.init(q);const Ct=this.cardsService.cardsUpdated$.subscribe(P=>{const ut=this.cardsService.findCardById(this.card.cardId);this.init(ut)});this.subscription.add(Ct)}init(q){return(0,_.mG)(this,void 0,void 0,function*(){this.card=q,this.generateStatus(),this.generateRequisites(),this.generateTextToCopy(),this.loadQr(),this.isLoaded=!0})}onCardFail(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}onClose(){this.navigateToHome()}onCopy(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}loadQr(){return(0,_.mG)(this,void 0,void 0,function*(){this.qrFile=yield this.cardsService.getQrPrint(this.card.cardId,this.card.iban)})}onQrPrint(q){q.preventDefault(),this.filesService.downloadFile(this.qrFile,`${this.card.formattedFullName} ${this.card.maskedNumber} QR.jpg`)}onDownload(){return(0,_.mG)(this,void 0,void 0,function*(){try{const q=yield this.cardsService.getPdf(this.card.cardId);this.filesService.downloadFile(q,`${this.card.formattedFullName} ${this.card.maskedNumber}.pdf`)}catch(q){console.error(q)}})}generateStatus(){this.status=[{label:this.appendTranslationPrefix("STATUS"),value:this.cardsService.mapCardStatus(this.card.status)}]}generateRequisites(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.card.formattedFullName},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.card.iban),valueToCopy:this.card.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.card.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.card.iban,"bic")}]}generateTextToCopy(){this.textToCopy=this.requisites.map(q=>{if(q.value||q.valueToCopy)return`${this.translateService.instant(q.label)}: ${q.valueToCopy||q.value}`}).join("\n")}navigateToHome(){this.router.navigate(["/"])}appendTranslationPrefix(q){return`CARDS.INFO.${q}`}}return lt.\u0275fac=function(q){return new(q||lt)(l.Y36(b.F0),l.Y36(E.J),l.Y36(O.vI),l.Y36(O.OX),l.Y36(F.d),l.Y36(M.lG),l.Y36(G.sK),l.Y36(f.n))},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-info"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"info"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.TITLE"],[1,"btn","btn-link","qr__print","p3",3,"disabled","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","/assets/img/cards/qr.png",1,"qr__img"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(q,Ct){1&q&&(l.TgZ(0,"f-page",0),l.NdJ("closed",function(){return Ct.onClose()}),l.TgZ(1,"f-page-header")(2,"j-card-header",1),l.NdJ("loaded",function(ut){return Ct.onCardLoad(ut)})("failed",function(){return Ct.onCardFail()}),l.qZA(),l._UZ(3,"j-card-tabs"),l.qZA(),l.TgZ(4,"f-page-body"),l.YNc(5,nt,4,6,"ng-container",2),l.YNc(6,$t,23,8,"ng-container",2),l.qZA()()),2&q&&(l.xp6(5),l.Q6J("ngIf",!Ct.isLoaded),l.xp6(1),l.Q6J("ngIf",Ct.isLoaded))},directives:[B.J,k.M,At,H,at.G,a.O5,t.xr,G.Pi,yt.d$,a.sg,rt.yb],pipes:[G.X$],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0 1rem;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:center;min-width:calc(50% - .5rem)}.requisites__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.qr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:inline-flex;align-items:center;margin-top:.5rem;padding:0;transform:none}.qr__print[_ngcontent-%COMP%]:hover{transform:none;color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}"]}),lt})();var Vt=r(93075),An=r(40703),Wt=r(50235),hn=r(85814);let Ht=(()=>{class lt{constructor(q,Ct,P,ut){this.modal=q,this.cardsService=Ct,this.notifierService=P,this.translateService=ut,this.aliasMaxLength=24,this.translatePrefix="CARDS.RENAME_MODAL",this.isSubmitted=!1,this.isSubmitting=!1}ngOnInit(){this.form=new Vt.cw({alias:new Vt.NI(this.card.alias||"",[Vt.kI.required,Vt.kI.maxLength(this.aliasMaxLength)])})}get f(){return this.form.controls}dismissModal(){this.modal.dismiss()}closeModal(q){this.modal.close(q)}mapTranslate(q){return`${this.translatePrefix}.${q}`}onSubmit(){return(0,_.mG)(this,void 0,void 0,function*(){if(this.isSubmitted=!0,this.form.invalid)return;this.isSubmitting=!0;let q="";try{const{alias:Ct}=this.form.getRawValue();yield this.cardsService.renameCard(this.card.cardId,Ct),q="SUCCESS",this.closeModal(Ct)}catch(Ct){q="ERROR"}finally{this.isSubmitting=!1,this.notifierService.notify("default",this.translateService.instant(this.mapTranslate(q)))}})}}return lt.\u0275fac=function(q){return new(q||lt)(l.Y36(An.Kz),l.Y36(F.d),l.Y36(M.lG),l.Y36(G.sK))},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-rename-modal"]],inputs:{card:"card"},decls:17,vars:21,consts:[[1,"rename-modal"],[1,"rename-modal__header"],[1,"btn","btn-outline-primary","rename-modal__back","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"rename-modal__form",3,"formGroup"],[1,"form-group"],[3,"label","formControl","maxLength","isClearable","hasError"],[1,"form-footer"],["type","button",1,"btn","btn-link",3,"disabled","jLoading","jLoadingInverted","click"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled","jLoading","click"]],template:function(q,Ct){1&q&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return Ct.dismissModal()}),l._UZ(3,"span",3),l.qZA(),l.TgZ(4,"h5",4),l._uU(5),l.ALo(6,"translate"),l.qZA()(),l.TgZ(7,"form",5)(8,"div",6),l._UZ(9,"j-input",7),l.qZA(),l.TgZ(10,"div",8)(11,"button",9),l.NdJ("click",function(){return Ct.dismissModal()}),l._uU(12),l.ALo(13,"translate"),l.qZA(),l.TgZ(14,"button",10),l.NdJ("click",function(){return Ct.onSubmit()}),l._uU(15),l.ALo(16,"translate"),l.qZA()()()()),2&q&&(l.xp6(3),l.Q6J("inlineSVG","assets/icons/arrow-left.svg"),l.xp6(2),l.hij(" ",l.lcZ(6,15,Ct.mapTranslate("TITLE"))," "),l.xp6(2),l.Q6J("formGroup",Ct.form),l.xp6(2),l.Q6J("label",Ct.mapTranslate("LABEL"))("formControl",Ct.f.alias)("maxLength",Ct.aliasMaxLength)("isClearable",!1)("hasError",Ct.f.alias.invalid&&Ct.isSubmitted),l.xp6(2),l.Q6J("disabled",Ct.isSubmitting)("jLoading",Ct.isSubmitting)("jLoadingInverted",!0),l.xp6(1),l.hij(" ",l.lcZ(13,17,"SHARED.CANCEL")," "),l.xp6(2),l.Q6J("disabled",Ct.isSubmitting)("jLoading",Ct.isSubmitting),l.xp6(1),l.hij(" ",l.lcZ(16,19,"SHARED.SAVE")," "))},directives:[yt.d$,Vt._Y,Vt.JL,Vt.sg,Wt.N,Vt.JJ,Vt.oH,hn.T],pipes:[G.X$],styles:[".rename-modal[_ngcontent-%COMP%]{padding:24px}.rename-modal__back[_ngcontent-%COMP%]{padding:0;width:40px;height:40px}.rename-modal__header[_ngcontent-%COMP%]{display:flex;height:64px;align-items:center;margin-bottom:12px}"]}),lt})();r(52444);var V=r(89129),dt=r(46755);const Et=function(lt){return{height:lt,"margin-top":"0.5rem","background-color":"#ECEEF1"}};function J(lt,wt){if(1&lt&&(l.ynx(0),l._UZ(1,"ngx-skeleton-loader",3),l.BQk()),2&lt){const q=l.oxw();l.xp6(1),l.Q6J("theme",l.VKq(1,Et,q.isPrimaryAuthority?"142px":"72px"))}}function mt(lt,wt){if(1&lt&&(l.TgZ(0,"div",4),l._UZ(1,"j-switch",5),l.TgZ(2,"span",6),l._UZ(3,"strong",11),l.TgZ(4,"small",8),l._uU(5),l.ALo(6,"translate"),l.qZA()()()),2&lt){const q=l.oxw(2);l.ekj("disabled",q.hiddenControl.disabled),l.xp6(1),l.Q6J("formControl",q.hiddenControl),l.xp6(4),l.hij(" ",l.lcZ(6,4,"CARDS.SETTINGS.HIDE.DESCRIPTION")," ")}}function I(lt,wt){if(1&lt){const q=l.EpF();l.TgZ(0,"div",4)(1,"div"),l._UZ(2,"strong",12),l.TgZ(3,"small",8),l._uU(4),l.qZA()(),l.TgZ(5,"button",13),l.NdJ("click",function(){return l.CHM(q),l.oxw(2).onCardRename()}),l._uU(6),l.ALo(7,"translate"),l.qZA()()}if(2&lt){const q=l.oxw(2);l.xp6(4),l.hij(" ",q.card.alias," "),l.xp6(2),l.hij(" ",l.lcZ(7,2,"CARDS.SETTINGS.RENAME.LINK")," ")}}function Z(lt,wt){if(1&lt&&(l.ynx(0),l.TgZ(1,"div",4),l._UZ(2,"j-switch",5),l.TgZ(3,"span",6),l._UZ(4,"strong",7),l.TgZ(5,"small",8),l._uU(6),l.ALo(7,"translate"),l.qZA()()(),l.YNc(8,mt,7,6,"div",9),l.YNc(9,I,8,4,"div",10),l.BQk()),2&lt){const q=l.oxw();l.xp6(1),l.ekj("disabled",q.activatedControl.disabled),l.xp6(1),l.Q6J("formControl",q.activatedControl),l.xp6(4),l.hij(" ",l.lcZ(7,6,q.activatedControl.value?"CARDS.SETTINGS.LOCK.ACTIVATE":"CARDS.SETTINGS.LOCK.DEACTIVATE")," "),l.xp6(2),l.Q6J("ngIf",q.isPrimaryAuthority),l.xp6(1),l.Q6J("ngIf",q.isPrimaryAuthority)}}const et={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",backdrop:"static",centered:!0};let L=(()=>{class lt{constructor(q,Ct,P,ut){this.router=q,this.cardsService=Ct,this.companyService=P,this.modalService=ut,this.isLoaded=!1,this.isPrimaryAuthority=this.companyService.isPrimaryAuthority(),this.subscription=new h.w}ngOnDestroy(){this.subscription.unsubscribe()}onCardLoad(q){this.init(q);const Ct=this.cardsService.cardsUpdated$.subscribe(P=>{const ut=this.cardsService.findCardById(this.card.cardId);this.init(ut)});this.subscription.add(Ct)}init(q){this.card=q,this.initActivatedControl(),this.initHiddenControl(),this.isLoaded=!0}onCardFail(){this.activatedControl=new Vt.NI({value:!1,disabled:!1}),this.hiddenControl=new Vt.NI({value:!1,disabled:!1}),this.isLoaded=!0}onClose(){this.navigateToHome()}onCardRename(){return(0,_.mG)(this,void 0,void 0,function*(){const q=this.modalService.open(Ht,et);q.componentInstance.card=this.card;try{const Ct=yield q.result;this.card.alias=Ct}catch(Ct){}})}navigateToHome(){this.router.navigate(["/"])}initActivatedControl(){var q,Ct;this.activatedControl=new Vt.NI({value:this.card.status===V.ti.TEMPORARILY_LOCK,disabled:!((null===(q=this.card)||void 0===q?void 0:q.status)==V.ti.ACTIVE||(null===(Ct=this.card)||void 0===Ct?void 0:Ct.status)==V.ti.TEMPORARILY_LOCK)}),this.subscription.add(this.activatedControl.valueChanges.subscribe(P=>{this.handleActivatedSwitch(P)}))}initHiddenControl(){this.hiddenControl=new Vt.NI(this.card.hidden),this.subscription.add(this.hiddenControl.valueChanges.subscribe(q=>{this.handleHiddenSwitch(q)}))}handleActivatedSwitch(q){return(0,_.mG)(this,void 0,void 0,function*(){try{yield this.cardsService.changeCardStatus(this.card.cardId,q)}catch(Ct){this.activatedControl.setValue(!q,{emitEvent:!1})}})}handleHiddenSwitch(q){return(0,_.mG)(this,void 0,void 0,function*(){try{yield this.cardsService.changeCardVisibility(this.card.cardId,q)}catch(Ct){this.hiddenControl.setValue(!q,{emitEvent:!1})}})}}return lt.\u0275fac=function(q){return new(q||lt)(l.Y36(b.F0),l.Y36(F.d),l.Y36(E.J),l.Y36(An.FF))},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-settings"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"settings-item"],[3,"formControl"],[1,"ml-3"],["translate","CARDS.SETTINGS.LOCK.TITLE",1,"d-block"],[1,"text-gray"],["class","settings-item",3,"disabled",4,"ngIf"],["class","settings-item",4,"ngIf"],["translate","CARDS.SETTINGS.HIDE.TITLE",1,"d-block"],["translate","CARDS.SETTINGS.RENAME.TITLE",1,"d-block"],[1,"btn","btn-link","p2","py-0","px-1","link-blue","ml-auto",3,"click"]],template:function(q,Ct){1&q&&(l.TgZ(0,"f-page",0),l.NdJ("closed",function(){return Ct.onClose()}),l.TgZ(1,"f-page-header")(2,"j-card-header",1),l.NdJ("loaded",function(ut){return Ct.onCardLoad(ut)})("failed",function(){return Ct.onCardFail()}),l.qZA(),l._UZ(3,"j-card-tabs"),l.qZA(),l.TgZ(4,"f-page-body"),l.YNc(5,J,2,3,"ng-container",2),l.YNc(6,Z,10,8,"ng-container",2),l.qZA()()),2&q&&(l.xp6(5),l.Q6J("ngIf",!Ct.card),l.xp6(1),l.Q6J("ngIf",Ct.card))},directives:[B.J,k.M,At,H,at.G,a.O5,t.xr,dt.q,Vt.JJ,Vt.oH,G.Pi],pipes:[G.X$],styles:[".settings-item[_ngcontent-%COMP%]{padding:1rem;background:#fff;max-width:616px;display:flex;align-items:center;border-bottom:1px solid #dbdfe2}.settings-item[_ngcontent-%COMP%]:first-child{margin-top:.5rem;border-radius:.75rem .75rem 0 0}.settings-item[_ngcontent-%COMP%]:last-child{border-bottom:0;border-radius:0 0 .75rem .75rem;margin-bottom:1rem}.settings-item.disabled[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;user-select:none}"]}),lt})();var gt=r(72986),It=r(19204),Ut=r(43474),ln=r(9661),Tn=r(77501),mn=r(36336),bn=r(38788),yn=r(37784),Ln=r(81538),ne=r(66914),jn=r(16345);function Mn(lt,wt){1&lt&&(l.TgZ(0,"div",8),l._UZ(1,"j-statement-loading"),l.qZA())}function he(lt,wt){if(1&lt&&l._UZ(0,"j-statement-balances",9),2&lt){const q=l.oxw();l.Q6J("statement",q.statement)}}function Yn(lt,wt){1&lt&&(l.TgZ(0,"div",10),l._uU(1," ACCOUNTS.STATEMENT.ALL_LOADED "),l.qZA())}function Te(lt,wt){if(1&lt&&(l.TgZ(0,"div",11)(1,"strong"),l._uU(2),l.qZA()()),2&lt){const q=l.oxw();l.xp6(2),l.Oqu(q.errorText)}}const Ue=function(){return["PDF","EXL"]};let Dn=(()=>{class lt{constructor(q,Ct,P,ut,u,it,xt){this.router=q,this.route=Ct,this.cardsService=P,this.filterService=ut,this.datePipe=u,this.filesService=it,this.navService=xt,this.statementMode=It.sF.CARDS,this.isLoading=!0,this.filterMode=Ut.e5.CARDS,this.hasMorePages=!0,this.pageNumber=1,this.pageSize=10,this.subscription=new h.w;const Qt=this.route.params.subscribe(ee=>{this.cardId=ee.id,this.loadStatement()}),un=this.route.queryParams.pipe((0,gt.q)(1)).subscribe(ee=>{this.filter=this.mapQueryParams(ee),this.filterService.updateExtra(this.filter)}),$n=this.filterService.getScheme().subscribe(ee=>{this.filter=Object.assign({},ee),this.pageNumber=1,this.hasMorePages=!0,this.isLoading=!0,this.updateQueryParams(),this.loadStatement()});this.subscription.add(Qt),this.subscription.add(un),this.subscription.add($n)}ngOnDestroy(){this.subscription.unsubscribe()}onClose(){this.navigateToHome()}onScroll(){this.hasMorePages&&!this.isLoading&&(this.pageNumber++,this.loadStatement())}onDownload(q){return(0,_.mG)(this,void 0,void 0,function*(){const Ct=yield this.cardsService.getStatement(this.cardId,this.filter,this.pageNumber,this.pageSize,q);let P=q.substring(q.lastIndexOf("/")+1,q.length);"1c"==P&&(P+=".txt"),this.filesService.downloadFile(Ct,`${this.cardId}.${P}`)})}loadStatement(){return(0,_.mG)(this,void 0,void 0,function*(){this.errorText="",this.isLoading=!0;try{if(this.filter.periodType&&this.filter.periodType!=Ut._A.CUSTOM){const Ct=this.filterService.PERIOD_LIST.find(P=>P.type==this.filter.periodType);this.filter.periodFrom=Ct.dates.from,this.filter.periodTo=Ct.dates.to}const q=yield this.cardsService.getStatement(this.cardId,this.filter,this.pageNumber,this.pageSize);this.hasMorePages=this.pageSize<=q.totalTransactionsCount,this.statement=q}catch(q){this.errorText=q.description||q.code||q}finally{this.isLoading=!1}})}navigateToHome(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}mapQueryParams(q){let Ct=Object.assign({},this.filterService.getDefaults(Ut.e5.ACCOUNTS));for(const P in q)if(Object.prototype.hasOwnProperty.call(q,P)){const ut=q[P];ut&&null!=ut&&"null"!=ut&&(Ct[P]="periodFrom"==P||"periodTo"==P?new Date(ut):ut)}return Ct}updateQueryParams(){const q=Object.assign({},this.filter),Ct={};for(const P in q)if(Object.prototype.hasOwnProperty.call(q,P)){const ut=q[P];ut&&null!=ut&&"null"!=ut&&(Ct[P]="periodFrom"==P||"periodTo"==P?this.datePipe.transform(ut,"yyyy-MM-dd"):ut)}this.router.navigate([],{queryParams:Ct,relativeTo:this.route})}}return lt.\u0275fac=function(q){return new(q||lt)(l.Y36(b.F0),l.Y36(b.gz),l.Y36(F.d),l.Y36(Ut.iZ),l.Y36(a.uU),l.Y36(ln.nS),l.Y36(Tn.t))},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-card-statement"]],decls:13,vars:14,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8","bodyClassList","no-grow",3,"closed"],[3,"mode","currency","downloads","downloaded"],["class","py-4",4,"ngIf"],["infiniteScroll","",1,"account-wrapper",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"statement",4,"ngIf"],[1,"search-results",3,"mode","statement"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"py-4"],[3,"statement"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(q,Ct){1&q&&(l.TgZ(0,"f-page",0),l.NdJ("closed",function(){return Ct.onClose()}),l.TgZ(1,"f-page-header"),l._UZ(2,"j-card-header")(3,"j-card-tabs"),l.qZA(),l.TgZ(4,"f-page-body")(5,"j-filter",1),l.NdJ("downloaded",function(ut){return Ct.onDownload(ut)}),l.qZA()(),l.TgZ(6,"f-page-extra"),l.YNc(7,Mn,2,0,"div",2),l.TgZ(8,"section",3),l.NdJ("scrolled",function(){return Ct.onScroll()}),l.YNc(9,he,1,1,"j-statement-balances",4),l._UZ(10,"j-statement",5),l.YNc(11,Yn,2,0,"div",6),l.YNc(12,Te,3,1,"div",7),l.qZA()()()),2&q&&(l.xp6(5),l.Q6J("mode",Ct.filterMode)("currency",null==Ct.card?null:Ct.card.balance.currency)("downloads",l.DdM(13,Ue)),l.xp6(2),l.Q6J("ngIf",Ct.isLoading),l.xp6(1),l.Q6J("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),l.xp6(1),l.Q6J("ngIf",Ct.statement&&Ct.statement.totalTransactionsCount>0),l.xp6(1),l.Q6J("mode",Ct.statementMode)("statement",Ct.statement),l.xp6(1),l.Q6J("ngIf",(null==Ct.statement?null:Ct.statement.totalTransactionsCount)>0),l.xp6(1),l.Q6J("ngIf",Ct.errorText))},directives:[B.J,k.M,At,H,at.G,mn.z,bn.R,a.O5,yn.D,Ln.R,ne.Z,jn.H,G.Pi],styles:["[_nghost-%COMP%]{display:block}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),lt})();const Se=[{path:"",component:(()=>{class lt{constructor(){}ngOnInit(){}}return lt.\u0275fac=function(q){return new(q||lt)},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["j-cards"]],decls:0,vars:0,template:function(q,Ct){},styles:[""]}),lt})(),data:{title:"TRANSFERS.TITLE"}},{path:":id/statement",component:Dn},{path:":id/info",component:an},{path:":id/settings",component:L},{path:":id",redirectTo:":id/statement"}];let Pe=(()=>{class lt{}return lt.\u0275fac=function(q){return new(q||lt)},lt.\u0275mod=l.oAB({type:lt}),lt.\u0275inj=l.cJS({imports:[[b.Bz.forChild(Se)],b.Bz]}),lt})(),Oe=(()=>{class lt{}return lt.\u0275fac=function(q){return new(q||lt)},lt.\u0275mod=l.oAB({type:lt}),lt.\u0275inj=l.cJS({imports:[[a.ez,Vt.u5,Vt.UX,t.hx,A.m,N.i,e.n,Ln.X,Pe]]}),lt})()},52444:(Pt,X,r)=>{"use strict";r.d(X,{d:()=>l});var a=r(70655),t=r(5e3),N=r(40703),A=r(14181),e=r(89854),b=r(69808);function _(E,O){if(1&E&&(t.TgZ(0,"a",11),t._uU(1," CARDS.STATUS.BRANCHES "),t.qZA()),2&E){const F=t.oxw();t.Q6J("href",F.link,t.LSH)}}function h(E,O){if(1&E){const F=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(G){return t.CHM(F),t.oxw().unlockCard(G)}),t._uU(1," CARDS.STATUS.UNLOCK "),t.qZA()}}let l=(()=>{class E{constructor(F,M){this.modal=F,this.cardsService=M,this.link="https://jysanbank.kz/ru/find/offices/almaty"}dismissModal(F=null){null==F||F.preventDefault(),this.modal.dismiss()}unlockCard(F=null){return(0,a.mG)(this,void 0,void 0,function*(){null==F||F.preventDefault();try{yield this.cardsService.changeCardStatus(this.cardId,!1),this.modal.close()}catch(M){this.modal.dismiss()}})}}return E.\u0275fac=function(F){return new(F||E)(t.Y36(N.Kz),t.Y36(A.d))},E.\u0275cmp=t.Xpm({type:E,selectors:[["j-card-status-modal"]],inputs:{img:"img",title:"title",description:"description",cardId:"cardId",canUnlock:"canUnlock"},decls:14,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],[3,"src","alt"],[1,"light","mb-3","mt-2",3,"translate"],[1,"m-0","text-muted",3,"translate"],[1,"modal-footer","d-block","py-4","px-3"],["translate","","target","_blank","class","btn btn-block btn-link mb-3",3,"href",4,"ngIf"],["translate","","class","btn btn-block btn-link mb-3","href","#",3,"click",4,"ngIf"],["translate","","href","#",1,"btn","btn-block","btn-link","m-0",3,"click"],["translate","","target","_blank",1,"btn","btn-block","btn-link","mb-3",3,"href"],["translate","","href","#",1,"btn","btn-block","btn-link","mb-3",3,"click"]],template:function(F,M){1&F&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return M.dismissModal()}),t._UZ(2,"img",2),t.ALo(3,"translate"),t.qZA()(),t.TgZ(4,"div",3),t._UZ(5,"img",4),t.ALo(6,"translate"),t._UZ(7,"h3",5)(8,"p",6),t.qZA(),t.TgZ(9,"div",7),t.YNc(10,_,2,1,"a",8),t.YNc(11,h,2,0,"a",9),t.TgZ(12,"a",10),t.NdJ("click",function(f){return M.dismissModal(f)}),t._uU(13," SHARED.CLOSE "),t.qZA()()),2&F&&(t.xp6(2),t.s9C("alt",t.lcZ(3,7,"SHARED.CLOSE")),t.xp6(3),t.Q6J("src",M.img,t.LSH)("alt",t.lcZ(6,9,M.title)),t.xp6(2),t.Q6J("translate",M.title),t.xp6(1),t.Q6J("translate",M.description),t.xp6(2),t.Q6J("ngIf",!M.canUnlock),t.xp6(1),t.Q6J("ngIf",M.canUnlock))},directives:[e.Pi,b.O5],pipes:[e.X$],styles:[""]}),E})()},33770:(Pt,X,r)=>{"use strict";r.d(X,{d:()=>E});var a=r(89129),t=r(52444),N=r(5e3),A=r(40703),e=r(14181),b=r(69808),_=r(69544),h=r(89854);function l(O,F){if(1&O){const M=N.EpF();N.TgZ(0,"a",1),N.NdJ("click",function(f){return N.CHM(M),N.oxw().onClick(f)}),N._UZ(1,"span",2)(2,"span",3),N.qZA()}if(2&O){const M=N.oxw();N.ekj("status--small",M.isSmall),N.xp6(1),N.Q6J("inlineSVG",M.mapIcon()),N.xp6(1),N.Q6J("translate",M.mapTitle())}}let E=(()=>{class O{constructor(M,G){this.modalService=M,this.cardsService=G,this.CARD_STATUS=a.ti}ngOnInit(){}onClick(M){M.preventDefault(),this.isSmall||this.showModal()}mapIcon(M=!1){const G="/assets/img/cards/status/";let f=M?"-large.svg":this.isSmall?"-small.svg":".svg";return this.status===a.ti.EXPIRED?`${G}expire${f}`:`${G}locked${f}`}mapTitle(){return this.cardsService.mapCardStatus(this.status)}mapDescription(){return`CARDS.STATUS.DESCRIPTION.${this.status}`}showModal(){const M=this.modalService.open(t.d,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0});return Object.assign(M.componentInstance,{title:this.mapTitle(),img:this.mapIcon(!0),description:this.mapDescription(),cardId:this.cardId,canUnlock:this.status===a.ti.TEMPORARILY_LOCK}),M.result}}return O.\u0275fac=function(M){return new(M||O)(N.Y36(A.FF),N.Y36(e.d))},O.\u0275cmp=N.Xpm({type:O,selectors:[["j-card-status"]],inputs:{cardId:"cardId",isSmall:"isSmall",status:"status"},decls:1,vars:1,consts:[["href","#","class","status",3,"status--small","click",4,"ngIf"],["href","#",1,"status",3,"click"],[1,"status__icon",3,"inlineSVG"],[1,"status__title","text-danger",3,"translate"]],template:function(M,G){1&M&&N.YNc(0,l,3,4,"a",0),2&M&&N.Q6J("ngIf",G.status!=G.CARD_STATUS.ACTIVE)},directives:[b.O5,_.d$,h.Pi],styles:[".status[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:1rem}.status[_ngcontent-%COMP%]:hover{text-decoration:underline}.status--small[_ngcontent-%COMP%]{font-size:.75rem;margin-left:.5rem}.status--small[_ngcontent-%COMP%]:hover{text-decoration:none}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]{width:16px}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%}.status--small[_ngcontent-%COMP%]   .status__title[_ngcontent-%COMP%]{padding-top:2px}.status__icon[_ngcontent-%COMP%]{margin-right:.25rem}"]}),O})()},89129:(Pt,X,r)=>{"use strict";r.d(X,{kk:()=>N,ti:()=>e,Zb:()=>A});var a=r(5157),t=r(17489),N=(()=>{return(b=N||(N={})).COMMERCIAL="COMMERCIAL",b.PRIVATE="PRIVATE",N;var b})();class A{constructor(_){this.accountType=a.Q5.CARD,(0,t.defaults)(this,_),this.maskedNumber=this.getMaskedNumber(),this.formattedName=this.getFormattedName(),this.formattedFullName=this.getFormattedFullName()}get hasLockedState(){return this.status!==e.ACTIVE}getMaskedNumber(){var _;return`\u2022\u2022\u2022\u2022 ${this.cardNumber.substr((null===(_=this.cardNumber)||void 0===_?void 0:_.length)-4)}`}getFormattedName(){return this.firstName||this.lastName||!this.fullName?this.firstName||this.lastName?`${this.capitalized(this.lastName)} ${this.capitalized(this.firstName)}`:"":this.fullName}getFormattedFullName(){return this.fullName}capitalized(_){var h;return _?`${null===(h=_[0])||void 0===h?void 0:h.toUpperCase()}${_.substr(1).toLowerCase()}`:""}}var e=(()=>{return(b=e||(e={})).ACTIVE="ACTIVE",b.CLOSED="CLOSED",b.FRAUD="FRAUD",b.EXPIRED="EXPIRED",b.LOST_LOCK="LOST_LOCK",b.THEFT_LOCK="THEFT_LOCK",b.TEMPORARILY_LOCK="TEMPORARILY_LOCK",e;var b})()},56610:(Pt,X,r)=>{"use strict";r.d(X,{d:()=>G});var a=r(70655),t=r(40520),N=r(89129),A=r(8929),e=r(24850),b=r(43120),_=r(5157),h=r(5e3),l=r(1790),E=r(26164),O=r(19204),F=r(89854),M=r(66013);let G=(()=>{class f{constructor(k,$,i,Y,S){this.apiService=k,this.companyService=$,this.statementService=i,this.translateService=Y,this.notifierService=S,this.cardsUpdated$=new A.xQ}getStatement(k,$,i=1,Y=50,S=null){return(0,a.mG)(this,void 0,void 0,function*(){if(this.cashedStatement&&this.cashedFilter===$&&this.cashedPageNumber===i&&this.cashedPageSize===Y&&this.cardId===k&&!S)return this.cashedStatement;const U=`companies/${this.companyService.currentId}/corporate-cards/${k}/statements`;let x;x=!S&&this.cashedFilter===$&&i>this.cashedPageNumber;try{const ot=yield this.statementService.getStatement(U,$,this.cashedStatement,x,i,Y,!1,S,_.Q5.CARD);return S?ot:(this.cashedFilter=$,this.cashedPageNumber=i,this.cashedPageSize=Y,this.cashedStatement=ot,this.cardId=k,this.cashedStatement)}catch(ot){throw ot}})}mapCardLabel(k){if(k.alias)return k.alias;switch(k.category){case N.kk.PRIVATE:return"ACCOUNTS.PRIVATE_CARD";case N.kk.COMMERCIAL:return this.companyService.currentCompany.type==b.cN.CORPORATE?"ACCOUNTS.CORPORATE_CARD":"ACCOUNTS.ENTREPRENEUR_CARD";default:return"ACCOUNTS.CARD"}}getCorporateCards(){return(0,a.mG)(this,void 0,void 0,function*(){const k=`companies/${this.companyService.currentId}/corporate-cards`;let $=(new t.LE).set("includePrivate","true");const i=yield this.apiService.get(k,null,$);return this.cardsList=i.map(Y=>new N.Zb(Y)),this.cardsList})}getCorporateCardsAsObservable(){const k=`companies/${this.companyService.currentId}/corporate-cards`;let $=(new t.LE).set("includePrivate","true");return this.apiService.getObservable(k,null,$).pipe((0,e.U)(i=>(this.cardsList=i.map(Y=>new N.Zb(Y)),this.cardsList)))}getCardById(k){return(0,a.mG)(this,void 0,void 0,function*(){return this.cardsList||(yield this.getCorporateCards()),this.findCardById(k)})}getQrImg(k,$){return(0,a.mG)(this,void 0,void 0,function*(){const i=`companies/${this.companyService.currentId}/corporate-cards/${k}/qr`;let Y=new t.LE;return Y=Y.append("iban",$),this.apiService.get(i,null,Y)})}getQrPrint(k,$){return(0,a.mG)(this,void 0,void 0,function*(){const i=`companies/${this.companyService.currentId}/corporate-cards/${k}/qr/print`;let Y=new t.WM;Y=Y.set("Content-Type","application/octet-stream");let S=new t.LE;return S=S.append("iban",$),this.apiService.get(i,Y,S,{responseType:"blob"})})}getPdf(k){return(0,a.mG)(this,void 0,void 0,function*(){const $=`companies/${this.companyService.currentId}/corporate-cards/${k}/requisites`;let i=new t.WM;i=i.set("Accept-File","application/pdf"),i=i.set("Content-Type","application/octet-stream");const Y=new t.LE;return this.apiService.get($,i,Y,{responseType:"blob"})})}changeCardStatus(k,$){return(0,a.mG)(this,void 0,void 0,function*(){const i=`companies/${this.companyService.currentId}/corporate-cards/${k}/status`,Y={status:$?"BLOCK":"UNBLOCK"};try{const S=yield this.apiService.post(i,Y);return this.cardsList.find(U=>U.cardId===k).status=$?N.ti.TEMPORARILY_LOCK:N.ti.ACTIVE,this.cardsUpdated$.next(this.cardsList),this.showCardStatusChangeSuccessNotification($),S}catch(S){throw this.showCardStatusChangeErrorNotification($),S}})}changeCardVisibility(k,$){return(0,a.mG)(this,void 0,void 0,function*(){const Y=`companies/${this.companyService.currentId}/corporate-cards/${k}:${$?"hide":"unhide"}`;try{const S=yield this.apiService.patch(Y);return this.cardsList.find(U=>U.cardId===k).hidden=$,this.cardsUpdated$.next(this.cardsList),this.showCardVisibilityChangeSuccessNotification($),S}catch(S){throw this.showCardVisibilityChangeErrorNotification($),S}})}mapCardStatus(k){const $="CARDS.STATUS.TITLE.";switch(k){case N.ti.EXPIRED:return`${$}EXPIRED`;case N.ti.TEMPORARILY_LOCK:return`${$}TEMPORARILY_LOCK`;case N.ti.FRAUD:case N.ti.LOST_LOCK:case N.ti.THEFT_LOCK:return`${$}LOCK`;default:return`${$}ACTIVE`}}findCardById(k){return this.cardsList.find($=>$.cardId===k)}renameCard(k,$){return this.apiService.put(`companies/${this.companyService.currentId}/corporate-cards/${k}/alias`,{alias:$})}showCardStatusChangeSuccessNotification(k){const i=this.translateService.instant("CARDS.SETTINGS.LOCK."+(k?"ACTIVATED_NOTIFICATION":"DEACTIVATED_NOTIFICATION"));this.notifierService.hideAll(),this.notifierService.notify("default",i)}showCardStatusChangeErrorNotification(k){const i=this.translateService.instant("CARDS.SETTINGS.LOCK."+(k?"ACTIVATED_FAILED":"DEACTIVATED_FAILED"));this.notifierService.hideAll(),this.notifierService.notify("error",i)}showCardVisibilityChangeSuccessNotification(k){const i=this.translateService.instant("CARDS.SETTINGS.HIDE."+(k?"HIDDEN_NOTIFICATION":"SHOWN_NOTIFICATION"));this.notifierService.hideAll(),this.notifierService.notify("default",i)}showCardVisibilityChangeErrorNotification(k){const i=this.translateService.instant("CARDS.SETTINGS.HIDE."+(k?"HIDDEN_FAILED":"SHOWN_FAILED"));this.notifierService.hideAll(),this.notifierService.notify("error",i)}}return f.\u0275fac=function(k){return new(k||f)(h.LFG(l.sM),h.LFG(E.J),h.LFG(O.AQ),h.LFG(F.sK),h.LFG(M.lG))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},14181:(Pt,X,r)=>{"use strict";r.d(X,{d:()=>a.d});var a=r(56610)},12908:(Pt,X,r)=>{"use strict";r.d(X,{w:()=>a});var a=(()=>{return(t=a||(a={})).KZT="KZT",t.RUB="RUB",t.USD="USD",t.EUR="EUR",t.AUD="AUD",t.AZN="AZN",t.BYN="BYN",t.DKK="DKK",t.SAR="SAR",t.SGD="SGD",t.XAU="XAU",t.KGS="KGS",t.GBP="GBP",t.CNY="CNY",t.CHF="CHF",t.HKD="HKD",t.GEL="GEL",t.AED="AED",t.INR="INR",t.CAD="CAD",t.MYR="MYR",t.PLN="PLN",t.THB="THB",t.TRY="TRY",t.UZS="UZS",t.UAH="UAH",t.CZK="CZK",t.SEK="SEK",t.KRW="KRW",t.JPY="JPY",a;var t})()},43474:(Pt,X,r)=>{"use strict";r.d(X,{e5:()=>k.e5,_A:()=>k._A,iZ:()=>B.i,H4:()=>k.H4}),r(29886),r(78242),r(27e3),r(5e3),r(89854),r(99524),r(26149),r(18110),r(50482),r(17004),r(65765),r(36336),r(60031),r(99466);var B=r(67515),k=r(41359)},70917:(Pt,X,r)=>{"use strict";r.r(X),r.d(X,{HomeModule:()=>os});var a=r(69808),t=r(93075),N=r(29991),A=r(40703),e=r(46805),b=r(81538),_=r(23918),h=r(91995),l=r(49096),E=r(65832),O=r(48925),F=r(59516),M=r(15057),G=r(38114),f=r(36053),B=r(92198),k=r(24850),$=r(18583),i=r(5e3),Y=r(26164),S=r(98613),U=r(50384);let x=(()=>{class m{constructor(c,v,Q){this.company=c,this.user=v,this.auth=Q}canActivate(c,v){return(0,f.aj)([this.company.currentCompany$,this.user.getUser()]).pipe((0,B.h)(([Q,St])=>!!Q&&!!St),(0,k.U)(()=>!0),(0,$.g)(0))}}return m.\u0275fac=function(c){return new(c||m)(i.LFG(Y.J),i.LFG(S.E),i.LFG(U.e))},m.\u0275prov=i.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var ot=r(73355),vt=r(70655),At=r(42654),Zt=r(56104),kt=r(89129),Yt=r(77265),H=r(56610),at=r(23498),yt=r(40520),rt=r(82524);let ht=(()=>{class m{constructor(c,v){this.apiService=c,this.companyService=v}getUrl(){return`/companies/${this.companyService.currentId}/additional-accounts`}check(){const c=this.getUrl(),v=(new yt.WM).set("client-type","WEB");return this.apiService.postObservable(c,null,v)}apply(c,v,Q){const St=`${this.getUrl()}/${v}:confirm`,rn=(new yt.LE).set("currency",c),En=(new yt.WM).set("PhoneAuthorization",Q);return this.apiService.postObservable(St,null,En,rn)}getAdditionalAccountsInProgress(){const c=`${this.getUrl()}/in-progress`;return this.apiService.getObservable(c)}}return m.\u0275fac=function(c){return new(c||m)(i.LFG(rt.sM),i.LFG(Y.J))},m.\u0275prov=i.Yz7({token:m,factory:m.\u0275fac}),m})();var _t=r(17165),Nt=r(83599),nt=r(71764),Bt=r.n(nt),Lt=r(89854),bt=r(54507),$t=r(68221),an=r(69544),Vt=r(25021);function An(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM1")))}function Wt(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM2")))}function hn(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM3")))}function Ht(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM4")))}function nn(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM2")))}function pn(m,K){if(1&m&&(i.TgZ(0,"div",1)(1,"span",2),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",3)(5,"span",4),i._uU(6),i.ALo(7,"translate"),i.TgZ(8,"span",5),i._uU(9),i.ALo(10,"number"),i.qZA(),i.TgZ(11,"span",6),i.YNc(12,An,3,3,"span",7),i.YNc(13,Wt,3,3,"span",7),i.YNc(14,hn,3,3,"span",7),i.YNc(15,Ht,3,3,"span",7),i.YNc(16,nn,3,3,"span",8),i.qZA(),i._uU(17),i.ALo(18,"number"),i.qZA()(),i.TgZ(19,"div",9)(20,"div",10),i._UZ(21,"div",11),i.qZA()()()),2&m){const c=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,15,c.packageTitle)),i.xp6(4),i.hij(" ",i.lcZ(7,17,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),i.xp6(2),i.Q6J("title",null==c.item?null:c.item.current),i.xp6(1),i.hij("",i.lcZ(10,19,null==c.item?null:c.item.current),"\xa0"),i.xp6(2),i.Q6J("ngSwitch",null==c.item?null:c.item.current),i.xp6(1),i.Q6J("ngSwitchCase",5),i.xp6(1),i.Q6J("ngSwitchCase",10),i.xp6(1),i.Q6J("ngSwitchCase",20),i.xp6(1),i.Q6J("ngSwitchCase",50),i.xp6(2),i.AsE(" ",i.lcZ(18,21,null==c.item?null:c.item.total)," ",null==c.item?null:c.item.tenge," "),i.xp6(4),i.Gre("progress-bar ",null!=c.item&&c.item.color?c.item.color:"NONE",""),i.Q6J("ngStyle",c.style)}}let V=(()=>{class m{constructor(){this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(c){const v=Math.round((null==c?void 0:c.current)/(null==c?void 0:c.total)*100);this.style.width=`${v||1}%`}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-package-progressbar"]],inputs:{item:"item",packageTitle:"packageTitle"},decls:1,vars:1,consts:[["class","row mx-0 justify-content-start",4,"ngIf"],[1,"row","mx-0","justify-content-start"],[1,"pt-3","pb-2","title"],[1,"col-12","p-0"],[1,"progress-bar-title"],[3,"title"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"col-12","p-0","pb-1","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",3,"ngStyle"]],template:function(c,v){1&c&&i.YNc(0,pn,22,23,"div",0),2&c&&i.Q6J("ngIf",null==v.item?null:v.item.total)},directives:[a.O5,a.RF,a.n9,a.ED,a.PC],pipes:[Lt.X$,a.JJ],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.progress-bar[_ngcontent-%COMP%]{border-radius:.375rem}.GREEN[_ngcontent-%COMP%]{background-color:#74ba72!important}.YELLOW[_ngcontent-%COMP%]{background-color:#ef8f00!important}.RED[_ngcontent-%COMP%]{background-color:red!important}.NONE[_ngcontent-%COMP%]{background-color:#e9ecf1!important}.title[_ngcontent-%COMP%]{font-size:.75rem;line-height:1.125rem;color:#828282}.progress-bar-title[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:1rem;line-height:1.5}"]}),m})();const dt=["collapse"];function Et(m,K){if(1&m&&(i.TgZ(0,"div",11),i._UZ(1,"j-package-progressbar",12),i.qZA()),2&m){const c=i.oxw();i.xp6(1),i.Q6J("item",c.myPaymentData)("packageTitle",c.paymentTitle)}}function J(m,K){if(1&m&&(i.TgZ(0,"div",11),i._UZ(1,"j-package-progressbar",12),i.qZA()),2&m){const c=i.oxw();i.xp6(1),i.Q6J("item",c.myRefillData)("packageTitle",c.depositsTitle)}}function mt(m,K){1&m&&(i.TgZ(0,"span",16),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.MAIN.DEPOSITS_RUBLES")))}function I(m,K){1&m&&(i.TgZ(0,"span"),i._uU(1,", "),i.qZA())}function Z(m,K){1&m&&(i.TgZ(0,"span",16),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"SETTINGS.PACKAGE.MAIN.DEPOSITS_CURRENCY")))}function et(m,K){if(1&m&&(i.TgZ(0,"j-collapsible-body")(1,"p",13),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",14),i.YNc(5,mt,3,3,"span",15),i.YNc(6,I,2,0,"span",9),i.YNc(7,Z,3,3,"span",15),i.qZA()()),2&m){const c=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"SETTINGS.PACKAGE.CALCULATE.SALES")),i.xp6(3),i.Q6J("ngIf",c.discountInRubles),i.xp6(1),i.Q6J("ngIf",c.discountInRubles&&c.discountInForeignCurrency),i.xp6(1),i.Q6J("ngIf",c.discountInForeignCurrency)}}function L(m,K){if(1&m&&(i.TgZ(0,"j-collapsible-body")(1,"p",17),i._uU(2),i.ALo(3,"translate"),i.ALo(4,"date"),i.qZA()()),2&m){const c=i.oxw();i.xp6(2),i.AsE("",i.lcZ(3,2,"SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW")," \u2014 ",i.xi3(4,4,c.nextWriteOff,"dd.MM.yyyy"),"")}}const gt=function(m,K){return[m,K]};let It=(()=>{class m{constructor(c){this.translateService=c,this.isCollapsed=!1,this.payment=new Yt.J9("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.paymentTitle="SETTINGS.PACKAGE.CALCULATE.PAYMENTS",this.depositsTitle="SETTINGS.PACKAGE.CALCULATE.DEPOSITS",this.myPaymentData=Object.assign({},Nt.W3),this.myRefillData=Object.assign({},Nt.gB),this.discountInRubles=!1,this.discountInForeignCurrency=!1,this.nextWriteOff="",this.differenceInDays=0}set data(c){var v,Q;this.myPaymentData.current=c.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=c.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:c.restOfPayments.totalNumberOfPayments,payment:c.restOfPayments.costNextPayment}),this.myPaymentData.color=c.restOfPayments.colorIndicator,this.myRefillData.current=c.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=c.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:c.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:c.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:c.depositAndWithdrawals.withdrawalOverLimit}),this.myRefillData.color=c.depositAndWithdrawals.colorIndicator,this.myRefillData.tenge="\u20b8",this.discountInRubles=null===(v=null==c?void 0:c.discountOnTransferInRubles)||void 0===v?void 0:v.hasDiscount,this.discountInForeignCurrency=null===(Q=null==c?void 0:c.discountOnTransferInCurrency)||void 0===Q?void 0:Q.hasDiscount,this.nextWriteOff=c.nextWriteOff}ngOnInit(){const c=Bt()().format("YYYY-MM-DD"),v=Bt()(this.nextWriteOff);this.differenceInDays=Bt()(c).diff(v,"d")}onCollapse(){this.isCollapsed=!this.isCollapsed}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(Lt.sK))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-package-connected"]],viewQuery:function(c,v){if(1&c&&i.Gf(dt,5),2&c){let Q;i.iGM(Q=i.CRH())&&(v.collapse=Q.first)}},inputs:{isCollapsed:"isCollapsed",data:"data"},decls:19,vars:15,consts:[[1,"package__block","package__block--collapsible"],[3,"isCollapsed"],[1,"package__collapse","d-flex","justify-content-between",3,"click"],["collapse",""],[1,"text-dark","text-size"],[1,"package__arrow",3,"inlineSVG"],[1,"pb-4"],[1,"row"],["class","col-6 pl-3 pr-0",4,"ngIf"],[4,"ngIf"],["routerLink","/settings/package",1,"more"],[1,"col-6","pl-3","pr-0"],[3,"item","packageTitle"],[1,"title","mb-0","pb-2","pt-4"],[1,"pb-2"],["class","sale",4,"ngIf"],[1,"sale"],[1,"write-off","mb-0","pb-3","pt-1"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"j-collapsible",1)(2,"j-collapsible-trigger")(3,"div",2,3),i.NdJ("click",function(){return v.onCollapse()}),i.TgZ(5,"strong",4),i._uU(6),i.ALo(7,"translate"),i.qZA(),i._UZ(8,"span",5),i.qZA()(),i.TgZ(9,"j-collapsible-body",6)(10,"div",7),i.YNc(11,Et,2,2,"div",8),i.YNc(12,J,2,2,"div",8),i.qZA()(),i.YNc(13,et,8,6,"j-collapsible-body",9),i.YNc(14,L,5,7,"j-collapsible-body",9),i.TgZ(15,"j-collapsible-body")(16,"a",10),i._uU(17),i.ALo(18,"translate"),i.qZA()()()()),2&c&&(i.xp6(1),i.Q6J("isCollapsed",!0),i.xp6(5),i.Oqu(i.lcZ(7,8,"SETTINGS.PACKAGE.MAIN.TITLE2")),i.xp6(2),i.Q6J("inlineSVG","assets/icons/arrow-down.svg"),i.xp6(3),i.Q6J("ngIf",null==v.myPaymentData?null:v.myPaymentData.total),i.xp6(1),i.Q6J("ngIf",null==v.myRefillData?null:v.myRefillData.total),i.xp6(1),i.Q6J("ngIf",v.discountInRubles||v.discountInForeignCurrency),i.xp6(1),i.Q6J("ngIf",i.WLB(12,gt,-1,-2).includes(v.differenceInDays)),i.xp6(3),i.hij(" ",i.lcZ(18,10,"SHARED.MORE")," "))},directives:[bt.t,$t.k,an.d$,Vt.p,a.O5,V,F.yS],pipes:[Lt.X$,a.uU],styles:[".package__block{background:#fff;border-radius:.5rem;padding:1.25rem 1rem;margin:2rem 0}.package__block .package__block--collapsible{padding-top:0;padding-bottom:0;transition:all .2s ease-in-out}.package__arrow{transition:all .2s ease-in-out}.package__collapse{cursor:pointer;align-items:center;line-height:1.25rem}.package__body{display:block;transition:all .2s ease-in-out}.j-collapsed .package__collapse .package__arrow{transform:rotate(180deg)}.text-size{font-size:1.25rem;line-height:1.25rem}.title{font-size:.75rem;line-height:1.125rem;color:#828282}.sale{font-weight:500;color:#000}.write-off{color:#ef8f00}.more{color:#1586bb}\n"],encapsulation:2}),m})();const Ut=["collapse"];let ln=(()=>{class m{constructor(c){this.router=c,this.isCollapsed=!1}ngOnInit(){}connectPackage(){this.router.navigate(["/settings/package"])}onCollapse(){this.isCollapsed=!this.isCollapsed}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(F.F0))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-package-not-connected"]],viewQuery:function(c,v){if(1&c&&i.Gf(Ut,5),2&c){let Q;i.iGM(Q=i.CRH())&&(v.collapse=Q.first)}},inputs:{isCollapsed:"isCollapsed"},decls:16,vars:13,consts:[[1,"package__block","package__block--collapsible"],[3,"isCollapsed"],[1,"package__collapse","d-flex","justify-content-between",3,"click"],["collapse",""],[1,"text-dark","text-size"],[1,"package__arrow",3,"inlineSVG"],[1,"package__body","description"],[1,"package__body"],["type","button",1,"btn","btn-header","btn-shadow","btn-primary",3,"click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"j-collapsible",1)(2,"j-collapsible-trigger")(3,"div",2,3),i.NdJ("click",function(){return v.onCollapse()}),i.TgZ(5,"strong",4),i._uU(6),i.ALo(7,"translate"),i.qZA(),i._UZ(8,"span",5),i.qZA()(),i.TgZ(9,"j-collapsible-body",6),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"j-collapsible-body",7)(13,"button",8),i.NdJ("click",function(){return v.connectPackage()}),i._uU(14),i.ALo(15,"translate"),i.qZA()()()()),2&c&&(i.ekj("package__img",!v.isCollapsed),i.xp6(1),i.Q6J("isCollapsed",!0),i.xp6(5),i.Oqu(i.lcZ(7,7,"SETTINGS.PACKAGE.MAIN.TITLE1")),i.xp6(2),i.Q6J("inlineSVG","assets/icons/arrow-down.svg"),i.xp6(2),i.hij(" ",i.lcZ(11,9,"SETTINGS.PACKAGE.MAIN.DESCRIPTION")," "),i.xp6(4),i.hij(" ",i.lcZ(15,11,"SETTINGS.PACKAGE.MAIN.CONNECT")," "))},directives:[bt.t,$t.k,an.d$,Vt.p],pipes:[Lt.X$],styles:[".package__block{background:#fff;border-radius:.5rem;padding:1.25rem 1rem;margin:2rem 0}.package__block .package__block--collapsible{padding-top:0;padding-bottom:0;transition:all .2s ease-in-out}.package__img{background-image:url(/assets/icons/main-package.svg);background-repeat:no-repeat;background-position:top right}.package__arrow{transition:all .2s ease-in-out}.package__collapse{cursor:pointer;align-items:center;line-height:1.25rem}.package__body{display:block;transition:all .2s ease-in-out}.j-collapsed .description{padding:.75rem 0;line-height:1.5rem}.j-collapsed .package__collapse .package__arrow{transform:rotate(180deg)}.text-size{font-size:1.25rem;line-height:1.25rem}\n"],encapsulation:2}),m})();var Tn=r(41064),mn=r(90193),bn=r(87545),yn=r(64188),Ln=r(16206),ne=r(20794),jn=r(6664);let Mn=(()=>{class m{constructor(){this.onSelect=new i.vpe}ngOnChanges(){const{code:c,name:v}=this.currency;this.label=`${c} - ${v}`,this.src=`/assets/currency/${c}.svg`}onSelectClick(){this.currency.isPossible&&this.onSelect.emit()}ngOnInit(){}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-currency-item"]],inputs:{currency:"currency"},outputs:{onSelect:"onSelect"},features:[i.TTD],decls:6,vars:4,consts:[[1,"currency-item","d-flex","align-items-center","p-3","mx-auto","my-3",3,"click"],["alt","",1,"currency-item__icon",3,"src"],[1,"currency-item__label","pl-2"],[1,"btn","btn-link","px-0"],["src","/assets/icons/arrow-right.svg","alt",""]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return v.onSelectClick()}),i._UZ(1,"img",1),i.TgZ(2,"span",2),i._uU(3),i.qZA(),i.TgZ(4,"button",3),i._UZ(5,"img",4),i.qZA()()),2&c&&(i.ekj("currency-item--disabled",!v.currency.isPossible),i.xp6(1),i.Q6J("src",v.src,i.LSH),i.xp6(2),i.Oqu(v.label))},styles:[".currency-item[_ngcontent-%COMP%]{width:90%;height:56px;background:#fff;border-radius:8px;cursor:pointer}.currency-item__label[_ngcontent-%COMP%]{font-size:18px}.currency-item__icon[_ngcontent-%COMP%]{width:28px;height:28px}.currency-item--disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.55}.currency-item[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{margin-left:auto}"]}),m})();var he=r(60312);let Yn=(()=>{class m{constructor(){}ngOnInit(){}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-application-item"]],inputs:{label:"label",text:"text"},decls:6,vars:4,consts:[[1,"additional-account-application-item","d-flex","justify-content-between","pb-3","position-relative","mt-3"],[1,"p2"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"span",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"span",1),i._uU(5),i.qZA()()),2&c&&(i.xp6(2),i.Oqu(i.lcZ(3,2,v.label)),i.xp6(3),i.Oqu(v.text))},pipes:[Lt.X$],styles:['.additional-account-application-item[_ngcontent-%COMP%]:after{content:"";width:100%;height:1px;background:#B7BEC5;opacity:.5;position:absolute;bottom:0}']}),m})(),Te=(()=>{class m{constructor(){this.onSign=new i.vpe}ngOnInit(){}clickOnSign(){this.onSign.emit()}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-application"]],inputs:{currency:"currency",companyName:"companyName"},outputs:{onSign:"onSign"},decls:10,vars:2,consts:[[1,"additional-account-application"],["translate","",1,"pb-2"],[1,"p4","pt-2","additional-account-application__terms"],["translate",""],["label","ADDITIONAL_ACCOUNTS.APPLICATION_ITEM_COMPANY_NAME",3,"text"],["label","ADDITIONAL_ACCOUNTS.APPLICATION_ITEM_COMPANY_CURRENCY",3,"text"],["translate","",1,"btn","btn-primary","btn-lg","mt-3",3,"click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"h3",1),i._uU(2,"ADDITIONAL_ACCOUNTS.APPLICATION_HEADER"),i.qZA(),i.TgZ(3,"div",2)(4,"span",3),i._uU(5," ADDITIONAL_ACCOUNTS.APPLICATION_TERMS "),i.qZA()(),i._UZ(6,"j-application-item",4)(7,"j-application-item",5),i.TgZ(8,"button",6),i.NdJ("click",function(){return v.clickOnSign()}),i._uU(9," ADDITIONAL_ACCOUNTS.MODAL_SIGN_BTN "),i.qZA()()),2&c&&(i.xp6(6),i.Q6J("text",v.companyName),i.xp6(1),i.Q6J("text",v.currency))},directives:[Lt.Pi,Yn],styles:[".additional-account-application__terms[_ngcontent-%COMP%]{color:#666c72}"]}),m})();var Ue=r(28957);let xe=(()=>{class m{constructor(){this.close=new i.vpe}ngOnInit(){}ngOnChanges(){this.src=`/assets/additional-account/${this.result.iconName}.svg`}onCloseClick(){this.close.emit()}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-open-additional-account-result"]],inputs:{result:"result"},outputs:{close:"close"},features:[i.TTD],decls:8,vars:4,consts:[[1,"open-additional-account-result","text-center"],[3,"inlineSVG"],["translate","",1,"pt-5","pb-0","mb-0"],["translate","",1,"p2","mb-5","d-block","open-additional-account-result__label"],["translate","",1,"btn","btn-static","btn-primary","btn-lg","w-100","mt-5",3,"click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i._UZ(1,"span",1),i.TgZ(2,"h3",2),i._uU(3),i.qZA(),i.TgZ(4,"span",3),i._uU(5),i.qZA(),i.TgZ(6,"button",4),i.NdJ("click",function(){return v.onCloseClick()}),i._uU(7),i.qZA()()),2&c&&(i.xp6(1),i.Q6J("inlineSVG",v.src),i.xp6(2),i.hij(" ",v.result.header," "),i.xp6(2),i.hij(" ",v.result.label," "),i.xp6(2),i.hij(" ",v.result.btnText," "))},directives:[an.d$,Lt.Pi],styles:[""]}),m})();const dn=["applicationModal"];function Dn(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-currency-item",11),i.NdJ("onSelect",function(){const St=i.CHM(c).$implicit;return i.oxw(2).onCurrencySelect(St)}),i.qZA()}2&m&&i.Q6J("currency",K.$implicit)}function ce(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"div",7)(1,"button",8),i.NdJ("click",function(){return i.CHM(c),i.oxw().checkUser()}),i._uU(2," ADDITIONAL_ACCOUNTS.OPEN_ACCOUNT "),i.qZA(),i.TgZ(3,"j-sidebar",9),i.NdJ("onClose",function(){return i.CHM(c),i.oxw().toggleOpenSidebar()}),i.YNc(4,Dn,1,1,"j-currency-item",10),i.qZA()()}if(2&m){const c=i.oxw();i.xp6(1),i.Q6J("disabled",c.checkInProgress),i.xp6(2),i.Q6J("header",c.sidebarLabel)("open",c.openSidebar),i.xp6(1),i.Q6J("ngForOf",c.currencies)}}function ve(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-application",12),i.NdJ("onSign",function(){return i.CHM(c),i.oxw().setStep("sign")}),i.qZA()}if(2&m){const c=i.oxw();i.Q6J("currency",c.selectedCurrency)("companyName",c.companyName)}}function Se(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-sms",13),i.NdJ("loaded",function(){return i.CHM(c),i.oxw().setSmsLoaded(!0)})("submitted",function(Q){return i.CHM(c),i.oxw().onSubmit(Q)}),i.qZA()}if(2&m){const c=i.oxw();i.Q6J("hidden",!c.isSmsLoaded)("phone",c.phone)("countryCode",c.countryCode)("headers",c.headerParams)}}function Pe(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-open-additional-account-result",14),i.NdJ("close",function(){return i.CHM(c),i.oxw().onModalClose()}),i.qZA()}if(2&m){const c=i.oxw();i.Q6J("result",c.result)}}let Oe=(()=>{class m{constructor(c,v,Q,St,rn,En){this.currencyListService=c,this.additionalAccountService=v,this.translateService=Q,this.companyService=St,this.analytics=rn,this.featureFlagsService=En,this.added=new i.vpe,this.openSidebar=!1,this.currencies=null,this.sidebarLabel=this.translateService.instant("ADDITIONAL_ACCOUNTS.SIDEBAR_HEADER"),this.step="application",this.checkInProgress=!1,this.headerParams={smsHeader:rt.H$.OPENING_ACCOUNT},this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.phone=JSON.parse(localStorage.getItem("user")).phone,this.isSmsLoaded=!1,this.showOpenAdditionalAccountSubscription=null,this.showOpenAdditionalAccount=!1,this.showOpenAdditionalAccountSubscription=(0,f.aj)([this.featureFlagsService.featureFlags$,this.companyService.currentAuthority$]).subscribe(([ie,Un])=>{this.showOpenAdditionalAccount=(null==Un?void 0:Un.authority)===mn.Ly.PRIMARY_SIGNATURE&&!this.featureFlagsService.isDisabled(Tn.Y.OPEN_ADDITIONAL_ACCOUNT)})}ngOnInit(){}ngOnDestroy(){this.showOpenAdditionalAccountSubscription.unsubscribe()}setResult(c,v){this.result="success"===c?{iconName:"success",header:"ADDITIONAL_ACCOUNTS.SUCCESS_MODAL.HEADER",label:"ADDITIONAL_ACCOUNTS.SUCCESS_MODAL.TEXT",btnText:"ADDITIONAL_ACCOUNTS.SUCCESS_MODAL.BTN"}:{iconName:"fail",header:"ADDITIONAL_ACCOUNTS.FAIL_MODAL.HEADER",label:`ADDITIONAL_ACCOUNTS.FAIL_MODAL.TEXT.${v}`,btnText:"ADDITIONAL_ACCOUNTS.FAIL_MODAL.BTN"}}toggleOpenSidebar(){this.openSidebar=!this.openSidebar}checkUser(){return(0,vt.mG)(this,void 0,void 0,function*(){this.analytics.logEvent("JMain_Add_Click",{version:1}),this.checkInProgress=!0,this.additionalAccountService.check().pipe((0,bn.w)(({id:c})=>(this.requestedAccountId=c,this.currencyListService.loadCurrencyList())),(0,k.U)(c=>{const v=this.translateService.instant("SHARED.CURRENCY_DESCRIPTION");return c.map(Q=>Object.assign(Object.assign({},Q),{name:v[Q.code]}))})).subscribe(c=>{this.currencies=c,this.toggleOpenSidebar()},c=>{this.setStep("fail",c.status?`${String(c.status).slice(0,-2)}x`:"5x"),this.openModal()}).add(()=>this.checkInProgress=!1)})}openModal(){this.applicationModal.open({centered:!0,windowClass:"additional-account-application-modal"})}onCurrencySelect(c){this.selectedCurrency=c.code,this.companyName=this.companyService.currentAuthority.company.shortName,this.toggleOpenSidebar(),this.openModal()}setStep(c,v="5x"){this.step=c,this.showResult&&this.setResult(c,v)}get showApplication(){return["application","sign"].includes(this.step)&&!this.isSmsLoaded}get showResult(){return["success","fail"].includes(this.step)}setSmsLoaded(c){this.isSmsLoaded=c}onSubmit({signature:c}){this.additionalAccountService.apply(this.selectedCurrency,this.requestedAccountId,c).subscribe(()=>{this.setStep("success"),this.analytics.logEvent("JMain_accept_AccountAdd",{version:1})},()=>{this.setStep("fail")})}onSuccessClose(){this.applicationModal.close(),this.added.emit(),this.setStep("application")}resetModal(){this.setStep("application"),this.setSmsLoaded(!1),this.applicationModal.close()}onModalClose(){"success"===this.step?this.onSuccessClose():this.resetModal()}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(yn.c),i.Y36(ht),i.Y36(Lt.sK),i.Y36(Y.J),i.Y36(Ln.q),i.Y36(ne.a))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-open-additional-account"]],viewQuery:function(c,v){if(1&c&&i.Gf(dn,5),2&c){let Q;i.iGM(Q=i.CRH())&&(v.applicationModal=Q.first)}},outputs:{added:"added"},decls:7,vars:4,consts:[["class","open-additional-account",4,"ngIf"],[3,"closeModal"],["applicationModal",""],[1,"additional-account-application-modal__wrapper"],[3,"currency","companyName","onSign",4,"ngIf"],[3,"hidden","phone","countryCode","headers","loaded","submitted",4,"ngIf"],[3,"result","close",4,"ngIf"],[1,"open-additional-account"],["type","button","translate","",1,"btn","btn-link","pl-5","pb-1","p-0","open-additional-account__btn",3,"disabled","click"],[3,"header","open","onClose"],[3,"currency","onSelect",4,"ngFor","ngForOf"],[3,"currency","onSelect"],[3,"currency","companyName","onSign"],[3,"hidden","phone","countryCode","headers","loaded","submitted"],[3,"result","close"]],template:function(c,v){1&c&&(i.YNc(0,ce,5,4,"div",0),i.TgZ(1,"j-modal",1,2),i.NdJ("closeModal",function(){return v.onModalClose()}),i.TgZ(3,"div",3),i.YNc(4,ve,1,2,"j-application",4),i.YNc(5,Se,1,4,"j-sms",5),i.YNc(6,Pe,1,1,"j-open-additional-account-result",6),i.qZA()()),2&c&&(i.Q6J("ngIf",v.showOpenAdditionalAccount),i.xp6(4),i.Q6J("ngIf",v.showApplication),i.xp6(1),i.Q6J("ngIf","sign"===v.step),i.xp6(1),i.Q6J("ngIf",v.showResult))},directives:[a.O5,Lt.Pi,jn.k,a.sg,Mn,he.z,Te,Ue.T,xe],styles:[".additional-account-application-modal .modal-dialog{max-width:681px}.additional-account-application-modal .modal-content{border-radius:40px}.additional-account-application-modal__wrapper{padding:5rem 6.25rem}\n"],encapsulation:2}),m})();var lt=r(26484),wt=r(76759);function q(m,K){1&m&&(i._uU(0),i.ALo(1,"translate")),2&m&&i.hij(" ",i.lcZ(1,1,"ACCOUNTS.INACTIVE"),"\n")}function Ct(m,K){if(1&m&&(i._uU(0),i.ALo(1,"translate")),2&m){const c=i.oxw();i.hij(" ",i.xi3(1,1,"ACCOUNTS.INACTIVE_WITH_DATE",c.titleParams),"\n")}}function P(m,K){if(1&m&&(i._UZ(0,"div",7),i.ALo(1,"translate")),2&m){const c=i.oxw();i.Q6J("innerHTML",i.xi3(1,1,"ACCOUNTS.MIGRATED",c.descriptionParams),i.oJD)}}let ut=(()=>{class m{constructor(c,v){this.accountsService=c,this.locale=v,this.isLarge=!1,this.subscription=new At.w,this.subscription.add(this.accountsService.getMergeDate().subscribe(Q=>{this.descriptionParams=this.mapTranslateParams(Q,"d.MM.yy"),this.titleParams=this.mapTranslateParams(Q,"d MMMM")}))}ngOnDestroy(){this.subscription.unsubscribe()}mapTranslateParams(c,v){return{date:(0,a.p6)(c,"d.MM.yy",this.locale)}}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(wt.i),i.Y36(i.soG))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-migrated"]],inputs:{isLarge:"isLarge"},decls:10,vars:4,consts:[["tooltipClass","tooltip-light",1,"migrated",3,"ngbTooltip"],["inlineSVG","assets/icons/v2/fail-16.svg",1,"migrated__icon"],[1,"migrated__text","text-danger"],[3,"ngTemplateOutlet"],["titleDefaultTemplate",""],["titleLargeTemplate",""],["migratedTooltipTemplate",""],[1,"text-left",3,"innerHTML"]],template:function(c,v){if(1&c&&(i.TgZ(0,"div",0),i._UZ(1,"span",1),i.TgZ(2,"strong",2),i.GkF(3,3),i.qZA()(),i.YNc(4,q,2,3,"ng-template",null,4,i.W1O),i.YNc(6,Ct,2,4,"ng-template",null,5,i.W1O),i.YNc(8,P,2,4,"ng-template",null,6,i.W1O)),2&c){const Q=i.MAs(5),St=i.MAs(7),rn=i.MAs(9);i.Q6J("ngbTooltip",rn),i.xp6(2),i.Tol(v.isLarge?"ml-1":"p4"),i.xp6(1),i.Q6J("ngTemplateOutlet",v.isLarge?St:Q)}},directives:[A._L,an.d$,a.tP],pipes:[Lt.X$],styles:[".migrated[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:12px}.migrated__icon[_ngcontent-%COMP%]{height:16px;margin-right:2px}"]}),m})();function u(m,K){if(1&m&&(i.TgZ(0,"div",1),i._UZ(1,"span",2),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&m){const c=i.oxw();i.xp6(3),i.hij(" ",c.account.maskedAlterCode," ")}}let it=(()=>{class m{constructor(){}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-alter-code"]],inputs:{account:"account"},decls:1,vars:1,consts:[["class","alter-code",4,"ngIf"],[1,"alter-code"],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"]],template:function(c,v){1&c&&i.YNc(0,u,4,1,"div",0),2&c&&i.Q6J("ngIf",null==v.account?null:v.account.hasAtfIban)},directives:[a.O5,an.d$],styles:[".alter-code[_ngcontent-%COMP%]{display:flex;align-items:center;color:#b7bec5}"]}),m})();var xt=r(84685),Qt=r(72159);function un(m,K){1&m&&i._UZ(0,"j-account-migrated",11)}function $n(m,K){if(1&m&&(i.TgZ(0,"div",7)(1,"div",8)(2,"span"),i._uU(3),i.qZA(),i.YNc(4,un,1,0,"j-account-migrated",9),i.qZA(),i._UZ(5,"j-account-alter-code",10),i.qZA()),2&m){const c=i.oxw();i.xp6(3),i.Oqu(c.account.maskedIban),i.xp6(1),i.Q6J("ngIf",c.account.isMigrated),i.xp6(1),i.Q6J("account",c.account)}}function ee(m,K){1&m&&i._UZ(0,"img",12)}let co=(()=>{class m{constructor(c){this.maskedService=c,this.isRoutable=!0}ngOnInit(){}onClick(c){}get isLargeAmount(){var c;return(null===(c=this.account)||void 0===c?void 0:c.balance)&&this.maskedService.getMaskedAmount(this.account.balance.amount).length>16}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(lt.O))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-box"]],inputs:{account:"account",isRoutable:"isRoutable"},decls:7,vars:6,consts:[[1,"account-header"],["class","p2",4,"ngIf"],["src","/assets/icons/arrow-right.svg","class","account-arrow",4,"ngIf"],[1,"account-footer"],["size","sm",1,"account-img",3,"name"],[1,"account-amount"],[3,"money"],[1,"p2"],[1,"account__iban"],["class","ml-2",4,"ngIf"],[3,"account"],[1,"ml-2"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,$n,6,3,"div",1),i.YNc(2,ee,1,0,"img",2),i.qZA(),i.TgZ(3,"div",3),i._UZ(4,"j-entity-logo",4),i.TgZ(5,"h4",5),i._UZ(6,"j-money",6),i.qZA()()),2&c&&(i.xp6(1),i.Q6J("ngIf",v.account),i.xp6(1),i.Q6J("ngIf",v.isRoutable),i.xp6(2),i.Q6J("name",null==v.account||null==v.account.balance?null:v.account.balance.currency),i.xp6(1),i.ekj("account-amount--small",v.isLargeAmount),i.xp6(1),i.Q6J("money",null==v.account?null:v.account.balance))},directives:[a.O5,ut,it,xt.k,Qt.y],styles:[".account-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.account-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media (min-width: 1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-amount--small[_ngcontent-%COMP%]{font-size:18px}@media (min-width: 1280px){.account-amount--small[_ngcontent-%COMP%]{font-size:18px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]{background:#fff;border-radius:12px;display:inline-flex;flex-direction:column;justify-content:space-between;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}"]}),m})(),lo=(()=>{class m{constructor(){}ngOnInit(){}ngOnChanges(){this.src=`/assets/currency/${this.currencyCode}.svg`}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-box-in-progress"]],inputs:{currencyCode:"currencyCode"},features:[i.TTD],decls:5,vars:1,consts:[["count","1","appearance","line"],[1,"d-flex"],["alt","",1,"account-box-in-progress__icon",3,"src"],["translate","",1,"pl-2"]],template:function(c,v){1&c&&(i._UZ(0,"ngx-skeleton-loader",0),i.TgZ(1,"div",1),i._UZ(2,"img",2),i.TgZ(3,"h6",3),i._uU(4," ADDITIONAL_ACCOUNTS.IN_PROGRESS "),i.qZA()()),2&c&&(i.xp6(2),i.Q6J("src",v.src,i.LSH))},directives:[_.xr,Lt.Pi],styles:[".account-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.account-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media (min-width: 1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-amount--small[_ngcontent-%COMP%]{font-size:18px}@media (min-width: 1280px){.account-amount--small[_ngcontent-%COMP%]{font-size:18px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]{background:#fff;border-radius:12px;display:inline-flex;flex-direction:column;justify-content:space-between;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}.account-box-in-progress__icon[_ngcontent-%COMP%]{width:28px;height:28px}"]}),m})();var Pi=r(33770);function uo(m,K){if(1&m&&(i.ynx(0),i.TgZ(1,"div",1)(2,"div",2)(3,"span",3),i._uU(4),i.qZA(),i.TgZ(5,"div",4)(6,"div",5),i._uU(7),i.qZA(),i._UZ(8,"j-card-status",6),i.qZA()(),i._UZ(9,"img",7),i.qZA(),i.TgZ(10,"div",8),i._UZ(11,"img",9),i.TgZ(12,"h4",10),i._UZ(13,"j-money",11),i.qZA()(),i.BQk()),2&m){const c=i.oxw();i.xp6(4),i.hij(" ",c.card.alias||c.card.formattedName," "),i.xp6(3),i.Oqu(c.card.maskedNumber),i.xp6(1),i.Q6J("isSmall",!0)("status",c.card.status),i.xp6(5),i.Q6J("money",c.card.balance)}}let _o=(()=>{class m{constructor(){}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-card-box"]],inputs:{card:"card"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"account-header","p2"],[1,"card-iban-wrap"],[1,"card-iban","text-truncate"],[1,"d-flex"],[1,"text-muted","no-wrap"],[1,"no-wrap",3,"isSmall","status"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"],[1,"account-footer"],["src","/assets/img/home/card-chip.svg"],[1,"ml-3","account-amount"],[3,"money"]],template:function(c,v){1&c&&i.YNc(0,uo,14,5,"ng-container",0),2&c&&i.Q6J("ngIf",v.card)},directives:[a.O5,Pi.d,Qt.y],styles:[".account-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.account-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media (min-width: 1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-amount--small[_ngcontent-%COMP%]{font-size:18px}@media (min-width: 1280px){.account-amount--small[_ngcontent-%COMP%]{font-size:18px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]{background:#fff;border-radius:12px;display:inline-flex;flex-direction:column;justify-content:space-between;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}.card-iban[_ngcontent-%COMP%]{display:block}.card-iban-wrap[_ngcontent-%COMP%]{max-width:calc(100% - 1rem)}"]}),m})();var po=r(53145);function mo(m,K){1&m&&i._UZ(0,"j-account-migrated",11)}function go(m,K){if(1&m&&(i.TgZ(0,"div",7)(1,"div",8)(2,"span"),i._uU(3),i.qZA(),i.YNc(4,mo,1,0,"j-account-migrated",9),i.qZA(),i.TgZ(5,"small",10),i._uU(6),i.qZA()()),2&m){const c=i.oxw();i.xp6(3),i.Oqu(c.deposit.maskedIban),i.xp6(1),i.Q6J("ngIf",c.deposit.isMigrated),i.xp6(2),i.hij(" ",c.depositName," ")}}function fo(m,K){1&m&&i._UZ(0,"img",12)}let We=(()=>{class m{constructor(c,v,Q){this.translateService=c,this.maskedService=v,this.accountsService=Q,this.isRoutable=!0,this.subscription=new At.w,this.subscription.add(this.translateService.onLangChange.subscribe(()=>{this.mapDepositName()}))}ngOnInit(){this.mapDepositName()}get isLargeAmount(){var c;return(null===(c=this.deposit)||void 0===c?void 0:c.balance)&&this.maskedService.getMaskedAmount(this.deposit.balance.amount).length>16}mapDepositName(){this.depositName=this.accountsService.getDepositName(this.deposit)}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(Lt.sK),i.Y36(lt.O),i.Y36(po.iu))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-deposit-box"]],inputs:{deposit:"deposit",isRoutable:"isRoutable"},decls:7,vars:5,consts:[[1,"account-header"],["class","p2",4,"ngIf"],["src","/assets/icons/arrow-right.svg","class","account-arrow",4,"ngIf"],[1,"account-footer"],["inlineSVG","/assets/icons/v2/deposit-16.svg",1,"account-img","deposit-img"],[1,"account-amount"],[3,"money"],[1,"p2"],[1,"account__iban"],["class","ml-2",4,"ngIf"],[1,"text-muted"],[1,"ml-2"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,go,7,3,"div",1),i.YNc(2,fo,1,0,"img",2),i.qZA(),i.TgZ(3,"div",3),i._UZ(4,"span",4),i.TgZ(5,"h4",5),i._UZ(6,"j-money",6),i.qZA()()),2&c&&(i.xp6(1),i.Q6J("ngIf",v.deposit),i.xp6(1),i.Q6J("ngIf",v.isRoutable),i.xp6(3),i.ekj("account-amount--small",v.isLargeAmount),i.xp6(1),i.Q6J("money",v.deposit.balance))},directives:[a.O5,ut,an.d$,Qt.y],styles:[".account-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.account-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media (min-width: 1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-amount--small[_ngcontent-%COMP%]{font-size:18px}@media (min-width: 1280px){.account-amount--small[_ngcontent-%COMP%]{font-size:18px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]{background:#fff;border-radius:12px;display:inline-flex;flex-direction:column;justify-content:space-between;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}.deposit-img[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:#f2f2f7;border-radius:8px}"],changeDetection:0}),m})();function Oi(m,K){if(1&m&&(i.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"span"),i._uU(4),i.qZA(),i.TgZ(5,"div",10),i._uU(6),i.qZA()()()()),2&m){const c=i.oxw();i.xp6(4),i.Oqu(c.loan.productName),i.xp6(2),i.hij("\u2116 ",c.loan.colvirId,"")}}function qe(m,K){1&m&&i._UZ(0,"img",11)}let ho=(()=>{class m{constructor(){this.isRoutable=!0}ngOnInit(){}get balance(){return this.loan&&this.loan.amount}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-loan-box"]],inputs:{loan:"loan",isRoutable:"isRoutable"},decls:7,vars:3,consts:[[1,"account-header"],["class","p2",4,"ngIf"],["src","/assets/icons/arrow-right.svg","class","account-arrow",4,"ngIf"],[1,"account-footer"],["src","/assets/img/home/loan-percent.svg"],[1,"ml-3","account-amount"],[3,"money"],[1,"p2"],[1,"loan-iban-wrap"],[1,"account__iban"],[1,"text-muted","no-wrap"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,Oi,7,2,"div",1),i.YNc(2,qe,1,0,"img",2),i.qZA(),i.TgZ(3,"div",3),i._UZ(4,"img",4),i.TgZ(5,"h4",5),i._UZ(6,"j-money",6),i.qZA()()),2&c&&(i.xp6(1),i.Q6J("ngIf",v.loan),i.xp6(1),i.Q6J("ngIf",v.isRoutable),i.xp6(4),i.Q6J("money",v.balance))},directives:[a.O5,Qt.y],styles:["[_nghost-%COMP%]{background:#fff;border-radius:12px;display:inline-flex;flex-direction:column;justify-content:space-between;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}.account-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.account-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media (min-width: 1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:block}.loan-iban-wrap[_ngcontent-%COMP%]{max-width:calc(100% - 1rem)}"]}),m})();var To=r(35803),vo=r(34018);const Ii=function(){return{width:"95%",height:"158px","margin-top":"2rem","margin-right":"2.75rem","background-color":"#ECEEF1"}};function bi(m,K){1&m&&i._UZ(0,"ngx-skeleton-loader",3),2&m&&i.Q6J("theme",i.DdM(1,Ii))}const Mi=function(){return{width:"100px",height:"30px","margin-top":"2rem","background-color":"#ECEEF1"}},Co=function(){return{width:"285px",height:"145px","margin-right":"1rem","background-color":"#ECEEF1"}};function Ao(m,K){if(1&m&&(i.ynx(0),i.YNc(1,bi,1,2,"ngx-skeleton-loader",2),i._UZ(2,"ngx-skeleton-loader",3)(3,"br")(4,"ngx-skeleton-loader",4),i.BQk()),2&m){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",c.companyService.isPrimaryAuthority()&&c.showMainScreenPackage),i.xp6(1),i.Q6J("theme",i.DdM(3,Mi)),i.xp6(2),i.Q6J("theme",i.DdM(4,Co))}}function Di(m,K){if(1&m&&(i.ynx(0),i._UZ(1,"j-package-connected",11),i.BQk()),2&m){const c=i.oxw(3);i.xp6(1),i.Q6J("data",c.packageRest)}}function Ni(m,K){1&m&&(i.ynx(0),i._UZ(1,"j-package-not-connected"),i.BQk())}function ai(m,K){if(1&m&&(i.TgZ(0,"div",9),i.YNc(1,Di,2,1,"ng-container",10),i.YNc(2,Ni,2,0,"ng-container",10),i.qZA()),2&m){const c=i.oxw(2);i.Q6J("ngSwitch",c.packageResponseStatus),i.xp6(1),i.Q6J("ngSwitchCase","success"),i.xp6(1),i.Q6J("ngSwitchCase","not_found")}}function Ri(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-account-box",19),i.NdJ("click",function(){const St=i.CHM(c).$implicit;return i.oxw(3).navigateToAccount(St)}),i.qZA()}2&m&&i.Q6J("account",K.$implicit)}function Zi(m,K){1&m&&i._UZ(0,"j-account-box-in-progress",20),2&m&&i.Q6J("currencyCode",K.$implicit)}function si(m,K){if(1&m&&(i.TgZ(0,"div",21),i._uU(1),i.qZA()),2&m){const c=i.oxw(3);i.xp6(1),i.Oqu(c.accountsError)}}function yo(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"div",12)(2,"div",13),i._uU(3,"ACCOUNTS.REGULARS "),i.qZA(),i.TgZ(4,"j-open-additional-account",14),i.NdJ("added",function(){return i.CHM(c),i.oxw(2).loadAccountsInProgress()}),i.qZA()(),i.TgZ(5,"div",15),i.YNc(6,Ri,1,1,"j-account-box",16),i.YNc(7,Zi,1,1,"j-account-box-in-progress",17),i.ALo(8,"async"),i.YNc(9,si,2,1,"div",18),i.qZA(),i.BQk()}if(2&m){const c=i.oxw(2);i.xp6(6),i.Q6J("ngForOf",c.accounts),i.xp6(1),i.Q6J("ngForOf",i.lcZ(8,3,c.accountsInProgress)),i.xp6(2),i.Q6J("ngIf",c.accountsError)}}function Li(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-card-box",23),i.NdJ("click",function(){const St=i.CHM(c).$implicit;return i.oxw(3).navigateToCorporateCard(St)}),i.qZA()}2&m&&i.Q6J("card",K.$implicit)}function $e(m,K){if(1&m&&(i.TgZ(0,"div",21),i._uU(1),i.qZA()),2&m){const c=i.oxw(3);i.xp6(1),i.Oqu(c.cardsError)}}function Ui(m,K){if(1&m&&(i.TgZ(0,"div",6)(1,"div",13),i._uU(2,"ACCOUNTS.CARDS "),i.qZA(),i.TgZ(3,"div",15),i.YNc(4,Li,1,1,"j-card-box",22),i.YNc(5,$e,2,1,"div",18),i.qZA()()),2&m){const c=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",c.cards),i.xp6(1),i.Q6J("ngIf",c.cardsError)}}function Eo(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-deposit-box",26),i.NdJ("click",function(){const St=i.CHM(c).$implicit;return i.oxw(3).navigateToDeposit(St)}),i.qZA()}2&m&&i.Q6J("deposit",K.$implicit)}function ri(m,K){if(1&m&&(i.TgZ(0,"div",6)(1,"div",24),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",15),i.YNc(5,Eo,1,1,"j-deposit-box",25),i.qZA()()),2&m){const c=i.oxw(2);i.xp6(2),i.hij(" ",i.lcZ(3,2,"DEPOSITS.TITLE")," "),i.xp6(3),i.Q6J("ngForOf",c.deposits)}}function ki(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-loan-box",28),i.NdJ("click",function(){const St=i.CHM(c).$implicit;return i.oxw(3).navigateToLoan(St)}),i.qZA()}2&m&&i.Q6J("loan",K.$implicit)}function ci(m,K){if(1&m&&(i.TgZ(0,"div",6)(1,"div",13),i._uU(2,"ACCOUNTS.LOANS "),i.qZA(),i.TgZ(3,"div",15),i.YNc(4,ki,1,1,"j-loan-box",27),i.qZA()()),2&m){const c=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",c.loans)}}function xo(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-empty-placeholder",29),i.NdJ("retried",function(){return i.CHM(c),i.oxw(2).loadLists()}),i.qZA()}2&m&&i.Q6J("hasRetry",!0)}function wi(m,K){if(1&m&&(i.TgZ(0,"div"),i.YNc(1,ai,3,3,"div",5),i.TgZ(2,"div",6),i.YNc(3,yo,10,5,"ng-container",1),i.qZA(),i.YNc(4,Ui,6,2,"div",7),i.YNc(5,ri,6,4,"div",7),i.YNc(6,ci,5,1,"div",7),i.YNc(7,xo,1,1,"j-empty-placeholder",8),i.qZA()),2&m){const c=i.oxw();i.xp6(1),i.Q6J("ngIf",c.companyService.isPrimaryAuthority()&&c.showMainScreenPackage),i.xp6(2),i.Q6J("ngIf",(null==c.accounts?null:c.accounts.length)>0),i.xp6(1),i.Q6J("ngIf",(null==c.cards?null:c.cards.length)>0),i.xp6(1),i.Q6J("ngIf",(null==c.deposits?null:c.deposits.length)>0),i.xp6(1),i.Q6J("ngIf",(null==c.loans?null:c.loans.length)>0),i.xp6(1),i.Q6J("ngIf",0==(null==c.accounts?null:c.accounts.length)&&0==(null==c.cards?null:c.cards.length)&&0==(null==c.deposits?null:c.deposits.length)&&0==(null==c.loans?null:c.loans.length))}}function li(m,K){1&m&&i._UZ(0,"j-exchange-rates")}let He=(()=>{class m{constructor(c,v,Q,St,rn,En,ie,Un,Ne,Fo){this.companyService=c,this.accountsService=v,this.cardsService=Q,this.loanService=St,this.router=rn,this.route=En,this.authService=ie,this.featureFlagsService=Un,this.additionalAccountsService=Ne,this.packageRequestsService=Fo,this.accountsError="",this.cardsError="",this.subscription=new At.w,this.isAccountsLoading=!1,this.pendingCardRequest=null,this.pendingLoanRequest=null,this.pendingAccountsRequest=null,this.isExchangeRatesVisible=!1,this.isLoansVisible=!1,this.showMainScreenPackage=!1,this.getExchangeRatesFlag()}getExchangeRatesFlag(){this.isExchangeRatesVisible=!this.featureFlagsService.isDisabled(M.Y.CURRENCY_RATES),this.isLoansVisible=!this.featureFlagsService.isDisabled(M.Y.LOANS_VIEW),this.subscription.add(this.featureFlagsService.featureFlags$.subscribe(c=>{var v,Q;this.isExchangeRatesVisible=!0===(null===(v=c.find(St=>St.key===M.Y.CURRENCY_RATES))||void 0===v?void 0:v.active)||!1,this.isLoansVisible=!0===(null===(Q=c.find(St=>St.key===M.Y.LOANS_VIEW))||void 0===Q?void 0:Q.active)||!1,this.isLoansVisible&&this.loadLoans(),this.showMainScreenPackage=!this.featureFlagsService.isDisabled(M.Y.PACKAGES_MAIN_SCREEN)}))}ngOnInit(){this.accountsStore=this.accountsService.store,this.accountsStore.items$.subscribe(c=>{this.accountsError="",this.mapAccountsAndDeposits(c)},c=>{this.accountsError=c.desciption||c.code||c}),this.subscription.add(this.companyService.refresh$.pipe((0,B.h)(([,c,v])=>v)).subscribe(c=>{this.loadLists();const[,v,Q]=c;this.companyId=null==v?void 0:v.companyId,this.getPackageRest()}))}ngOnDestroy(){this.subscription.unsubscribe()}mapAccountsAndDeposits(c){this.applyMigratedAccountsRule(c),this.accounts=c.filter(v=>v.accountType===Zt.Q5.ACCOUNT),this.deposits=c.filter(v=>v.accountType===Zt.Q5.DEPOSIT),this.accounts.filter(v=>v.hasAtfIban).length>0?this.applyFirstAtfAccountsRule(this.accounts):this.deposits.filter(v=>v.hasAtfIban).length>0&&this.applyFirstAtfAccountsRule(this.deposits)}loadLists(){return(0,vt.mG)(this,void 0,void 0,function*(){this.isLoansVisible&&this.loadLoans(),this.loadCards(),this.loadAccountsInProgress()})}loadAccountsInProgress(){this.accountsInProgress=this.additionalAccountsService.getAdditionalAccountsInProgress()}loadAccountsAndDeposits(){return(0,vt.mG)(this,void 0,void 0,function*(){this.accounts=null,this.deposits=null,this.isAccountsLoading=!0;try{const c=yield this.accountsService.getAccounts(this.companyService.currentId);this.applyMigratedAccountsRule(c),this.accounts=c.filter(v=>v.accountType===Zt.Q5.ACCOUNT),this.deposits=c.filter(v=>v.accountType===Zt.Q5.DEPOSIT),this.accounts.filter(v=>v.hasAtfIban).length>0?this.applyFirstAtfAccountsRule(this.accounts):this.deposits.filter(v=>v.hasAtfIban).length>0&&this.applyFirstAtfAccountsRule(this.deposits)}catch(c){this.accountsError=c.desciption||c.code||c}finally{this.isAccountsLoading=!1}})}navigateToAccount(c){this.router.navigate([`/accounts/${c.iban}`],{relativeTo:this.route})}navigateToDeposit(c){this.router.navigate([`/deposits/${c.iban}`],{relativeTo:this.route})}navigateToCorporateCard(c){this.router.navigate([`/cards/${c.cardId}`])}get accounts$(){return this.accountsStore.items$.pipe((0,k.U)(c=>c.filter(v=>v.accountType===Zt.Q5.ACCOUNT)))}applyFirstAtfAccountsRule(c){c.find(v=>v.hasAtfIban).isFirstAtfInTheList=!0}applyMigratedAccountsRule(c){c.find(v=>v.isMigrated)&&this.accountsService.retrieveMergeDate()}loadCards(){this.pendingCardRequest&&this.pendingCardRequest.unsubscribe(),this.cards=null,this.pendingCardRequest=this.cardsService.getCorporateCardsAsObservable().subscribe(c=>{this.cards=c.filter(v=>v.category===kt.kk.COMMERCIAL),this.pendingCardRequest=null})}loadLoans(){this.pendingLoanRequest&&this.pendingLoanRequest.unsubscribe(),this.loans=null,this.pendingLoanRequest=this.loanService.getLoansAsObservable().subscribe(c=>{this.loans=c,this.pendingLoanRequest=null})}navigateToLoan(c){this.router.navigate([`/loans/${c.id}`])}getPackageRest(){this.packageResponseStatus=Yt.TV.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(c=>{var v;this.packageRest=c,this.packageResponseStatus=(null===(v=this.packageRest)||void 0===v?void 0:v.totalCost)?Yt.TV.Success:Yt.TV.NotFound})}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(Y.J),i.Y36(Zt.iu),i.Y36(H.d),i.Y36(at.B),i.Y36(F.F0),i.Y36(F.gz),i.Y36(U.e),i.Y36(M.a),i.Y36(ht),i.Y36(_t.F))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-accounts-list"]],decls:5,vars:3,consts:[[1,"accounts-block"],[4,"ngIf"],[3,"theme",4,"ngIf"],[3,"theme"],["count","2",3,"theme"],["class","package-wrap",3,"ngSwitch",4,"ngIf"],[1,"accounts-wrap"],["class","accounts-wrap",4,"ngIf"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried",4,"ngIf"],[1,"package-wrap",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"data"],[1,"d-flex","align-items-baseline"],["translate","",1,"accounts-heading"],[3,"added"],[1,"accounts-list"],[3,"account","click",4,"ngFor","ngForOf"],[3,"currencyCode",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],[3,"account","click"],[3,"currencyCode"],[1,"alert","alert-danger"],[3,"card","click",4,"ngFor","ngForOf"],[3,"card","click"],[1,"accounts-heading"],[3,"deposit","click",4,"ngFor","ngForOf"],[3,"deposit","click"],[3,"loan","click",4,"ngFor","ngForOf"],[3,"loan","click"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"div"),i.YNc(2,Ao,5,5,"ng-container",1),i.YNc(3,wi,8,6,"div",1),i.qZA(),i.YNc(4,li,1,0,"j-exchange-rates",1),i.qZA()),2&c&&(i.xp6(2),i.Q6J("ngIf",v.accountsStore.fetching),i.xp6(1),i.Q6J("ngIf",!v.accountsStore.fetching),i.xp6(1),i.Q6J("ngIf",v.isExchangeRatesVisible))},directives:[a.O5,_.xr,a.RF,a.n9,It,ln,Lt.Pi,Oe,a.sg,co,lo,_o,We,ho,To.j,vo.G],pipes:[a.Ov,Lt.X$],styles:[".accounts-block[_ngcontent-%COMP%]{display:grid;grid-row-gap:1rem;row-gap:1rem}@media (min-width: 670px){.accounts-block[_ngcontent-%COMP%]{grid-template-columns:1fr 295px}}.package-wrap[_ngcontent-%COMP%]{margin:0 2.75rem 0 0}.accounts-wrap[_ngcontent-%COMP%]{margin:2rem 0}.accounts-heading[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-bottom:1rem}.accounts-list[_ngcontent-%COMP%]{min-height:145px;position:relative}.deposit-item[_ngcontent-%COMP%]{cursor:default!important}"]}),m})();var Sn=r(41777),Fi=r(54103),Bi=r(99430),Gi=r(16831),ji=r(77337),Yi=r(194),Ji=r(36290);let di=(()=>{class m{constructor(){}prepareRoute(c){return c&&c.activatedRouteData&&c.activatedRouteData.animation}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-home"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"]],template:function(c,v){1&c&&(i.TgZ(0,"j-layout-home")(1,"j-aside"),i._UZ(2,"j-nav-main"),i.qZA(),i.TgZ(3,"j-main")(4,"section",0)(5,"section",1),i._UZ(6,"j-header")(7,"router-outlet"),i.qZA()()()())},directives:[Bi.Y,Gi.l,ji.F,Yi.C,Ji.G,F.lC],styles:[""],encapsulation:2,data:{animation:[(0,Sn.X$)("routeAnimations",[(0,Sn.eR)("* => slideRouteAnimations",(0,Sn._7)(Fi._w))])]}}),m})();var So=r(72986),Ki=r(43474),Po=r(41359),ui=r(80457),na=r(67515),Qi=r(17687),Oo=r(19204),Io=r(77501),_i=r(79311),bo=r(94114),Mo=r(61459),Do=r(36336),No=r(31475),Wi=r(19208),y=r(66013),z=r(70805);function p(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"div")(1,"div",17)(2,"div",3),i._UZ(3,"div",18),i.TgZ(4,"button",5),i.NdJ("loaded",function(Q){return i.CHM(c),i.oxw().onAccountLoad(Q)})("failed",function(){return i.CHM(c),i.oxw().onAccountFail()})("click",function(Q){return i.CHM(c),i.oxw().onQrService(Q)}),i._UZ(5,"span",6)(6,"span",7),i.qZA()(),i._UZ(7,"img",8),i.qZA()()}2&m&&(i.xp6(5),i.Q6J("inlineSVG","assets/icons/account/print.svg"))}function R(m,K){1&m&&(i.TgZ(0,"h6",19),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&m&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"ACCOUNTS.REQUISITES.LIST_TITLE")))}function ct(m,K){if(1&m&&(i.TgZ(0,"div",20)(1,"div",21),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",22),i._uU(5),i.qZA()()),2&m){const c=K.$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,2,c.label),": "),i.xp6(3),i.hij(" ",c.value," ")}}function Dt(m,K){if(1&m&&(i.TgZ(0,"div",20)(1,"div",21),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",22),i._uU(5),i.qZA()()),2&m){const c=K.$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,2,c.label),": "),i.xp6(3),i.hij(" ",c.value," ")}}function In(m,K){if(1&m&&(i.TgZ(0,"div",23)(1,"h6",19),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.YNc(4,Dt,6,4,"div",10),i.qZA()),2&m){const c=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,2,"ACCOUNTS.REQUISITES.LIST_OLD_TITLE")),i.xp6(2),i.Q6J("ngForOf",c.oldList)}}let Ce=(()=>{class m{constructor(c,v,Q,St,rn,En,ie,Un,Ne){this.companyService=c,this.bankFromAccount=v,this.maskPipe=Q,this.formatIban=St,this.translateService=rn,this.notifierService=En,this.accountsService=ie,this.filesService=Un,this.featureFlagsService=Ne,this.isLoaded=!1,this.knp="",this.isQrVisible=!1,this.subscription=new At.w}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.generateList(),this.generateOldList(),this.generateTextToCopy(),this.isLoaded=!0,this.initFeatureFlagsSubscription()}get hasAtfIban(){var c;return(null===(c=this.account)||void 0===c?void 0:c.hasAtfIban)||!1}onAccountLoad(c){this.init(c)}onAccountFail(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}onCopy(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}onDownload(){return(0,vt.mG)(this,void 0,void 0,function*(){try{const c=yield this.accountsService.getPdf(this.companyService.currentId,this.account.iban);this.filesService.downloadFile(c,`${this.account.iban}.pdf`)}catch(c){console.error(c)}})}generateList(){var c,v,Q,St;this.list=[{label:this.appendTranslationPrefix("COMPANY"),value:this.companyService.currentCompany.name},{label:this.appendTranslationPrefix("IIN"),valueToCopy:this.companyService.currentCompany.bin,value:this.maskPipe.transform(this.companyService.currentCompany.bin,No.K.iin.mask)},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),valueToCopy:null===(c=this.account)||void 0===c?void 0:c.iban,value:this.formatIban.transform(null===(v=this.account)||void 0===v?void 0:v.iban)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(null===(Q=this.account)||void 0===Q?void 0:Q.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(null===(St=this.account)||void 0===St?void 0:St.iban,"bic")}]}generateOldList(){var c;const v=null===(c=this.account)||void 0===c?void 0:c.alterCode;this.oldList=[{label:this.appendTranslationPrefix("IBAN"),valueToCopy:v,value:this.formatIban.transform(v)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(v,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(v,"bic")}]}generateTextToCopy(){this.textToCopy=this.list.map(c=>{if(c.value||c.valueToCopy)return`${this.translateService.instant(c.label)}: ${c.valueToCopy||c.value}`}).join("\n")}appendTranslationPrefix(c){return`ACCOUNTS.REQUISITES.${c}`}init(c){return(0,vt.mG)(this,void 0,void 0,function*(){this.account=c,this.generateRequisites(),this.generateTextToCopy(),this.isLoaded=!0})}loadQr(){return(0,vt.mG)(this,void 0,void 0,function*(){const c=this.companyService.currentCompany.kod;this.qrFile=yield this.accountsService.getQrPrint(this.account.id,this.account.iban,c,this.knp)})}onQrService(c){c.preventDefault(),this.knp="859",this.loadQr(),this.filesService.downloadFile(this.qrFile,`${this.companyService.currentCompany.shortName} \n      ${this.translateService.instant(this.appendTranslationPrefix("QR.PRINT_SERVICE"))}.jpg`)}onQrProduct(c){c.preventDefault(),this.knp="710",this.loadQr(),this.filesService.downloadFile(this.qrFile,`${this.companyService.currentCompany.shortName} \n      ${this.translateService.instant(this.appendTranslationPrefix("QR.PRINT_PRODUCT"))}`)}initFeatureFlagsSubscription(){this.featureFlagsService.featureFlags$.subscribe(()=>{var c,v;this.isQrVisible=!this.featureFlagsService.isDisabled(M.Y.ACCOUNT_QR)&&"ACCOUNT"===this.account.accountType&&(null===(c=this.account.balance)||void 0===c?void 0:c.currency)&&"KZT"===(null===(v=this.account.balance)||void 0===v?void 0:v.currency)})}generateRequisites(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.account.iban},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.account.iban),valueToCopy:this.account.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.account.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.account.iban,"bic")}]}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(Y.J),i.Y36(Wi.vI),i.Y36(e.Iq),i.Y36(Wi.OX),i.Y36(Lt.sK),i.Y36(y.lG),i.Y36(Zt.iu),i.Y36(Qi.n),i.Y36(M.a))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-requisites"]],inputs:{account:"account"},decls:22,vars:8,consts:[[1,"info","mb-3"],[4,"ngIf"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.PRODUCT"],[1,"btn","btn-link","qr__print","p3",3,"loaded","failed","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","/assets/img/cards/qr.png",1,"qr__img"],["class","mb-3",4,"ngIf"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],["class","info",4,"ngIf"],[1,"qr","mb-4"],["translate","ACCOUNTS.REQUISITES.QR.SERVICE"],[1,"mb-3"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],[1,"info"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0),i.YNc(1,p,8,1,"div",1),i.TgZ(2,"div",2)(3,"div",3),i._UZ(4,"div",4),i.TgZ(5,"button",5),i.NdJ("loaded",function(St){return v.onAccountLoad(St)})("failed",function(){return v.onAccountFail()})("click",function(St){return v.onQrProduct(St)}),i._UZ(6,"span",6)(7,"span",7),i.qZA()(),i._UZ(8,"img",8),i.qZA()(),i.TgZ(9,"div",0),i.YNc(10,R,3,3,"h6",9),i.YNc(11,ct,6,4,"div",10),i.TgZ(12,"div",11)(13,"button",12),i.NdJ("click",function(){return v.onDownload()}),i._UZ(14,"div",13),i.TgZ(15,"strong",14),i._uU(16,"ACCOUNTS.REQUISITES.DOWNLOAD"),i.qZA()(),i.TgZ(17,"button",15),i.NdJ("click",function(){return v.onCopy()}),i._UZ(18,"div",13),i.TgZ(19,"strong",14),i._uU(20,"ACCOUNTS.REQUISITES.COPY"),i.qZA()()()(),i.YNc(21,In,5,4,"div",16)),2&c&&(i.xp6(1),i.Q6J("ngIf",v.isQrVisible),i.xp6(5),i.Q6J("inlineSVG","assets/icons/account/print.svg"),i.xp6(4),i.Q6J("ngIf",v.hasAtfIban),i.xp6(1),i.Q6J("ngForOf",v.list),i.xp6(3),i.Q6J("inlineSVG","assets/icons/account/pdf.svg"),i.xp6(3),i.Q6J("cbContent",v.textToCopy),i.xp6(1),i.Q6J("inlineSVG","assets/icons/account/copy.svg"),i.xp6(3),i.Q6J("ngIf",v.hasAtfIban))},directives:[a.O5,Lt.Pi,an.d$,a.sg,z.yb],pipes:[Lt.X$],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:center;min-width:calc(50% - .5rem)}.qr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:inline-flex;align-items:center;margin-top:.5rem;padding:0;transform:none}.qr__print[_ngcontent-%COMP%]:hover{transform:none;color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}.requisites__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),m})();var le=r(46507),Ie=r(8491),vn=r(46755),pi=r(50235),be=r(85814);function mi(m,K){if(1&m&&(i.TgZ(0,"div",18),i._UZ(1,"input",19),i.TgZ(2,"label",20),i._uU(3),i.qZA()()),2&m){const c=K.$implicit;i.xp6(1),i.Q6J("id",c.id)("value",c.value),i.xp6(1),i.Q6J("for",c.id),i.xp6(1),i.Oqu(c.label)}}function gi(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"a",24),i.NdJ("click",function(Q){i.CHM(c);const St=i.oxw().index;return i.oxw(2).deleteEmail(Q,St)}),i.qZA()}2&m&&i.Q6J("inlineSVG","assets/icons/shared/delete.svg")}function wn(m,K){if(1&m&&(i.TgZ(0,"div",21),i._UZ(1,"j-input",22),i.ALo(2,"translate"),i.ALo(3,"translate"),i.YNc(4,gi,1,1,"a",23),i.qZA()),2&m){const c=K.$implicit,v=K.index,Q=i.oxw(2);i.xp6(1),i.Q6J("label",i.lcZ(2,6,"ACCOUNTS.EXPORT.EMAIL.TITLE"))("name","exportEmail"+v)("formControl",c)("errorText",i.lcZ(3,8,Q.mapEmailErrorText(c.errors)))("hasError",c.errors&&Q.isSubmitted),i.xp6(3),i.Q6J("ngIf",v>0)}}function fi(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"a",25),i.NdJ("click",function(Q){return i.CHM(c),i.oxw(2).addEmail(Q)}),i._uU(1," ACCOUNTS.EXPORT.EMAIL.ADD "),i.qZA()}}function qi(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"form",1)(1,"div",2),i._UZ(2,"j-switch",3),i.TgZ(3,"span",4)(4,"strong",5),i._uU(5),i.qZA(),i._UZ(6,"br"),i.TgZ(7,"small",6),i._uU(8),i.qZA()()(),i.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"strong",10),i._uU(13,"ACCOUNTS.EXPORT.FILE_FORMAT"),i.qZA(),i.TgZ(14,"div",11),i.YNc(15,mi,4,4,"div",12),i.qZA()(),i.TgZ(16,"div",9)(17,"strong",10),i._uU(18,"ACCOUNTS.EXPORT.EMAIL.TITLE"),i.qZA(),i.TgZ(19,"div",13),i._uU(20," ACCOUNTS.EXPORT.EMAIL.DESCRIPTION "),i.qZA(),i.YNc(21,wn,5,10,"div",14),i.YNc(22,fi,2,0,"a",15),i.qZA(),i.TgZ(23,"div",16)(24,"button",17),i.NdJ("click",function(){return i.CHM(c),i.oxw().onSubmit()}),i._uU(25,"SHARED.SAVE"),i.qZA()()()()()}if(2&m){const c=i.oxw();i.Q6J("formGroup",c.subscriptionForm),i.xp6(5),i.Oqu(c.title),i.xp6(3),i.Oqu(c.description),i.xp6(1),i.Q6J("@smoothCollapse",c.isCollapsed?"final":"initial"),i.xp6(6),i.Q6J("ngForOf",c.fileTypes),i.xp6(6),i.Q6J("ngForOf",c.emailControls),i.xp6(1),i.Q6J("ngIf",c.emailControls.length<3),i.xp6(2),i.Q6J("disabled",c.isLoading)("jLoading",c.isLoading)}}let $i=(()=>{class m{constructor(){this.deleted=new i.vpe,this.submitted=new i.vpe,this.isSubmitted=!1,this.fileTypes=[{label:"PDF",value:"PDF",id:(0,Ie.generateUniqueId)()},{label:"EXL",value:"XLSX",id:(0,Ie.generateUniqueId)()},{label:"1C",value:"ONE_C",id:(0,Ie.generateUniqueId)()},{label:"XML",value:"XML",id:(0,Ie.generateUniqueId)()},{label:"MT940",value:"MT940",id:(0,Ie.generateUniqueId)()}],this.FORM_DEFAULTS={enabled:!1,id:null,emails:[""],exportType:le.Yg.PDF}}ngOnChanges(c){var v,Q,St,rn,En,ie;c.isLoading&&(c.isLoading.currentValue?null===(v=this.subscriptionForm)||void 0===v||v.disable():null===(Q=this.subscriptionForm)||void 0===Q||Q.enable()),c.savedSubscription&&(null===(St=this.subscriptionForm)||void 0===St||St.patchValue({id:(null===(rn=this.savedSubscription)||void 0===rn?void 0:rn.id)||this.f.id.value||this.FORM_DEFAULTS.id,emails:(null===(En=this.savedSubscription)||void 0===En?void 0:En.emails)||this.f.emails.value||this.FORM_DEFAULTS.emails,exportType:(null===(ie=this.savedSubscription)||void 0===ie?void 0:ie.exportType)||this.f.exportType.value||this.FORM_DEFAULTS.exportType}))}ngOnInit(){var c,v,Q,St;const rn={enabled:!!(null===(c=this.savedSubscription)||void 0===c?void 0:c.id),id:(null===(v=this.savedSubscription)||void 0===v?void 0:v.id)||this.FORM_DEFAULTS.id,emails:(null===(Q=this.savedSubscription)||void 0===Q?void 0:Q.emails)||this.FORM_DEFAULTS.emails,exportType:(null===(St=this.savedSubscription)||void 0===St?void 0:St.exportType)||this.FORM_DEFAULTS.exportType};this.subscriptionForm=new t.cw({switch:new t.NI(rn.enabled),id:new t.NI(rn.id),emails:new t.Oe(rn.emails.map(En=>new t.NI(En,[t.kI.email,t.kI.required]))),exportType:new t.NI(rn.exportType)}),this.isLoading&&this.subscriptionForm.disable(),this.subscriptionForm.valueChanges.subscribe(En=>{this.isSubmitted=!1,0==En.switch&&(this.deleted.emit(this.f.id.value),this.clearFormArray(this.f.emails),this.subscriptionForm.reset(this.FORM_DEFAULTS))})}onSubmit(){this.isSubmitted=!0,!this.subscriptionForm.invalid&&this.submitted.emit(this.subscriptionForm.getRawValue())}addEmail(c){c.preventDefault(),!this.isLoading&&3!=this.emailControls.length&&(this.isSubmitted=!1,this.emailControls.push(new t.NI("",[t.kI.email,t.kI.required])))}deleteEmail(c,v){c.preventDefault(),!this.isLoading&&this.emailControls.splice(v,1)}mapEmailErrorText(c){return(null==c?void 0:c.email)?"ERRORS.WRONG_FORMAT":null}clearFormArray(c){for(;1!==c.length;)c.removeAt(0)}get isCollapsed(){var c,v,Q;return 1==(null===(Q=null===(v=null===(c=this.subscriptionForm)||void 0===c?void 0:c.controls)||void 0===v?void 0:v.switch)||void 0===Q?void 0:Q.value)}get emailControls(){return this.f.emails.controls}get f(){var c;return null===(c=this.subscriptionForm)||void 0===c?void 0:c.controls}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-subscription"]],inputs:{title:"title",isLoading:"isLoading",description:"description",savedSubscription:"savedSubscription"},outputs:{deleted:"deleted",submitted:"submitted"},features:[i.TTD],decls:1,vars:1,consts:[["class","export",3,"formGroup",4,"ngIf"],[1,"export",3,"formGroup"],[1,"export__header"],["formControlName","switch"],[1,"ml-3"],["translate",""],["translate","",1,"text-gray"],[1,"export__body"],[1,"export__form"],[1,"form-group"],["translate","",1,"export__label","p2"],[1,"export__types"],["class","export__radio",4,"ngFor","ngForOf"],["translate","",1,"p3","text-muted","export__description"],["class","export__email",4,"ngFor","ngForOf"],["href","#","class","export__add-email link-blue","translate","",3,"click",4,"ngIf"],[1,"export__submit"],["type","submit","translate","",1,"btn","btn-primary",3,"disabled","jLoading","click"],[1,"export__radio"],["type","radio","formControlName","exportType","name","exportType",3,"id","value"],[1,"btn","btn-sm",3,"for"],[1,"export__email"],[3,"label","name","formControl","errorText","hasError"],["href","#","class","export__delete-email",3,"inlineSVG","click",4,"ngIf"],["href","#",1,"export__delete-email",3,"inlineSVG","click"],["href","#","translate","",1,"export__add-email","link-blue",3,"click"]],template:function(c,v){1&c&&i.YNc(0,qi,26,9,"form",0),2&c&&i.Q6J("ngIf",v.subscriptionForm)},directives:[a.O5,t._Y,t.JL,t.sg,vn.q,t.JJ,t.u,Lt.Pi,a.sg,t._,t.Fj,pi.N,t.oH,an.d$,be.T],pipes:[Lt.X$],styles:[".export[_ngcontent-%COMP%]{margin:.5rem 0 1rem;background:#fff;border-radius:.75rem}.export__header[_ngcontent-%COMP%]{padding:1rem;display:flex;align-items:center}.export__body[_ngcontent-%COMP%]{padding:0 1rem;border-top:1px solid #eceef1}.export__types[_ngcontent-%COMP%]{display:flex}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff;background-color:#474b52;border-color:#474b52;box-shadow:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover{color:#fff;background-color:#35383e;border-color:#2f3237}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.focus[_ngcontent-%COMP%]{color:#fff;background-color:#35383e;border-color:#2f3237;box-shadow:0 0 0 .0625rem #63666c80}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#474b52;border-color:#474b52}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#2f3237;border-color:#292c30}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem #63666c80}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:active{transform:scale(1);color:#fff!important}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#212529;background-color:#fff;border-color:#d6dadf;margin-right:.5rem;margin-bottom:0;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;color:#666c72;height:35px;position:relative}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#212529;background-color:#ececec;border-color:#b9c0c9}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label.focus[_ngcontent-%COMP%]{color:#212529;background-color:#ececec;border-color:#b9c0c9;box-shadow:0 0 0 .0625rem #bbbfc480}.export__radio[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#fff;border-color:#d6dadf}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#e6e6e6;border-color:#b2bac3}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem #bbbfc480}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:active{color:#666c72!important;transform:scale(1)}.export__form[_ngcontent-%COMP%]{padding-top:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%] + .form-group[_ngcontent-%COMP%]{margin-top:1.5rem}.export__label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.export__description[_ngcontent-%COMP%]{margin-bottom:1rem}.export__add-email[_ngcontent-%COMP%]{position:relative;top:-.5rem}.export__delete-email[_ngcontent-%COMP%]{color:#b7bec5;margin:0 1rem 1rem}.export__delete-email[_ngcontent-%COMP%]:hover{color:#ef5630}.export__email[_ngcontent-%COMP%]{display:flex;align-items:center}.export__email[_ngcontent-%COMP%]   j-input[_ngcontent-%COMP%]{width:100%}.export__submit[_ngcontent-%COMP%]{padding:1rem 0;display:flex;justify-content:flex-end}"],data:{animation:[(0,Sn.X$)("smoothCollapse",[(0,Sn.SB)("initial",(0,Sn.oB)({height:"0",overflow:"hidden",opacity:"0"})),(0,Sn.SB)("final",(0,Sn.oB)({overflow:"hidden",opacity:"1"})),(0,Sn.eR)("initial=>final",(0,Sn.jt)("300ms")),(0,Sn.eR)("final=>initial",(0,Sn.jt)("300ms"))])]}}),m})();function Hi(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"j-account-subscription",1),i.NdJ("deleted",function(Q){return i.CHM(c),i.oxw().onDeleteDaily(Q)})("submitted",function(Q){return i.CHM(c),i.oxw().onDailySubmit(Q)}),i.qZA(),i.TgZ(2,"j-account-subscription",1),i.NdJ("deleted",function(Q){return i.CHM(c),i.oxw().onDeleteMonthly(Q)})("submitted",function(Q){return i.CHM(c),i.oxw().onMonthlySubmit(Q)}),i.qZA(),i.BQk()}if(2&m){const c=i.oxw();i.xp6(1),i.Q6J("title","ACCOUNTS.EXPORT.DAILY.TITLE")("description","ACCOUNTS.EXPORT.DAILY.DESCRIPTION")("savedSubscription",c.dailySubscription)("isLoading",c.isDailyLoading),i.xp6(1),i.Q6J("title","ACCOUNTS.EXPORT.MONTHLY.TITLE")("description","ACCOUNTS.EXPORT.MONTHLY.DESCRIPTION")("savedSubscription",c.monthlySubscription)("isLoading",c.isMonthlyLoading)}}let ea=(()=>{class m{constructor(c,v,Q){this.accountSubscriptionService=c,this.notifierService=v,this.translateService=Q,this.loaded=!1,this.isDailyLoading=!0,this.isMonthlyLoading=!0}ngOnInit(){this.init()}init(){return(0,vt.mG)(this,void 0,void 0,function*(){const c=yield this.accountSubscriptionService.getSubscriptions(this.account.id);this.dailySubscription=c.find(v=>v.subscriptionType===le.US.DAILY)||null,this.monthlySubscription=c.find(v=>v.subscriptionType===le.US.MONTHLY)||null,this.isDailyLoading=!1,this.isMonthlyLoading=!1,this.loaded=!0})}onDailySubmit(c){return(0,vt.mG)(this,void 0,void 0,function*(){this.isDailyLoading=!0;try{this.dailySubscription=yield this.submitSubscription(c,le.US.DAILY),this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.SUBSCRIBED"))}catch(v){this.notifierService.notify("error",v.description||v.code)}finally{this.isDailyLoading=!1}})}onMonthlySubmit(c){return(0,vt.mG)(this,void 0,void 0,function*(){this.isMonthlyLoading=!0;try{this.monthlySubscription=yield this.submitSubscription(c,le.US.MONTHLY),this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.SUBSCRIBED"))}catch(v){this.notifierService.notify("error",v.description||v.code)}finally{this.isMonthlyLoading=!1}})}onDeleteDaily(c){return(0,vt.mG)(this,void 0,void 0,function*(){if(!this.isDailyLoading){this.isDailyLoading=!0;try{yield this.deleteSubscription(c),this.dailySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.UNSUBSCRIBED"))}catch(v){this.notifierService.notify("error",v.description||v.code)}finally{this.isDailyLoading=!1}}})}onDeleteMonthly(c){return(0,vt.mG)(this,void 0,void 0,function*(){if(!this.isMonthlyLoading){this.isMonthlyLoading=!0;try{yield this.deleteSubscription(c),this.monthlySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.UNSUBSCRIBED"))}catch(v){this.notifierService.notify("error",v.description||v.code)}finally{this.isMonthlyLoading=!1}}})}deleteSubscription(c){if(c)return this.accountSubscriptionService.deleteSubscription(this.account.id,c)}submitSubscription(c,v){const Q={accountId:this.account.id,emails:c.emails,exportType:c.exportType,subscriptionType:v};return c.id?this.accountSubscriptionService.saveSubscription(Q,c.id):this.accountSubscriptionService.createSubscription(Q)}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(le.Jx),i.Y36(y.lG),i.Y36(Lt.sK))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-export"]],inputs:{account:"account"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","description","savedSubscription","isLoading","deleted","submitted"]],template:function(c,v){1&c&&i.YNc(0,Hi,3,8,"ng-container",0),2&c&&i.Q6J("ngIf",v.loaded)},directives:[a.O5,$i],styles:[""]}),m})();function ia(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"div",9),i._UZ(1,"div")(2,"div"),i.TgZ(3,"div")(4,"span",10),i._uU(5,"ACCOUNTS.SETTINGS.LIMIT_ALL"),i.qZA()(),i.TgZ(6,"j-switch",11),i.NdJ("change",function(Q){return i.CHM(c),i.oxw().onChangeAll(Q)}),i.qZA()()}if(2&m){const c=i.oxw();i.xp6(6),i.Q6J("value",c.isAllSelected)}}function Jn(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"div",12)(1,"div",13),i._uU(2),i.qZA(),i.TgZ(3,"div",14),i._uU(4),i.qZA(),i.TgZ(5,"div",13)(6,"span"),i._uU(7),i.qZA(),i.TgZ(8,"small",15)(9,"span",16),i._uU(10),i.qZA(),i._uU(11," \u2022 "),i.TgZ(12,"span",16),i._uU(13),i.qZA()()(),i.TgZ(14,"j-switch",11),i.NdJ("change",function(Q){const rn=i.CHM(c).$implicit;return i.oxw().onChange(Q,rn)}),i.qZA()()}if(2&m){const c=K.$implicit,v=K.index,Q=i.oxw();i.xp6(2),i.Oqu(v+1),i.xp6(1),i.Tol(c.color),i.xp6(1),i.hij(" ",c.initials," "),i.xp6(3),i.lnq("",c.lastname||""," ",c.firstname||""," ",c.middlename||"",""),i.xp6(3),i.Oqu(c.role),i.xp6(3),i.Oqu(c.sign),i.xp6(1),i.Q6J("value",c.accountGrantType===Q.grants.UNAVAILABLE)}}function Ha(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"div",17),i._uU(2,"ACCOUNTS.SETTINGS.GRANTS_LOADING_ERROR"),i.qZA(),i.TgZ(3,"button",18),i.NdJ("click",function(){return i.CHM(c),i.oxw().getAccountGrants()}),i._uU(4,"SHARED.REFRESH"),i.qZA(),i.BQk()}}function Hn(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"div",17),i._uU(2,"ACCOUNTS.SETTINGS.NO_GRANTABLE_USERS"),i.qZA(),i.TgZ(3,"button",18),i.NdJ("click",function(){return i.CHM(c),i.oxw().modal.dismiss()}),i._uU(4,"SHARED.CLOSE"),i.qZA(),i.BQk()}}let Xa=(()=>{class m{constructor(c,v,Q,St){this.modal=c,this.accountsService=v,this.notifierService=Q,this.translateService=St,this.error=null,this.grants=Zt.X7}ngOnInit(){this.getAccountGrants()}getAccountGrants(){return(0,vt.mG)(this,void 0,void 0,function*(){try{this.users=yield this.accountsService.getAccountsGrants(this.companyId,this.accountId)}catch(c){this.error="error"}})}onChange(c,v){return(0,vt.mG)(this,void 0,void 0,function*(){try{v.accountGrantType=this.getGrantType(c.target.value),yield this.accountsService.setAccountGrant(this.companyId,this.accountId,[this.mapParams(v,v.accountGrantType)]),this.showNotificationForUser(v),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId)}catch(Q){this.notifierService.notify("error",Q.description||Q.code||this.translateService.instant("SHARED.ACTION_ERROR"))}})}onChangeAll(c){return(0,vt.mG)(this,void 0,void 0,function*(){try{const v=this.getGrantType(c.target.value),Q=this.users.map(St=>this.mapParams(St,v));yield this.accountsService.setAccountGrant(this.companyId,this.accountId,Q),this.showNotification(v),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId),this.users.forEach(St=>St.accountGrantType=v)}catch(v){this.notifierService.notify("error",v.description||v.code||this.translateService.instant("SHARED.ACTION_ERROR"))}})}showNotificationForUser(c){const v=this.translateService.instant(c.accountGrantType===Zt.X7.AVAILABLE?"ACCOUNTS.SETTINGS.USER_GRANTED":"ACCOUNTS.SETTINGS.USER_LIMITED",{user:`${c.lastname||""} ${c.firstname||""} ${c.middlename||""}`});this.notifierService.notify("default",v)}showNotification(c){const v=this.translateService.instant(c===Zt.X7.AVAILABLE?"ACCOUNTS.SETTINGS.GRANTED_ALL":"ACCOUNTS.SETTINGS.LIMITED_ALL");this.notifierService.notify("default",v)}mapParams(c,v){return{id:c.userId,userAuthorityId:c.userAuthorityId,accountGrantType:v}}getGrantType(c){return"true"===c?Zt.X7.UNAVAILABLE:Zt.X7.AVAILABLE}get isAllSelected(){var c;return null===(c=this.users)||void 0===c?void 0:c.every(v=>v.accountGrantType===this.grants.UNAVAILABLE)}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(A.Kz),i.Y36(Zt.iu),i.Y36(y.lG),i.Y36(Lt.sK))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-grants"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:12,vars:7,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-header"],["translate","",1,"users-header"],[1,"modal-body"],["translate","","class","users-list__row",4,"ngIf"],["class","users-list__row",4,"ngFor","ngForOf"],[4,"ngIf"],["translate","",1,"users-list__row"],["translate","",1,"users-list__cell"],[1,"users-list__cell",3,"value","change"],[1,"users-list__row"],[1,"users-list__cell"],[1,"users-list__initials","p2","users-list__cell"],[1,"text-gray"],["translate",""],["translate","",1,"users-list__error"],["translate","",1,"btn","btn-link","btn-block",3,"click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",function(){return v.modal.dismiss()}),i._UZ(2,"img",2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",3)(5,"h5",4),i._uU(6,"DIRECTORY.EMPLOYEES.TITLE"),i.qZA()(),i.TgZ(7,"div",5),i.YNc(8,ia,7,1,"div",6),i.YNc(9,Jn,15,10,"div",7),i.YNc(10,Ha,5,0,"ng-container",8),i.YNc(11,Hn,5,0,"ng-container",8),i.qZA()()),2&c&&(i.xp6(2),i.s9C("alt",i.lcZ(3,5,"SHARED.CLOSE")),i.xp6(6),i.Q6J("ngIf",!v.error&&(null==v.users?null:v.users.length)>0),i.xp6(1),i.Q6J("ngForOf",v.users),i.xp6(1),i.Q6J("ngIf",v.error),i.xp6(1),i.Q6J("ngIf",0===(null==v.users?null:v.users.length)))},directives:[Lt.Pi,a.O5,vn.q,a.sg],pipes:[Lt.X$],styles:[".users-header[_ngcontent-%COMP%]{padding:.5rem}.users-list__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto 1fr auto;align-content:space-around;justify-content:space-between;background:#fff;margin:.5rem 0}.users-list__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;display:flex;justify-content:center;align-items:center;background:#d6dadf}.users-list__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.users-list__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.users-list__cell[_ngcontent-%COMP%]{display:grid;flex-direction:column;margin:auto .5rem;padding:.625rem 0}.users-list__error[_ngcontent-%COMP%]{color:#666c72;padding:2.5rem 4.75rem 1.5rem;text-align:center}.modal-body[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem;max-height:100%}"]}),m})(),oa=(()=>{class m{constructor(c,v){this.modalService=c,this.accountsService=v,this.errorText=null}ngOnInit(){this.retrieveTotalLimitations()}retrieveTotalLimitations(){return(0,vt.mG)(this,void 0,void 0,function*(){try{yield this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId)}catch(c){}})}openAccountGrants(){return(0,vt.mG)(this,void 0,void 0,function*(){const c=this.modalService.open(Xa,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary modal-adaptive",centered:!0,size:"md"});c.componentInstance.companyId=this.companyId,c.componentInstance.accountId=this.accountId;try{yield c.result}catch(v){}})}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(A.FF),i.Y36(Zt.iu))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account-settings"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:15,vars:6,consts:[[1,"account-settings"],[1,"account-settings__block"],["translate","",1,"account-settings__header"],[1,"account-settings__content"],[1,"account-settings__title","col-md-10"],["translate",""],[1,"text-gray"],[1,"account-settings__control","col-md-2"],["translate","",1,"btn-link-classic",3,"click"]],template:function(c,v){1&c&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3,"ACCOUNTS.SETTINGS.MAIN"),i.qZA(),i.TgZ(4,"div",3)(5,"div",4)(6,"div",5),i._uU(7,"ACCOUNTS.SETTINGS.LIMIT_ACCESS"),i.qZA(),i.TgZ(8,"small",6),i._uU(9),i.ALo(10,"translate"),i.ALo(11,"async"),i.qZA()(),i.TgZ(12,"div",7)(13,"button",8),i.NdJ("click",function(){return v.openAccountGrants()}),i._uU(14,"ACCOUNTS.SETTINGS.EDIT"),i.qZA()()()()()),2&c&&(i.xp6(9),i.AsE("",i.lcZ(10,2,"ACCOUNTS.SETTINGS.LIMITS"),": ",i.lcZ(11,4,v.accountsService.storeForTotal$),""))},directives:[Lt.Pi],pipes:[Lt.X$,a.Ov],styles:[".account-settings[_ngcontent-%COMP%]{display:flex;flex-direction:column}.account-settings__block[_ngcontent-%COMP%]{padding:1.5rem 0;background:#fff;border-radius:.75rem}.account-settings__header[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0 1rem 2rem}.account-settings__content[_ngcontent-%COMP%]{display:flex;flex-direction:row}.account-settings__title[_ngcontent-%COMP%]{display:grid;grid-auto-rows:minmax(min-content,max-content);grid-row-gap:4px;row-gap:4px}.account-settings__control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),m})();var Me=r(38788),Xi=r(66914),Ro=r(16345),fn=r(33999),De=r(37784),Zo=r(53571);function Va(m,K){1&m&&i._UZ(0,"j-account-migrated",16),2&m&&i.Q6J("isLarge",!0)}function Lo(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"a",13),i.NdJ("click",function(Q){return i.CHM(c),i.oxw(2).onTabClick("settings",Q)}),i._uU(1," ACCOUNTS.SETTINGS.TITLE "),i.qZA()}if(2&m){const c=i.oxw(2);i.ekj("active","settings"===c.activeTab)}}function za(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"j-filter",17),i.NdJ("downloaded",function(Q){return i.CHM(c),i.oxw(2).onDownload(Q)}),i.qZA(),i.BQk()}if(2&m){const c=i.oxw(2);i.xp6(1),i.Q6J("currency",c.balance.currency)}}function ts(m,K){if(1&m&&(i.ynx(0),i._UZ(1,"j-requisites",18),i.BQk()),2&m){const c=i.oxw(2);i.xp6(1),i.Q6J("account",c.account)}}function ns(m,K){if(1&m&&(i.ynx(0),i._UZ(1,"j-account-export",18),i.BQk()),2&m){const c=i.oxw(2);i.xp6(1),i.Q6J("account",c.account)}}function aa(m,K){if(1&m&&(i.ynx(0),i._UZ(1,"j-account-settings",19),i.BQk()),2&m){const c=i.oxw(2);i.xp6(1),i.Q6J("companyId",c.companyId)("accountId",c.account.id)}}function Vi(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"j-statement-balances",26),i.NdJ("exportSelected",function(){return i.CHM(c),i.oxw(3).exportSelectedTransactions()}),i.qZA()}if(2&m){const c=i.oxw(3);i.Q6J("selectedCount",c.selectedCount)("showCount","CREDIT"===c.filter.operationType)("statement",c.statement)}}function Xe(m,K){1&m&&(i.TgZ(0,"div",27),i._uU(1," ACCOUNTS.STATEMENT.ALL_LOADED "),i.qZA())}function es(m,K){if(1&m&&(i.TgZ(0,"div",28)(1,"strong"),i._uU(2),i.qZA()()),2&m){const c=i.oxw(3);i.xp6(2),i.Oqu(c.errorText)}}function sa(m,K){1&m&&i._UZ(0,"j-animated-loading")}function ra(m,K){1&m&&(i.TgZ(0,"div",29),i._UZ(1,"j-statement-loading"),i.qZA())}function Uo(m,K){if(1&m){const c=i.EpF();i.ynx(0),i.TgZ(1,"section",20),i.NdJ("scrolled",function(){return i.CHM(c),i.oxw(2).onScroll()}),i.YNc(2,Vi,1,3,"j-statement-balances",21),i.TgZ(3,"j-statement",22),i.NdJ("selected",function(){return i.CHM(c),i.oxw(2).onSelect()}),i.qZA(),i.YNc(4,Xe,2,0,"div",23),i.YNc(5,es,3,1,"div",24),i.YNc(6,sa,1,0,"j-animated-loading",15),i.YNc(7,ra,2,0,"div",25),i.qZA(),i.BQk()}if(2&m){const c=i.oxw(2);i.xp6(1),i.Q6J("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),i.xp6(1),i.Q6J("ngIf",c.statement&&c.statement.totalTransactionsCount>0),i.xp6(1),i.Q6J("statement",c.statement)("isSelectable",c.isSelectableForExport)("isLoadingExtra",!c.isLoading&&c.isLoadingExtra)("emptyLabel",c.emptyLabel),i.xp6(1),i.Q6J("ngIf",!c.hasMorePages&&c.statement.totalTransactionsCount>0),i.xp6(1),i.Q6J("ngIf",c.errorText),i.xp6(1),i.Q6J("ngIf",!c.isReady),i.xp6(1),i.Q6J("ngIf",c.isLoading&&c.isReady)}}function ko(m,K){if(1&m){const c=i.EpF();i.TgZ(0,"f-page",1),i.NdJ("closed",function(){return i.CHM(c),i.oxw().onClose()}),i.TgZ(1,"f-page-header")(2,"section",2)(3,"div",3)(4,"div",4),i._UZ(5,"j-entity-logo",5),i.TgZ(6,"span",6),i._uU(7),i.ALo(8,"formatIban"),i.qZA()(),i._UZ(9,"j-account-alter-code",7),i.YNc(10,Va,1,1,"j-account-migrated",8),i.qZA(),i.TgZ(11,"h1",9),i._UZ(12,"j-money",10),i.qZA()(),i.TgZ(13,"div",11)(14,"nav",12)(15,"a",13),i.NdJ("click",function(Q){return i.CHM(c),i.oxw().onTabClick("statement",Q)}),i._uU(16," ACCOUNTS.STATEMENT.TITLE "),i.qZA(),i.TgZ(17,"a",13),i.NdJ("click",function(Q){return i.CHM(c),i.oxw().onTabClick("requisites",Q)}),i._uU(18," ACCOUNTS.REQUISITES.TITLE "),i.qZA(),i.TgZ(19,"a",13),i.NdJ("click",function(Q){return i.CHM(c),i.oxw().onTabClick("auto-export",Q)}),i._uU(20," ACCOUNTS.AUTO_EXPORT "),i.qZA(),i.YNc(21,Lo,2,2,"a",14),i.qZA()()(),i.TgZ(22,"f-page-body"),i.YNc(23,za,2,1,"ng-container",15),i.YNc(24,ts,2,1,"ng-container",15),i.YNc(25,ns,2,1,"ng-container",15),i.YNc(26,aa,2,2,"ng-container",15),i.qZA(),i.TgZ(27,"f-page-extra"),i.YNc(28,Uo,8,13,"ng-container",15),i.qZA()()}if(2&m){const c=i.oxw();i.Q6J("bodyClassList","statement"===c.activeTab?"no-grow":""),i.xp6(5),i.Q6J("name",c.balance.currency),i.xp6(2),i.Oqu(i.lcZ(8,18,c.account.iban)),i.xp6(2),i.Q6J("account",c.account),i.xp6(1),i.Q6J("ngIf",c.account.isMigrated),i.xp6(2),i.Q6J("money",c.balance),i.xp6(3),i.ekj("active","statement"===c.activeTab),i.xp6(2),i.ekj("active","requisites"===c.activeTab),i.xp6(2),i.ekj("active","auto-export"===c.activeTab),i.xp6(2),i.Q6J("ngIf",c.isSettingsAllowed),i.xp6(2),i.Q6J("ngIf","statement"===c.activeTab),i.xp6(1),i.Q6J("ngIf","requisites"===c.activeTab),i.xp6(1),i.Q6J("ngIf","auto-export"===c.activeTab),i.xp6(1),i.Q6J("ngIf","settings"===c.activeTab),i.xp6(2),i.Q6J("ngIf","statement"===c.activeTab)}}let ke=(()=>{class m{constructor(c,v,Q,St,rn,En,ie,Un,Ne,Fo){this.router=c,this.route=v,this.company=Q,this.filterService=St,this.accountsService=rn,this.datePipe=En,this.filesService=ie,this.statementService=Un,this.maskedService=Ne,this.navService=Fo,this.isDetailsShown=!1,this.isLoading=!0,this.isLoadingExtra=!0,this.isReady=!1,this.hasMorePages=!0,this.selectedTransactions=[],this.selectedCount=0,this.subscription=new At.w,this.pageNumber=1,this.pageSize=10,this.cashedRouteQuery=JSON.parse(sessionStorage.getItem("accountRouteQuery"));const as=this.route.params.subscribe(Nn=>{this.iban=Nn.iban,this.loadData()});this.subscription.add(as);const ss=this.route.data.subscribe(Nn=>{this.activeTab=Nn.tab});if(this.subscription.add(ss),this.cashedRouteQuery)this.filter=this.mapQueryParams(this.cashedRouteQuery),this.filterService.updateExtra(this.filter);else{const Nn=this.route.queryParams.pipe((0,So.q)(1)).subscribe(Bo=>{this.updateCashedRouteQuery(Bo),this.filter=this.mapQueryParams(Bo),this.filterService.updateExtra(this.filter)});this.subscription.add(Nn)}const Ve=this.filterService.getScheme().subscribe(Nn=>{this.filter=Object.assign({},Nn),this.pageNumber=1,this.hasMorePages=!0,this.isLoading=!0,this.updateQueryParams(),this.loadStatement()});this.subscription.add(Ve)}ngOnDestroy(){this.subscription.unsubscribe()}onTabClick(c,v){v.preventDefault(),this.router.navigate([c],{relativeTo:this.route.parent})}onClose(){this.navigateToHome()}onScroll(){this.hasMorePages&&!this.isLoading&&(this.pageNumber++,this.loadStatement())}get emptyLabel(){return this.account.isMigrated?"ACCOUNTS.EMPTY_MIGRATED":"ACCOUNTS.EMPTY_STATEMENT"}get isSelectableForExport(){return this.filter.operationType===Ki.H4.INCOME&&this.account.balance.currency===ui.w.KZT}onDownload(c){return(0,vt.mG)(this,void 0,void 0,function*(){const v=yield this.accountsService.getStatement(this.iban,this.filter,this.pageNumber,this.pageSize,c,this.company.currentId);let Q=c.substring(c.lastIndexOf("/")+1,c.length);"1c"===Q&&(Q+=".txt"),this.filesService.downloadFile(v,`${this.iban}.${Q}`)})}loadData(){return(0,vt.mG)(this,void 0,void 0,function*(){try{yield this.loadAccount()}catch(c){console.error(c)}finally{this.isReady=!0}})}loadAccount(){return(0,vt.mG)(this,void 0,void 0,function*(){try{this.account=yield this.accountsService.getAccountByIban(this.company.currentId,this.iban),this.account.isMigrated&&this.accountsService.retrieveMergeDate()}catch(c){this.navigateToHome()}})}loadStatement(){return(0,vt.mG)(this,void 0,void 0,function*(){this.errorText="",this.isLoadingExtra=!0;try{if(this.filter.periodType&&this.filter.periodType!==Po._A.CUSTOM){const v=this.filterService.PERIOD_LIST.find(Q=>Q.type===this.filter.periodType);this.filter.periodFrom=v.dates.from,this.filter.periodTo=v.dates.to}const c=yield this.accountsService.getStatement(this.iban,this.filter,this.pageNumber,this.pageSize);this.hasMorePages=this.pageSize<=c.totalTransactionsCount,this.statement=c}catch(c){this.errorText=c}finally{this.isReady=!0,this.isLoading=!1,this.isLoadingExtra=!1}})}get balance(){return this.account&&this.account.balance}navigateToHome(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["../.."],{relativeTo:this.route})}mapQueryParams(c){const v=Object.assign({},this.filterService.getDefaults(Ki.e5.ACCOUNTS));for(const Q in c)if(Object.prototype.hasOwnProperty.call(c,Q)){const St=c[Q];St&&null!=St&&"null"!==St&&(v[Q]="periodFrom"===Q||"periodTo"===Q?new Date(St):St)}return v}updateQueryParams(){const c=Object.assign({},this.filter),v={};for(const Q in c)if(Object.prototype.hasOwnProperty.call(c,Q)){const St=c[Q];St&&null!=St&&"null"!==St&&(v[Q]="periodFrom"===Q||"periodTo"===Q?this.datePipe.transform(St,"yyyy-MM-dd"):St,("amountFrom"===Q||"amountTo"===Q)&&(v[Q]=this.maskedService.getNumberedAmount(St)))}this.updateCashedRouteQuery(c),this.router.navigate([],{queryParams:v,relativeTo:this.route})}updateCashedRouteQuery(c){sessionStorage.setItem("accountRouteQuery",JSON.stringify(c))}get companyId(){return this.company.currentId}get isSettingsAllowed(){return this.company.currentAuthority.authority===mn.Ly.PRIMARY_SIGNATURE}onSelect(){this.updateSelectable()}updateSelectable(){this.resetSelectable(),this.updateSelectedValues()}resetSelectable(){this.selectedTransactions=[],this.selectedCount=0}get currentTransactions(){var c,v;const Q=null===(v=null===(c=this.statement)||void 0===c?void 0:c.transactionGroups)||void 0===v?void 0:v.map(St=>St.transactions);return(null==Q?void 0:Q.flat())||[]}updateSelectedValues(){this.currentTransactions.forEach(c=>{c.isSelected&&(this.selectedTransactions.push(c),this.selectedCount++)})}exportSelectedTransactions(c=null){return(0,vt.mG)(this,void 0,void 0,function*(){if(c&&c.preventDefault(),this.selectedTransactions.length>0){const v=yield this.statementService.exportIncomingPaymentsList(this.selectedTransactions);this.filesService.downloadFile(v,`${this.selectedCount}_operations.pdf`)}})}}return m.\u0275fac=function(c){return new(c||m)(i.Y36(F.F0),i.Y36(F.gz),i.Y36(Y.J),i.Y36(na.i),i.Y36(Zt.iu),i.Y36(a.uU),i.Y36(Qi.n),i.Y36(Oo.AQ),i.Y36(lt.O),i.Y36(Io.t))},m.\u0275cmp=i.Xpm({type:m,selectors:[["j-account"]],decls:1,vars:1,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed",4,"ngIf"],["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed"],[1,"account-header"],[1,"iban"],[1,"iban__number"],["size","sm",1,"iban-img",3,"name"],[1,"d-inline-block","text-muted","mr-4"],[1,"iban__alter-code","mr-4",3,"account"],["class","iban__migrated",3,"isLarge",4,"ngIf"],[1,"f-page-title"],[3,"money"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["href","#","translate","",3,"click"],["href","#","translate","",3,"active","click",4,"ngIf"],[4,"ngIf"],[1,"iban__migrated",3,"isLarge"],[3,"currency","downloaded"],[3,"account"],[3,"companyId","accountId"],["infiniteScroll","",1,"account-wrapper",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"selectedCount","showCount","statement","exportSelected",4,"ngIf"],[1,"search-results",3,"statement","isSelectable","isLoadingExtra","emptyLabel","selected"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],["class","py-4",4,"ngIf"],[3,"selectedCount","showCount","statement","exportSelected"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"],[1,"py-4"]],template:function(c,v){1&c&&i.YNc(0,ko,29,20,"f-page",0),2&c&&i.Q6J("ngIf",v.account)},directives:[a.O5,_i.J,bo.M,xt.k,it,ut,Qt.y,Lt.Pi,Mo.G,Do.z,Ce,ea,oa,Me.R,b.R,Xi.Z,Ro.H,fn.V,De.D],pipes:[Zo.O],styles:["[_nghost-%COMP%]{display:block}.iban[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;flex-wrap:wrap}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.iban__number[_ngcontent-%COMP%]{display:flex;align-items:center}.iban__number[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__alter-code[_ngcontent-%COMP%]{margin-bottom:8px}@media (min-width: 960px){.iban__number[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__alter-code[_ngcontent-%COMP%]{margin-bottom:0}}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),m})();var de=r(12351);const da=[{path:"accounts",component:di,data:{title:"ACCOUNTS.TITLE"},children:[{path:"",component:He}]},{path:"accounts/:iban",children:[{path:"statement",component:ke,data:{tab:"statement"}},{path:"requisites",component:ke,data:{tab:"requisites"}},{path:"auto-export",component:ke,data:{tab:"auto-export"}},{path:"settings",component:ke,data:{tab:"settings"}},{path:"**",redirectTo:"statement"}]},{path:"deposits",loadChildren:()=>r.e(127).then(r.bind(r,49127)).then(m=>m.DepositsModule)},{path:"cards",loadChildren:()=>Promise.resolve().then(r.bind(r,30441)).then(m=>m.CardsModule)},{path:"loans",canActivate:[ot.t],loadChildren:()=>Promise.resolve().then(r.bind(r,4057)).then(m=>m.LoansModule)},{canActivate:[x],path:G.KK.root,data:{animation:"routerFadeFromBottom"},loadChildren:()=>Promise.all([r.e(259),r.e(241),r.e(592),r.e(876)]).then(r.bind(r,98876)).then(m=>m.PaymentsModule)},{path:de.k.transfers,loadChildren:()=>Promise.all([r.e(592),r.e(84)]).then(r.bind(r,54084)).then(m=>m.TransfersModule)},{path:de.k.conversion,loadChildren:()=>Promise.all([r.e(592),r.e(207)]).then(r.bind(r,77207)).then(m=>m.ConversionModule)},{path:de.k.history,loadChildren:()=>r.e(464).then(r.bind(r,64464)).then(m=>m.HistoryModule)},{path:"history2",loadChildren:()=>r.e(146).then(r.bind(r,93146)).then(m=>m.History2Module)},{path:de.k.contracts,loadChildren:()=>r.e(241).then(r.bind(r,93241)).then(m=>m.ContractsModule)},{path:de.k.settings,loadChildren:()=>Promise.resolve().then(r.bind(r,67943)).then(m=>m.SettingsModule)},{path:de.k.directory,loadChildren:()=>Promise.all([r.e(592),r.e(490)]).then(r.bind(r,12490)).then(m=>m.DirectoryModule)},{path:de.k.letters,canActivate:[ot.t],data:{featureFlag:M.Y.LETTER},loadChildren:()=>Promise.all([r.e(592),r.e(376)]).then(r.bind(r,27376)).then(m=>m.LettersModule)},{path:de.k.extraSettings,loadChildren:()=>r.e(887).then(r.bind(r,67887)).then(m=>m.ExtraSettingsModule)},{path:de.k.jmart,loadChildren:()=>r.e(661).then(r.bind(r,33661)).then(m=>m.JmartModule)},{path:de.k.authorities,loadChildren:()=>r.e(566).then(r.bind(r,1566)).then(m=>m.AuthoritiesModule)},{path:"**",redirectTo:"accounts"}];let Kn=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[F.Bz.forChild(da)],F.Bz]}),m})();var wo=r(30441),hi=r(4057);let ua=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({providers:[ht],imports:[[a.ez,A.IJ,_.hx,Lt.aw,h.m]]}),m})();var _a=r(67943);let os=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[a.ez,t.u5,t.UX,Kn,l.p,h.m,E.i,O.n,wo.CardsModule,hi.LoansModule,e.yI.forChild(),A.IJ,A.M,N.w,b.X,_.hx,ua,_a.SettingsModule]]}),m})()},4057:(Pt,X,r)=>{"use strict";r.r(X),r.d(X,{LoansModule:()=>I});var a=r(69808),t=r(59516),N=r(70655),A=r(42654),e=r(5e3),b=r(23498),_=r(26164),h=r(37074),l=r(23918),E=r(72159),O=r(89854);const F=function(){return{width:"300px",height:"20px","background-color":"#ECEEF1"}},M=function(){return{width:"500px",height:"36px","background-color":"#ECEEF1"}};function G(Z,et){1&Z&&(e.ynx(0),e._UZ(1,"ngx-skeleton-loader",1)(2,"br")(3,"ngx-skeleton-loader",1),e.BQk()),2&Z&&(e.xp6(1),e.Q6J("theme",e.DdM(2,F)),e.xp6(2),e.Q6J("theme",e.DdM(3,M)))}const f=function(Z){return{scrolled:Z}},B=function(Z,et){return{unpaid:Z,total:et}};function k(Z,et){if(1&Z&&(e.ynx(0),e.TgZ(1,"section",2)(2,"div",3),e._UZ(3,"img",4),e.TgZ(4,"div",5),e._uU(5),e._UZ(6,"j-money",6),e._uU(7),e.qZA()(),e.TgZ(8,"h1",7),e._UZ(9,"j-money",6),e.qZA(),e.TgZ(10,"div",8)(11,"div",9),e._UZ(12,"div",10),e._uU(13," \xa0"),e._UZ(14,"j-money",6),e.qZA(),e._uU(15," \u2022 "),e._UZ(16,"div",11),e.qZA()(),e.BQk()),2&Z){const L=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(7,f,L.scrollState.coord_y>0&&"statement"===L.scrollState.selectedTab)),e.xp6(4),e.hij(" ",L.loan.productName," "),e.xp6(1),e.Q6J("money",L.loan.amount),e.xp6(1),e.hij(" \u2022 \u2116 ",L.loan.colvirId," "),e.xp6(2),e.Q6J("money",L.loan.amount),e.xp6(5),e.Q6J("money",L.getCurrentPaymentObj),e.xp6(2),e.Q6J("translateParams",e.WLB(9,B,L.unpaid,L.paymentsCount))}}let $=(()=>{class Z{constructor(){this.paymentsCount=0,this.unpaid=0,this.subscription=new A.w}ngOnDestroy(){this.subscription.unsubscribe()}get getCurrentPaymentObj(){var L;return{amount:null===(L=this.currentPayment)||void 0===L?void 0:L.remainDebt,currency:this.loan.amount.currency}}}return Z.\u0275fac=function(L){return new(L||Z)},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["j-loan-header"]],inputs:{paymentsCount:"paymentsCount",unpaid:"unpaid",loan:"loan",schedule:"schedule",currentPayment:"currentPayment",scrollState:"scrollState"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"theme"],[1,"account-header",3,"ngClass"],[1,"iban"],["src","/assets/img/home/loan-percent.svg"],[1,"ml-3","text-muted"],[3,"money"],[1,"f-page-title"],[1,"payment_info"],[1,"debt"],["translate","LOANS.INFO.MAIN_DEPT",1,"j-desc-child"],["translate","LOANS.INFO.REMAINING_PAYMENTS",1,"payments_count","text-muted",3,"translateParams"]],template:function(L,gt){1&L&&(e.YNc(0,G,4,4,"ng-container",0),e.YNc(1,k,17,12,"ng-container",0)),2&L&&(e.Q6J("ngIf",!gt.loan),e.xp6(1),e.Q6J("ngIf",gt.loan))},directives:[a.O5,l.xr,a.mk,E.y,O.Pi],styles:["[_nghost-%COMP%]{display:block}.account-header[_ngcontent-%COMP%]   .iban[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;min-height:25px}.account-header[_ngcontent-%COMP%]   .iban[_ngcontent-%COMP%]   j-money[_ngcontent-%COMP%]{display:none}.account-header.scrolled[_ngcontent-%COMP%]   .iban[_ngcontent-%COMP%]{padding-bottom:1.25rem}.account-header.scrolled[_ngcontent-%COMP%]   .iban[_ngcontent-%COMP%]   j-money[_ngcontent-%COMP%]{display:inline}.account-header.scrolled[_ngcontent-%COMP%]   .f-page-title[_ngcontent-%COMP%], .account-header.scrolled[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]{transform:translate(-1000px);height:0}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}.payment_info[_ngcontent-%COMP%]{display:flex}.payment_info[_ngcontent-%COMP%]   .debt[_ngcontent-%COMP%]{padding-right:4px;display:flex}.payment_info[_ngcontent-%COMP%]   .debt[_ngcontent-%COMP%]   .debt_amount[_ngcontent-%COMP%], .payment_info[_ngcontent-%COMP%]   .payments_count[_ngcontent-%COMP%]{padding-left:4px}"]}),Z})();const i=function(){return["."]},Y=function(){return{view:"statement"}},S=function(){return{view:"info"}};let U=(()=>{class Z{constructor(){}ngOnInit(){}}return Z.\u0275fac=function(L){return new(L||Z)},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["j-loan-tabs"]],decls:6,vars:10,consts:[[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active","translate","",3,"routerLink","queryParams","queryParamsHandling"]],template:function(L,gt){1&L&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),e._uU(3," LOANS.STATEMENT "),e.qZA(),e.TgZ(4,"a",2),e._uU(5," LOANS.INFO.TITLE "),e.qZA()()()),2&L&&(e.xp6(2),e.Q6J("routerLink",e.DdM(6,i))("queryParams",e.DdM(7,Y))("queryParamsHandling","merge"),e.xp6(2),e.Q6J("routerLink",e.DdM(8,i))("queryParams",e.DdM(9,S))("queryParamsHandling","merge"))},directives:[t.yS,t.Od,O.Pi],styles:[""]}),Z})();var x=r(38788),ot=r(69544);const vt=function(Z,et){return{amount:Z,currency:et}};function At(Z,et){if(1&Z){const L=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){const Ut=e.CHM(L).$implicit;return e.oxw(3).showDetails(Ut)}),e.TgZ(1,"div",14),e._uU(2),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",16),e._UZ(7,"j-money",17),e.qZA()()}if(2&Z){const L=et.$implicit,gt=e.oxw(3);e.xp6(2),e.hij("\u2116 ",L.paymentNumber,""),e.xp6(2),e.Oqu(e.xi3(5,3,L.paymentDate,"dd MMMM")),e.xp6(3),e.Q6J("money",e.WLB(6,vt,L.totalAmount,gt.loan.amount.currency))}}function Zt(Z,et){if(1&Z&&(e.TgZ(0,"div",5),e.ynx(1),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9),e._uU(6),e.qZA()()()(),e.TgZ(7,"div",7)(8,"div",10)(9,"div",11),e.YNc(10,At,8,9,"div",12),e.qZA()()(),e.BQk(),e.qZA()),2&Z){const L=et.$implicit;e.xp6(2),e.Q6J("id",L.key),e.xp6(4),e.Oqu(L.key),e.xp6(4),e.Q6J("ngForOf",L.value)}}const kt=function(Z){return{scrolled:Z}};function Yt(Z,et){if(1&Z&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.YNc(2,Zt,11,3,"div",4),e.ALo(3,"keyvalue"),e.qZA()),2&Z){const L=e.oxw();e.Q6J("ngClass",e.VKq(4,kt,L.scrollStateVal.coord_y>0&&"statement"===L.scrollStateVal.selectedTab)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,2,L.schedule.loanSchedule))}}function H(Z,et){if(1&Z){const L=e.EpF();e.TgZ(0,"section",18)(1,"div",19),e.NdJ("click",function(){return e.CHM(L),e.oxw().hideDetails()}),e.qZA(),e.TgZ(2,"section",20)(3,"div",21)(4,"div",22)(5,"div",23),e._uU(6),e.qZA(),e.TgZ(7,"div",24),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"a",25),e.NdJ("click",function(It){return e.CHM(L),e.oxw().onCloseModal(It)}),e._UZ(11,"j-icon",26),e.qZA()(),e.TgZ(12,"div",27),e._UZ(13,"j-money",17),e.qZA(),e.TgZ(14,"div",28)(15,"div",29),e._UZ(16,"div",30),e.TgZ(17,"div",31),e.NdJ("click",function(){return e.CHM(L),e.oxw().toggleSumsDropdown()}),e._UZ(18,"span",32),e.qZA()(),e.TgZ(19,"div",33)(20,"div",34)(21,"div",35),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",16),e._UZ(25,"j-money",17),e.qZA()(),e.TgZ(26,"div",34)(27,"div",35),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",16),e._UZ(31,"j-money",17),e.qZA()()()()()()}if(2&Z){const L=e.oxw();e.Q6J("ngClass",L.wrapperClasses),e.xp6(2),e.Q6J("ngClass",L.detailsClasses),e.xp6(4),e.AsE(" ",L.payment.paymentNumber," \u0438\u0437 ",L.payment.totalPayments," "),e.xp6(2),e.hij(" ",e.xi3(9,13,L.payment.paymentDate,"d MMMM y")," "),e.xp6(5),e.Q6J("money",e.WLB(20,vt,L.payment.totalAmount,L.loan.amount.currency)),e.xp6(1),e.ekj("hided",!L.isSumsShown),e.xp6(4),e.Q6J("inlineSVG","/assets/icons/shared/dropdown.svg"),e.xp6(4),e.Oqu(e.lcZ(23,16,"LOANS.INFO.MAIN_DEPT")),e.xp6(3),e.Q6J("money",e.WLB(23,vt,L.payment.mainDebtAmount,L.loan.amount.currency)),e.xp6(3),e.Oqu(e.lcZ(29,18,"LOANS.INFO.ACCRUED")),e.xp6(3),e.Q6J("money",e.WLB(26,vt,L.payment.interestAmount,L.loan.amount.currency))}}let at=(()=>{class Z{constructor(L,gt){this.router=L,this.document=gt,this.isLoading=!0,this.wrapperClasses="",this.detailsClasses="",this.isDetailsShown=!1,this.isAnimating=!1,this.isSumsShown=!0}set selected(L){this.selectedOperation=L,this.scrollToView(null==L?void 0:L.code)}set scrollState(L){this.scrollStateVal=L}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden")}scrollToView(L){var gt;const It=null===(gt=this.document.getElementById(L))||void 0===gt?void 0:gt.nextSibling,Ut=this.document.querySelector("html");It&&this.scrollToElm(Ut,It,1)}scrollToElm(L,gt,It=2){gt&&this.scrollTo(L,this.scrollStateVal.coord_y>0?gt.offsetTop-200:gt.offsetTop-350,It)}scrollTo(L,gt,It,Ut){const ln=L.scrollTop,Tn=gt-ln,mn=performance.now();let Ln,bn=performance.now(),yn=(bn-mn)/1e3;!function jn(){bn=performance.now(),yn=(bn-mn)/1e3,Ln=yn/It,L.scrollTop=ln+Tn*function ne(Mn){return Mn<.5?2*Mn*Mn:(4-2*Mn)*Mn-1}(Ln),Ln<1?window.requestAnimationFrame(jn):Ut&&Ut()}()}showDetails(L){this.payment=L,this.isAnimating||(this.isAnimating=!0,this.isDetailsShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.detailsClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}onCloseModal(L){L.preventDefault(),this.hideDetails(),this.isSumsShown=!0}toggleSumsDropdown(){this.isSumsShown=!this.isSumsShown}hideDetails(){this.isAnimating||(this.isAnimating=!0,this.detailsClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isDetailsShown=!1,this.isAnimating=!1},300))}}return Z.\u0275fac=function(L){return new(L||Z)(e.Y36(t.F0),e.Y36(a.K0))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["j-loan-statement"]],inputs:{loan:"loan",schedule:"schedule",selected:"selected",scrollState:"scrollState"},decls:3,vars:2,consts:[["class","schedule",3,"ngClass",4,"ngIf"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"schedule",3,"ngClass"],[1,"schedule_block_title_shadow"],["class","schedule_block",4,"ngFor","ngForOf"],[1,"schedule_block"],[1,"schedule_block_title",3,"id"],[1,"container"],[1,"row","offset-xl-2","col-xl-8","col-lg-10"],[1,"year"],[1,"row"],[1,"col-lg-10","col-xl-8","offset-lg-1","offset-xl-2"],["class","schedule_block_item",3,"click",4,"ngFor","ngForOf"],[1,"schedule_block_item",3,"click"],[1,"index"],[1,"date"],[1,"amount"],[3,"money"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","payment__details",3,"ngClass"],[1,"payment_header"],[1,"payment_header__info"],[1,"payment_header__info__count"],[1,"payment_header__info__date"],["href","#",1,"details__close","ml-auto",3,"click"],["size","md","name","cross",1,"size-md"],[1,"payment_amount"],[1,"payment_info"],[1,"payment_info__header"],["translate","STATEMENT.DETAILS.TITLE",1,"title"],[1,"toggler",3,"click"],[1,"dropdown-arrow","ml-auto","text-primary",3,"inlineSVG"],[1,"payment_info__body"],[1,"main_debt"],[1,"name"]],template:function(L,gt){1&L&&(e.TgZ(0,"f-page-extra"),e.YNc(1,Yt,4,6,"div",0),e.qZA(),e.YNc(2,H,32,29,"section",1)),2&L&&(e.xp6(1),e.Q6J("ngIf",gt.schedule),e.xp6(1),e.Q6J("ngIf",gt.payment&&gt.isDetailsShown))},directives:[x.R,a.O5,a.mk,a.sg,E.y,h.o,O.Pi,ot.d$],pipes:[a.Nd,a.uU,O.X$],styles:[".schedule_block_title_shadow[_ngcontent-%COMP%]{display:none}.scrolled[_ngcontent-%COMP%]   .schedule_block_title_shadow[_ngcontent-%COMP%]{display:block;position:sticky;top:163px;width:100%;height:48px;box-shadow:0 4px 8px #0000000a,0 0 2px #0000000f,0 0 1px #0000000a}@media (max-width: 1279.98px){.scrolled[_ngcontent-%COMP%]   .schedule_block_title_shadow[_ngcontent-%COMP%]{top:211px}}.scrolled[_ngcontent-%COMP%]   .schedule_block_title[_ngcontent-%COMP%]{height:48px}.schedule_block_title[_ngcontent-%COMP%]{display:flex;height:58px;align-items:center;padding-left:12px;padding-right:12px;top:163px;position:sticky;z-index:2;background:#ffffff}@media (max-width: 1279.98px){.schedule_block_title[_ngcontent-%COMP%]{top:211px}}.schedule_block_title[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{font-weight:500;font-size:1.25rem;line-height:1.25rem;color:#1a1c1f}.schedule_block_title[_ngcontent-%COMP%]   .remaining_dept[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem;line-height:1.125rem;text-align:right;color:#666c72}.schedule_block_item[_ngcontent-%COMP%]{height:52px;display:flex;align-items:center;padding-left:12px;padding-right:12px;border-bottom:1px solid #B7BEC580;cursor:pointer}.schedule_block_item[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000000a,0 2px 6px #0000000a,0 0 1px #0000000a;border-radius:12px}.schedule_block_item[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{color:#666c72;opacity:.95;font-size:.875rem;line-height:1.125rem;width:50px}.schedule_block_item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-left:40px;font-weight:500;font-size:1.125rem;line-height:1.5rem;color:#1a1c1f;opacity:.95}.schedule_block_item[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{margin-left:auto;font-size:.875rem;line-height:1.125rem;color:#1a1c1f}.payment__details[_ngcontent-%COMP%]{padding:16px}.payment__details[_ngcontent-%COMP%]   .payment_header[_ngcontent-%COMP%]{display:flex}.payment__details[_ngcontent-%COMP%]   .payment_header[_ngcontent-%COMP%]   .payment_header__info[_ngcontent-%COMP%]   .payment_header__info__count[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#1a1c1f}.payment__details[_ngcontent-%COMP%]   .payment_header[_ngcontent-%COMP%]   .payment_header__info[_ngcontent-%COMP%]   .payment_header__info__date[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.125rem;color:#666c72}.payment__details[_ngcontent-%COMP%]   .payment_amount[_ngcontent-%COMP%]{padding:24px 16px;font-weight:500;font-size:2.25rem;line-height:45px;color:#1a1c1f;background:#FFFFFF;border-radius:12px;margin-top:16px;margin-bottom:16px}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]{background:#FFFFFF;border-radius:12px;padding:22px 16px}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__header[_ngcontent-%COMP%]{padding-bottom:20px;display:flex;justify-content:space-between}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;font-size:1.25rem;line-height:1.25rem;color:#1a1c1f}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__header[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease-in-out}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:all .2s ease-in-out}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__body[_ngcontent-%COMP%]   .main_debt[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__body[_ngcontent-%COMP%]   .main_debt[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#666c72}.payment__details[_ngcontent-%COMP%]   .payment_info[_ngcontent-%COMP%]   .payment_info__body[_ngcontent-%COMP%]   .main_debt[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1rem;line-height:1.375rem;color:#1a1c1f}.payment__details[_ngcontent-%COMP%]   .payment_info.hided[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{transform:rotate(180deg)}.payment__details[_ngcontent-%COMP%]   .payment_info.hided[_ngcontent-%COMP%]   .payment_info__body[_ngcontent-%COMP%]{display:none;opacity:0}"]}),Z})();var yt=r(9661),rt=r(53571);const ht=function(){return{width:"435px",height:"275px","background-color":"#ECEEF1"}},_t=function(){return{width:"435px",height:"318px","background-color":"#ECEEF1"}},Nt=function(){return{width:"435px",height:"340px","background-color":"#ECEEF1"}};function nt(Z,et){1&Z&&(e.ynx(0),e._UZ(1,"ngx-skeleton-loader",5)(2,"ngx-skeleton-loader",5)(3,"ngx-skeleton-loader",5),e.BQk()),2&Z&&(e.xp6(1),e.Q6J("theme",e.DdM(3,ht)),e.xp6(1),e.Q6J("theme",e.DdM(4,_t)),e.xp6(1),e.Q6J("theme",e.DdM(5,Nt)))}function Bt(Z,et){if(1&Z&&(e.TgZ(0,"div",6),e._UZ(1,"div",20),e.TgZ(2,"div",10),e._UZ(3,"div",21),e.TgZ(4,"div",12),e._uU(5),e.qZA()(),e.TgZ(6,"div",10),e._UZ(7,"div",22),e.TgZ(8,"div",12),e._uU(9),e.ALo(10,"formatIban"),e.qZA()(),e.TgZ(11,"div",10),e._UZ(12,"div",23),e.TgZ(13,"div",12),e._uU(14),e.ALo(15,"formatIban"),e.qZA()(),e.TgZ(16,"div",10),e._UZ(17,"div",24),e.TgZ(18,"div",12),e._uU(19),e.qZA()()()),2&Z){const L=e.oxw(2);e.xp6(5),e.hij(" ",L.company.shortOrLongName," "),e.xp6(4),e.hij(" ",e.lcZ(10,4,L.company.bin)," "),e.xp6(5),e.hij(" ",e.lcZ(15,6,L.loan.loanAcc)," "),e.xp6(5),e.hij(" ",L.company.kod," ")}}function Lt(Z,et){if(1&Z&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"div",7),e.TgZ(3,"div",8),e._UZ(4,"j-money",9),e.qZA(),e.TgZ(5,"div",10),e._UZ(6,"div",11),e.TgZ(7,"div",12),e._UZ(8,"j-money",9),e.qZA()()(),e.TgZ(9,"div",6),e._UZ(10,"div",13),e.TgZ(11,"div",10),e._UZ(12,"div",14),e.TgZ(13,"div",12),e._uU(14),e.qZA()(),e.TgZ(15,"div",10),e._UZ(16,"div",15),e.TgZ(17,"div",12),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.TgZ(20,"div",10),e._UZ(21,"div",16),e.TgZ(22,"div",12),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div",10),e._UZ(26,"div",17),e.TgZ(27,"div",12),e._uU(28),e.qZA()(),e.TgZ(29,"div",10),e._UZ(30,"div",18),e.TgZ(31,"div",12),e._uU(32),e.qZA()()(),e.YNc(33,Bt,20,8,"div",19),e.BQk()),2&Z){const L=e.oxw();e.xp6(4),e.Q6J("money",L.loan.amount),e.xp6(4),e.Q6J("money",L.getCurrentPaymentObj),e.xp6(6),e.hij(" ",L.loan.colvirId," "),e.xp6(4),e.hij(" ",e.xi3(19,8,L.loan.dateFrom,"d MMMM yyyy")," "),e.xp6(5),e.hij(" ",e.xi3(24,11,L.loan.dateTo,"d MMMM yyyy")," "),e.xp6(5),e.hij(" ",L.loan.effRate,"% "),e.xp6(4),e.hij(" ",L.loan.term," \u043c\u0435\u0441\u044f\u0446\u0435\u0432 "),e.xp6(1),e.Q6J("ngIf",L.company)}}let bt=(()=>{class Z{constructor(L,gt,It){this.router=L,this.loanService=gt,this.filesService=It}onDownload(){return(0,N.mG)(this,void 0,void 0,function*(){try{const L=yield this.loanService.getPdf(this.loan.id);this.filesService.downloadFile(L,`${this.loan.colvirId}.pdf`)}catch(L){console.error(L)}})}get getCurrentPaymentObj(){var L;return{amount:null===(L=this.currentPayment)||void 0===L?void 0:L.remainDebt,currency:this.loan.amount.currency}}}return Z.\u0275fac=function(L){return new(L||Z)(e.Y36(t.F0),e.Y36(b.B),e.Y36(yt.nS))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["j-loan-info"]],inputs:{loan:"loan",company:"company",currentPayment:"currentPayment"},decls:6,vars:2,consts:[[1,"loans_info"],[1,"container"],[1,"row"],[1,"offset-xl-2","col-xl-8","col-lg-10"],[4,"ngIf"],[3,"theme"],[1,"info"],["translate","LOANS.INFO.CREDIT_SUM",1,"info__header__sum","text-dark"],[1,"info__header__amount","text-dark"],[3,"money"],[1,"j-desc-row"],["translate","LOANS.INFO.REMAINING_DEBT",1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["translate","LOANS.INFO.DETAILS",1,"info__header","text-dark"],["translate","LOANS.INFO.AGREEMENT_NUMBER",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.REGISTRATION_DATE",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.END_DATE",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.INTEREST_RATE",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.LOAN_TERM",1,"j-desc-child","text-muted"],["class","info",4,"ngIf"],["translate","LOANS.INFO.WRITE_OFF_ACCOUNT",1,"info__header","text-dark"],["translate","LOANS.INFO.NAME",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.BIN_IIN",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.ACCOUNT",1,"j-desc-child","text-muted"],["translate","LOANS.INFO.KBE",1,"j-desc-child","text-muted"]],template:function(L,gt){1&L&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,nt,4,6,"ng-container",4),e.YNc(5,Lt,34,14,"ng-container",4),e.qZA()()()()),2&L&&(e.xp6(4),e.Q6J("ngIf",!gt.loan),e.xp6(1),e.Q6J("ngIf",gt.loan))},directives:[a.O5,l.xr,O.Pi,E.y],pipes:[a.uU,rt.O],styles:[".loans_info[_ngcontent-%COMP%]{background:#F6F7F8;padding-top:1.5rem}.info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0 1rem;background:#fff;border-radius:.75rem;max-width:435px}.info__header__sum[_ngcontent-%COMP%]{font-size:16px}.info__header__amount[_ngcontent-%COMP%]{font-weight:500;font-size:28px;margin-bottom:1rem}.info__header[_ngcontent-%COMP%]{font-weight:500;font-size:20px;margin-bottom:1rem}.loan-download-button[_ngcontent-%COMP%]{width:100%;margin-top:1rem;display:flex;align-items:center;justify-content:center}"]}),Z})();function $t(Z,et){if(1&Z){const L=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(L);const It=e.oxw(3);return It.onSchedulePageChanged(It.operationTypePage-1)}),e._uU(1," < "),e.qZA()}if(2&Z){const L=e.oxw(3);e.Q6J("disabled",0===L.operationTypePage)}}function an(Z,et){if(1&Z){const L=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const Ut=e.CHM(L).$implicit;return e.oxw(3).onSelect(Ut.code)}),e._uU(1),e.qZA()}if(2&Z){const L=et.$implicit,gt=e.oxw(3);e.ekj("active",gt.isSelected(L)),e.xp6(1),e.hij(" ",L.label," ")}}function Vt(Z,et){if(1&Z){const L=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(L);const It=e.oxw(3);return It.onSchedulePageChanged(It.operationTypePage+1)}),e._uU(1," > "),e.qZA()}if(2&Z){const L=e.oxw(3);e.Q6J("disabled",7*(L.operationTypePage+1)>=L.operationTypes.length)}}function An(Z,et){if(1&Z&&(e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,$t,2,1,"button",17),e.YNc(3,an,2,3,"button",18),e.YNc(4,Vt,2,1,"button",17),e.qZA()()),2&Z){const L=e.oxw(2);e.xp6(2),e.Q6J("ngIf",L.operationTypes.length>7),e.xp6(1),e.Q6J("ngForOf",L.operationTypeList),e.xp6(1),e.Q6J("ngIf",L.operationTypes.length>7)}}function Wt(Z,et){if(1&Z&&(e.TgZ(0,"div",13)(1,"div",3)(2,"div",4)(3,"div",7),e.YNc(4,An,5,3,"div",14),e.qZA()()()()),2&Z){const L=e.oxw();e.xp6(4),e.Q6J("ngIf",L.operationTypeList)}}function hn(Z,et){if(1&Z&&e._UZ(0,"j-loan-statement",21),2&Z){const L=e.oxw();e.Q6J("loan",L.loan)("schedule",L.schedule)("selected",L.selected)("scrollState",L.scrollState)}}function Ht(Z,et){if(1&Z&&e._UZ(0,"j-loan-info",22),2&Z){const L=e.oxw();e.Q6J("loan",L.loan)("company",L.company)("currentPayment",L.currentPayment)}}const nn=function(Z){return{scrolled:Z}},dt=[{path:":id",component:(()=>{class Z{constructor(L,gt,It,Ut,ln){this.router=L,this.route=gt,this.loanService=It,this.companyService=Ut,this.document=ln,this.unpaid=0,this.paymentsCount=0,this.subscription=new A.w,this.isLoading=!0,this.wrapperClasses="",this.isAnimating=!1,this.detailsClasses="",this.operationTypes=[],this.operationTypeList=[],this.operationTypePage=0,this.scrollState={coord_y:0,selectedTab:"statement"}}onScrollEvent(L){const gt=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.scrollState={coord_y:gt,selectedTab:this.selectedTab}}ngOnInit(){const L=this.route.queryParamMap.subscribe(It=>{It.get("view")?this.selectedTab=It.get("view"):this.router.navigate([],{queryParams:{view:"statement"},queryParamsHandling:"merge"})}),gt=this.route.params.subscribe(It=>{It.id&&(this.loanId=It.id,this.loadLoan())});this.subscription.add(L),this.subscription.add(gt)}loadLoan(){return(0,N.mG)(this,void 0,void 0,function*(){this.isLoading=!0;try{this.loan=yield this.loanService.getLoanById(this.loanId),this.loanService.getSchedule(this.loan.colvirReferenceId).then(L=>{this.schedule=L,this.parseSchedule();for(const[gt]of Object.entries(this.schedule.loanSchedule))this.operationTypes.push({label:gt,code:gt});this.onSchedulePageChanged(0),this.setSelected(this.operationTypes[0].code)}),this.companyService.getCompany(this.loan.companyId).then(L=>{this.company=L})}catch(L){this.errorText=L.description}finally{this.isLoading=!1}})}parseSchedule(){if(this.schedule)for(const[L,gt]of Object.entries(this.schedule.loanSchedule))for(const It of gt)It.currentPayment&&(this.currentPayment=It,this.setSelected(L)),this.currentPayment&&this.unpaid++,this.paymentsCount++}isSelected(L){return L===this.selected}onSelect(L){this.setSelected(L)}onSchedulePageChanged(L){this.operationTypePage=L,this.operationTypeList=[];for(let gt=7*L;gt<=7*(L+1);gt++)this.operationTypes[gt]&&this.operationTypeList.push(this.operationTypes[gt])}setSelected(L){this.selected=this.operationTypeList.find(gt=>L===gt.code)}setShowAll(L=!0){this.selected=null}goBack(){this.router.navigate(["/"])}ngOnDestroy(){this.subscription.unsubscribe()}}return Z.\u0275fac=function(L){return new(L||Z)(e.Y36(t.F0),e.Y36(t.gz),e.Y36(b.B),e.Y36(_.J),e.Y36(a.K0))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["j-loans"]],hostBindings:function(L,gt){1&L&&e.NdJ("scroll",function(Ut){return gt.onScrollEvent(Ut)},!1,e.Jf7)},decls:14,vars:12,consts:[[1,"loans_wrapper"],[1,"loans_top_wrapper",3,"ngClass"],[1,"loans_header"],[1,"container"],[1,"row"],["type","button",1,"btn","btn-outline-primary","close-btn",3,"click"],["name","chevronLeft","stroke","true","color","currentColor"],[1,"col-lg-10","col-xl-8","offset-lg-1","offset-xl-2"],[3,"loan","schedule","paymentsCount","unpaid","currentPayment","scrollState"],["class","loans_filter",4,"ngIf"],[1,"loans_body"],[3,"loan","schedule","selected","scrollState",4,"ngIf"],[3,"loan","company","currentPayment",4,"ngIf"],[1,"loans_filter"],["class","filter-header d-flex",4,"ngIf"],[1,"filter-header","d-flex"],[1,"filter-buttons","d-flex"],["type","button","class","btn btn-sm filter-btn",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-sm filter-btn year-btn","translate","",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","filter-btn",3,"disabled","click"],["type","button","translate","",1,"btn","btn-sm","filter-btn","year-btn",3,"click"],[3,"loan","schedule","selected","scrollState"],[3,"loan","company","currentPayment"]],template:function(L,gt){1&L&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return gt.goBack()}),e._UZ(6,"j-icon",6),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"j-loan-header",8)(9,"j-loan-tabs"),e.qZA()()()(),e.YNc(10,Wt,5,1,"div",9),e.qZA(),e.TgZ(11,"div",10),e.YNc(12,hn,1,4,"j-loan-statement",11),e.YNc(13,Ht,1,3,"j-loan-info",12),e.qZA()()),2&L&&(e.xp6(1),e.Q6J("ngClass",e.VKq(10,nn,gt.scrollState.coord_y>0&&"statement"===gt.selectedTab)),e.xp6(7),e.Q6J("loan",gt.loan)("schedule",gt.schedule)("paymentsCount",gt.paymentsCount)("unpaid",gt.unpaid)("currentPayment",gt.currentPayment)("scrollState",gt.scrollState),e.xp6(2),e.Q6J("ngIf","statement"===gt.selectedTab),e.xp6(2),e.Q6J("ngIf","statement"===gt.selectedTab),e.xp6(1),e.Q6J("ngIf","info"===gt.selectedTab))},directives:[a.mk,h.o,$,U,a.O5,a.sg,O.Pi,at,bt],styles:["[_nghost-%COMP%]   .filter-header[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 1279.98px){[_nghost-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{max-width:100%;overflow:auto}}[_nghost-%COMP%]   .filter-btn[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .loans_top_wrapper[_ngcontent-%COMP%]{position:sticky;top:0;background:#ffffff;z-index:3}@media (max-width: 1279.98px){[_nghost-%COMP%]   .loans_top_wrapper[_ngcontent-%COMP%]{padding-top:1.5rem}}[_nghost-%COMP%]   .loans_top_wrapper.scrolled[_ngcontent-%COMP%]   j-loan-tabs[_ngcontent-%COMP%]{transform:translate(-1000px);height:0;display:block}[_nghost-%COMP%]   .loans_top_wrapper.scrolled[_ngcontent-%COMP%]   .loans_header[_ngcontent-%COMP%]{padding-top:1.5rem}@media (max-width: 1279.98px){[_nghost-%COMP%]   .loans_top_wrapper.scrolled[_ngcontent-%COMP%]   .loans_header[_ngcontent-%COMP%]{padding-top:0}}[_nghost-%COMP%]   .loans_header[_ngcontent-%COMP%]{padding-top:3.5rem}@media (max-width: 1279.98px){[_nghost-%COMP%]   .loans_header[_ngcontent-%COMP%]{padding-top:0}}[_nghost-%COMP%]   .loans_header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;padding:0;display:flex;align-items:center;justify-content:center;margin-top:-.5rem}@media (max-width: 1279.98px){[_nghost-%COMP%]   .loans_header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:relative;left:1rem;margin-bottom:1rem}}[_nghost-%COMP%]   .loans_filter[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px;background:#F6F7F8}"]}),Z})(),data:{title:"TRANSFERS.TITLE"}},{path:":id/statement",component:at},{path:":id/info",component:bt}];let Et=(()=>{class Z{}return Z.\u0275fac=function(L){return new(L||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[[t.Bz.forChild(dt)],t.Bz]}),Z})();var J=r(91995),mt=r(65832);let I=(()=>{class Z{}return Z.\u0275fac=function(L){return new(L||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[[a.ez,Et,J.m,mt.i]]}),Z})()},23498:(Pt,X,r)=>{"use strict";r.d(X,{B:()=>O});var a=r(70655),t=r(24850),N=r(17489);class A{constructor(M){(0,N.defaults)(this,M)}}var b=r(40520),_=r(8929),h=r(5e3),l=r(1790),E=r(26164);let O=(()=>{class F{constructor(G,f){this.apiService=G,this.companyService=f,this.cardsUpdated$=new _.xQ}getCorporateLoans(){return(0,a.mG)(this,void 0,void 0,function*(){const G=`companies/${this.companyService.currentId}/loans`,f=(new b.LE).set("includePrivate","true"),B=yield this.apiService.get(G,null,f);return this.loanList=B.map(k=>new A(k)),this.loanList})}getLoansAsObservable(){return this.apiService.getObservable(`companies/${this.companyService.currentId}/loans`,null).pipe((0,t.U)(f=>(this.loanList=f.map(B=>new A(B)),this.loanList)))}getLoanById(G){return(0,a.mG)(this,void 0,void 0,function*(){return this.loanList||(yield this.getCorporateLoans()),this.findLoanById(G)})}getPdf(G){return(0,a.mG)(this,void 0,void 0,function*(){const f=`companies/${this.companyService.currentId}/loans/${G}/download`;let B=new b.WM;B=B.set("Accept-File","application/pdf"),B=B.set("Content-Type","application/octet-stream");const k=new b.LE;return this.apiService.get(f,B,k,{responseType:"blob"})})}findLoanById(G){return this.loanList.find(f=>f.id===G)}getSchedule(G){return this.apiService.get(`companies/${this.companyService.currentId}/loans/${G}/schedule`)}}return F.\u0275fac=function(G){return new(G||F)(h.LFG(l.sM),h.LFG(E.J))},F.\u0275prov=h.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},20382:(Pt,X,r)=>{"use strict";r.d(X,{C:()=>b});var a=r(29616),t=r(5e3),N=r(40703),A=r(69544),e=r(89854);let b=(()=>{class _{constructor(l){this.modalService=l}showMainModal(){this.modalService.open(a.T,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0})}}return _.\u0275fac=function(l){return new(l||_)(t.Y36(N.FF))},_.\u0275cmp=t.Xpm({type:_,selectors:[["j-aml-alert"]],decls:9,vars:6,consts:[[1,"aml-alert"],["inlineSVG","/assets/icons/v2/warning-16.svg"],[1,"aml-link",3,"click"],["inlineSVG","/assets/icons/v2/arrow-right-16.svg"]],template:function(l,E){1&l&&(t.TgZ(0,"div",0),t._UZ(1,"span",1),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return E.showMainModal()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"span",3),t.qZA()()),2&l&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"CURRENCY_PAYMENT.AML.ALERT")),t.xp6(3),t.hij(" ",t.lcZ(7,4,"SHARED.MORE")," "))},directives:[A.d$],pipes:[e.X$],styles:[".aml-alert[_ngcontent-%COMP%]{background:#fff2f2;color:red;display:flex;align-items:center;padding:14px 12px;gap:12px;border:1px solid #ffb4b4;border-radius:12px;margin-bottom:16px}.aml-link[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:0;font-size:14px;margin-left:auto;color:red;display:inline-flex;align-items:center}.aml-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px}"],changeDetection:0}),_})()},60348:(Pt,X,r)=>{"use strict";r.d(X,{g:()=>e});var a=r(5e3),t=r(40703),N=r(89854),A=r(69808);let e=(()=>{class b{constructor(h){this.modal=h}}return b.\u0275fac=function(h){return new(h||b)(a.Y36(t.Kz))},b.\u0275cmp=a.Xpm({type:b,selectors:[["j-aml-main-modal"]],decls:10,vars:11,consts:[[1,"p-5","text-center"],[3,"innerHTML"],[1,"btn","btn-block","btn-primary","mt-6",3,"click"]],template:function(h,l){1&h&&(a.TgZ(0,"div",0)(1,"h4"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a._UZ(4,"article",1),a.ALo(5,"translate"),a.TgZ(6,"button",2),a.NdJ("click",function(){return l.modal.close()}),a._uU(7),a.ALo(8,"uppercase"),a.ALo(9,"translate"),a.qZA()()),2&h&&(a.xp6(2),a.Oqu(a.lcZ(3,3,"CURRENCY_PAYMENT.AML.MAIN_MODAL.TITLE")),a.xp6(2),a.Q6J("innerHTML",a.lcZ(5,5,"CURRENCY_PAYMENT.AML.MAIN_MODAL.CONTENT"),a.oJD),a.xp6(3),a.Oqu(a.lcZ(8,7,a.lcZ(9,9,"SHARED.OK"))))},pipes:[N.X$,A.gd],styles:[""],changeDetection:0}),b})()},29616:(Pt,X,r)=>{"use strict";r.d(X,{T:()=>e});var a=r(5e3),t=r(40703),N=r(89854),A=r(69808);let e=(()=>{class b{constructor(h){this.modal=h}}return b.\u0275fac=function(h){return new(h||b)(a.Y36(t.Kz))},b.\u0275cmp=a.Xpm({type:b,selectors:[["j-aml-warning-modal"]],decls:10,vars:11,consts:[[1,"p-5","text-center"],[3,"innerHTML"],[1,"btn","btn-block","btn-primary","mt-6",3,"click"]],template:function(h,l){1&h&&(a.TgZ(0,"div",0)(1,"h4"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a._UZ(4,"article",1),a.ALo(5,"translate"),a.TgZ(6,"button",2),a.NdJ("click",function(){return l.modal.close()}),a._uU(7),a.ALo(8,"uppercase"),a.ALo(9,"translate"),a.qZA()()),2&h&&(a.xp6(2),a.Oqu(a.lcZ(3,3,"CURRENCY_PAYMENT.AML.WARNING_MODAL.TITLE")),a.xp6(2),a.Q6J("innerHTML",a.lcZ(5,5,"CURRENCY_PAYMENT.AML.WARNING_MODAL.CONTENT"),a.oJD),a.xp6(3),a.Oqu(a.lcZ(8,7,a.lcZ(9,9,"SHARED.OK"))))},pipes:[N.X$,A.gd],styles:[""],changeDetection:0}),b})()},62981:(Pt,X,r)=>{"use strict";r.d(X,{Q:()=>Y});var a=r(93075),t=r(36053),N=r(80013),A=r(75778),e=r(1059),b=r(24850),_=r(5e3),h=r(40703),l=r(28706),E=r(9010),O=r(82699),F=r(37074),M=r(43915),G=r(23601),f=r(69808),B=r(84685),k=r(89854);function $(S,U){if(1&S){const x=_.EpF();_.TgZ(0,"li",14)(1,"div",15),_.NdJ("click",function(){const At=_.CHM(x).$implicit;return _.oxw().closeModal(At)}),_.TgZ(2,"div",16),_._UZ(3,"j-entity-logo",17),_.qZA(),_.TgZ(4,"div",18)(5,"p",19),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.TgZ(8,"p",20),_._uU(9),_.qZA()()()()}if(2&S){const x=U.$implicit;_.xp6(3),_.Q6J("name",x.bic),_.xp6(3),_.Oqu(x.salaryTransitIban?_.lcZ(7,4,"PAYMENTS.BANKS_RECEIVERS.IBAN")+x.salaryTransitIban:x.name),_.xp6(3),_.AsE("",x.bic,": ",x.name,"")}}function i(S,U){1&S&&(_.TgZ(0,"div")(1,"p",21),_._uU(2),_.ALo(3,"translate"),_.qZA()()),2&S&&(_.xp6(2),_.Oqu(_.lcZ(3,1,"PAYMENTS.BANKS_RECEIVERS.NOT_FOUND")))}let Y=(()=>{class S{constructor(x,ot,vt){this.modal=x,this.paymentsS=ot,this.dict=vt}ngOnInit(){this.search=new a.NI(""),this.list$=(0,t.aj)(this.dict.bankDictionary.items$,this.search.valueChanges.pipe((0,N.b)(100),(0,A.x)(),(0,e.O)(this.search.value))).pipe((0,b.U)(([x,ot])=>x.filter(vt=>this.paymentsS.bankReceiverSearchFn(ot,vt))))}closeModal(x){this.modal.close(x)}}return S.\u0275fac=function(x){return new(x||S)(_.Y36(h.Kz),_.Y36(l.cR),_.Y36(E.$))},S.\u0275cmp=_.Xpm({type:S,selectors:[["j-banks-receivers"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-2"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(x,ot){1&x&&(_.TgZ(0,"div",0)(1,"button",1),_.NdJ("click",function(){return ot.modal.dismiss()}),_._UZ(2,"img",2),_.ALo(3,"translate"),_.qZA(),_.TgZ(4,"div",3)(5,"h5"),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.TgZ(8,"div",4)(9,"j-form-field",5),_._UZ(10,"j-icon",6)(11,"input",7),_.ALo(12,"translate"),_.qZA()(),_.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"ul",11),_.YNc(17,$,10,6,"li",12),_.ALo(18,"async"),_.qZA(),_.YNc(19,i,4,3,"div",13),_.ALo(20,"async"),_.qZA()()()()()),2&x&&(_.xp6(2),_.s9C("alt",_.lcZ(3,6,"SHARED.CLOSE")),_.xp6(4),_.Oqu(_.lcZ(7,8,"PAYMENTS.BANKS_RECEIVERS.SEARCH")),_.xp6(5),_.Q6J("placeholder",_.lcZ(12,10,"PAYMENTS.BANKS_RECEIVERS.SEARCH"))("formControl",ot.search),_.xp6(6),_.Q6J("ngForOf",_.lcZ(18,12,ot.list$)),_.xp6(2),_.Q6J("ngIf",!_.lcZ(20,14,ot.list$)))},directives:[O.O8,F.o,M.X,G.m,a.Fj,a.JJ,a.oH,f.sg,B.k,f.O5],pipes:[k.X$,f.Ov],styles:[""]}),S})()},32309:(Pt,X,r)=>{"use strict";r.d(X,{$:()=>N});var a=r(5e3),t=r(89854);let N=(()=>{class A{constructor(){}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=a.Xpm({type:A,selectors:[["j-bic-info"]],decls:13,vars:12,consts:[[1,"p4"],[3,"innerHTML"]],template:function(b,_){1&b&&(a.TgZ(0,"article",0)(1,"p")(2,"strong"),a._uU(3),a.ALo(4,"translate"),a.qZA()(),a._UZ(5,"p",1),a.ALo(6,"translate"),a.TgZ(7,"p")(8,"strong"),a._uU(9),a.ALo(10,"translate"),a.qZA()(),a._UZ(11,"p",1),a.ALo(12,"translate"),a.qZA()),2&b&&(a.xp6(3),a.hij(" ",a.lcZ(4,4,"PAYMENTS.BIC_INFO.SWIFT.TITLE")," "),a.xp6(2),a.Q6J("innerHTML",a.lcZ(6,6,"PAYMENTS.BIC_INFO.SWIFT.DESCRIPTION"),a.oJD),a.xp6(4),a.hij(" ",a.lcZ(10,8,"PAYMENTS.BIC_INFO.BIC.TITLE")," "),a.xp6(2),a.Q6J("innerHTML",a.lcZ(12,10,"PAYMENTS.BIC_INFO.BIC.DESCRIPTION"),a.oJD))},pipes:[t.X$],styles:[""]}),A})()},87732:(Pt,X,r)=>{"use strict";r.d(X,{B:()=>H});var a=r(70655),t=r(42654),N=r(80013),A=r(75778),e=r(5e3),b=r(54557),_=r(82699),h=r(86984),l=r(23601),E=r(93075),O=r(66821),F=r(32534),M=r(40703),G=r(69544),f=r(61235),B=r(69808),k=r(23918),$=r(35803),i=r(32309),Y=r(89854);const S=["input"],U=function(){return{width:"100%",height:"56px","background-color":"#ECEEF1"}};function x(at,yt){1&at&&(e.TgZ(0,"div",7),e._UZ(1,"ngx-skeleton-loader",8),e.qZA()),2&at&&(e.xp6(1),e.Q6J("theme",e.DdM(1,U)))}function ot(at,yt){if(1&at){const rt=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const Nt=e.CHM(rt).$implicit;return e.oxw(2).onBankSelect(Nt)}),e._uU(1),e.qZA()}if(2&at){const rt=yt.$implicit,ht=e.oxw(2);e.xp6(1),e.hij(" ",ht.mapBankLabel(rt)," ")}}function vt(at,yt){if(1&at&&(e.TgZ(0,"div",7),e.YNc(1,ot,2,1,"div",9),e.qZA()),2&at){const rt=e.oxw();e.xp6(1),e.Q6J("ngForOf",rt.banks)}}function At(at,yt){1&at&&(e.ynx(0),e._UZ(1,"j-empty-placeholder",13),e.BQk())}function Zt(at,yt){if(1&at&&(e._uU(0),e.ALo(1,"translate")),2&at){const rt=e.oxw(2);e.hij(" ",e.lcZ(1,1,rt.placeholderText)," ")}}function kt(at,yt){if(1&at&&(e.TgZ(0,"div",7),e.YNc(1,At,2,0,"ng-container",11),e.YNc(2,Zt,2,3,"ng-template",null,12,e.W1O),e.qZA()),2&at){const rt=e.MAs(3),ht=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==ht.labelControl||null==ht.labelControl.value?null:ht.labelControl.value.length)>0)("ngIfElse",rt)}}function Yt(at,yt){1&at&&e._UZ(0,"j-bic-info")}let H=(()=>{class at{constructor(rt){this.currencyPaymentService=rt,this.labelText="CURRENCY_PAYMENT.RECIPIENT.BIC",this.placeholderText="CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED",this.isLoading=!1,this.isBicFocused=!1,this.subscription=new t.w}selectByBic(rt){return(0,a.mG)(this,void 0,void 0,function*(){yield this.retrieveBanks(rt);const ht=this.banks.find(_t=>_t.bic==rt);if(ht)return this.onBankSelect(ht)})}get errorParams(){var rt,ht;return(null===(rt=this.labelControl.errors)||void 0===rt?void 0:rt.bankRestricted)?{bankName:null===(ht=this.bankControl.value)||void 0===ht?void 0:ht.name}:null}ngOnInit(){this.listenBankSearch()}ngOnDestroy(){this.subscription.unsubscribe()}focus(){setTimeout(()=>{this.input.nativeElement.focus()},100)}onBicFocus(rt){this.isBicFocused=!0,this.labelControl.setValue(""),this.banks=[]}onBicBlur(rt){setTimeout(()=>{this.isBicFocused=!1},300)}mapBankLabel(rt){return`${rt.bic} - ${rt.name}`}onBankSelect(rt){this.labelControl.setValue(this.mapBankLabel(rt),{emitEvent:!1}),this.bankControl.setValue(rt)}listenBankSearch(){var rt;this.subscription.add(null===(rt=this.labelControl)||void 0===rt?void 0:rt.valueChanges.pipe((0,N.b)(300)).pipe((0,A.x)()).subscribe(ht=>{(null==ht?void 0:ht.length)>=1&&this.retrieveBanks(ht,this.countryCode)}))}retrieveBanks(rt,ht=null){return(0,a.mG)(this,void 0,void 0,function*(){this.isLoading=!0;const _t=(null==ht?void 0:ht.substring(0,2))||null;try{this.banks=yield this.currencyPaymentService.getBanks(rt,_t)}catch(Nt){}finally{this.isLoading=!1}})}}return at.\u0275fac=function(rt){return new(rt||at)(e.Y36(b.h))},at.\u0275cmp=e.Xpm({type:at,selectors:[["j-foreign-bank-select"]],viewQuery:function(rt,ht){if(1&rt&&e.Gf(S,5),2&rt){let _t;e.iGM(_t=e.CRH())&&(ht.input=_t.first)}},inputs:{labelControl:"labelControl",bankControl:"bankControl",countryCode:"countryCode",errorMessages:"errorMessages",labelText:"labelText",placeholderText:"placeholderText"},decls:14,vars:15,consts:[["type","text","jFormInput","","jFocusOnReturn","",1,"form-control","bic-input",3,"formControl","focus","blur"],["input",""],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-medium","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[3,"control","errorMessages","params"],[1,"bic-dropdown",3,"hidden"],["class","bic-dropdown-body",4,"ngIf"],["bicInfo",""],[1,"bic-dropdown-body"],["count","4",3,"theme"],["class","j-option-label text-wrap",3,"click",4,"ngFor","ngForOf"],[1,"j-option-label","text-wrap",3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],["label","SHARED.SEARCH_NOT_FOUND"]],template:function(rt,ht){if(1&rt&&(e.TgZ(0,"j-form-field")(1,"j-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",0,1),e.NdJ("focus",function(Nt){return ht.onBicFocus(Nt)})("blur",function(Nt){return ht.onBicBlur(Nt)}),e.qZA(),e._UZ(6,"a",2)(7,"j-error",3),e.qZA(),e.TgZ(8,"div",4),e.YNc(9,x,2,2,"div",5),e.YNc(10,vt,2,1,"div",5),e.YNc(11,kt,4,2,"div",5),e.qZA(),e.YNc(12,Yt,1,0,"ng-template",null,6,e.W1O)),2&rt){const _t=e.MAs(13);e.xp6(2),e.Oqu(e.lcZ(3,13,ht.labelText)),e.xp6(2),e.ekj("has-dropdown",null==ht.banks?null:ht.banks.length),e.Q6J("formControl",ht.labelControl),e.xp6(2),e.Q6J("ngbTooltip",_t)("inlineSVG","/assets/icons/payments/question.svg"),e.xp6(1),e.Q6J("control",ht.labelControl)("errorMessages",ht.errorMessages)("params",ht.errorParams),e.xp6(1),e.Q6J("hidden",!ht.isBicFocused),e.xp6(1),e.Q6J("ngIf",ht.isLoading),e.xp6(1),e.Q6J("ngIf",!ht.isLoading&&(null==ht.banks?null:ht.banks.length)),e.xp6(1),e.Q6J("ngIf",!(ht.isLoading||null!=ht.banks&&ht.banks.length))}},directives:[_.O8,h.I,l.m,E.Fj,O.v,E.JJ,E.oH,F.v,M._L,G.d$,f.k,B.O5,k.xr,B.sg,$.j,i.$],pipes:[Y.X$],styles:["[_nghost-%COMP%]{display:block;position:relative}.bic-dropdown[_ngcontent-%COMP%]{border-radius:0 8px 8px 0;left:0;right:0;padding:1.5rem;background:#fff;position:absolute;max-height:300px;height:30vh;z-index:1000;box-shadow:0 14px 16px #0000000d}.bic-dropdown[_ngcontent-%COMP%]   .j-option-label[_ngcontent-%COMP%]{cursor:pointer}.bic-input.has-dropdown[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.bic-dropdown-body[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;height:100%;overflow-y:auto;padding-right:.5rem}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}"]}),at})()},63289:(Pt,X,r)=>{"use strict";r.d(X,{g:()=>e});var a=r(5e3),t=r(69808),N=r(10532);function A(b,_){if(1&b&&(a._UZ(0,"div",3),a.ALo(1,"highlight")),2&b){const h=a.oxw();a.Q6J("innerHTML",a.xi3(1,1,h.bic,h.searchTerm),a.oJD)}}let e=(()=>{class b{constructor(){this.selected=new a.vpe}get bic(){if(this.recipient.bankBic&&this.recipient.bankName)return`${this.recipient.bankBic} - ${this.recipient.bankName}`}onSelect(){this.selected.emit(this.recipient)}}return b.\u0275fac=function(h){return new(h||b)},b.\u0275cmp=a.Xpm({type:b,selectors:[["j-foreign-contracts-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:4,vars:5,consts:[[1,"recipient__account","p3","mt-3","pt-3",3,"click"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],["class","text-muted p3 recipient__country mb-0",3,"innerHTML",4,"ngIf"],[1,"text-muted","p3","recipient__country","mb-0",3,"innerHTML"]],template:function(h,l){1&h&&(a.TgZ(0,"div",0),a.NdJ("click",function(){return l.onSelect()}),a._UZ(1,"h5",1),a.ALo(2,"highlight"),a.YNc(3,A,2,4,"div",2),a.qZA()),2&h&&(a.xp6(1),a.Q6J("innerHTML",a.xi3(2,2,l.recipient.name,l.searchTerm),a.oJD),a.xp6(2),a.Q6J("ngIf",l.bic))},directives:[t.O5],pipes:[N.S],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:flex;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),b})()},84722:(Pt,X,r)=>{"use strict";r.d(X,{A:()=>_});var a=r(70655),t=r(5e3),N=r(40703);function A(h,l){1&h&&t._UZ(0,"j-empty-placeholder",9)}function e(h,l){1&h&&t._UZ(0,"j-empty-placeholder",10)}function b(h,l){if(1&h){const E=t.EpF();t.TgZ(0,"j-foreign-contracts-recipient",11),t.NdJ("selected",function(F){return t.CHM(E),t.oxw().onRecipientSelect(F)}),t.qZA()}if(2&h){const E=l.$implicit,O=t.oxw();t.Q6J("recipient",E)("searchTerm",O.searchTerm)}}let _=(()=>{class h{constructor(E){this.modal=E,this.searchTerm=""}ngOnInit(){this.filteredRecipients=[...this.recipients]}onQueryChange(E){return(0,a.mG)(this,void 0,void 0,function*(){this.searchTerm=E,E||(this.filteredRecipients=[...this.recipients]),this.filteredRecipients=this.recipients.filter(O=>this.includesQuery(O.name,E)||this.includesQuery(O.bankBic,E))})}onRecipientSelect(E){this.modal.close(E)}onClose(){this.modal.dismiss()}includesQuery(E,O){return null==E?void 0:E.toLowerCase().includes(null==O?void 0:O.toLowerCase())}}return h.\u0275fac=function(E){return new(E||h)(t.Y36(N.Kz))},h.\u0275cmp=t.Xpm({type:h,selectors:[["j-foreign-contracts-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(E,O){1&E&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"h5",2),t.TgZ(3,"div",3)(4,"j-search-input",4),t.NdJ("valueChanged",function(M){return O.onQueryChange(M)}),t.qZA()()(),t.YNc(5,A,1,0,"j-empty-placeholder",5),t.YNc(6,e,1,0,"j-empty-placeholder",6),t.TgZ(7,"div",7),t.YNc(8,b,1,2,"j-foreign-contracts-recipient",8),t.qZA()()),2&E&&(t.xp6(4),t.Q6J("placeholder","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.SEARCH"),t.xp6(1),t.Q6J("ngIf",0==(null==O.recipients?null:O.recipients.length)),t.xp6(1),t.Q6J("ngIf",(null==O.recipients?null:O.recipients.length)>0&&0==(null==O.filteredRecipients?null:O.filteredRecipients.length)),t.xp6(2),t.Q6J("ngForOf",O.filteredRecipients))},styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:flex;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),h})()},82329:(Pt,X,r)=>{"use strict";r.d(X,{V:()=>A});var a=r(5e3),t=r(89854);function N(e,b){if(1&e){const _=a.EpF();a.TgZ(0,"div",4),a.NdJ("click",function(){const E=a.CHM(_).$implicit;return a.oxw().onSelect(E)}),a.TgZ(1,"div",5),a._UZ(2,"span",6),a._uU(3,": "),a._UZ(4,"span",7),a.ALo(5,"highlight"),a.ALo(6,"formatIban"),a.qZA(),a.TgZ(7,"div",8),a._UZ(8,"span",7),a.ALo(9,"highlight"),a._uU(10,": "),a._UZ(11,"span",7),a.ALo(12,"highlight"),a.qZA()()}if(2&e){const _=b.$implicit,h=a.oxw();a.xp6(4),a.Q6J("innerHTML",a.xi3(5,3,a.lcZ(6,6,_.iban),h.searchTerm),a.oJD),a.xp6(4),a.Q6J("innerHTML",a.xi3(9,8,_.bic,h.searchTerm),a.oJD),a.xp6(3),a.Q6J("innerHTML",a.xi3(12,11,_.bankName,h.searchTerm),a.oJD)}}let A=(()=>{class e{constructor(_){this.translateService=_,this.selected=new a.vpe}get countryName(){var _,h,l,E,O,F;switch(this.translateService.currentLang){case"ru":default:return null===(h=null===(_=this.recipient)||void 0===_?void 0:_.country)||void 0===h?void 0:h.nameRu;case"kk":return null===(E=null===(l=this.recipient)||void 0===l?void 0:l.country)||void 0===E?void 0:E.nameKk;case"en":return null===(F=null===(O=this.recipient)||void 0===O?void 0:O.country)||void 0===F?void 0:F.nameEn}}onSelect(_){this.selected.emit({recipient:this.recipient,account:_})}}return e.\u0275fac=function(_){return new(_||e)(a.Y36(t.sK))},e.\u0275cmp=a.Xpm({type:e,selectors:[["j-foreign-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:6,vars:9,consts:[[1,"recipient"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],[1,"text-muted","p3","recipient__country",3,"innerHTML"],["class","recipient__account p3",3,"click",4,"ngFor","ngForOf"],[1,"recipient__account","p3",3,"click"],[1,"text-dark"],["translate","CURRENCY_PAYMENT.DICTIONARY.IBAN"],[3,"innerHTML"],[1,"text-muted"]],template:function(_,h){1&_&&(a.TgZ(0,"div",0),a._UZ(1,"h5",1),a.ALo(2,"highlight"),a._UZ(3,"div",2),a.ALo(4,"highlight"),a.YNc(5,N,13,14,"div",3),a.qZA()),2&_&&(a.xp6(1),a.Q6J("innerHTML",a.xi3(2,3,h.recipient.name,h.searchTerm),a.oJD),a.xp6(2),a.Q6J("innerHTML",a.xi3(4,6,h.countryName,h.searchTerm),a.oJD),a.xp6(2),a.Q6J("ngForOf",h.recipient.accounts))},styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:flex;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),e})()},47680:(Pt,X,r)=>{"use strict";r.d(X,{P:()=>h});var a=r(70655),t=r(5e3),N=r(40703),A=r(61326);function e(l,E){1&l&&t._UZ(0,"j-empty-placeholder",9)}function b(l,E){1&l&&t._UZ(0,"j-empty-placeholder",10)}function _(l,E){if(1&l){const O=t.EpF();t.TgZ(0,"j-foreign-recipient",11),t.NdJ("selected",function(M){return t.CHM(O),t.oxw().onRecipientSelect(M)}),t.qZA()}if(2&l){const O=E.$implicit,F=t.oxw();t.Q6J("recipient",O)("searchTerm",F.searchTerm)}}let h=(()=>{class l{constructor(O,F){this.modal=O,this.recipientsService=F,this.searchTerm="",this.loadRecipients()}ngOnInit(){}loadRecipients(){return(0,a.mG)(this,void 0,void 0,function*(){this.recipients=yield this.recipientsService.getForeignRecipients(),this.filteredRecipients=[...this.recipients]})}onQueryChange(O){return(0,a.mG)(this,void 0,void 0,function*(){this.searchTerm=O,this.filteredRecipients=yield this.recipientsService.getForeignRecipients(O)})}onRecipientSelect(O){this.modal.close(O)}onClose(){this.modal.dismiss()}}return l.\u0275fac=function(O){return new(O||l)(t.Y36(N.Kz),t.Y36(A.F))},l.\u0275cmp=t.Xpm({type:l,selectors:[["j-foreign-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(O,F){1&O&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"h5",2),t.TgZ(3,"div",3)(4,"j-search-input",4),t.NdJ("valueChanged",function(G){return F.onQueryChange(G)}),t.qZA()()(),t.YNc(5,e,1,0,"j-empty-placeholder",5),t.YNc(6,b,1,0,"j-empty-placeholder",6),t.TgZ(7,"div",7),t.YNc(8,_,1,2,"j-foreign-recipient",8),t.qZA()()),2&O&&(t.xp6(4),t.Q6J("placeholder","CURRENCY_PAYMENT.DICTIONARY.SEARCH"),t.xp6(1),t.Q6J("ngIf",0==(null==F.recipients?null:F.recipients.length)),t.xp6(1),t.Q6J("ngIf",(null==F.recipients?null:F.recipients.length)>0&&0==(null==F.filteredRecipients?null:F.filteredRecipients.length)),t.xp6(2),t.Q6J("ngForOf",F.filteredRecipients))},styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:flex;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),l})()},95017:(Pt,X,r)=>{"use strict";r.d(X,{W:()=>F});var a=r(69808),t=r(5e3),N=r(89854);function A(M,G){if(1&M&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&M){const f=t.oxw(2);t.xp6(1),t.Oqu(null==f.primaryRecipient?null:f.primaryRecipient.name)}}function e(M,G){if(1&M&&(t.TgZ(0,"div",26)(1,"div",27)(2,"span",28),t._uU(3,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CONTRACT_TYPE"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",29),t._uU(6),t.qZA()()),2&M){const f=t.oxw(2);t.xp6(6),t.hij(" ",f.contract.type.description," ")}}function b(M,G){if(1&M&&(t.TgZ(0,"div",26)(1,"div",27)(2,"span",28),t._uU(3,"CONTRACTS.DETAILS.UNK"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",29),t._uU(6),t.qZA()()),2&M){const f=t.oxw(2);t.xp6(6),t.hij(" ",f.contract.registrationNumberContract," ")}}function _(M,G){if(1&M&&(t.TgZ(0,"div",26)(1,"div",27)(2,"span",28),t._uU(3,"CONTRACTS.DETAILS.UNK_DATE"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",29),t._uU(6),t.ALo(7,"date"),t.qZA()()),2&M){const f=t.oxw(2);t.xp6(6),t.hij(" ",t.xi3(7,1,f.contract.documentDate,"d MMMM yyyy")," ")}}function h(M,G){1&M&&(t.TgZ(0,"span"),t._uU(1," 1"),t.qZA())}function l(M,G){if(1&M&&(t.TgZ(0,"section",20)(1,"j-collapsible")(2,"j-collapsible-trigger")(3,"div",21)(4,"h5",11)(5,"span",28),t._uU(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),t.qZA(),t.YNc(7,h,2,0,"span",33),t.qZA(),t._UZ(8,"span",23),t.qZA()(),t.TgZ(9,"j-collapsible-body")(10,"div",24)(11,"div",26)(12,"div",27)(13,"span",28),t._uU(14,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),t.qZA(),t._uU(15,": "),t.qZA(),t.TgZ(16,"div",29),t._uU(17),t.qZA()(),t.TgZ(18,"div",26)(19,"div",27)(20,"span",28),t._uU(21,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),t.qZA(),t._uU(22,": "),t.qZA(),t.TgZ(23,"div",29),t._uU(24),t.qZA()(),t.TgZ(25,"div",26)(26,"div",27)(27,"span",28),t._uU(28,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.CITY"),t.qZA(),t._uU(29,": "),t.qZA(),t.TgZ(30,"div",29),t._uU(31),t.qZA()(),t.TgZ(32,"div",26)(33,"div",27)(34,"span",28),t._uU(35,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.BANK"),t.qZA(),t._uU(36,": "),t.qZA(),t.TgZ(37,"div",29),t._uU(38),t.qZA()()()()()()),2&M){const f=t.oxw(2);t.xp6(7),t.Q6J("ngIf",(null==f.extraRecipients?null:f.extraRecipients.length)>0),t.xp6(10),t.hij(" ",f.primaryRecipient.name," "),t.xp6(7),t.hij(" ",f.mapCountry(f.primaryRecipient)," "),t.xp6(7),t.hij(" ",f.primaryRecipient.cityName||f.primaryRecipient.defaultCityName||"-"," "),t.xp6(7),t.hij(" ",f.mapBank(f.primaryRecipient)," ")}}function E(M,G){if(1&M&&(t.TgZ(0,"section",20)(1,"j-collapsible")(2,"j-collapsible-trigger")(3,"div",21)(4,"h5",11)(5,"span",28),t._uU(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t._UZ(9,"span",23),t.qZA()(),t.TgZ(10,"j-collapsible-body")(11,"div",24)(12,"div",26)(13,"div",27)(14,"span",28),t._uU(15,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),t.qZA(),t._uU(16,": "),t.qZA(),t.TgZ(17,"div",29),t._uU(18),t.qZA()(),t.TgZ(19,"div",26)(20,"div",27)(21,"span",28),t._uU(22,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),t.qZA(),t._uU(23,": "),t.qZA(),t.TgZ(24,"div",29),t._uU(25),t.qZA()()()()()()),2&M){const f=G.$implicit,B=G.index,k=t.oxw(2);t.xp6(8),t.hij(" ",B+2,""),t.xp6(10),t.hij(" ",f.name," "),t.xp6(7),t.hij(" ",k.mapCountry(f)," ")}}function O(M,G){if(1&M){const f=t.EpF();t.TgZ(0,"section",1)(1,"div",2),t.NdJ("click",function(){return t.CHM(f),t.oxw().close()}),t.qZA(),t.TgZ(2,"section",3)(3,"section",4)(4,"article",5),t._UZ(5,"span",6),t.TgZ(6,"span",7),t._uU(7,"CURRENCY_PAYMENT.CONTRACTS.STATUS.REGED"),t.qZA()(),t.TgZ(8,"a",8),t.NdJ("click",function(k){return t.CHM(f),t.oxw().close(k)}),t.qZA()(),t.TgZ(9,"section",9)(10,"section",10)(11,"h3",11)(12,"span",12),t._uU(13,"\u2116"),t.qZA(),t._uU(14),t.qZA(),t.YNc(15,A,2,1,"div",13),t.TgZ(16,"div",14)(17,"div",15),t._UZ(18,"small",16),t.TgZ(19,"div",17),t._UZ(20,"j-money",18),t.qZA()(),t.TgZ(21,"div",15),t._UZ(22,"small",19),t.TgZ(23,"div",17),t._UZ(24,"j-money",18),t.qZA()()()(),t.TgZ(25,"section",20)(26,"j-collapsible")(27,"j-collapsible-trigger")(28,"div",21)(29,"h5",22),t._uU(30,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.TITLE"),t.qZA(),t._UZ(31,"span",23),t.qZA()(),t.TgZ(32,"j-collapsible-body")(33,"div",24),t.YNc(34,e,7,1,"div",25),t.TgZ(35,"div",26)(36,"div",27)(37,"span",28),t._uU(38,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_FROM"),t.qZA(),t._uU(39,": "),t.qZA(),t.TgZ(40,"div",29),t._uU(41),t.ALo(42,"date"),t.qZA()(),t.TgZ(43,"div",26)(44,"div",27)(45,"span",28),t._uU(46,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_TO"),t.qZA(),t._uU(47,": "),t.qZA(),t.TgZ(48,"div",29),t._uU(49),t.ALo(50,"date"),t.qZA()(),t.YNc(51,b,7,1,"div",25),t.YNc(52,_,8,4,"div",25),t.TgZ(53,"div",26)(54,"div",27)(55,"span",28),t._uU(56,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CURRENCIES"),t.qZA(),t._uU(57,": "),t.qZA(),t.TgZ(58,"div",29),t._uU(59),t.qZA()()()()()(),t.YNc(60,l,39,5,"section",30),t.YNc(61,E,26,3,"section",31),t.qZA()()()}if(2&M){const f=t.oxw();t.ekj("is-shown",f.isShown),t.xp6(2),t.ekj("is-shown",f.isShown),t.xp6(3),t.Q6J("inlineSVG","/assets/icons/counterparty/status.svg"),t.xp6(9),t.hij(" ",f.contract.contractNumber," "),t.xp6(1),t.Q6J("ngIf",0==(null==f.extraRecipients?null:f.extraRecipients.length)),t.xp6(5),t.Q6J("money",f.contract.amount),t.xp6(4),t.Q6J("money",f.contract.remainder),t.xp6(10),t.Q6J("ngIf",f.contract.type),t.xp6(7),t.hij("",t.xi3(42,17,f.contract.dateFrom,"d MMMM yyyy")," "),t.xp6(8),t.hij("",t.xi3(50,20,f.contract.dateTo,"d MMMM yyyy")," "),t.xp6(2),t.Q6J("ngIf",f.contract.registrationNumberContract),t.xp6(1),t.Q6J("ngIf",f.contract.documentDate),t.xp6(7),t.hij("",f.contract.permittedCurrencies.join(", ")," "),t.xp6(1),t.Q6J("ngIf",f.primaryRecipient),t.xp6(1),t.Q6J("ngForOf",f.extraRecipients)}}let F=(()=>{class M{constructor(f,B){this.document=f,this.translateService=B,this.isShown=!1}get primaryRecipient(){var f;return null===(f=this.contract.recipients)||void 0===f?void 0:f.find(B=>B.primary)}get extraRecipients(){var f;return null===(f=this.contract.recipients)||void 0===f?void 0:f.filter(B=>!B.primary)}mapBank(f){const{bankBic:B,bankName:k}=f;return`${B}${B?k?`- ${k}`:"":k||""}`}mapCountry(f){var B,k,$,i;if(f.country){const Y=f.country.code;let S="";switch(this.translateService.currentLang){case"ru":default:S=null===(B=f.country)||void 0===B?void 0:B.nameRu;case"kk":S=null===(k=f.country)||void 0===k?void 0:k.nameKk;case"en":S=null===($=f.country)||void 0===$?void 0:$.nameEn}return`${Y} - ${S}`}return f.primary&&(null===(i=this.contract.contractor)||void 0===i?void 0:i.country)?`${this.contract.contractor.country.code} - ${this.contract.contractor.country.name}`:f.countryCode?f.countryCode:"-"}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden"),this.close()}show(){this.document.body.classList.add("overflow-hidden"),this.isShown=!0}close(f=null){null==f||f.preventDefault(),this.document.body.classList.remove("overflow-hidden"),this.isShown=!1}}return M.\u0275fac=function(f){return new(f||M)(t.Y36(a.K0),t.Y36(N.sK))},M.\u0275cmp=t.Xpm({type:M,selectors:[["j-fx-contract-details"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","f-page-wrapper",3,"is-shown",4,"ngIf"],[1,"f-page-wrapper"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","fx"],[1,"fx__header"],[1,"fx__status"],[1,"text-success",3,"inlineSVG"],["translate","",1,"text-muted","ml-3","p3"],["href","#","inlineSVG","assets/icons/payments/close.svg",1,"fx__close","ml-auto",3,"click"],[1,"fx__scrollable"],[1,"fx__block","py-3","mt-0"],[1,"mb-0"],[1,"text-light"],["class","p2",4,"ngIf"],[1,"fx__amounts"],[1,"fx__amounts-item"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.AMOUNT",1,"text-muted"],[1,"text-dark"],[3,"money"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.REMAINDER",1,"text-muted","p4"],[1,"fx__block","fx__block--collapsible"],[1,"fx__collapse","d-flex","align-items-center"],["translate","",1,"mb-0"],["inlineSVG","assets/icons/payments/collapse.svg",1,"ml-auto","text-primary","fx__arrow"],[1,"fx__body","p2"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],[1,"text-muted","j-desc-child"],["translate",""],[1,"text-dark","j-desc-child"],["class","fx__block fx__block--collapsible",4,"ngIf"],["class","fx__block fx__block--collapsible",4,"ngFor","ngForOf"],[1,"p2"],[4,"ngIf"]],template:function(f,B){1&f&&t.YNc(0,O,62,23,"section",0),2&f&&t.Q6J("ngIf",B.contract)},styles:[".fx{padding:1rem;width:100%;max-width:425px}.fx__header{display:flex;align-items:center;justify-content:space-between;margin-top:.5rem;margin-bottom:1.5rem}.fx__status{padding-left:1rem;align-items:center;display:flex}.fx__scrollable{flex-grow:1;overflow-y:auto}.fx__scrollable::-webkit-scrollbar{width:8px}.fx__scrollable::-webkit-scrollbar-track{background:#fff}.fx__scrollable::-webkit-scrollbar-thumb{background:#d6dadf;border-radius:10px}.fx__collapse{padding:1rem 0}.j-collapsed .fx__body{padding-bottom:1rem}.j-collapsed .fx__collapse .fx__arrow{transform:rotate(0)}.fx__block{background:#fff;border-radius:.5rem;padding:1.5rem 1rem;margin:.75rem 0}.fx__block--collapsible{padding-top:0;padding-bottom:0;transition:all .2s ease-in-out}.fx__arrow{transition:all .2s ease-in-out;transform:rotate(540deg)}.fx__collapse{cursor:pointer;align-items:center}.fx__link{color:#1586bb;display:flex;padding-left:1rem;padding-right:1rem;width:100%}.fx__link:hover{color:#ef5630}.fx__icon{margin-right:.5rem;display:block}.fx__amounts{display:flex;border-top:1px solid #eceef1;margin-top:1.5rem;padding-top:1rem}.fx__amounts-item{flex-grow:1}.fx__amounts-item small{display:block;margin-bottom:.25rem}\n"],encapsulation:2}),M})()},87510:(Pt,X,r)=>{"use strict";r.d(X,{o:()=>$});var a=r(36053),t=r(80013),N=r(75778),A=r(1059),e=r(24850),b=r(93075),_=r(5e3),h=r(28706),l=r(40703),E=r(82699),O=r(37074),F=r(43915),M=r(23601),G=r(69808),f=r(89854);function B(i,Y){if(1&i){const S=_.EpF();_.TgZ(0,"li",14),_.NdJ("click",function(){const ot=_.CHM(S).$implicit;return _.oxw().closeModal(ot)}),_.TgZ(1,"div",15),_._uU(2),_.qZA()()}if(2&i){const S=Y.$implicit;_.xp6(2),_.Oqu(S.label||S.description)}}function k(i,Y){1&i&&(_.TgZ(0,"div")(1,"p",16),_._uU(2),_.ALo(3,"translate"),_.qZA()()),2&i&&(_.xp6(2),_.Oqu(_.lcZ(3,1,"PAYMENTS.DICTIONARY.NOT_FOUND")))}let $=(()=>{class i{constructor(S,U){this.paymentsS=S,this.modal=U,this.searchPlaceholder="PAYMENTS.DICTIONARY.SEARCH",this.title="PAYMENTS.DICTIONARY.TITLE"}ngOnInit(){this.search=new b.NI(""),this.list$=(0,a.aj)(this.store.items$,this.search.valueChanges.pipe((0,t.b)(100),(0,N.x)(),(0,A.O)(this.search.value))).pipe((0,e.U)(([S,U])=>S.filter(x=>this.searchFn?this.searchFn(U,x):this.paymentsS.genericSearchTerm(U,x))))}closeModal(S){this.modal.close(S)}}return i.\u0275fac=function(S){return new(S||i)(_.Y36(h.cR),_.Y36(l.Kz))},i.\u0275cmp=_.Xpm({type:i,selectors:[["j-generic-dictionary"]],inputs:{store:"store",searchFn:"searchFn",searchPlaceholder:"searchPlaceholder",title:"title"},decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(S,U){1&S&&(_.TgZ(0,"div",0)(1,"button",1),_.NdJ("click",function(){return U.modal.dismiss()}),_._UZ(2,"img",2),_.ALo(3,"translate"),_.qZA(),_.TgZ(4,"div",3)(5,"h5"),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.TgZ(8,"div",4)(9,"j-form-field",5),_._UZ(10,"j-icon",6)(11,"input",7),_.ALo(12,"translate"),_.qZA()(),_.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"ul",11),_.YNc(17,B,3,1,"li",12),_.ALo(18,"async"),_.qZA(),_.YNc(19,k,4,3,"div",13),_.ALo(20,"async"),_.qZA()()()()()),2&S&&(_.xp6(2),_.s9C("alt",_.lcZ(3,6,"SHARED.CLOSE")),_.xp6(4),_.Oqu(_.lcZ(7,8,U.title)),_.xp6(5),_.Q6J("placeholder",_.lcZ(12,10,U.searchPlaceholder))("formControl",U.search),_.xp6(6),_.Q6J("ngForOf",_.lcZ(18,12,U.list$)),_.xp6(2),_.Q6J("ngIf",0===_.lcZ(20,14,U.list$).length))},directives:[E.O8,O.o,F.X,M.m,b.Fj,b.JJ,b.oH,G.sg,G.O5],pipes:[f.X$,G.Ov],styles:[""],encapsulation:2}),i})()},60078:(Pt,X,r)=>{"use strict";r.d(X,{TP:()=>ot.T,PE:()=>G.P,BB:()=>Y,Rp:()=>t.R}),r(93751);var t=r(2776),l=(r(51782),r(30395),r(62981),r(87510),r(57553),r(32309),r(5e3)),E=r(89854);r(87732),r(95017);var G=r(47680),i=(r(82329),r(77462),r(84722),r(63289),r(40703));let Y=(()=>{class At{constructor(kt){this.modal=kt}ngOnInit(){}close(){this.modal.close()}}return At.\u0275fac=function(kt){return new(kt||At)(l.Y36(i.Kz))},At.\u0275cmp=l.Xpm({type:At,selectors:[["j-iin-check-error"]],decls:15,vars:9,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"]],template:function(kt,Yt){1&kt&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return Yt.modal.dismiss()}),l._UZ(3,"img",3),l.ALo(4,"translate"),l.qZA()(),l.TgZ(5,"div",4)(6,"div",5)(7,"h5"),l._uU(8),l.ALo(9,"translate"),l.qZA()()(),l.TgZ(10,"div",6)(11,"div",7)(12,"button",8),l.NdJ("click",function(){return Yt.close()}),l._uU(13),l.ALo(14,"translate"),l.qZA()()()()),2&kt&&(l.xp6(3),l.s9C("alt",l.lcZ(4,3,"SHARED.CLOSE")),l.xp6(5),l.Oqu(l.lcZ(9,5,"PAYMENTS.IIN_CHECK_ERROR")),l.xp6(5),l.hij("",l.lcZ(14,7,"SHARED.CLOSE")," "))},pipes:[E.X$],styles:[""]}),At})();r(59596),r(20382),r(60348);var ot=r(29616)},2776:(Pt,X,r)=>{"use strict";r.d(X,{R:()=>i});var a=r(36053),t=r(80013),N=r(75778),A=r(1059),e=r(24850),b=r(93075),_=r(5e3),h=r(28706),l=r(9010),E=r(40703),O=r(82699),F=r(37074),M=r(43915),G=r(23601),f=r(69808),B=r(89854);function k(Y,S){if(1&Y){const U=_.EpF();_.TgZ(0,"li",14),_.NdJ("click",function(){const vt=_.CHM(U).$implicit;return _.oxw().closeModal(vt)}),_.TgZ(1,"div",15),_._uU(2),_.qZA()()}if(2&Y){const U=S.$implicit;_.xp6(2),_.Oqu(U.label)}}function $(Y,S){1&Y&&(_.TgZ(0,"div")(1,"p",16),_._uU(2),_.ALo(3,"translate"),_.qZA()()),2&Y&&(_.xp6(2),_.Oqu(_.lcZ(3,1,"PAYMENTS.DICTIONARY.KNP_NOT_FOUND")))}let i=(()=>{class Y{constructor(U,x,ot){this.paymentsS=U,this.dictionaries=x,this.modal=ot}ngOnInit(){this.search=new b.NI(""),this.list$=(0,a.aj)([this.dictionaries.KNPDictionary.items$,this.search.valueChanges.pipe((0,t.b)(100),(0,N.x)(),(0,A.O)(this.search.value))]).pipe((0,e.U)(([U,x])=>this.paymentType?this.dictionaries.selectByPaymentType(U,{type:this.paymentType}).filter(vt=>this.paymentsS.genericSearchTerm(x,vt)).sort((vt,At)=>vt.code>At.code?1:-1):U.filter(ot=>this.paymentsS.genericSearchTerm(x,ot)).sort((ot,vt)=>ot.code>vt.code?1:-1)))}closeModal(U){this.modal.close(U)}}return Y.\u0275fac=function(U){return new(U||Y)(_.Y36(h.cR),_.Y36(l.$),_.Y36(E.Kz))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["j-knp-dictionary"]],inputs:{paymentType:"paymentType"},decls:20,vars:13,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(U,x){1&U&&(_.TgZ(0,"div",0)(1,"button",1),_.NdJ("click",function(){return x.modal.dismiss()}),_._UZ(2,"img",2),_.qZA(),_.TgZ(3,"div",3)(4,"h5"),_._uU(5),_.ALo(6,"translate"),_.qZA(),_.TgZ(7,"div",4)(8,"j-form-field",5),_._UZ(9,"j-icon",6)(10,"input",7),_.ALo(11,"translate"),_.qZA()(),_.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"ul",11),_.YNc(16,k,3,1,"li",12),_.ALo(17,"async"),_.qZA(),_.YNc(18,$,4,3,"div",13),_.ALo(19,"async"),_.qZA()()()()()),2&U&&(_.xp6(5),_.Oqu(_.lcZ(6,5,"PAYMENTS.DICTIONARY.TITLE")),_.xp6(5),_.Q6J("placeholder",_.lcZ(11,7,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",x.search),_.xp6(6),_.Q6J("ngForOf",_.lcZ(17,9,x.list$)),_.xp6(2),_.Q6J("ngIf",0===_.lcZ(19,11,x.list$).length))},directives:[O.O8,F.o,M.X,G.m,b.Fj,b.JJ,b.oH,f.sg,f.O5],pipes:[B.X$,f.Ov],styles:[""],encapsulation:2}),Y})()},57553:(Pt,X,r)=>{"use strict";r.d(X,{A:()=>A});var a=r(5e3),t=r(40703),N=r(89854);let A=(()=>{class e{constructor(_){this.modal=_}ngOnInit(){}cancel(){this.modal.close(!1)}continue(){this.modal.close(!0)}}return e.\u0275fac=function(_){return new(_||e)(a.Y36(t.Kz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["j-payment-guard-modal"]],decls:21,vars:15,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-link",3,"click"]],template:function(_,h){1&_&&(a.TgZ(0,"div",0)(1,"div",1)(2,"button",2),a.NdJ("click",function(){return h.modal.dismiss()}),a._UZ(3,"img",3),a.ALo(4,"translate"),a.qZA()(),a.TgZ(5,"div",4)(6,"div",5)(7,"h5"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"p"),a._uU(11),a.ALo(12,"translate"),a.qZA()()(),a.TgZ(13,"div",6)(14,"div",7)(15,"button",8),a.NdJ("click",function(){return h.continue()}),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.TgZ(18,"button",9),a.NdJ("click",function(){return h.cancel()}),a._uU(19),a.ALo(20,"translate"),a.qZA()()()()),2&_&&(a.xp6(3),a.s9C("alt",a.lcZ(4,5,"SHARED.CLOSE")),a.xp6(5),a.Oqu(a.lcZ(9,7,"PAYMENTS.GUARD_MODAL.TITLE")),a.xp6(3),a.Oqu(a.lcZ(12,9,"PAYMENTS.GUARD_MODAL.DESCRIPTION")),a.xp6(5),a.Oqu(a.lcZ(17,11,"PAYMENTS.GUARD_MODAL.EXIT")),a.xp6(3),a.Oqu(a.lcZ(20,13,"SHARED.CANCEL")))},pipes:[N.X$],styles:[""]}),e})()},30395:(Pt,X,r)=>{"use strict";r.d(X,{R:()=>$});var a=r(93075),t=r(41359),N=r(7102),A=r(5e3),e=r(40703),b=r(59516),_=r(26164),h=r(26484),l=r(89854),E=r(77501);function O(i,Y){1&i&&A.GkF(0)}function F(i,Y){if(1&i&&(A.TgZ(0,"h3",16),A._UZ(1,"j-money",17),A.qZA()),2&i){const S=A.oxw();A.xp6(1),A.Q6J("money",S.money)}}function M(i,Y){if(1&i&&(A._UZ(0,"h3",18),A.ALo(1,"translate")),2&i){const S=A.oxw();A.Q6J("innerHTML",A.lcZ(1,1,S.subtitle),A.oJD)}}function G(i,Y){if(1&i&&(A.TgZ(0,"p",19)(1,"span"),A._uU(2),A.ALo(3,"translate"),A.qZA(),A._uU(4,"\xa0"),A._UZ(5,"j-money",17),A.qZA()),2&i){const S=A.oxw();A.xp6(2),A.hij("",A.lcZ(3,2,"PAYMENTS.RESULT_MODAL.COMMISSION"),":"),A.xp6(3),A.Q6J("money",S.payment.details.commission)}}function f(i,Y){if(1&i){const S=A.EpF();A.TgZ(0,"div",12)(1,"button",20),A.NdJ("click",function(){return A.CHM(S),A.oxw().goToHistory()}),A._uU(2),A.ALo(3,"translate"),A.qZA()()}2&i&&(A.xp6(2),A.Oqu(A.lcZ(3,1,"PAYMENTS.RESULT_MODAL.CHECK_STATUS")))}function B(i,Y){1&i&&(A._UZ(0,"img",21),A.ALo(1,"translate")),2&i&&A.s9C("alt",A.lcZ(1,1,"SHARED.DONE"))}function k(i,Y){1&i&&(A._UZ(0,"img",22),A.ALo(1,"translate")),2&i&&A.s9C("alt",A.lcZ(1,1,"SHARED.ERROR"))}let $=(()=>{class i{constructor(S,U,x,ot,vt,At){this.modal=S,this.router=U,this.companyService=x,this.maskedService=ot,this.translate=vt,this.navService=At,this.hasRights=!0,this.PAYMENT_TYPE=N.V_,this.subscribe=new a.NI(!1)}ngOnInit(){}get money(){var S;return(null===(S=this.payment)||void 0===S?void 0:S.type)==N.V_.FOREIGN?this.payment.details.paymentAmount:{amount:Math.abs(this.maskedService.getNumberedAmount(this.amount)),currency:this.currency}}get subtitle(){let S="";return S=this.result?this.updateCreated?"PAYMENTS.PAYMENT_EDITED":this.hasRights?this.multySubscribers?this.companyService.isPrimaryAuthority()?"PAYMENTS.PAYMENT_SENT_FOR_SIGN":"PAYMENTS.PAYMENT_SIGNED":"PAYMENTS.PAYMENT_SIGNED_AND_SENT":"PAYMENTS.CREATED_FOR_SIGN":"SHARED.ERROR",this.translate.instant(S)}closeModal(S,U){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),U&&this.router.navigate(["/"]),this.modal.close({subscribe:this.subscribe.value,createNew:S})}goToHistory(){var S,U;if(this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.result){let x="tenge";(null===(S=this.payment)||void 0===S?void 0:S.category)==N.nK.FOREIGN?x="foreign":(null===(U=this.payment)||void 0===U?void 0:U.category)==N.nK.CONVERSION&&(x="conversion"),this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.router.navigate([`/history/${x}`],{queryParams:{paymentStatus:t.$9.IN_PROGRESS}}):this.router.navigate([`/history/${x}`],{queryParams:{paymentStatus:t.$9.FOR_SIGN}})}this.modal.close()}}return i.\u0275fac=function(S){return new(S||i)(A.Y36(e.Kz),A.Y36(b.F0),A.Y36(_.J),A.Y36(h.O),A.Y36(l.sK),A.Y36(E.t))},i.\u0275cmp=A.Xpm({type:i,selectors:[["j-payment-result"]],inputs:{result:"result",currency:"currency",amount:"amount",multySubscribers:"multySubscribers",hasRights:"hasRights",message:"message",payment:"payment",updateCreated:"updateCreated"},decls:21,vars:17,consts:[[1,"result-modal"],[1,"modal-header"],[1,"modal-body","result-body","pb-0"],[1,"text-center"],[1,"result-modal--label","mb-2"],[4,"ngIf","ngIfThen","ngIfElse"],["class","light mb-3 mt-2",4,"ngIf"],["class","light mb-3 mt-2",3,"innerHTML",4,"ngIf"],["class","text-muted mt-0 mb-1",4,"ngIf"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-body","result-body"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"btn","btn-block",3,"click"],["success",""],["failure",""],[1,"light","mb-3","mt-2"],[3,"money"],[1,"light","mb-3","mt-2",3,"innerHTML"],[1,"text-muted","mt-0","mb-1"],[1,"btn","btn-primary","btn-block",3,"click"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"]],template:function(S,U){if(1&S&&(A.TgZ(0,"div",0),A._UZ(1,"div",1),A.TgZ(2,"div",2)(3,"div",3)(4,"div",4),A.YNc(5,O,1,0,"ng-container",5),A.qZA(),A.YNc(6,F,2,1,"h3",6),A.YNc(7,M,2,3,"h3",7),A.YNc(8,G,6,4,"p",8),A._UZ(9,"p",9),A.ALo(10,"translate"),A.qZA()(),A.TgZ(11,"div",10),A.YNc(12,f,4,3,"div",11),A.TgZ(13,"div",12)(14,"button",13),A.NdJ("click",function(){return U.closeModal(!1,!0)}),A._uU(15),A.ALo(16,"translate"),A.qZA()()()(),A.YNc(17,B,2,3,"ng-template",null,14,A.W1O),A.YNc(19,k,2,3,"ng-template",null,15,A.W1O)),2&S){const x=A.MAs(18),ot=A.MAs(20);A.xp6(5),A.Q6J("ngIf",U.result)("ngIfThen",x)("ngIfElse",ot),A.xp6(1),A.Q6J("ngIf",U.result),A.xp6(1),A.Q6J("ngIf",!U.result),A.xp6(1),A.Q6J("ngIf",(null==U.payment?null:U.payment.type)==U.PAYMENT_TYPE.FOREIGN&&(null==U.payment||null==U.payment.details?null:U.payment.details.commission)),A.xp6(1),A.Q6J("innerHTML",A.lcZ(10,13,U.message||U.subtitle),A.oJD),A.xp6(3),A.Q6J("ngIf",U.result),A.xp6(2),A.ekj("btn-primary",!U.result)("btn-link",U.result),A.xp6(1),A.Oqu(A.lcZ(16,15,"PAYMENTS.RESULT_MODAL.BACK_TO_HOME"))}},styles:["@keyframes checkmark{0%{stroke-dashoffset:100px}to{stroke-dashoffset:0px}}@keyframes checkmark-circle{0%{stroke-dashoffset:480px}to{stroke-dashoffset:960px}}@keyframes colored-circle{0%{opacity:0}to{opacity:100}}.inlinesvg .svg svg{display:inline}.icon--order-success svg polyline{animation:checkmark .25s ease-in-out .7s backwards}.icon--order-success svg circle{animation:checkmark-circle .6s ease-in-out backwards}.icon--order-success svg circle#colored{animation:colored-circle .6s ease-in-out .7s backwards}.result-body{padding:1.5rem}\n"],encapsulation:2}),i})()},93751:(Pt,X,r)=>{"use strict";r.d(X,{D:()=>f});var a=r(93075),t=r(24850),N=r(80013),A=r(75778),e=r(1059),b=r(591),_=r(36053),h=r(5e3),l=r(28706),E=r(61326),O=r(40703);function F(B,k){if(1&B){const $=h.EpF();h.TgZ(0,"div",19),h.NdJ("click",function(){const S=h.CHM($).$implicit,U=h.oxw().$implicit;return h.oxw().closeModal(U,S)}),h.TgZ(1,"div",20),h._UZ(2,"j-entity-logo",21),h.ALo(3,"bankFromAccount"),h.qZA(),h.TgZ(4,"div",22)(5,"p",23),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.TgZ(8,"p",24),h._uU(9),h.ALo(10,"bankFromAccount"),h.ALo(11,"bankFromAccount"),h.qZA()()()}if(2&B){const $=k.$implicit;h.xp6(2),h.Q6J("name",h.lcZ(3,5,$.iban)),h.xp6(4),h.AsE("",h.lcZ(7,7,"PAYMENTS.DICTIONARY.IBAN"),": ",$.iban,""),h.xp6(3),h.AsE(" ",h.lcZ(10,9,$.iban),": ",h.xi3(11,11,$.iban,"name")," ")}}function M(B,k){if(1&B&&(h.TgZ(0,"li")(1,"div",15)(2,"p",16),h._uU(3),h.qZA(),h.TgZ(4,"p",17),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.YNc(7,F,12,14,"div",18),h.qZA()()),2&B){const $=k.$implicit;h.xp6(3),h.Oqu($.name),h.xp6(2),h.AsE("",h.lcZ(6,4,"PAYMENTS.DICTIONARY.IIN"),": ",$.iinOrBin,""),h.xp6(2),h.Q6J("ngForOf",$.accounts)}}function G(B,k){1&B&&(h.TgZ(0,"div")(1,"p",25),h._uU(2),h.ALo(3,"translate"),h.qZA()()),2&B&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"PAYMENTS.DICTIONARY.RECIPIENT_NOT_FOUND")))}let f=(()=>{class B{constructor($,i,Y){this.paymentsS=$,this.recipients=i,this.modal=Y,this.collectionSize$=new b.X(0),this.currentPage$=new b.X(0),this.pageSize=10}ngOnInit(){this.recipients.getRecipients(),this.search=new a.NI(""),this.list$=(0,_.aj)([this.recipients.store.items$.pipe((0,t.U)($=>$.filter(i=>!!(null==i?void 0:i.accounts)))),this.search.valueChanges.pipe((0,N.b)(100),(0,A.x)(),(0,e.O)(this.search.value)),this.currentPage$]).pipe((0,t.U)(([$,i,Y])=>{const S=this.recipients.filterRecipients($,i);return this.collectionSize$.next(S.length>this.pageSize?S.length-this.pageSize:S.length),S.slice(Y>1?Y*this.pageSize:0,(Y+1)*this.pageSize)}))}get page(){return this.currentPage$.getValue()}set page($){this.currentPage$.next($)}onClose(){this.modal.dismiss()}closeModal($,i){this.modal.close({recipient:$,account:i})}}return B.\u0275fac=function($){return new($||B)(h.Y36(l.cR),h.Y36(E.F),h.Y36(O.Kz))},B.\u0275cmp=h.Xpm({type:B,selectors:[["j-recipients-dictionary"]],decls:23,vars:23,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","viewBox","0 0 24 24","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"page","maxSize","rotate","pageSize","collectionSize","pageChange"],[1,"recipient-dict-item"],[1,"recipient-title"],[1,"small","text-gray","mb-2"],["class","account-pill account-pill_gray account-pill_fill",3,"click",4,"ngFor","ngForOf"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function($,i){1&$&&(h.TgZ(0,"div",0)(1,"button",1),h.NdJ("click",function(){return i.modal.dismiss()}),h._UZ(2,"img",2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"div",3)(5,"h5"),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.TgZ(8,"div",4)(9,"j-form-field",5),h._UZ(10,"j-icon",6)(11,"input",7),h.ALo(12,"translate"),h.qZA()(),h.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"ul",11),h.YNc(17,M,8,6,"li",12),h.ALo(18,"async"),h.qZA(),h.YNc(19,G,4,3,"div",13),h.ALo(20,"async"),h.TgZ(21,"ngb-pagination",14),h.NdJ("pageChange",function(S){return i.page=S}),h.ALo(22,"async"),h.qZA()()()()()()),2&$&&(h.xp6(2),h.s9C("alt",h.lcZ(3,11,"SHARED.CLOSE")),h.xp6(4),h.Oqu(h.lcZ(7,13,"PAYMENTS.DICTIONARY.TITLE")),h.xp6(5),h.Q6J("placeholder",h.lcZ(12,15,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",i.search),h.xp6(6),h.Q6J("ngForOf",h.lcZ(18,17,i.list$)),h.xp6(2),h.Q6J("ngIf",0===h.lcZ(20,19,i.list$).length),h.xp6(2),h.Q6J("page",i.page)("maxSize",5)("rotate",!0)("pageSize",i.pageSize)("collectionSize",h.lcZ(22,21,i.collectionSize$)))},styles:[".recipient-dict-item{padding:1rem 0}.recipient-dict-item .recipient-title{font-weight:500;font-size:16px}.recipient-dict-item .account-pill{margin-top:.5rem}.recipient-dict-item p{margin-bottom:.5em;line-height:1.4}\n"],encapsulation:2}),B})()},51782:(Pt,X,r)=>{"use strict";r.d(X,{h:()=>i});var a=r(93075),t=r(36053),N=r(80013),A=r(75778),e=r(1059),b=r(24850),_=r(5e3),h=r(28706),l=r(9010),E=r(40703),O=r(82699),F=r(37074),M=r(43915),G=r(23601),f=r(69808),B=r(89854);function k(Y,S){if(1&Y){const U=_.EpF();_.TgZ(0,"li",14),_.NdJ("click",function(){const vt=_.CHM(U).$implicit;return _.oxw().closeModal(vt)}),_.TgZ(1,"p",15),_._uU(2),_.qZA(),_.TgZ(3,"p",16),_._uU(4),_.ALo(5,"translate"),_.qZA()()}if(2&Y){const U=S.$implicit;_.xp6(2),_.Oqu(U.label),_.xp6(2),_.AsE("",_.lcZ(5,3,"PAYMENTS.DICTIONARY.BIN"),": ",U.bin,"")}}function $(Y,S){1&Y&&(_.TgZ(0,"div")(1,"p",17),_._uU(2),_.ALo(3,"translate"),_.qZA()()),2&Y&&(_.xp6(2),_.Oqu(_.lcZ(3,1,"PAYMENTS.DICTIONARY.UGD_NOT_FOUND")))}let i=(()=>{class Y{constructor(U,x,ot){this.paymentsS=U,this.dictionaries=x,this.modal=ot}ngOnInit(){this.search=new a.NI(""),this.list$=(0,t.aj)(this.dictionaries.UGDictionary.items$,this.search.valueChanges.pipe((0,N.b)(100),(0,A.x)(),(0,e.O)(this.search.value))).pipe((0,b.U)(([U,x])=>U.filter(ot=>this.paymentsS.ugdSearchFn(x,ot))))}closeModal(U){this.modal.close(U)}}return Y.\u0275fac=function(U){return new(U||Y)(_.Y36(h.cR),_.Y36(l.$),_.Y36(E.Kz))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["j-ugd-dictionary"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,"m-0","text-wrap"],[1,"p3","text-gray","m-0"],[1,"text-center","text-light","light"]],template:function(U,x){1&U&&(_.TgZ(0,"div",0)(1,"button",1),_.NdJ("click",function(){return x.modal.dismiss()}),_._UZ(2,"img",2),_.ALo(3,"translate"),_.qZA(),_.TgZ(4,"div",3)(5,"h5"),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.TgZ(8,"div",4)(9,"j-form-field",5),_._UZ(10,"j-icon",6)(11,"input",7),_.ALo(12,"translate"),_.qZA()(),_.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"ul",11),_.YNc(17,k,6,5,"li",12),_.ALo(18,"async"),_.qZA(),_.YNc(19,$,4,3,"div",13),_.ALo(20,"async"),_.qZA()()()()()),2&U&&(_.xp6(2),_.s9C("alt",_.lcZ(3,6,"SHARED.CLOSE")),_.xp6(4),_.Oqu(_.lcZ(7,8,"PAYMENTS.DICTIONARY.UGD_TITLE")),_.xp6(5),_.Q6J("placeholder",_.lcZ(12,10,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",x.search),_.xp6(6),_.Q6J("ngForOf",_.lcZ(18,12,x.list$)),_.xp6(2),_.Q6J("ngIf",0===_.lcZ(20,14,x.list$).length))},directives:[O.O8,F.o,M.X,G.m,a.Fj,a.JJ,a.oH,f.sg,f.O5],pipes:[B.X$,f.Ov],styles:[""],encapsulation:2}),Y})()},23343:(Pt,X,r)=>{"use strict";r.d(X,{S:()=>Ht});var a=r(70655),t=r(591),N=r(42654),A=r(98723),e=r(36053),b=r(21086),_=r(68896),h=r(5254),l=r(43489);function E(nn){return pn=>pn.lift(new O(nn))}class O{constructor(pn){this.value=pn}call(pn,V){return V.subscribe(new F(pn,this.value))}}class F extends l.L{constructor(pn,V){super(pn),this.value=V}_next(pn){this.destination.next(this.value)}}var M=r(75778),G=r(18583),f=r(72986),B=r(1059),k=r(24850),$=r(80013),i=r(87545),Y=r(27221),S=r(92198),U=r(88117),x=r(87168),ot=r(2994),vt=r(15439),At=r(8491),Zt=r(80457),kt=r(7102),Yt=r(90193),H=r(28706),at=r(2776),yt=r(92340),rt=r(15057),_t=r(5e3);r(74967),r(26164),r(26484),r(9010),r(91024),r(65212),r(19208);const Vt=["formDirective"],An=["senderAccountDropdown"];let Ht=(()=>{class nn{constructor(V,dt,Et,J,mt,I,Z,et,L,gt,It,Ut,ln,Tn){this.form=V,this.api=dt,this.route=Et,this.router=J,this.companyService=mt,this.paymentsService=I,this.maskService=Z,this.modals=et,this.dictionaries=L,this.pipeline=gt,this.translateService=It,this.authorityPermissionsService=Ut,this.featureFlagsService=ln,this.bankFromAccount=Tn,this.isRestricted=!1,this.PAYMENT_STATUS=kt.R$,this.SPINNER="BasePaymentContainer",this.restoredData={},this.amountMessage$=new t.X(""),this.periodMessage$=new t.X(""),this.commission$=new t.X(null),this.vat$=new t.X(0),this.total$=new t.X(0),this.purposeMessage$=new t.X(""),this.dateMessage$=new t.X(""),this.purposeLength$=new t.X(0),this.workingHours$=new t.X(null),this.workingDays$=new t.X([]),this.processingPayment$=new t.X(null),this.isImported=!1,this.subs=new N.w,this.isPermissionsUpdating=!1,this.isPermissionsUpdateAllowed=!yt.N.production,this.errors=this.paymentsService.errors,this.rules=this.paymentsService.rules,this.ugdStore=this.dictionaries.UGDictionary,this.knpStore=this.dictionaries.KNPDictionary,this.kbkStore=this.dictionaries.KBKDictionary,this.getWorkingHours()}get bankAccountErrorParams(){var V,dt;if(!(null===(dt=null===(V=this.form.controls.bankAccount)||void 0===V?void 0:V.errors)||void 0===dt?void 0:dt.bankRestricted))return null;const Et=this.form.controls.bankAccount.value,J=(0,At.ibanPrefix)(Et,Zt.w.KZT);return J.length<7||!Et?null:{bankName:this.bankFromAccount.transform(J,"name")}}get bankReceiverErrorParams(){var V,dt;if(!(null===(dt=null===(V=this.form.controls.bankReceiver)||void 0===V?void 0:V.errors)||void 0===dt?void 0:dt.bankRestricted))return null;const Et=this.dictionaries.bankDictionary.getItemsByIds(this.form.controls.bankReceiver.value);return Et?{bankName:Et.name}:null}getPermission(){return(0,a.mG)(this,void 0,void 0,function*(){this.isRestricted=yield this.authorityPermissionsService.isRestricted(this.paymentType)})}getWorkingHours(){return(0,a.mG)(this,void 0,void 0,function*(){const V=yield this.api.getWorkingHours();this.workingHours$.next(V)})}ngOnInit(){this.getPermission(),this.listenRouterParams(),this.createControlsStream(this.form),this.combineUrgentStream(),this.subs.add(this.processingPayment$.pipe((0,M.x)(),(0,G.g)(0)).subscribe(V=>{V?this.paymentsService.spinner.show(this.SPINNER):this.paymentsService.spinner.hide(this.SPINNER)}))}ngOnDestroy(){this.subs.unsubscribe(),this.paymentsService.spinner.hide(this.SPINNER)}get paymentId(){return this.route.snapshot.params.paymentId}mapContractLabel(V){var dt,Et,J;const mt=this.form.getRawValue().contract;return(null==V?void 0:V.contractNumber)||(null===(dt=null==V?void 0:V.contractor)||void 0===dt?void 0:dt.name)?`${V.contractNumber} - ${null===(Et=V.contractor)||void 0===Et?void 0:Et.name}`:mt?`${mt.contractNumber} - ${null===(J=mt.contractor)||void 0===J?void 0:J.name}`:""}contractComparator(V,dt){if(!V)return!0;const Et=dt.contractor.name.toLowerCase().includes(V.toLowerCase()),J=dt.contractNumber.toLowerCase().includes(V.toLowerCase());return Et||J}get dateHelper(){return this.form.controls.date.value?"":"PAYMENTS.FORM.DATE_HELPER"}get senderAccountLabel(){return this.form.controls.senderAccount?"PAYMENTS.FORM.SENDER_ACCOUNT.SELECTED":"PAYMENTS.FORM.SENDER_ACCOUNT.EMPTY"}get submitLabel(){return"SHARED."+(this.paymentsService.isSignatureRequired?"TO_SIGN":"FOR_SIGN")}get paymentType(){return this.form.controls.type.value}set paymentType(V){this.form.controls.type.patchValue(V)}onSenderAccountSelect(V){this.form.controls.senderAccount.setValue(V)}hasError(V,dt){var Et;return dt.invalid&&(dt.dirty&&!(null==V?void 0:V.isFocused)||(null===(Et=this.formDirective)||void 0===Et?void 0:Et.submitted)&&dt.touched)}sendPayment(V){var dt;this.formDirective.form.markAsPristine();const Et=this.paymentsService.paymentNumber,J=V||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(mt=>!!mt).join(". ")});return this.processingPayment$.next(J),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:this.total$.getValue()-this.commission$.getValue(),commission:this.commission$.getValue(),status:null===(dt=this.restoredData)||void 0===dt?void 0:dt.status,userPurpose:this.form.value.purpose,rawBody:J}).then(mt=>{mt?this.restoredData={status:mt.status.code,signatures:mt.signatures,companyId:mt.companyId}:(this.restoredData=null,!Et.entity&&!Et.fetching&&(Et.entity=J.number))}).catch(mt=>{console.log(mt)}).finally(()=>{this.processingPayment$.next(null)})}onSubmit(V){V&&V.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}updatePermissions(){return(0,a.mG)(this,void 0,void 0,function*(){this.isPermissionsUpdating=!0;try{yield this.authorityPermissionsService.updatePermissions(),this.getPermission()}catch(V){}finally{this.isPermissionsUpdating=!1}})}processPayment(){return(0,a.mG)(this,void 0,void 0,function*(){const V=this.form.getRawValue();this.processingPayment$.next(V);try{const dt=yield this.api.checkWorkingTime(V.date);let Et;Et=!!this.featureFlagsService.isDisabled(rt.Y.PAYMENT_PERMISSIONS)||(yield this.api.checkAmountLimit(V.amount,this.paymentType)).isPassed,dt&&Et?this.sendPayment():this.processingPayment$.next(null)}catch(dt){this.processingPayment$.next(null)}})}openKnpDictionary(V,dt){V.close(),V.blur(),setTimeout(()=>{const Et=this.modals.open(at.R,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});Et.componentInstance.paymentType=this.paymentType,Et.result.then(J=>{this.form.controls.knp.patchValue(J.code)}).catch(()=>{})},0)}knpComparator(V,dt){return V.code===dt}combineUrgentStream(){const{date:V,bankAccount:dt,bankReceiver:Et}=this.controlsStream,{urgent:J}=this.form.controls;if(!J)return;const mt=new Date,I=(0,At.getTimeZoneOffset)(new Date,"Asia/Almaty");mt.setHours(mt.getHours()+-I/60);const Z=new Date(mt);Z.setHours(9,0,0);const et=new Date(mt);et.setHours(16,0,0);let L,It,gt=!0;L=mt>=Z&&mt<=et?(0,A.H)(+et-+mt).pipe(E(!1)):mt<Z?(0,A.H)(+Z-+mt).pipe(E(gt=!gt)):(0,A.H)(Z.setDate(Z.getDate()+1)-+mt).pipe(E(gt=!gt)),L=L.pipe((0,f.q)(1),(0,B.O)(gt)),Et?It=(0,e.aj)([dt,Et,this.dictionaries.bankDictionary.entities$]).pipe((0,k.U)(([Ut,ln,Tn])=>{let mn;return ln&&(mn=Tn[ln])&&mn.salaryTransitIban?mn.salaryTransitIban:mn&&!mn.salaryTransitIban&&Ut?(0,At.ibanPrefix)(Ut,Zt.w.KZT):""})):dt&&(It=dt.pipe((0,k.U)(Ut=>(0,At.ibanPrefix)(Ut,Zt.w.KZT)))),It=(null==It?void 0:It.pipe((0,k.U)(Ut=>this.paymentsService.bankFromAccount.transform(Ut))))||(0,b.of)(""),this.subs.add((0,e.aj)([V.pipe((0,k.U)(Ut=>!Ut)),It.pipe((0,$.b)(300),(0,k.U)(Ut=>"TSESKZKA"!==Ut)),L]).pipe((0,k.U)(Ut=>Ut.every(ln=>ln))).subscribe(Ut=>{Ut&&J.disabled?J.enable():!Ut&&J.enabled&&(J.disable(),J.setValue(!1))}))}listenRouterParams(){this.subs.add(this.route.params.pipe((0,k.U)(V=>({state:window.history.state,params:V,route:this.route})),(0,$.b)(0),(0,i.w)(({params:V,state:dt})=>{if(null==dt?void 0:dt.silent)return this.restoredData.status===kt.R$.DRAFT?this.paymentsService.rootTitle=H.TB.EDIT_DRAFT:this.restoredData.status===kt.R$.CREATED&&(this.paymentsService.rootTitle=H.TB.EDIT_PAYMENT),_.E;if(null==dt?void 0:dt.resolvedPayment)return(0,b.of)(dt.resolvedPayment);if(V.paymentId||(null==dt?void 0:dt.repeatPaymentId)){const Et=V.paymentId||dt.repeatPaymentId;return(0,h.D)(this.api.getPaymentById(Et)).pipe((0,Y.K)(J=>(this.router.navigate([this.router.url.replace("/"+Et,"")]),_.E)))}return this.setAutoNumeration(),this.paymentsService.rootTitle=H.TB.NEW,_.E})).subscribe(V=>{this.restorePayment(V)}))}getMaskConfig(){Object.entries(this.masks).forEach(([V,dt])=>this.masks[V]=this.maskService.getConfig(dt))}checkPersonalAccounts(V){0!==V.length?V.every(dt=>dt.isClosed||dt.isLocked)?this.paymentsService.infoMessage.entity={type:H.Cs.info,message:H.sY.allLocked}:(1===V.length&&(this.form.patchValue({senderAccount:V[0]}),this.senderAccountDropdown.selectAccount(V[0]),this.form.markAsPristine()),this.paymentsService.infoMessage.entity=null):this.paymentsService.infoMessage.entity={type:H.Cs.info,message:H.sY.noAccounts}}createControlsStream(V){this.controlsStream=Object.entries(V.controls).reduce((dt,[Et,J],mt,I)=>(dt[Et]=J.valueChanges.pipe((0,B.O)(J.value)),dt),{})}listenCommission(){const{amount:V,date:dt,urgent:Et,knp:J,senderAccount:mt,kbk:I}=this.controlsStream;let Z=[V,dt,Et,J,mt,I];Z=Z.filter(gt=>!!gt);const et=(0,e.aj)(Z).pipe((0,$.b)(300),(0,M.x)((gt,It)=>gt.every((Ut,ln)=>Ut===It[ln])),(0,S.h)(()=>{const{type:gt,amount:It,date:Ut,urgent:ln,knp:Tn,senderAccount:mn,kbk:bn}=this.form.controls;return[gt,It,Ut,ln,Tn,mn,bn].filter(yn=>null==yn?void 0:yn.enabled).every(yn=>yn.valid)})),L=this.companyService.currentCompany$.pipe((0,S.h)(gt=>!!gt),(0,M.x)());this.subs.add((0,e.aj)([et,L]).pipe((0,i.w)(([,gt])=>{const{type:It,amount:Ut,date:ln,urgent:Tn,knp:mn,senderAccount:bn,kbk:yn}=this.form.getRawValue(),Ln={amount:this.maskService.getNumberedAmount(Ut),date:ln,urgent:Tn,currency:Zt.w.KZT,category:kt.nK.DOMESTIC,type:It,companyId:gt.id,kbk:yn,knp:mn,senderAccount:bn};return this.paymentsService.calculateCommission$(Ln).pipe((0,Y.K)(()=>(0,b.of)(null)))})).subscribe(this.commission$))}listenVAT(){this.controlsStream.vat&&this.controlsStream.amount&&this.subs.add((0,e.aj)([this.controlsStream.vat,this.controlsStream.amount]).pipe((0,k.U)(([V,dt])=>V?Math.round(100*(12*this.maskService.getNumberedAmount(dt)/112+Number.EPSILON))/100:0)).subscribe(this.vat$))}listenTotal(){this.form.controls.amount&&this.subs.add((0,e.aj)(this.commission$,this.controlsStream.amount).pipe((0,k.U)(([V,dt])=>V+this.maskService.getNumberedAmount(dt))).subscribe(this.total$))}combineEmployeesAmount(){this.subs.add(this.controlsStream.employees.pipe((0,$.b)(100),(0,k.U)(V=>(V||[]).reduce((dt,Et)=>dt+Et.amount,0))).subscribe(V=>{this.form.controls.amount.patchValue(V)}))}combineKNP(V=[Et=>this.dictionaries.selectByPaymentType(Et,{type:this.paymentType,sortFavourite:!0})],dt){const Et=[this.knpStore.items$];return dt&&Et.push(...dt),(0,e.aj)(Et).pipe((0,k.U)(J=>V.reduce((mt,I)=>I(mt,J.slice(1)),J[0])),(0,U.B)())}combineKBK(V){this.kbk$=this.kbkStore.items$,(0,e.aj)([this.kbkStore.items$.pipe((0,k.U)(dt=>this.dictionaries.selectByPaymentType(dt,{type:V,sortFavourite:!0})))]).pipe((0,k.U)(([dt])=>dt))}saveToDraft(V){this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();const dt=this.paymentsService.paymentNumber,Et=V||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(J=>!!J).join("; ")});dt.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},Et)),this.pipeline.saveToDrafts(Et,{paymentId:this.paymentId,type:this.paymentType,commission:this.commission$.value,userPurpose:this.form.value.purpose,category:kt.nK.DOMESTIC}).then(J=>{J.id!==this.paymentId&&(J&&(this.restoredData={status:J.status,signatures:J.signatures,companyId:J.companyId}),this.router.navigate([this.route.snapshot.params.paymentId?"../":".",J.id],{replaceUrl:!0,relativeTo:this.route,state:{silent:!0}}))}).catch(J=>{!dt.entity&&!dt.fetching&&(dt.entity=Et.number)}).finally(()=>this.processingPayment$.next(null))}setAutoNumeration(){this.subs.add(this.paymentsService.paymentNumber$.pipe((0,x.M)(this.controlsStream.number)).subscribe(([V,dt])=>{dt||this.form.controls.number.setValue(V)}))}provideAmountMessage(){if(this.form.controls.amount){const{senderAccount:V,date:dt}=this.controlsStream;this.subs.add((0,e.aj)([this.companyService.authorityLevel$,this.total$,V.pipe((0,S.h)(Et=>!!Et)),dt,this.workingHours$.asObservable()]).pipe((0,i.w)(([Et,J,mt,I,Z])=>{if(Et!==Yt.Ly.PRIMARY_SIGNATURE)return(0,b.of)("");const et=(null==Z?void 0:Z.endTime)||At.edgeTimeLabel,L=mt.balance.amount-J;if(L<0){const gt=this.maskService.formatAmount(Math.abs(L));return I?this.translateService.get("PAYMENTS.AMOUNT_MESSAGES.DEFAULT",{amount:gt,edge:`${(0,At.formatNgbDate)(I,this.translateService.currentLang)} ${et}`}):this.translateService.get("PAYMENTS.AMOUNT_MESSAGES.AUTO",{amount:gt})}return(0,b.of)("")})).subscribe(this.amountMessage$))}}listenWorkingDays(){this.subs.add(this.dictionaries.workingDays.entity$.pipe((0,k.U)(V=>this.dictionaries.selectDaysTimeline(vt((0,At.ngbDateToDate)(this.dateLimit.minDate)).format(At.ISO_8061),vt((0,At.ngbDateToDate)(this.dateLimit.maxDate)).format(At.ISO_8061),V))).subscribe(this.workingDays$))}listenDateMessageStream(){this.subs.add((0,e.aj)([this.companyService.authorityLevel$,this.controlsStream.date,this.controlsStream.senderAccount.pipe((0,S.h)(V=>!!V))]).pipe((0,k.U)(([V,dt,Et])=>V===Yt.Ly.PRIMARY_SIGNATURE?"PAYMENTS.DATE_MESSAGES.PRIMARY_ANY":dt?"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE":"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE_AUTO")).subscribe(this.dateMessage$))}listenPurposeMessageStream(V=[],dt=["vat","kbk","knp"]){const Et={vat:mt=>mt?this.translateService.instant("PAYMENTS.FORM.INCLUDING_VAT",{amount:this.maskService.formatAmount(mt)}):"",kbk:mt=>{let I;return mt&&(I=this.kbkStore.items.find(Z=>Z.code===mt))?`${I.name}.`:""},knp:mt=>{let I;return mt&&(I=this.knpStore.items.find(Z=>Z.code===mt))?`${I.name}.`:""}},J=[];J.push((this.controlsStream.vat&&this.vat$||(0,b.of)(0)).pipe((0,k.U)(mt=>["vat",mt])),this.controlsStream.knp.pipe((0,k.U)(mt=>["knp",mt]))),J.push(...V),this.subs.add((0,e.aj)(J).pipe((0,$.b)(100),(0,k.U)(mt=>mt.reduce((I,Z)=>(I[Z[0]]=Z[1],I),{})),(0,k.U)(mt=>dt.reduce((Z,et)=>(Array.isArray(et)?Z.push(et[1](mt[et[0]],mt)):Z.push(Et[et]?Et[et](mt[et],mt):mt[et]),Z),[]).filter(Z=>!!Z).join(" ")),(0,ot.b)(mt=>{this.form.controls.purpose.patchValue(this.form.controls.purpose.value),mt&&this.form.controls.purpose.markAllAsTouched()})).subscribe(this.purposeMessage$)),this.subs.add((0,e.aj)(this.purposeMessage$,this.controlsStream.purpose).pipe((0,k.U)(([mt,I])=>(mt||"").length+(I||"").length)).subscribe(this.purposeLength$)),this.validatePurpose()}validatePurpose(){this.subs.add((0,e.aj)(this.purposeMessage$,this.controlsStream.purpose).subscribe(([V,dt])=>{const Et=(dt||"").length+(V||"").length,J=this.form.touched?this.form.controls.purpose.errors:{};J&&Et>this.rules.purposeLength&&(J.maxlength=Et),this.form.controls.purpose.setErrors((nn=>[Object,Array].includes((nn||{}).constructor)&&!Object.entries(nn||{}).length)(J)?null:J,{emitEvent:!0})}))}restorePayment(V){this.subs.add((0,e.aj)([this.knpStore.fetched$,this.kbkStore.fetched$,this.ugdStore.fetched$,this.dictionaries.bankDictionary.fetched$,this.accountStore.fetched$]).pipe((0,S.h)(dt=>dt.every(Et=>Et)),(0,ot.b)(()=>{var dt,Et,J,mt,I;let Z;try{Z=this.pipeline.flattenPaymentToModel(V)}catch(et){Z={}}this.restoredData={companyId:V.companyId,status:null===(dt=V.status)||void 0===dt?void 0:dt.code,signatures:V.signatures},V.id&&!this.paymentId?(Z.number="",Z.date=null,this.restoredData.status=null,this.paymentsService.rootTitle=H.TB.NEW):this.paymentsService.rootTitle=this.restoredData.status===kt.R$.DRAFT?H.TB.EDIT_DRAFT:H.TB.EDIT_PAYMENT,Z.emailOnSuccess&&(Z.notify=!0),this.form.patchValue(Object.assign(Object.assign({},Z),{purpose:null===(J=null===(Et=V.details.associatedField)||void 0===Et?void 0:Et.parameters)||void 0===J?void 0:J.paymentPurpose})),null===(mt=this.senderAccountDropdown)||void 0===mt||mt.selectByIban(null===(I=null==V?void 0:V.details)||void 0===I?void 0:I.payerIban),this.isImported=V.imported,Z.number||this.setAutoNumeration()}),(0,$.b)(10),(0,f.q)(1)).subscribe())}}return nn.\u0275fac=function(V){_t.$Z()},nn.\u0275dir=_t.lG2({type:nn,viewQuery:function(V,dt){if(1&V&&(_t.Gf(Vt,5),_t.Gf(An,5)),2&V){let Et;_t.iGM(Et=_t.CRH())&&(dt.formDirective=Et.first),_t.iGM(Et=_t.CRH())&&(dt.senderAccountDropdown=Et.first)}}}),nn})()},54557:(Pt,X,r)=>{"use strict";r.d(X,{s:()=>O,h:()=>F});var a=r(70655),t=r(40520),N=r(8491),A=r(80457),e=r(7102),b=r(5e3),_=r(1790),h=r(26164),l=r(26484),E=r(9010),O=(()=>{return(M=O||(O={})).RU="RU",M.US="US",M.CN="CN",M.AU="AU",M.CA="CA",M.AE="AE",O;var M})();let F=(()=>{class M{constructor(f,B,k,$){this.api=f,this.companyService=B,this.maskedService=k,this.dictionaries=$}getCountries(){return this.api.get("countries")}getContractById(f){return this.api.get(`companies/${this.companyService.currentId}/fx-contracts/${f}`)}getContracts(){return(0,a.mG)(this,void 0,void 0,function*(){return this.api.get(`companies/${this.companyService.currentId}/fx-contracts`)})}getCodeWords(f){return(0,a.mG)(this,void 0,void 0,function*(){if(f&&this.cashedCodeWordsList&&f===this.cashedCodeWordsCountry)return this.cashedCodeWordsList;let k=new t.LE;k=k.append("countryCode",f);const $=yield this.api.get("dictionaries/codewords",null,k);return this.cashedCodeWordsCountry=f,this.cashedCodeWordsList=$,this.cashedCodeWordsList})}getBanks(f=null,B=null){return(0,a.mG)(this,void 0,void 0,function*(){if(f===this.cashedBankQuery&&B===this.cashedBankCountryCode)return this.cashedBankList;this.cashedBankQuery=f,this.cashedBankCountryCode=B;let $=new t.LE;f&&($=$.append("search",f)),B&&($=$.append("countryCode",B));const i=yield this.api.get("dictionaries/banks",null,$);return this.cashedBankList=i,i})}getKbkList(){return this.api.get("dictionaries/kbk")}getStatuses(){return this.api.get("dictionaries/payer-status")}mapForm(f){var B,k,$,i,Y,S,U,x,ot,vt;let At={commission:{amount:f.comission,currency:f.comissionCurrency},description:f.purpose,documentId:f.number,foreignPaymentDetails:{commissionWithdrawalIban:null===(B=f.commissionAccount)||void 0===B?void 0:B.iban,intermediaryBankBic:null===(k=f.intermediaryBank)||void 0===k?void 0:k.bic,intermediaryBankName:null===($=f.intermediaryBank)||void 0===$?void 0:$.name,type:f.payComission?"OUR":"SHA"},valueDate:f.date&&(0,N.ngbDateToUTCStartDay)(f.date).toISOString()||f.date,payerIban:null===(i=f.senderAccount)||void 0===i?void 0:i.iban,paymentAmount:{amount:this.maskedService.getNumberedAmount(f.amount),currency:null===(S=null===(Y=f.senderAccount)||void 0===Y?void 0:Y.balance)||void 0===S?void 0:S.currency}};if(f.knp){let H="";H=f.knpObject?f.knpObject.code:f.knp;const at=this.dictionaries.KNPDictionary.getItemByKey(H,"code");At.knp={code:at.code,name:at.name}}f.kbk&&(At.kbk={code:f.kbk.code,name:f.kbk.description}),f.withinContract&&(At.foreignPaymentDetails.fxContractId=f.contractId,At.foreignPaymentDetails.contract=f.contract,At.foreignPaymentDetails.fxContractRecipient=f.fxContractRecipient,At.foreignPaymentDetails.fxContractRecipientId=f.fxContractRecipientId),f.codeWord&&(At.foreignPaymentDetails.codeWord=f.codeWord),f.isRubNonRussia&&(At.foreignPaymentDetails.intermediaryBankBic=f.rubNonRussiaCorrespondentBank.bic,At.foreignPaymentDetails.intermediaryBankIban=f.rubNonRussiaCorrespondentIban);let Zt=f.bank;f.isRubNonRussia&&(Zt=f.rubNonRussiaBank);const kt=f.countryCode||(null===(U=f.country)||void 0===U?void 0:U.code)||(null===(ot=null===(x=f.fxContractRecipient)||void 0===x?void 0:x.country)||void 0===ot?void 0:ot.code)||(null===(vt=f.fxContractRecipient)||void 0===vt?void 0:vt.countryCode);let Yt={category:e.V_.FOREIGN,companyId:this.companyService.currentId,details:At,emailOnSuccess:f.emailOnSuccess,paymentRecipient:{cityName:f.cityName,countryCode:kt,kbe:{code:f.kbeCode},kpp:f.kpp,name:f.name,recipientAccount:{bankName:null==Zt?void 0:Zt.name,bic:null==Zt?void 0:Zt.bic,iban:f.bankAccount?this.removeSpaces(f.bankAccount):f.bankAccount}},type:e.V_.FOREIGN};return kt==O.AU&&(Yt.paymentRecipient.address=f.senderAccount.balance.currency===A.w.AUD?{index:f.audIndex,state:f.audState,street:f.audStreet,buildingNumber:f.audBuildingNumber}:{text:f.audAddress}),kt==O.CA&&(Yt.paymentRecipient.address={text:f.canAddress}),f.kio&&(Yt.paymentRecipient.iinOrBin=f.kio),f.kvo&&(At.foreignPaymentDetails.currencyTransactionCode=f.kvo),f.isRussianBudget&&(At.foreignPaymentDetails.oktmo=f.oktmo,At.foreignPaymentDetails.payerInn=f.payerInn,At.foreignPaymentDetails.payerKpp=f.payerKpp,At.foreignPaymentDetails.payerStatus=f.payerStatus,At.foreignPaymentDetails.paymentBasis=f.paymentBasis,At.foreignPaymentDetails.period=f.budgetPeriod,At.foreignPaymentDetails.uip=f.uip,At.foreignPaymentDetails.budgetDocNumber=f.budgetDocNumber),Yt}mapPayment(f){var B,k,$,i,Y,S,U,x,ot,vt,At,Zt,kt,Yt,H,at,yt,rt,ht,_t,Nt,nt;return{type:e.V_.FOREIGN,senderAccount:null,commissionAccount:null,comission:f.details.comission,payComission:"OUR"==f.details.foreignPaymentDetails.type,countryCode:(null===(B=f.paymentRecipient)||void 0===B?void 0:B.countryCode)||"",cityName:(null===(k=f.paymentRecipient)||void 0===k?void 0:k.cityName)||"",isNewPayment:f.isNewPayment||!1,contract:f.details.foreignPaymentDetails.fxContract,contractId:f.details.foreignPaymentDetails.fxContractId,fxContractRecipient:f.details.foreignPaymentDetails.fxContractRecipient,fxContractRecipientId:f.details.foreignPaymentDetails.fxContractRecipientId,withinContract:!!f.details.foreignPaymentDetails.fxContractId,name:(null===($=f.paymentRecipient)||void 0===$?void 0:$.name)||"",bankAccount:(null===(i=f.paymentRecipient)||void 0===i?void 0:i.recipientAccount.iban)||"",kbeCode:(null===(S=null===(Y=f.paymentRecipient)||void 0===Y?void 0:Y.kbe)||void 0===S?void 0:S.code)||"",number:f.details.documentId,date:f.details.valueDate&&(0,N.dateToNgbStruct)(new Date(f.details.valueDate)),knp:null===(U=f.details.knp)||void 0===U?void 0:U.code,purpose:f.details.description,amount:null===(x=f.details.paymentAmount)||void 0===x?void 0:x.amount,bankLabel:"",bank:null,hasIntermediaryBank:!!f.details.foreignPaymentDetails.intermediaryBankBic,intermediaryBankLabel:"",intermediaryBank:null,notify:!!f.emailOnSuccess,emailOnSuccess:f.emailOnSuccess,kpp:(null===(ot=f.paymentRecipient)||void 0===ot?void 0:ot.kpp)||"",kvo:f.details.foreignPaymentDetails.currencyTransactionCode||"",kio:(null===(vt=f.paymentRecipient)||void 0===vt?void 0:vt.iinOrBin)||"",isRussianBudget:null,isRussianTaxPayer:!(!f.details.foreignPaymentDetails.payerInn&&!f.details.foreignPaymentDetails.payerKpp),payerInn:f.details.foreignPaymentDetails.payerInn||"",payerKpp:f.details.foreignPaymentDetails.payerKpp||"",kbk:f.details.kbk?{code:f.details.kbk.code,description:f.details.kbk.name}:"",oktmo:f.details.foreignPaymentDetails.oktmo||"",payerStatus:f.details.foreignPaymentDetails.payerStatus||"",hasRussianBudgetExtras:!!(f.details.foreignPaymentDetails.paymentBasis||f.details.foreignPaymentDetails.budgetDocNumber||f.details.foreignPaymentDetails.period||f.details.foreignPaymentDetails.uip),paymentBasis:f.details.foreignPaymentDetails.paymentBasis||"",budgetDocNumber:f.details.foreignPaymentDetails.budgetDocNumber||"",budgetPeriod:f.details.foreignPaymentDetails.period||"",uip:f.details.foreignPaymentDetails.uip||"",codeWord:f.details.foreignPaymentDetails.codeWord,audIndex:(null===(Zt=null===(At=f.paymentRecipient)||void 0===At?void 0:At.address)||void 0===Zt?void 0:Zt.index)||"",audState:(null===(Yt=null===(kt=f.paymentRecipient)||void 0===kt?void 0:kt.address)||void 0===Yt?void 0:Yt.state)||"",audStreet:(null===(at=null===(H=f.paymentRecipient)||void 0===H?void 0:H.address)||void 0===at?void 0:at.street)||"",audBuildingNumber:(null===(rt=null===(yt=f.paymentRecipient)||void 0===yt?void 0:yt.address)||void 0===rt?void 0:rt.buildingNumber)||"",audAddress:(null===(_t=null===(ht=f.paymentRecipient)||void 0===ht?void 0:ht.address)||void 0===_t?void 0:_t.text)||"",canAddress:(null===(nt=null===(Nt=f.paymentRecipient)||void 0===Nt?void 0:Nt.address)||void 0===nt?void 0:nt.text)||""}}removeSpaces(f){return f.replace(/ /g,"")}}return M.\u0275fac=function(f){return new(f||M)(b.LFG(_.sM),b.LFG(h.J),b.LFG(l.O),b.LFG(E.$))},M.\u0275prov=b.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},39996:(Pt,X,r)=>{"use strict";r.d(X,{$:()=>O});var a=r(8491),t=r(93075),N=r(83485),A=r(7102),e=r(80457),b=r(47755),_=r(5e3),h=r(28706),l=r(19208),E=r(9010);let O=(()=>{class F{constructor(G,f,B,k){this.fb=G,this.paymentsService=f,this.bankFromAccount=B,this.dictionaries=k}createPaymentInTengeForm(){const G=this.fb.group({contract:[null],contractId:[null],fxContractRecipient:[null],fxContractRecipientId:[null],withinContract:[!1],type:void 0,iinOrBin:["",[t.kI.required,t.kI.minLength(12)]],name:["",[t.kI.required,t.kI.maxLength(250)]],bankAccount:[void 0,t.kI.required],kbeCode:["",[t.kI.required,N.hM.kbe]],number:["",t.kI.required],date:null,knp:[void 0,[t.kI.required]],purpose:[""],senderAccount:[""],amount:["",[t.kI.required,t.kI.min(this.paymentsService.rules.minAmount),t.kI.max(this.paymentsService.rules.maxAmount),k=>0===(null==k?void 0:k.value)?{cantBeZero:!0}:null]],vat:[!1],urgent:[!1],notify:[!1],emailOnSuccess:[{value:"",disabled:!0},[t.kI.required,t.kI.email]]}),{bankAccount:f,senderAccount:B}=G.controls;return f.setValidators([t.kI.required,k=>this.isEqualValidator(k,B),k=>this.accountExistsValidator(k),k=>`KZ${k.value}`!==A.SV.TAX_ACCOUNT?null:{taxAccountError:!0}]),f.setAsyncValidators(b.W.internalIbanRestricted(this.dictionaries)),B.setValidators([t.kI.required,k=>(k.value&&f.updateValueAndValidity(),null)]),G}createTaxForm(){const G=this.fb.group({type:A.V_.TAX,ugd:[void 0,t.kI.required],kbk:["",[t.kI.required]],number:["",t.kI.required],date:void 0,knp:[{value:""},[t.kI.required]],bankAccount:["",t.kI.required],senderAccount:["",t.kI.required],purpose:[""],amount:["",[t.kI.required,t.kI.min(this.paymentsService.rules.minAmount),t.kI.max(this.paymentsService.rules.maxAmount)]],urgent:[!1],vin:[{value:"",disabled:!0}],intervalEnabled:!1,period:[{value:"",disabled:!0},[t.kI.required]],periodStart:[{value:"",disabled:!0}],periodEnd:[{value:"",disabled:!0}],protocolNumber:[{value:"",disabled:!0},[t.kI.required]]}),{periodEnd:f,periodStart:B}=G.controls,k=N.hM.isSmallerThan(f),$=N.hM.isGreaterThan(B);B.setValidators([t.kI.required,k,N.hM.revalidateLinkControlIf(()=>!k(B)&&f.hasError("isGreaterThan"),f)]),f.setValidators([t.kI.required,$,N.hM.revalidateLinkControlIf(()=>!$(f)&&B.hasError("isSmallerThan"),B)]);const{bankAccount:i,senderAccount:Y}=G.controls;return i.setValidators([t.kI.required,S=>this.isEqualValidator(S,Y),S=>this.accountExistsValidator(S),S=>"070"===`KZ${S.value}`.substring(4,7)?null:{wrongTaxAccountError:!0}]),i.setAsyncValidators(b.W.internalIbanRestricted(this.dictionaries)),G}createPensionForm(){return this.fb.group({type:A.V_.PENSION,date:void 0,period:[{value:void 0,disabled:!0},[t.kI.required]],number:["",t.kI.required],knp:["010",[t.kI.required]],purpose:"",employees:[void 0,[t.kI.required,t.kI.minLength(1),this.paymentsService.employeeGroupControlValidator(A.V_.PENSION)]],senderAccount:["",t.kI.required],amount:[0,[t.kI.required,t.kI.min(.01)]],urgent:[!1],commonPeriodEnabled:!1})}createSocialForm(){return this.fb.group({type:A.V_.SOCIAL,date:void 0,period:[{value:void 0,disabled:!0},[t.kI.required]],number:["",t.kI.required],knp:["012",[t.kI.required]],employees:[void 0,[t.kI.required,t.kI.minLength(1),this.paymentsService.employeeGroupControlValidator(A.V_.SOCIAL)]],senderAccount:["",t.kI.required],amount:[0,[t.kI.required,t.kI.min(.01)]],urgent:[!1],purpose:"",commonPeriodEnabled:!1})}createMedicalForm(){return this.fb.group({type:A.V_.MEDICAL,date:void 0,period:[{value:void 0,disabled:!0},[t.kI.required]],number:["",t.kI.required],knp:["121",[t.kI.required]],employees:[void 0,[t.kI.required,t.kI.minLength(1),this.paymentsService.employeeGroupControlValidator(A.V_.MEDICAL)]],senderAccount:["",t.kI.required],amount:[0,[t.kI.required,t.kI.min(.01)]],urgent:[!1],purpose:"",commonPeriodEnabled:!1})}createSalaryForm(){const G=this.fb.group({type:A.V_.SALARY,bankReceiver:[""],bankAccount:[{value:"",disabled:!0}],date:void 0,number:["",t.kI.required],knp:[void 0,[t.kI.required]],employees:[void 0,[t.kI.required,t.kI.minLength(1),this.paymentsService.employeeGroupControlValidator(A.V_.SALARY)]],senderAccount:["",t.kI.required],amount:[0,[t.kI.required,t.kI.min(.01)]],urgent:[!1],purpose:[""],isResidents:!0}),{bankReceiver:f,bankAccount:B}=G.controls;return f.setValidators([t.kI.required,k=>(k.value&&B.updateValueAndValidity(),null)]),f.setAsyncValidators(b.W.bankRestrictedById(this.dictionaries)),B.setValidators([t.kI.required,k=>{const $=(0,a.ibanPrefix)(k.value,e.w.KZT);if($.length<7||!f.value)return null;const i=this.dictionaries.bankDictionary.getItemsByIds(f.value),Y=this.paymentsService.bankFromAccount.transform($);return i&&i.bic!==Y?{difReceiverAndBankBiq:!0}:null}]),B.setAsyncValidators(b.W.internalIbanRestricted(this.dictionaries)),G}createCurrencyForm(){return this.fb.group({type:A.V_.FOREIGN,senderAccount:["",[t.kI.required]],commissionAccount:["",t.kI.required],comission:[null],comissionCurrency:[null],payComission:[!1],countryCode:[void 0,t.kI.required],country:[null],cityName:[void 0],contract:[null],contractId:[null],fxContractRecipient:[null],fxContractRecipientId:[null],withinContract:[!1],name:["",[t.kI.required,t.kI.maxLength(103)]],bankAccount:[""],kbeCode:["",[t.kI.required,N.hM.kbe]],number:["",t.kI.required],date:[null],knp:[void 0,[t.kI.required]],knpObject:[null],purpose:["",t.kI.required],amount:["",[t.kI.required,t.kI.min(this.paymentsService.rules.minAmount),t.kI.max(this.paymentsService.rules.maxAmount),f=>0===(null==f?void 0:f.value)?{cantBeZero:!0}:null]],bankLabel:["",t.kI.required,b.W.bankRestricted(this.dictionaries)],bank:[null],hasIntermediaryBank:[!1],intermediaryBankLabel:[""],intermediaryBank:[null],notify:[!1],emailOnSuccess:[{value:"",disabled:!0},[t.kI.required,t.kI.email]],kpp:[""],kvo:[void 0],codeWord:[void 0],kio:[void 0,t.kI.required],isRussianBudget:[null],isRussianTaxPayer:[null],payerInn:[null],payerKpp:[""],kbk:[null],oktmo:[""],payerStatus:["S08"],hasRussianBudgetExtras:[null],paymentBasis:[""],budgetDocNumber:[""],budgetPeriod:[""],uip:[null],isRubNonRussia:[!1],rubNonRussiaCorrespondentBankLabel:[""],rubNonRussiaCorrespondentBank:[null],rubNonRussiaBankLabel:[""],rubNonRussiaBank:[null],rubNonRussiaCorrespondentIban:[""],audIndex:[""],audState:[""],audStreet:[""],audBuildingNumber:[""],audAddress:[""],canAddress:[""]})}accountExistsValidator(G){return this.paymentsService.bankExist((0,a.ibanPrefix)(G.value||"",e.w.KZT))}isEqualValidator(G,f){const B=(0,a.ibanPrefix)(G.value,e.w.KZT),k=f.value;return!G.value||B.length<18||!k||B!==k.iban?null:{isEqual:!0}}}return F.\u0275fac=function(G){return new(G||F)(_.LFG(a.FormBuilderTypeSafe),_.LFG(h.cR),_.LFG(l.vI),_.LFG(E.$))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},91024:(Pt,X,r)=>{"use strict";r.d(X,{Z:()=>Zt});var a=r(70655),t=r(8491),N=r(80457),A=r(8295),e=r(90193),b=r(53917),_=r(1790),h=r(30395),l=r(7102),E=r(99255),O=r(15439),M=r(34793),G=r.n(M),f=r(5e3),B=r(56104),k=r(28706),$=r(9010),i=r(61326),Y=r(74967),S=r(26164),U=r(40703),x=r(66013),ot=r(26484),vt=r(89854),At=r(54557);let Zt=(()=>{class kt{constructor(H,at,yt,rt,ht,_t,Nt,nt,Bt,Lt,bt,$t){this.accounts=H,this.payments=at,this.dictionaries=yt,this.recipients=rt,this.api=ht,this.bankFromAccount=_t,this.company=Nt,this.modalService=nt,this.notifier=Bt,this.maskService=Lt,this.translate=bt,this.currencyPayments=$t}processPayment(H){return(0,a.mG)(this,void 0,void 0,function*(){try{const at=H;return at.body=this.constructPaymentBody(H.rawBody,H),H.paymentId?H.status===l.R$.DRAFT?(at.response=yield this.api.updatePayment(at.body,{paymentId:H.paymentId}),yield this.api.createFromDraft(at.body,{paymentId:H.paymentId}),at.response.status.code=l.R$.CREATED,at.verified=yield this.handlePaymentCreateResponse(at.response),this.showResult(!0,{amount:H.total,multySubscribers:this.company.currentCompany.signatureScheme===e.x_.MULTIPLE_SIGN,hasRights:this.payments.isSignatureRequired},null,at.response)):(at.response=yield this.api.updatePayment(at.body,{paymentId:H.paymentId}),this.showResult(!0,{amount:H.total,updateCreated:!0},null,at.response)):(at.response=yield this.api.createPayment(at.body),at.verified=yield this.handlePaymentCreateResponse(at.response),this.showResult(!0,{amount:H.total,multySubscribers:this.company.currentCompany.signatureScheme===e.x_.MULTIPLE_SIGN,hasRights:this.payments.isSignatureRequired},null,at.response)),at.body.paymentRecipient&&this.checkRecipientsRefresh(at.body),at.response}catch(at){throw at&&this.showResult(!1,void 0,at),at}})}constructPaymentBody(H,at){let yt;return H.type&&H.type!==l.V_.INTERNAL&&H.type!==l.V_.EXTERNAL?H.type===l.V_.TAX?yt=this.preparePaymentTaxBody(H,at):[l.V_.PENSION,l.V_.MEDICAL,l.V_.SOCIAL].includes(H.type)?yt=this.prepareEmployeePaymentBody(H,at):H.type===l.V_.SALARY?yt=this.prepareSalaryPaymentBody(H,at):H.type===l.V_.IN_BETWEEN||H.type===l.V_.CARD_TO_CARD||H.type===l.V_.CARD_TO_ACCOUNT||H.type===l.V_.ACCOUNT_TO_CARD?yt=H:H.type===l.V_.FOREIGN?yt=this.prepareForeignPaymentBody(H):this.notifier.notify("error","NOT_IMPLEMENTED"):yt=this.preparePaymentOrderBody(H,at),(null==at?void 0:at.userPurpose)&&G()(yt,"details.associatedField.parameters.paymentPurpose",at.userPurpose),yt}handlePaymentCreateResponse(H){return H.status.code===_.Q_.REJECTED?Promise.reject(H):this.payments.isSignatureRequired?new Promise((at,yt)=>{this.processPaymentVerify(H).then(rt=>{at(rt)}).catch(rt=>{console.log(rt),yt(rt)})}):Promise.resolve()}saveToDrafts(H,at){return(0,a.mG)(this,void 0,void 0,function*(){const yt=Object.assign(this.constructPaymentBody(Object.assign({},H),at),{category:at.category,status:{code:l.R$.DRAFT}});try{const rt=yield at.paymentId?this.api.updatePayment(yt,{paymentId:at.paymentId}):this.api.createPayment(yt);return this.notifier.notify("success",this.translate.instant(at.paymentId?"PAYMENTS.PIPELINES.DRAFT_UPDATED":"PAYMENTS.PIPELINES.SAVED_TO_DRAFTS")),rt}catch(rt){throw this.notifier.notify("error",rt.description||"ERRORS.UNKNOWN_ERROR"),rt}})}processPaymentVerify(H){return(0,a.mG)(this,void 0,void 0,function*(){const at=this.modalService.open(b.u,{backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0});return Object.assign(at.componentInstance,{additionalParams:{actionIds:[H.id]}}),Object.assign(at.componentInstance,{headerParams:{smsHeader:_.H$.SIGNING_PAYMENT}}),new Promise((rt,ht)=>{at.componentInstance.submitted.subscribe(_t=>{this.api.signPayment(_t,H.id).then(Nt=>{at.close(),localStorage.setItem("preferredSignatureType",_t.type===E.K.OTP?b.a.OTP:b.a.SMS),rt(H)}).catch(Nt=>{ht(Nt||null),at.dismiss()})}),at.componentInstance.closed.subscribe(()=>{ht()})})})}preparePaymentOrderBody(H,at){const yt=H.bankAccount?(0,t.ibanPrefix)(H.bankAccount,N.w.KZT):"",rt={iinOrBin:H.iinOrBin,name:H.name,kbe:{name:H.kbeCode,code:H.kbeCode},recipientAccount:{iban:yt,bankName:yt&&this.bankFromAccount.transform(yt,"name"),bic:yt&&this.bankFromAccount.transform(yt)}},ht=this.constructBasePaymentDetails(H,at),_t=this.payments.checkPaymentTypeFromIban(ht.payerIban,yt);return{emailOnSuccess:H.emailOnSuccess,paymentRecipient:rt,details:ht,category:l.nK.DOMESTIC,type:_t}}prepareForeignPaymentBody(H){return this.currencyPayments.mapForm(H)}prepareEmployeePaymentBody(H,at){const yt=H.commonPeriodEnabled&&H.period&&O(H.period).format(t.ISO_8061),rt=this.constructBasePaymentDetails(H,at),ht=H.employees.map(_t=>({amount:{currency:_t.currency,amount:_t.amount||0},birthDate:_t.birthDate,iin:_t.iin,lastname:_t.lastName,firstname:_t.firstName,middlename:_t.middleName,period:yt||_t.period}));return{category:l.nK.DOMESTIC,type:H.type,details:rt,paymentEmployees:ht}}prepareSalaryPaymentBody(H,at){var yt;const rt=this.dictionaries.bankDictionary.getItemsByIds(H.bankReceiver),ht={iinOrBin:null==rt?void 0:rt.bin,name:null==rt?void 0:rt.name,kbe:{code:H.isResidents?"19":"29"},recipientAccount:{iban:(null==rt?void 0:rt.salaryTransitIban)||(0,t.ibanPrefix)(H.bankAccount,N.w.KZT),bic:null==rt?void 0:rt.bic}},_t=this.constructBasePaymentDetails(H,at),Nt=null===(yt=H.employees)||void 0===yt?void 0:yt.map(nt=>{const Bt=this.maskService.getNumberedAmount(nt.amount);return{iban:nt.iban,amount:{currency:N.w.KZT,amount:Bt||0},birthDate:nt.birthDate,iin:nt.iin.replace(" ",""),lastname:nt.lastName,firstname:nt.firstName,middlename:nt.middleName}});return{category:l.nK.DOMESTIC,type:H.type,details:_t,paymentEmployees:Nt,paymentRecipient:ht}}preparePaymentTaxBody(H,at){const yt=H.bankAccount?(0,t.ibanPrefix)(H.bankAccount,N.w.KZT):"",rt=this.dictionaries.UGDictionary.getItemByKey(H.ugd,"code"),ht=this.dictionaries.KBKDictionary.getItemByKey(H.kbk,"code"),_t={recipientAccount:{iban:yt},iinOrBin:null==rt?void 0:rt.bin,name:null==rt?void 0:rt.name},Nt=["period","periodStart","periodEnd","vin","protocolNumber"].reduce((Lt,bt)=>(H[bt]&&(Lt[bt]=H[bt]instanceof Date?O(H[bt]).format("MM.yyyy"):H[bt]),Lt),{});return{paymentRecipient:_t,details:Object.assign(Object.assign({},this.constructBasePaymentDetails(H,at)),{associatedField:{parameters:Nt},kbk:{code:null==ht?void 0:ht.code,name:null==ht?void 0:ht.name}}),category:l.nK.DOMESTIC,type:l.V_.TAX}}flattenPaymentToModel(H){var at,yt,rt,ht,_t,Nt,nt,Bt,Lt;const{paymentRecipient:bt,details:$t,paymentEmployees:an,type:Vt}=H,An=this.accounts.store.items.find(Ht=>Ht.iban===$t.payerIban),Wt={amount:this.maskService.getMaskedAmount(null===(at=$t.paymentAmount)||void 0===at?void 0:at.amount),number:$t.documentId,date:$t.valueDate&&(0,t.dateToNgbStruct)(new Date($t.valueDate)),knp:null===(yt=$t.knp)||void 0===yt?void 0:yt.code,purpose:$t.description,vat:$t.vat,urgent:$t.urgent,type:Vt,senderAccount:An,emailOnSuccess:H.emailOnSuccess},hn=(null===(rt=$t.associatedField)||void 0===rt?void 0:rt.parameters)||{};if(an&&(Wt.employees=an.map(Ht=>({amount:Ht.amount.amount,iin:Ht.iin,firstName:Ht.firstname,lastName:Ht.lastname,middleName:Ht.middlename,fio:[Ht.lastname,Ht.firstname,Ht.middlename].join(" "),birthDate:Ht.birthDate,period:Ht.period,iban:Ht.iban})),Wt.employees.length)){const Ht=Wt.employees[0].period;Wt.commonPeriodEnabled=Wt.employees.every(nn=>nn.period&&nn.period===Ht),Wt.commonPeriodEnabled&&(Wt.period=O(Ht,t.ISO_8061).toDate())}switch(Vt){case l.V_.MEDICAL:case l.V_.PENSION:case l.V_.SOCIAL:break;case l.V_.SALARY:const Ht=this.dictionaries.bankDictionary.getItemByKey(null===(ht=null==bt?void 0:bt.recipientAccount)||void 0===ht?void 0:ht.bic,"bic");Ht&&(Wt.bankReceiver=Ht.id,Ht.salaryTransitIban||(Wt.bankAccount=null===(_t=null==bt?void 0:bt.recipientAccount)||void 0===_t?void 0:_t.iban)),bt&&(Wt.isResidents="19"===(null===(Nt=null==bt?void 0:bt.kbe)||void 0===Nt?void 0:Nt.code));break;case l.V_.TAX:let nn;(null==bt?void 0:bt.iinOrBin)&&(nn=this.dictionaries.UGDictionary.getItemByKey(bt.iinOrBin,"bin")),Object.assign(Wt,{ugd:null==nn?void 0:nn.code,kbk:null===(nt=$t.kbk)||void 0===nt?void 0:nt.code,vin:null==hn?void 0:hn.vin,protocolNumber:null==hn?void 0:hn.protocolNumber,bankAccount:(null===(Bt=null==bt?void 0:bt.recipientAccount)||void 0===Bt?void 0:Bt.iban)||l.SV.TAX_ACCOUNT}),["period","periodStart","periodEnd"].forEach(pn=>{const V=hn[pn],dt=V&&O(V,"MM.yyyy");(null==dt?void 0:dt.isValid())&&(Wt[pn]=dt.toDate())}),(Wt.periodEnd||Wt.periodEnd)&&(Wt.intervalEnabled=!0);break;case l.V_.FOREIGN:Object.assign(Wt,this.currencyPayments.mapPayment(H));break;default:Object.assign(Wt,{iinOrBin:null==bt?void 0:bt.iinOrBin,name:null==bt?void 0:bt.name,bankAccount:null===(Lt=null==bt?void 0:bt.recipientAccount)||void 0===Lt?void 0:Lt.iban,kbeCode:null==bt?void 0:bt.kbe.code})}return Wt}showResult(H,at={},yt,rt){const ht=this.modalService.open(h.R,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0,backdrop:"static"});Object.assign(ht.componentInstance,{message:this.mapError(yt),result:H,currency:N.w.KZT,amount:this.maskService.getNumberedAmount(at.amount)||0,multySubscribers:at.multySubscribers,hasRights:this.company.authorityLevel!==e.Ly.NO_SIGNATURE,payment:rt,updateCreated:at.updateCreated})}mapError(H){return H?H.data?Object.entries(H.data).map(([,at])=>at).join("<br/>"):(null==H?void 0:H.description)||(null==H?void 0:H.colvirResultDescription)||"ERRORS.UNKNOWN_ERROR":null}constructBasePaymentDetails(H,at){var yt,rt,ht;const _t=this.dictionaries.KNPDictionary.getItemByKey(H.knp,"code"),Nt=this.maskService.getNumberedAmount(H.amount);return{valueDate:H.date&&(0,t.ngbDateToUTCStartDay)(H.date).toISOString()||H.date,knp:{code:H.knp,name:_t&&_t.name||A.lz},description:H.purpose,payerIban:null===(yt=H.senderAccount)||void 0===yt?void 0:yt.iban,paymentAmount:{amount:Nt,currency:null===(ht=null===(rt=H.senderAccount)||void 0===rt?void 0:rt.balance)||void 0===ht?void 0:ht.currency},commission:{amount:at.commission,currency:N.w.KZT},vat:H.vat,urgent:H.urgent,documentId:H.number,fxContract:H.contract,fxContractId:H.contractId,fxContractRecipientId:H.fxContractRecipientId}}checkRecipientsRefresh(H){const at=H.paymentRecipient.recipientAccount;let rt=this.recipients.isRecipientExist({companyId:this.company.currentId,iinOrBin:H.paymentRecipient.iinOrBin,name:H.paymentRecipient.name,kbe:H.paymentRecipient.kbe});return rt&&this.recipients.isRecipientAccountExist(at.iban,rt.id)||this.recipients.getRecipients("",!0),H}}return kt.\u0275fac=function(H){return new(H||kt)(f.LFG(B.iu),f.LFG(k.cR),f.LFG($.$),f.LFG(i.F),f.LFG(Y.e),f.LFG(A.vI),f.LFG(S.J),f.LFG(U.FF),f.LFG(x.lG),f.LFG(ot.O),f.LFG(vt.sK),f.LFG(At.h))},kt.\u0275prov=f.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})()},9655:(Pt,X,r)=>{"use strict";r.d(X,{p:()=>M});var a=r(5e3),t=r(59516),N=r(69808),A=r(89854);const e=function(G){return[G]},b=function(G){return{faq:G}},_=function(G){return{outlets:G}};function h(G,f){if(1&G&&(a.TgZ(0,"div",5)(1,"button",7),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&G){const B=a.oxw(2);a.xp6(1),a.Q6J("routerLink",a.VKq(10,e,a.VKq(8,_,a.VKq(6,b,a.VKq(4,e,B.itemCardSettingsPackage.helpText))))),a.xp6(1),a.hij(" ",a.lcZ(3,2,"SHARED.MORE")," ")}}function l(G,f){if(1&G&&(a.TgZ(0,"div",4)(1,"div",5)(2,"h6"),a._uU(3),a.ALo(4,"translate"),a.qZA()(),a.YNc(5,h,4,12,"div",6),a.qZA()),2&G){const B=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,2,null==B.itemCardSettingsPackage?null:B.itemCardSettingsPackage.title)),a.xp6(2),a.Q6J("ngIf",null==B.itemCardSettingsPackage?null:B.itemCardSettingsPackage.helpText)}}function E(G,f){1&G&&(a.TgZ(0,"a",8),a._UZ(1,"img",9),a.qZA())}function O(G,f){if(1&G&&(a.TgZ(0,"div",10)(1,"small"),a._uU(2),a.ALo(3,"async"),a.qZA()()),2&G){const B=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,1,null==B.itemCardSettingsPackage?null:B.itemCardSettingsPackage.description))}}const F=["*"];let M=(()=>{class G{constructor(B){this.router=B,this.additionalPackage=new a.vpe}navigateAdditionalPackage(){this.additionalPackage.emit(this.additionalType),this.additionalType&&this.router.navigate(["/settings/package",{outlets:{additional:[this.additionalType]}}])}}return G.\u0275fac=function(B){return new(B||G)(a.Y36(t.F0))},G.\u0275cmp=a.Xpm({type:G,selectors:[["j-settings-package-card"]],inputs:{itemCardSettingsPackage:"itemCardSettingsPackage",additionalType:"additionalType"},outputs:{additionalPackage:"additionalPackage"},ngContentSelectors:F,decls:6,vars:7,consts:[["class","row mt-3 mx-0 justify-content-between section-header",4,"ngIf"],[1,"mt-1","j-page",3,"click"],["class","additional-arrow",4,"ngIf"],["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mt-3","mx-0","justify-content-between","section-header"],[1,"d-flex"],["class","d-flex",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"routerLink"],[1,"additional-arrow"],["src","assets/icons/shared/arrow-right.svg","alt",""],[1,"row","mx-1","justify-content-start"]],template:function(B,k){1&B&&(a.F$t(),a.YNc(0,l,6,4,"div",0),a.TgZ(1,"section",1),a.NdJ("click",function(){return k.navigateAdditionalPackage()}),a.YNc(2,E,2,0,"a",2),a.Hsn(3),a.YNc(4,O,4,3,"div",3),a.ALo(5,"async"),a.qZA()),2&B&&(a.Q6J("ngIf",null==k.itemCardSettingsPackage?null:k.itemCardSettingsPackage.title),a.xp6(1),a.ekj("additional-package",k.additionalType),a.xp6(1),a.Q6J("ngIf",k.additionalType),a.xp6(2),a.Q6J("ngIf",a.lcZ(5,5,null==k.itemCardSettingsPackage?null:k.itemCardSettingsPackage.description)))},directives:[N.O5,t.rH],pipes:[A.X$,N.Ov],styles:["section[_ngcontent-%COMP%]{padding:1rem;margin:1rem 0;background:#fff;border-radius:.75rem;max-width:27.2rem;box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a}.section-header[_ngcontent-%COMP%]{max-width:27.2rem}.additional-arrow[_ngcontent-%COMP%]{float:right}small[_ngcontent-%COMP%]{color:#828282;font-size:.75rem}.additional-package[_ngcontent-%COMP%]:hover{transform:scale(1.01);cursor:pointer}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400}"]}),G})()},62442:(Pt,X,r)=>{"use strict";r.d(X,{M:()=>Y});var a=r(5e3),t=r(69808),N=r(59516),A=r(89854);function e(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.hij("",a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.REMAINING"),"\xa0"))}function b(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM1")))}function _(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM2")))}function h(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM3")))}function l(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM4")))}function E(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM2")))}function O(S,U){1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"SETTINGS.PACKAGE.PROGRESS_BAR.EXTRA")," "))}function F(S,U){if(1&S&&(a.TgZ(0,"div",2)(1,"small"),a._uU(2),a.ALo(3,"async"),a.qZA()()),2&S){const x=a.oxw(2);a.xp6(2),a.hij(" ",a.lcZ(3,1,x.item.description)," ")}}const M=function(S){return[S]},G=function(S){return{additional:S}},f=function(S){return{outlets:S}},B=function(S){return["/settings/package",S]};function k(S,U){if(1&S&&(a.TgZ(0,"div",13)(1,"a",14),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&S){const x=a.oxw(2);a.xp6(1),a.Q6J("routerLink",a.VKq(10,B,a.VKq(8,f,a.VKq(6,G,a.VKq(4,M,x.key))))),a.xp6(1),a.Oqu(a.lcZ(3,2,"SETTINGS.PACKAGE.BUY"))}}function $(S,U){if(1&S&&(a.TgZ(0,"div",1)(1,"div",2)(2,"span"),a._uU(3),a.ALo(4,"translate"),a.YNc(5,e,3,3,"span",3),a.TgZ(6,"span",4),a._uU(7),a.ALo(8,"number"),a.qZA(),a.TgZ(9,"span",5),a.YNc(10,b,3,3,"span",6),a.YNc(11,_,3,3,"span",6),a.YNc(12,h,3,3,"span",6),a.YNc(13,l,3,3,"span",6),a.YNc(14,E,3,3,"span",7),a.qZA(),a._uU(15),a.ALo(16,"number"),a.YNc(17,O,3,3,"span",3),a.qZA()(),a.YNc(18,F,4,3,"div",8),a.TgZ(19,"div",9)(20,"div",10),a._UZ(21,"div",11),a.qZA()(),a.YNc(22,k,4,12,"div",12),a.qZA()),2&S){const x=a.oxw();a.xp6(3),a.hij(" ",a.lcZ(4,17,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),a.xp6(2),a.Q6J("ngIf","extra"===x.key),a.xp6(1),a.Q6J("title",null==x.item?null:x.item.current),a.xp6(1),a.hij("",a.lcZ(8,19,null==x.item?null:x.item.current),"\xa0"),a.xp6(2),a.Q6J("ngSwitch",null==x.item?null:x.item.current),a.xp6(1),a.Q6J("ngSwitchCase",5),a.xp6(1),a.Q6J("ngSwitchCase",10),a.xp6(1),a.Q6J("ngSwitchCase",20),a.xp6(1),a.Q6J("ngSwitchCase",50),a.xp6(2),a.hij(" ",a.lcZ(16,21,null==x.item?null:x.item.total)," "),a.xp6(2),a.Q6J("ngIf","extra"===x.key),a.xp6(1),a.Q6J("ngIf",null==x.item?null:x.item.description),a.xp6(3),a.Gre("progress-bar ",null!=x.item&&x.item.color?x.item.color:"NONE",""),a.Q6J("ngStyle",x.style),a.xp6(1),a.Q6J("ngIf",("RED"===x.item.color||"NONE"===x.item.color)&&!x.withoutExtra)}}function i(S,U){1&S&&(a.TgZ(0,"div",1)(1,"div",2),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",2)(5,"small"),a._uU(6),a.ALo(7,"translate"),a.qZA()()()),2&S&&(a.xp6(2),a.hij(" ",a.lcZ(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),a.xp6(4),a.hij(" ",a.lcZ(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}let Y=(()=>{class S{constructor(){this.withoutExtra=!0,this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(x){const ot=Math.round((null==x?void 0:x.current)/(null==x?void 0:x.total)*100);this.style.width=`${ot||1}%`}}return S.\u0275fac=function(x){return new(x||S)},S.\u0275cmp=a.Xpm({type:S,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",withoutExtra:"withoutExtra",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[4,"ngIf"],[3,"title"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","col-12 p-0",4,"ngIf"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",3,"ngStyle"],["class","col-12 p-0 mt-3",4,"ngIf"],[1,"col-12","p-0","mt-3"],[1,"faq",3,"routerLink"]],template:function(x,ot){1&x&&(a.YNc(0,$,23,23,"div",0),a.YNc(1,i,8,6,"div",0)),2&x&&(a.Q6J("ngIf",null==ot.item?null:ot.item.total),a.xp6(1),a.Q6J("ngIf",!(null!=ot.item&&ot.item.total)))},directives:[t.O5,t.RF,t.n9,t.ED,t.PC,N.yS],pipes:[A.X$,t.JJ,t.Ov],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.progress-bar[_ngcontent-%COMP%]{border-radius:.375rem}.GREEN[_ngcontent-%COMP%]{background-color:#74ba72!important}.YELLOW[_ngcontent-%COMP%]{background-color:#ef8f00!important}.RED[_ngcontent-%COMP%]{background-color:red!important}.NONE[_ngcontent-%COMP%]{background-color:#e9ecf1!important}.faq[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:18px;display:flex;align-items:center;text-align:right;color:#1586bb}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),S})()},62917:(Pt,X,r)=>{"use strict";r.d(X,{J:()=>Y});var a=r(5e3),t=r(82524),N=r(83599),A=r(40703),e=r(17165),b=r(89854),_=r(69808),h=r(28957),l=r(33999);function E(S,U){1&S&&(a._UZ(0,"img",8),a.ALo(1,"translate")),2&S&&a.s9C("alt",a.lcZ(1,1,"SHARED.DONE"))}function O(S,U){1&S&&(a._UZ(0,"img",9),a.ALo(1,"translate")),2&S&&a.s9C("alt",a.lcZ(1,1,"SHARED.DONE"))}function F(S,U){if(1&S&&(a.TgZ(0,"h3",10),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S){const x=a.oxw(2);a.xp6(1),a.hij(" ",a.lcZ(2,1,x.alertMessage.title)," ")}}function M(S,U){if(1&S&&(a.TgZ(0,"p",11),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&S){const x=a.oxw(2);a.xp6(1),a.hij(" ",a.lcZ(2,1,x.alertMessage.description)," ")}}function G(S,U){if(1&S){const x=a.EpF();a.TgZ(0,"div",12)(1,"button",13),a.NdJ("click",function(){a.CHM(x);const vt=a.oxw(2);return vt.buttonClick(vt.alertMessage.buttonOk.key)}),a._uU(2),a.ALo(3,"translate"),a.qZA()()}if(2&S){const x=a.oxw(2);a.xp6(2),a.hij(" ",a.lcZ(3,1,x.alertMessage.buttonOk.text)," ")}}function f(S,U){if(1&S){const x=a.EpF();a.TgZ(0,"div",12)(1,"button",14),a.NdJ("click",function(){a.CHM(x);const vt=a.oxw(2);return vt.buttonClick(vt.alertMessage.buttonClose.key)}),a._uU(2),a.ALo(3,"translate"),a.qZA()()}if(2&S){const x=a.oxw(2);a.xp6(2),a.hij(" ",a.lcZ(3,1,x.alertMessage.buttonClose.text)," ")}}function B(S,U){if(1&S&&(a.ynx(0),a._UZ(1,"div",1),a.TgZ(2,"div",2),a.YNc(3,E,2,3,"img",3),a.YNc(4,O,2,3,"img",4),a.YNc(5,F,3,3,"h3",5),a.YNc(6,M,3,3,"p",6),a.qZA(),a.YNc(7,G,4,3,"div",7),a.YNc(8,f,4,3,"div",7),a.BQk()),2&S){const x=a.oxw();a.xp6(3),a.Q6J("ngIf","success"===(null==x.alertMessage?null:x.alertMessage.icon)),a.xp6(1),a.Q6J("ngIf","error"===(null==x.alertMessage?null:x.alertMessage.icon)),a.xp6(1),a.Q6J("ngIf",null==x.alertMessage?null:x.alertMessage.title),a.xp6(1),a.Q6J("ngIf",null==x.alertMessage?null:x.alertMessage.description),a.xp6(1),a.Q6J("ngIf",null==x.alertMessage?null:x.alertMessage.buttonOk),a.xp6(1),a.Q6J("ngIf",null==x.alertMessage?null:x.alertMessage.buttonClose)}}function k(S,U){if(1&S){const x=a.EpF();a.TgZ(0,"button",18),a.NdJ("click",function(){return a.CHM(x),a.oxw(2).buttonClick("close")}),a._UZ(1,"img",19),a.ALo(2,"translate"),a.qZA()}2&S&&(a.xp6(1),a.s9C("alt",a.lcZ(2,1,"SHARED.CLOSE")))}function $(S,U){1&S&&(a.TgZ(0,"div",20),a._UZ(1,"j-animated-loading"),a.qZA())}function i(S,U){if(1&S){const x=a.EpF();a.ynx(0),a.TgZ(1,"div",1),a.YNc(2,k,3,3,"button",15),a.qZA(),a.TgZ(3,"div",2)(4,"j-sms",16),a.NdJ("loaded",function(){return a.CHM(x),a.oxw().onSmsLoaded()})("submitted",function(vt){return a.CHM(x),a.oxw().onSubmit(vt)}),a.qZA(),a.YNc(5,$,2,0,"div",17),a.qZA(),a.BQk()}if(2&S){const x=a.oxw();a.xp6(2),a.Q6J("ngIf",x.isReady),a.xp6(2),a.Q6J("phone",x.phone)("countryCode",x.countryCode)("headers",x.headerParams)("hidden",!x.isReady),a.xp6(1),a.Q6J("ngIf",!x.isReady)}}let Y=(()=>{class S{constructor(x,ot,vt){this.modal=x,this.packageRequestsService=ot,this.translateService=vt,this.refresh=new a.vpe,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:t.H$.SIGNING_PACKAGE},this.transferBody={transferType:"",isEnabled:!1}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,"change_transfer"===this.alertMessageType?this.initTransferAlert():"additional_package"===this.alertMessageType?this.initExtraAlert():"change_account"===this.alertMessageType?this.smsAfterOpen=!0:this.initPackageAlert()}initPackageAlert(){this.alertMessage=this.isWorkingDay?this.isSameDay?N.xh.same_day:N.xh[this.alertMessageType]:N.xh.working_days}initExtraAlert(){this.isWorkingDay?(this.alertMessage=N.xh[this.alertMessageType],this.translateService.get("SETTINGS.PACKAGE.MESSAGE.CONNECT_EXTRA.DESCRIPTION",{currency:this.extraTerms.item.currency}).subscribe(x=>this.alertMessage.title=x)):this.alertMessage=N.xh.working_days}initTransferAlert(){this.isWorkingDay?"discountInRubles"in this.packageTerms&&this.packageRest.discountOnTransferInRubles.isSameDay?this.alertMessage=N.xh.transfer_ruble_same_day:"discountInForeignCurrency"in this.packageTerms&&this.packageRest.discountOnTransferInCurrency.isSameDay?this.alertMessage=N.xh.transfer_currency_same_day:this.generateAlertMessage():this.alertMessage=N.xh.working_days}generateAlertMessage(){const x={};"discountInRubles"in this.packageTerms?(this.transferBody.transferType="DISCOUNT_RUBLES",this.transferBody.isEnabled=!this.packageRest.discountOnTransferInRubles.hasDiscount,this.packageRest.discountOnTransferInRubles.hasDiscount?(x.title="SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_RUBLES.TITLE",this.translateService.get("SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_RUBLES.DESCRIPTION",{currency:this.packageRest.totalCost-this.packageRest.discountOnTransferInRubles.costDiscount}).subscribe(ot=>x.description=ot),x.buttonOk={text:"SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_RUBLES.BUTTON_CLOSE.TEXT",key:"smsAfter"}):(this.translateService.get("SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_RUBLES.TITLE",{currency:this.packageRest.discountOnTransferInRubles.costCurrent}).subscribe(ot=>x.title=ot),this.translateService.get("SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_RUBLES.DESCRIPTION",{currency:this.packageRest.totalCost+this.packageRest.discountOnTransferInRubles.costDiscount}).subscribe(ot=>x.description=ot),x.buttonOk={text:"SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_RUBLES.BUTTON_CLOSE.TEXT",key:"smsAfter"})):(this.transferBody.transferType="DISCOUNT_CURRENCY",this.transferBody.isEnabled=!this.packageRest.discountOnTransferInCurrency.hasDiscount,this.packageRest.discountOnTransferInCurrency.hasDiscount?(x.title="SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_CURRENCY.TITLE",this.translateService.get("SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_CURRENCY.DESCRIPTION",{currency:this.packageRest.totalCost-this.packageRest.discountOnTransferInCurrency.costDiscount}).subscribe(ot=>x.description=ot),x.buttonOk={text:"SETTINGS.PACKAGE.MESSAGE.DISABLE_DISCOUNT_CURRENCY.BUTTON_CLOSE.TEXT",key:"smsAfter"}):(this.translateService.get("SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_CURRENCY.TITLE",{currency:this.packageRest.discountOnTransferInCurrency.costCurrent}).subscribe(ot=>x.title=ot),this.translateService.get("SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_CURRENCY.DESCRIPTION",{currency:this.packageRest.totalCost+this.packageRest.discountOnTransferInCurrency.costDiscount}).subscribe(ot=>x.description=ot),x.buttonOk={text:"SETTINGS.PACKAGE.MESSAGE.ADD_DISCOUNT_CURRENCY.BUTTON_CLOSE.TEXT",key:"smsAfter"})),x.buttonClose={text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"refresh"},this.alertMessage=x}onSmsLoaded(){this.isReady=!0}onSubmit(x){this.isReady=!1,"change_transfer"===this.alertMessageType?this.changeTransfer(x.signature):"additional_package"===this.alertMessageType?this.addExtra(x.signature):"change_account"===this.alertMessageType?this.changePackageAccount(x.signature):this.changePackage(x.signature)}changePackage(x){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,x).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?N.xh.prepared_standart:N.xh.prepared}).catch(ot=>{this.catchError(ot)}).finally(()=>{var ot;const vt="connect"===this.alertMessageType?"new":"old",At=(null===(ot=this.alertMessage)||void 0===ot?void 0:ot.code)||"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:vt,statusCode:At})})}changeTransfer(x){this.packageRequestsService.changeCompanyPackageTransfer(this.companyId,this.transferBody,x).then(()=>{"DISCOUNT_RUBLES"===this.transferBody.transferType&&(this.alertMessage=this.transferBody.isEnabled?N.xh.transfer_ruble_prepared_on:N.xh.transfer_ruble_prepared_off),"DISCOUNT_CURRENCY"===this.transferBody.transferType&&(this.alertMessage=this.transferBody.isEnabled?N.xh.transfer_currency_prepared_on:N.xh.transfer_currency_prepared_off)}).catch(ot=>{this.catchError(ot)}).finally(()=>{var ot;const At=(null===(ot=this.alertMessage)||void 0===ot?void 0:ot.code)||"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:"old",statusCode:At})})}addExtra(x){this.packageRequestsService.addCompanyPackageExtra(this.companyId,{transferType:this.extraTerms.transferType,value:this.extraTerms.value},x).then(()=>{this.alertMessage=N.xh.additional_success}).catch(ot=>{this.catchError(ot)}).finally(()=>{var ot;this.smsAfterOpen=!1;const At=(null===(ot=this.alertMessage)||void 0===ot?void 0:ot.code)||"";this.refresh.emit({typeUser:"old",statusCode:At})})}changePackageAccount(x){this.packageRequestsService.changeCompanyPackageAccount(this.companyId,{iban:this.iban},x).then(()=>{this.alertMessage=N.xh.change_account}).catch(ot=>{this.catchError(ot)}).finally(()=>{this.smsAfterOpen=!1,this.refresh.emit()})}buttonClick(x){"smsAfter"===x&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===x&&this.modal.close(),"close"===x&&this.modal.close(),"refresh"===x&&(this.refresh.emit({}),this.modal.close())}catchError(x){this.alertMessage=402===x.status?N.xh.payment:423===x.status?N.xh.payment_locked:N.xh.error}}return S.\u0275fac=function(x){return new(x||S)(a.Y36(A.Kz),a.Y36(e.F),a.Y36(b.sK))},S.\u0275cmp=a.Xpm({type:S,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",extraTerms:"extraTerms",packageRest:"packageRest",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay",iban:"iban"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(x,ot){1&x&&(a.YNc(0,B,9,6,"ng-container",0),a.YNc(1,i,6,6,"ng-container",0)),2&x&&(a.Q6J("ngIf",!ot.smsAfterOpen),a.xp6(1),a.Q6J("ngIf",ot.smsAfterOpen))},directives:[_.O5,b.Pi,h.T,l.V],pipes:[b.X$],styles:[""]}),S})()},83599:(Pt,X,r)=>{"use strict";r.d(X,{xh:()=>N,GY:()=>a.GY,W3:()=>a.W3,gB:()=>a.gB,ZS:()=>a.ZS,qP:()=>a.qP,K0:()=>a.K0,G0:()=>a.G0});var a=r(52418);r(35059);const N={connect:{title:"SETTINGS.PACKAGE.MESSAGE.CONNECT.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CONNECT.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT.BUTTON_CLOSE.TEXT",key:"close"}},prepared:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.PREPARED.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.PREPARED.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.PREPARED.BUTTON_OK.TEXT",key:"returnMyPackage"}},error:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.ERROR.TITLE",code:"50x",description:"SETTINGS.PACKAGE.MESSAGE.ERROR.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.ERROR.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.ERROR.BUTTON_CLOSE.TEXT",key:"close"}},change:{title:"SETTINGS.PACKAGE.MESSAGE.CHANGE.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CHANGE.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CHANGE.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CHANGE.BUTTON_CLOSE.TEXT",key:"close"}},change_account:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.CHANGE_ACCOUNT.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.CHANGE_ACCOUNT.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CHANGE_ACCOUNT.BUTTON_OK.TEXT",key:"returnMyPackage"}},connect_standart:{title:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.BUTTON_CLOSE.TEXT",key:"close"}},prepared_standart:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.BUTTON_OK.TEXT",key:"returnMyPackage"}},payment:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.TITLE",code:"402",description:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.BUTTON_CLOSE.TEXT",key:"close"}},payment_locked:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.BUTTON_CLOSE.TEXT",key:"close"}},working_days:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.WORKING_DAYS.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.WORKING_DAYS.BUTTON_CLOSE.TEXT",key:"close"}},same_day:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.SAME_DAY.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.SAME_DAY.BUTTON_CLOSE.TEXT",key:"close"}},transfer_ruble_same_day:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_SAME_DAY.DESCRIPTION",code:"400",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_SAME_DAY.BUTTON_OK.TEXT",key:"refresh"}},transfer_currency_same_day:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_SAME_DAY.DESCRIPTION",code:"400",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_SAME_DAY.BUTTON_OK.TEXT",key:"refresh"}},transfer_ruble_prepared_on:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_ON.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_ON.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_ON.BUTTON_OK.TEXT",key:"returnMyPackage"}},transfer_ruble_prepared_off:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_OFF.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_OFF.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_RUBLE_PREPARED_OFF.BUTTON_OK.TEXT",key:"returnMyPackage"}},transfer_currency_prepared_on:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_ON.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_ON.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_ON.BUTTON_OK.TEXT",key:"returnMyPackage"}},transfer_currency_prepared_off:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_OFF.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_OFF.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.TRANSFER_CURRENCY_PREPARED_OFF.BUTTON_OK.TEXT",key:"returnMyPackage"}},additional_package:{title:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_PACKAGE.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_PACKAGE.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_PACKAGE.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_PACKAGE.BUTTON_CLOSE.TEXT",key:"close"}},additional_success:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_SUCCESS.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_SUCCESS.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.ADDITIONAL_SUCCESS.BUTTON_OK.TEXT",key:"returnMyPackage"}}}},35059:(Pt,X,r)=>{"use strict";r.d(X,{U:()=>a});const a={sales:{title:"SETTINGS.PACKAGE.FAQ.DATA.SALE.TITLE",lists:[{title:"SETTINGS.PACKAGE.FAQ.DATA.SALE.RUBLES.TITLE",description:"SETTINGS.PACKAGE.FAQ.DATA.SALE.RUBLES.DESCRIPTION"},{title:"SETTINGS.PACKAGE.FAQ.DATA.SALE.ANOTHER_CURRENCY.TITLE",description:"SETTINGS.PACKAGE.FAQ.DATA.SALE.ANOTHER_CURRENCY.DESCRIPTION"},{title:"SETTINGS.PACKAGE.FAQ.DATA.SALE.UNK.TITLE"}]},deposits:{title:"SETTINGS.PACKAGE.FAQ.DATA.DEPOSIT.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.DEPOSIT.LISTS.DESCRIPTION"}]},payments:{title:"SETTINGS.PACKAGE.FAQ.DATA.PAYMENT.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.PAYMENT.LISTS.DESCRIPTION"}]},my_package:{title:"SETTINGS.PACKAGE.FAQ.DATA.MY_PACKAGE.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.MY_PACKAGE.LISTS.DESCRIPTION1"},{description:"SETTINGS.PACKAGE.FAQ.DATA.MY_PACKAGE.LISTS.DESCRIPTION2"},{description:"SETTINGS.PACKAGE.FAQ.DATA.MY_PACKAGE.LISTS.DESCRIPTION3"}]},calculate:{title:"SETTINGS.PACKAGE.FAQ.DATA.CALCULATE.TITLE",lists:[{title:"SETTINGS.PACKAGE.FAQ.DATA.CALCULATE.LISTS.TITLE1",description:"SETTINGS.PACKAGE.FAQ.DATA.CALCULATE.LISTS.DESCRIPTION1"},{title:"SETTINGS.PACKAGE.FAQ.DATA.CALCULATE.LISTS.TITLE2",description:"SETTINGS.PACKAGE.FAQ.DATA.CALCULATE.LISTS.DESCRIPTION2"}]},additional_payment:{title:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_PAYMENT.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_PAYMENT.LISTS.DESCRIPTION1"},{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_PAYMENT.LISTS.DESCRIPTION2"}]},additional_refill:{title:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_REFILL.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_REFILL.LISTS.DESCRIPTION1"},{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_REFILL.LISTS.DESCRIPTION2"}]},additional_disabled:{title:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_DISABLED.TITLE",lists:[{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_DISABLED.LISTS.DESCRIPTION1"},{description:"SETTINGS.PACKAGE.FAQ.DATA.ADDITIONAL_DISABLED.LISTS.DESCRIPTION2"}]}}},52418:(Pt,X,r)=>{"use strict";r.d(X,{qP:()=>t,K0:()=>N,G0:()=>A,ZS:()=>e,gB:()=>b,W3:()=>_,GY:()=>h,YM:()=>l,np:()=>E});var a=r(21086);const t=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],N=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],A=[{name:"SETTINGS.PACKAGE.SALE_DATA.RUB.TITLE",text:"SETTINGS.PACKAGE.SALE_DATA.RUB.DESCRIPTION",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"SETTINGS.PACKAGE.SALE_DATA.FOREIGN.TITLE",text:"SETTINGS.PACKAGE.SALE_DATA.FOREIGN.DESCRIPTION",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],e=[Object.assign(Object.assign({},A[0]),{disabled:!0}),Object.assign(Object.assign({},A[1]),{disabled:!0})],b={current:0,total:0,description:(0,a.of)(""),color:""},_={current:0,total:0,description:(0,a.of)(""),color:""},h={totalCost:0,nextWriteOff:""},l={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},E=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}]},32110:(Pt,X,r)=>{"use strict";r.d(X,{d:()=>A});var a=r(5e3),t=r(40703),N=r(89854);let A=(()=>{class e{constructor(_){this.modal=_}closeModal(){this.modal.close()}}return e.\u0275fac=function(_){return new(_||e)(a.Y36(t.Kz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["j-change-password-success"]],decls:14,vars:6,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"]],template:function(_,h){1&_&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(){return h.closeModal()}),a._UZ(2,"img",2),a.ALo(3,"translate"),a.qZA()(),a.TgZ(4,"div",3),a._UZ(5,"img",4),a.ALo(6,"translate"),a.TgZ(7,"h3",5),a._uU(8," SHARED.DONE "),a.qZA(),a.TgZ(9,"p",6),a._uU(10," SETTINGS.PASSWORD.SUCCESS "),a.qZA()(),a.TgZ(11,"div",7)(12,"button",8),a.NdJ("click",function(){return h.closeModal()}),a._uU(13," SHARED.CLOSE "),a.qZA()()),2&_&&(a.xp6(2),a.s9C("alt",a.lcZ(3,2,"SHARED.CLOSE")),a.xp6(3),a.s9C("alt",a.lcZ(6,4,"SHARED.DONE")))},directives:[N.Pi],pipes:[N.X$],styles:[""]}),e})()},72551:(Pt,X,r)=>{"use strict";r.d(X,{x:()=>ht});var a=r(42654),t=r(52418),N=r(77265),A=r(62917),e=r(5e3),b=r(59516),_=r(17165),h=r(26164),l=r(16206),E=r(40703),O=r(89854),F=r(69808),M=r(62442),G=r(9655),f=r(43169),B=r(23918);function k(_t,Nt){if(1&_t&&(e.ynx(0),e.TgZ(1,"div",13)(2,"div",11),e._UZ(3,"j-settings-package-progressbar",14),e.qZA()(),e.BQk()),2&_t){const nt=e.oxw();e.xp6(3),e.Q6J("item",nt.myData)("key",nt.type)}}function $(_t,Nt){if(1&_t&&(e.TgZ(0,"div",19)(1,"div",11)(2,"j-settings-package-card"),e._UZ(3,"j-settings-package-progressbar",14),e.qZA()()()),2&_t){const nt=e.oxw(2);e.xp6(3),e.Q6J("item",nt.myExtraData)("key","extra")}}function i(_t,Nt){if(1&_t&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&_t){const nt=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,null==nt.page[nt.type]||null==nt.page[nt.type].helpText?null:nt.page[nt.type].helpText.description)," ")}}function Y(_t,Nt){if(1&_t&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&_t){const nt=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,null==nt.page[nt.type]||null==nt.page[nt.type].helpText?null:nt.page[nt.type].helpText.descriptionDisabled)," ")}}function S(_t,Nt){if(1&_t&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&_t){const nt=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.gM2(2,1,nt.value,"\u20b8","symbol","0.0-2")," ")}}function U(_t,Nt){if(1&_t&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&_t){const nt=e.oxw().$implicit;e.xp6(1),e.AsE(" ",nt.value," ",e.lcZ(2,2,"SETTINGS.PACKAGE.ADDPAYMENT")," ")}}function x(_t,Nt){if(1&_t){const nt=e.EpF();e.TgZ(0,"div",11)(1,"j-settings-package-card")(2,"div",24),e.NdJ("click",function(){const bt=e.CHM(nt).$implicit;return e.oxw(2).addAdditionalPackage(bt)}),e.YNc(3,S,3,6,"div",25),e.YNc(4,U,3,4,"div",25),e.TgZ(5,"div",26),e._uU(6),e.ALo(7,"currency"),e.qZA()()()()}if(2&_t){const nt=Nt.$implicit,Bt=e.oxw(2);e.xp6(3),e.Q6J("ngIf","refill"===Bt.type),e.xp6(1),e.Q6J("ngIf","payment"===Bt.type),e.xp6(1),e.ekj("price-disabled",(null==Bt.myExtraData?null:Bt.myExtraData.current)>0),e.xp6(1),e.hij(" ",e.gM2(7,5,nt.currency,"\u20b8","symbol","0.0-2")," ")}}const ot=function(_t){return[_t]},vt=function(_t){return{faq:_t,additional:null}},At=function(_t){return{outlets:_t}},Zt=function(_t){return["/settings/package",_t]};function kt(_t,Nt){if(1&_t&&(e.ynx(0),e.YNc(1,$,4,2,"div",15),e.TgZ(2,"div",16)(3,"p",17),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,i,3,3,"p",18),e.YNc(7,Y,3,3,"p",18),e.qZA(),e.TgZ(8,"div",19),e.YNc(9,x,8,10,"div",20),e.qZA(),e.TgZ(10,"div",21)(11,"div",5)(12,"a",22),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.BQk()),2&_t){const nt=e.oxw();e.xp6(1),e.Q6J("ngIf",null==nt.myExtraData?null:nt.myExtraData.total),e.xp6(3),e.hij(" ",e.lcZ(5,7,null==nt.page[nt.type]||null==nt.page[nt.type].helpText?null:nt.page[nt.type].helpText.title)," "),e.xp6(2),e.Q6J("ngIf",!(null!=nt.myExtraData&&nt.myExtraData.total)),e.xp6(1),e.Q6J("ngIf",null==nt.myExtraData?null:nt.myExtraData.total),e.xp6(2),e.Q6J("ngForOf",nt.data),e.xp6(3),e.Q6J("routerLink",e.VKq(17,Zt,e.VKq(15,At,e.VKq(13,vt,e.VKq(11,ot,null!=nt.myExtraData&&nt.myExtraData.total?"additional_disabled":"additional_"+nt.type))))),e.xp6(1),e.hij(" ",e.lcZ(14,9,"SETTINGS.PACKAGE.FAQ.TITLE")," ")}}function Yt(_t,Nt){1&_t&&(e.ynx(0),e._UZ(1,"j-error-placeholder",28),e.ALo(2,"translate"),e.ALo(3,"translate"),e.BQk()),2&_t&&(e.xp6(1),e.Q6J("errorText",e.lcZ(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",e.lcZ(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function H(_t,Nt){if(1&_t){const nt=e.EpF();e.ynx(0),e.TgZ(1,"j-error-placeholder",29),e.NdJ("retried",function(){return e.CHM(nt),e.oxw().getPackageRest()}),e.qZA(),e.BQk()}}function at(_t,Nt){if(1&_t&&e._UZ(0,"ngx-skeleton-loader",31),2&_t){const nt=e.oxw(2);e.Q6J("theme",nt.theme)}}const yt=function(){return[0,1,2]};function rt(_t,Nt){1&_t&&(e.ynx(0),e.YNc(1,at,1,1,"ngx-skeleton-loader",30),e.BQk()),2&_t&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,yt)))}let ht=(()=>{class _t{constructor(nt,Bt,Lt,bt,$t,an){var Vt;this.route=nt,this.packageRequestsService=Bt,this.companyService=Lt,this.analytics=bt,this.modalService=$t,this.translateService=an,this.subscription=new a.w,this.theme={height:"10rem",width:"100%","background-color":"#ECEEF1"},this.page={payment:{title:"SETTINGS.PACKAGE.ADDITIONAL.PAYMENT.TITLE",key:"numberOfPayments",helpText:{title:"SETTINGS.PACKAGE.ADDITIONAL.PAYMENT.HELP_TEXT.TITLE",description:"SETTINGS.PACKAGE.ADDITIONAL.PAYMENT.HELP_TEXT.DESCRIPTION",descriptionDisabled:"SETTINGS.PACKAGE.ADDITIONAL.PAYMENT.HELP_TEXT.DESCRIPTION_DISABLED"}},refill:{title:"SETTINGS.PACKAGE.ADDITIONAL.REFILL.TITLE",key:"depositAndWithdrawal",helpText:{title:"SETTINGS.PACKAGE.ADDITIONAL.REFILL.HELP_TEXT.TITLE",description:"SETTINGS.PACKAGE.ADDITIONAL.REFILL.HELP_TEXT.DESCRIPTION",descriptionDisabled:"SETTINGS.PACKAGE.ADDITIONAL.REFILL.HELP_TEXT.DESCRIPTION_DISABLED"}}},this.myData=Object.assign({},t.W3),this.myExtraData=Object.assign({},t.W3),this.type=null===(Vt=nt.snapshot.params)||void 0===Vt?void 0:Vt.type}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(nt=>{this.companyId=nt[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageResponseStatus=N.TV.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(nt=>{var Bt;this.packageRest=nt,this.packageResponseStatus=(null===(Bt=this.packageRest)||void 0===Bt?void 0:Bt.totalCost)?N.TV.Success:N.TV.Error,this.addData(this.packageRest),this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(nt=>{403===nt.status?(this.packageResponseStatus=N.TV.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=N.TV.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}addData(nt){"payment"===this.type&&(this.myData.current=nt.restOfPayments.currentNumberOfPayments,this.myData.total=nt.restOfPayments.totalNumberOfPayments,this.myData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:nt.restOfPayments.totalNumberOfPayments,payment:nt.restOfPayments.costNextPayment}),(null==nt?void 0:nt.extraRestOfPayments)&&(this.myExtraData.current=nt.extraRestOfPayments.currentNumberOfPayments,this.myExtraData.total=nt.extraRestOfPayments.totalNumberOfPayments,this.myExtraData.description=this.translateService.get("SETTINGS.PACKAGE.ADDITIONAL.NO_EXPIRATION_DATE"),this.myExtraData.color=nt.extraRestOfPayments.colorIndicator),this.data=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}]),"refill"===this.type&&(this.myData.current=nt.depositAndWithdrawals.currentDepositAndWithdrawals,this.myData.total=nt.depositAndWithdrawals.totalDepositAndWithdrawals,this.myData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:nt.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:nt.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:nt.depositAndWithdrawals.withdrawalOverLimit}),(null==nt?void 0:nt.extraDepositAndWithdrawals)&&(this.myExtraData.current=nt.extraDepositAndWithdrawals.currentDepositAndWithdrawals,this.myExtraData.total=nt.extraDepositAndWithdrawals.totalDepositAndWithdrawals,this.myExtraData.description=this.translateService.get("SETTINGS.PACKAGE.ADDITIONAL.NO_EXPIRATION_DATE"),this.myExtraData.color=nt.extraDepositAndWithdrawals.colorIndicator),this.data=[{checked:!1,value:2e6,currency:2e3},{checked:!1,value:5e6,currency:8e3},{checked:!1,value:1e7,currency:15e3},{checked:!1,value:2e7,currency:25e3}]),this.myData.color=nt.restOfPayments.colorIndicator}addAdditionalPackage(nt){var Bt;if((null===(Bt=this.myExtraData)||void 0===Bt?void 0:Bt.current)>0)return;const Lt={value:nt.value,transferType:this.page[this.type].key,item:nt},bt=this.modalService.open(A.J,t.YM);bt.componentInstance.alertMessageType="additional_package",bt.componentInstance.packageRest=this.packageRest,bt.componentInstance.extraTerms=Lt,bt.componentInstance.companyId=this.companyId,bt.componentInstance.isSameDay=this.packageRest.isSameDay,bt.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,bt.componentInstance.refresh.subscribe(({typeUser:$t,statusCode:an})=>{this.getPackageRest(),$t&&an&&this.analytics.logEvent("JBundle_AddPack_Result",{version:1,TypeUser:$t,Status:an})})}}return _t.\u0275fac=function(nt){return new(nt||_t)(e.Y36(b.gz),e.Y36(_.F),e.Y36(h.J),e.Y36(l.q),e.Y36(E.FF),e.Y36(O.sK))},_t.\u0275cmp=e.Xpm({type:_t,selectors:[["j-settings-package-additional"]],decls:21,vars:12,consts:[[1,"f-page-wrapper","is-shown"],["routerLink","/settings/package",1,"f-page-backdrop"],[1,"f-page-content","f-page-content--quarter","is-shown",2,"background-color","#F6F7F8"],[1,"p-select-header","mb-2",2,"background-color","white"],[1,"row","px-5","pt-5","pb-3","justify-content-between","align-items-center"],[1,"d-flex"],[1,"m-0","ml-3"],["type","button","routerLink","/settings/package",1,"close"],["src","./assets/icons/close.svg",3,"alt"],[4,"ngIf"],[1,"row","px-3",3,"ngSwitch"],[1,"col-12"],[4,"ngSwitchCase"],[1,"row","px-3","pb-3","pt-0"],[3,"item","key"],["class","row",4,"ngIf"],[1,"help-text","mt-3"],[1,"title"],["class","description",4,"ngIf"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"row","justify-content-center","my-5"],[3,"routerLink"],[1,"description"],[1,"row","px-3","justify-content-between","align-items-center","add-additional-package",3,"click"],["class","d-flex title",4,"ngIf"],[1,"d-flex","price"],[1,"d-flex","title"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(nt,Bt){1&nt&&(e.TgZ(0,"section",0),e._UZ(1,"div",1),e.TgZ(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",5)(10,"button",7),e._UZ(11,"img",8),e.ALo(12,"translate"),e.qZA()()(),e._UZ(13,"hr"),e.YNc(14,k,4,2,"ng-container",9),e.qZA(),e.TgZ(15,"div",10)(16,"div",11),e.YNc(17,kt,15,19,"ng-container",12),e.YNc(18,Yt,4,8,"ng-container",12),e.YNc(19,H,2,0,"ng-container",12),e.qZA(),e.YNc(20,rt,2,2,"ng-container",12),e.qZA()()()),2&nt&&(e.xp6(7),e.Oqu(e.lcZ(8,8,Bt.page[Bt.type].title)),e.xp6(4),e.s9C("alt",e.lcZ(12,10,"SHARED.CLOSE")),e.xp6(3),e.Q6J("ngIf","success"===Bt.packageResponseStatus),e.xp6(1),e.Q6J("ngSwitch",Bt.packageResponseStatus),e.xp6(2),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","forbidden"),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","loading"))},directives:[b.rH,F.O5,M.M,F.RF,F.n9,G.p,F.sg,b.yS,f.g,B.xr],pipes:[O.X$,F.H9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow-x:hidden}.p-select-header[_ngcontent-%COMP%]{background:#fff;overflow-x:hidden!important}.help-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:20px;color:#1a1c1f}.help-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px;color:#1a1c1f}.add-additional-package[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px;color:#000}.add-additional-package[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{padding:.5rem 1rem;color:#fff;background:#EF5630;border-radius:8px}.add-additional-package[_ngcontent-%COMP%]   .price-disabled[_ngcontent-%COMP%]{background:#B7BEC5!important}.add-additional-package[_ngcontent-%COMP%]:hover{transform:scale(1.01);cursor:pointer}"]}),_t})()},42710:(Pt,X,r)=>{"use strict";r.d(X,{p:()=>E});var a=r(35059),t=r(5e3),N=r(59516),A=r(69808),e=r(9655),b=r(89854);function _(O,F){if(1&O&&(t.TgZ(0,"h6",11),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&O){const M=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,null==M?null:M.title)," ")}}function h(O,F){if(1&O&&(t._UZ(0,"p",12),t.ALo(1,"translate")),2&O){const M=t.oxw().$implicit;t.ekj("mb-text",null==M?null:M.title),t.Q6J("innerHTML",t.lcZ(1,3,null==M?null:M.description),t.oJD)}}function l(O,F){if(1&O&&(t.ynx(0),t.TgZ(1,"div",8)(2,"j-settings-package-card"),t.YNc(3,_,3,3,"h6",9),t.YNc(4,h,2,5,"p",10),t.qZA()(),t.BQk()),2&O){const M=F.$implicit;t.xp6(3),t.Q6J("ngIf",null==M?null:M.title),t.xp6(1),t.Q6J("ngIf",null==M?null:M.description)}}let E=(()=>{class O{constructor(M){var G;this.route=M,this.faqLists=a.U,this.value=null===(G=M.snapshot.params)||void 0===G?void 0:G.key}}return O.\u0275fac=function(M){return new(M||O)(t.Y36(N.gz))},O.\u0275cmp=t.Xpm({type:O,selectors:[["j-settings-package-faq"]],decls:11,vars:7,consts:[[1,"f-page-wrapper","is-shown"],["routerLink","/settings/package",1,"f-page-backdrop"],[1,"f-page-content","f-page-content--quarter","is-shown",2,"background-color","#F6F7F8"],[1,"p-select-header",2,"background-color","white","margin-bottom","2rem"],[1,"m-0"],["type","button","routerLink","/settings/package",1,"close"],["src","./assets/icons/close.svg",3,"alt"],[4,"ngFor","ngForOf"],[2,"margin","0 2rem 1rem 2rem"],["style","color: #1A1C1F; font-weight: 500; font-size: 20px; line-height: 20px; margin-bottom: 0 ",4,"ngIf"],["class","faq-description",3,"mb-text","innerHTML",4,"ngIf"],[2,"color","#1A1C1F","font-weight","500","font-size","20px","line-height","20px","margin-bottom","0"],[1,"faq-description",3,"innerHTML"]],template:function(M,G){1&M&&(t.TgZ(0,"section",0),t._UZ(1,"div",1),t.TgZ(2,"section",2)(3,"div",3)(4,"h5",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",5),t._UZ(8,"img",6),t.ALo(9,"translate"),t.qZA()(),t.YNc(10,l,5,2,"ng-container",7),t.qZA()()),2&M&&(t.xp6(5),t.Oqu(t.lcZ(6,3,null==G.faqLists[G.value]?null:G.faqLists[G.value].title)),t.xp6(3),t.s9C("alt",t.lcZ(9,5,"SHARED.CLOSE")),t.xp6(2),t.Q6J("ngForOf",null==G.faqLists[G.value]?null:G.faqLists[G.value].lists))},directives:[N.rH,A.sg,e.p,A.O5],pipes:[b.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.p-select-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem;background:#fff;z-index:1000}.p-select-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:3.5rem;padding:1rem;color:#1a1c1f;background:#fff;transition:all .2s ease-in-out;margin-bottom:12px;border-radius:.5rem;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a}.p-select-item.is-disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.p-select-item[_ngcontent-%COMP%]:hover:not(.is-disabled){box-shadow:0 14px 16px #0000000d;border-color:transparent}.p-select-icon[_ngcontent-%COMP%]{margin-right:1rem}.p-select-arrow[_ngcontent-%COMP%]{margin-left:auto}.p-select-nav[_ngcontent-%COMP%]{background:#f6f7f8;flex-grow:1;padding:2rem}.mb-text[_ngcontent-%COMP%]{margin-top:20px}.faq-description[_ngcontent-%COMP%]{color:#1a1c1f;font-size:1rem;font-weight:400;margin-bottom:0}"]}),O})()},77265:(Pt,X,r)=>{"use strict";r.d(X,{jq:()=>t,J9:()=>N,NL:()=>e,TV:()=>_});var a=r(21086);class t{constructor(l,E,O,F,M){this.iban=l,this.numberOfPayments=E,this.depositAndWithdrawal=O,this.discountInRubles=F,this.discountInForeignCurrency=M}}class N{constructor(l,E,O){this.title=l,this.helpText=E,this.description=(0,a.of)(O)}}class e{constructor(l,E,O){this.totalCost=l,this.saving=E,this.standartCost=O}}var _=(()=>{return(h=_||(_={})).Loading="loading",h.Change="change",h.Success="success",h.NotFound="not_found",h.Error="error",h.Forbidden="forbidden",_;var h})()},17165:(Pt,X,r)=>{"use strict";r.d(X,{F:()=>e});var a=r(70655),t=r(82524),N=r(40520),A=r(5e3);let e=(()=>{class b{constructor(h){this.apiService=h}getCompanyCurrentPackage(h){return(0,a.mG)(this,void 0,void 0,function*(){const l=`companies/${h}/packages/current`;return yield this.apiService.get(l)})}calculatePackageCost(h,l){return(0,a.mG)(this,void 0,void 0,function*(){const E=`companies/${h}/packages/calculate`;return yield this.apiService.post(E,l)})}changeCompanyPackage(h,l,E){return(0,a.mG)(this,void 0,void 0,function*(){const O=`companies/${h}/packages/current`,F=(new N.WM).set(t.ob.PHONE,E);return yield this.apiService.put(O,l,F)})}changeCompanyPackageTransfer(h,l,E){return(0,a.mG)(this,void 0,void 0,function*(){const O=`companies/${h}/packages/additional:change`,F=(new N.WM).set(t.ob.PHONE,E);return yield this.apiService.put(O,l,F)})}changeCompanyPackageAccount(h,l,E){return(0,a.mG)(this,void 0,void 0,function*(){const O=`/companies/${h}/packages/accounts:change`,F=(new N.WM).set(t.ob.PHONE,E);return yield this.apiService.put(O,l,F)})}addCompanyPackageExtra(h,l,E){return(0,a.mG)(this,void 0,void 0,function*(){const O=`companies/${h}/packages/extra`,F={[l.transferType]:l.value},M=(new N.WM).set(t.ob.PHONE,E);return yield this.apiService.put(O,F,M)})}}return b.\u0275fac=function(h){return new(h||b)(A.LFG(t.sM))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},67943:(Pt,X,r)=>{"use strict";r.r(X),r.d(X,{SettingsModule:()=>Wi});var a=r(69808),t=r(91995),N=r(93075),A=r(59516),e=r(5e3),b=r(99430),_=r(16831),h=r(77337),l=r(194),E=r(89854);const O=function(){return["main"]},F=function(){return["password"]},M=function(){return["package"]};let G=(()=>{class y{constructor(){}ngOnInit(){}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(p,R){1&p&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"SETTINGS.MAIN"),e.qZA(),e.TgZ(3,"a",1),e._uU(4,"SETTINGS.PASSWORD.TITLE"),e.qZA(),e.TgZ(5,"a",1),e._uU(6,"SETTINGS.PACKAGE.NAV"),e.qZA()()),2&p&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,O)),e.xp6(2),e.Q6J("routerLink",e.DdM(4,F)),e.xp6(2),e.Q6J("routerLink",e.DdM(5,M)))},directives:[A.yS,A.Od,E.Pi],styles:[".tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),y})(),f=(()=>{class y{constructor(){}ngOnInit(){}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(p,R){1&p&&(e.TgZ(0,"j-layout-home")(1,"j-aside"),e._UZ(2,"j-nav-main"),e.qZA(),e.TgZ(3,"j-main")(4,"section",0)(5,"section",1)(6,"section",2)(7,"h2",3),e._uU(8,"SETTINGS.TITLE"),e.qZA(),e._UZ(9,"j-settings-tabs")(10,"router-outlet"),e.qZA()()()()())},directives:[b.Y,_.l,h.F,l.C,E.Pi,G,A.lC],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:flex;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}\n"],encapsulation:2}),y})();var B=r(70655),k=r(56104),$=r(9661),i=r(26164),Y=r(23513),S=r(66013),U=r(37074),x=r(5157),ot=r(84685);let vt=(()=>{class y{constructor(){this.selected=new e.vpe}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(p){switch(null==p?void 0:p.accountType){case x.Q5.CARD:return"ACCOUNTS.CARD";case x.Q5.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case x.Q5.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(p,R){1&p&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(){return R.onSelect()}),e.qZA(),e.TgZ(2,"label",2)(3,"div",3)(4,"div",4),e._UZ(5,"j-entity-logo",5),e.qZA(),e.TgZ(6,"div",4)(7,"small",6)(8,"div"),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"span",7),e._uU(12),e.qZA()()()()()),2&p&&(e.xp6(1),e.Q6J("id",R.account.id)("ngModel",R.account.isSelected),e.xp6(1),e.Q6J("for",R.account.id),e.xp6(3),e.Q6J("name",R.account.balance.currency),e.xp6(4),e.Oqu(e.lcZ(10,6,R.mapSelectedAccountLabel(R.account))),e.xp6(3),e.Oqu(R.account.iban))},directives:[N.Wl,N.JJ,N.On,ot.k],pipes:[E.X$],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;display:flex;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:before, .all-requisites-item-label[_ngcontent-%COMP%]:after{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),y})();var At=r(69544);function Zt(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"div")(1,"j-all-requisites-item",15),e.NdJ("selected",function(){return e.CHM(p),e.oxw().onSelect()}),e.qZA()()}if(2&y){const p=z.$implicit;e.xp6(1),e.Q6J("account",p)}}function kt(y,z){1&y&&(e.TgZ(0,"div",16),e._UZ(1,"ngx-spinner",17),e.qZA()),2&y&&(e.xp6(1),e.Q6J("fullScreen",!1))}let Yt=(()=>{class y{constructor(p,R,ct,Dt,In,Ce){this.accountsService=p,this.filesService=R,this.companyService=ct,this.spinner=Dt,this.notifier=In,this.translateService=Ce,this.closed=new e.vpe,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return(0,B.mG)(this,void 0,void 0,function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(p=>{p.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1})}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(p=>(p.isSelected=this.isAllSelected,p))}onSelect(){this.isAllSelected=this.accounts.every(p=>p.isSelected)}onDownload(){const p=this.accounts.filter(R=>R.isSelected).map(R=>R.iban);p.length>0?this.download(p):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}download(p){return(0,B.mG)(this,void 0,void 0,function*(){try{const R=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,p);this.filesService.downloadFile(R,`${this.companyService.currentCompany.bin}.pdf`)}catch(R){console.error(R)}})}onClose(){this.closed.emit()}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(k.iu),e.Y36($.nS),e.Y36(i.J),e.Y36(Y.t2),e.Y36(S.lG),e.Y36(E.sK))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(p,R){1&p&&(e.TgZ(0,"section",0)(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return R.onClose()}),e._UZ(5,"j-icon",3),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"input",6),e.NdJ("change",function(){return R.selectAll()}),e.qZA(),e.TgZ(9,"label",7),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",8),e.YNc(13,Zt,2,1,"div",9),e.qZA()(),e.YNc(14,kt,2,1,"div",10),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return R.onDownload()}),e._UZ(17,"div",13),e.TgZ(18,"strong",14),e._uU(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),e.qZA()()()),2&p&&(e.xp6(2),e.hij(" ",e.lcZ(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),e.xp6(6),e.Q6J("id","all")("ngModel",R.isAllSelected),e.xp6(1),e.Q6J("for","all"),e.xp6(1),e.hij(" ",e.lcZ(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),e.xp6(3),e.Q6J("ngForOf",R.accounts),e.xp6(1),e.Q6J("ngIf",R.isLoading),e.xp6(3),e.Q6J("inlineSVG","assets/icons/account/pdf.svg"))},directives:[U.o,N.Wl,N.JJ,N.On,a.sg,vt,a.O5,Y.Ro,At.d$,E.Pi],pipes:[E.X$],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:flex;justify-content:center}"]}),y})();var H=r(42654),at=r(24850),yt=r(90193),rt=r(31475),ht=r(98613),_t=r(26484),Nt=r(46805);let nt=(()=>{class y{constructor(p,R,ct,Dt,In){this.companyService=p,this.userService=R,this.translateService=ct,this.maskedService=Dt,this.maskPipe=In}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,rt.K.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const p=this.userService.user;if(p)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${p.lastname||""} ${p.firstname||""} ${p.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(p.iin,rt.K.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:p.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(p.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}generateUserLastSessionInfo(){return(0,B.mG)(this,void 0,void 0,function*(){const p=yield this.userService.retrieveUserLastSession();return{title:this.mapLastSessionPrefix("TITLE"),fields:[{label:this.mapLastSessionPrefix("TIMESTAMP"),value:p.timestamp,isTimestamp:!0},{label:this.mapLastSessionPrefix("DEVICE_INFO"),value:p.deviceInfo},{label:this.mapLastSessionPrefix("IP_ADDRESS"),value:p.ipAddress}]}})}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe((0,at.U)(p=>null==p?void 0:p.sort(this.sortPersons).map(R=>({initials:this.retrieveInitials(R),name:this.companyService.retrieveShortName(R),role:this.mapRole(R),startDate:R.fromDate,endDate:R.toDate,sign:this.mapSignText(R),color:this.mapInitialsColor(R)}))))}mapAuthoritiesPrefix(p){return this.mapTranslatePrefix("AUTHORITIES",p)}mapLastSessionPrefix(p){return this.mapTranslatePrefix("USER_LAST_SESSION",p)}mapCompanyPrefix(p){return this.mapTranslatePrefix("COMPANY",p)}mapPrivatePrefix(p){return this.mapTranslatePrefix("PRIVATE",p)}mapContactsPrefix(p){return this.mapTranslatePrefix("CONTACTS",p)}mapTranslatePrefix(p,R){return`SETTINGS.${p}.${R}`}mapDate(p){return p?(0,a.p6)(p,"d MMMM yyyy",this.translateService.currentLang):null}sortPersons(p,R){return p.authority===R.authority?0:p.authority===yt.Ly.PRIMARY_SIGNATURE||p.authority===yt.Ly.SECONDARY_SIGNATURE&&R.authority===yt.Ly.NO_SIGNATURE?-1:1}mapRole(p){switch(p.authority){case yt.Ly.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case yt.Ly.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(p){switch(p.authority){case yt.Ly.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case yt.Ly.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(p){switch(p.authority){case yt.Ly.PRIMARY_SIGNATURE:return"first-sign";case yt.Ly.SECONDARY_SIGNATURE:return"second-sign";default:return"no-sign"}}retrieveInitials(p){return`${p.lastname[0]}${p.firstname[0]}`}}return y.\u0275fac=function(p){return new(p||y)(e.LFG(i.J),e.LFG(ht.E),e.LFG(E.sK),e.LFG(_t.O),e.LFG(Nt.Iq))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function Bt(y,z){if(1&y&&(e.TgZ(0,"div",11)(1,"span",12),e._uU(2,"SETTINGS.AUTHORITIES.ROLE"),e.qZA(),e._uU(3,": "),e.TgZ(4,"span",12),e._uU(5),e.qZA()()),2&y){const p=e.oxw().$implicit;e.xp6(5),e.Oqu(p.role)}}function Lt(y,z){if(1&y&&(e.TgZ(0,"div",11)(1,"span",12),e._uU(2,"SETTINGS.AUTHORITIES.START_DATE"),e.qZA(),e._uU(3,": "),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&y){const p=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,p.startDate,"dd.MM.yyyy"))}}function bt(y,z){if(1&y&&(e.TgZ(0,"div",11)(1,"span",12),e._uU(2,"SETTINGS.AUTHORITIES.END_DATE"),e.qZA(),e._uU(3,": "),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&y){const p=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,p.endDate,"dd.MM.yyyy"))}}function $t(y,z){if(1&y&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&y){const p=e.oxw().$implicit;e.xp6(1),e.hij(" ",p.sign," ")}}function an(y,z){if(1&y&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",8),e.YNc(7,Bt,6,1,"div",9),e.YNc(8,Lt,7,4,"div",9),e.YNc(9,bt,7,4,"div",9),e.qZA()(),e.YNc(10,$t,2,1,"div",10),e.qZA()),2&y){const p=z.$implicit;e.xp6(1),e.Tol(p.color),e.xp6(1),e.hij(" ",p.initials," "),e.xp6(3),e.Oqu(p.name),e.xp6(2),e.Q6J("ngIf",p.role),e.xp6(1),e.Q6J("ngIf",p.startDate),e.xp6(1),e.Q6J("ngIf",p.endDate),e.xp6(1),e.Q6J("ngIf",p.sign)}}function Vt(y,z){if(1&y&&(e.TgZ(0,"section",1)(1,"h6",2),e._uU(2,"SETTINGS.AUTHORITIES.TITLE"),e.qZA(),e.YNc(3,an,11,8,"div",3),e.qZA()),2&y){const p=e.oxw();e.xp6(3),e.Q6J("ngForOf",p.authorities)}}let An=(()=>{class y{constructor(){}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(p,R){1&p&&e.YNc(0,Vt,4,1,"section",0),2&p&&e.Q6J("ngIf",R.authorities)},directives:[a.O5,E.Pi,a.sg],pipes:[a.uU],styles:[".authority[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:1rem}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;display:flex;justify-content:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),y})();var Wt=r(23918),hn=r(43169);function Ht(y,z){if(1&y&&e._UZ(0,"e-authorities",3),2&y){const p=e.oxw();e.Q6J("authorities",p.authorities)}}const nn=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},pn=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function V(y,z){1&y&&(e.TgZ(0,"div",4),e._UZ(1,"ngx-skeleton-loader",5)(2,"ngx-skeleton-loader",6),e.qZA()),2&y&&(e.xp6(1),e.Q6J("theme",e.DdM(2,nn)),e.xp6(1),e.Q6J("theme",e.DdM(3,pn)))}function dt(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"j-error-placeholder",7),e.NdJ("retried",function(){return e.CHM(p),e.oxw().onRetry()}),e.qZA()}}let Et=(()=>{class y{constructor(p,R){this.settingsService=p,this.companyService=R,this.subscription=new H.w;const ct=this.settingsService.getAuthoritiesList().subscribe(Dt=>{this.authorities=Dt});this.subscription.add(ct)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(nt),e.Y36(i.J))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(p,R){1&p&&(e.YNc(0,Ht,1,1,"e-authorities",0),e.YNc(1,V,3,4,"div",1),e.YNc(2,dt,1,0,"j-error-placeholder",2)),2&p&&(e.Q6J("ngIf",(null==R.authorities?null:R.authorities.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==R.authorities?null:R.authorities.length)),e.xp6(1),e.Q6J("ngIf",!R.authorities))},directives:[a.O5,An,Wt.xr,hn.g],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),y})();var J=r(36053);const mt=["footerTemplate"];function I(y,z){if(1&y&&e.GkF(0,1),2&y){const p=e.oxw();e.Q6J("ngTemplateOutlet",p.footerTemplate)}}function Z(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(p),e.oxw(3).openRequisites()}),e._uU(1),e.qZA()}if(2&y){const p=e.oxw(3);e.xp6(1),e.hij(" ",p.info.titleAdditional," ")}}function et(y,z){if(1&y&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&y){const p=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",p.value," ")}}function L(y,z){if(1&y&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&y){const p=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,p.value,"yyyy-MM-dd HH:mm")," ")}}function gt(y,z){if(1&y&&(e.TgZ(0,"a",16),e._uU(1),e.qZA()),2&y){const p=e.oxw(2).$implicit;e.MGl("href","tel:",p.value,"",e.LSH),e.xp6(1),e.Oqu(p.value)}}function It(y,z){if(1&y&&(e.TgZ(0,"a",16),e._uU(1),e.qZA()),2&y){const p=e.oxw(2).$implicit;e.MGl("href","mailto:",p.value,"",e.LSH),e.xp6(1),e.Oqu(p.value)}}function Ut(y,z){if(1&y&&(e.TgZ(0,"div",11)(1,"div",12),e._uU(2),e.qZA(),e.YNc(3,et,2,1,"div",13),e.YNc(4,L,3,4,"div",13),e.YNc(5,gt,2,2,"a",14),e.YNc(6,It,2,2,"a",14),e.qZA()),2&y){const p=e.oxw().$implicit;e.xp6(2),e.hij(" ",p.label," "),e.xp6(1),e.Q6J("ngIf",!p.isPhone&&!p.isEmail&&!p.isTimestamp),e.xp6(1),e.Q6J("ngIf",p.isTimestamp),e.xp6(1),e.Q6J("ngIf",p.isPhone),e.xp6(1),e.Q6J("ngIf",p.isEmail)}}function ln(y,z){if(1&y&&(e.ynx(0),e.YNc(1,Ut,7,5,"div",10),e.BQk()),2&y){const p=z.$implicit;e.xp6(1),e.Q6J("ngIf",p.value)}}function Tn(y,z){if(1&y&&(e.ynx(0),e.TgZ(1,"div",5)(2,"h6",6),e._uU(3),e.qZA(),e.YNc(4,Z,2,1,"button",7),e.qZA(),e.YNc(5,ln,2,1,"ng-container",8),e.BQk()),2&y){const p=e.oxw(2);e.xp6(3),e.Oqu(p.info.title),e.xp6(1),e.Q6J("ngIf",p.info.titleAdditional),e.xp6(1),e.Q6J("ngForOf",p.info.fields)}}function mn(y,z){if(1&y&&e.YNc(0,Tn,6,3,"ng-container",4),2&y){const p=e.oxw();e.Q6J("ngIf",p.info)}}let bn=(()=>{class y{constructor(){this.requisitesClicked=new e.vpe}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-info"]],contentQueries:function(p,R,ct){if(1&p&&e.Suo(ct,mt,5),2&p){let Dt;e.iGM(Dt=e.CRH())&&(R.footerTemplate=Dt.first)}},inputs:{info:"info"},outputs:{requisitesClicked:"requisitesClicked"},decls:5,vars:2,consts:[[1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],["infoTemplate",""],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(p,R){if(1&p&&(e.TgZ(0,"section",0),e.GkF(1,1),e.YNc(2,I,1,1,"ng-container",2),e.qZA(),e.YNc(3,mn,1,1,"ng-template",null,3,e.W1O)),2&p){const ct=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",ct),e.xp6(1),e.Q6J("ngIf",R.footerTemplate)}},directives:[a.tP,a.O5,E.Pi,a.sg],pipes:[a.uU],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),y})();const yn=function(){return["/authorities"]};function Ln(y,z){1&y&&(e.TgZ(0,"a",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&y&&(e.Q6J("routerLink",e.DdM(4,yn)),e.xp6(1),e.hij(" ",e.lcZ(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function ne(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"section",5)(1,"div",6),e.NdJ("click",function(){return e.CHM(p),e.oxw().hideSelector()}),e.qZA(),e.TgZ(2,"section",7)(3,"j-all-requisites",8),e.NdJ("closed",function(){return e.CHM(p),e.oxw().hideSelector()}),e.qZA()()()}if(2&y){const p=e.oxw();e.Q6J("ngClass",p.wrapperClasses),e.xp6(2),e.Q6J("ngClass",p.allRequisitesClasses)}}let jn=(()=>{class y{constructor(p,R,ct,Dt){this.settingsService=p,this.translateService=R,this.companyService=ct,this.document=Dt,this.subscription=new H.w,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.loadData();const In=(0,J.aj)([this.translateService.onLangChange,this.companyService.refresh$]).subscribe(()=>{this.loadData()});this.subscription.add(In)}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden"),this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo(),this.retrieveUserLastSessionInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}retrieveUserLastSessionInfo(){return(0,B.mG)(this,void 0,void 0,function*(){this.userLastSessionInfo=yield this.settingsService.generateUserLastSessionInfo()})}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(nt),e.Y36(E.sK),e.Y36(i.J),e.Y36(a.K0))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-main"]],decls:7,vars:5,consts:[[3,"info","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(p,R){1&p&&(e.TgZ(0,"j-settings-info",0),e.NdJ("requisitesClicked",function(){return R.showSelector()}),e.YNc(1,Ln,3,5,"ng-template",null,1,e.W1O),e.qZA(),e._UZ(3,"j-settings-info",2)(4,"j-settings-info",2)(5,"j-settings-info",2),e.YNc(6,ne,4,2,"section",3)),2&p&&(e.Q6J("info",R.mainInfo),e.xp6(3),e.Q6J("info",R.privateInfo),e.xp6(1),e.Q6J("info",R.userLastSessionInfo),e.xp6(1),e.Q6J("info",R.contactsInfo),e.xp6(1),e.Q6J("ngIf",R.isAllRequisitesShown))},directives:[bn,A.yS,a.O5,a.mk,Yt],pipes:[E.X$],styles:[""]}),y})();var Mn=r(1790),he=r(32110),Yn=r(40703),Te=r(16497);const Ue=["newPassword"];let xe=(()=>{class y{constructor(p,R){this.userService=p,this.modalService=R,this.isLoading=!1}onSubmit(p){return(0,B.mG)(this,void 0,void 0,function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(p.oldPassword,p.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(R){switch(R.code){case Mn.Sg.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case Mn.Sg.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case Mn.Sg.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=R.description}}finally{this.isLoading=!1}})}showSuccessModal(){return(0,B.mG)(this,void 0,void 0,function*(){const p=this.modalService.open(he.d,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield p.result}catch(R){}})}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(ht.E),e.Y36(Yn.FF))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-password"]],viewQuery:function(p,R){if(1&p&&e.Gf(Ue,5),2&p){let ct;e.iGM(ct=e.CRH())&&(R.newPassword=ct.first)}},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(p,R){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"j-new-password",4,5),e.NdJ("submitted",function(Dt){return R.onSubmit(Dt)}),e.qZA()()()()),2&p&&(e.xp6(4),e.Q6J("isOldShown",!0)("isLoading",R.isLoading)("errorText",R.errorText))},directives:[E.Pi,Te.g],styles:[""]}),y})();var dn=r(77265),Dn=r(83599),ce=r(80457),ve=r(15057),Se=r(76759),Pe=r(16206),Oe=r(9655),lt=r(62442),wt=r(46755);function q(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"j-switch",10),e.NdJ("change",function(){e.CHM(p);const ct=e.oxw().$implicit;return e.oxw().setValue(ct)}),e.qZA()}if(2&y){const p=e.oxw().$implicit;e.Q6J("value",p.checked)}}function Ct(y,z){1&y&&e._UZ(0,"img",13)}function P(y,z){1&y&&e._UZ(0,"img",14)}function ut(y,z){if(1&y&&(e.ynx(0),e.YNc(1,Ct,1,0,"img",11),e.YNc(2,P,1,0,"img",12),e.BQk()),2&y){const p=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",p.checked),e.xp6(1),e.Q6J("ngIf",!p.checked)}}function u(y,z){1&y&&e._UZ(0,"div",15)}function it(y,z){if(1&y&&(e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",5),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",6),e.YNc(12,q,1,1,"j-switch",7),e.YNc(13,ut,3,2,"ng-container",8),e.qZA()(),e.YNc(14,u,1,0,"div",9),e.BQk()),2&y){const p=z.$implicit,R=z.last;e.xp6(4),e.ekj("bg-sale-success-color",p.checked),e.xp6(1),e.hij("-",p.sale,"%"),e.xp6(1),e.hij(" ",e.lcZ(7,8,p.name)," "),e.xp6(3),e.hij(" ",e.lcZ(10,10,p.text)," "),e.xp6(3),e.Q6J("ngIf",!(null!=p&&p.disabled)),e.xp6(1),e.Q6J("ngIf",null==p?null:p.disabled),e.xp6(1),e.Q6J("ngIf",!R)}}let xt=(()=>{class y{constructor(){this.getValue=new e.vpe}ngOnInit(){}set select(p){this.items[0].checked=p.discountInRubles,this.items[1].checked=p.discountInForeignCurrency}setValue(p){p.checked=!p.checked,this.getValue.emit({[p.key]:p.checked})}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","/assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","/assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","/assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","/assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(p,R){1&p&&e.YNc(0,it,15,12,"ng-container",0),2&p&&e.Q6J("ngForOf",R.items)},directives:[a.sg,a.O5,wt.q],pipes:[E.X$],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474B52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#E7E7F1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),y})();var Qt=r(23343),un=r(80013),$n=r(92198),ee=r(28706),co=r(74967),lo=r(9010),Pi=r(65212),uo=r(20794),_o=r(19208),po=r(39996),mo=r(91024),go=r(61326),fo=r(70853);const We=["fromDropdown"];let Oi=(()=>{class y extends Qt.S{constructor(p,R,ct,Dt,In,Ce,le,Ie,vn,pi,be,mi,gi,wn,fi,qi,$i,Hi){super(mi.createPaymentInTengeForm(),Ce,Dt,In,p,R,ct,wn,le,fi,Ie,vn,pi,be),this.companyService=p,this.paymentsService=R,this.maskService=ct,this.route=Dt,this.router=In,this.api=Ce,this.dictionaries=le,this.translateService=Ie,this.authorityPermissionsService=vn,this.featureFlagsService=pi,this.bankFromAccount=be,this.paymentsFormsFactory=mi,this.accountsService=gi,this.modalService=wn,this.pipelines=fi,this.recipientsService=qi,this.userService=$i,this.cdref=Hi,this.isSubmitted=!1,this.getValue=new e.vpe,this.isSelected=!1,this.masks={iinOrBin:"iin",bankAccount:"tengeAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount"}}ngOnInit(){this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.combineAcceptableAccounts(this.accountStore)}combineAcceptableAccounts(p){return(0,J.aj)([p.items$.pipe((0,at.U)(R=>R.filter(ct=>ct.accountType===x.Q5.ACCOUNT))),p.fetching$,p.fetched$]).pipe((0,un.b)(0),(0,$n.h)(([R,ct,Dt])=>!ct||Dt),(0,at.U)(([R])=>R.filter(ct=>ct.balance.currency===ce.w.KZT&&!ct.isClosed)))}onSenderAccountSelect(p){this.isSelected=!0,this.getValue.emit({iban:p.iban})}ngAfterViewInit(){this.fromDropdown.selectAccount(this.item),this.cdref.detectChanges()}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(i.J),e.Y36(ee.cR),e.Y36(_t.O),e.Y36(A.gz),e.Y36(A.F0),e.Y36(co.e),e.Y36(lo.$),e.Y36(E.sK),e.Y36(Pi.Eg),e.Y36(uo.a),e.Y36(_o.vI),e.Y36(po.$),e.Y36(k.iu),e.Y36(Yn.FF),e.Y36(mo.Z),e.Y36(go.F),e.Y36($.KD),e.Y36(e.sBO))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package-account"]],viewQuery:function(p,R){if(1&p&&e.Gf(We,5),2&p){let ct;e.iGM(ct=e.CRH())&&(R.fromDropdown=ct.first)}},inputs:{isSubmitted:"isSubmitted",item:"item"},outputs:{getValue:"getValue"},features:[e.qOj],decls:4,vars:7,consts:[["label","SETTINGS.PACKAGE.CALCULATE.ACCOUNT",1,"account",3,"isLoading","hasError","accounts","selected"],["fromDropdown",""]],template:function(p,R){1&p&&(e.TgZ(0,"j-account-dropdown",0,1),e.NdJ("selected",function(Dt){return R.onSenderAccountSelect(Dt)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()),2&p&&e.Q6J("isLoading",e.lcZ(2,3,R.accountStore.fetching$))("hasError",!R.isSelected&&R.isSubmitted)("accounts",e.lcZ(3,5,R.acceptableAccounts$))},directives:[fo.S],pipes:[a.Ov],styles:[".account[_ngcontent-%COMP%]{margin-bottom:-16px}"]}),y})();function qe(y,z){if(1&y&&(e.TgZ(0,"j-settings-package-card"),e._UZ(1,"j-settings-package-progressbar",12),e.qZA()),2&y){const p=e.oxw();e.xp6(1),e.Q6J("item",p.myPaymentExtraData)}}function ho(y,z){if(1&y&&(e.TgZ(0,"j-settings-package-card"),e._UZ(1,"j-settings-package-progressbar",12),e.qZA()),2&y){const p=e.oxw();e.xp6(1),e.Q6J("item",p.myRefillExtraData)}}function To(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"j-settings-package-card")(1,"j-settings-package-account",13),e.NdJ("getValue",function(ct){return e.CHM(p),e.oxw(2).packageChange("change_account",ct)}),e.qZA()()}if(2&y){const p=e.oxw(2);e.xp6(1),e.Q6J("item",p.currentAccount)}}function vo(y,z){if(1&y&&(e.TgZ(0,"div"),e.YNc(1,To,2,1,"j-settings-package-card",2),e.qZA()),2&y){const p=e.oxw();e.xp6(1),e.Q6J("ngIf",p.tengeAccount>1)}}const Ii=function(y){return{totalCost:y}},bi=function(){return["my_package"]},Mi=function(y){return{faq:y}},Co=function(y){return{outlets:y}},Ao=function(y){return[y]};let Di=(()=>{class y{constructor(p,R,ct,Dt){this.translateService=p,this.accountsService=R,this.featureFlagsService=ct,this.analytics=Dt,this.isAnotherCompany=!1,this.openModal=new e.vpe,this.payment=new dn.J9("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new dn.J9("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new dn.J9("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Object.assign({},Dn.W3),this.myPaymentExtraData=Object.assign({},Dn.W3),this.myRefillData=Object.assign({},Dn.gB),this.myRefillExtraData=Object.assign({},Dn.gB),this.myPriceData=Dn.GY,this.mySaleData=Dn.ZS}ngOnInit(){this.defaultView(),this.retrieveAccounts(),this.isDisabledAccount=this.featureFlagsService.isDisabled(ve.Y.PACKAGES_CHANGE_ACCOUNT)}defaultView(){this.isAnotherCompany||(this.payment=new dn.J9("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new dn.J9("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new dn.J9("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}set data(p){this.myPaymentData.current=p.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=p.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:p.restOfPayments.totalNumberOfPayments,payment:p.restOfPayments.costNextPayment}),this.myPaymentData.color=p.restOfPayments.colorIndicator,(null==p?void 0:p.extraRestOfPayments)&&(this.myPaymentExtraData.current=p.extraRestOfPayments.currentNumberOfPayments,this.myPaymentExtraData.total=p.extraRestOfPayments.totalNumberOfPayments,this.myPaymentExtraData.description=this.translateService.get("SETTINGS.PACKAGE.ADDITIONAL.NO_EXPIRATION_DATE"),this.myPaymentExtraData.color=p.extraRestOfPayments.colorIndicator),(null==p?void 0:p.extraDepositAndWithdrawals)&&(this.myRefillExtraData.current=p.extraDepositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillExtraData.total=p.extraDepositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillExtraData.description=this.translateService.get("SETTINGS.PACKAGE.ADDITIONAL.NO_EXPIRATION_DATE"),this.myRefillExtraData.color=p.extraDepositAndWithdrawals.colorIndicator),this.myRefillData.current=p.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=p.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:p.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:p.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:p.depositAndWithdrawals.withdrawalOverLimit}),this.myRefillData.color=p.depositAndWithdrawals.colorIndicator,this.mySaleData.find((R,ct)=>{"discountInRubles"===R.key&&(this.mySaleData[ct]=Object.assign(Object.assign({},this.mySaleData[ct]),{checked:p.discountOnTransferInRubles.hasDiscount,disabled:this.isAnotherCompany})),"discountInForeignCurrency"===R.key&&(this.mySaleData[ct]=Object.assign(Object.assign({},this.mySaleData[ct]),{checked:p.discountOnTransferInCurrency.hasDiscount,disabled:this.isAnotherCompany}))}),this.currentIban=p.iban,this.myPriceData.totalCost=p.totalCost,this.myPriceData.nextWriteOff=p.nextWriteOff}packageChange(p,R){Object.keys(R).forEach((ct,Dt)=>{"discountInRubles"===ct?this.analytics.logEvent("JBundle_Switcher_Click",{version:1,currency:"RUB",switch:R.discountInRubles?"on":"off"}):"discountInForeignCurrency"===ct&&this.analytics.logEvent("JBundle_Switcher_Click",{version:1,currency:"currency",switch:R.discountInForeignCurrency?"on":"off"})}),(!(null==R?void 0:R.iban)||this.currentIban!==(null==R?void 0:R.iban))&&this.openModal.emit({alert:p,event:R})}retrieveAccounts(){return(0,B.mG)(this,void 0,void 0,function*(){try{const p=yield this.accountsService.getAccounts();return this.tengeAccount=p.reduce((R,ct)=>(ct.balance.currency===ce.w.KZT&&(R+=1),R),0),this.currentAccount=[...p].find(R=>R.iban===this.currentIban),p}catch(p){return[]}})}additionalPackage(p){this.analytics.logEvent("JBundle_AddPack_Click",{version:1,type:"payment"===p?"payments":"cash"})}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(E.sK),e.Y36(Se.i),e.Y36(ve.a),e.Y36(Pe.q))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},outputs:{openModal:"openModal"},decls:23,vars:37,consts:[["additionalType","payment",3,"itemCardSettingsPackage","additionalPackage"],["key","payment",3,"item","withoutExtra"],[4,"ngIf"],["additionalType","refill",3,"itemCardSettingsPackage","additionalPackage"],["key","refill",3,"item","withoutExtra"],[3,"itemCardSettingsPackage"],["type","sale",3,"items","getValue"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"],[1,"row","justify-content-center","faq-my-package"],[1,"d-flex"],[1,"faq-link",3,"routerLink"],["key","extra",3,"item"],[3,"item","getValue"]],template:function(p,R){1&p&&(e.TgZ(0,"j-settings-package-card",0),e.NdJ("additionalPackage",function(Dt){return R.additionalPackage(Dt)}),e._UZ(1,"j-settings-package-progressbar",1),e.qZA(),e.YNc(2,qe,2,1,"j-settings-package-card",2),e.TgZ(3,"j-settings-package-card",3),e.NdJ("additionalPackage",function(Dt){return R.additionalPackage(Dt)}),e._UZ(4,"j-settings-package-progressbar",4),e.qZA(),e.YNc(5,ho,2,1,"j-settings-package-card",2),e.TgZ(6,"j-settings-package-card",5)(7,"j-settings-package-form",6),e.NdJ("getValue",function(Dt){return R.packageChange("change_transfer",Dt)}),e.qZA()(),e.YNc(8,vo,2,1,"div",2),e.TgZ(9,"j-settings-package-card")(10,"p",7),e._uU(11),e.ALo(12,"translate"),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"p",8),e._uU(15),e.ALo(16,"translate"),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"div",9)(19,"div",10)(20,"a",11),e._uU(21),e.ALo(22,"translate"),e.qZA()()()),2&p&&(e.Q6J("itemCardSettingsPackage",R.payment),e.xp6(1),e.Q6J("item",R.myPaymentData)("withoutExtra",!(null==R.myPaymentExtraData||!R.myPaymentExtraData.total)),e.xp6(1),e.Q6J("ngIf",null==R.myPaymentExtraData?null:R.myPaymentExtraData.total),e.xp6(1),e.Q6J("itemCardSettingsPackage",R.refill),e.xp6(1),e.Q6J("item",R.myRefillData)("withoutExtra",!(null==R.myRefillExtraData||!R.myRefillExtraData.total)),e.xp6(1),e.Q6J("ngIf",null==R.myRefillExtraData?null:R.myRefillExtraData.total),e.xp6(1),e.Q6J("itemCardSettingsPackage",R.sale),e.xp6(1),e.Q6J("items",R.mySaleData),e.xp6(1),e.Q6J("ngIf",!R.isDisabledAccount),e.xp6(3),e.hij(" ",e.xi3(12,16,"SETTINGS.PACKAGE.CALCULATE.COST",e.VKq(28,Ii,e.lcZ(13,19,null==R.myPriceData?null:R.myPriceData.totalCost)))," "),e.xp6(4),e.AsE("",e.lcZ(16,21,"SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW")," \u2014 ",e.xi3(17,23,null==R.myPriceData?null:R.myPriceData.nextWriteOff,"dd.MM.yyyy"),""),e.xp6(5),e.Q6J("routerLink",e.VKq(35,Ao,e.VKq(33,Co,e.VKq(31,Mi,e.DdM(30,bi))))),e.xp6(1),e.hij(" ",e.lcZ(22,26,"SETTINGS.PACKAGE.FAQ.TITLE")," "))},directives:[Oe.p,lt.M,a.O5,xt,Oi,A.yS],pipes:[E.X$,a.JJ,a.uU],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}.faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:flex;align-items:center;text-align:center;color:#ef5630;cursor:pointer}.faq-my-package[_ngcontent-%COMP%]{max-width:27.2rem;margin:1.875rem 0}"]}),y})();var Ni=r(62917),ai=r(52418),Ri=r(17165);function Zi(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(p),e.oxw(3).resetPackageTerms.emit("cancel")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&y&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SETTINGS.PACKAGE.RESET")," "))}function si(y,z){if(1&y&&(e.TgZ(0,"div",3),e.YNc(1,Zi,3,3,"button",6),e.qZA()),2&y){const p=e.oxw(2);e.xp6(1),e.Q6J("ngIf","change"===p.status)}}function yo(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(p),e.oxw();const ct=e.MAs(2),Dt=e.oxw(2);return ct.close(),Dt.resetPackageTerms.emit("change")}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(p),e.oxw();const ct=e.MAs(2),Dt=e.oxw(2);return ct.close(),Dt.resetPackageTerms.emit("reset")}),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&y&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"SETTINGS.PACKAGE.CHANGE")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function Li(y,z){if(1&y&&(e.TgZ(0,"div",3)(1,"button",8,9),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,yo,6,6,"ng-template",null,10,e.W1O),e.qZA()),2&y){const p=e.MAs(6);e.xp6(1),e.Q6J("autoClose","outside")("ngbPopover",p),e.xp6(2),e.hij(" ",e.lcZ(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function $e(y,z){if(1&y&&(e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"h4",4),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,si,2,1,"div",5),e.YNc(7,Li,7,5,"div",5),e.qZA()()),2&y){const p=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,3,p.packageTitle[p.status])),e.xp6(2),e.Q6J("ngIf","change"===p.status),e.xp6(1),e.Q6J("ngIf","success"===p.status)}}const Ui=function(){return["success","change","not_found"]};let Eo=(()=>{class y{constructor(){this.status=dn.TV.Loading,this.resetPackageTerms=new e.vpe,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-0","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(p,R){1&p&&e.YNc(0,$e,8,5,"section",0),2&p&&e.Q6J("ngIf",e.DdM(1,Ui).includes(R.status))},directives:[a.O5,Yn.o8],pipes:[E.X$],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px #0000000a,0 2px 6px #0000000a,0 0 1px #0000000a;border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),y})();var ri=r(21086);function ki(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"div",2)(1,"label")(2,"input",3),e.NdJ("change",function(){const ct=e.CHM(p),Dt=ct.$implicit,In=ct.index;return e.oxw().setValue(Dt,In)}),e.qZA(),e.TgZ(3,"div",4)(4,"div",5),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.ALo(9,"currency"),e.qZA()()()()}if(2&y){const p=z.$implicit,R=z.index,ct=e.oxw();e.xp6(2),e.Q6J("name",ct.key+R)("value",p.value)("checked",p.checked),e.xp6(3),e.AsE("",p.value," ",e.lcZ(6,6,ct.textType[ct.key]),""),e.xp6(3),e.hij(" ",e.gM2(9,8,p.currency,"\u20b8","symbol","0.0-2")," ")}}let ci=(()=>{class y{constructor(){this.key="numberOfPayments",this.getValue=new e.vpe,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}ngOnInit(){}set select(p){this.items.map(R=>R.checked=R.value===p)}setValue(p,R){p.checked=!p.checked,this.items.filter((ct,Dt)=>Dt!==R).map(ct=>ct.checked=!1),this.getValue.emit({[this.key]:p.checked?p.value:0})}}return y.\u0275fac=function(p){return new(p||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(p,R){1&p&&(e.TgZ(0,"div",0),e.YNc(1,ki,10,13,"div",1),e.qZA()),2&p&&(e.xp6(1),e.Q6J("ngForOf",R.items))},directives:[a.sg],pipes:[E.X$,a.H9],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #E7E7F1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),y})(),xo=(()=>{class y{constructor(p){this.translateService=p,this.item={totalCost:0,saving:0,standartCost:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new e.vpe,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe(()=>{this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")})}ngOnInit(){}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(E.sK))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:37,vars:34,consts:[[1,"row","mx-1","mb-3","justify-content-between"],[1,"col-6","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-value","strikethrough"],[1,"currency-value"],[1,"currency-text","pr-2"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-grey",3,"ngbTooltip","inlineSVG"],[1,"currency-eco"],[1,"row","mx-1","justify-content-between"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","pl-5","pr-5","btn","btn-header","btn-shadow","btn-primary",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(p,R){if(1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",3)(8,"span",5),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"span",6),e._uU(12," \u20b8 / \u043c\u0435\u0441"),e.qZA()()()(),e.TgZ(13,"div",1)(14,"div",2)(15,"div",3)(16,"span",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"a",8),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",3)(22,"span")(23,"span",9),e._uU(24),e.ALo(25,"currency"),e.qZA()()()()()(),e.TgZ(26,"div",10)(27,"div",11)(28,"button",12,13),e.NdJ("click",function(){return R.openModal.emit()}),e.ALo(30,"translate"),e.TgZ(31,"span"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"span",14),e._uU(35),e.ALo(36,"currency"),e.qZA()()()()),2&p){const ct=e.MAs(29);e.xp6(5),e.Oqu(e.lcZ(6,12,"SETTINGS.PACKAGE.PRICE.WITHOUT_PACKAGE")),e.xp6(4),e.Oqu(e.lcZ(10,14,null==R.item?null:R.item.standartCost)),e.xp6(8),e.Oqu(e.lcZ(18,16,"SETTINGS.PACKAGE.PRICE.WITH_PACKAGE")),e.xp6(2),e.Q6J("ngbTooltip",e.lcZ(20,18,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question-large.svg"),e.xp6(5),e.Oqu(e.gM2(25,20,null==R.item?null:R.item.saving,R.currency,"symbol","0.0-2")),e.xp6(4),e.Q6J("ngbTooltip",e.lcZ(30,25,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",R.disabledButton),e.xp6(4),e.AsE("",e.lcZ(33,27,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",R.isWorkingDay?ct.close():ct.open(),""),e.xp6(2),e.Q6J("hidden",!(null!=R.item&&R.item.saving)),e.xp6(1),e.hij("\xa0",e.gM2(36,29,null==R.item?null:R.item.totalCost,R.currency,"symbol","0.0-2"),"")}},directives:[Yn._L,At.d$],pipes:[E.X$,a.JJ,a.H9],styles:[".currence[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-text[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.currency-value[_ngcontent-%COMP%]{font-size:1.375rem;line-height:1.75rem;color:#979797}.currency-eco[_ngcontent-%COMP%]{color:#27ae60;font-size:1.375rem;line-height:1.75rem}.link-grey[_ngcontent-%COMP%]{color:#b7bec5}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#FAF7F7;border:1px solid #ECEEF1;box-shadow:0 10px 20px #0000000a,0 2px 6px #0000000a,0 0 1px #0000000a;border-radius:8px}.strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}"]}),y})();function wi(y,z){if(1&y){const p=e.EpF();e.TgZ(0,"j-settings-package-card")(1,"j-settings-package-account",9),e.NdJ("getValue",function(ct){return e.CHM(p),e.oxw(2).packageCalculate(ct)}),e.qZA()()}if(2&y){const p=e.oxw(2);e.xp6(1),e.Q6J("isSubmitted",p.isSubmitted)}}function li(y,z){if(1&y&&(e.TgZ(0,"div"),e.YNc(1,wi,2,1,"j-settings-package-card",4),e.qZA()),2&y){const p=e.oxw();e.xp6(1),e.Q6J("ngIf",p.tengeAccount>1)}}const He=function(){return["calculate"]},Sn=function(y){return{faq:y}},Fi=function(y){return{outlets:y}},Bi=function(y){return[y]};let Gi=(()=>{class y{constructor(p,R,ct){this.translateService=p,this.accountsService=R,this.featureFlagsService=ct,this.calculatePackage=new e.vpe,this.openModal=new e.vpe,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=Dn.qP,this.refillData=Dn.K0,this.saleData=Dn.G0,this.disabledButton=!0,this.isSubmitted=!1}ngOnInit(){this.packageTerms=new dn.jq(null,0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest),this.retrieveAccounts(),this.isDisabledAccount=this.featureFlagsService.isDisabled(ve.Y.PACKAGES_CHANGE_ACCOUNT)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(p=>!this.packageTerms[p])||(this.payment=new dn.J9("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new dn.J9("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new dn.J9("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new dn.NL(0,0,0),!1)}packageCalculate(p){"depositAndWithdrawal"in p&&(p.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),p),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(p){p&&(this.price.totalCost=p.conditions.packageCost,this.price.saving=p.saving,this.price.standartCost=p.standartCost,this.payment.description=p.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:p.conditions.costNextPayment}):(0,ri.of)(""),this.refill.description=p.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:p.depositAndWithdrawal/1e6,depositingOverLimit:p.conditions.depositingOverLimit,withdrawalOverLimit:p.conditions.withdrawalOverLimit}):(0,ri.of)(""),this.disabledButton=!this.isWorkingDay||0===(null==p?void 0:p.saving))}getPackageTerms(p){p&&(this.packageTerms.numberOfPayments=p.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=p.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=p.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=p.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}retrieveAccounts(){var p;return(0,B.mG)(this,void 0,void 0,function*(){try{const R=yield this.accountsService.getAccounts();if(this.tengeAccount=R.reduce((ct,Dt)=>(Dt.balance.currency===ce.w.KZT&&(ct+=1),ct),0),1===this.tengeAccount){const ct=R.filter(Dt=>Dt.balance.currency===ce.w.KZT);this.packageTerms.iban=null===(p=ct[0])||void 0===p?void 0:p.iban}return R}catch(R){return[]}})}openAlertModal(){this.isSubmitted=!0,this.isDisabledAccount?this.openModal.emit(this.packageTerms):this.packageTerms.iban&&(this.openModal.emit(this.packageTerms),this.isSubmitted=!1)}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(E.sK),e.Y36(Se.i),e.Y36(ve.a))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:14,vars:24,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[4,"ngIf"],[3,"item","disabledButton","isWorkingDay","openModal"],[1,"row","justify-content-center","faq-calculate"],[1,"d-flex"],[1,"faq-link",3,"routerLink"],[3,"isSubmitted","getValue"]],template:function(p,R){1&p&&(e.TgZ(0,"j-settings-package-card",0)(1,"j-settings-package-tabs",1),e.NdJ("getValue",function(Dt){return R.packageCalculate(Dt)}),e.qZA()(),e.TgZ(2,"j-settings-package-card",0)(3,"j-settings-package-tabs",2),e.NdJ("getValue",function(Dt){return R.packageCalculate(Dt)}),e.qZA()(),e.TgZ(4,"j-settings-package-card",0)(5,"j-settings-package-form",3),e.NdJ("getValue",function(Dt){return R.packageCalculate(Dt)}),e.qZA()(),e.YNc(6,li,2,1,"div",4),e.TgZ(7,"j-settings-package-card")(8,"j-settings-package-price",5),e.NdJ("openModal",function(){return R.openAlertModal()}),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"a",8),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&p&&(e.Q6J("itemCardSettingsPackage",R.payment),e.xp6(1),e.Q6J("items",R.paymentData)("select",R.packageTerms.numberOfPayments),e.xp6(1),e.Q6J("itemCardSettingsPackage",R.refill),e.xp6(1),e.Q6J("items",R.refillData)("select",R.packageTerms.depositAndWithdrawal/1e6),e.xp6(1),e.Q6J("itemCardSettingsPackage",R.sale),e.xp6(1),e.Q6J("items",R.saleData)("select",R.packageTerms),e.xp6(1),e.Q6J("ngIf",!R.isDisabledAccount),e.xp6(2),e.Q6J("item",R.price)("disabledButton",R.disabledButton)("isWorkingDay",R.isWorkingDay),e.xp6(3),e.Q6J("routerLink",e.VKq(22,Bi,e.VKq(20,Fi,e.VKq(18,Sn,e.DdM(17,He))))),e.xp6(1),e.Oqu(e.lcZ(13,15,"SETTINGS.PACKAGE.FAQ.TITLE")))},directives:[Oe.p,ci,xt,a.O5,Oi,xo,A.yS],pipes:[E.X$],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}.faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:flex;align-items:center;text-align:center;color:#ef5630;cursor:pointer}.faq-my-package[_ngcontent-%COMP%], .faq-calculate[_ngcontent-%COMP%]{max-width:27.2rem;margin:1.875rem 0}"]}),y})();function ji(y,z){if(1&y){const p=e.EpF();e.ynx(0),e.TgZ(1,"j-my-package",6),e.NdJ("openModal",function(ct){return e.CHM(p),e.oxw().openModalByAction(ct)}),e.qZA(),e.BQk()}if(2&y){const p=e.oxw();e.xp6(1),e.Q6J("data",p.packageRest)}}function Yi(y,z){if(1&y){const p=e.EpF();e.ynx(0),e.TgZ(1,"j-calculate-package",7),e.NdJ("openModal",function(ct){return e.CHM(p),e.oxw().changePackageTerms("connect",ct)})("calculatePackage",function(ct){return e.CHM(p),e.oxw().calculatePackageTerms(ct)}),e.qZA(),e.BQk()}if(2&y){const p=e.oxw();e.xp6(1),e.Q6J("data",p.packageCalculation)("isWorkingDay",p.packageRest.isWorkingDay)}}function Ji(y,z){if(1&y){const p=e.EpF();e.ynx(0),e.TgZ(1,"j-calculate-package",8),e.NdJ("openModal",function(ct){return e.CHM(p),e.oxw().changePackageTerms("change",ct)})("calculatePackage",function(ct){return e.CHM(p),e.oxw().calculatePackageTerms(ct)}),e.qZA(),e.BQk()}if(2&y){const p=e.oxw();e.xp6(1),e.Q6J("data",p.packageCalculation)("packageRest",p.packageRest)}}function di(y,z){1&y&&(e.ynx(0),e._UZ(1,"j-error-placeholder",9),e.ALo(2,"translate"),e.ALo(3,"translate"),e.BQk()),2&y&&(e.xp6(1),e.Q6J("errorText",e.lcZ(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",e.lcZ(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function So(y,z){if(1&y){const p=e.EpF();e.ynx(0),e.TgZ(1,"j-error-placeholder",10),e.NdJ("retried",function(){return e.CHM(p),e.oxw().getPackageRest()}),e.qZA(),e.BQk()}}function Ki(y,z){1&y&&e._UZ(0,"ngx-skeleton-loader",12),2&y&&e.Q6J("theme",z.$implicit)}function Po(y,z){if(1&y&&(e.ynx(0),e.YNc(1,Ki,1,1,"ngx-skeleton-loader",11),e.BQk()),2&y){const p=e.oxw();e.xp6(1),e.Q6J("ngForOf",p.themes)}}let ui=(()=>{class y{constructor(p,R,ct,Dt){this.packageRequestsService=p,this.companyService=R,this.analytics=ct,this.modalService=Dt,this.subscription=new H.w,this.themes=ai.np}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(p=>{this.companyId=p[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=dn.TV.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(p=>{var R;this.packageRest=p,this.packageResponseStatus=(null===(R=this.packageRest)||void 0===R?void 0:R.totalCost)?dn.TV.Success:dn.TV.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(p=>{403===p.status?(this.packageResponseStatus=dn.TV.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=dn.TV.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(p){this.packageRequestsService.calculatePackageCost(this.companyId,p).then(R=>{this.packageCalculation=R}).catch(()=>{this.packageResponseStatus=dn.TV.Error})}changePackageTerms(p,R){const ct=this.modalService.open(Ni.J,ai.YM);ct.componentInstance.alertMessageType=p,ct.componentInstance.packageTerms=R,ct.componentInstance.packageRest=this.packageRest,ct.componentInstance.companyId=this.companyId,ct.componentInstance.isSameDay=this.packageRest.isSameDay,ct.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,ct.componentInstance.iban=R.iban,ct.componentInstance.refresh.subscribe(({typeUser:Dt,statusCode:In})=>{this.getPackageRest(),this.analytics.logEvent("change_transfer"===p?"JBundle_AddPack_Result":"JBundleConnect_Result",{version:1,TypeUser:Dt,Status:In})}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(p){if(this.packageCalculation=void 0,"change"===p)this.packageResponseStatus=dn.TV.Change;else if("cancel"===p)this.packageResponseStatus=dn.TV.Success;else if("reset"===p){const R=new dn.jq(null,0,0,!1,!1);this.changePackageTerms("connect_standart",R)}}openModalByAction(p){const{alert:R,event:ct}=p;("change_transfer"===R||"change_account"===R)&&this.changePackageTerms(R,ct)}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return y.\u0275fac=function(p){return new(p||y)(e.Y36(Ri.F),e.Y36(i.J),e.Y36(Pe.q),e.Y36(Yn.FF))},y.\u0275cmp=e.Xpm({type:y,selectors:[["j-settings-package"]],decls:11,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],["name","additional"],[3,"data","openModal"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(p,R){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"j-settings-package-header",2),e.NdJ("resetPackageTerms",function(Dt){return R.resetPackageTerms(Dt)}),e.qZA(),e.YNc(3,ji,2,1,"ng-container",3),e.YNc(4,Yi,2,2,"ng-container",3),e.YNc(5,Ji,2,2,"ng-container",3),e.YNc(6,di,4,8,"ng-container",3),e.YNc(7,So,2,0,"ng-container",3),e.qZA(),e.YNc(8,Po,2,1,"ng-container",3),e.qZA(),e._UZ(9,"router-outlet",4)(10,"router-outlet",5)),2&p&&(e.Q6J("ngSwitch",R.packageResponseStatus),e.xp6(2),e.Q6J("status",R.packageResponseStatus),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","not_found"),e.xp6(1),e.Q6J("ngSwitchCase","change"),e.xp6(1),e.Q6J("ngSwitchCase","forbidden"),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","loading"))},directives:[a.RF,Eo,a.n9,Di,Gi,hn.g,a.sg,Wt.xr,A.lC],pipes:[E.X$],encapsulation:2}),y})();var Qi=r(72551),Oo=r(42710),Io=r(73355),_i=r(41064);const bo=[{path:"",component:f,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:jn},{path:"authorities",component:Et},{path:"password",component:xe},{path:"package",component:ui,canActivate:[Io.t],data:{featureFlag:_i.Y.TARIFF_PACKAGES},children:[{path:":type",component:Qi.x,outlet:"additional"},{path:":key",component:Oo.p,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let Mo=(()=>{class y{}return y.\u0275fac=function(p){return new(p||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[[A.Bz.forChild(bo)],A.Bz]}),y})();var Do=r(8419),No=r(48149);let Wi=(()=>{class y{}return y.\u0275fac=function(p){return new(p||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[[a.ez,t.m,Mo,N.u5,N.UX,Do.I,No.j]]}),y})()},51884:(Pt,X,r)=>{"use strict";r.d(X,{c:()=>t});var a=r(5e3);let t=(()=>{class N{constructor(e){this.elem=e}ngAfterViewInit(){window.$clamp(this.elem.nativeElement,{clamp:this.jClamp})}}return N.\u0275fac=function(e){return new(e||N)(a.Y36(a.SBq))},N.\u0275dir=a.lG2({type:N,selectors:[["","jClamp",""]],inputs:{jClamp:"jClamp"}}),N})()},66821:(Pt,X,r)=>{"use strict";r.d(X,{v:()=>b,L:()=>_});var a=r(5e3),t=r(11685),N=r(42654),A=r(80013),e=r(46758);let b=(()=>{class h{constructor(E,O,F){this.el=E,this.hostComponent=O,this.container=F,this.subs=new N.w}onKeyDown(E){(13===E.which||13===E.keyCode)&&this.focusNext()&&(E.preventDefault(),E.stopPropagation())}onFocus(E){this.container.currentTarget=this}ngOnInit(){const E=this.jFocusOnReturn||this.hostComponent;E&&E.changeEvent&&this.subs.add(E.changeEvent.pipe((0,A.b)(100)).subscribe(O=>{O&&this.focusNext()}))}ngOnDestroy(){this.subs.unsubscribe(),this.container.currentTarget===this&&(this.container.currentTarget=null)}focusNext(){const E=this.container.targets.toArray(),F=E.indexOf(this)+1;if(F>=0&&F<E.length){const M=E[F];let G;return G=(0,t.fI)(M.jFocusOnReturn?M.jFocusOnReturn:M.el),G.focus(),!0}return!1}}return h.\u0275fac=function(E){return new(E||h)(a.Y36(a.SBq),a.Y36(e.G,10),a.Y36((0,a.Gpc)(()=>_)))},h.\u0275dir=a.lG2({type:h,selectors:[["","jFocusOnReturn",""]],hostBindings:function(E,O){1&E&&a.NdJ("keydown",function(M){return O.onKeyDown(M)})("focus",function(M){return O.onFocus(M)})},inputs:{jFocusOnReturn:"jFocusOnReturn"}}),h})(),_=(()=>{class h{constructor(E){this.elem=E}focusNext(){this.currentTarget&&this.currentTarget.focusNext()}}return h.\u0275fac=function(E){return new(E||h)(a.Y36(a.SBq))},h.\u0275dir=a.lG2({type:h,selectors:[["","jFocusableContainer",""]],contentQueries:function(E,O,F){if(1&E&&a.Suo(F,b,5),2&E){let M;a.iGM(M=a.CRH())&&(O.targets=M)}}}),h})()},73355:(Pt,X,r)=>{"use strict";r.d(X,{t:()=>b});var a=r(92198),t=r(24850),N=r(5e3),A=r(59516),e=r(15057);let b=(()=>{class _{constructor(l,E){this.router=l,this.featureFlagsService=E}canActivate(l,E){return this.featureFlagsService.featureFlags$.pipe((0,a.h)(O=>O.length>0),(0,t.U)(O=>!!O.find(F=>F.key===l.data.featureFlag).active||(this.router.navigate(["/"]),!1)))}}return _.\u0275fac=function(l){return new(l||_)(N.LFG(A.F0),N.LFG(e.a))},_.\u0275prov=N.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},47755:(Pt,X,r)=>{"use strict";r.d(X,{W:()=>_});var a=r(12908),t=r(37212),N=r(21086),A=r(72986),e=r(24850);const b=h=>!1===(null==h?void 0:h.transferAllowed)?{bankRestricted:!0}:null;class _{static internalIbanRestricted(l){return E=>{const O=(0,t.Rv)(E.value,a.w.KZT);return O?l.bankDictionary.items$.pipe((0,A.q)(1),(0,e.U)(F=>{const M=F.find(G=>G.ibanBankCode===O.substring(4,7));return b(M)})):(0,N.of)(null)}}static externalIbanRestricted(l){return E=>E.value&&"KZ"==E.value.substring(0,2)&&20==E.value.length?l.bankDictionary.items$.pipe((0,A.q)(1),(0,e.U)(O=>{const F=O.find(M=>M.ibanBankCode===E.value.substring(4,7));return b(F)})):(0,N.of)(null)}static bankRestrictedById(l){return E=>E.value?l.bankDictionary.items$.pipe((0,A.q)(1),(0,e.U)(O=>{const F=O.find(M=>M.id===E.value);return b(F)})):(0,N.of)(null)}static bankRestricted(l){return E=>E.value?l.bankDictionary.items$.pipe((0,A.q)(1),(0,e.U)(O=>{const F=O.find(M=>M.id===E.value.id);return b(F)})):(0,N.of)(null)}}},15577:(Pt,X,r)=>{"use strict";r.d(X,{G:()=>N});var a=r(5e3);function t(A,e){1&A&&a._UZ(0,"j-refund-employee",6),2&A&&a.Q6J("refundDetailsItem",e.$implicit)}let N=(()=>{class A{constructor(){this.closed=new a.vpe}onClose(){this.closed.emit()}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=a.Xpm({type:A,selectors:[["j-refund-employee-selector"]],inputs:{refundDetails:"refundDetails"},outputs:{closed:"closed"},decls:8,vars:4,consts:[[1,"employee-selector__header"],["type","button",1,"btn","btn-outline-primary","employee-selector-close",3,"click"],["name","chevronLeft","stroke","true","color","currentColor"],[1,"employee-selector__header_size_b"],[1,"employee-selector-block"],[3,"refundDetailsItem",4,"ngFor","ngForOf"],[3,"refundDetailsItem"]],template:function(b,_){1&b&&(a.TgZ(0,"section",0)(1,"button",1),a.NdJ("click",function(){return _.onClose()}),a._UZ(2,"j-icon",2),a.qZA(),a.TgZ(3,"div",3),a._uU(4),a.ALo(5,"translate"),a.qZA()(),a.TgZ(6,"section",4),a.YNc(7,t,1,1,"j-refund-employee",5),a.qZA()),2&b&&(a.xp6(4),a.hij(" ",a.lcZ(5,2,"STATEMENT.EMPLOYEES.TITLE")," "),a.xp6(3),a.Q6J("ngForOf",_.refundDetails))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.employee-selector__header[_ngcontent-%COMP%]{display:flex;padding:1.5rem;align-items:center}.employee-selector-close[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;margin-bottom:0!important;margin-right:1rem}.employee-selector-block[_ngcontent-%COMP%]{border-radius:.75rem;padding:1.5rem;overflow-y:auto;height:100%}.employee-selector__header_size_b[_ngcontent-%COMP%]{font-size:20px;font-weight:400;line-height:20px}"]}),A})()},85355:(Pt,X,r)=>{"use strict";r.d(X,{H:()=>t});var a=r(5e3);let t=(()=>{class N{constructor(){}get getEmployeeName(){return`${this.refundDetailsItem.lastName} ${this.refundDetailsItem.firstName} ${this.refundDetailsItem.middleName}`}}return N.\u0275fac=function(e){return new(e||N)},N.\u0275cmp=a.Xpm({type:N,selectors:[["j-refund-employee"]],inputs:{refundDetailsItem:"refundDetailsItem"},decls:13,vars:14,consts:[[1,"refund-employee-item"],[1,"text-dark","employee-name"],[1,"p4"],[3,"money","showSign"],[1,"p4","text-danger"]],template:function(e,b){1&e&&(a.TgZ(0,"div",0)(1,"div",1),a._uU(2),a.qZA(),a.TgZ(3,"div",2),a._uU(4),a.ALo(5,"translate"),a.ALo(6,"date"),a.qZA(),a.TgZ(7,"div",2),a._uU(8),a.ALo(9,"translate"),a._UZ(10,"j-money",3),a.qZA(),a.TgZ(11,"div",4),a._uU(12),a.qZA()()),2&e&&(a.xp6(2),a.Oqu(b.getEmployeeName),a.xp6(2),a.AsE("",a.lcZ(5,7,"STATEMENT.EMPLOYEES.PERIOD"),": ",a.xi3(6,9,b.refundDetailsItem.period,"MM.yyyy"),""),a.xp6(4),a.hij("",a.lcZ(9,12,"STATEMENT.EMPLOYEES.AMOUNT"),": "),a.xp6(2),a.Q6J("money",b.refundDetailsItem.amount)("showSign",!1),a.xp6(2),a.Oqu(b.refundDetailsItem.description))},styles:[".refund-employee-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;padding:1.5rem;grid-gap:4px;background-color:#fff;border-radius:.5rem}.employee-name[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px}"]}),N})()},66914:(Pt,X,r)=>{"use strict";r.d(X,{Z:()=>h});var a=r(5e3),t=r(26484);let N=(()=>{class l{constructor(O){this.maskedService=O}formatBalance(O,F=!1){if(O&&null!=O.amount&&O.currency){const M=this.maskedService.formatAmount(Math.abs(O.amount));let G="";return F&&O.amount>0?G="+ ":O.amount<0&&(G="- "),`${G}${M}`}}}return l.\u0275fac=function(O){return new(O||l)(a.LFG(t.O))},l.\u0275prov=a.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function A(l,E){if(1&l&&(a.TgZ(0,"h5",8),a._UZ(1,"j-money",9),a.qZA()),2&l){const O=a.oxw().$implicit,F=a.oxw();a.ekj("balances-amount--large-amount",F.statement.hasLargeBalances),a.Q6J("ngClass",O.textClass),a.xp6(1),a.Q6J("money",F.getMoney(O.property))("isDebit",O.isDebit||null)("isCredit",O.isCredit||null)("showSign",O.showSign)}}function e(l,E){if(1&l&&(a.TgZ(0,"h5",10),a._uU(1," - "),a.qZA()),2&l){const O=a.oxw(2);a.ekj("balances-amount--large-amount",O.statement.hasLargeBalances)}}function b(l,E){if(1&l&&(a.ynx(0),a.TgZ(1,"li",4)(2,"div",5),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.YNc(5,A,2,7,"h5",6),a.YNc(6,e,2,2,"h5",7),a.qZA(),a.BQk()),2&l){const O=E.$implicit,F=a.oxw();a.xp6(3),a.hij(" ",a.lcZ(4,3,O.label)," "),a.xp6(2),a.Q6J("ngIf",F.getMoney(O.property)),a.xp6(1),a.Q6J("ngIf",!F.getMoney(O.property))}}function _(l,E){if(1&l){const O=a.EpF();a.TgZ(0,"li",4)(1,"div",11)(2,"div",12)(3,"span",13),a._uU(4,"HISTORY.OPERATION.OTHER"),a.qZA(),a._uU(5,": "),a.TgZ(6,"strong"),a._uU(7),a.qZA()(),a.TgZ(8,"div",14)(9,"a",15),a.NdJ("click",function(M){return a.CHM(O),a.oxw().exportSelectedTransactions(M)}),a.ALo(10,"translate"),a.qZA()()()()}if(2&l){const O=a.oxw();a.xp6(7),a.hij(" ",O.selectedCount," "),a.xp6(2),a.Q6J("ngbTooltip",a.lcZ(10,3,"HISTORY.DOWNLOAD_SELECTED"))("inlineSVG","/assets/icons/transaction/pdf.svg")}}let h=(()=>{class l{constructor(O){this.currency=O,this.selectedCount=0,this.showCount=!1,this.exportSelected=new a.vpe}ngOnInit(){this.balanceList=[{label:"STATEMENT.BALANCES.INCOME",textClass:"text-success",showSign:!0,isCredit:!0,isDebit:!1,property:"creditTotalSum"},{label:"STATEMENT.BALANCES.OUTCOME",textClass:"text-danger",showSign:!0,isCredit:!1,isDebit:!0,property:"debitTotalSum"},{label:"STATEMENT.BALANCES.BALANCE_IN",textClass:"",showSign:!1,property:"balanceIn"},{label:"STATEMENT.BALANCES.BALANCE_OUT",textClass:"",showSign:!1,property:"balanceOut"}]}formatBalance(O,F){return this.currency.formatBalance(O,F)}getMoney(O){return this.statement&&this.statement[O]}exportSelectedTransactions(O=null){O&&O.preventDefault(),this.exportSelected.emit()}}return l.\u0275fac=function(O){return new(O||l)(a.Y36(N))},l.\u0275cmp=a.Xpm({type:l,selectors:[["j-statement-balances"]],inputs:{statement:"statement",selectedCount:"selectedCount",showCount:"showCount"},outputs:{exportSelected:"exportSelected"},decls:4,vars:2,consts:[[1,"balances-wrap"],[1,"balances"],[4,"ngFor","ngForOf"],["class","balances-item",4,"ngIf"],[1,"balances-item"],[1,"text-muted","balances-label"],["class","balances-amount",3,"balances-amount--large-amount","ngClass",4,"ngIf"],["class","balances-amount text-muted",3,"balances-amount--large-amount",4,"ngIf"],[1,"balances-amount",3,"ngClass"],[3,"money","isDebit","isCredit","showSign"],[1,"balances-amount","text-muted"],[1,"total__content"],[1,"total__text"],["translate",""],[1,"total__actions"],["href","#","tooltipClass","tooltip-light",1,"total__action",3,"ngbTooltip","inlineSVG","click"]],template:function(O,F){1&O&&(a.TgZ(0,"section",0)(1,"ul",1),a.YNc(2,b,7,5,"ng-container",2),a.YNc(3,_,11,5,"li",3),a.qZA()()),2&O&&(a.xp6(2),a.Q6J("ngForOf",F.balanceList),a.xp6(1),a.Q6J("ngIf",F.selectedCount>0&&F.showCount))},styles:[".balances-wrap[_ngcontent-%COMP%]{padding:1rem 0;position:relative;border-bottom:1px solid #eceef1}.balances[_ngcontent-%COMP%]{min-width:100%;display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0}@media (min-width: 960px){.balances[_ngcontent-%COMP%]{flex-wrap:nowrap}}.balances-item[_ngcontent-%COMP%]{flex-grow:1;min-width:120px;margin-bottom:1rem;width:50%}@media (min-width: 960px){.balances-item[_ngcontent-%COMP%]{margin-bottom:0;width:auto}}.balances-item[_ngcontent-%COMP%]:nth-child(n+3){margin-bottom:0}.balances-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:20px;margin-bottom:4px}@media (min-width: 1280px){.balances-label[_ngcontent-%COMP%]{line-height:18px}}.balances-amount[_ngcontent-%COMP%]{font-size:.875rem;line-height:20px;margin-bottom:0}@media (min-width: 670px){.balances-amount[_ngcontent-%COMP%]{font-size:1.25rem}}@media (min-width: 1280px){.balances-amount[_ngcontent-%COMP%]{line-height:25px;font-size:1.25rem}}.balances-amount--large-amount[_ngcontent-%COMP%]{font-size:.75rem}@media (min-width: 670px){.balances-amount--large-amount[_ngcontent-%COMP%]{font-size:1.25rem}}@media (min-width: 960px){.balances-amount--large-amount[_ngcontent-%COMP%]{font-size:.875rem}}@media (min-width: 1280px){.balances-amount--large-amount[_ngcontent-%COMP%]{font-size:1rem}}.total__content[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;justify-content:space-between;height:100%}@media (min-width: 960px){.total__content[_ngcontent-%COMP%]{justify-content:flex-end}}.total__text[_ngcontent-%COMP%]{margin-right:1rem;font-size:.875rem;color:#666c72}@media (min-width: 960px){.total__text[_ngcontent-%COMP%]{text-align:right}}.total__action[_ngcontent-%COMP%]{display:block;margin-left:.5rem;color:#b7bec5}.total__action[_ngcontent-%COMP%]:hover{color:#ef5630}.total__action--sign[_ngcontent-%COMP%]{color:#1586bb}"]}),l})()},37784:(Pt,X,r)=>{"use strict";r.d(X,{D:()=>_});var a=r(5e3),t=r(69808),N=r(23918);const A=function(){return{width:"200px",height:"25px","background-color":"#ECEEF1"}},e=function(){return{height:"115px","background-color":"#ECEEF1"}};function b(h,l){1&h&&(a.ynx(0),a._UZ(1,"ngx-skeleton-loader",1)(2,"ngx-skeleton-loader",1)(3,"ngx-skeleton-loader",1),a.BQk()),2&h&&(a.xp6(1),a.Q6J("theme",a.DdM(3,A)),a.xp6(1),a.Q6J("theme",a.DdM(4,e)),a.xp6(1),a.Q6J("theme",a.DdM(5,e)))}let _=(()=>{class h{constructor(){this.count=2}ngOnInit(){}get loadingCount(){return Array(this.count)}}return h.\u0275fac=function(E){return new(E||h)},h.\u0275cmp=a.Xpm({type:h,selectors:[["j-statement-loading"]],inputs:{count:"count"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"theme"]],template:function(E,O){1&E&&a.YNc(0,b,4,6,"ng-container",0),2&E&&a.Q6J("ngForOf",O.loadingCount)},directives:[t.sg,N.xr],styles:["[_nghost-%COMP%]{overflow:hidden;max-height:calc(100vh - 300px)}"]}),h})()},82624:(Pt,X,r)=>{"use strict";r.d(X,{S:()=>Ct});var a=r(70655),t=r(5e3),N=r(69808),A=r(41777),e=r(32146),b=r(87444),_=r(80457),h=r(7102),l=r(26923),E=r(60078),O=r(78232),F=r(89854),M=r(25437),G=r(26164),f=r(66013),B=r(40703);function k(P,ut){1&P&&t._UZ(0,"span",27)}function $(P,ut){if(1&P&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&P){const u=t.oxw();t.Tol(u.paymentStatus.classList),t.xp6(1),t.hij(" ",t.lcZ(2,3,u.paymentStatus.label)," ")}}function i(P,ut){if(1&P&&(t._UZ(0,"div",29),t.ALo(1,"translate")),2&P){const u=t.oxw();t.Tol(null==u.paymentStatus?null:u.paymentStatus.classList),t.Q6J("innerText",t.xi3(1,3,u.transaction.paymentMessage,u.transaction.paymentMessageTranslateParams))}}function Y(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"div",30),t._UZ(1,"div",31),t.ALo(2,"translate"),t.TgZ(3,"button",32),t.NdJ("click",function(){return t.CHM(u),t.oxw().showAmlModal()}),t.qZA()()}if(2&P){const u=t.oxw();t.xp6(1),t.Tol(null==u.paymentStatus?null:u.paymentStatus.classList),t.Q6J("innerText",t.lcZ(2,3,"STATEMENT.TRANSACTION.STATE.AML_VERIFICATION"))}}function S(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(xt){return t.CHM(u),t.oxw().showRefundDetails(xt)}),t._uU(1,"STATEMENT.TRANSACTION.REFUND_DETAILS"),t.qZA()}}function U(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(u),t.oxw().repeatPayment()}),t._UZ(1,"span",35),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&P){const u=t.oxw();t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/repeat.svg"),t.xp6(2),t.Oqu(t.lcZ(4,2,u.mapActionLabel("REPEAT")))}}function x(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",36),t.NdJ("click",function(xt){return t.CHM(u),t.oxw().signPayment(xt)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&P){const u=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,u.mapActionLabel("SIGN"))," ")}}function ot(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",37),t.NdJ("click",function(xt){return t.CHM(u),t.oxw().sendForSign(xt)}),t._uU(1," STATEMENT.DETAILS.SEND_FOR_SIGN "),t.qZA()}}function vt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(xt){return t.CHM(u),t.oxw().exportPayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span",39),t._uU(3,"STATEMENT.DETAILS.DOWNLOAD"),t.qZA()()}2&P&&(t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/pdf.svg"))}function At(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(xt){return t.CHM(u),t.oxw().downloadIncomingPayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span",39),t._uU(3,"STATEMENT.DETAILS.DOWNLOAD"),t.qZA()()}2&P&&(t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/pdf.svg"))}function Zt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).repeatPayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&P){const u=t.oxw(3);t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/repeat.svg"),t.xp6(2),t.Oqu(t.lcZ(4,2,u.mapActionLabel("REPEAT")))}}function kt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).editPayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&P){const u=t.oxw(3);t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/edit.svg"),t.xp6(2),t.Oqu(t.lcZ(4,2,u.mapActionLabel("EDIT")))}}function Yt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).deletePayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&P){const u=t.oxw(3);t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/delete.svg"),t.xp6(2),t.Oqu(t.lcZ(4,2,u.mapActionLabel("DELETE")))}}function H(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).revokePayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&P){const u=t.oxw(3);t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/revoke.svg"),t.xp6(2),t.Oqu(t.lcZ(4,2,u.mapActionLabel("REVOKE")))}}function at(P,ut){if(1&P&&(t.TgZ(0,"section",41),t.YNc(1,Zt,5,4,"a",42),t.YNc(2,kt,5,4,"a",42),t.YNc(3,Yt,5,4,"a",42),t.YNc(4,H,5,4,"a",42),t.qZA()),2&P){const u=t.oxw(2);t.ekj("details__row--two-items",u.hasTwoActions)("details__row--three-items",u.hasThreeActions),t.xp6(1),t.Q6J("ngIf",u.transaction.isRepeatable),t.xp6(1),t.Q6J("ngIf",u.transaction.isEditable),t.xp6(1),t.Q6J("ngIf",u.transaction.isRemovable),t.xp6(1),t.Q6J("ngIf",u.transaction.isRevokable)}}function yt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).loadParentPayment(xt)}),t._UZ(1,"span",35),t.TgZ(2,"span",39),t._uU(3,"STATEMENT.DETAILS.TO_INITIAL"),t.qZA()()}2&P&&(t.xp6(1),t.Q6J("inlineSVG","/assets/icons/transaction/to-initial.svg"))}function rt(P,ut){if(1&P&&(t.ynx(0),t.YNc(1,yt,4,1,"a",42),t.BQk()),2&P){const u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",u.transaction.parentReference)}}function ht(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.KNP"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(3);t.xp6(6),t.hij(" ",(null==u.transaction.knp?null:u.transaction.knp.label)||(null==u.transaction.knp?null:u.transaction.knp.code)||"-"," ")}}function _t(P,ut){if(1&P&&(t.ynx(0),t.TgZ(1,"section",44)(2,"j-collapsible")(3,"j-collapsible-trigger")(4,"div",45)(5,"h5",46),t._uU(6,"STATEMENT.TRANSFER_ACTIONS.TITLE"),t.qZA(),t._UZ(7,"j-icon",47),t.qZA()(),t.TgZ(8,"j-collapsible-body")(9,"div",48),t.YNc(10,ht,7,1,"div",49),t.TgZ(11,"div",50)(12,"div",51)(13,"span",39),t._uU(14,"STATEMENT.DETAILS.DOCUMENT_NUMBER"),t.qZA(),t._uU(15,": "),t.qZA(),t.TgZ(16,"div",52),t._uU(17),t.qZA()()()()()(),t.TgZ(18,"section",44)(19,"j-collapsible")(20,"j-collapsible-trigger")(21,"div",53)(22,"h5",46),t._uU(23),t.qZA(),t._UZ(24,"j-icon",47),t.qZA()(),t.TgZ(25,"j-collapsible-body")(26,"div",48)(27,"div",50)(28,"div",51)(29,"span",39),t._uU(30,"STATEMENT.DETAILS.BANK"),t.qZA(),t._uU(31,": "),t.qZA(),t.TgZ(32,"div",52),t._uU(33),t.ALo(34,"bankAccountName"),t.qZA()(),t.TgZ(35,"div",50)(36,"div",51)(37,"span",39),t._uU(38,"STATEMENT.DETAILS.BIC"),t.qZA(),t._uU(39,": "),t.qZA(),t.TgZ(40,"div",52),t._uU(41),t.qZA()()()()()(),t.BQk()),2&P){const u=t.oxw(2);t.xp6(7),t.Q6J("isStroke",!0),t.xp6(3),t.Q6J("ngIf",!u.transaction.parentReference),t.xp6(7),t.hij(" ",u.transaction.documentNumber||"-",""),t.xp6(6),t.hij(" ",u.transaction.isCredit?"STATEMENT.TRANSACTION.SENDER":"STATEMENT.TRANSACTION.RECEIVER"," "),t.xp6(1),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.transaction.correspondentAccount?t.lcZ(34,7,u.transaction.correspondentAccount):"-"," "),t.xp6(8),t.hij(" ",u.transaction.correspondentBankBic||"-"," ")}}function Nt(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",52),t._uU(2),t.qZA(),t.TgZ(3,"div",58),t._uU(4,"SHARED.SIGNED"),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(2),t.Oqu(u.transaction.signHead)}}function nt(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",52),t._uU(2),t.qZA(),t.TgZ(3,"div",58),t._uU(4,"SHARED.SIGNED"),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(2),t.Oqu(u.transaction.signBuch)}}function Bt(P,ut){if(1&P&&(t.TgZ(0,"section",44)(1,"j-collapsible")(2,"j-collapsible-trigger")(3,"div",55)(4,"h5",56),t._uU(5,"STATEMENT.DETAILS.SIGNERS"),t.qZA(),t._UZ(6,"j-icon",57),t.qZA()(),t.TgZ(7,"j-collapsible-body")(8,"div",48),t.YNc(9,Nt,5,1,"div",49),t.YNc(10,nt,5,1,"div",49),t.qZA()()()()),2&P){const u=t.oxw(3);t.xp6(6),t.Q6J("isStroke",!0),t.xp6(3),t.Q6J("ngIf",u.isSignerShown(u.transaction.signHead)),t.xp6(1),t.Q6J("ngIf",u.isSignerShown(u.transaction.signBuch))}}function Lt(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",52),t._uU(2),t.qZA(),t.TgZ(3,"div",58),t._uU(4),t.qZA()()),2&P){const u=ut.$implicit;t.xp6(2),t.Oqu(u.name),t.xp6(1),t.Tol(u.classList),t.xp6(1),t.Oqu(u.label)}}function bt(P,ut){if(1&P&&(t.TgZ(0,"section",44)(1,"j-collapsible")(2,"j-collapsible-trigger")(3,"div",53)(4,"h5",46),t._uU(5,"STATEMENT.DETAILS.SIGNERS"),t.qZA(),t._UZ(6,"j-icon",47),t.qZA()(),t.TgZ(7,"j-collapsible-body")(8,"div",48),t.YNc(9,Lt,5,4,"div",59),t.qZA()()()()),2&P){const u=t.oxw(3);t.xp6(6),t.Q6J("isStroke",!0),t.xp6(3),t.Q6J("ngForOf",u.signers)}}function $t(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.PAYER_CARD_NUMBER"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.hij(" ",u.payerCardNumber,"")}}function an(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.RECIPIENT_CARD_NUMBER"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.hij(" ",u.recipientCardNumber,"")}}function Vt(P,ut){if(1&P&&(t.ynx(0),t.TgZ(1,"section",44)(2,"j-collapsible")(3,"j-collapsible-trigger")(4,"div",45)(5,"h5",46),t._uU(6,"STATEMENT.TRANSFER_ACTIONS.TITLE"),t.qZA(),t._UZ(7,"j-icon",47),t.qZA()(),t.TgZ(8,"j-collapsible-body")(9,"div",48)(10,"div",50)(11,"div",51)(12,"span",39),t._uU(13,"STATEMENT.DETAILS.VALUE_DATE"),t.qZA(),t._uU(14,": "),t.qZA(),t.TgZ(15,"div",52),t._uU(16),t.ALo(17,"date"),t.qZA()(),t.TgZ(18,"div",50)(19,"div",51)(20,"span",39),t._uU(21,"STATEMENT.DETAILS.PAYER_IBAN"),t.qZA(),t._uU(22,": "),t.qZA(),t.TgZ(23,"div",52),t._uU(24),t.ALo(25,"formatIban"),t.qZA()(),t.TgZ(26,"div",50)(27,"div",51)(28,"span",39),t._uU(29,"STATEMENT.DETAILS.RECEIVER_IBAN"),t.qZA(),t._uU(30,": "),t.qZA(),t.TgZ(31,"div",52),t._uU(32),t.ALo(33,"formatIban"),t.qZA()(),t.YNc(34,$t,7,1,"div",49),t.YNc(35,an,7,1,"div",49),t.TgZ(36,"div",50)(37,"div",51)(38,"span",39),t._uU(39,"STATEMENT.DETAILS.KNP"),t.qZA(),t._uU(40,": "),t.qZA(),t.TgZ(41,"div",52),t._uU(42),t.qZA()(),t.TgZ(43,"div",50)(44,"div",51)(45,"span",39),t._uU(46,"STATEMENT.DETAILS.DOCUMENT_NUMBER"),t.qZA(),t._uU(47,": "),t.qZA(),t.TgZ(48,"div",52),t._uU(49),t.qZA()()()()()(),t.BQk()),2&P){const u=t.oxw(3);t.xp6(7),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.transaction.valueDate?t.xi3(17,8,u.transaction.valueDate,"d MMMM yyyy"):"-"," "),t.xp6(8),t.hij("",t.lcZ(25,11,u.transaction.iban)||"-"," "),t.xp6(8),t.hij(" ",t.lcZ(33,13,u.transaction.correspondentAccount)||"-",""),t.xp6(2),t.Q6J("ngIf",u.payerCardNumber),t.xp6(1),t.Q6J("ngIf",u.recipientCardNumber),t.xp6(7),t.hij(" ",(null==u.transaction.knp?null:u.transaction.knp.label)||(null==u.transaction.knp?null:u.transaction.knp.code)||"-"," "),t.xp6(7),t.hij(" ",u.transaction.documentNumber||"-","")}}function An(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.CONTRACT_NUMBER"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails.fxContract?null:u.loadedPayment.details.foreignPaymentDetails.fxContract.contractNumber," ")}}function Wt(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.UNK"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.foreignPaymentDetails.fxContract.registrationNumberContract," ")}}function hn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(3),t.Oqu(t.lcZ(4,3,"AE"==(null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.countryCode)?"STATEMENT.FOREIGN_DETAILS.CODEWORD_AE":"STATEMENT.FOREIGN_DETAILS.CODEWORD")),t.xp6(4),t.AsE(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails||null==u.loadedPayment.details.foreignPaymentDetails.codeWord?null:u.loadedPayment.details.foreignPaymentDetails.codeWord.code," - ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails||null==u.loadedPayment.details.foreignPaymentDetails.codeWord?null:u.loadedPayment.details.foreignPaymentDetails.codeWord.name," ")}}function Ht(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.KVO"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.currencyTransactionCode," ")}}function nn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.PAYER_INN"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerInn," ")}}function pn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.PAYER_KPP"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerKpp," ")}}function V(P,ut){1&P&&(t.TgZ(0,"span"),t._uU(1," - "),t.qZA())}function dt(P,ut){if(1&P&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&P){const u=t.oxw(5);t.xp6(1),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.kbk.name," ")}}function Et(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.KBK"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA(),t.YNc(8,V,2,0,"span",23),t.YNc(9,dt,2,1,"span",23),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.kbk.code," "),t.xp6(1),t.Q6J("ngIf",(null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.kbk.code)&&(null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.kbk.name)),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.kbk.name)}}function J(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.OKTMO"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.oktmo," ")}}function mt(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.PAYER_STATUS"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerStatus," ")}}function I(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.PAYMENT_BASIS"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.paymentBasis," ")}}function Z(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.BUDGET_DOC_NUMBER"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.budgetDocNumber," ")}}function et(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.PERIOD"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.period," ")}}function L(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_DETAILS.UIP"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.uip," ")}}function gt(P,ut){if(1&P&&(t.TgZ(0,"div",52),t._uU(1),t.qZA()),2&P){const u=t.oxw(5);t.xp6(1),t.AsE(" ",null==u.transaction.kbe?null:u.transaction.kbe.code," - ",null==u.transaction.kbe?null:u.transaction.kbe.name," ")}}function It(P,ut){if(1&P&&(t.TgZ(0,"div",52),t._uU(1),t.qZA()),2&P){const u=t.oxw(5);t.xp6(1),t.hij(" ",null==u.transaction.kbe?null:u.transaction.kbe.code," ")}}function Ut(P,ut){1&P&&(t.TgZ(0,"div",52),t._uU(1," - "),t.qZA())}function ln(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.KBE"),t.qZA(),t._uU(4,": "),t.qZA(),t.YNc(5,gt,2,2,"div",60),t.YNc(6,It,2,1,"div",60),t.YNc(7,Ut,2,0,"div",60),t.qZA()),2&P){const u=t.oxw(4);t.xp6(5),t.Q6J("ngIf",(null==u.transaction.kbe?null:u.transaction.kbe.code)&&(null==u.transaction.kbe?null:u.transaction.kbe.name)),t.xp6(1),t.Q6J("ngIf",(null==u.transaction.kbe?null:u.transaction.kbe.code)&&!(null!=u.transaction.kbe&&u.transaction.kbe.name)),t.xp6(1),t.Q6J("ngIf",!(null!=u.transaction.kbe&&u.transaction.kbe.code))}}function Tn(P,ut){1&P&&(t.TgZ(0,"span"),t._uU(1," - "),t.qZA())}function mn(P,ut){if(1&P&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&P){const u=t.oxw(4);t.xp6(1),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.bankName," ")}}function bn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_RECEIVER.KIO"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.iinOrBin," ")}}function yn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_RECEIVER.NAME"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.name," ")}}function Ln(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.FOREIGN_RECEIVER.KPP"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA()()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.kpp," ")}}function ne(P,ut){if(1&P&&(t.ynx(0),t.TgZ(1,"section",44)(2,"j-collapsible")(3,"j-collapsible-trigger")(4,"div",45)(5,"h5",46),t._uU(6,"STATEMENT.DETAILS.TITLE"),t.qZA(),t._UZ(7,"j-icon",47),t.qZA()(),t.TgZ(8,"j-collapsible-body")(9,"div",48),t.YNc(10,An,7,1,"div",49),t.YNc(11,Wt,7,1,"div",49),t.TgZ(12,"div",50)(13,"div",51)(14,"span",39),t._uU(15,"STATEMENT.DETAILS.VALUE_DATE"),t.qZA(),t._uU(16,": "),t.qZA(),t.TgZ(17,"div",52),t._uU(18),t.ALo(19,"date"),t.qZA()(),t.TgZ(20,"div",50)(21,"div",51)(22,"span",39),t._uU(23,"STATEMENT.DETAILS.KNP"),t.qZA(),t._uU(24,": "),t.qZA(),t.TgZ(25,"div",52),t._uU(26),t.qZA()(),t.TgZ(27,"div",50)(28,"div",51)(29,"span",39),t._uU(30,"STATEMENT.DETAILS.PAYER_IBAN"),t.qZA(),t._uU(31,": "),t.qZA(),t.TgZ(32,"div",52),t._uU(33),t.ALo(34,"formatIban"),t.qZA()(),t.TgZ(35,"div",50)(36,"div",51)(37,"span",39),t._uU(38,"STATEMENT.DETAILS.PAYER_COMMISSION_IBAN"),t.qZA(),t._uU(39,": "),t.qZA(),t.TgZ(40,"div",52),t._uU(41),t.ALo(42,"formatIban"),t.qZA()(),t.TgZ(43,"div",50)(44,"div",51)(45,"span",39),t._uU(46,"STATEMENT.DETAILS.DOCUMENT_NUMBER"),t.qZA(),t._uU(47,": "),t.qZA(),t.TgZ(48,"div",52),t._uU(49),t.qZA()(),t.YNc(50,hn,8,5,"div",49),t.YNc(51,Ht,8,1,"div",49),t.YNc(52,nn,8,1,"div",49),t.YNc(53,pn,8,1,"div",49),t.YNc(54,Et,10,3,"div",49),t.YNc(55,J,8,1,"div",49),t.YNc(56,mt,8,1,"div",49),t.YNc(57,I,8,1,"div",49),t.YNc(58,Z,8,1,"div",49),t.YNc(59,et,8,1,"div",49),t.YNc(60,L,8,1,"div",49),t.qZA()()()(),t.TgZ(61,"section",44)(62,"j-collapsible")(63,"j-collapsible-trigger")(64,"div",45)(65,"h5",46),t._uU(66,"STATEMENT.FOREIGN_RECEIVER.TITLE"),t.qZA(),t._UZ(67,"j-icon",47),t.qZA()(),t.TgZ(68,"j-collapsible-body")(69,"div",48)(70,"div",50)(71,"div",51)(72,"span",39),t._uU(73,"STATEMENT.FOREIGN_RECEIVER.COUNTRY"),t.qZA(),t._uU(74,": "),t.qZA(),t.TgZ(75,"div",52),t._uU(76),t.qZA()(),t.TgZ(77,"div",50)(78,"div",51)(79,"span",39),t._uU(80,"STATEMENT.FOREIGN_RECEIVER.CITY"),t.qZA(),t._uU(81,": "),t.qZA(),t.TgZ(82,"div",52),t._uU(83),t.qZA()(),t.TgZ(84,"div",50)(85,"div",51)(86,"span",39),t._uU(87,"STATEMENT.FOREIGN_RECEIVER.IBAN"),t.qZA(),t._uU(88,": "),t.qZA(),t.TgZ(89,"div",52),t._uU(90),t.qZA()(),t.YNc(91,ln,8,3,"div",49),t.TgZ(92,"div",50)(93,"div",51)(94,"span",39),t._uU(95,"STATEMENT.FOREIGN_RECEIVER.BIC"),t.qZA(),t._uU(96,": "),t.qZA(),t.TgZ(97,"div",52)(98,"span"),t._uU(99),t.qZA(),t.YNc(100,Tn,2,0,"span",23),t.YNc(101,mn,2,1,"span",23),t.qZA()(),t.YNc(102,bn,8,1,"div",49),t.YNc(103,yn,8,1,"div",49),t.YNc(104,Ln,8,1,"div",49),t.qZA()()()(),t.BQk()),2&P){const u=t.oxw(3);t.xp6(7),t.Q6J("isStroke",!0),t.xp6(3),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails||null==u.loadedPayment.details.foreignPaymentDetails.fxContract?null:u.loadedPayment.details.foreignPaymentDetails.fxContract.contractNumber),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails||null==u.loadedPayment.details.foreignPaymentDetails.fxContract?null:u.loadedPayment.details.foreignPaymentDetails.fxContract.registrationNumberContract),t.xp6(7),t.hij(" ",u.transaction.valueDate?t.xi3(19,30,u.transaction.valueDate,"d MMMM yyyy"):"-"," "),t.xp6(8),t.hij(" ",(null==u.transaction.knp?null:u.transaction.knp.label)||(null==u.transaction.knp?null:u.transaction.knp.code)||"-"," "),t.xp6(7),t.hij("",t.lcZ(34,33,u.transaction.iban)||"-"," "),t.xp6(8),t.hij(" ",t.lcZ(42,35,null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.commissionWithdrawalIban)||"-"," "),t.xp6(8),t.hij(" ",u.transaction.documentNumber||"-",""),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.codeWord),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.currencyTransactionCode),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerInn),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerKpp),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.kbk?null:u.loadedPayment.details.kbk.code),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.oktmo),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.payerStatus),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.paymentBasis),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.budgetDocNumber),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.period),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.foreignPaymentDetails?null:u.loadedPayment.details.foreignPaymentDetails.uip),t.xp6(7),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.country," "),t.xp6(7),t.hij(" ",(null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.cityName)||"-"," "),t.xp6(7),t.hij(" ",u.transaction.correspondentAccount||"-",""),t.xp6(1),t.Q6J("ngIf",u.transaction.kbe),t.xp6(8),t.hij(" ",(null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.bic)||""," "),t.xp6(1),t.Q6J("ngIf",(null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.bic)&&(null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.bankName)),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.bankName),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.iinOrBin),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.name),t.xp6(1),t.Q6J("ngIf",null==u.loadedPayment||null==u.loadedPayment.paymentRecipient?null:u.loadedPayment.paymentRecipient.kpp)}}function jn(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.CONVERSION.RATE"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._UZ(6,"j-money",61),t._uU(7," = "),t._UZ(8,"j-money",61),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.Q6J("money",u.conversionRateFrom),t.xp6(2),t.Q6J("money",u.conversionRateTo)}}function Mn(P,ut){if(1&P&&(t.ynx(0),t.TgZ(1,"section",44)(2,"j-collapsible")(3,"j-collapsible-trigger")(4,"div",45)(5,"h5",46),t._uU(6,"STATEMENT.CONVERSION.TITLE"),t.qZA(),t._UZ(7,"j-icon",47),t.qZA()(),t.TgZ(8,"j-collapsible-body")(9,"div",48)(10,"div",50)(11,"div",51)(12,"span",39),t._uU(13,"STATEMENT.DETAILS.VALUE_DATE"),t.qZA(),t._uU(14,": "),t.qZA(),t.TgZ(15,"div",52),t._uU(16),t.ALo(17,"date"),t.qZA()(),t.YNc(18,jn,9,2,"div",49),t.TgZ(19,"div",50)(20,"div",51)(21,"span",39),t._uU(22,"STATEMENT.DETAILS.PAYER_IBAN"),t.qZA(),t._uU(23,": "),t.qZA(),t.TgZ(24,"div",52),t._uU(25),t.ALo(26,"formatIban"),t.qZA()(),t.TgZ(27,"div",50)(28,"div",51)(29,"span",39),t._uU(30,"STATEMENT.CONVERSION.TO_IBAN"),t.qZA(),t._uU(31,": "),t.qZA(),t.TgZ(32,"div",52),t._uU(33),t.ALo(34,"formatIban"),t.qZA()(),t.TgZ(35,"div",50)(36,"div",51)(37,"span",39),t._uU(38,"STATEMENT.CONVERSION.FROM_AMOUNT"),t.qZA(),t._uU(39,": "),t.qZA(),t.TgZ(40,"div",52),t._UZ(41,"j-money",61),t.qZA()(),t.TgZ(42,"div",50)(43,"div",51)(44,"span",39),t._uU(45,"STATEMENT.CONVERSION.TO_AMOUNT"),t.qZA(),t._uU(46,": "),t.qZA(),t.TgZ(47,"div",52),t._UZ(48,"j-money",61),t.qZA()(),t.TgZ(49,"div",50)(50,"div",51)(51,"span",39),t._uU(52,"STATEMENT.CONVERSION.NUMBER"),t.qZA(),t._uU(53,": "),t.qZA(),t.TgZ(54,"div",52),t._uU(55),t.qZA()(),t.TgZ(56,"div",50)(57,"div",51)(58,"span",39),t._uU(59,"STATEMENT.CONVERSION.PURPOSE"),t.qZA()(),t.TgZ(60,"div",52)(61,"span"),t._uU(62),t.qZA()()()()()()(),t.BQk()),2&P){const u=t.oxw(3);t.xp6(7),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.transaction.valueDate?t.xi3(17,10,u.transaction.valueDate,"d MMMM yyyy"):"-"," "),t.xp6(2),t.Q6J("ngIf",u.conversionRateFrom&&u.conversionRateTo),t.xp6(7),t.hij("",t.lcZ(26,13,u.transaction.iban)||"-"," "),t.xp6(8),t.hij(" ",t.lcZ(34,15,null==u.loadedPayment||null==u.loadedPayment.paymentRecipient||null==u.loadedPayment.paymentRecipient.recipientAccount?null:u.loadedPayment.paymentRecipient.recipientAccount.iban)||"-"," "),t.xp6(8),t.Q6J("money",null==u.loadedPayment||null==u.loadedPayment.details?null:u.loadedPayment.details.paymentAmount),t.xp6(7),t.Q6J("money",u.conversionToAmount),t.xp6(7),t.hij(" ",u.transaction.documentNumber||"-",""),t.xp6(7),t.AsE(" ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.conversionPurpose?null:u.loadedPayment.details.conversionPurpose.code," - ",null==u.loadedPayment||null==u.loadedPayment.details||null==u.loadedPayment.details.conversionPurpose?null:u.loadedPayment.details.conversionPurpose.description," ")}}function he(P,ut){1&P&&(t.TgZ(0,"span"),t._uU(1," - "),t.qZA())}function Yn(P,ut){if(1&P&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&P){const u=t.oxw(5);t.xp6(1),t.hij(" ",null==u.transaction.kbk?null:u.transaction.kbk.name," ")}}function Te(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.KBK"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52)(6,"span"),t._uU(7),t.qZA(),t.YNc(8,he,2,0,"span",23),t.YNc(9,Yn,2,1,"span",23),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(7),t.hij(" ",null==u.transaction.kbk?null:u.transaction.kbk.code," "),t.xp6(1),t.Q6J("ngIf",(null==u.transaction.kbk?null:u.transaction.kbk.code)&&(null==u.transaction.kbk?null:u.transaction.kbk.name)),t.xp6(1),t.Q6J("ngIf",null==u.transaction.kbk?null:u.transaction.kbk.name)}}function Ue(P,ut){if(1&P&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",39),t._uU(3,"STATEMENT.DETAILS.EMAIL"),t.qZA(),t._uU(4,": "),t.qZA(),t.TgZ(5,"div",52),t._uU(6),t.qZA()()),2&P){const u=t.oxw(4);t.xp6(6),t.hij(" ",u.transaction.emailOnSuccess,"")}}function xe(P,ut){if(1&P){const u=t.EpF();t.ynx(0),t.TgZ(1,"section",44)(2,"j-collapsible")(3,"j-collapsible-trigger")(4,"div",53)(5,"h5",46),t._uU(6,"STATEMENT.DETAILS.TITLE"),t.qZA(),t._UZ(7,"j-icon",47),t.qZA()(),t.TgZ(8,"j-collapsible-body")(9,"div",48)(10,"div",50)(11,"div",51)(12,"span",39),t._uU(13,"STATEMENT.DETAILS.VALUE_DATE"),t.qZA(),t._uU(14,": "),t.qZA(),t.TgZ(15,"div",52),t._uU(16),t.ALo(17,"date"),t.qZA()(),t.TgZ(18,"div",62)(19,"div",51)(20,"span",39),t._uU(21,"STATEMENT.EMPLOYEES.TITLE"),t.qZA(),t._uU(22,": "),t.qZA(),t.TgZ(23,"div",52),t._uU(24),t.TgZ(25,"a",33),t.NdJ("click",function(xt){return t.CHM(u),t.oxw(3).showEmployees(xt)}),t._uU(26,"STATEMENT.EMPLOYEES.SHOW_LIST"),t.qZA()()(),t.TgZ(27,"div",50)(28,"div",51)(29,"span",39),t._uU(30,"STATEMENT.DETAILS.KNP"),t.qZA(),t._uU(31,": "),t.qZA(),t.TgZ(32,"div",52),t._uU(33),t.qZA()(),t.YNc(34,Te,10,3,"div",49),t.TgZ(35,"div",50)(36,"div",51)(37,"span"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._uU(40,": "),t.qZA(),t.TgZ(41,"div",52),t._uU(42),t.ALo(43,"formatIban"),t.qZA()(),t.TgZ(44,"div",50)(45,"div",51)(46,"span",39),t._uU(47,"STATEMENT.DETAILS.DOCUMENT_NUMBER"),t.qZA(),t._uU(48,": "),t.qZA(),t.TgZ(49,"div",52),t._uU(50),t.qZA()()()()()(),t.TgZ(51,"section",44)(52,"j-collapsible")(53,"j-collapsible-trigger")(54,"div",53)(55,"h5",46),t._uU(56),t.qZA(),t._UZ(57,"j-icon",47),t.qZA()(),t.TgZ(58,"j-collapsible-body")(59,"div",48)(60,"div",50)(61,"div",51)(62,"span",39),t._uU(63,"STATEMENT.DETAILS.NAME"),t.qZA(),t._uU(64,": "),t.qZA(),t.TgZ(65,"div",52),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",50)(69,"div",51)(70,"span",39),t._uU(71,"STATEMENT.DETAILS.BIN"),t.qZA(),t._uU(72,": "),t.qZA(),t.TgZ(73,"div",52),t._uU(74),t.qZA()(),t.TgZ(75,"div",50)(76,"div",51)(77,"span",39),t._uU(78,"STATEMENT.DETAILS.IBAN"),t.qZA(),t._uU(79,": "),t.qZA(),t.TgZ(80,"div",52),t._uU(81),t.ALo(82,"formatIban"),t.qZA()(),t.TgZ(83,"div",50)(84,"div",51)(85,"span",39),t._uU(86,"STATEMENT.DETAILS.KBE"),t.qZA(),t._uU(87,": "),t.qZA(),t.TgZ(88,"div",52),t._uU(89),t.qZA()(),t.TgZ(90,"div",50)(91,"div",51)(92,"span",39),t._uU(93,"STATEMENT.DETAILS.BANK"),t.qZA(),t._uU(94,": "),t.qZA(),t.TgZ(95,"div",52),t._uU(96),t.ALo(97,"bankAccountName"),t.qZA()(),t.TgZ(98,"div",50)(99,"div",51)(100,"span",39),t._uU(101,"STATEMENT.DETAILS.BIC"),t.qZA(),t._uU(102,": "),t.qZA(),t.TgZ(103,"div",52),t._uU(104),t.qZA()(),t.YNc(105,Ue,7,1,"div",49),t.qZA()()()(),t.BQk()}if(2&P){const u=t.oxw(3);t.xp6(7),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.transaction.valueDate?t.xi3(17,18,u.transaction.valueDate,"d MMMM yyyy"):"-"," "),t.xp6(2),t.Q6J("hidden",!u.employees||0==(null==u.employees?null:u.employees.length)),t.xp6(6),t.hij(" ",null==u.employees?null:u.employees.length," "),t.xp6(9),t.hij(" ",(null==u.transaction.knp?null:u.transaction.knp.label)||(null==u.transaction.knp?null:u.transaction.knp.code)||"-"," "),t.xp6(1),t.Q6J("ngIf",null==u.transaction.kbk?null:u.transaction.kbk.code),t.xp6(4),t.Oqu(t.lcZ(39,21,u.transaction.isCredit?"STATEMENT.DETAILS.RECEIVER_IBAN":"STATEMENT.DETAILS.PAYER_IBAN")),t.xp6(4),t.hij("",t.lcZ(43,23,u.transaction.iban)||"-"," "),t.xp6(8),t.hij(" ",u.transaction.documentNumber||"-",""),t.xp6(6),t.hij(" ",u.transaction.isCredit?"STATEMENT.TRANSACTION.SENDER":"STATEMENT.TRANSACTION.RECEIVER"," "),t.xp6(1),t.Q6J("isStroke",!0),t.xp6(9),t.hij(" ",u.transaction.correspondentName||t.lcZ(67,25,"STATEMENT.TRANSACTION.NO_TITLE")," "),t.xp6(8),t.hij(" ",u.transaction.correspondentBin||"-",""),t.xp6(7),t.hij(" ",t.lcZ(82,27,u.transaction.correspondentAccount)||"-",""),t.xp6(8),t.hij(" ",(null==u.transaction.kbe?null:u.transaction.kbe.code)||"-",""),t.xp6(7),t.hij(" ",u.transaction.correspondentAccount?t.lcZ(97,29,u.transaction.correspondentAccount):"-"," "),t.xp6(8),t.hij(" ",u.transaction.correspondentBankBic||"-",""),t.xp6(1),t.Q6J("ngIf",u.transaction.emailOnSuccess)}}function dn(P,ut){if(1&P&&(t.ynx(0),t.YNc(1,Bt,11,3,"section",54),t.YNc(2,bt,10,2,"section",54),t.YNc(3,Vt,50,15,"ng-container",23),t.YNc(4,ne,105,37,"ng-container",23),t.YNc(5,Mn,63,17,"ng-container",23),t.YNc(6,xe,106,31,"ng-container",23),t.BQk()),2&P){const u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.transaction.isPayment&&u.transaction.isDebit&&(u.transaction.signHead||u.transaction.signBuch)),t.xp6(1),t.Q6J("ngIf",u.transaction.isPayment&&(null==u.signers?null:u.signers.length)>0),t.xp6(1),t.Q6J("ngIf",u.isTransferOwnGroup),t.xp6(1),t.Q6J("ngIf",u.isForeignGroup),t.xp6(1),t.Q6J("ngIf",u.isConversionGroup),t.xp6(1),t.Q6J("ngIf",u.isDefaultGroup)}}function Dn(P,ut){if(1&P&&(t.ynx(0),t.YNc(1,at,5,8,"section",40),t.YNc(2,rt,2,1,"ng-container",23),t.YNc(3,_t,42,9,"ng-container",23),t.YNc(4,dn,7,6,"ng-container",23),t.BQk()),2&P){const u=t.oxw();t.xp6(1),t.Q6J("ngIf",u.transaction.isPayment),t.xp6(1),t.Q6J("ngIf",u.transaction.category==u.TRANSACTION_CATEGORY.COMMISSION||u.transaction.category==u.TRANSACTION_CATEGORY.REFUND),t.xp6(1),t.Q6J("ngIf",u.transaction.category==u.TRANSACTION_CATEGORY.COMMISSION),t.xp6(1),t.Q6J("ngIf",u.transaction.category!=u.TRANSACTION_CATEGORY.COMMISSION)}}function ce(P,ut){if(1&P&&(t.TgZ(0,"div",70)(1,"span",39),t._uU(2,"STATEMENT.EMPLOYEES.ACCOUNT"),t.qZA(),t._uU(3,": "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"formatIban"),t.qZA()()),2&P){const u=t.oxw().$implicit;t.xp6(5),t.Oqu(t.lcZ(6,1,u.iban))}}function ve(P,ut){if(1&P&&(t.TgZ(0,"div",70)(1,"span",39),t._uU(2,"STATEMENT.EMPLOYEES.IIN"),t.qZA(),t._uU(3,": "),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&P){const u=t.oxw().$implicit;t.xp6(5),t.Oqu(u.iin)}}function Se(P,ut){if(1&P&&(t.TgZ(0,"div",70)(1,"span",39),t._uU(2,"STATEMENT.EMPLOYEES.PERIOD"),t.qZA(),t._uU(3,": "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&P){const u=t.oxw().$implicit;t.xp6(5),t.Oqu(t.xi3(6,1,u.period,"MM.yyyy"))}}function Pe(P,ut){if(1&P&&(t.TgZ(0,"div",70)(1,"span",39),t._uU(2,"STATEMENT.EMPLOYEES.AMOUNT"),t.qZA(),t._uU(3,": "),t._UZ(4,"j-money",61),t.qZA()),2&P){const u=t.oxw().$implicit;t.xp6(4),t.Q6J("money",u.amount)}}function Oe(P,ut){if(1&P&&(t.TgZ(0,"div",68)(1,"div",3),t._uU(2),t.qZA(),t.YNc(3,ce,7,3,"div",69),t.YNc(4,ve,6,1,"div",69),t.YNc(5,Se,7,4,"div",69),t.YNc(6,Pe,5,1,"div",69),t.qZA()),2&P){const u=ut.$implicit;t.xp6(2),t.lnq("",u.lastname||""," ",u.firstname||""," ",u.middlename||"",""),t.xp6(1),t.Q6J("ngIf",u.iban),t.xp6(1),t.Q6J("ngIf",u.iin),t.xp6(1),t.Q6J("ngIf",u.period),t.xp6(1),t.Q6J("ngIf",u.amount)}}function lt(P,ut){if(1&P){const u=t.EpF();t.ynx(0),t.TgZ(1,"section",24)(2,"section",63)(3,"button",64),t.NdJ("click",function(){return t.CHM(u),t.oxw().hideEmployees()}),t._UZ(4,"j-icon",65),t.qZA(),t.TgZ(5,"h6",66),t._uU(6,"STATEMENT.EMPLOYEES.TITLE"),t.qZA()(),t.TgZ(7,"section",10),t.YNc(8,Oe,7,7,"div",67),t.qZA()(),t.BQk()}if(2&P){const u=t.oxw();t.xp6(1),t.ekj("extra-padding",u.hasExtraPadding),t.Q6J("@employees",u.isEmployeesShown?"shown":"hidden"),t.xp6(7),t.Q6J("ngForOf",u.employees)}}function wt(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"j-transaction-details",71),t.NdJ("edited",function(){t.CHM(u);const xt=t.oxw();return xt.editPayment(null,xt.parentPayment)})("repeated",function(){t.CHM(u);const xt=t.oxw();return xt.repeatPayment(null,xt.parentPayment)})("exported",function(){t.CHM(u);const xt=t.oxw();return xt.exportPayment(null,xt.parentPayment)})("downloaded",function(){t.CHM(u);const xt=t.oxw();return xt.downloadIncomingPayment(null,xt.parentPayment)})("deleted",function(){t.CHM(u);const xt=t.oxw();return xt.deletePayment(null,xt.parentPayment)})("signed",function(){t.CHM(u);const xt=t.oxw();return xt.signPayment(null,xt.parentPayment)})("sentForSign",function(){t.CHM(u);const xt=t.oxw();return xt.sendForSign(null,xt.parentPayment)})("closed",function(){return t.CHM(u),t.oxw().hideInitialPayment()}),t.qZA()}if(2&P){const u=t.oxw();t.Q6J("transaction",u.parentPayment)("mode",u.mode)("signers",u.signers)("hasExtraPadding",u.hasExtraPadding)}}function q(P,ut){if(1&P){const u=t.EpF();t.TgZ(0,"section",72)(1,"div",73),t.NdJ("click",function(){return t.CHM(u),t.oxw().hideSelector()}),t.qZA(),t.TgZ(2,"section",74)(3,"j-refund-employee-selector",75),t.NdJ("closed",function(){return t.CHM(u),t.oxw().hideSelector()}),t.qZA()()()}if(2&P){const u=t.oxw();t.Q6J("ngClass",u.wrapperClasses),t.xp6(2),t.Q6J("ngClass",u.selectorClasses),t.xp6(1),t.Q6J("refundDetails",u.transaction.refundDetails)}}let Ct=(()=>{class P{constructor(u,it,xt,Qt,un,$n,ee){this.statementService=u,this.translateService=it,this.paymentsSharedService=xt,this.companyService=Qt,this.notifierService=un,this.modalService=$n,this.document=ee,this.TRANSACTION_CATEGORY=l.FD,this.STATEMENT_MODE=b.sF,this.hasExtraPadding=!1,this.repeated=new t.vpe,this.edited=new t.vpe,this.deleted=new t.vpe,this.signed=new t.vpe,this.sentForSign=new t.vpe,this.exported=new t.vpe,this.downloaded=new t.vpe,this.revoked=new t.vpe,this.refundDetailsOpened=new t.vpe,this.closed=new t.vpe,this.isAnimating=!1,this.isSelectorShown=!1,this.wrapperClasses="",this.selectorClasses="",this.transactionPaymentId=null,this.isEmployeesShown=!1,this.isParentPaymentShown=!1,this.isParentPaymentLoading=!1}get title(){var u,it;return this.statementService.getTransactionTitle(this.transaction,{name:(null===(it=null===(u=this.transaction)||void 0===u?void 0:u.associatedField)||void 0===it?void 0:it.depositName)||""})}get country(){var u,it,xt,Qt;const un=null===(it=null===(u=this.loadedPayment)||void 0===u?void 0:u.paymentRecipient)||void 0===it?void 0:it.country;if(un){let $n;switch(this.translateService.currentLang){case"ru":default:$n=un.nameRu;break;case"kk":$n=un.nameKk;break;case"en":$n=un.nameEn}return`${un.code} - ${$n}`}return(null===(Qt=null===(xt=this.transaction)||void 0===xt?void 0:xt.foreignRecipient)||void 0===Qt?void 0:Qt.countryCode)||"-"}get isTransferOwnGroup(){return this.transaction.paymentType===h.V_.IN_BETWEEN||this.transaction.paymentType===h.V_.CARD_TO_ACCOUNT||this.transaction.paymentType===h.V_.ACCOUNT_TO_CARD||this.transaction.paymentType===h.V_.CARD_TO_CARD}get isForeignGroup(){return this.transaction.paymentType===h.V_.FOREIGN}get isConversionGroup(){return this.transaction.paymentType===h.V_.CONVERSION}get isDefaultGroup(){return!this.isTransferOwnGroup&&!this.isForeignGroup&&!this.isConversionGroup}get payerCardNumber(){var u,it,xt,Qt;const un=(null===(Qt=null===(xt=null===(it=null===(u=this.loadedPayment)||void 0===u?void 0:u.details)||void 0===it?void 0:it.associatedField)||void 0===xt?void 0:xt.parameters)||void 0===Qt?void 0:Qt.payerCardNumber)||null;return un?`${un.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${un.substring(un.length-4,un.length)}`:null}get recipientCardNumber(){var u,it,xt,Qt;const un=(null===(Qt=null===(xt=null===(it=null===(u=this.loadedPayment)||void 0===u?void 0:u.details)||void 0===it?void 0:it.associatedField)||void 0===xt?void 0:xt.parameters)||void 0===Qt?void 0:Qt.recipientCardNumber)||null;return un?`${un.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${un.substring(un.length-4,un.length)}`:null}get isDownloadableKzt(){var u;return this.transaction.isCredit&&(null===(u=this.transaction.credit)||void 0===u?void 0:u.currency)===_.w.KZT}showAmlModal(){this.modalService.open(E.TP,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})}onClose(u){u.preventDefault(),this.closed.emit()}ngOnInit(){this.paymentStatus=this.statementService.generatePaymentStatusLabel(this.transaction,!0),this.loadPaymentById(),this.generateSignersList(),this.countActions()}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden"),this.closed.emit()}repeatPayment(u=null,it=this.transaction){null==u||u.preventDefault(),this.repeated.emit(it)}editPayment(u,it=this.transaction){null==u||u.preventDefault(),this.edited.emit(it)}signPayment(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.signed.emit(it)}sendForSign(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.sentForSign.emit(it)}deletePayment(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.deleted.emit(it)}revokePayment(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.revoked.emit(it)}exportPayment(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.exported.emit(it)}downloadIncomingPayment(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.downloaded.emit(it)}showEmployees(u){u.preventDefault(),this.isEmployeesShown=!0}hideEmployees(){this.isEmployeesShown=!1}isSignerShown(u){return u&&"\u041d\u0435 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d"!=u&&"\u041d\u0435 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e"!=u}mapMoney(u,it){return{amount:u,currency:it}}mapActionLabel(u){const it="STATEMENT";switch(this.transaction.paymentType){case h.V_.IN_BETWEEN:return`${it}.TRANSFER_ACTIONS.${u}`;case h.V_.CONVERSION:return`${it}.CONVERSION_ACTIONS.${u}`;default:return`${it}.DETAILS.${u}`}}loadPaymentById(){return(0,a.mG)(this,void 0,void 0,function*(){this.transaction.isPayment?(this.loadedPayment=yield this.statementService.getPaymentDetails(this.transaction.id),this.employees=this.loadedPayment.paymentEmployees,this.applyConversionRules(this.loadedPayment)):this.transaction.paymentColvirId&&this.transaction.category!=l.FD.COMMISSION&&(this.loadedPayment=yield this.statementService.getPaymentDetailsFromColvir(this.transaction.paymentColvirId),this.transaction.paymentStatus=this.loadedPayment.status,this.loadedPayment.id&&(this.transaction.paymentId=this.loadedPayment.id,this.transaction.isExportable=!0,this.transaction.isRepeatable=!0,this.countActions()))})}loadParentPayment(u){return(0,a.mG)(this,void 0,void 0,function*(){if(u.preventDefault(),this.parentPayment)this.isParentPaymentShown=!0;else{this.isParentPaymentLoading=!0;try{this.parentPayment=yield this.statementService.loadParentPayment(this.transaction.iban,this.transaction.parentReference),this.isParentPaymentShown=!0}catch(it){this.notifierService.notify("error",this.translateService.instant(it===e.S.RESOURCE_NOT_FOUND?"STATEMENT.DETAILS.INITIAL_PAYMENT_NOT_FOUND":"ERRORS.UNKNOWN_ERROR"))}finally{this.isParentPaymentLoading=!1}}})}hideInitialPayment(){this.isParentPaymentShown=!1}applyConversionRules(u){var it;const xt=null===(it=u.details)||void 0===it?void 0:it.exchangeRate;u.type!==h.V_.CONVERSION||!xt||(this.mapConversionToAmount(xt),this.calculateConversionRates(xt))}mapConversionToAmount(u){const{sum:it,currencyFrom:xt,currencyTo:Qt,calculatedSum:un}=u;this.conversionToAmount=it.currency===xt?{amount:un,currency:Qt}:it}calculateConversionRates(u){const{from:it,to:xt}=this.paymentsSharedService.getRateAmounts(u);this.conversionRateFrom=it,this.conversionRateTo=xt}generateSignersList(){var u;this.signers=this.companyService.generateSignersList(null===(u=this.transaction.paymentStatus)||void 0===u?void 0:u.code,this.transaction.signatureScheme,this.transaction.signatures)}countActions(){let u=["isEditable","isRemovable","isRepeatable","isRevokable"].reduce((it,xt)=>this.transaction[xt]&&++it||it,0);!this.transaction.isRepeatable&&!this.transaction.isPayment&&this.transaction.category!=l.FD.COMMISSION&&this.transaction.paymentColvirId&&u++,this.hasTwoActions=2===u,this.hasThreeActions=3===u}showRefundDetails(u,it=this.transaction){null==u||u.preventDefault(),null==u||u.stopPropagation(),this.isAnimating||(this.isAnimating=!0,this.isSelectorShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.selectorClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.selectorClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isSelectorShown=!1,this.isAnimating=!1},300))}}return P.\u0275fac=function(u){return new(u||P)(t.Y36(O.A),t.Y36(F.sK),t.Y36(M.t),t.Y36(G.J),t.Y36(f.lG),t.Y36(B.FF),t.Y36(N.K0))},P.\u0275cmp=t.Xpm({type:P,selectors:[["j-transaction-details"]],inputs:{mode:"mode",transaction:"transaction",hasExtraPadding:"hasExtraPadding",signers:"signers"},outputs:{repeated:"repeated",edited:"edited",deleted:"deleted",signed:"signed",sentForSign:"sentForSign",exported:"exported",downloaded:"downloaded",revoked:"revoked",refundDetailsOpened:"refundDetailsOpened",closed:"closed"},decls:37,vars:34,consts:[[1,"details",3,"hidden"],[1,"details__header"],[1,"details__img",3,"isInversed","transaction"],[1,"p2","text-dark"],[1,"p3"],["class","text-danger","translate","STATEMENT.TRANSACTION.REFUND",4,"ngIf"],["class","transaction__status",3,"class",4,"ngIf"],[1,"text-muted","text-lowercase"],["href","#",1,"details__close","ml-auto",3,"click"],["size","md","name","cross",1,"size-md"],[1,"details__scrollable"],[1,"details__block","py-3","mt-0"],[1,"mb-0"],["showSign","true",3,"money","isDebit","isCredit"],[1,"p2"],["class","p3 details__error",3,"class","innerText",4,"ngIf"],["class","details__error d-flex justify-content-between align-items-center",4,"ngIf"],[1,"p2","details__description"],["href","#","class","link-blue","translate","",3,"click",4,"ngIf"],["class","btn btn-md btn-primary details__button mb-2",3,"click",4,"ngIf"],["href","#","class","btn btn-md btn-primary details__button mb-2",3,"click",4,"ngIf"],["href","#","class","btn btn-md btn-primary details__button mb-2","translate","",3,"click",4,"ngIf"],["href","#","class","btn btn-md btn-outline-primary details__button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"employees"],[3,"transaction","mode","signers","hasExtraPadding","edited","repeated","exported","downloaded","deleted","signed","sentForSign","closed",4,"ngIf"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],["translate","STATEMENT.TRANSACTION.REFUND",1,"text-danger"],[1,"transaction__status"],[1,"p3","details__error",3,"innerText"],[1,"details__error","d-flex","justify-content-between","align-items-center"],[1,"p3",3,"innerText"],["inlineSVG","/assets/icons/v2/question-24.svg",1,"details__aml",3,"click"],["href","#","translate","",1,"link-blue",3,"click"],[1,"btn","btn-md","btn-primary","details__button","mb-2",3,"click"],[1,"details__icon",3,"inlineSVG"],["href","#",1,"btn","btn-md","btn-primary","details__button","mb-2",3,"click"],["href","#","translate","",1,"btn","btn-md","btn-primary","details__button","mb-2",3,"click"],["href","#",1,"btn","btn-md","btn-outline-primary","details__button",3,"click"],["translate",""],["class","details__row",3,"details__row--two-items","details__row--three-items",4,"ngIf"],[1,"details__row"],["href","#","class","details__link details__block",3,"click",4,"ngIf"],["href","#",1,"details__link","details__block",3,"click"],[1,"details__block","details__block--collapsible"],[1,"details__collapse","d-flex","align-items-center"],["translate","",1,"mb-0"],["name","arrowUp",1,"ml-auto","details__arrow",3,"isStroke"],[1,"details__body","p2"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],[1,"text-muted","j-desc-child"],[1,"text-dark","j-desc-child"],[1,"d-flex","justify-content-between","details__collapse"],["class","details__block details__block--collapsible",4,"ngIf"],[1,"j-desc-row","details__collapse"],["translate","",1,"mb-0","j-desc-child"],["name","arrowUp",1,"ml-auto","details__arrow","j-desc-child",3,"isStroke"],["translate","",1,"text-muted","j-desc-child"],["class","j-desc-row",4,"ngFor","ngForOf"],["class","text-dark j-desc-child",4,"ngIf"],[3,"money"],[1,"j-desc-row",3,"hidden"],[1,"details__header","employees__header"],["type","button","href","/",1,"btn","btn-outline-primary","f-page-close","employees__close",3,"click"],["name","chevronLeft","stroke","true","color","currentColor"],["translate","",1,"employees__heading"],["class","employees__item",4,"ngFor","ngForOf"],[1,"employees__item"],["class","employee__row text-muted",4,"ngIf"],[1,"employee__row","text-muted"],[3,"transaction","mode","signers","hasExtraPadding","edited","repeated","exported","downloaded","deleted","signed","sentForSign","closed"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","currency-selector",3,"ngClass"],[3,"refundDetails","closed"]],template:function(u,it){1&u&&(t.TgZ(0,"section",0)(1,"section",1),t._UZ(2,"j-transaction-type",2),t.TgZ(3,"article")(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,k,1,0,"span",5),t.YNc(8,$,3,5,"span",6),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"async"),t.qZA()()(),t.TgZ(12,"a",8),t.NdJ("click",function(Qt){return it.onClose(Qt)}),t._UZ(13,"j-icon",9),t.qZA()(),t.TgZ(14,"div",10)(15,"section",11)(16,"h3",12),t._UZ(17,"j-money",13),t.qZA(),t.TgZ(18,"div",14),t._uU(19),t.qZA(),t.YNc(20,i,2,6,"div",15),t.YNc(21,Y,4,5,"div",16),t.TgZ(22,"div",17),t._uU(23),t.ALo(24,"translate"),t._UZ(25,"br"),t.YNc(26,S,2,0,"a",18),t.qZA(),t.YNc(27,U,5,4,"button",19),t.YNc(28,x,3,3,"a",20),t.YNc(29,ot,2,0,"a",21),t.YNc(30,vt,4,1,"a",22),t.YNc(31,At,4,1,"a",22),t.qZA(),t.YNc(32,Dn,5,4,"ng-container",23),t.qZA()(),t.YNc(33,lt,9,4,"ng-container",23),t.TgZ(34,"section",24),t.YNc(35,wt,1,4,"j-transaction-details",25),t.qZA(),t.YNc(36,q,4,3,"section",26)),2&u&&(t.ekj("extra-padding",it.hasExtraPadding),t.Q6J("@details",it.isEmployeesShown||it.isParentPaymentShown?"hidden":"shown")("hidden",it.isEmployeesShown),t.xp6(2),t.Q6J("isInversed",!0)("transaction",it.transaction),t.xp6(3),t.hij(" \u2116",it.transaction.documentNumber," "),t.xp6(2),t.Q6J("ngIf",it.transaction.category==it.TRANSACTION_CATEGORY.REFUND),t.xp6(1),t.Q6J("ngIf",it.transaction.isPayment&&it.transaction.paymentStatus),t.xp6(2),t.hij(" ",t.lcZ(11,30,it.transaction.dateStatusText)," "),t.xp6(7),t.Q6J("money",it.transaction.balance)("isDebit",!it.transaction.isCredit)("isCredit",it.transaction.isCredit),t.xp6(2),t.Oqu(it.title),t.xp6(1),t.Q6J("ngIf","BANK_COMPLETED"!=(null==it.transaction.paymentStatus?null:it.transaction.paymentStatus.code)&&"AML_VERIFICATION"!=(null==it.transaction.paymentStatus?null:it.transaction.paymentStatus.code)&&it.transaction.paymentMessage),t.xp6(1),t.Q6J("ngIf","AML_VERIFICATION"==(null==it.transaction.paymentStatus?null:it.transaction.paymentStatus.code)),t.xp6(2),t.hij(" ",it.transaction.description||t.lcZ(24,32,"STATEMENT.TRANSACTION.NO_DESCRIPTION"),""),t.xp6(3),t.Q6J("ngIf",it.transaction.category==it.TRANSACTION_CATEGORY.REFUND),t.xp6(1),t.Q6J("ngIf",it.transaction.isRepeatable&&(null==it.loadedPayment?null:it.loadedPayment.id)&&!it.transaction.isPayment),t.xp6(1),t.Q6J("ngIf",it.transaction.isSignable),t.xp6(1),t.Q6J("ngIf",!it.transaction.isSignable&&it.transaction.isSendableForSign),t.xp6(1),t.Q6J("ngIf",it.transaction.isExportable),t.xp6(1),t.Q6J("ngIf",it.isDownloadableKzt),t.xp6(1),t.Q6J("ngIf",it.mode!=it.STATEMENT_MODE.CARDS),t.xp6(1),t.Q6J("ngIf",it.mode!=it.STATEMENT_MODE.CARDS),t.xp6(1),t.ekj("extra-padding",it.hasExtraPadding),t.Q6J("@employees",it.isParentPaymentShown?"shown":"hidden"),t.xp6(1),t.Q6J("ngIf",it.parentPayment),t.xp6(1),t.Q6J("ngIf",it.isSelectorShown))},styles:[":host{position:relative;overflow:hidden}.details{width:100%;overflow:hidden;display:flex;flex-direction:column;position:absolute;height:100vh}.details.extra-padding{padding-top:62px}@media (min-width: 960px){.details.extra-padding{padding-top:100px}}@media (min-width: 1280px){.details.extra-padding{padding-top:0}}.details__header{display:flex;padding:1rem}.details__img{margin-right:12px}.details__button{display:flex;justify-content:center;width:100%;margin-bottom:0}.details__scrollable{flex-grow:1;overflow-y:auto;padding:0 1rem 1rem}.details__scrollable::-webkit-scrollbar{width:8px}.details__scrollable::-webkit-scrollbar-track{background:#fff}.details__scrollable::-webkit-scrollbar-thumb{background:#d6dadf;border-radius:10px}.details__collapse{padding:1rem 2rem}.details__block{background:#fff;border-radius:.5rem;padding:1rem;margin:.75rem 0}.details__block--collapsible{padding:0;transition:all .2s ease-in-out}.details__arrow{transition:all .2s ease-in-out;transform:rotate(540deg)}.details__collapse{cursor:pointer;align-items:center;margin-left:-1rem;margin-right:-1rem}.details__link{color:#1586bb;display:flex;padding-left:1rem;padding-right:1rem;width:100%}.details__link:hover{color:#ef5630}.details__icon{margin-right:.5rem;display:block}.details__row{display:flex;justify-content:space-between}.details__row--two-items{display:grid;grid-column-gap:.5rem;column-gap:.5rem;grid-template-columns:1fr 1fr}.details__row--three-items{display:grid;grid-column-gap:.5rem;column-gap:.5rem;grid-template-columns:1fr 1fr 1fr}.details__row--two-items .details__link,.details__row--three-items .details__link{width:auto;display:block;font-size:.875rem;text-align:center;padding-left:0;padding-right:0;word-spacing:30rem}.details__row--two-items .details__icon,.details__row--three-items .details__icon{margin-bottom:.5rem;margin-right:0}.details__description{color:#666c72;background:#f6f7f8;padding:.75rem 1rem;margin:1.5rem 0;border-radius:.5rem;word-break:break-all}.details__error{margin:1.5rem 0}.details__aml{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;transition:all .2s ease-in-out}.details__aml:hover{color:#ef5630}.details__body{display:block;transition:all .2s ease-in-out;padding:0 1rem}.j-collapsed .details__body{padding-bottom:1rem}.j-collapsed .details__collapse .details__arrow{transform:rotate(0)}.employees{width:100%;overflow:hidden;display:flex;flex-direction:column;position:absolute;height:100vh}.employees.extra-padding{padding-top:62px}@media (min-width: 960px){.employees.extra-padding{padding-top:100px}}@media (min-width: 1280px){.employees.extra-padding{padding-top:0}}.employees__header{align-items:center;padding-bottom:1rem}.employees__heading{margin-left:1rem}.employees__close{position:relative}.employees__item{padding:1rem;border-radius:.5rem;margin-bottom:.5rem;background:#fff}.employee__row{font-size:.875rem;margin-top:.25rem}\n"],encapsulation:2,data:{animation:[(0,A.X$)("details",[(0,A.SB)("shown",(0,A.oB)({opacity:"1"})),(0,A.SB)("hidden",(0,A.oB)({opacity:"0"})),(0,A.eR)("shown=>hidden",(0,A.jt)("250ms")),(0,A.eR)("hidden=>shown",(0,A.jt)("250ms"))]),(0,A.X$)("employees",[(0,A.SB)("shown",(0,A.oB)({transform:"scale(1)",right:"0%",opacity:"1"})),(0,A.SB)("hidden",(0,A.oB)({transform:"scale(0.5)",right:"-100%",opacity:"0"})),(0,A.eR)("shown=>hidden",(0,A.jt)("250ms")),(0,A.eR)("hidden=>shown",(0,A.jt)("250ms"))])]}}),P})()},90404:(Pt,X,r)=>{"use strict";r.d(X,{l:()=>F});var a=r(69808),t=r(5e3),N=r(26923),A=r(89854);function e(M,G){if(1&M&&(t.ynx(0),t.TgZ(1,"div",7),t._UZ(2,"j-money",8),t.qZA(),t.TgZ(3,"div",9),t._UZ(4,"j-money",10),t.qZA(),t.BQk()),2&M){const f=t.oxw(2);t.xp6(2),t.Q6J("money",f.group.debitSum)("isDebit",!0)("isCredit",!1),t.xp6(2),t.Q6J("money",f.group.creditSum)("isCredit",!0)("isDebit",!1)}}function b(M,G){if(1&M&&(t.TgZ(0,"div",4)(1,"h5",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,e,5,6,"ng-container",6),t.qZA()),2&M){const f=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,f.title)),t.xp6(2),t.Q6J("ngIf",f.isTotalsShown)}}function _(M,G){if(1&M){const f=t.EpF();t.TgZ(0,"j-transaction",12),t.NdJ("deleted",function(k){return t.CHM(f),t.oxw(2).onDelete(k)})("revoked",function(k){return t.CHM(f),t.oxw(2).onRevoke(k)})("signed",function(k){return t.CHM(f),t.oxw(2).onSign(k)})("sentForSign",function(k){return t.CHM(f),t.oxw(2).onSentForSign(k)})("selected",function(k){t.CHM(f);const $=t.oxw(),i=$.$implicit,Y=$.index;return t.oxw().onSelect(k,i,Y)}),t.qZA()}if(2&M){const f=t.oxw().$implicit,B=t.oxw();t.Q6J("transaction",f)("mode",B.mode)("isSelectable",B.isSelectable)("hasExtraPadding",B.hasExtraPadding)("hasLargeTransactions",B.hasLargeTransactions)}}function h(M,G){if(1&M){const f=t.EpF();t.TgZ(0,"j-transaction",12),t.NdJ("deleted",function(k){return t.CHM(f),t.oxw(2).onDelete(k)})("revoked",function(k){return t.CHM(f),t.oxw(2).onRevoke(k)})("signed",function(k){return t.CHM(f),t.oxw(2).onSign(k)})("sentForSign",function(k){return t.CHM(f),t.oxw(2).onSentForSign(k)})("selected",function(k){t.CHM(f);const $=t.oxw(),i=$.$implicit,Y=$.index;return t.oxw().onSelect(k,i,Y)}),t.qZA()}if(2&M){const f=t.oxw().$implicit,B=t.oxw();t.Q6J("transaction",f)("mode",B.mode)("isSelectable",B.isSelectable)("hasExtraPadding",B.hasExtraPadding)("hasLargeTransactions",B.hasLargeTransactions)}}function l(M,G){if(1&M&&(t.ynx(0),t.YNc(1,_,1,5,"j-transaction",11),t.YNc(2,h,1,5,"j-transaction",11),t.BQk()),2&M){const f=G.index,B=t.oxw();t.xp6(1),t.Q6J("ngIf",0==f&&"PAYMENTS"!=B.mode),t.xp6(1),t.Q6J("ngIf",f>0||"PAYMENTS"==B.mode)}}const E=function(){return{height:"86px","background-color":"#ECEEF1"}};function O(M,G){1&M&&(t.TgZ(0,"div",13),t._UZ(1,"ngx-skeleton-loader",14),t.qZA()),2&M&&(t.xp6(1),t.Q6J("theme",t.DdM(1,E)))}let F=(()=>{class M{constructor(f){this.translateService=f,this.isTotalsShown=!0,this.isSelectable=!1,this.hasExtraPadding=!1,this.isLoadingExtra=!1,this.selected=new t.vpe,this.deleted=new t.vpe,this.signed=new t.vpe,this.sentForSign=new t.vpe,this.exported=new t.vpe,this.revoked=new t.vpe,this.locale="ru",this.selectedTransactions=[],this.locale=this.translateService.currentLang,this.translateService.onLangChange.subscribe(()=>{this.locale=this.translateService.currentLang})}ngAfterViewInit(){}get transactions(){return this.group&&this.group.transactions?this.group.transactions:[]}get title(){return this.group&&this.group.title?this.group.title:this.type==N.I.DAY?this.isToday?this.translateService.instant("FILTER.PERIOD.TODAY"):this.isYesterday?this.translateService.instant("FILTER.PERIOD.YESTERDAY"):this.capitalized(this.convertToDayFormat(this.date)):this.type==N.I.MONTH?this.capitalized(this.isCurrentYear?this.convertToMonth(this.date):this.convertToMonthYear(this.date)):null}onSelect(f,B,k){f?this.selectedTransactions.push(B):this.selectedTransactions.splice(k,1),this.selected.emit(this.selectedTransactions)}onDelete(f){this.deleted.emit(f)}onRevoke(f){this.revoked.emit(f)}onSign(f){this.signed.emit(f)}onSentForSign(f){this.sentForSign.emit(f)}get date(){return new Date(this.group.groupDate)}get isToday(){const f=new Date;return this.convertToDayFormat(this.date)==this.convertToDayFormat(f)}get isYesterday(){const f=new Date,B=new Date(f.setDate(f.getDate()-1));return this.convertToDayFormat(this.date)==this.convertToDayFormat(B)}get isCurrentYear(){const f=new Date;return this.date.getFullYear()==f.getFullYear()}convertToDayFormat(f){return(0,a.p6)(f,"d MMMM yyyy",this.locale)}convertToMonth(f){return(0,a.p6)(f,"LLLL",this.locale)}convertToMonthYear(f){return(0,a.p6)(f,"LLLL y",this.locale)}capitalized(f){return`${f[0].toUpperCase()}${f.substr(1).toLowerCase()}`}}return M.\u0275fac=function(f){return new(f||M)(t.Y36(A.sK))},M.\u0275cmp=t.Xpm({type:M,selectors:[["j-transaction-group"]],inputs:{mode:"mode",group:"group",type:"type",hasLargeTransactions:"hasLargeTransactions",isTotalsShown:"isTotalsShown",isSelectable:"isSelectable",hasExtraPadding:"hasExtraPadding",isLoadingExtra:"isLoadingExtra"},outputs:{selected:"selected",deleted:"deleted",signed:"signed",sentForSign:"sentForSign",exported:"exported",revoked:"revoked"},decls:4,vars:3,consts:[["class","transaction-group__header",4,"ngIf"],[1,"transaction-group__list"],[4,"ngFor","ngForOf"],["class","py-2",4,"ngIf"],[1,"transaction-group__header"],[1,"transaction-group__title"],[4,"ngIf"],[1,"d-none","d-md-block","p3","transaction-group__sum","mr-3"],["showSign","true",3,"money","isDebit","isCredit"],[1,"d-none","d-md-block","p3","transaction-group__sum","text-success"],["showSign","true",3,"money","isCredit","isDebit"],[3,"transaction","mode","isSelectable","hasExtraPadding","hasLargeTransactions","deleted","revoked","signed","sentForSign","selected",4,"ngIf"],[3,"transaction","mode","isSelectable","hasExtraPadding","hasLargeTransactions","deleted","revoked","signed","sentForSign","selected"],[1,"py-2"],[3,"theme"]],template:function(f,B){1&f&&(t.YNc(0,b,5,4,"div",0),t.TgZ(1,"div",1),t.YNc(2,l,3,2,"ng-container",2),t.YNc(3,O,2,2,"div",3),t.qZA()),2&f&&(t.Q6J("ngIf",(null==B.group||null==B.group.transactions?null:B.group.transactions.length)>0),t.xp6(2),t.Q6J("ngForOf",B.transactions),t.xp6(1),t.Q6J("ngIf",B.isLoadingExtra))},styles:[".transaction-group__header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 0;margin-bottom:.5rem}.transaction-group__title[_ngcontent-%COMP%]{margin-right:auto;margin-bottom:0}.transaction-group__loading[_ngcontent-%COMP%]{padding:2rem 0}"]}),M})()},15996:(Pt,X,r)=>{"use strict";r.d(X,{l:()=>A});var a=r(26923),t=r(7102),N=r(5e3);let A=(()=>{class e{constructor(){this.isStatement=!1}ngOnInit(){this.generateImgPath()}generateImgPath(){this.transaction.isPayment?this.imgPath=this.getPaymentImg(this.transaction.paymentType):(this.isStatement=!0,this.imgPath=this.getStatementImg(this.transaction.type))}getPaymentImg(_){const h="/assets/img/history/payment";switch(_){case t.V_.TAX:return`${h}/taxes.svg`;case t.V_.PENSION:return`${h}/pension.svg`;case t.V_.SOCIAL:return`${h}/social.svg`;case t.V_.MEDICAL:return`${h}/medical.svg`;case t.V_.SALARY:return`${h}/salary.svg`;case t.V_.FOREIGN:return`${h}/foreign.svg`;case t.V_.CONVERSION:return`${h}/conversion.svg`;default:return`${h}/regular.svg`}}getStatementImg(_){const h="/assets/img/history/statement";switch(_){case a.k$.CREDIT:return`${h}/credit.svg`;case a.k$.DEBIT:return`${h}/debit.svg`;default:return`${h}/return.svg`}}}return e.\u0275fac=function(_){return new(_||e)},e.\u0275cmp=N.Xpm({type:e,selectors:[["j-transaction-type"]],inputs:{transaction:"transaction",isInversed:"isInversed"},decls:2,vars:5,consts:[[1,"transaction__type"],["alt","type",3,"src"]],template:function(_,h){1&_&&(N.TgZ(0,"div",0),N._UZ(1,"img",1),N.qZA()),2&_&&(N.ekj("transaction__type--inversed",h.isInversed)("transaction__type--statement",h.isStatement),N.xp6(1),N.Q6J("src",h.imgPath,N.LSH))},styles:["@media (min-width: 960px){.transaction__type[_ngcontent-%COMP%]{margin-right:.5rem}}@media (min-width: 1280px){.transaction__type[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f6f7f8;width:40px;height:40px;border-radius:.75rem}}.transaction__type--inversed[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f6f7f8;width:40px;height:40px;border-radius:.75rem;background:#fff}@media (min-width: 1280px){.transaction__type--statement[_ngcontent-%COMP%]{align-items:flex-start;justify-content:flex-end;position:relative}}@media (min-width: 1280px){.transaction__type--statement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:2px;top:2px}}"]}),e})()},60207:(Pt,X,r)=>{"use strict";r.d(X,{A:()=>Et});var a=r(70655),t=r(5e3),N=r(69808),A=r(42654),e=r(21086),b=r(92198),_=r(72986),h=r(27221),l=r(8491),E=r(7102),O=r(26923),F=r(9010),M=r(78232),G=r(26164),f=r(17687),B=r(19208);const k=["signersTooltipTemplate"],$=["title"],i=["description"];function Y(J,mt){if(1&J&&t.GkF(0,16),2&J){t.oxw(2);const I=t.MAs(3);t.Q6J("ngTemplateOutlet",I)}}function S(J,mt){if(1&J&&t.GkF(0,16),2&J){t.oxw(2);const I=t.MAs(13);t.Q6J("ngTemplateOutlet",I)}}function U(J,mt){if(1&J){const I=t.EpF();t.TgZ(0,"section",12),t.NdJ("click",function(){return t.CHM(I),t.oxw().onClick()}),t.YNc(1,Y,1,1,"ng-container",13),t.TgZ(2,"section",14)(3,"section",15),t.GkF(4,16),t.qZA(),t.TgZ(5,"div",17),t.GkF(6,16),t.YNc(7,S,1,1,"ng-container",13),t.qZA()()()}if(2&J){const I=t.oxw(),Z=t.MAs(5),et=t.MAs(11);t.ekj("transaction--statement",!I.transaction.isPayment)("transaction--loading",I.transaction.isLoading)("transaction--selected",I.transaction.isSelected)("transaction--large-amounts",I.hasLargeTransactions),t.xp6(1),t.Q6J("ngIf",I.isSelectable),t.xp6(3),t.Q6J("ngTemplateOutlet",Z),t.xp6(2),t.Q6J("ngTemplateOutlet",et),t.xp6(1),t.Q6J("ngIf",I.transaction.isPayment&&I.actions)}}function x(J,mt){if(1&J){const I=t.EpF();t.TgZ(0,"section",18)(1,"div",19),t.NdJ("click",function(){return t.CHM(I),t.oxw().hideDetails()}),t.qZA(),t.TgZ(2,"section",20)(3,"j-transaction-details",21),t.NdJ("edited",function(et){return t.CHM(I),t.oxw().editPayment(null,et)})("repeated",function(et){return t.CHM(I),t.oxw().repeatPayment(null,et)})("exported",function(et){return t.CHM(I),t.oxw().exportPayment(null,et)})("downloaded",function(et){return t.CHM(I),t.oxw().downloadIncomingPayment(null,et)})("deleted",function(et){return t.CHM(I),t.oxw().deletePayment(null,et)})("revoked",function(et){return t.CHM(I),t.oxw().revokePayment(null,et)})("signed",function(et){return t.CHM(I),t.oxw().signPayment(null,et)})("sentForSign",function(et){return t.CHM(I),t.oxw().sendForSign(null,et)})("closed",function(){return t.CHM(I),t.oxw().hideDetails()}),t.qZA()()()}if(2&J){const I=t.oxw();t.Q6J("ngClass",I.wrapperClasses),t.xp6(2),t.Q6J("ngClass",I.detailsClasses),t.xp6(1),t.Q6J("transaction",I.transaction)("mode",I.mode)("signers",I.signers)("hasExtraPadding",I.hasExtraPadding)}}function ot(J,mt){if(1&J){const I=t.EpF();t.TgZ(0,"div",22),t.NdJ("click",function(et){return et.stopPropagation()}),t.ALo(1,"translate"),t.TgZ(2,"input",23),t.NdJ("ngModelChange",function(et){return t.CHM(I),t.oxw().transaction.isSelected=et})("change",function(){return t.CHM(I),t.oxw().onSelect()})("click",function(et){return et.stopPropagation()}),t.qZA(),t._UZ(3,"label",24),t.qZA()}if(2&J){const I=t.oxw();t.Q6J("ngbTooltip",t.lcZ(1,4,"STATEMENT.TRANSACTION.SELECT")),t.xp6(2),t.Q6J("ngModel",I.transaction.isSelected)("id",I.id),t.xp6(1),t.Q6J("for",I.id)}}function vt(J,mt){if(1&J&&t._UZ(0,"j-transaction-type",32),2&J){const I=t.oxw(2);t.Q6J("transaction",I.transaction)}}function At(J,mt){if(1&J&&t.GkF(0,16),2&J){t.oxw(2);const I=t.MAs(7);t.Q6J("ngTemplateOutlet",I)}}function Zt(J,mt){1&J&&t._UZ(0,"span",33)}function kt(J,mt){if(1&J&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&J){const I=t.oxw(2);t.xp6(1),t.hij(" \u2116 ",I.transaction.documentNumber," ")}}function Yt(J,mt){if(1&J&&t.GkF(0,16),2&J){t.oxw(2);const I=t.MAs(9);t.Q6J("ngTemplateOutlet",I)}}function H(J,mt){if(1&J&&(t.YNc(0,vt,1,1,"j-transaction-type",25),t.YNc(1,At,1,1,"ng-container",13),t.TgZ(2,"div",26),t.YNc(3,Zt,1,0,"span",27),t.YNc(4,kt,2,1,"span",28),t.qZA(),t.TgZ(5,"div",29),t._uU(6),t.ALo(7,"async"),t.qZA(),t.YNc(8,Yt,1,1,"ng-container",13),t.TgZ(9,"h5",30),t._UZ(10,"j-money",31),t.qZA()),2&J){const I=t.oxw();t.Q6J("ngIf",!I.transaction.isPayment),t.xp6(1),t.Q6J("ngIf",I.transaction.isPayment&&I.transaction.paymentStatus),t.xp6(2),t.Q6J("ngIf",I.transaction.category==I.TRANSACTION_CATEGORY.REFUND),t.xp6(1),t.Q6J("ngIf",I.transaction.category!=I.TRANSACTION_CATEGORY.REFUND),t.xp6(2),t.hij(" ",t.lcZ(7,9,I.transaction.dateStatusText)," "),t.xp6(2),t.Q6J("ngIf",I.transaction.isPayment&&I.transaction.paymentStatus),t.xp6(2),t.Q6J("money",I.transaction.balance)("isCredit",!I.transaction.isDebit)("isDebit",I.transaction.isDebit)}}function at(J,mt){if(1&J&&(t.ynx(0),t._UZ(1,"div",36),t.BQk()),2&J){const I=t.oxw(2),Z=t.MAs(21);t.xp6(1),t.Tol(null==I.paymentStatus?null:I.paymentStatus.classList),t.Q6J("ngbTooltip",Z)("inlineSVG","/assets/icons/transaction/status.svg")}}function yt(J,mt){if(1&J&&(t.ynx(0),t._UZ(1,"div",37),t.BQk()),2&J){const I=t.oxw(2);t.xp6(1),t.Tol(null==I.paymentStatus?null:I.paymentStatus.classList),t.Q6J("inlineSVG","/assets/icons/transaction/status.svg")}}function rt(J,mt){if(1&J&&(t.YNc(0,at,2,4,"ng-container",35),t.YNc(1,yt,2,3,"ng-container",35)),2&J){const I=t.oxw();t.Q6J("ngIf",I.statusHistory),t.xp6(1),t.Q6J("ngIf",!I.statusHistory)}}function ht(J,mt){if(1&J&&(t.ynx(0),t.TgZ(1,"div",38),t._uU(2),t.qZA(),t.BQk()),2&J){const I=t.oxw(2),Z=t.MAs(21);t.xp6(1),t.Tol(null==I.paymentStatus?null:I.paymentStatus.classList),t.Q6J("ngbTooltip",Z),t.xp6(1),t.hij(" ",null==I.paymentStatus?null:I.paymentStatus.label," ")}}function _t(J,mt){if(1&J&&(t.ynx(0),t.TgZ(1,"div",39),t._uU(2),t.qZA(),t.BQk()),2&J){const I=t.oxw(2);t.xp6(1),t.Tol(null==I.paymentStatus?null:I.paymentStatus.classList),t.xp6(1),t.hij(" ",null==I.paymentStatus?null:I.paymentStatus.label," ")}}function Nt(J,mt){if(1&J&&(t.YNc(0,ht,3,4,"ng-container",35),t.YNc(1,_t,3,3,"ng-container",35)),2&J){const I=t.oxw();t.Q6J("ngIf",I.statusHistory),t.xp6(1),t.Q6J("ngIf",!I.statusHistory)}}function nt(J,mt){if(1&J&&(t._UZ(0,"div",44),t.ALo(1,"translate")),2&J){const I=t.oxw(2);t.Tol(null==I.paymentStatus?null:I.paymentStatus.classList),t.Q6J("jClamp",2)("innerText",t.xi3(1,4,I.transaction.paymentMessage,I.transaction.paymentMessageTranslateParams))}}function Bt(J,mt){if(1&J&&(t.TgZ(0,"article",40),t._UZ(1,"div",41)(2,"div",42),t.YNc(3,nt,2,7,"div",43),t.qZA()),2&J){const I=t.oxw();t.xp6(1),t.Q6J("jClamp",1)("innerText",I.title),t.xp6(1),t.Q6J("jClamp",2)("innerText",I.description),t.xp6(1),t.Q6J("ngIf","BANK_COMPLETED"!=(null==I.transaction.paymentStatus?null:I.transaction.paymentStatus.code))}}function Lt(J,mt){if(1&J&&(t.TgZ(0,"div",45),t.GkF(1,16),t.qZA()),2&J){t.oxw();const I=t.MAs(15);t.xp6(1),t.Q6J("ngTemplateOutlet",I)}}const bt=function(J){return{$implicit:J}};function $t(J,mt){if(1&J&&t.GkF(0,49),2&J){const I=mt.$implicit;t.oxw(2);const Z=t.MAs(17);t.Q6J("ngTemplateOutlet",Z)("ngTemplateOutletContext",t.VKq(2,bt,I))}}function an(J,mt){if(1&J){const I=t.EpF();t.TgZ(0,"a",50),t.NdJ("click",function(et){return t.CHM(I),t.oxw(2).signPayment(et)}),t.qZA()}if(2&J){t.oxw(2);const I=t.MAs(19);t.Q6J("ngbTooltip",I)("inlineSVG","/assets/icons/transaction/sign.svg")}}function Vt(J,mt){if(1&J&&(t.TgZ(0,"span",51),t._uU(1),t.qZA()),2&J){const I=t.oxw(2),Z=t.MAs(19);t.Q6J("ngbTooltip",Z),t.xp6(1),t.hij(" ",I.transaction.signsCountText," ")}}function An(J,mt){if(1&J&&(t.YNc(0,$t,1,4,"ng-container",46),t.YNc(1,an,1,2,"a",47),t.YNc(2,Vt,2,2,"span",48)),2&J){const I=t.oxw();t.Q6J("ngForOf",I.actions),t.xp6(1),t.Q6J("ngIf",I.transaction.isSignable),t.xp6(1),t.Q6J("ngIf",I.transaction.isSignableByOthers)}}function Wt(J,mt){if(1&J){const I=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(et){return t.CHM(I),t.oxw().$implicit.clickHandler(et)}),t.ALo(2,"translate"),t.qZA(),t.BQk()}if(2&J){const I=t.oxw().$implicit;t.xp6(1),t.Tol(I.extraClasses),t.Q6J("ngbTooltip",I.tooltipTemplate?I.tooltipTemplate:t.lcZ(2,4,I.tooltip))("inlineSVG",I.icon)}}function hn(J,mt){1&J&&t.YNc(0,Wt,3,6,"ng-container",35),2&J&&t.Q6J("ngIf",mt.$implicit.isShown)}function Ht(J,mt){if(1&J&&(t.TgZ(0,"div",54)(1,"span",55),t._uU(2),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"span",56),t._uU(5),t.qZA()()),2&J){const I=mt.$implicit;t.xp6(2),t.Oqu(I.name),t.xp6(2),t.Tol(I.classList),t.xp6(1),t.Oqu(I.label)}}function nn(J,mt){if(1&J&&t.YNc(0,Ht,6,4,"div",53),2&J){const I=t.oxw();t.Q6J("ngForOf",I.signers)}}function pn(J,mt){if(1&J&&(t.TgZ(0,"div",63)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"span",64),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&J){const I=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.xi3(3,2,I.time,"dd.MM.yy")," "),t.xp6(3),t.hij(" ",t.xi3(6,5,I.time,"HH:mm")," ")}}function V(J,mt){if(1&J&&(t.TgZ(0,"li",59),t._UZ(1,"span",60),t.TgZ(2,"div",61),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,pn,7,8,"div",62),t.qZA()),2&J){const I=mt.$implicit;t.xp6(1),t.Tol(I.iconClassList),t.Q6J("inlineSVG","/assets/icons/transaction/status.svg"),t.xp6(1),t.Tol(I.labelClassList),t.xp6(1),t.Oqu(t.lcZ(4,7,I.label)),t.xp6(2),t.Q6J("ngIf",I.time)}}function dt(J,mt){if(1&J&&(t.TgZ(0,"ul",57),t.YNc(1,V,6,9,"li",58),t.qZA()),2&J){const I=t.oxw();t.xp6(1),t.Q6J("ngForOf",I.statusHistory)}}let Et=(()=>{class J{constructor(I,Z,et,L,gt,It){this.dictionariesService=I,this.statementService=Z,this.companyService=et,this.filesService=L,this.maskIbanPipe=gt,this.document=It,this.id=(0,l.generateUniqueId)(),this.TRANSACTION_CATEGORY=O.FD,this.hasExtraPadding=!1,this.hasLargeTransactions=!1,this.isSelectable=!1,this.deleted=new t.vpe,this.selected=new t.vpe,this.signed=new t.vpe,this.sentForSign=new t.vpe,this.exported=new t.vpe,this.downloaded=new t.vpe,this.revoked=new t.vpe,this.signers=[],this.PAYMENT_STATUS=E.R$,this.isDetailsShown=!1,this.isAnimating=!1,this.isEditable=!1,this.isSignable=!1,this.isSignableByOthers=!1,this.wrapperClasses="",this.detailsClasses="",this.subscription=new A.w}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden"),this.subscription.unsubscribe()}ngOnInit(){this.paymentStatus=this.statementService.generatePaymentStatusLabel(this.transaction);const I=this.dictionariesService.KNPDictionary.items$.pipe((0,b.h)(et=>et.length>0),(0,_.q)(1)).subscribe(et=>{this.transaction.knp=et.find(L=>{var gt,It;return(null==L?void 0:L.code)===(null===(It=null===(gt=this.transaction)||void 0===gt?void 0:gt.knp)||void 0===It?void 0:It.code)})}),Z=this.companyService.getAuthorizedPersons().pipe((0,h.K)((et,L)=>(0,e.of)([]))).subscribe(et=>{this.authorizedPersons=et,this.generateSignersList()});this.subscription.add(Z),this.subscription.add(I),this.mapPaymentActions(),this.mapTransactionContent()}onClick(){this.showDetails()}onSelect(){this.selected.emit(this.transaction.isSelected)}repeatPayment(I=null,Z=this.transaction){I&&(I.preventDefault(),I.stopPropagation()),this.statementService.repeatPayment(Z)}editPayment(I=null,Z=this.transaction){I&&(I.preventDefault(),I.stopPropagation()),this.statementService.editPayment(Z)}exportPayment(I=null,Z=this.transaction){return(0,a.mG)(this,void 0,void 0,function*(){I&&(I.preventDefault(),I.stopPropagation()),this.exported.emit(Z);const et=yield this.statementService.exportTransaction(Z);this.filesService.downloadFile(et,`\u2116${Z.documentNumber}.pdf`)})}downloadIncomingPayment(I=null,Z=this.transaction){return(0,a.mG)(this,void 0,void 0,function*(){I&&(I.preventDefault(),I.stopPropagation()),this.downloaded.emit(Z);const et=yield this.statementService.exportIncomingPayment(Z);this.filesService.downloadFile(et,`\u2116${Z.documentNumber}.pdf`)})}deletePayment(I=null,Z=this.transaction){null==I||I.preventDefault(),null==I||I.stopPropagation(),this.hideDetails(),this.deleted.emit(Z)}signPayment(I=null,Z=this.transaction){null==I||I.preventDefault(),null==I||I.stopPropagation(),this.signed.emit(Z),this.hideDetails()}sendForSign(I=null,Z=this.transaction){null==I||I.preventDefault(),null==I||I.stopPropagation(),this.sentForSign.emit(Z),this.hideDetails()}revokePayment(I=null,Z=this.transaction){null==I||I.preventDefault(),this.revoked.emit(Z),this.hideDetails()}showDetails(){this.isAnimating||(this.isAnimating=!0,this.isDetailsShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.detailsClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideDetails(){this.isAnimating||(this.isAnimating=!0,this.detailsClasses="",this.wrapperClasses="animate__animated zoomOutJ",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden")},250),setTimeout(()=>{this.wrapperClasses="",this.isDetailsShown=!1,this.isAnimating=!1},300))}generateSignersList(){var I;this.signers=this.companyService.generateSignersList(null===(I=this.transaction.paymentStatus)||void 0===I?void 0:I.code,this.transaction.signatureScheme,this.transaction.signatures)}loadStatusHistory(){return(0,a.mG)(this,void 0,void 0,function*(){if(!this.transaction.isPayment||!this.transaction.paymentId)return;const I=yield this.statementService.getStatusHistory(this.transaction);if(!I||0===I.length)return;const Z=I[I.length-1].status;this.statusHistory=I.map(L=>{let gt,It;switch(L.status){case E.R$.BANK_COMPLETED:gt="text-success",It="text-success";break;case E.R$.TRANSFER_ROLLBACK:case E.R$.REJECTED:gt="text-danger",It="text-danger";break;case E.R$.BANK_PROCESSING:gt=Z===E.R$.BANK_PROCESSING?"text-warning":"",It=Z===E.R$.BANK_PROCESSING?"text-warning":"text-success";break;default:gt="",It="text-success"}return{time:L.time,label:`HISTORY.STATUS_HISTORY.${L.status}`,iconClassList:It,labelClassList:gt}});const et=Z===E.R$.REJECTED||Z===E.R$.BANK_COMPLETED||Z===E.R$.TRANSFER_ROLLBACK;if(Z===E.R$.CREATED&&this.statusHistory.push({label:`HISTORY.STATUS_HISTORY.${E.R$.READY_TO_SEND}`,iconClassList:"text-muted",labelClassList:"text-muted"}),!et)switch(this.transaction.paymentStatus.code){case E.R$.READY_TO_SEND:this.statusHistory.push({label:"HISTORY.STATUS_HISTORY.READY_TO_SEND_FROM_BANK",iconClassList:"text-warning",labelClassList:"text-warning"}),this.statusHistory.push({label:`HISTORY.STATUS_HISTORY.${E.R$.BANK_COMPLETED}`,iconClassList:"text-muted",labelClassList:"text-muted"});break;case E.R$.REJECTED:case E.R$.TRANSFER_ROLLBACK:this.statusHistory.push({label:`HISTORY.STATUS_HISTORY.${this.transaction.paymentStatus.code}`,iconClassList:"text-danger",labelClassList:"text-danger"});break;case E.R$.BANK_COMPLETED:this.statusHistory.push({label:`HISTORY.STATUS_HISTORY.${this.transaction.paymentStatus.code}`,iconClassList:"text-success",labelClassList:"text-success"});break;default:this.statusHistory.push({label:`HISTORY.STATUS_HISTORY.${E.R$.BANK_COMPLETED}`,iconClassList:"text-muted",labelClassList:"text-muted"})}})}mapTransactionContent(){var I,Z;this.title=this.statementService.getTransactionTitle(this.transaction,{name:(null===(Z=null===(I=this.transaction)||void 0===I?void 0:I.associatedField)||void 0===Z?void 0:Z.depositName)||""}),this.description=this.statementService.mapTransactionDescription(this.transaction,{from:this.maskIbanPipe.transform(this.transaction.iban),to:this.maskIbanPipe.transform(this.transaction.correspondentAccount)})}mapPaymentActions(){const I="STATEMENT.TRANSACTION",Z="/assets/icons/transaction";this.actions=[{isShown:this.transaction.isRemovable,tooltip:`${I}.DELETE`,icon:`${Z}/delete.svg`,clickHandler:this.deletePayment.bind(this)},{isShown:this.transaction.isRevokable,tooltip:`${I}.REVOKE`,icon:`${Z}/revoke.svg`,clickHandler:this.revokePayment.bind(this)},{isShown:this.transaction.isExportable,tooltip:`${I}.DOWNLOAD`,icon:`${Z}/pdf.svg`,clickHandler:this.exportPayment.bind(this)},{isShown:this.transaction.isEditable,tooltip:`${I}.EDIT`,icon:`${Z}/edit.svg`,clickHandler:this.editPayment.bind(this)},{isShown:this.transaction.isRepeatable,tooltip:`${I}.REPEAT`,icon:`${Z}/repeat.svg`,clickHandler:this.repeatPayment.bind(this)},{isShown:!this.transaction.isSignable&&this.transaction.isSendableForSign,tooltip:`${I}.SEND_FOR_SIGN`,icon:`${Z}/for-sign.svg`,extraClasses:"transaction__action--sign",clickHandler:this.sendForSign.bind(this)}]}}return J.\u0275fac=function(I){return new(I||J)(t.Y36(F.$),t.Y36(M.A),t.Y36(G.J),t.Y36(f.n),t.Y36(B.uh),t.Y36(N.K0))},J.\u0275cmp=t.Xpm({type:J,selectors:[["j-transaction"]],contentQueries:function(I,Z,et){if(1&I&&t.Suo(et,k,5,t.Rgc),2&I){let L;t.iGM(L=t.CRH())&&(Z.signersTooltipTemplate=L.first)}},viewQuery:function(I,Z){if(1&I&&(t.Gf($,5),t.Gf(i,5)),2&I){let et;t.iGM(et=t.CRH())&&(Z.titleRef=et.first),t.iGM(et=t.CRH())&&(Z.descriptionRef=et.first)}},inputs:{mode:"mode",depositName:"depositName",transaction:"transaction",hasExtraPadding:"hasExtraPadding",hasLargeTransactions:"hasLargeTransactions",isSelectable:"isSelectable"},outputs:{deleted:"deleted",selected:"selected",signed:"signed",sentForSign:"sentForSign",exported:"exported",downloaded:"downloaded",revoked:"revoked"},decls:22,vars:2,consts:[["class","transaction",3,"transaction--statement","transaction--loading","transaction--selected","transaction--large-amounts","click",4,"ngIf"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],["checkboxTemplate",""],["headerTemplate",""],["paymentStatusIcon",""],["paymentStatusLabel",""],["contentTemplate",""],["actionsTemplate",""],["actionsContentTemplate",""],["actionTemplate",""],["signersTooltipTemplate",""],["statusHistoryTemplate",""],[1,"transaction",3,"click"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"transaction__content"],[1,"transaction__header"],[3,"ngTemplateOutlet"],[1,"transaction__body"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","transaction__details",3,"ngClass"],[3,"transaction","mode","signers","hasExtraPadding","edited","repeated","exported","downloaded","deleted","revoked","signed","sentForSign","closed"],["tooltipClass","tooltip-light",1,"custom-control","custom-checkbox","mr-1","transaction__select",3,"ngbTooltip","click"],["type","checkbox",1,"custom-control-input",3,"ngModel","id","ngModelChange","change","click"],[1,"custom-control-label",3,"for"],["class","transaction__img",3,"transaction",4,"ngIf"],[1,"p3","transaction__number"],["class","text-danger","translate","STATEMENT.TRANSACTION.REFUND",4,"ngIf"],["class","text-disabled",4,"ngIf"],[1,"p3","text-muted","transaction__date"],[1,"p1","transaction__amount"],["showSign","true",3,"money","isCredit","isDebit"],[1,"transaction__img",3,"transaction"],["translate","STATEMENT.TRANSACTION.REFUND",1,"text-danger"],[1,"text-disabled"],[4,"ngIf"],["container","body","tooltipClass","tooltip-light",1,"transaction__status-icon",3,"ngbTooltip","inlineSVG"],[1,"transaction__status-icon",3,"inlineSVG"],["container","body","tooltipClass","tooltip-light","translate","",1,"p3","transaction__status",3,"ngbTooltip"],["translate","",1,"p3","transaction__status"],[1,"transaction__info"],[1,"p1","transaction__title",3,"jClamp","innerText"],[1,"text-muted","text-small","transaction__description",3,"jClamp","innerText"],["class","text-small transaction__error",3,"class","jClamp","innerText",4,"ngIf"],[1,"text-small","transaction__error",3,"jClamp","innerText"],[1,"transaction__actions"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["href","#","class","transaction__action transaction__action--sign","tooltipClass","tooltip-light","container","body",3,"ngbTooltip","inlineSVG","click",4,"ngIf"],["class","transaction__action","tooltipClass","tooltip-light",3,"ngbTooltip",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["href","#","tooltipClass","tooltip-light","container","body",1,"transaction__action","transaction__action--sign",3,"ngbTooltip","inlineSVG","click"],["tooltipClass","tooltip-light",1,"transaction__action",3,"ngbTooltip"],["href","#","container","body","tooltipClass","tooltip-light",1,"transaction__action",3,"ngbTooltip","inlineSVG","click"],["class","signer",4,"ngFor","ngForOf"],[1,"signer"],[1,"text-dark"],["translate",""],[1,"status-history"],["class","status-history__item p4",4,"ngFor","ngForOf"],[1,"status-history__item","p4"],[1,"status-history__icon",3,"inlineSVG"],[1,"status-history__status"],["class","status-history__date",4,"ngIf"],[1,"status-history__date"],[1,"text-muted"]],template:function(I,Z){1&I&&(t.YNc(0,U,8,12,"section",0),t.YNc(1,x,4,6,"section",1),t.YNc(2,ot,4,6,"ng-template",null,2,t.W1O),t.YNc(4,H,11,11,"ng-template",null,3,t.W1O),t.YNc(6,rt,2,2,"ng-template",null,4,t.W1O),t.YNc(8,Nt,2,2,"ng-template",null,5,t.W1O),t.YNc(10,Bt,4,5,"ng-template",null,6,t.W1O),t.YNc(12,Lt,2,1,"ng-template",null,7,t.W1O),t.YNc(14,An,3,3,"ng-template",null,8,t.W1O),t.YNc(16,hn,1,1,"ng-template",null,9,t.W1O),t.YNc(18,nn,1,1,"ng-template",null,10,t.W1O),t.YNc(20,dt,2,1,"ng-template",null,11,t.W1O)),2&I&&(t.Q6J("ngIf",Z.transaction),t.xp6(1),t.Q6J("ngIf",Z.isDetailsShown&&Z.transaction))},styles:['.transaction[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:2rem;position:relative;transition:all .2s ease-in-out;-webkit-user-select:none;user-select:none;cursor:pointer}.transaction[_ngcontent-%COMP%]:hover:before{opacity:1}.transaction[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;left:-.75rem;right:-.75rem;top:-1rem;bottom:-1rem;z-index:0;box-shadow:0 0 1px #0000000a,0 2px 6px #0000000a,0 10px 20px #0000000a;border-radius:.75rem;opacity:0;transition:all .2s ease-in-out}@media (min-width: 1280px){.transaction[_ngcontent-%COMP%]:before{left:-1rem;right:-1rem}}.transaction--large-amounts[_ngcontent-%COMP%]   .transaction__amount[_ngcontent-%COMP%]{font-size:.875rem}@media (min-width: 1280px){.transaction--large-amounts[_ngcontent-%COMP%]   .transaction__amount[_ngcontent-%COMP%]{font-size:1rem}}@media (min-width: 1920px){.transaction--large-amounts[_ngcontent-%COMP%]   .transaction__amount[_ngcontent-%COMP%]{font-size:1rem}}.transaction--selected[_ngcontent-%COMP%]:before{opacity:1;background:#f5f9fd;border-radius:0;box-shadow:none;left:-1.5rem;right:-1.5rem}@media (min-width: 1280px){.transaction--selected[_ngcontent-%COMP%]:before{left:-1.5rem;right:-1.5rem}}@media (min-width: 1280px){.transaction--statement[_ngcontent-%COMP%]   .transaction__header[_ngcontent-%COMP%]{grid-template-columns:40px auto;grid-template-rows:minmax(0,auto) minmax(0,auto) minmax(0,auto);column-gap:1.5rem}}@media (min-width: 1280px){.transaction--statement[_ngcontent-%COMP%]   .transaction__number[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:3;grid-row-end:4}}.transaction__header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}@media (min-width: 1280px){.transaction__header[_ngcontent-%COMP%]{margin-bottom:0;align-self:start;position:relative;display:grid;grid-template-columns:125px auto;grid-template-rows:minmax(0,auto) minmax(0,auto);grid-column-gap:.25rem;column-gap:.25rem}}@media (min-width: 1280px){.transaction__header[_ngcontent-%COMP%]{column-gap:.5rem}}.transaction__img[_ngcontent-%COMP%]{margin-right:.25rem}@media (min-width: 1280px){.transaction__img[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;grid-row-start:1;grid-row-end:3;align-self:center;margin-right:0}}.transaction__img--hidden-sm[_ngcontent-%COMP%]{display:none}@media (min-width: 1280px){.transaction__img--hidden-sm[_ngcontent-%COMP%]{display:block}}.transaction__select[_ngcontent-%COMP%]{z-index:1;align-self:flex-start;margin-top:8px;position:relative}.transaction__date[_ngcontent-%COMP%]{line-height:1.3}@media (min-width: 1280px){.transaction__date[_ngcontent-%COMP%]{align-self:baseline;grid-column-start:2;grid-column-end:3;grid-row-start:2;grid-row-end:3}}.transaction__amount[_ngcontent-%COMP%]{margin-bottom:0;margin-left:auto}@media (min-width: 1280px){.transaction__amount[_ngcontent-%COMP%]{margin-left:unset;align-items:baseline;align-self:baseline;grid-column-start:2;grid-column-end:3;grid-row-start:1;grid-row-end:2;line-height:27px;margin-bottom:.15rem}}.transaction__number[_ngcontent-%COMP%]{display:none}@media (min-width: 670px){.transaction__number[_ngcontent-%COMP%]{margin-right:.5rem;white-space:nowrap;display:block}}@media (min-width: 1280px){.transaction__number[_ngcontent-%COMP%]{margin-right:0}}.transaction__title[_ngcontent-%COMP%]{max-width:100%;margin-bottom:.25rem}.transaction__description[_ngcontent-%COMP%]{max-width:100%;line-height:20px;word-break:break-all}.transaction__error[_ngcontent-%COMP%]{max-width:100%;margin-top:.25rem;line-height:18px}.transaction__details[_ngcontent-%COMP%]{overflow:hidden;right:0;--animate-duration: .25s}@media (min-width: 1280px){.transaction__details[_ngcontent-%COMP%]{width:50%;max-width:450px}}.transaction__body[_ngcontent-%COMP%]{display:grid}@media (min-width: 1280px){.transaction__body[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr) 128px}}.transaction__content[_ngcontent-%COMP%]{flex-grow:1;z-index:1;position:relative}@media (min-width: 1280px){.transaction__content[_ngcontent-%COMP%]{display:grid;grid-column-gap:1rem;column-gap:1rem;grid-template-columns:minmax(0,4fr) minmax(0,8fr)}}.transaction__prefix[_ngcontent-%COMP%]{flex-shrink:0}.transaction__info[_ngcontent-%COMP%]{flex-grow:1;margin-right:1rem}.transaction__actions[_ngcontent-%COMP%]{display:none}@media (min-width: 1280px){.transaction__actions[_ngcontent-%COMP%]{display:flex;margin-left:auto;align-self:baseline}}.transaction__action[_ngcontent-%COMP%]{display:block;margin-left:.5rem;color:#b7bec5}.transaction__action[_ngcontent-%COMP%]:hover{color:#ef5630}.transaction__action--sign[_ngcontent-%COMP%]{color:#1586bb}.transaction__status[_ngcontent-%COMP%]{display:none}@media (min-width: 1280px){.transaction__status[_ngcontent-%COMP%]{display:block;align-self:baseline}}.transaction__status-icon[_ngcontent-%COMP%]{margin-right:.5rem}@media (min-width: 1280px){.transaction__status-icon[_ngcontent-%COMP%]{display:none}}.signer[_ngcontent-%COMP%]{text-align:left;white-space:nowrap}.status-history[_ngcontent-%COMP%]{display:flex;list-style:none;padding:0;margin:0;position:relative}.status-history[_ngcontent-%COMP%]:before{content:"";position:absolute;top:9px;left:40px;right:40px;height:1px;background:#b7bec5;display:block}.status-history__item[_ngcontent-%COMP%]{position:relative;z-index:1;width:80px;margin-right:20px}.status-history__item[_ngcontent-%COMP%]:last-child{margin-right:0}']}),J})()},16345:(Pt,X,r)=>{"use strict";r.d(X,{H:()=>e});var a=r(5e3);function t(b,_){if(1&b){const h=a.EpF();a.TgZ(0,"j-transaction-group",3),a.NdJ("selected",function(E){return a.CHM(h),a.oxw(2).onSelect(E)})("signed",function(E){return a.CHM(h),a.oxw(2).onSign(E)})("sentForSign",function(E){return a.CHM(h),a.oxw(2).onSentForSign(E)})("deleted",function(E){return a.CHM(h),a.oxw(2).onDelete(E)})("revoked",function(E){return a.CHM(h),a.oxw(2).onRevoke(E)}),a.qZA()}if(2&b){const h=_.$implicit,l=a.oxw(2);a.Q6J("group",h)("hasExtraPadding",l.hasExtraPadding)("hasLargeTransactions",l.statement.hasLargeTransactions)("isSelectable",l.isSelectable)("isTotalsShown",l.isTotalsShown)("isLoadingExtra",l.isLoadingExtra)("mode",l.mode)("type",l.statement.groupType)}}function N(b,_){if(1&b&&a._UZ(0,"j-empty-placeholder",4),2&b){const h=a.oxw(2);a.Q6J("label",h.emptyLabel)}}function A(b,_){if(1&b&&(a.ynx(0),a.YNc(1,t,1,8,"j-transaction-group",1),a.YNc(2,N,1,1,"j-empty-placeholder",2),a.BQk()),2&b){const h=a.oxw();a.xp6(1),a.Q6J("ngForOf",h.statement.transactionGroups),a.xp6(1),a.Q6J("ngIf",0==h.statement.totalTransactionsCount&&!h.isLoadingExtra)}}let e=(()=>{class b{constructor(){this.emptyLabel="HISTORY.EMPTY",this.hasExtraPadding=!1,this.isSelectable=!1,this.isTotalsShown=!0,this.isLoadingExtra=!1,this.selected=new a.vpe,this.deleted=new a.vpe,this.exported=new a.vpe,this.signed=new a.vpe,this.sentForSign=new a.vpe,this.revoked=new a.vpe}onSelect(h){this.selected.emit(h)}onDelete(h){this.deleted.emit(h)}onSign(h){this.signed.emit(h)}onSentForSign(h){this.sentForSign.emit(h)}onRevoke(h){this.revoked.emit(h)}}return b.\u0275fac=function(h){return new(h||b)},b.\u0275cmp=a.Xpm({type:b,selectors:[["j-statement"]],inputs:{emptyLabel:"emptyLabel",mode:"mode",statement:"statement",hasExtraPadding:"hasExtraPadding",isSelectable:"isSelectable",isTotalsShown:"isTotalsShown",isLoadingExtra:"isLoadingExtra"},outputs:{selected:"selected",deleted:"deleted",exported:"exported",signed:"signed",sentForSign:"sentForSign",revoked:"revoked"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"group","hasExtraPadding","hasLargeTransactions","isSelectable","isTotalsShown","isLoadingExtra","mode","type","selected","signed","sentForSign","deleted","revoked",4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"group","hasExtraPadding","hasLargeTransactions","isSelectable","isTotalsShown","isLoadingExtra","mode","type","selected","signed","sentForSign","deleted","revoked"],[3,"label"]],template:function(h,l){1&h&&a.YNc(0,A,3,2,"ng-container",0),2&h&&a.Q6J("ngIf",l.statement)},styles:[""]}),b})()},19204:(Pt,X,r)=>{"use strict";r.d(X,{AQ:()=>F.A,sF:()=>M.sF,YW:()=>G.YW}),r(16345),r(37784),r(66914),r(60207),r(90404),r(82624),r(15996),r(92490),r(18434),r(15577),r(85355);var F=r(78232),M=r(87444),G=r(26923)},92490:(Pt,X,r)=>{"use strict";r.d(X,{a:()=>A});var a=r(5e3),t=r(40703);function N(e,b){if(1&e&&(a.TgZ(0,"p",12),a._uU(1),a.qZA()),2&e){const _=a.oxw();a.xp6(1),a.hij(" ",_.errorText," ")}}let A=(()=>{class e{constructor(_){this.modal=_}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}}return e.\u0275fac=function(_){return new(_||e)(a.Y36(t.Kz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["j-transaction-sign-error"]],inputs:{transaction:"transaction",errorText:"errorText"},decls:17,vars:8,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[3,"money"],["translate","",1,"m-0","text-muted"],["class","mt-3 mb-0 text-danger",4,"ngIf"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[1,"mt-3","mb-0","text-danger"]],template:function(_,h){1&_&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(){return h.dismissModal()}),a._UZ(2,"img",2),a.ALo(3,"translate"),a.qZA()(),a.TgZ(4,"div",3),a._UZ(5,"img",4),a.ALo(6,"translate"),a.TgZ(7,"h3",5),a._UZ(8,"j-money",6),a.qZA(),a.TgZ(9,"p",7),a._uU(10," STATEMENT.TRANSACTION.SIGN_FAILED "),a.qZA(),a.YNc(11,N,2,1,"p",8),a.qZA(),a.TgZ(12,"div",9)(13,"button",10),a.NdJ("click",function(){return h.closeModal()}),a._uU(14," SHARED.TRY_AGAIN "),a.qZA(),a.TgZ(15,"button",11),a.NdJ("click",function(){return h.dismissModal()}),a._uU(16," HISTORY.BACK_TO_HISTORY "),a.qZA()()),2&_&&(a.xp6(2),a.s9C("alt",a.lcZ(3,4,"SHARED.CLOSE")),a.xp6(3),a.s9C("alt",a.lcZ(6,6,"HISTORY.FAILED.TITLE")),a.xp6(3),a.Q6J("money",h.transaction.balance),a.xp6(3),a.Q6J("ngIf",h.errorText))},styles:[""]}),e})()},18434:(Pt,X,r)=>{"use strict";r.d(X,{Z:()=>N});var a=r(5e3),t=r(40703);let N=(()=>{class A{constructor(b){this.modal=b}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}}return A.\u0275fac=function(b){return new(b||A)(a.Y36(t.Kz))},A.\u0275cmp=a.Xpm({type:A,selectors:[["j-transaction-sign-success"]],inputs:{transaction:"transaction"},decls:14,vars:7,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[3,"money"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"]],template:function(b,_){1&b&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(){return _.dismissModal()}),a._UZ(2,"img",2),a.ALo(3,"translate"),a.qZA()(),a.TgZ(4,"div",3),a._UZ(5,"img",4),a.ALo(6,"translate"),a.TgZ(7,"h3",5),a._UZ(8,"j-money",6),a.qZA(),a.TgZ(9,"p",7),a._uU(10," STATEMENT.TRANSACTION.SIGN_SUCCESS "),a.qZA()(),a.TgZ(11,"div",8)(12,"button",9),a.NdJ("click",function(){return _.dismissModal()}),a._uU(13," HISTORY.BACK_TO_HISTORY "),a.qZA()()),2&b&&(a.xp6(2),a.s9C("alt",a.lcZ(3,3,"SHARED.CLOSE")),a.xp6(3),a.s9C("alt",a.lcZ(6,5,"HISTORY.SIGNED")),a.xp6(3),a.Q6J("money",_.transaction.balance))},styles:[""]}),A})()},48925:(Pt,X,r)=>{"use strict";r.d(X,{n:()=>kt});var a=r(69808),t=r(93075),N=r(91995),A=r(40703),e=r(89854),b=r(23918),_=r(5e3),h=r(16345),l=r(66914),E=r(60207),O=r(90404),F=r(82624),M=r(15996),G=r(15577),f=r(85355),B=r(18434),k=r(92490),$=r(35803),i=r(72159),Y=r(69544),S=r(51884),U=r(37074),x=r(54507),ot=r(68221),vt=r(25021),At=r(37217),Zt=r(53571);let kt=(()=>{class Yt{}return Yt.\u0275fac=function(at){return new(at||Yt)},Yt.\u0275mod=_.oAB({type:Yt}),Yt.\u0275inj=_.cJS({imports:[[a.ez,N.m,t.u5,A.HK,e.aw,b.hx]]}),Yt})();_.B6R(h.H,[a.O5,a.sg,O.l,$.j],[]),_.B6R(l.Z,[a.sg,a.O5,a.mk,i.y,e.Pi,A._L,Y.d$],[e.X$]),_.B6R(E.A,[a.O5,a.tP,a.mk,F.S,A._L,t.Wl,t.JJ,t.On,M.l,e.Pi,i.y,Y.d$,S.c,a.sg],[e.X$,a.Ov,a.uU]),_.B6R(O.l,[a.O5,i.y,a.sg,E.A,b.xr],[e.X$]),_.B6R(F.S,[M.l,a.O5,e.Pi,U.o,i.y,Y.d$,x.t,ot.k,vt.p,a.sg,F.S,a.mk,G.G],[e.X$,a.Ov,At.b,a.uU,Zt.O]),_.B6R(G.G,[U.o,a.sg,f.H],[e.X$]),_.B6R(f.H,[i.y],[e.X$,a.uU]),_.B6R(B.Z,[e.Pi,i.y],[e.X$]),_.B6R(k.a,[e.Pi,i.y,a.O5],[e.X$])},17489:function(Pt,X,r){var a;Pt=r.nmd(Pt),function(){var t,b="Expected a function",h="__lodash_hash_undefined__",E="__lodash_placeholder__",S=32,x=128,rt=1/0,ht=9007199254740991,nt=4294967295,bt=[["ary",x],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",S],["partialRight",64],["rearg",256]],$t="[object Arguments]",an="[object Array]",An="[object Boolean]",Wt="[object Date]",Ht="[object Error]",nn="[object Function]",pn="[object GeneratorFunction]",V="[object Map]",dt="[object Number]",J="[object Object]",mt="[object Promise]",Z="[object RegExp]",et="[object Set]",L="[object String]",gt="[object Symbol]",Ut="[object WeakMap]",Tn="[object ArrayBuffer]",mn="[object DataView]",bn="[object Float32Array]",yn="[object Float64Array]",Ln="[object Int8Array]",ne="[object Int16Array]",jn="[object Int32Array]",Mn="[object Uint8Array]",he="[object Uint8ClampedArray]",Yn="[object Uint16Array]",Te="[object Uint32Array]",Ue=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dn=/&(?:amp|lt|gt|quot|#39);/g,ce=/[&<>"']/g,ve=RegExp(Dn.source),Se=RegExp(ce.source),Pe=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,lt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P=/[\\^$.*+?()[\]{}|]/g,ut=RegExp(P.source),u=/^\s+/,it=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qt=/\{\n\/\* \[wrapped with (.+)\] \*/,un=/,? & /,$n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/[()=,{}\[\]\/\s]/,co=/\\(\\)?/g,lo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pi=/\w*$/,uo=/^[-+]0x[0-9a-f]+$/i,_o=/^0b[01]+$/i,po=/^\[object .+?Constructor\]$/,mo=/^0o[0-7]+$/i,go=/^(?:0|[1-9]\d*)$/,fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,We=/($^)/,Oi=/['\n\r\u2028\u2029\\]/g,qe="\\ud800-\\udfff",Ii="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",bi="\\u2700-\\u27bf",Mi="a-z\\xdf-\\xf6\\xf8-\\xff",ai="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",Zi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yo="["+qe+"]",Li="["+Zi+"]",$e="["+Ii+"]",Ui="\\d+",Eo="["+bi+"]",ri="["+Mi+"]",ki="[^"+qe+Zi+Ui+bi+Mi+ai+"]",ci="\\ud83c[\\udffb-\\udfff]",wi="[^"+qe+"]",li="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+ai+"]",Bi="(?:"+ri+"|"+ki+")",Gi="(?:"+Sn+"|"+ki+")",ji="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yi="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ji="(?:"+$e+"|"+ci+")?",di="["+Ri+"]?",ui=di+Ji+"(?:\\u200d(?:"+[wi,li,He].join("|")+")"+di+Ji+")*",na="(?:"+[Eo,li,He].join("|")+")"+ui,Qi="(?:"+[wi+$e+"?",$e,li,He,yo].join("|")+")",Oo=RegExp("['\u2019]","g"),Io=RegExp($e,"g"),_i=RegExp(ci+"(?="+ci+")|"+Qi+ui,"g"),bo=RegExp([Sn+"?"+ri+"+"+ji+"(?="+[Li,Sn,"$"].join("|")+")",Gi+"+"+Yi+"(?="+[Li,Sn+Bi,"$"].join("|")+")",Sn+"?"+Bi+"+"+ji,Sn+"+"+Yi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ui,na].join("|"),"g"),Mo=RegExp("[\\u200d"+qe+Ii+Ri+"]"),Do=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,No=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wi=-1,y={};y[bn]=y[yn]=y[Ln]=y[ne]=y[jn]=y[Mn]=y[he]=y[Yn]=y[Te]=!0,y[$t]=y[an]=y[Tn]=y[An]=y[mn]=y[Wt]=y[Ht]=y[nn]=y[V]=y[dt]=y[J]=y[Z]=y[et]=y[L]=y[Ut]=!1;var z={};z[$t]=z[an]=z[Tn]=z[mn]=z[An]=z[Wt]=z[bn]=z[yn]=z[Ln]=z[ne]=z[jn]=z[V]=z[dt]=z[J]=z[Z]=z[et]=z[L]=z[gt]=z[Mn]=z[he]=z[Yn]=z[Te]=!0,z[Ht]=z[nn]=z[Ut]=!1;var Dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},In=parseFloat,Ce=parseInt,le="object"==typeof global&&global&&global.Object===Object&&global,Ie="object"==typeof self&&self&&self.Object===Object&&self,vn=le||Ie||Function("return this")(),pi=X&&!X.nodeType&&X,be=pi&&Pt&&!Pt.nodeType&&Pt,mi=be&&be.exports===pi,gi=mi&&le.process,wn=function(){try{return be&&be.require&&be.require("util").types||gi&&gi.binding&&gi.binding("util")}catch(st){}}(),fi=wn&&wn.isArrayBuffer,qi=wn&&wn.isDate,$i=wn&&wn.isMap,Hi=wn&&wn.isRegExp,ea=wn&&wn.isSet,ia=wn&&wn.isTypedArray;function Jn(j,st,tt){switch(tt.length){case 0:return j.call(st);case 1:return j.call(st,tt[0]);case 2:return j.call(st,tt[0],tt[1]);case 3:return j.call(st,tt[0],tt[1],tt[2])}return j.apply(st,tt)}function Ha(j,st,tt,Mt){for(var Jt=-1,sn=null==j?0:j.length;++Jt<sn;){var Rn=j[Jt];st(Mt,Rn,tt(Rn),j)}return Mt}function Hn(j,st){for(var tt=-1,Mt=null==j?0:j.length;++tt<Mt&&!1!==st(j[tt],tt,j););return j}function Xa(j,st){for(var tt=null==j?0:j.length;tt--&&!1!==st(j[tt],tt,j););return j}function oa(j,st){for(var tt=-1,Mt=null==j?0:j.length;++tt<Mt;)if(!st(j[tt],tt,j))return!1;return!0}function Me(j,st){for(var tt=-1,Mt=null==j?0:j.length,Jt=0,sn=[];++tt<Mt;){var Rn=j[tt];st(Rn,tt,j)&&(sn[Jt++]=Rn)}return sn}function Xi(j,st){return!(null==j||!j.length)&&Xe(j,st,0)>-1}function Ro(j,st,tt){for(var Mt=-1,Jt=null==j?0:j.length;++Mt<Jt;)if(tt(st,j[Mt]))return!0;return!1}function fn(j,st){for(var tt=-1,Mt=null==j?0:j.length,Jt=Array(Mt);++tt<Mt;)Jt[tt]=st(j[tt],tt,j);return Jt}function De(j,st){for(var tt=-1,Mt=st.length,Jt=j.length;++tt<Mt;)j[Jt+tt]=st[tt];return j}function Zo(j,st,tt,Mt){var Jt=-1,sn=null==j?0:j.length;for(Mt&&sn&&(tt=j[++Jt]);++Jt<sn;)tt=st(tt,j[Jt],Jt,j);return tt}function Va(j,st,tt,Mt){var Jt=null==j?0:j.length;for(Mt&&Jt&&(tt=j[--Jt]);Jt--;)tt=st(tt,j[Jt],Jt,j);return tt}function Lo(j,st){for(var tt=-1,Mt=null==j?0:j.length;++tt<Mt;)if(st(j[tt],tt,j))return!0;return!1}var za=Uo("length");function aa(j,st,tt){var Mt;return tt(j,function(Jt,sn,Rn){if(st(Jt,sn,Rn))return Mt=sn,!1}),Mt}function Vi(j,st,tt,Mt){for(var Jt=j.length,sn=tt+(Mt?1:-1);Mt?sn--:++sn<Jt;)if(st(j[sn],sn,j))return sn;return-1}function Xe(j,st,tt){return st==st?function as(j,st,tt){for(var Mt=tt-1,Jt=j.length;++Mt<Jt;)if(j[Mt]===st)return Mt;return-1}(j,st,tt):Vi(j,sa,tt)}function es(j,st,tt,Mt){for(var Jt=tt-1,sn=j.length;++Jt<sn;)if(Mt(j[Jt],st))return Jt;return-1}function sa(j){return j!=j}function ra(j,st){var tt=null==j?0:j.length;return tt?ke(j,st)/tt:NaN}function Uo(j){return function(st){return null==st?t:st[j]}}function ko(j){return function(st){return null==j?t:j[st]}}function ca(j,st,tt,Mt,Jt){return Jt(j,function(sn,Rn,gn){tt=Mt?(Mt=!1,sn):st(tt,sn,Rn,gn)}),tt}function ke(j,st){for(var tt,Mt=-1,Jt=j.length;++Mt<Jt;){var sn=st(j[Mt]);sn!==t&&(tt=tt===t?sn:tt+sn)}return tt}function la(j,st){for(var tt=-1,Mt=Array(j);++tt<j;)Mt[tt]=st(tt);return Mt}function da(j){return j&&j.slice(0,Bo(j)+1).replace(u,"")}function Kn(j){return function(st){return j(st)}}function wo(j,st){return fn(st,function(tt){return j[tt]})}function hi(j,st){return j.has(st)}function ua(j,st){for(var tt=-1,Mt=j.length;++tt<Mt&&Xe(st,j[tt],0)>-1;);return tt}function _a(j,st){for(var tt=j.length;tt--&&Xe(st,j[tt],0)>-1;);return tt}function os(j,st){for(var tt=j.length,Mt=0;tt--;)j[tt]===st&&++Mt;return Mt}var m=ko({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),K=ko({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function c(j){return"\\"+Dt[j]}function Q(j){return Mo.test(j)}function En(j){var st=-1,tt=Array(j.size);return j.forEach(function(Mt,Jt){tt[++st]=[Jt,Mt]}),tt}function ie(j,st){return function(tt){return j(st(tt))}}function Un(j,st){for(var tt=-1,Mt=j.length,Jt=0,sn=[];++tt<Mt;){var Rn=j[tt];(Rn===st||Rn===E)&&(j[tt]=E,sn[Jt++]=tt)}return sn}function Ne(j){var st=-1,tt=Array(j.size);return j.forEach(function(Mt){tt[++st]=Mt}),tt}function Ve(j){return Q(j)?function Kc(j){for(var st=_i.lastIndex=0;_i.test(j);)++st;return st}(j):za(j)}function Nn(j){return Q(j)?function Qc(j){return j.match(_i)||[]}(j):function ts(j){return j.split("")}(j)}function Bo(j){for(var st=j.length;st--&&it.test(j.charAt(st)););return st}var Jc=ko({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pa=function j(st){var n,tt=(st=null==st?vn:pa.defaults(vn.Object(),st,pa.pick(vn,No))).Array,Mt=st.Date,Jt=st.Error,sn=st.Function,Rn=st.Math,gn=st.Object,rs=st.RegExp,$c=st.String,ue=st.TypeError,ma=tt.prototype,zi=gn.prototype,ga=st["__core-js_shared__"],fa=sn.prototype.toString,_n=zi.hasOwnProperty,Xc=0,nr=(n=/[^.]+$/.exec(ga&&ga.keys&&ga.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ha=zi.toString,Vc=fa.call(gn),zc=vn._,tl=rs("^"+fa.call(_n).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ta=mi?st.Buffer:t,ze=st.Symbol,va=st.Uint8Array,er=Ta?Ta.allocUnsafe:t,Ca=ie(gn.getPrototypeOf,gn),ir=gn.create,or=zi.propertyIsEnumerable,Aa=ma.splice,ar=ze?ze.isConcatSpreadable:t,Go=ze?ze.iterator:t,Ti=ze?ze.toStringTag:t,ya=function(){try{var n=Ei(gn,"defineProperty");return n({},"",{}),n}catch(o){}}(),nl=st.clearTimeout!==vn.clearTimeout&&st.clearTimeout,el=Mt&&Mt.now!==vn.Date.now&&Mt.now,il=st.setTimeout!==vn.setTimeout&&st.setTimeout,Ea=Rn.ceil,xa=Rn.floor,cs=gn.getOwnPropertySymbols,ol=Ta?Ta.isBuffer:t,sr=st.isFinite,al=ma.join,sl=ie(gn.keys,gn),Zn=Rn.max,Bn=Rn.min,rl=Mt.now,cl=st.parseInt,rr=Rn.random,ll=ma.reverse,ls=Ei(st,"DataView"),jo=Ei(st,"Map"),ds=Ei(st,"Promise"),to=Ei(st,"Set"),Yo=Ei(st,"WeakMap"),Jo=Ei(gn,"create"),Sa=Yo&&new Yo,no={},dl=xi(ls),ul=xi(jo),_l=xi(ds),pl=xi(to),ml=xi(Yo),Pa=ze?ze.prototype:t,Ko=Pa?Pa.valueOf:t,cr=Pa?Pa.toString:t;function T(n){if(xn(n)&&!Kt(n)&&!(n instanceof en)){if(n instanceof _e)return n;if(_n.call(n,"__wrapped__"))return lc(n)}return new _e(n)}var eo=function(){function n(){}return function(o){if(!Cn(o))return{};if(ir)return ir(o);n.prototype=o;var s=new n;return n.prototype=t,s}}();function Oa(){}function _e(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}function en(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function vi(n){var o=-1,s=null==n?0:n.length;for(this.clear();++o<s;){var d=n[o];this.set(d[0],d[1])}}function we(n){var o=-1,s=null==n?0:n.length;for(this.clear();++o<s;){var d=n[o];this.set(d[0],d[1])}}function Fe(n){var o=-1,s=null==n?0:n.length;for(this.clear();++o<s;){var d=n[o];this.set(d[0],d[1])}}function Ci(n){var o=-1,s=null==n?0:n.length;for(this.__data__=new Fe;++o<s;)this.add(n[o])}function Ae(n){var o=this.__data__=new we(n);this.size=o.size}function lr(n,o){var s=Kt(n),d=!s&&Si(n),g=!s&&!d&&oi(n),C=!s&&!d&&!g&&so(n),D=s||d||g||C,w=D?la(n.length,$c):[],W=w.length;for(var pt in n)(o||_n.call(n,pt))&&(!D||!("length"==pt||g&&("offset"==pt||"parent"==pt)||C&&("buffer"==pt||"byteLength"==pt||"byteOffset"==pt)||Ye(pt,W)))&&w.push(pt);return w}function dr(n){var o=n.length;return o?n[As(0,o-1)]:t}function Bl(n,o){return Ga(Xn(n),Ai(o,0,n.length))}function Gl(n){return Ga(Xn(n))}function us(n,o,s){(s!==t&&!ye(n[o],s)||s===t&&!(o in n))&&Be(n,o,s)}function Qo(n,o,s){var d=n[o];(!_n.call(n,o)||!ye(d,s)||s===t&&!(o in n))&&Be(n,o,s)}function Ia(n,o){for(var s=n.length;s--;)if(ye(n[s][0],o))return s;return-1}function jl(n,o,s,d){return ti(n,function(g,C,D){o(d,g,s(g),D)}),d}function ur(n,o){return n&&Ze(o,kn(o),n)}function Be(n,o,s){"__proto__"==o&&ya?ya(n,o,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[o]=s}function _s(n,o){for(var s=-1,d=o.length,g=tt(d),C=null==n;++s<d;)g[s]=C?t:Qs(n,o[s]);return g}function Ai(n,o,s){return n==n&&(s!==t&&(n=n<=s?n:s),o!==t&&(n=n>=o?n:o)),n}function pe(n,o,s,d,g,C){var D,w=1&o,W=2&o,pt=4&o;if(s&&(D=g?s(n,d,g,C):s(n)),D!==t)return D;if(!Cn(n))return n;var ft=Kt(n);if(ft){if(D=function Dd(n){var o=n.length,s=new n.constructor(o);return o&&"string"==typeof n[0]&&_n.call(n,"index")&&(s.index=n.index,s.input=n.input),s}(n),!w)return Xn(n,D)}else{var Tt=Gn(n),Ot=Tt==nn||Tt==pn;if(oi(n))return Lr(n,w);if(Tt==J||Tt==$t||Ot&&!g){if(D=W||Ot?{}:tc(n),!w)return W?function Cd(n,o){return Ze(n,Vr(n),o)}(n,function Yl(n,o){return n&&Ze(o,zn(o),n)}(D,n)):function vd(n,o){return Ze(n,Ls(n),o)}(n,ur(D,n))}else{if(!z[Tt])return g?n:{};D=function Nd(n,o,s){var d=n.constructor;switch(o){case Tn:return Is(n);case An:case Wt:return new d(+n);case mn:return function gd(n,o){var s=o?Is(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}(n,s);case bn:case yn:case Ln:case ne:case jn:case Mn:case he:case Yn:case Te:return Ur(n,s);case V:return new d;case dt:case L:return new d(n);case Z:return function fd(n){var o=new n.constructor(n.source,Pi.exec(n));return o.lastIndex=n.lastIndex,o}(n);case et:return new d;case gt:return function hd(n){return Ko?gn(Ko.call(n)):{}}(n)}}(n,Tt,w)}}C||(C=new Ae);var Rt=C.get(n);if(Rt)return Rt;C.set(n,D),bc(n)?n.forEach(function(jt){D.add(pe(jt,o,s,jt,n,C))}):Oc(n)&&n.forEach(function(jt,tn){D.set(tn,pe(jt,o,s,tn,n,C))});var Xt=ft?t:(pt?W?Ns:Ds:W?zn:kn)(n);return Hn(Xt||n,function(jt,tn){Xt&&(jt=n[tn=jt]),Qo(D,tn,pe(jt,o,s,tn,n,C))}),D}function _r(n,o,s){var d=s.length;if(null==n)return!d;for(n=gn(n);d--;){var g=s[d],D=n[g];if(D===t&&!(g in n)||!(0,o[g])(D))return!1}return!0}function pr(n,o,s){if("function"!=typeof n)throw new ue(b);return zo(function(){n.apply(t,s)},o)}function Wo(n,o,s,d){var g=-1,C=Xi,D=!0,w=n.length,W=[],pt=o.length;if(!w)return W;s&&(o=fn(o,Kn(s))),d?(C=Ro,D=!1):o.length>=200&&(C=hi,D=!1,o=new Ci(o));t:for(;++g<w;){var ft=n[g],Tt=null==s?ft:s(ft);if(ft=d||0!==ft?ft:0,D&&Tt==Tt){for(var Ot=pt;Ot--;)if(o[Ot]===Tt)continue t;W.push(ft)}else C(o,Tt,d)||W.push(ft)}return W}T.templateSettings={escape:Pe,evaluate:Oe,interpolate:lt,variable:"",imports:{_:T}},(T.prototype=Oa.prototype).constructor=T,(_e.prototype=eo(Oa.prototype)).constructor=_e,(en.prototype=eo(Oa.prototype)).constructor=en,vi.prototype.clear=function Tl(){this.__data__=Jo?Jo(null):{},this.size=0},vi.prototype.delete=function vl(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o},vi.prototype.get=function Cl(n){var o=this.__data__;if(Jo){var s=o[n];return s===h?t:s}return _n.call(o,n)?o[n]:t},vi.prototype.has=function Al(n){var o=this.__data__;return Jo?o[n]!==t:_n.call(o,n)},vi.prototype.set=function yl(n,o){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=Jo&&o===t?h:o,this},we.prototype.clear=function El(){this.__data__=[],this.size=0},we.prototype.delete=function xl(n){var o=this.__data__,s=Ia(o,n);return!(s<0||(s==o.length-1?o.pop():Aa.call(o,s,1),--this.size,0))},we.prototype.get=function Sl(n){var o=this.__data__,s=Ia(o,n);return s<0?t:o[s][1]},we.prototype.has=function Pl(n){return Ia(this.__data__,n)>-1},we.prototype.set=function Ol(n,o){var s=this.__data__,d=Ia(s,n);return d<0?(++this.size,s.push([n,o])):s[d][1]=o,this},Fe.prototype.clear=function Il(){this.size=0,this.__data__={hash:new vi,map:new(jo||we),string:new vi}},Fe.prototype.delete=function bl(n){var o=Ba(this,n).delete(n);return this.size-=o?1:0,o},Fe.prototype.get=function Ml(n){return Ba(this,n).get(n)},Fe.prototype.has=function Dl(n){return Ba(this,n).has(n)},Fe.prototype.set=function Nl(n,o){var s=Ba(this,n),d=s.size;return s.set(n,o),this.size+=s.size==d?0:1,this},Ci.prototype.add=Ci.prototype.push=function Rl(n){return this.__data__.set(n,h),this},Ci.prototype.has=function Zl(n){return this.__data__.has(n)},Ae.prototype.clear=function Ll(){this.__data__=new we,this.size=0},Ae.prototype.delete=function Ul(n){var o=this.__data__,s=o.delete(n);return this.size=o.size,s},Ae.prototype.get=function kl(n){return this.__data__.get(n)},Ae.prototype.has=function wl(n){return this.__data__.has(n)},Ae.prototype.set=function Fl(n,o){var s=this.__data__;if(s instanceof we){var d=s.__data__;if(!jo||d.length<199)return d.push([n,o]),this.size=++s.size,this;s=this.__data__=new Fe(d)}return s.set(n,o),this.size=s.size,this};var ti=Br(Re),mr=Br(ms,!0);function Kl(n,o){var s=!0;return ti(n,function(d,g,C){return s=!!o(d,g,C)}),s}function ba(n,o,s){for(var d=-1,g=n.length;++d<g;){var C=n[d],D=o(C);if(null!=D&&(w===t?D==D&&!ae(D):s(D,w)))var w=D,W=C}return W}function gr(n,o){var s=[];return ti(n,function(d,g,C){o(d,g,C)&&s.push(d)}),s}function Fn(n,o,s,d,g){var C=-1,D=n.length;for(s||(s=Zd),g||(g=[]);++C<D;){var w=n[C];o>0&&s(w)?o>1?Fn(w,o-1,s,d,g):De(g,w):d||(g[g.length]=w)}return g}var ps=Gr(),fr=Gr(!0);function Re(n,o){return n&&ps(n,o,kn)}function ms(n,o){return n&&fr(n,o,kn)}function Ma(n,o){return Me(o,function(s){return Je(n[s])})}function yi(n,o){for(var s=0,d=(o=ei(o,n)).length;null!=n&&s<d;)n=n[Le(o[s++])];return s&&s==d?n:t}function hr(n,o,s){var d=o(n);return Kt(n)?d:De(d,s(n))}function Qn(n){return null==n?n===t?"[object Undefined]":"[object Null]":Ti&&Ti in gn(n)?function Id(n){var o=_n.call(n,Ti),s=n[Ti];try{n[Ti]=t;var d=!0}catch(C){}var g=ha.call(n);return d&&(o?n[Ti]=s:delete n[Ti]),g}(n):function Gd(n){return ha.call(n)}(n)}function gs(n,o){return n>o}function Wl(n,o){return null!=n&&_n.call(n,o)}function ql(n,o){return null!=n&&o in gn(n)}function fs(n,o,s){for(var d=s?Ro:Xi,g=n[0].length,C=n.length,D=C,w=tt(C),W=1/0,pt=[];D--;){var ft=n[D];D&&o&&(ft=fn(ft,Kn(o))),W=Bn(ft.length,W),w[D]=!s&&(o||g>=120&&ft.length>=120)?new Ci(D&&ft):t}ft=n[0];var Tt=-1,Ot=w[0];t:for(;++Tt<g&&pt.length<W;){var Rt=ft[Tt],Gt=o?o(Rt):Rt;if(Rt=s||0!==Rt?Rt:0,!(Ot?hi(Ot,Gt):d(pt,Gt,s))){for(D=C;--D;){var Xt=w[D];if(!(Xt?hi(Xt,Gt):d(n[D],Gt,s)))continue t}Ot&&Ot.push(Gt),pt.push(Rt)}}return pt}function qo(n,o,s){var d=null==(n=oc(n,o=ei(o,n)))?n:n[Le(ge(o))];return null==d?t:Jn(d,n,s)}function Tr(n){return xn(n)&&Qn(n)==$t}function $o(n,o,s,d,g){return n===o||(null==n||null==o||!xn(n)&&!xn(o)?n!=n&&o!=o:function zl(n,o,s,d,g,C){var D=Kt(n),w=Kt(o),W=D?an:Gn(n),pt=w?an:Gn(o),ft=(W=W==$t?J:W)==J,Tt=(pt=pt==$t?J:pt)==J,Ot=W==pt;if(Ot&&oi(n)){if(!oi(o))return!1;D=!0,ft=!1}if(Ot&&!ft)return C||(C=new Ae),D||so(n)?Xr(n,o,s,d,g,C):function Pd(n,o,s,d,g,C,D){switch(s){case mn:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case Tn:return!(n.byteLength!=o.byteLength||!C(new va(n),new va(o)));case An:case Wt:case dt:return ye(+n,+o);case Ht:return n.name==o.name&&n.message==o.message;case Z:case L:return n==o+"";case V:var w=En;case et:if(w||(w=Ne),n.size!=o.size&&!(1&d))return!1;var pt=D.get(n);if(pt)return pt==o;d|=2,D.set(n,o);var ft=Xr(w(n),w(o),d,g,C,D);return D.delete(n),ft;case gt:if(Ko)return Ko.call(n)==Ko.call(o)}return!1}(n,o,W,s,d,g,C);if(!(1&s)){var Rt=ft&&_n.call(n,"__wrapped__"),Gt=Tt&&_n.call(o,"__wrapped__");if(Rt||Gt){var Xt=Rt?n.value():n,jt=Gt?o.value():o;return C||(C=new Ae),g(Xt,jt,s,d,C)}}return!!Ot&&(C||(C=new Ae),function Od(n,o,s,d,g,C){var D=1&s,w=Ds(n),W=w.length;if(W!=Ds(o).length&&!D)return!1;for(var Tt=W;Tt--;){var Ot=w[Tt];if(!(D?Ot in o:_n.call(o,Ot)))return!1}var Rt=C.get(n),Gt=C.get(o);if(Rt&&Gt)return Rt==o&&Gt==n;var Xt=!0;C.set(n,o),C.set(o,n);for(var jt=D;++Tt<W;){var tn=n[Ot=w[Tt]],on=o[Ot];if(d)var se=D?d(on,tn,Ot,o,n,C):d(tn,on,Ot,n,o,C);if(!(se===t?tn===on||g(tn,on,s,d,C):se)){Xt=!1;break}jt||(jt="constructor"==Ot)}if(Xt&&!jt){var qn=n.constructor,re=o.constructor;qn!=re&&"constructor"in n&&"constructor"in o&&!("function"==typeof qn&&qn instanceof qn&&"function"==typeof re&&re instanceof re)&&(Xt=!1)}return C.delete(n),C.delete(o),Xt}(n,o,s,d,g,C))}(n,o,s,d,$o,g))}function hs(n,o,s,d){var g=s.length,C=g,D=!d;if(null==n)return!C;for(n=gn(n);g--;){var w=s[g];if(D&&w[2]?w[1]!==n[w[0]]:!(w[0]in n))return!1}for(;++g<C;){var W=(w=s[g])[0],pt=n[W],ft=w[1];if(D&&w[2]){if(pt===t&&!(W in n))return!1}else{var Tt=new Ae;if(d)var Ot=d(pt,ft,W,n,o,Tt);if(!(Ot===t?$o(ft,pt,3,d,Tt):Ot))return!1}}return!0}function vr(n){return!(!Cn(n)||function Ud(n){return!!nr&&nr in n}(n))&&(Je(n)?tl:po).test(xi(n))}function Cr(n){return"function"==typeof n?n:null==n?te:"object"==typeof n?Kt(n)?Er(n[0],n[1]):yr(n):jc(n)}function Ts(n){if(!Vo(n))return sl(n);var o=[];for(var s in gn(n))_n.call(n,s)&&"constructor"!=s&&o.push(s);return o}function vs(n,o){return n<o}function Ar(n,o){var s=-1,d=Vn(n)?tt(n.length):[];return ti(n,function(g,C,D){d[++s]=o(g,C,D)}),d}function yr(n){var o=Zs(n);return 1==o.length&&o[0][2]?ec(o[0][0],o[0][1]):function(s){return s===n||hs(s,n,o)}}function Er(n,o){return Us(n)&&nc(o)?ec(Le(n),o):function(s){var d=Qs(s,n);return d===t&&d===o?Ws(s,n):$o(o,d,3)}}function Da(n,o,s,d,g){n!==o&&ps(o,function(C,D){if(g||(g=new Ae),Cn(C))!function ad(n,o,s,d,g,C,D){var w=ws(n,s),W=ws(o,s),pt=D.get(W);if(pt)us(n,s,pt);else{var ft=C?C(w,W,s+"",n,o,D):t,Tt=ft===t;if(Tt){var Ot=Kt(W),Rt=!Ot&&oi(W),Gt=!Ot&&!Rt&&so(W);ft=W,Ot||Rt||Gt?Kt(w)?ft=w:Pn(w)?ft=Xn(w):Rt?(Tt=!1,ft=Lr(W,!0)):Gt?(Tt=!1,ft=Ur(W,!0)):ft=[]:ta(W)||Si(W)?(ft=w,Si(w)?ft=Nc(w):(!Cn(w)||Je(w))&&(ft=tc(W))):Tt=!1}Tt&&(D.set(W,ft),g(ft,W,d,C,D),D.delete(W)),us(n,s,ft)}}(n,o,D,s,Da,d,g);else{var w=d?d(ws(n,D),C,D+"",n,o,g):t;w===t&&(w=C),us(n,D,w)}},zn)}function xr(n,o){var s=n.length;if(s)return Ye(o+=o<0?s:0,s)?n[o]:t}function Sr(n,o,s){o=o.length?fn(o,function(C){return Kt(C)?function(D){return yi(D,1===C.length?C[0]:C)}:C}):[te];var d=-1;return o=fn(o,Kn(Ft())),function is(j,st){var tt=j.length;for(j.sort(st);tt--;)j[tt]=j[tt].value;return j}(Ar(n,function(C,D,w){return{criteria:fn(o,function(pt){return pt(C)}),index:++d,value:C}}),function(C,D){return function Td(n,o,s){for(var d=-1,g=n.criteria,C=o.criteria,D=g.length,w=s.length;++d<D;){var W=kr(g[d],C[d]);if(W)return d>=w?W:W*("desc"==s[d]?-1:1)}return n.index-o.index}(C,D,s)})}function Pr(n,o,s){for(var d=-1,g=o.length,C={};++d<g;){var D=o[d],w=yi(n,D);s(w,D)&&Ho(C,ei(D,n),w)}return C}function Cs(n,o,s,d){var g=d?es:Xe,C=-1,D=o.length,w=n;for(n===o&&(o=Xn(o)),s&&(w=fn(n,Kn(s)));++C<D;)for(var W=0,pt=o[C],ft=s?s(pt):pt;(W=g(w,ft,W,d))>-1;)w!==n&&Aa.call(w,W,1),Aa.call(n,W,1);return n}function Or(n,o){for(var s=n?o.length:0,d=s-1;s--;){var g=o[s];if(s==d||g!==C){var C=g;Ye(g)?Aa.call(n,g,1):xs(n,g)}}return n}function As(n,o){return n+xa(rr()*(o-n+1))}function ys(n,o){var s="";if(!n||o<1||o>ht)return s;do{o%2&&(s+=n),(o=xa(o/2))&&(n+=n)}while(o);return s}function zt(n,o){return Fs(ic(n,o,te),n+"")}function ld(n){return dr(ro(n))}function dd(n,o){var s=ro(n);return Ga(s,Ai(o,0,s.length))}function Ho(n,o,s,d){if(!Cn(n))return n;for(var g=-1,C=(o=ei(o,n)).length,D=C-1,w=n;null!=w&&++g<C;){var W=Le(o[g]),pt=s;if("__proto__"===W||"constructor"===W||"prototype"===W)return n;if(g!=D){var ft=w[W];(pt=d?d(ft,W,w):t)===t&&(pt=Cn(ft)?ft:Ye(o[g+1])?[]:{})}Qo(w,W,pt),w=w[W]}return n}var Ir=Sa?function(n,o){return Sa.set(n,o),n}:te,ud=ya?function(n,o){return ya(n,"toString",{configurable:!0,enumerable:!1,value:$s(o),writable:!0})}:te;function _d(n){return Ga(ro(n))}function me(n,o,s){var d=-1,g=n.length;o<0&&(o=-o>g?0:g+o),(s=s>g?g:s)<0&&(s+=g),g=o>s?0:s-o>>>0,o>>>=0;for(var C=tt(g);++d<g;)C[d]=n[d+o];return C}function pd(n,o){var s;return ti(n,function(d,g,C){return!(s=o(d,g,C))}),!!s}function Na(n,o,s){var d=0,g=null==n?d:n.length;if("number"==typeof o&&o==o&&g<=2147483647){for(;d<g;){var C=d+g>>>1,D=n[C];null!==D&&!ae(D)&&(s?D<=o:D<o)?d=C+1:g=C}return g}return Es(n,o,te,s)}function Es(n,o,s,d){var g=0,C=null==n?0:n.length;if(0===C)return 0;for(var D=(o=s(o))!=o,w=null===o,W=ae(o),pt=o===t;g<C;){var ft=xa((g+C)/2),Tt=s(n[ft]),Ot=Tt!==t,Rt=null===Tt,Gt=Tt==Tt,Xt=ae(Tt);if(D)var jt=d||Gt;else jt=pt?Gt&&(d||Ot):w?Gt&&Ot&&(d||!Rt):W?Gt&&Ot&&!Rt&&(d||!Xt):!Rt&&!Xt&&(d?Tt<=o:Tt<o);jt?g=ft+1:C=ft}return Bn(C,4294967294)}function br(n,o){for(var s=-1,d=n.length,g=0,C=[];++s<d;){var D=n[s],w=o?o(D):D;if(!s||!ye(w,W)){var W=w;C[g++]=0===D?0:D}}return C}function Mr(n){return"number"==typeof n?n:ae(n)?NaN:+n}function oe(n){if("string"==typeof n)return n;if(Kt(n))return fn(n,oe)+"";if(ae(n))return cr?cr.call(n):"";var o=n+"";return"0"==o&&1/n==-rt?"-0":o}function ni(n,o,s){var d=-1,g=Xi,C=n.length,D=!0,w=[],W=w;if(s)D=!1,g=Ro;else if(C>=200){var pt=o?null:xd(n);if(pt)return Ne(pt);D=!1,g=hi,W=new Ci}else W=o?[]:w;t:for(;++d<C;){var ft=n[d],Tt=o?o(ft):ft;if(ft=s||0!==ft?ft:0,D&&Tt==Tt){for(var Ot=W.length;Ot--;)if(W[Ot]===Tt)continue t;o&&W.push(Tt),w.push(ft)}else g(W,Tt,s)||(W!==w&&W.push(Tt),w.push(ft))}return w}function xs(n,o){return null==(n=oc(n,o=ei(o,n)))||delete n[Le(ge(o))]}function Dr(n,o,s,d){return Ho(n,o,s(yi(n,o)),d)}function Ra(n,o,s,d){for(var g=n.length,C=d?g:-1;(d?C--:++C<g)&&o(n[C],C,n););return s?me(n,d?0:C,d?C+1:g):me(n,d?C+1:0,d?g:C)}function Nr(n,o){var s=n;return s instanceof en&&(s=s.value()),Zo(o,function(d,g){return g.func.apply(g.thisArg,De([d],g.args))},s)}function Ss(n,o,s){var d=n.length;if(d<2)return d?ni(n[0]):[];for(var g=-1,C=tt(d);++g<d;)for(var D=n[g],w=-1;++w<d;)w!=g&&(C[g]=Wo(C[g]||D,n[w],o,s));return ni(Fn(C,1),o,s)}function Rr(n,o,s){for(var d=-1,g=n.length,C=o.length,D={};++d<g;)s(D,n[d],d<C?o[d]:t);return D}function Ps(n){return Pn(n)?n:[]}function Os(n){return"function"==typeof n?n:te}function ei(n,o){return Kt(n)?n:Us(n,o)?[n]:cc(cn(n))}var md=zt;function ii(n,o,s){var d=n.length;return s=s===t?d:s,!o&&s>=d?n:me(n,o,s)}var Zr=nl||function(n){return vn.clearTimeout(n)};function Lr(n,o){if(o)return n.slice();var s=n.length,d=er?er(s):new n.constructor(s);return n.copy(d),d}function Is(n){var o=new n.constructor(n.byteLength);return new va(o).set(new va(n)),o}function Ur(n,o){var s=o?Is(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}function kr(n,o){if(n!==o){var s=n!==t,d=null===n,g=n==n,C=ae(n),D=o!==t,w=null===o,W=o==o,pt=ae(o);if(!w&&!pt&&!C&&n>o||C&&D&&W&&!w&&!pt||d&&D&&W||!s&&W||!g)return 1;if(!d&&!C&&!pt&&n<o||pt&&s&&g&&!d&&!C||w&&s&&g||!D&&g||!W)return-1}return 0}function wr(n,o,s,d){for(var g=-1,C=n.length,D=s.length,w=-1,W=o.length,pt=Zn(C-D,0),ft=tt(W+pt),Tt=!d;++w<W;)ft[w]=o[w];for(;++g<D;)(Tt||g<C)&&(ft[s[g]]=n[g]);for(;pt--;)ft[w++]=n[g++];return ft}function Fr(n,o,s,d){for(var g=-1,C=n.length,D=-1,w=s.length,W=-1,pt=o.length,ft=Zn(C-w,0),Tt=tt(ft+pt),Ot=!d;++g<ft;)Tt[g]=n[g];for(var Rt=g;++W<pt;)Tt[Rt+W]=o[W];for(;++D<w;)(Ot||g<C)&&(Tt[Rt+s[D]]=n[g++]);return Tt}function Xn(n,o){var s=-1,d=n.length;for(o||(o=tt(d));++s<d;)o[s]=n[s];return o}function Ze(n,o,s,d){var g=!s;s||(s={});for(var C=-1,D=o.length;++C<D;){var w=o[C],W=d?d(s[w],n[w],w,s,n):t;W===t&&(W=n[w]),g?Be(s,w,W):Qo(s,w,W)}return s}function Za(n,o){return function(s,d){var g=Kt(s)?Ha:jl,C=o?o():{};return g(s,n,Ft(d,2),C)}}function io(n){return zt(function(o,s){var d=-1,g=s.length,C=g>1?s[g-1]:t,D=g>2?s[2]:t;for(C=n.length>3&&"function"==typeof C?(g--,C):t,D&&Wn(s[0],s[1],D)&&(C=g<3?t:C,g=1),o=gn(o);++d<g;){var w=s[d];w&&n(o,w,d,C)}return o})}function Br(n,o){return function(s,d){if(null==s)return s;if(!Vn(s))return n(s,d);for(var g=s.length,C=o?g:-1,D=gn(s);(o?C--:++C<g)&&!1!==d(D[C],C,D););return s}}function Gr(n){return function(o,s,d){for(var g=-1,C=gn(o),D=d(o),w=D.length;w--;){var W=D[n?w:++g];if(!1===s(C[W],W,C))break}return o}}function jr(n){return function(o){var s=Q(o=cn(o))?Nn(o):t,d=s?s[0]:o.charAt(0),g=s?ii(s,1).join(""):o.slice(1);return d[n]()+g}}function oo(n){return function(o){return Zo(Bc(Fc(o).replace(Oo,"")),n,"")}}function Xo(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var s=eo(n.prototype),d=n.apply(s,o);return Cn(d)?d:s}}function Yr(n){return function(o,s,d){var g=gn(o);if(!Vn(o)){var C=Ft(s,3);o=kn(o),s=function(w){return C(g[w],w,g)}}var D=n(o,s,d);return D>-1?g[C?o[D]:D]:t}}function Jr(n){return je(function(o){var s=o.length,d=s,g=_e.prototype.thru;for(n&&o.reverse();d--;){var C=o[d];if("function"!=typeof C)throw new ue(b);if(g&&!D&&"wrapper"==Fa(C))var D=new _e([],!0)}for(d=D?d:s;++d<s;){var w=Fa(C=o[d]),W="wrapper"==w?Rs(C):t;D=W&&ks(W[0])&&424==W[1]&&!W[4].length&&1==W[9]?D[Fa(W[0])].apply(D,W[3]):1==C.length&&ks(C)?D[w]():D.thru(C)}return function(){var pt=arguments,ft=pt[0];if(D&&1==pt.length&&Kt(ft))return D.plant(ft).value();for(var Tt=0,Ot=s?o[Tt].apply(this,pt):ft;++Tt<s;)Ot=o[Tt].call(this,Ot);return Ot}})}function La(n,o,s,d,g,C,D,w,W,pt){var ft=o&x,Tt=1&o,Ot=2&o,Rt=24&o,Gt=512&o,Xt=Ot?t:Xo(n);return function jt(){for(var tn=arguments.length,on=tt(tn),se=tn;se--;)on[se]=arguments[se];if(Rt)var qn=ao(jt),re=os(on,qn);if(d&&(on=wr(on,d,g,Rt)),C&&(on=Fr(on,C,D,Rt)),tn-=re,Rt&&tn<pt){var On=Un(on,qn);return Wr(n,o,La,jt.placeholder,s,on,On,w,W,pt-tn)}var Ee=Tt?s:this,Qe=Ot?Ee[n]:n;return tn=on.length,w?on=jd(on,w):Gt&&tn>1&&on.reverse(),ft&&W<tn&&(on.length=W),this&&this!==vn&&this instanceof jt&&(Qe=Xt||Xo(Qe)),Qe.apply(Ee,on)}}function Kr(n,o){return function(s,d){return function Hl(n,o,s,d){return Re(n,function(g,C,D){o(d,s(g),C,D)}),d}(s,n,o(d),{})}}function Ua(n,o){return function(s,d){var g;if(s===t&&d===t)return o;if(s!==t&&(g=s),d!==t){if(g===t)return d;"string"==typeof s||"string"==typeof d?(s=oe(s),d=oe(d)):(s=Mr(s),d=Mr(d)),g=n(s,d)}return g}}function bs(n){return je(function(o){return o=fn(o,Kn(Ft())),zt(function(s){var d=this;return n(o,function(g){return Jn(g,d,s)})})})}function ka(n,o){var s=(o=o===t?" ":oe(o)).length;if(s<2)return s?ys(o,n):o;var d=ys(o,Ea(n/Ve(o)));return Q(o)?ii(Nn(d),0,n).join(""):d.slice(0,n)}function Qr(n){return function(o,s,d){return d&&"number"!=typeof d&&Wn(o,s,d)&&(s=d=t),o=Ke(o),s===t?(s=o,o=0):s=Ke(s),function cd(n,o,s,d){for(var g=-1,C=Zn(Ea((o-n)/(s||1)),0),D=tt(C);C--;)D[d?C:++g]=n,n+=s;return D}(o,s,d=d===t?o<s?1:-1:Ke(d),n)}}function wa(n){return function(o,s){return"string"==typeof o&&"string"==typeof s||(o=fe(o),s=fe(s)),n(o,s)}}function Wr(n,o,s,d,g,C,D,w,W,pt){var ft=8&o;o|=ft?S:64,4&(o&=~(ft?64:S))||(o&=-4);var Xt=[n,o,g,ft?C:t,ft?D:t,ft?t:C,ft?t:D,w,W,pt],jt=s.apply(t,Xt);return ks(n)&&ac(jt,Xt),jt.placeholder=d,sc(jt,n,o)}function Ms(n){var o=Rn[n];return function(s,d){if(s=fe(s),(d=null==d?0:Bn(qt(d),292))&&sr(s)){var g=(cn(s)+"e").split("e");return+((g=(cn(o(g[0]+"e"+(+g[1]+d)))+"e").split("e"))[0]+"e"+(+g[1]-d))}return o(s)}}var xd=to&&1/Ne(new to([,-0]))[1]==rt?function(n){return new to(n)}:Vs;function qr(n){return function(o){var s=Gn(o);return s==V?En(o):s==et?function Fo(j){var st=-1,tt=Array(j.size);return j.forEach(function(Mt){tt[++st]=[Mt,Mt]}),tt}(o):function de(j,st){return fn(st,function(tt){return[tt,j[tt]]})}(o,n(o))}}function Ge(n,o,s,d,g,C,D,w){var W=2&o;if(!W&&"function"!=typeof n)throw new ue(b);var pt=d?d.length:0;if(pt||(o&=-97,d=g=t),D=D===t?D:Zn(qt(D),0),w=w===t?w:qt(w),pt-=g?g.length:0,64&o){var ft=d,Tt=g;d=g=t}var Ot=W?t:Rs(n),Rt=[n,o,s,d,g,ft,Tt,C,D,w];if(Ot&&function Fd(n,o){var s=n[1],d=o[1],g=s|d;if(!(g<131||(d==x&&8==s||d==x&&256==s&&n[7].length<=o[8]||384==d&&o[7].length<=o[8]&&8==s)))return n;1&d&&(n[2]=o[2],g|=1&s?0:4);var w=o[3];if(w){var W=n[3];n[3]=W?wr(W,w,o[4]):w,n[4]=W?Un(n[3],E):o[4]}(w=o[5])&&(n[5]=(W=n[5])?Fr(W,w,o[6]):w,n[6]=W?Un(n[5],E):o[6]),(w=o[7])&&(n[7]=w),d&x&&(n[8]=null==n[8]?o[8]:Bn(n[8],o[8])),null==n[9]&&(n[9]=o[9]),n[0]=o[0],n[1]=g}(Rt,Ot),n=Rt[0],o=Rt[1],s=Rt[2],d=Rt[3],g=Rt[4],!(w=Rt[9]=Rt[9]===t?W?0:n.length:Zn(Rt[9]-pt,0))&&24&o&&(o&=-25),o&&1!=o)Gt=8==o||16==o?function yd(n,o,s){var d=Xo(n);return function g(){for(var C=arguments.length,D=tt(C),w=C,W=ao(g);w--;)D[w]=arguments[w];var pt=C<3&&D[0]!==W&&D[C-1]!==W?[]:Un(D,W);return(C-=pt.length)<s?Wr(n,o,La,g.placeholder,t,D,pt,t,t,s-C):Jn(this&&this!==vn&&this instanceof g?d:n,this,D)}}(n,o,w):o!=S&&33!=o||g.length?La.apply(t,Rt):function Ed(n,o,s,d){var g=1&o,C=Xo(n);return function D(){for(var w=-1,W=arguments.length,pt=-1,ft=d.length,Tt=tt(ft+W),Ot=this&&this!==vn&&this instanceof D?C:n;++pt<ft;)Tt[pt]=d[pt];for(;W--;)Tt[pt++]=arguments[++w];return Jn(Ot,g?s:this,Tt)}}(n,o,s,d);else var Gt=function Ad(n,o,s){var d=1&o,g=Xo(n);return function C(){return(this&&this!==vn&&this instanceof C?g:n).apply(d?s:this,arguments)}}(n,o,s);return sc((Ot?Ir:ac)(Gt,Rt),n,o)}function $r(n,o,s,d){return n===t||ye(n,zi[s])&&!_n.call(d,s)?o:n}function Hr(n,o,s,d,g,C){return Cn(n)&&Cn(o)&&(C.set(o,n),Da(n,o,t,Hr,C),C.delete(o)),n}function Sd(n){return ta(n)?t:n}function Xr(n,o,s,d,g,C){var D=1&s,w=n.length,W=o.length;if(w!=W&&!(D&&W>w))return!1;var pt=C.get(n),ft=C.get(o);if(pt&&ft)return pt==o&&ft==n;var Tt=-1,Ot=!0,Rt=2&s?new Ci:t;for(C.set(n,o),C.set(o,n);++Tt<w;){var Gt=n[Tt],Xt=o[Tt];if(d)var jt=D?d(Xt,Gt,Tt,o,n,C):d(Gt,Xt,Tt,n,o,C);if(jt!==t){if(jt)continue;Ot=!1;break}if(Rt){if(!Lo(o,function(tn,on){if(!hi(Rt,on)&&(Gt===tn||g(Gt,tn,s,d,C)))return Rt.push(on)})){Ot=!1;break}}else if(Gt!==Xt&&!g(Gt,Xt,s,d,C)){Ot=!1;break}}return C.delete(n),C.delete(o),Ot}function je(n){return Fs(ic(n,t,_c),n+"")}function Ds(n){return hr(n,kn,Ls)}function Ns(n){return hr(n,zn,Vr)}var Rs=Sa?function(n){return Sa.get(n)}:Vs;function Fa(n){for(var o=n.name+"",s=no[o],d=_n.call(no,o)?s.length:0;d--;){var g=s[d],C=g.func;if(null==C||C==n)return g.name}return o}function ao(n){return(_n.call(T,"placeholder")?T:n).placeholder}function Ft(){var n=T.iteratee||Hs;return n=n===Hs?Cr:n,arguments.length?n(arguments[0],arguments[1]):n}function Ba(n,o){var s=n.__data__;return function Ld(n){var o=typeof n;return"string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n}(o)?s["string"==typeof o?"string":"hash"]:s.map}function Zs(n){for(var o=kn(n),s=o.length;s--;){var d=o[s],g=n[d];o[s]=[d,g,nc(g)]}return o}function Ei(n,o){var s=function v(j,st){return null==j?t:j[st]}(n,o);return vr(s)?s:t}var Ls=cs?function(n){return null==n?[]:(n=gn(n),Me(cs(n),function(o){return or.call(n,o)}))}:zs,Vr=cs?function(n){for(var o=[];n;)De(o,Ls(n)),n=Ca(n);return o}:zs,Gn=Qn;function zr(n,o,s){for(var d=-1,g=(o=ei(o,n)).length,C=!1;++d<g;){var D=Le(o[d]);if(!(C=null!=n&&s(n,D)))break;n=n[D]}return C||++d!=g?C:!!(g=null==n?0:n.length)&&Wa(g)&&Ye(D,g)&&(Kt(n)||Si(n))}function tc(n){return"function"!=typeof n.constructor||Vo(n)?{}:eo(Ca(n))}function Zd(n){return Kt(n)||Si(n)||!!(ar&&n&&n[ar])}function Ye(n,o){var s=typeof n;return!!(o=null==o?ht:o)&&("number"==s||"symbol"!=s&&go.test(n))&&n>-1&&n%1==0&&n<o}function Wn(n,o,s){if(!Cn(s))return!1;var d=typeof o;return!!("number"==d?Vn(s)&&Ye(o,s.length):"string"==d&&o in s)&&ye(s[o],n)}function Us(n,o){if(Kt(n))return!1;var s=typeof n;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=n&&!ae(n))||q.test(n)||!wt.test(n)||null!=o&&n in gn(o)}function ks(n){var o=Fa(n),s=T[o];if("function"!=typeof s||!(o in en.prototype))return!1;if(n===s)return!0;var d=Rs(s);return!!d&&n===d[0]}(ls&&Gn(new ls(new ArrayBuffer(1)))!=mn||jo&&Gn(new jo)!=V||ds&&Gn(ds.resolve())!=mt||to&&Gn(new to)!=et||Yo&&Gn(new Yo)!=Ut)&&(Gn=function(n){var o=Qn(n),s=o==J?n.constructor:t,d=s?xi(s):"";if(d)switch(d){case dl:return mn;case ul:return V;case _l:return mt;case pl:return et;case ml:return Ut}return o});var kd=ga?Je:tr;function Vo(n){var o=n&&n.constructor;return n===("function"==typeof o&&o.prototype||zi)}function nc(n){return n==n&&!Cn(n)}function ec(n,o){return function(s){return null!=s&&s[n]===o&&(o!==t||n in gn(s))}}function ic(n,o,s){return o=Zn(o===t?n.length-1:o,0),function(){for(var d=arguments,g=-1,C=Zn(d.length-o,0),D=tt(C);++g<C;)D[g]=d[o+g];g=-1;for(var w=tt(o+1);++g<o;)w[g]=d[g];return w[o]=s(D),Jn(n,this,w)}}function oc(n,o){return o.length<2?n:yi(n,me(o,0,-1))}function jd(n,o){for(var s=n.length,d=Bn(o.length,s),g=Xn(n);d--;){var C=o[d];n[d]=Ye(C,s)?g[C]:t}return n}function ws(n,o){if(("constructor"!==o||"function"!=typeof n[o])&&"__proto__"!=o)return n[o]}var ac=rc(Ir),zo=il||function(n,o){return vn.setTimeout(n,o)},Fs=rc(ud);function sc(n,o,s){var d=o+"";return Fs(n,function Rd(n,o){var s=o.length;if(!s)return n;var d=s-1;return o[d]=(s>1?"& ":"")+o[d],o=o.join(s>2?", ":" "),n.replace(xt,"{\n/* [wrapped with "+o+"] */\n")}(d,function Yd(n,o){return Hn(bt,function(s){var d="_."+s[0];o&s[1]&&!Xi(n,d)&&n.push(d)}),n.sort()}(function Md(n){var o=n.match(Qt);return o?o[1].split(un):[]}(d),s)))}function rc(n){var o=0,s=0;return function(){var d=rl(),g=16-(d-s);if(s=d,g>0){if(++o>=800)return arguments[0]}else o=0;return n.apply(t,arguments)}}function Ga(n,o){var s=-1,d=n.length,g=d-1;for(o=o===t?d:o;++s<o;){var C=As(s,g),D=n[C];n[C]=n[s],n[s]=D}return n.length=o,n}var cc=function wd(n){var o=Ka(n,function(d){return 500===s.size&&s.clear(),d}),s=o.cache;return o}(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(Ct,function(s,d,g,C){o.push(g?C.replace(co,"$1"):d||s)}),o});function Le(n){if("string"==typeof n||ae(n))return n;var o=n+"";return"0"==o&&1/n==-rt?"-0":o}function xi(n){if(null!=n){try{return fa.call(n)}catch(o){}try{return n+""}catch(o){}}return""}function lc(n){if(n instanceof en)return n.clone();var o=new _e(n.__wrapped__,n.__chain__);return o.__actions__=Xn(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}var Wd=zt(function(n,o){return Pn(n)?Wo(n,Fn(o,1,Pn,!0)):[]}),qd=zt(function(n,o){var s=ge(o);return Pn(s)&&(s=t),Pn(n)?Wo(n,Fn(o,1,Pn,!0),Ft(s,2)):[]}),$d=zt(function(n,o){var s=ge(o);return Pn(s)&&(s=t),Pn(n)?Wo(n,Fn(o,1,Pn,!0),t,s):[]});function dc(n,o,s){var d=null==n?0:n.length;if(!d)return-1;var g=null==s?0:qt(s);return g<0&&(g=Zn(d+g,0)),Vi(n,Ft(o,3),g)}function uc(n,o,s){var d=null==n?0:n.length;if(!d)return-1;var g=d-1;return s!==t&&(g=qt(s),g=s<0?Zn(d+g,0):Bn(g,d-1)),Vi(n,Ft(o,3),g,!0)}function _c(n){return null!=n&&n.length?Fn(n,1):[]}function pc(n){return n&&n.length?n[0]:t}var su=zt(function(n){var o=fn(n,Ps);return o.length&&o[0]===n[0]?fs(o):[]}),ru=zt(function(n){var o=ge(n),s=fn(n,Ps);return o===ge(s)?o=t:s.pop(),s.length&&s[0]===n[0]?fs(s,Ft(o,2)):[]}),cu=zt(function(n){var o=ge(n),s=fn(n,Ps);return(o="function"==typeof o?o:t)&&s.pop(),s.length&&s[0]===n[0]?fs(s,t,o):[]});function ge(n){var o=null==n?0:n.length;return o?n[o-1]:t}var _u=zt(mc);function mc(n,o){return n&&n.length&&o&&o.length?Cs(n,o):n}var gu=je(function(n,o){var s=null==n?0:n.length,d=_s(n,o);return Or(n,fn(o,function(g){return Ye(g,s)?+g:g}).sort(kr)),d});function Bs(n){return null==n?n:ll.call(n)}var Du=zt(function(n){return ni(Fn(n,1,Pn,!0))}),Nu=zt(function(n){var o=ge(n);return Pn(o)&&(o=t),ni(Fn(n,1,Pn,!0),Ft(o,2))}),Ru=zt(function(n){var o=ge(n);return o="function"==typeof o?o:t,ni(Fn(n,1,Pn,!0),t,o)});function Gs(n){if(!n||!n.length)return[];var o=0;return n=Me(n,function(s){if(Pn(s))return o=Zn(s.length,o),!0}),la(o,function(s){return fn(n,Uo(s))})}function gc(n,o){if(!n||!n.length)return[];var s=Gs(n);return null==o?s:fn(s,function(d){return Jn(o,t,d)})}var ku=zt(function(n,o){return Pn(n)?Wo(n,o):[]}),wu=zt(function(n){return Ss(Me(n,Pn))}),Fu=zt(function(n){var o=ge(n);return Pn(o)&&(o=t),Ss(Me(n,Pn),Ft(o,2))}),Bu=zt(function(n){var o=ge(n);return o="function"==typeof o?o:t,Ss(Me(n,Pn),t,o)}),Gu=zt(Gs),Ju=zt(function(n){var o=n.length,s=o>1?n[o-1]:t;return s="function"==typeof s?(n.pop(),s):t,gc(n,s)});function fc(n){var o=T(n);return o.__chain__=!0,o}function ja(n,o){return o(n)}var Qu=je(function(n){var o=n.length,s=o?n[0]:0,d=this.__wrapped__,g=function(C){return _s(C,n)};return!(o>1||this.__actions__.length)&&d instanceof en&&Ye(s)?((d=d.slice(s,+s+(o?1:0))).__actions__.push({func:ja,args:[g],thisArg:t}),new _e(d,this.__chain__).thru(function(C){return o&&!C.length&&C.push(t),C})):this.thru(g)}),t_=Za(function(n,o,s){_n.call(n,s)?++n[s]:Be(n,s,1)}),i_=Yr(dc),o_=Yr(uc);function hc(n,o){return(Kt(n)?Hn:ti)(n,Ft(o,3))}function Tc(n,o){return(Kt(n)?Xa:mr)(n,Ft(o,3))}var c_=Za(function(n,o,s){_n.call(n,s)?n[s].push(o):Be(n,s,[o])}),d_=zt(function(n,o,s){var d=-1,g="function"==typeof o,C=Vn(n)?tt(n.length):[];return ti(n,function(D){C[++d]=g?Jn(o,D,s):qo(D,o,s)}),C}),u_=Za(function(n,o,s){Be(n,s,o)});function Ya(n,o){return(Kt(n)?fn:Ar)(n,Ft(o,3))}var p_=Za(function(n,o,s){n[s?0:1].push(o)},function(){return[[],[]]}),y_=zt(function(n,o){if(null==n)return[];var s=o.length;return s>1&&Wn(n,o[0],o[1])?o=[]:s>2&&Wn(o[0],o[1],o[2])&&(o=[o[0]]),Sr(n,Fn(o,1),[])}),Ja=el||function(){return vn.Date.now()};function vc(n,o,s){return o=s?t:o,Ge(n,x,t,t,t,t,o=n&&null==o?n.length:o)}function Cc(n,o){var s;if("function"!=typeof o)throw new ue(b);return n=qt(n),function(){return--n>0&&(s=o.apply(this,arguments)),n<=1&&(o=t),s}}var js=zt(function(n,o,s){var d=1;if(s.length){var g=Un(s,ao(js));d|=S}return Ge(n,d,o,s,g)}),Ac=zt(function(n,o,s){var d=3;if(s.length){var g=Un(s,ao(Ac));d|=S}return Ge(o,d,n,s,g)});function xc(n,o,s){var d,g,C,D,w,W,pt=0,ft=!1,Tt=!1,Ot=!0;if("function"!=typeof n)throw new ue(b);function Rt(On){var Ee=d,Qe=g;return d=g=t,pt=On,D=n.apply(Qe,Ee)}function Gt(On){return pt=On,w=zo(tn,o),ft?Rt(On):D}function jt(On){var Ee=On-W;return W===t||Ee>=o||Ee<0||Tt&&On-pt>=C}function tn(){var On=Ja();if(jt(On))return on(On);w=zo(tn,function Xt(On){var Yc=o-(On-W);return Tt?Bn(Yc,C-(On-pt)):Yc}(On))}function on(On){return w=t,Ot&&d?Rt(On):(d=g=t,D)}function re(){var On=Ja(),Ee=jt(On);if(d=arguments,g=this,W=On,Ee){if(w===t)return Gt(W);if(Tt)return Zr(w),w=zo(tn,o),Rt(W)}return w===t&&(w=zo(tn,o)),D}return o=fe(o)||0,Cn(s)&&(ft=!!s.leading,C=(Tt="maxWait"in s)?Zn(fe(s.maxWait)||0,o):C,Ot="trailing"in s?!!s.trailing:Ot),re.cancel=function se(){w!==t&&Zr(w),pt=0,d=W=g=w=t},re.flush=function qn(){return w===t?D:on(Ja())},re}var x_=zt(function(n,o){return pr(n,1,o)}),S_=zt(function(n,o,s){return pr(n,fe(o)||0,s)});function Ka(n,o){if("function"!=typeof n||null!=o&&"function"!=typeof o)throw new ue(b);var s=function(){var d=arguments,g=o?o.apply(this,d):d[0],C=s.cache;if(C.has(g))return C.get(g);var D=n.apply(this,d);return s.cache=C.set(g,D)||C,D};return s.cache=new(Ka.Cache||Fe),s}function Qa(n){if("function"!=typeof n)throw new ue(b);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}Ka.Cache=Fe;var I_=md(function(n,o){var s=(o=1==o.length&&Kt(o[0])?fn(o[0],Kn(Ft())):fn(Fn(o,1),Kn(Ft()))).length;return zt(function(d){for(var g=-1,C=Bn(d.length,s);++g<C;)d[g]=o[g].call(this,d[g]);return Jn(n,this,d)})}),Ys=zt(function(n,o){var s=Un(o,ao(Ys));return Ge(n,S,t,o,s)}),Sc=zt(function(n,o){var s=Un(o,ao(Sc));return Ge(n,64,t,o,s)}),b_=je(function(n,o){return Ge(n,256,t,t,t,o)});function ye(n,o){return n===o||n!=n&&o!=o}var G_=wa(gs),j_=wa(function(n,o){return n>=o}),Si=Tr(function(){return arguments}())?Tr:function(n){return xn(n)&&_n.call(n,"callee")&&!or.call(n,"callee")},Kt=tt.isArray,Y_=fi?Kn(fi):function Xl(n){return xn(n)&&Qn(n)==Tn};function Vn(n){return null!=n&&Wa(n.length)&&!Je(n)}function Pn(n){return xn(n)&&Vn(n)}var oi=ol||tr,K_=qi?Kn(qi):function Vl(n){return xn(n)&&Qn(n)==Wt};function Js(n){if(!xn(n))return!1;var o=Qn(n);return o==Ht||"[object DOMException]"==o||"string"==typeof n.message&&"string"==typeof n.name&&!ta(n)}function Je(n){if(!Cn(n))return!1;var o=Qn(n);return o==nn||o==pn||"[object AsyncFunction]"==o||"[object Proxy]"==o}function Pc(n){return"number"==typeof n&&n==qt(n)}function Wa(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=ht}function Cn(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}function xn(n){return null!=n&&"object"==typeof n}var Oc=$i?Kn($i):function td(n){return xn(n)&&Gn(n)==V};function Ic(n){return"number"==typeof n||xn(n)&&Qn(n)==dt}function ta(n){if(!xn(n)||Qn(n)!=J)return!1;var o=Ca(n);if(null===o)return!0;var s=_n.call(o,"constructor")&&o.constructor;return"function"==typeof s&&s instanceof s&&fa.call(s)==Vc}var Ks=Hi?Kn(Hi):function nd(n){return xn(n)&&Qn(n)==Z},bc=ea?Kn(ea):function ed(n){return xn(n)&&Gn(n)==et};function qa(n){return"string"==typeof n||!Kt(n)&&xn(n)&&Qn(n)==L}function ae(n){return"symbol"==typeof n||xn(n)&&Qn(n)==gt}var so=ia?Kn(ia):function id(n){return xn(n)&&Wa(n.length)&&!!y[Qn(n)]},rp=wa(vs),cp=wa(function(n,o){return n<=o});function Mc(n){if(!n)return[];if(Vn(n))return qa(n)?Nn(n):Xn(n);if(Go&&n[Go])return function rn(j){for(var st,tt=[];!(st=j.next()).done;)tt.push(st.value);return tt}(n[Go]());var o=Gn(n);return(o==V?En:o==et?Ne:ro)(n)}function Ke(n){return n?(n=fe(n))===rt||n===-rt?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function qt(n){var o=Ke(n),s=o%1;return o==o?s?o-s:o:0}function Dc(n){return n?Ai(qt(n),0,nt):0}function fe(n){if("number"==typeof n)return n;if(ae(n))return NaN;if(Cn(n)){var o="function"==typeof n.valueOf?n.valueOf():n;n=Cn(o)?o+"":o}if("string"!=typeof n)return 0===n?n:+n;n=da(n);var s=_o.test(n);return s||mo.test(n)?Ce(n.slice(2),s?2:8):uo.test(n)?NaN:+n}function Nc(n){return Ze(n,zn(n))}function cn(n){return null==n?"":oe(n)}var dp=io(function(n,o){if(Vo(o)||Vn(o))Ze(o,kn(o),n);else for(var s in o)_n.call(o,s)&&Qo(n,s,o[s])}),Rc=io(function(n,o){Ze(o,zn(o),n)}),$a=io(function(n,o,s,d){Ze(o,zn(o),n,d)}),up=io(function(n,o,s,d){Ze(o,kn(o),n,d)}),_p=je(_s),mp=zt(function(n,o){n=gn(n);var s=-1,d=o.length,g=d>2?o[2]:t;for(g&&Wn(o[0],o[1],g)&&(d=1);++s<d;)for(var C=o[s],D=zn(C),w=-1,W=D.length;++w<W;){var pt=D[w],ft=n[pt];(ft===t||ye(ft,zi[pt])&&!_n.call(n,pt))&&(n[pt]=C[pt])}return n}),gp=zt(function(n){return n.push(t,Hr),Jn(Zc,t,n)});function Qs(n,o,s){var d=null==n?t:yi(n,o);return d===t?s:d}function Ws(n,o){return null!=n&&zr(n,o,ql)}var Sp=Kr(function(n,o,s){null!=o&&"function"!=typeof o.toString&&(o=ha.call(o)),n[o]=s},$s(te)),Pp=Kr(function(n,o,s){null!=o&&"function"!=typeof o.toString&&(o=ha.call(o)),_n.call(n,o)?n[o].push(s):n[o]=[s]},Ft),Op=zt(qo);function kn(n){return Vn(n)?lr(n):Ts(n)}function zn(n){return Vn(n)?lr(n,!0):function od(n){if(!Cn(n))return function Bd(n){var o=[];if(null!=n)for(var s in gn(n))o.push(s);return o}(n);var o=Vo(n),s=[];for(var d in n)"constructor"==d&&(o||!_n.call(n,d))||s.push(d);return s}(n)}var Mp=io(function(n,o,s){Da(n,o,s)}),Zc=io(function(n,o,s,d){Da(n,o,s,d)}),Dp=je(function(n,o){var s={};if(null==n)return s;var d=!1;o=fn(o,function(C){return C=ei(C,n),d||(d=C.length>1),C}),Ze(n,Ns(n),s),d&&(s=pe(s,7,Sd));for(var g=o.length;g--;)xs(s,o[g]);return s}),Rp=je(function(n,o){return null==n?{}:function sd(n,o){return Pr(n,o,function(s,d){return Ws(n,d)})}(n,o)});function Lc(n,o){if(null==n)return{};var s=fn(Ns(n),function(d){return[d]});return o=Ft(o),Pr(n,s,function(d,g){return o(d,g[0])})}var Uc=qr(kn),kc=qr(zn);function ro(n){return null==n?[]:wo(n,kn(n))}var Kp=oo(function(n,o,s){return o=o.toLowerCase(),n+(s?wc(o):o)});function wc(n){return qs(cn(n).toLowerCase())}function Fc(n){return(n=cn(n))&&n.replace(fo,m).replace(Io,"")}var $p=oo(function(n,o,s){return n+(s?"-":"")+o.toLowerCase()}),Hp=oo(function(n,o,s){return n+(s?" ":"")+o.toLowerCase()}),Xp=jr("toLowerCase"),om=oo(function(n,o,s){return n+(s?"_":"")+o.toLowerCase()}),sm=oo(function(n,o,s){return n+(s?" ":"")+qs(o)}),fm=oo(function(n,o,s){return n+(s?" ":"")+o.toUpperCase()}),qs=jr("toUpperCase");function Bc(n,o,s){return n=cn(n),(o=s?t:o)===t?function St(j){return Do.test(j)}(n)?function Wc(j){return j.match(bo)||[]}(n):function ns(j){return j.match($n)||[]}(n):n.match(o)||[]}var Gc=zt(function(n,o){try{return Jn(n,t,o)}catch(s){return Js(s)?s:new Jt(s)}}),hm=je(function(n,o){return Hn(o,function(s){s=Le(s),Be(n,s,js(n[s],n))}),n});function $s(n){return function(){return n}}var Am=Jr(),ym=Jr(!0);function te(n){return n}function Hs(n){return Cr("function"==typeof n?n:pe(n,1))}var Sm=zt(function(n,o){return function(s){return qo(s,n,o)}}),Pm=zt(function(n,o){return function(s){return qo(n,s,o)}});function Xs(n,o,s){var d=kn(o),g=Ma(o,d);null==s&&(!Cn(o)||!g.length&&d.length)&&(s=o,o=n,n=this,g=Ma(o,kn(o)));var C=!(Cn(s)&&"chain"in s&&!s.chain),D=Je(n);return Hn(g,function(w){var W=o[w];n[w]=W,D&&(n.prototype[w]=function(){var pt=this.__chain__;if(C||pt){var ft=n(this.__wrapped__),Tt=ft.__actions__=Xn(this.__actions__);return Tt.push({func:W,args:arguments,thisArg:n}),ft.__chain__=pt,ft}return W.apply(n,De([this.value()],arguments))})}),n}function Vs(){}var bm=bs(fn),Mm=bs(oa),Dm=bs(Lo);function jc(n){return Us(n)?Uo(Le(n)):function rd(n){return function(o){return yi(o,n)}}(n)}var Rm=Qr(),Zm=Qr(!0);function zs(){return[]}function tr(){return!1}var Gm=Ua(function(n,o){return n+o},0),jm=Ms("ceil"),Ym=Ua(function(n,o){return n/o},1),Jm=Ms("floor"),Xm=Ua(function(n,o){return n*o},1),Vm=Ms("round"),zm=Ua(function(n,o){return n-o},0);return T.after=function E_(n,o){if("function"!=typeof o)throw new ue(b);return n=qt(n),function(){if(--n<1)return o.apply(this,arguments)}},T.ary=vc,T.assign=dp,T.assignIn=Rc,T.assignInWith=$a,T.assignWith=up,T.at=_p,T.before=Cc,T.bind=js,T.bindAll=hm,T.bindKey=Ac,T.castArray=function L_(){if(!arguments.length)return[];var n=arguments[0];return Kt(n)?n:[n]},T.chain=fc,T.chunk=function Jd(n,o,s){o=(s?Wn(n,o,s):o===t)?1:Zn(qt(o),0);var d=null==n?0:n.length;if(!d||o<1)return[];for(var g=0,C=0,D=tt(Ea(d/o));g<d;)D[C++]=me(n,g,g+=o);return D},T.compact=function Kd(n){for(var o=-1,s=null==n?0:n.length,d=0,g=[];++o<s;){var C=n[o];C&&(g[d++]=C)}return g},T.concat=function Qd(){var n=arguments.length;if(!n)return[];for(var o=tt(n-1),s=arguments[0],d=n;d--;)o[d-1]=arguments[d];return De(Kt(s)?Xn(s):[s],Fn(o,1))},T.cond=function Tm(n){var o=null==n?0:n.length,s=Ft();return n=o?fn(n,function(d){if("function"!=typeof d[1])throw new ue(b);return[s(d[0]),d[1]]}):[],zt(function(d){for(var g=-1;++g<o;){var C=n[g];if(Jn(C[0],this,d))return Jn(C[1],this,d)}})},T.conforms=function vm(n){return function Jl(n){var o=kn(n);return function(s){return _r(s,n,o)}}(pe(n,1))},T.constant=$s,T.countBy=t_,T.create=function pp(n,o){var s=eo(n);return null==o?s:ur(s,o)},T.curry=function yc(n,o,s){var d=Ge(n,8,t,t,t,t,t,o=s?t:o);return d.placeholder=yc.placeholder,d},T.curryRight=function Ec(n,o,s){var d=Ge(n,16,t,t,t,t,t,o=s?t:o);return d.placeholder=Ec.placeholder,d},T.debounce=xc,T.defaults=mp,T.defaultsDeep=gp,T.defer=x_,T.delay=S_,T.difference=Wd,T.differenceBy=qd,T.differenceWith=$d,T.drop=function Hd(n,o,s){var d=null==n?0:n.length;return d?me(n,(o=s||o===t?1:qt(o))<0?0:o,d):[]},T.dropRight=function Xd(n,o,s){var d=null==n?0:n.length;return d?me(n,0,(o=d-(o=s||o===t?1:qt(o)))<0?0:o):[]},T.dropRightWhile=function Vd(n,o){return n&&n.length?Ra(n,Ft(o,3),!0,!0):[]},T.dropWhile=function zd(n,o){return n&&n.length?Ra(n,Ft(o,3),!0):[]},T.fill=function tu(n,o,s,d){var g=null==n?0:n.length;return g?(s&&"number"!=typeof s&&Wn(n,o,s)&&(s=0,d=g),function Ql(n,o,s,d){var g=n.length;for((s=qt(s))<0&&(s=-s>g?0:g+s),(d=d===t||d>g?g:qt(d))<0&&(d+=g),d=s>d?0:Dc(d);s<d;)n[s++]=o;return n}(n,o,s,d)):[]},T.filter=function e_(n,o){return(Kt(n)?Me:gr)(n,Ft(o,3))},T.flatMap=function a_(n,o){return Fn(Ya(n,o),1)},T.flatMapDeep=function s_(n,o){return Fn(Ya(n,o),rt)},T.flatMapDepth=function r_(n,o,s){return s=s===t?1:qt(s),Fn(Ya(n,o),s)},T.flatten=_c,T.flattenDeep=function nu(n){return null!=n&&n.length?Fn(n,rt):[]},T.flattenDepth=function eu(n,o){return null!=n&&n.length?Fn(n,o=o===t?1:qt(o)):[]},T.flip=function P_(n){return Ge(n,512)},T.flow=Am,T.flowRight=ym,T.fromPairs=function iu(n){for(var o=-1,s=null==n?0:n.length,d={};++o<s;){var g=n[o];d[g[0]]=g[1]}return d},T.functions=function yp(n){return null==n?[]:Ma(n,kn(n))},T.functionsIn=function Ep(n){return null==n?[]:Ma(n,zn(n))},T.groupBy=c_,T.initial=function au(n){return null!=n&&n.length?me(n,0,-1):[]},T.intersection=su,T.intersectionBy=ru,T.intersectionWith=cu,T.invert=Sp,T.invertBy=Pp,T.invokeMap=d_,T.iteratee=Hs,T.keyBy=u_,T.keys=kn,T.keysIn=zn,T.map=Ya,T.mapKeys=function Ip(n,o){var s={};return o=Ft(o,3),Re(n,function(d,g,C){Be(s,o(d,g,C),d)}),s},T.mapValues=function bp(n,o){var s={};return o=Ft(o,3),Re(n,function(d,g,C){Be(s,g,o(d,g,C))}),s},T.matches=function Em(n){return yr(pe(n,1))},T.matchesProperty=function xm(n,o){return Er(n,pe(o,1))},T.memoize=Ka,T.merge=Mp,T.mergeWith=Zc,T.method=Sm,T.methodOf=Pm,T.mixin=Xs,T.negate=Qa,T.nthArg=function Im(n){return n=qt(n),zt(function(o){return xr(o,n)})},T.omit=Dp,T.omitBy=function Np(n,o){return Lc(n,Qa(Ft(o)))},T.once=function O_(n){return Cc(2,n)},T.orderBy=function __(n,o,s,d){return null==n?[]:(Kt(o)||(o=null==o?[]:[o]),Kt(s=d?t:s)||(s=null==s?[]:[s]),Sr(n,o,s))},T.over=bm,T.overArgs=I_,T.overEvery=Mm,T.overSome=Dm,T.partial=Ys,T.partialRight=Sc,T.partition=p_,T.pick=Rp,T.pickBy=Lc,T.property=jc,T.propertyOf=function Nm(n){return function(o){return null==n?t:yi(n,o)}},T.pull=_u,T.pullAll=mc,T.pullAllBy=function pu(n,o,s){return n&&n.length&&o&&o.length?Cs(n,o,Ft(s,2)):n},T.pullAllWith=function mu(n,o,s){return n&&n.length&&o&&o.length?Cs(n,o,t,s):n},T.pullAt=gu,T.range=Rm,T.rangeRight=Zm,T.rearg=b_,T.reject=function f_(n,o){return(Kt(n)?Me:gr)(n,Qa(Ft(o,3)))},T.remove=function fu(n,o){var s=[];if(!n||!n.length)return s;var d=-1,g=[],C=n.length;for(o=Ft(o,3);++d<C;){var D=n[d];o(D,d,n)&&(s.push(D),g.push(d))}return Or(n,g),s},T.rest=function M_(n,o){if("function"!=typeof n)throw new ue(b);return zt(n,o=o===t?o:qt(o))},T.reverse=Bs,T.sampleSize=function T_(n,o,s){return o=(s?Wn(n,o,s):o===t)?1:qt(o),(Kt(n)?Bl:dd)(n,o)},T.set=function Lp(n,o,s){return null==n?n:Ho(n,o,s)},T.setWith=function Up(n,o,s,d){return d="function"==typeof d?d:t,null==n?n:Ho(n,o,s,d)},T.shuffle=function v_(n){return(Kt(n)?Gl:_d)(n)},T.slice=function hu(n,o,s){var d=null==n?0:n.length;return d?(s&&"number"!=typeof s&&Wn(n,o,s)?(o=0,s=d):(o=null==o?0:qt(o),s=s===t?d:qt(s)),me(n,o,s)):[]},T.sortBy=y_,T.sortedUniq=function xu(n){return n&&n.length?br(n):[]},T.sortedUniqBy=function Su(n,o){return n&&n.length?br(n,Ft(o,2)):[]},T.split=function am(n,o,s){return s&&"number"!=typeof s&&Wn(n,o,s)&&(o=s=t),(s=s===t?nt:s>>>0)?(n=cn(n))&&("string"==typeof o||null!=o&&!Ks(o))&&!(o=oe(o))&&Q(n)?ii(Nn(n),0,s):n.split(o,s):[]},T.spread=function D_(n,o){if("function"!=typeof n)throw new ue(b);return o=null==o?0:Zn(qt(o),0),zt(function(s){var d=s[o],g=ii(s,0,o);return d&&De(g,d),Jn(n,this,g)})},T.tail=function Pu(n){var o=null==n?0:n.length;return o?me(n,1,o):[]},T.take=function Ou(n,o,s){return n&&n.length?me(n,0,(o=s||o===t?1:qt(o))<0?0:o):[]},T.takeRight=function Iu(n,o,s){var d=null==n?0:n.length;return d?me(n,(o=d-(o=s||o===t?1:qt(o)))<0?0:o,d):[]},T.takeRightWhile=function bu(n,o){return n&&n.length?Ra(n,Ft(o,3),!1,!0):[]},T.takeWhile=function Mu(n,o){return n&&n.length?Ra(n,Ft(o,3)):[]},T.tap=function Ku(n,o){return o(n),n},T.throttle=function N_(n,o,s){var d=!0,g=!0;if("function"!=typeof n)throw new ue(b);return Cn(s)&&(d="leading"in s?!!s.leading:d,g="trailing"in s?!!s.trailing:g),xc(n,o,{leading:d,maxWait:o,trailing:g})},T.thru=ja,T.toArray=Mc,T.toPairs=Uc,T.toPairsIn=kc,T.toPath=function Fm(n){return Kt(n)?fn(n,Le):ae(n)?[n]:Xn(cc(cn(n)))},T.toPlainObject=Nc,T.transform=function kp(n,o,s){var d=Kt(n),g=d||oi(n)||so(n);if(o=Ft(o,4),null==s){var C=n&&n.constructor;s=g?d?new C:[]:Cn(n)&&Je(C)?eo(Ca(n)):{}}return(g?Hn:Re)(n,function(D,w,W){return o(s,D,w,W)}),s},T.unary=function R_(n){return vc(n,1)},T.union=Du,T.unionBy=Nu,T.unionWith=Ru,T.uniq=function Zu(n){return n&&n.length?ni(n):[]},T.uniqBy=function Lu(n,o){return n&&n.length?ni(n,Ft(o,2)):[]},T.uniqWith=function Uu(n,o){return o="function"==typeof o?o:t,n&&n.length?ni(n,t,o):[]},T.unset=function wp(n,o){return null==n||xs(n,o)},T.unzip=Gs,T.unzipWith=gc,T.update=function Fp(n,o,s){return null==n?n:Dr(n,o,Os(s))},T.updateWith=function Bp(n,o,s,d){return d="function"==typeof d?d:t,null==n?n:Dr(n,o,Os(s),d)},T.values=ro,T.valuesIn=function Gp(n){return null==n?[]:wo(n,zn(n))},T.without=ku,T.words=Bc,T.wrap=function Z_(n,o){return Ys(Os(o),n)},T.xor=wu,T.xorBy=Fu,T.xorWith=Bu,T.zip=Gu,T.zipObject=function ju(n,o){return Rr(n||[],o||[],Qo)},T.zipObjectDeep=function Yu(n,o){return Rr(n||[],o||[],Ho)},T.zipWith=Ju,T.entries=Uc,T.entriesIn=kc,T.extend=Rc,T.extendWith=$a,Xs(T,T),T.add=Gm,T.attempt=Gc,T.camelCase=Kp,T.capitalize=wc,T.ceil=jm,T.clamp=function jp(n,o,s){return s===t&&(s=o,o=t),s!==t&&(s=(s=fe(s))==s?s:0),o!==t&&(o=(o=fe(o))==o?o:0),Ai(fe(n),o,s)},T.clone=function U_(n){return pe(n,4)},T.cloneDeep=function w_(n){return pe(n,5)},T.cloneDeepWith=function F_(n,o){return pe(n,5,o="function"==typeof o?o:t)},T.cloneWith=function k_(n,o){return pe(n,4,o="function"==typeof o?o:t)},T.conformsTo=function B_(n,o){return null==o||_r(n,o,kn(o))},T.deburr=Fc,T.defaultTo=function Cm(n,o){return null==n||n!=n?o:n},T.divide=Ym,T.endsWith=function Qp(n,o,s){n=cn(n),o=oe(o);var d=n.length,g=s=s===t?d:Ai(qt(s),0,d);return(s-=o.length)>=0&&n.slice(s,g)==o},T.eq=ye,T.escape=function Wp(n){return(n=cn(n))&&Se.test(n)?n.replace(ce,K):n},T.escapeRegExp=function qp(n){return(n=cn(n))&&ut.test(n)?n.replace(P,"\\$&"):n},T.every=function n_(n,o,s){var d=Kt(n)?oa:Kl;return s&&Wn(n,o,s)&&(o=t),d(n,Ft(o,3))},T.find=i_,T.findIndex=dc,T.findKey=function fp(n,o){return aa(n,Ft(o,3),Re)},T.findLast=o_,T.findLastIndex=uc,T.findLastKey=function hp(n,o){return aa(n,Ft(o,3),ms)},T.floor=Jm,T.forEach=hc,T.forEachRight=Tc,T.forIn=function Tp(n,o){return null==n?n:ps(n,Ft(o,3),zn)},T.forInRight=function vp(n,o){return null==n?n:fr(n,Ft(o,3),zn)},T.forOwn=function Cp(n,o){return n&&Re(n,Ft(o,3))},T.forOwnRight=function Ap(n,o){return n&&ms(n,Ft(o,3))},T.get=Qs,T.gt=G_,T.gte=j_,T.has=function xp(n,o){return null!=n&&zr(n,o,Wl)},T.hasIn=Ws,T.head=pc,T.identity=te,T.includes=function l_(n,o,s,d){n=Vn(n)?n:ro(n),s=s&&!d?qt(s):0;var g=n.length;return s<0&&(s=Zn(g+s,0)),qa(n)?s<=g&&n.indexOf(o,s)>-1:!!g&&Xe(n,o,s)>-1},T.indexOf=function ou(n,o,s){var d=null==n?0:n.length;if(!d)return-1;var g=null==s?0:qt(s);return g<0&&(g=Zn(d+g,0)),Xe(n,o,g)},T.inRange=function Yp(n,o,s){return o=Ke(o),s===t?(s=o,o=0):s=Ke(s),function $l(n,o,s){return n>=Bn(o,s)&&n<Zn(o,s)}(n=fe(n),o,s)},T.invoke=Op,T.isArguments=Si,T.isArray=Kt,T.isArrayBuffer=Y_,T.isArrayLike=Vn,T.isArrayLikeObject=Pn,T.isBoolean=function J_(n){return!0===n||!1===n||xn(n)&&Qn(n)==An},T.isBuffer=oi,T.isDate=K_,T.isElement=function Q_(n){return xn(n)&&1===n.nodeType&&!ta(n)},T.isEmpty=function W_(n){if(null==n)return!0;if(Vn(n)&&(Kt(n)||"string"==typeof n||"function"==typeof n.splice||oi(n)||so(n)||Si(n)))return!n.length;var o=Gn(n);if(o==V||o==et)return!n.size;if(Vo(n))return!Ts(n).length;for(var s in n)if(_n.call(n,s))return!1;return!0},T.isEqual=function q_(n,o){return $o(n,o)},T.isEqualWith=function $_(n,o,s){var d=(s="function"==typeof s?s:t)?s(n,o):t;return d===t?$o(n,o,t,s):!!d},T.isError=Js,T.isFinite=function H_(n){return"number"==typeof n&&sr(n)},T.isFunction=Je,T.isInteger=Pc,T.isLength=Wa,T.isMap=Oc,T.isMatch=function X_(n,o){return n===o||hs(n,o,Zs(o))},T.isMatchWith=function V_(n,o,s){return s="function"==typeof s?s:t,hs(n,o,Zs(o),s)},T.isNaN=function z_(n){return Ic(n)&&n!=+n},T.isNative=function tp(n){if(kd(n))throw new Jt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return vr(n)},T.isNil=function ep(n){return null==n},T.isNull=function np(n){return null===n},T.isNumber=Ic,T.isObject=Cn,T.isObjectLike=xn,T.isPlainObject=ta,T.isRegExp=Ks,T.isSafeInteger=function ip(n){return Pc(n)&&n>=-ht&&n<=ht},T.isSet=bc,T.isString=qa,T.isSymbol=ae,T.isTypedArray=so,T.isUndefined=function op(n){return n===t},T.isWeakMap=function ap(n){return xn(n)&&Gn(n)==Ut},T.isWeakSet=function sp(n){return xn(n)&&"[object WeakSet]"==Qn(n)},T.join=function lu(n,o){return null==n?"":al.call(n,o)},T.kebabCase=$p,T.last=ge,T.lastIndexOf=function du(n,o,s){var d=null==n?0:n.length;if(!d)return-1;var g=d;return s!==t&&(g=(g=qt(s))<0?Zn(d+g,0):Bn(g,d-1)),o==o?function ss(j,st,tt){for(var Mt=tt+1;Mt--;)if(j[Mt]===st)return Mt;return Mt}(n,o,g):Vi(n,sa,g,!0)},T.lowerCase=Hp,T.lowerFirst=Xp,T.lt=rp,T.lte=cp,T.max=function Km(n){return n&&n.length?ba(n,te,gs):t},T.maxBy=function Qm(n,o){return n&&n.length?ba(n,Ft(o,2),gs):t},T.mean=function Wm(n){return ra(n,te)},T.meanBy=function qm(n,o){return ra(n,Ft(o,2))},T.min=function $m(n){return n&&n.length?ba(n,te,vs):t},T.minBy=function Hm(n,o){return n&&n.length?ba(n,Ft(o,2),vs):t},T.stubArray=zs,T.stubFalse=tr,T.stubObject=function Lm(){return{}},T.stubString=function Um(){return""},T.stubTrue=function km(){return!0},T.multiply=Xm,T.nth=function uu(n,o){return n&&n.length?xr(n,qt(o)):t},T.noConflict=function Om(){return vn._===this&&(vn._=zc),this},T.noop=Vs,T.now=Ja,T.pad=function Vp(n,o,s){n=cn(n);var d=(o=qt(o))?Ve(n):0;if(!o||d>=o)return n;var g=(o-d)/2;return ka(xa(g),s)+n+ka(Ea(g),s)},T.padEnd=function zp(n,o,s){n=cn(n);var d=(o=qt(o))?Ve(n):0;return o&&d<o?n+ka(o-d,s):n},T.padStart=function tm(n,o,s){n=cn(n);var d=(o=qt(o))?Ve(n):0;return o&&d<o?ka(o-d,s)+n:n},T.parseInt=function nm(n,o,s){return s||null==o?o=0:o&&(o=+o),cl(cn(n).replace(u,""),o||0)},T.random=function Jp(n,o,s){if(s&&"boolean"!=typeof s&&Wn(n,o,s)&&(o=s=t),s===t&&("boolean"==typeof o?(s=o,o=t):"boolean"==typeof n&&(s=n,n=t)),n===t&&o===t?(n=0,o=1):(n=Ke(n),o===t?(o=n,n=0):o=Ke(o)),n>o){var d=n;n=o,o=d}if(s||n%1||o%1){var g=rr();return Bn(n+g*(o-n+In("1e-"+((g+"").length-1))),o)}return As(n,o)},T.reduce=function m_(n,o,s){var d=Kt(n)?Zo:ca,g=arguments.length<3;return d(n,Ft(o,4),s,g,ti)},T.reduceRight=function g_(n,o,s){var d=Kt(n)?Va:ca,g=arguments.length<3;return d(n,Ft(o,4),s,g,mr)},T.repeat=function em(n,o,s){return o=(s?Wn(n,o,s):o===t)?1:qt(o),ys(cn(n),o)},T.replace=function im(){var n=arguments,o=cn(n[0]);return n.length<3?o:o.replace(n[1],n[2])},T.result=function Zp(n,o,s){var d=-1,g=(o=ei(o,n)).length;for(g||(g=1,n=t);++d<g;){var C=null==n?t:n[Le(o[d])];C===t&&(d=g,C=s),n=Je(C)?C.call(n):C}return n},T.round=Vm,T.runInContext=j,T.sample=function h_(n){return(Kt(n)?dr:ld)(n)},T.size=function C_(n){if(null==n)return 0;if(Vn(n))return qa(n)?Ve(n):n.length;var o=Gn(n);return o==V||o==et?n.size:Ts(n).length},T.snakeCase=om,T.some=function A_(n,o,s){var d=Kt(n)?Lo:pd;return s&&Wn(n,o,s)&&(o=t),d(n,Ft(o,3))},T.sortedIndex=function Tu(n,o){return Na(n,o)},T.sortedIndexBy=function vu(n,o,s){return Es(n,o,Ft(s,2))},T.sortedIndexOf=function Cu(n,o){var s=null==n?0:n.length;if(s){var d=Na(n,o);if(d<s&&ye(n[d],o))return d}return-1},T.sortedLastIndex=function Au(n,o){return Na(n,o,!0)},T.sortedLastIndexBy=function yu(n,o,s){return Es(n,o,Ft(s,2),!0)},T.sortedLastIndexOf=function Eu(n,o){if(null!=n&&n.length){var d=Na(n,o,!0)-1;if(ye(n[d],o))return d}return-1},T.startCase=sm,T.startsWith=function rm(n,o,s){return n=cn(n),s=null==s?0:Ai(qt(s),0,n.length),o=oe(o),n.slice(s,s+o.length)==o},T.subtract=zm,T.sum=function tg(n){return n&&n.length?ke(n,te):0},T.sumBy=function ng(n,o){return n&&n.length?ke(n,Ft(o,2)):0},T.template=function cm(n,o,s){var d=T.templateSettings;s&&Wn(n,o,s)&&(o=t),n=cn(n),o=$a({},o,d,$r);var w,W,g=$a({},o.imports,d.imports,$r),C=kn(g),D=wo(g,C),pt=0,ft=o.interpolate||We,Tt="__p += '",Ot=rs((o.escape||We).source+"|"+ft.source+"|"+(ft===lt?lo:We).source+"|"+(o.evaluate||We).source+"|$","g"),Rt="//# sourceURL="+(_n.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wi+"]")+"\n";n.replace(Ot,function(jt,tn,on,se,qn,re){return on||(on=se),Tt+=n.slice(pt,re).replace(Oi,c),tn&&(w=!0,Tt+="' +\n__e("+tn+") +\n'"),qn&&(W=!0,Tt+="';\n"+qn+";\n__p += '"),on&&(Tt+="' +\n((__t = ("+on+")) == null ? '' : __t) +\n'"),pt=re+jt.length,jt}),Tt+="';\n";var Gt=_n.call(o,"variable")&&o.variable;if(Gt){if(ee.test(Gt))throw new Jt("Invalid `variable` option passed into `_.template`")}else Tt="with (obj) {\n"+Tt+"\n}\n";Tt=(W?Tt.replace(Ue,""):Tt).replace(xe,"$1").replace(dn,"$1;"),Tt="function("+(Gt||"obj")+") {\n"+(Gt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(w?", __e = _.escape":"")+(W?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Tt+"return __p\n}";var Xt=Gc(function(){return sn(C,Rt+"return "+Tt).apply(t,D)});if(Xt.source=Tt,Js(Xt))throw Xt;return Xt},T.times=function wm(n,o){if((n=qt(n))<1||n>ht)return[];var s=nt,d=Bn(n,nt);o=Ft(o),n-=nt;for(var g=la(d,o);++s<n;)o(s);return g},T.toFinite=Ke,T.toInteger=qt,T.toLength=Dc,T.toLower=function lm(n){return cn(n).toLowerCase()},T.toNumber=fe,T.toSafeInteger=function lp(n){return n?Ai(qt(n),-ht,ht):0===n?n:0},T.toString=cn,T.toUpper=function dm(n){return cn(n).toUpperCase()},T.trim=function um(n,o,s){if((n=cn(n))&&(s||o===t))return da(n);if(!n||!(o=oe(o)))return n;var d=Nn(n),g=Nn(o);return ii(d,ua(d,g),_a(d,g)+1).join("")},T.trimEnd=function _m(n,o,s){if((n=cn(n))&&(s||o===t))return n.slice(0,Bo(n)+1);if(!n||!(o=oe(o)))return n;var d=Nn(n);return ii(d,0,_a(d,Nn(o))+1).join("")},T.trimStart=function pm(n,o,s){if((n=cn(n))&&(s||o===t))return n.replace(u,"");if(!n||!(o=oe(o)))return n;var d=Nn(n);return ii(d,ua(d,Nn(o))).join("")},T.truncate=function mm(n,o){var s=30,d="...";if(Cn(o)){var g="separator"in o?o.separator:g;s="length"in o?qt(o.length):s,d="omission"in o?oe(o.omission):d}var C=(n=cn(n)).length;if(Q(n)){var D=Nn(n);C=D.length}if(s>=C)return n;var w=s-Ve(d);if(w<1)return d;var W=D?ii(D,0,w).join(""):n.slice(0,w);if(g===t)return W+d;if(D&&(w+=W.length-w),Ks(g)){if(n.slice(w).search(g)){var pt,ft=W;for(g.global||(g=rs(g.source,cn(Pi.exec(g))+"g")),g.lastIndex=0;pt=g.exec(ft);)var Tt=pt.index;W=W.slice(0,Tt===t?w:Tt)}}else if(n.indexOf(oe(g),w)!=w){var Ot=W.lastIndexOf(g);Ot>-1&&(W=W.slice(0,Ot))}return W+d},T.unescape=function gm(n){return(n=cn(n))&&ve.test(n)?n.replace(Dn,Jc):n},T.uniqueId=function Bm(n){var o=++Xc;return cn(n)+o},T.upperCase=fm,T.upperFirst=qs,T.each=hc,T.eachRight=Tc,T.first=pc,Xs(T,function(){var n={};return Re(T,function(o,s){_n.call(T.prototype,s)||(n[s]=o)}),n}(),{chain:!1}),T.VERSION="4.17.21",Hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){T[n].placeholder=T}),Hn(["drop","take"],function(n,o){en.prototype[n]=function(s){s=s===t?1:Zn(qt(s),0);var d=this.__filtered__&&!o?new en(this):this.clone();return d.__filtered__?d.__takeCount__=Bn(s,d.__takeCount__):d.__views__.push({size:Bn(s,nt),type:n+(d.__dir__<0?"Right":"")}),d},en.prototype[n+"Right"]=function(s){return this.reverse()[n](s).reverse()}}),Hn(["filter","map","takeWhile"],function(n,o){var s=o+1,d=1==s||3==s;en.prototype[n]=function(g){var C=this.clone();return C.__iteratees__.push({iteratee:Ft(g,3),type:s}),C.__filtered__=C.__filtered__||d,C}}),Hn(["head","last"],function(n,o){var s="take"+(o?"Right":"");en.prototype[n]=function(){return this[s](1).value()[0]}}),Hn(["initial","tail"],function(n,o){var s="drop"+(o?"":"Right");en.prototype[n]=function(){return this.__filtered__?new en(this):this[s](1)}}),en.prototype.compact=function(){return this.filter(te)},en.prototype.find=function(n){return this.filter(n).head()},en.prototype.findLast=function(n){return this.reverse().find(n)},en.prototype.invokeMap=zt(function(n,o){return"function"==typeof n?new en(this):this.map(function(s){return qo(s,n,o)})}),en.prototype.reject=function(n){return this.filter(Qa(Ft(n)))},en.prototype.slice=function(n,o){n=qt(n);var s=this;return s.__filtered__&&(n>0||o<0)?new en(s):(n<0?s=s.takeRight(-n):n&&(s=s.drop(n)),o!==t&&(s=(o=qt(o))<0?s.dropRight(-o):s.take(o-n)),s)},en.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},en.prototype.toArray=function(){return this.take(nt)},Re(en.prototype,function(n,o){var s=/^(?:filter|find|map|reject)|While$/.test(o),d=/^(?:head|last)$/.test(o),g=T[d?"take"+("last"==o?"Right":""):o],C=d||/^find/.test(o);!g||(T.prototype[o]=function(){var D=this.__wrapped__,w=d?[1]:arguments,W=D instanceof en,pt=w[0],ft=W||Kt(D),Tt=function(tn){var on=g.apply(T,De([tn],w));return d&&Ot?on[0]:on};ft&&s&&"function"==typeof pt&&1!=pt.length&&(W=ft=!1);var Ot=this.__chain__,Rt=!!this.__actions__.length,Gt=C&&!Ot,Xt=W&&!Rt;if(!C&&ft){D=Xt?D:new en(this);var jt=n.apply(D,w);return jt.__actions__.push({func:ja,args:[Tt],thisArg:t}),new _e(jt,Ot)}return Gt&&Xt?n.apply(this,w):(jt=this.thru(Tt),Gt?d?jt.value()[0]:jt.value():jt)})}),Hn(["pop","push","shift","sort","splice","unshift"],function(n){var o=ma[n],s=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);T.prototype[n]=function(){var g=arguments;if(d&&!this.__chain__){var C=this.value();return o.apply(Kt(C)?C:[],g)}return this[s](function(D){return o.apply(Kt(D)?D:[],g)})}}),Re(en.prototype,function(n,o){var s=T[o];if(s){var d=s.name+"";_n.call(no,d)||(no[d]=[]),no[d].push({name:o,func:s})}}),no[La(t,2).name]=[{name:"wrapper",func:t}],en.prototype.clone=function gl(){var n=new en(this.__wrapped__);return n.__actions__=Xn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Xn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Xn(this.__views__),n},en.prototype.reverse=function fl(){if(this.__filtered__){var n=new en(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},en.prototype.value=function hl(){var n=this.__wrapped__.value(),o=this.__dir__,s=Kt(n),d=o<0,g=s?n.length:0,C=function bd(n,o,s){for(var d=-1,g=s.length;++d<g;){var C=s[d],D=C.size;switch(C.type){case"drop":n+=D;break;case"dropRight":o-=D;break;case"take":o=Bn(o,n+D);break;case"takeRight":n=Zn(n,o-D)}}return{start:n,end:o}}(0,g,this.__views__),D=C.start,w=C.end,W=w-D,pt=d?w:D-1,ft=this.__iteratees__,Tt=ft.length,Ot=0,Rt=Bn(W,this.__takeCount__);if(!s||!d&&g==W&&Rt==W)return Nr(n,this.__actions__);var Gt=[];t:for(;W--&&Ot<Rt;){for(var Xt=-1,jt=n[pt+=o];++Xt<Tt;){var tn=ft[Xt],se=tn.type,qn=(0,tn.iteratee)(jt);if(2==se)jt=qn;else if(!qn){if(1==se)continue t;break t}}Gt[Ot++]=jt}return Gt},T.prototype.at=Qu,T.prototype.chain=function Wu(){return fc(this)},T.prototype.commit=function qu(){return new _e(this.value(),this.__chain__)},T.prototype.next=function $u(){this.__values__===t&&(this.__values__=Mc(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?t:this.__values__[this.__index__++]}},T.prototype.plant=function Xu(n){for(var o,s=this;s instanceof Oa;){var d=lc(s);d.__index__=0,d.__values__=t,o?g.__wrapped__=d:o=d;var g=d;s=s.__wrapped__}return g.__wrapped__=n,o},T.prototype.reverse=function Vu(){var n=this.__wrapped__;if(n instanceof en){var o=n;return this.__actions__.length&&(o=new en(this)),(o=o.reverse()).__actions__.push({func:ja,args:[Bs],thisArg:t}),new _e(o,this.__chain__)}return this.thru(Bs)},T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=function zu(){return Nr(this.__wrapped__,this.__actions__)},T.prototype.first=T.prototype.head,Go&&(T.prototype[Go]=function Hu(){return this}),T}();vn._=pa,(a=function(){return pa}.call(X,r,X,Pt))!==t&&(Pt.exports=a)}.call(this)},34793:(Pt,X,r)=>{var a=r(55963);Pt.exports=function t(N,A,e){return null==N?N:a(N,A,e)}}}]);