(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"7wo0":function(t,e,s){"use strict";s.r(e);var n=s("ofXK"),i=s("PCNd"),c=s("3Pt+"),a=s("tyNb"),r=s("fXoL"),o=s("paXB"),l=s("7/bn"),u=s("oMXN"),b=s("EiG8"),d=s("sYmb"),g=s("mCLR");const m=function(){return["main"]},p=function(){return["password"]},h=function(){return["package"]};let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"a",1),r.Rc(2,"SETTINGS.MAIN"),r.Vb(),r.Wb(3,"a",1),r.Rc(4,"SETTINGS.PASSWORD.TITLE"),r.Vb(),r.Wb(5,"a",2),r.Rc(6,"SETTINGS.PACKAGE.NAV"),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.sc("routerLink",r.wc(3,m)),r.Ab(2),r.sc("routerLink",r.wc(4,p)),r.Ab(2),r.sc("routerLink",r.wc(5,h)))},directives:[a.f,a.e,d.a,g.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),t})(),y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(t,e){1&t&&(r.Wb(0,"j-layout-home"),r.Wb(1,"j-aside"),r.Rb(2,"j-nav-main"),r.Vb(),r.Wb(3,"j-main"),r.Wb(4,"section",0),r.Wb(5,"section",1),r.Wb(6,"section",2),r.Wb(7,"h2",3),r.Rc(8,"SETTINGS.TITLE"),r.Vb(),r.Rb(9,"j-settings-tabs"),r.Rb(10,"router-outlet"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb())},directives:[o.a,l.a,u.a,b.a,d.a,f,a.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),t})();var S=s("mrSG"),A=s("4Nuw"),k=s("ZF+8"),T=s("VnnJ"),v=s("JqCM"),P=s("VO+5"),C=s("Kcpt"),I=s("e8Ap"),E=s("L+ju"),w=s("zN9f");let R=(()=>{class t{constructor(){this.selected=new r.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case E.a.CARD:return"ACCOUNTS.CARD";case E.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case E.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"input",1),r.ic("change",(function(t){return e.onSelect()})),r.Vb(),r.Wb(2,"label",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Rb(5,"j-entity-logo",5),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"small",6),r.Wb(8,"div"),r.Rc(9),r.mc(10,"translate"),r.Vb(),r.Vb(),r.Wb(11,"span",7),r.Rc(12),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.sc("id",e.account.id)("ngModel",e.account.isSelected),r.Ab(1),r.sc("for",e.account.id),r.Ab(3),r.sc("name",e.account.balance.currency),r.Ab(4),r.Sc(r.nc(10,6,e.mapSelectedAccountLabel(e.account))),r.Ab(3),r.Sc(e.account.iban))},directives:[c.a,c.t,c.w,w.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),t})();function O(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div"),r.Wb(1,"j-all-requisites-item",15),r.ic("selected",(function(e){return r.Gc(t),r.lc().onSelect()})),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.Ab(1),r.sc("account",t)}}function _(t,e){1&t&&(r.Wb(0,"div",16),r.Rb(1,"ngx-spinner",17),r.Vb()),2&t&&(r.Ab(1),r.sc("fullScreen",!1))}let W=(()=>{class t{constructor(t,e,s,n,i,c){this.accountsService=t,this.filesService=e,this.companyService=s,this.spinner=n,this.notifier=i,this.translateService=c,this.closed=new r.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(t=>{t.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(t=>(t.isSelected=this.isAllSelected,t))}onSelect(){this.isAllSelected=this.accounts.every(t=>t.isSelected)}onDownload(){const t=this.accounts.filter(t=>t.isSelected).map(t=>t.iban);t.length>0?this.download(t):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}download(t){return Object(S.a)(this,void 0,void 0,(function*(){try{const e=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,t);this.filesService.downloadFile(e,`${this.companyService.currentCompany.bin}.pdf`)}catch(e){console.error(e)}}))}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(A.c),r.Qb(k.b),r.Qb(T.a),r.Qb(v.c),r.Qb(P.c),r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(t,e){1&t&&(r.Wb(0,"section",0),r.Wb(1,"div",1),r.Rc(2),r.mc(3,"translate"),r.Vb(),r.Wb(4,"button",2),r.ic("click",(function(t){return e.onClose()})),r.Rb(5,"j-icon",3),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"input",6),r.ic("change",(function(t){return e.selectAll()})),r.Vb(),r.Wb(9,"label",7),r.Rc(10),r.mc(11,"translate"),r.Vb(),r.Vb(),r.Wb(12,"div",8),r.Pc(13,O,2,1,"div",9),r.Vb(),r.Vb(),r.Pc(14,_,2,1,"div",10),r.Wb(15,"div",11),r.Wb(16,"button",12),r.ic("click",(function(t){return e.onDownload()})),r.Rb(17,"div",13),r.Wb(18,"strong",14),r.Rc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Tc(" ",r.nc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),r.Ab(6),r.sc("id","all")("ngModel",e.isAllSelected),r.Ab(1),r.sc("for","all"),r.Ab(1),r.Tc(" ",r.nc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),r.Ab(3),r.sc("ngForOf",e.accounts),r.Ab(1),r.sc("ngIf",e.isLoading),r.Ab(3),r.sc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[C.a,c.a,c.t,c.w,n.t,n.u,I.a,d.a,R,v.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),t})();var x=s("quSY"),V=s("lJxs"),N=s("TwVa"),M=s("S09V"),D=s("kmKP"),G=s("mR7B"),j=s("tmjD");let L=(()=>{class t{constructor(t,e,s,n,i){this.companyService=t,this.userService=e,this.translateService=s,this.maskedService=n,this.maskPipe=i}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,M.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const t=this.userService.user;if(t)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${t.lastname||""} ${t.firstname||""} ${t.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(t.iin,M.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:t.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(t.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(V.a)(t=>{var e;return null===(e=t)||void 0===e?void 0:e.sort(this.sortPersons).map(t=>({initials:this.retrieveInitials(t),name:this.companyService.retrieveShortName(t),role:this.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:this.mapSignText(t),color:this.mapInitialsColor(t)}))}))}mapAuthoritiesPrefix(t){return this.mapTranslatePrefix("AUTHORITIES",t)}mapCompanyPrefix(t){return this.mapTranslatePrefix("COMPANY",t)}mapPrivatePrefix(t){return this.mapTranslatePrefix("PRIVATE",t)}mapContactsPrefix(t){return this.mapTranslatePrefix("CONTACTS",t)}mapTranslatePrefix(t,e){return`SETTINGS.${t}.${e}`}mapDate(t){return t?Object(n.K)(t,"d MMMM yyyy",this.translateService.currentLang):null}sortPersons(t,e){return t.authority===e.authority?0:t.authority===N.a.PRIMARY_SIGNATURE?-1:t.authority===N.a.SECONDARY_SIGNATURE&&e.authority===N.a.NO_SIGNATURE?-1:1}mapRole(t){switch(t.authority){case N.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case N.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case N.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(t){switch(t.authority){case N.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case N.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case N.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(t){switch(t.authority){case N.a.PRIMARY_SIGNATURE:return"first-sign";case N.a.SECONDARY_SIGNATURE:return"second-sign";case N.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(t){return`${t.lastname[0]}${t.firstname[0]}`}}return t.\u0275fac=function(e){return new(e||t)(r.ec(T.a),r.ec(D.b),r.ec(d.e),r.ec(G.a),r.ec(j.b))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function U(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.ROLE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.Vb(),r.Vb()),2&t){const t=r.lc().$implicit;r.Ab(5),r.Sc(t.role)}}function K(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.START_DATE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.mc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.lc().$implicit;r.Ab(5),r.Sc(r.oc(6,1,t.startDate,"dd.MM.yyyy"))}}function q(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Rc(2,"SETTINGS.AUTHORITIES.END_DATE"),r.Vb(),r.Rc(3,": "),r.Wb(4,"span",12),r.Rc(5),r.mc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.lc().$implicit;r.Ab(5),r.Sc(r.oc(6,1,t.endDate,"dd.MM.yyyy"))}}function F(t,e){if(1&t&&(r.Wb(0,"div",13),r.Rc(1),r.Vb()),2&t){const t=r.lc().$implicit;r.Ab(1),r.Tc(" ",t.sign," ")}}function B(t,e){if(1&t&&(r.Wb(0,"div",4),r.Wb(1,"div",5),r.Rc(2),r.Vb(),r.Wb(3,"div",6),r.Wb(4,"div",7),r.Rc(5),r.Vb(),r.Wb(6,"div",8),r.Pc(7,U,6,1,"div",9),r.Pc(8,K,7,4,"div",9),r.Pc(9,q,7,4,"div",9),r.Vb(),r.Vb(),r.Pc(10,F,2,1,"div",10),r.Vb()),2&t){const t=e.$implicit;r.Ab(1),r.Db(t.color),r.Ab(1),r.Tc(" ",t.initials," "),r.Ab(3),r.Sc(t.name),r.Ab(2),r.sc("ngIf",t.role),r.Ab(1),r.sc("ngIf",t.startDate),r.Ab(1),r.sc("ngIf",t.endDate),r.Ab(1),r.sc("ngIf",t.sign)}}function Q(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"h6",2),r.Rc(2,"SETTINGS.AUTHORITIES.TITLE"),r.Vb(),r.Pc(3,B,11,8,"div",3),r.Vb()),2&t){const t=r.lc();r.Ab(3),r.sc("ngForOf",t.authorities)}}let z=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(t,e){1&t&&r.Pc(0,Q,4,1,"section",0),2&t&&r.sc("ngIf",e.authorities)},directives:[n.u,d.a,n.t],pipes:[n.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),t})();var $=s("xJkR"),H=s("lABO");function X(t,e){if(1&t&&r.Rb(0,"e-authorities",3),2&t){const t=r.lc();r.sc("authorities",t.authorities)}}const Y=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},J=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function Z(t,e){1&t&&(r.Wb(0,"div",4),r.Rb(1,"ngx-skeleton-loader",5),r.Rb(2,"ngx-skeleton-loader",6),r.Vb()),2&t&&(r.Ab(1),r.sc("theme",r.wc(2,Y)),r.Ab(1),r.sc("theme",r.wc(3,J)))}function tt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-error-placeholder",7),r.ic("retried",(function(e){return r.Gc(t),r.lc().onRetry()})),r.Vb()}}let et=(()=>{class t{constructor(t,e){this.settingsService=t,this.companyService=e,this.subscription=new x.a;const s=this.settingsService.getAuthoritiesList().subscribe(t=>{this.authorities=t});this.subscription.add(s)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(L),r.Qb(T.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(t,e){1&t&&(r.Pc(0,X,1,1,"e-authorities",0),r.Pc(1,Z,3,4,"div",1),r.Pc(2,tt,1,0,"j-error-placeholder",2)),2&t&&(r.sc("ngIf",(null==e.authorities?null:e.authorities.length)>0),r.Ab(1),r.sc("ngIf",0==(null==e.authorities?null:e.authorities.length)),r.Ab(1),r.sc("ngIf",!e.authorities))},directives:[n.u,z,$.a,H.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),t})();var st=s("zdqJ");const nt=["footerTemplate"];function it(t,e){if(1&t&&r.Sb(0,4),2&t){const t=r.lc(2);r.sc("ngTemplateOutlet",t.footerTemplate)}}function ct(t,e){if(1&t&&(r.Wb(0,"section",3),r.Sb(1,4),r.Pc(2,it,1,1,"ng-container",5),r.Vb()),2&t){const t=r.lc(),e=r.Dc(3);r.Ab(1),r.sc("ngTemplateOutlet",e),r.Ab(1),r.sc("ngIf",t.footerTemplate)}}function at(t,e){if(1&t&&(r.Wb(0,"section",6),r.Sb(1,4),r.Vb()),2&t){r.lc();const t=r.Dc(3);r.Ab(1),r.sc("ngTemplateOutlet",t)}}function rt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",12),r.ic("click",(function(e){return r.Gc(t),r.lc(3).openRequisites()})),r.Rc(1),r.Vb()}if(2&t){const t=r.lc(3);r.Ab(1),r.Tc(" ",t.info.titleAdditional," ")}}function ot(t,e){if(1&t&&(r.Wb(0,"div",18),r.Rc(1),r.Vb()),2&t){const t=r.lc(2).$implicit;r.Ab(1),r.Tc(" ",t.value," ")}}function lt(t,e){if(1&t&&(r.Wb(0,"a",19),r.Rc(1),r.Vb()),2&t){const t=r.lc(2).$implicit;r.uc("href","tel:",t.value,"",r.Ic),r.Ab(1),r.Sc(t.value)}}function ut(t,e){if(1&t&&(r.Wb(0,"a",19),r.Rc(1),r.Vb()),2&t){const t=r.lc(2).$implicit;r.uc("href","mailto:",t.value,"",r.Ic),r.Ab(1),r.Sc(t.value)}}function bt(t,e){if(1&t&&(r.Wb(0,"div",14),r.Wb(1,"div",15),r.Rc(2),r.Vb(),r.Pc(3,ot,2,1,"div",16),r.Pc(4,lt,2,2,"a",17),r.Pc(5,ut,2,2,"a",17),r.Vb()),2&t){const t=r.lc().$implicit;r.Ab(2),r.Tc(" ",t.label," "),r.Ab(1),r.sc("ngIf",!t.isPhone&&!t.isEmail),r.Ab(1),r.sc("ngIf",t.isPhone),r.Ab(1),r.sc("ngIf",t.isEmail)}}function dt(t,e){if(1&t&&(r.Ub(0),r.Pc(1,bt,6,4,"div",13),r.Tb()),2&t){const t=e.$implicit;r.Ab(1),r.sc("ngIf",t.value)}}function gt(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",8),r.Wb(2,"h6",9),r.Rc(3),r.Vb(),r.Pc(4,rt,2,1,"button",10),r.Vb(),r.Pc(5,dt,2,1,"ng-container",11),r.Tb()),2&t){const t=r.lc(2);r.Ab(3),r.Sc(t.info.title),r.Ab(1),r.sc("ngIf",t.info.titleAdditional),r.Ab(1),r.sc("ngForOf",t.info.fields)}}function mt(t,e){if(1&t&&r.Pc(0,gt,6,3,"ng-container",7),2&t){const t=r.lc();r.sc("ngIf",t.info)}}let pt=(()=>{class t{constructor(){this.requisitesClicked=new r.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-info"]],contentQueries:function(t,e,s){var n;1&t&&r.Ib(s,nt,!0),2&t&&r.Cc(n=r.jc())&&(e.footerTemplate=n.first)},inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(t,e){1&t&&(r.Pc(0,ct,3,2,"section",0),r.Pc(1,at,2,1,"section",1),r.Pc(2,mt,1,1,"ng-template",null,2,r.Qc)),2&t&&(r.sc("ngIf",e.hasTour),r.Ab(1),r.sc("ngIf",!e.hasTour))},directives:[n.u,st.a,n.B,d.a,n.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),t})();const ht=function(){return["/authorities"]};function ft(t,e){1&t&&(r.Wb(0,"a",4),r.Rc(1),r.mc(2,"translate"),r.Vb()),2&t&&(r.sc("routerLink",r.wc(4,ht)),r.Ab(1),r.Tc(" ",r.nc(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function yt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"section",5),r.Wb(1,"div",6),r.ic("click",(function(e){return r.Gc(t),r.lc().hideSelector()})),r.Vb(),r.Wb(2,"section",7),r.Wb(3,"j-all-requisites",8),r.ic("closed",(function(e){return r.Gc(t),r.lc().hideSelector()})),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.lc();r.sc("ngClass",t.wrapperClasses),r.Ab(2),r.sc("ngClass",t.allRequisitesClasses)}}let St=(()=>{class t{constructor(t,e,s){this.settingsService=t,this.companyService=e,this.document=s,this.subscription=new x.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const n=this.companyService.refresh$.subscribe(()=>{this.loadData()});this.subscription.add(n)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(L),r.Qb(T.a),r.Qb(n.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-main"]],decls:6,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-info",0),r.ic("requisitesClicked",(function(t){return e.showSelector()})),r.Pc(1,ft,3,5,"ng-template",null,1,r.Qc),r.Vb(),r.Rb(3,"j-settings-info",2),r.Rb(4,"j-settings-info",2),r.Pc(5,yt,4,2,"section",3)),2&t&&(r.sc("info",e.mainInfo)("hasTour",!0),r.Ab(3),r.sc("info",e.privateInfo),r.Ab(1),r.sc("info",e.contactsInfo),r.Ab(1),r.sc("ngIf",e.isAllRequisitesShown))},directives:[pt,n.u,a.f,n.r,W],pipes:[d.d],styles:[""]}),t})();var At=s("p6Hd"),kt=s("tWFC"),Tt=s("1kSV"),vt=s("kUBv");const Pt=["newPassword"];let Ct=(()=>{class t{constructor(t,e){this.userService=t,this.modalService=e,this.isLoading=!1}onSubmit(t){return Object(S.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(t.oldPassword,t.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(e){switch(e.code){case At.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case At.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case At.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=e.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(S.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(kt.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(D.b),r.Qb(Tt.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-password"]],viewQuery:function(t,e){var s;1&t&&r.Wc(Pt,!0),2&t&&r.Cc(s=r.jc())&&(e.newPassword=s.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Rb(3,"div",3),r.Wb(4,"j-new-password",4,5),r.ic("submitted",(function(t){return e.onSubmit(t)})),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(4),r.sc("isOldShown",!0)("isLoading",e.isLoading)("errorText",e.errorText))},directives:[d.a,vt.a],styles:[""]}),t})();var It=s("LRne");class Et{constructor(t,e,s,n){this.numberOfPayments=t,this.depositAndWithdrawal=e,this.discountInRubles=s,this.discountInForeignCurrency=n}}class wt{constructor(t,e,s){this.title=t,this.helpText=e,this.description=Object(It.a)(s)}}class Rt{constructor(t,e){this.totalCost=t,this.saving=e}}var Ot=function(t){return t.Loading="loading",t.Change="change",t.Success="success",t.NotFound="not_found",t.Error="error",t.Forbidden="forbidden",t}({});const _t=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],Wt=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],xt=[{name:"\u0412 \u0440\u0443\u0431\u043b\u044f\u0445",text:"2 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 50% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435",text:"3 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 30% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],Vt=[Object.assign(Object.assign({},xt[0]),{disabled:!0}),Object.assign(Object.assign({},xt[1]),{disabled:!0})],Nt={current:0,total:0,description:Object(It.a)("")},Mt={current:0,total:0,description:Object(It.a)("")},Dt={totalCost:0,nextWriteOff:""},Gt={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},jt=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];s("eIyQ");const Lt={connect:{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"close"}},prepared:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},error:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"50x",description:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.\n\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u044d\u0442\u0438\u043c, \n\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",buttonOk:{text:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",key:"smsAfter"},buttonClose:{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u043f\u0430\u043a\u0435\u0442\u0430",key:"close"}},change:{title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \n\u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},connect_standart:{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439?",description:"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \n\u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u043a\u0435\u0442 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0414\u0430",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},prepared_standart:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444 Standart",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},payment:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"402",description:"\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0447\u0451\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},payment_locked:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",description:"\u041d\u0430 \u0441\u0447\u0451\u0442\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",buttonClose:{text:"\u041e\u041a",key:"close"}},working_days:{icon:"error",description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \n\u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438. \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435 \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},same_day:{icon:"error",description:"\u041c\u0435\u043d\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c",buttonClose:{text:"\u041e\u041a",key:"close"}}};var Ut=s("Ts65");function Kt(t,e){if(1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Wb(2,"span"),r.Rc(3),r.mc(4,"translate"),r.Wb(5,"span",3),r.Rc(6),r.mc(7,"number"),r.Vb(),r.Rc(8),r.mc(9,"translate"),r.mc(10,"number"),r.Vb(),r.Vb(),r.Wb(11,"div",2),r.Wb(12,"small"),r.Rc(13),r.Vb(),r.Vb(),r.Wb(14,"div",4),r.Wb(15,"div",5),r.Rb(16,"div",6),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.lc();r.Ab(3),r.Tc("",r.nc(4,7,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),r.Ab(2),r.sc("title",null==t.item?null:t.item.current),r.Ab(1),r.Tc("",r.nc(7,9,null==t.item?null:t.item.current)," "),r.Ab(2),r.Uc(" ",r.nc(9,11,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM")," ",r.nc(10,13,null==t.item?null:t.item.total),""),r.Ab(5),r.Tc(" ",null==t.item?null:t.item.description," "),r.Ab(3),r.sc("ngStyle",t.style)}}function qt(t,e){1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Rc(2),r.mc(3,"translate"),r.Vb(),r.Wb(4,"div",2),r.Wb(5,"small"),r.Rc(6),r.mc(7,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Tc(" ",r.nc(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),r.Ab(4),r.Tc(" ",r.nc(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}let Ft=(()=>{class t{constructor(){this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(t){var e,s;const n=Math.round((null===(e=t)||void 0===e?void 0:e.current)/(null===(s=t)||void 0===s?void 0:s.total)*100);this.style.width=`${n}%`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success-color",3,"ngStyle"]],template:function(t,e){1&t&&(r.Pc(0,Kt,17,15,"div",0),r.Pc(1,qt,8,6,"div",0)),2&t&&(r.sc("ngIf",null==e.item?null:e.item.total),r.Ab(1),r.sc("ngIf",!(null!=e.item&&e.item.total)))},directives:[n.u,n.x],pipes:[d.d,n.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.bg-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),t})();var Bt=s("Bl/x");function Qt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-switch",10),r.ic("change",(function(e){r.Gc(t);const s=r.lc().$implicit;return r.lc().setValue(s)})),r.Vb()}if(2&t){const t=r.lc().$implicit;r.sc("value",t.checked)}}function zt(t,e){1&t&&r.Rb(0,"img",13)}function $t(t,e){1&t&&r.Rb(0,"img",14)}function Ht(t,e){if(1&t&&(r.Ub(0),r.Pc(1,zt,1,0,"img",11),r.Pc(2,$t,1,0,"img",12),r.Tb()),2&t){const t=r.lc().$implicit;r.Ab(1),r.sc("ngIf",t.checked),r.Ab(1),r.sc("ngIf",!t.checked)}}function Xt(t,e){1&t&&r.Rb(0,"div",15)}function Yt(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Rc(5),r.Vb(),r.Rc(6),r.Vb(),r.Wb(7,"div",5),r.Rc(8),r.Vb(),r.Vb(),r.Wb(9,"div",6),r.Pc(10,Qt,1,1,"j-switch",7),r.Pc(11,Ht,3,2,"ng-container",8),r.Vb(),r.Vb(),r.Pc(12,Xt,1,0,"div",9),r.Tb()),2&t){const t=e.$implicit,s=e.last;r.Ab(4),r.Hb("bg-sale-success-color",t.checked),r.Ab(1),r.Tc("-",t.sale,"%"),r.Ab(1),r.Tc(" ",t.name," "),r.Ab(2),r.Tc(" ",t.text," "),r.Ab(2),r.sc("ngIf",!(null!=t&&t.disabled)),r.Ab(1),r.sc("ngIf",null==t?null:t.disabled),r.Ab(1),r.sc("ngIf",!s)}}let Jt=(()=>{class t{constructor(){this.getValue=new r.n}ngOnInit(){}set select(t){this.items[0].checked=t.discountInRubles,this.items[1].checked=t.discountInForeignCurrency}setValue(t){t.checked=!t.checked,this.getValue.emit({[t.key]:t.checked})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","/assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","/assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","/assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","/assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(t,e){1&t&&r.Pc(0,Yt,13,8,"ng-container",0),2&t&&r.sc("ngForOf",e.items)},directives:[n.t,n.u,Bt.a],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),t})();const Zt=function(t){return{totalCost:t}};let te=(()=>{class t{constructor(t){this.translateService=t,this.isAnotherCompany=!1,this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Mt,this.myRefillData=Nt,this.myPriceData=Dt,this.mySaleData=Vt}ngOnInit(){this.defaultView()}defaultView(){this.isAnotherCompany||(this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}set data(t){this.myPaymentData.current=t.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=t.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:t.restOfPayments.totalNumberOfPayments,payment:t.restOfPayments.costNextPayment}),this.myRefillData.current=t.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=t.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=this.refill.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:t.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:t.depositAndWithdrawals.withdrawalOverLimit}),this.mySaleData.find((e,s)=>{"discountInRubles"===e.key&&(this.mySaleData[s]=Object.assign(Object.assign({},this.mySaleData[s]),{checked:t.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===e.key&&(this.mySaleData[s]=Object.assign(Object.assign({},this.mySaleData[s]),{checked:t.discountOnTransferInCurrency.hasDiscount}))}),this.myPriceData.totalCost=t.totalCost,this.myPriceData.nextWriteOff=t.nextWriteOff}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:14,vars:19,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Rb(1,"j-settings-package-progressbar",1),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Rb(3,"j-settings-package-progressbar",2),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Rb(5,"j-settings-package-form",3),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"p",4),r.Rc(8),r.mc(9,"translate"),r.mc(10,"number"),r.Vb(),r.Wb(11,"p",5),r.Rc(12),r.mc(13,"date"),r.Vb(),r.Vb()),2&t&&(r.sc("itemCardSettingsPackage",e.payment),r.Ab(1),r.sc("item",e.myPaymentData),r.Ab(1),r.sc("itemCardSettingsPackage",e.refill),r.Ab(1),r.sc("item",e.myRefillData),r.Ab(1),r.sc("itemCardSettingsPackage",e.sale),r.Ab(1),r.sc("items",e.mySaleData),r.Ab(3),r.Tc(" ",r.oc(9,9,"SETTINGS.PACKAGE.CALCULATE.COST",r.xc(17,Zt,r.nc(10,12,null==e.myPriceData?null:e.myPriceData.totalCost)))," "),r.Ab(4),r.Uc("","SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW"," \u2014 ",r.oc(13,14,null==e.myPriceData?null:e.myPriceData.nextWriteOff,"dd.MM.yyyy"),""))},directives:[Ut.a,Ft,Jt],pipes:[d.d,n.g,n.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}"]}),t})();var ee=s("yZrb"),se=s("tk/3");let ne=(()=>{class t{constructor(t){this.apiService=t}getCompanyCurrentPackage(t){return Object(S.a)(this,void 0,void 0,(function*(){const e=`companies/${t}/packages/current`;return yield this.apiService.get(e)}))}calculatePackageCost(t,e){return Object(S.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/packages/calculate`;return yield this.apiService.post(s,e)}))}changeCompanyPackage(t,e,s){return Object(S.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/packages/current`,i=(new se.g).set(ee.b.PHONE,s);return yield this.apiService.put(n,e,i)}))}}return t.\u0275fac=function(e){return new(e||t)(r.ec(ee.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ie=s("2FF4"),ce=s("4zJ+");function ae(t,e){1&t&&(r.Rb(0,"img",8),r.mc(1,"translate")),2&t&&r.tc("alt",r.nc(1,1,"SHARED.DONE"))}function re(t,e){1&t&&(r.Rb(0,"img",9),r.mc(1,"translate")),2&t&&r.tc("alt",r.nc(1,1,"SHARED.DONE"))}function oe(t,e){if(1&t&&(r.Wb(0,"h3",10),r.Rc(1),r.Vb()),2&t){const t=r.lc(2);r.Ab(1),r.Tc(" ",t.alertMessage.title," ")}}function le(t,e){if(1&t&&(r.Wb(0,"p",11),r.Rc(1),r.Vb()),2&t){const t=r.lc(2);r.Ab(1),r.Tc(" ",t.alertMessage.description," ")}}function ue(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",13),r.ic("click",(function(e){r.Gc(t);const s=r.lc(2);return s.buttonClick(s.alertMessage.buttonOk.key)})),r.Rc(2),r.Vb(),r.Vb()}if(2&t){const t=r.lc(2);r.Ab(2),r.Tc(" ",t.alertMessage.buttonOk.text," ")}}function be(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",14),r.ic("click",(function(e){r.Gc(t);const s=r.lc(2);return s.buttonClick(s.alertMessage.buttonClose.key)})),r.Rc(2),r.Vb(),r.Vb()}if(2&t){const t=r.lc(2);r.Ab(2),r.Tc(" ",t.alertMessage.buttonClose.text," ")}}function de(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"div",1),r.Wb(2,"div",2),r.Pc(3,ae,2,3,"img",3),r.Pc(4,re,2,3,"img",4),r.Pc(5,oe,2,1,"h3",5),r.Pc(6,le,2,1,"p",6),r.Vb(),r.Pc(7,ue,3,1,"div",7),r.Pc(8,be,3,1,"div",7),r.Tb()),2&t){const t=r.lc();r.Ab(3),r.sc("ngIf","success"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.sc("ngIf","error"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.sc("ngIf",null==t.alertMessage?null:t.alertMessage.title),r.Ab(1),r.sc("ngIf",null==t.alertMessage?null:t.alertMessage.description),r.Ab(1),r.sc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonOk),r.Ab(1),r.sc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonClose)}}function ge(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",18),r.ic("click",(function(e){return r.Gc(t),r.lc(2).buttonClick("close")})),r.Rb(1,"img",19),r.mc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.tc("alt",r.nc(2,1,"SHARED.CLOSE")))}function me(t,e){1&t&&(r.Wb(0,"div",20),r.Rb(1,"j-animated-loading"),r.Vb())}function pe(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"div",1),r.Pc(2,ge,3,3,"button",15),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"j-sms",16),r.ic("loaded",(function(e){return r.Gc(t),r.lc().onSmsLoaded()}))("submitted",(function(e){return r.Gc(t),r.lc().onSubmit(e)})),r.Vb(),r.Pc(5,me,2,0,"div",17),r.Vb(),r.Tb()}if(2&t){const t=r.lc();r.Ab(2),r.sc("ngIf",t.isReady),r.Ab(2),r.sc("phone",t.phone)("countryCode",t.countryCode)("headers",t.headerParams)("hidden",!t.isReady),r.Ab(1),r.sc("ngIf",!t.isReady)}}let he=(()=>{class t{constructor(t,e){this.modal=t,this.packageRequestsService=e,this.refresh=new r.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:ee.c.SIGNING_PACKAGE}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Lt.same_day:Lt[this.alertMessageType]:Lt.working_days}onSmsLoaded(){this.isReady=!0}onSubmit(t){this.isReady=!1,this.changePackage(t.signature)}changePackage(t){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,t).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?Lt.prepared_standart:Lt.prepared}).catch(t=>{this.alertMessage=402===t.status?Lt.payment:423===t.status?Lt.payment_locked:Lt.error}).finally(()=>{var t,e;const s="connect"===this.alertMessageType?"new":"old",n=(null===(t=this.alertMessage)||void 0===t?void 0:t.code)?null===(e=this.alertMessage)||void 0===e?void 0:e.code:"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:s,statusCode:n})})}buttonClick(t){"smsAfter"===t&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===t&&this.modal.close(),"close"===t&&this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Tt.a),r.Qb(ne))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(t,e){1&t&&(r.Pc(0,de,9,6,"ng-container",0),r.Pc(1,pe,6,6,"ng-container",0)),2&t&&(r.sc("ngIf",!e.smsAfterOpen),r.Ab(1),r.sc("ngIf",e.smsAfterOpen))},directives:[n.u,d.a,ie.a,ce.a],pipes:[d.d],styles:[""]}),t})();var fe=s("5gsm");function ye(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){return r.Gc(t),r.lc(3).resetPackageTerms.emit("cancel")})),r.Rc(1),r.mc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Tc(" ",r.nc(2,1,"SETTINGS.PACKAGE.RESET")," "))}function Se(t,e){if(1&t&&(r.Wb(0,"div",3),r.Pc(1,ye,3,3,"button",6),r.Vb()),2&t){const t=r.lc(2);r.Ab(1),r.sc("ngIf","change"===t.status)}}function Ae(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){r.Gc(t),r.lc();const s=r.Dc(2),n=r.lc(2);return s.close(),n.resetPackageTerms.emit("change")})),r.Rc(1),r.mc(2,"translate"),r.Vb(),r.Wb(3,"button",11),r.ic("click",(function(e){r.Gc(t),r.lc();const s=r.Dc(2),n=r.lc(2);return s.close(),n.resetPackageTerms.emit("reset")})),r.Rc(4),r.mc(5,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Tc(" ",r.nc(2,2,"SETTINGS.PACKAGE.CHANGE")," "),r.Ab(3),r.Tc(" ",r.nc(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function ke(t,e){if(1&t&&(r.Wb(0,"div",3),r.Wb(1,"button",8,9),r.Rc(3),r.mc(4,"translate"),r.Vb(),r.Pc(5,Ae,6,6,"ng-template",null,10,r.Qc),r.Vb()),2&t){const t=r.Dc(6);r.Ab(1),r.sc("autoClose","outside")("ngbPopover",t),r.Ab(2),r.Tc(" ",r.nc(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function Te(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"div",2),r.Wb(2,"div",3),r.Wb(3,"h4",4),r.Rc(4),r.mc(5,"translate"),r.Vb(),r.Vb(),r.Pc(6,Se,2,1,"div",5),r.Pc(7,ke,7,5,"div",5),r.Vb(),r.Vb()),2&t){const t=r.lc();r.Ab(4),r.Sc(r.nc(5,3,t.packageTitle[t.status])),r.Ab(2),r.sc("ngIf","change"===t.status),r.Ab(1),r.sc("ngIf","success"===t.status)}}const ve=function(){return["success","change","not_found"]};let Pe=(()=>{class t{constructor(){this.status=Ot.Loading,this.resetPackageTerms=new r.n,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&r.Pc(0,Te,8,5,"section",0),2&t&&r.sc("ngIf",r.wc(1,ve).includes(e.status))},directives:[n.u,Tt.C],pipes:[d.d],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),t})();function Ce(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",2),r.Wb(1,"label"),r.Wb(2,"input",3),r.ic("change",(function(s){r.Gc(t);const n=e.$implicit,i=e.index;return r.lc().setValue(n,i)})),r.Vb(),r.Wb(3,"div",4),r.Wb(4,"div",5),r.Rc(5),r.mc(6,"translate"),r.Vb(),r.Wb(7,"div",6),r.Rc(8),r.mc(9,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,s=e.index,n=r.lc();r.Ab(2),r.sc("name",n.key+s)("value",t.value)("checked",t.checked),r.Ab(3),r.Uc("",t.value," ",r.nc(6,6,n.textType[n.key]),""),r.Ab(3),r.Tc(" ",r.pc(9,8,t.currency,"\u20b8","symbol","0.0-2")," ")}}let Ie=(()=>{class t{constructor(){this.key="numberOfPayments",this.getValue=new r.n,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}ngOnInit(){}set select(t){this.items.map(e=>e.checked=e.value===t)}setValue(t,e){t.checked=!t.checked,this.items.filter((t,s)=>s!==e).map(t=>t.checked=!1),this.getValue.emit({[this.key]:t.checked?t.value:0})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Pc(1,Ce,10,13,"div",1),r.Vb()),2&t&&(r.Ab(1),r.sc("ngForOf",e.items))},directives:[n.t],pipes:[d.d,n.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),t})(),Ee=(()=>{class t{constructor(t){this.translateService=t,this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new r.n,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe(()=>{this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:26,vars:30,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"ngbTooltip","inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Rc(5),r.mc(6,"translate"),r.Vb(),r.Vb(),r.Wb(7,"div",3),r.Wb(8,"span"),r.Wb(9,"span",5),r.Rc(10),r.mc(11,"currency"),r.Vb(),r.Wb(12,"span",5),r.Rc(13,"-"),r.Vb(),r.Rb(14,"a",6),r.mc(15,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",7),r.Wb(17,"button",8,9),r.ic("click",(function(t){return e.openModal.emit()})),r.mc(19,"translate"),r.Wb(20,"span"),r.Rc(21),r.mc(22,"translate"),r.Vb(),r.Wb(23,"span",10),r.Rc(24),r.mc(25,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.Dc(18);r.Ab(5),r.Sc(r.nc(6,12,"SETTINGS.PACKAGE.PRICE.TITLE")),r.Ab(4),r.sc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Sc(r.pc(11,14,null==e.item?null:e.item.saving,"\u20b8","symbol","0.0-2")),r.Ab(2),r.sc("hidden",null==e.item?null:e.item.saving),r.Ab(2),r.sc("ngbTooltip",r.nc(15,19,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question.svg"),r.Ab(3),r.sc("ngbTooltip",r.nc(19,21,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",e.disabledButton),r.Ab(4),r.Uc("",r.nc(22,23,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",e.isWorkingDay?t.close():t.open(),""),r.Ab(2),r.sc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Tc("\xa0",r.pc(25,25,null==e.item?null:e.item.totalCost,e.currency,"symbol","0.0-2"),"")}},directives:[Tt.E,I.a],pipes:[d.d,n.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),t})(),we=(()=>{class t{constructor(t){this.translateService=t,this.calculatePackage=new r.n,this.openModal=new r.n,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=_t,this.refillData=Wt,this.saleData=xt,this.disabledButton=!0}ngOnInit(){this.packageTerms=new Et(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(t=>!this.packageTerms[t])||(this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new Rt(0,0),!1)}packageCalculate(t){"depositAndWithdrawal"in t&&(t.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),t),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(t){t&&(this.price.totalCost=t.conditions.packageCost,this.price.saving=t.saving,this.payment.description=t.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:t.conditions.costNextPayment}):Object(It.a)(""),this.refill.description=t.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawal/1e6,depositingOverLimit:t.conditions.depositingOverLimit,withdrawalOverLimit:t.conditions.withdrawalOverLimit}):Object(It.a)(""),this.disabledButton=!this.isWorkingDay)}getPackageTerms(t){t&&(this.packageTerms.numberOfPayments=t.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=t.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=t.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=t.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:8,vars:12,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Wb(1,"j-settings-package-tabs",1),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Wb(3,"j-settings-package-tabs",2),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Wb(5,"j-settings-package-form",3),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"j-settings-package-price",4),r.ic("openModal",(function(t){return e.openModal.emit(e.packageTerms)})),r.Vb(),r.Vb()),2&t&&(r.sc("itemCardSettingsPackage",e.payment),r.Ab(1),r.sc("items",e.paymentData)("select",e.packageTerms.numberOfPayments),r.Ab(1),r.sc("itemCardSettingsPackage",e.refill),r.Ab(1),r.sc("items",e.refillData)("select",e.packageTerms.depositAndWithdrawal/1e6),r.Ab(1),r.sc("itemCardSettingsPackage",e.sale),r.Ab(1),r.sc("items",e.saleData)("select",e.packageTerms),r.Ab(2),r.sc("item",e.price)("disabledButton",e.disabledButton)("isWorkingDay",e.isWorkingDay))},directives:[Ut.a,Ie,Jt,Ee],styles:[""]}),t})();function Re(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"j-my-package",5),r.Tb()),2&t){const t=r.lc();r.Ab(1),r.sc("data",t.packageRest)}}function Oe(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",6),r.ic("openModal",(function(e){return r.Gc(t),r.lc().changePackageTerms("connect",e)}))("calculatePackage",(function(e){return r.Gc(t),r.lc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.lc();r.Ab(1),r.sc("data",t.packageCalculation)("isWorkingDay",t.packageRest.isWorkingDay)}}function _e(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",7),r.ic("openModal",(function(e){return r.Gc(t),r.lc().changePackageTerms("change",e)}))("calculatePackage",(function(e){return r.Gc(t),r.lc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.lc();r.Ab(1),r.sc("data",t.packageCalculation)("packageRest",t.packageRest)}}function We(t,e){1&t&&(r.Ub(0),r.Rb(1,"j-error-placeholder",8),r.mc(2,"translate"),r.mc(3,"translate"),r.Tb()),2&t&&(r.Ab(1),r.sc("errorText",r.nc(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",r.nc(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function xe(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-error-placeholder",9),r.ic("retried",(function(e){return r.Gc(t),r.lc().getPackageRest()})),r.Vb(),r.Tb()}}function Ve(t,e){1&t&&r.Rb(0,"ngx-skeleton-loader",11),2&t&&r.sc("theme",e.$implicit)}function Ne(t,e){if(1&t&&(r.Ub(0),r.Pc(1,Ve,1,1,"ngx-skeleton-loader",10),r.Tb()),2&t){const t=r.lc();r.Ab(1),r.sc("ngForOf",t.themes)}}let Me=(()=>{class t{constructor(t,e,s,n){this.packageRequestsService=t,this.companyService=e,this.analytics=s,this.modalService=n,this.subscription=new x.a,this.themes=jt}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(t=>{this.companyId=t[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=Ot.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(t=>{var e;this.packageRest=t,this.packageResponseStatus=(null===(e=this.packageRest)||void 0===e?void 0:e.totalCost)?Ot.Success:Ot.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(t=>{403===t.status?(this.packageResponseStatus=Ot.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=Ot.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(t){this.packageRequestsService.calculatePackageCost(this.companyId,t).then(t=>{this.packageCalculation=t}).catch(()=>{this.packageResponseStatus=Ot.Error})}changePackageTerms(t,e){const s=this.modalService.open(he,Gt);s.componentInstance.alertMessageType=t,s.componentInstance.packageTerms=e,s.componentInstance.companyId=this.companyId,s.componentInstance.isSameDay=this.packageRest.isSameDay,s.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,s.componentInstance.refresh.subscribe(({typeUser:t,statusCode:e})=>{this.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:t,Status:e}),this.getPackageRest()}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(t){if(this.packageCalculation=void 0,"change"===t)this.packageResponseStatus=Ot.Change;else if("cancel"===t)this.packageResponseStatus=Ot.Success;else if("reset"===t){const t=new Et(0,0,!1,!1);this.changePackageTerms("connect_standart",t)}}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ne),r.Qb(T.a),r.Qb(fe.b),r.Qb(Tt.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"j-settings-package-header",2),r.ic("resetPackageTerms",(function(t){return e.resetPackageTerms(t)})),r.Vb(),r.Pc(3,Re,2,1,"ng-container",3),r.Pc(4,Oe,2,2,"ng-container",3),r.Pc(5,_e,2,2,"ng-container",3),r.Pc(6,We,4,8,"ng-container",3),r.Pc(7,xe,2,0,"ng-container",3),r.Vb(),r.Pc(8,Ne,2,1,"ng-container",3),r.Vb(),r.Rb(9,"router-outlet",4)),2&t&&(r.sc("ngSwitch",e.packageResponseStatus),r.Ab(2),r.sc("status",e.packageResponseStatus),r.Ab(1),r.sc("ngSwitchCase","success"),r.Ab(1),r.sc("ngSwitchCase","not_found"),r.Ab(1),r.sc("ngSwitchCase","change"),r.Ab(1),r.sc("ngSwitchCase","forbidden"),r.Ab(1),r.sc("ngSwitchCase","error"),r.Ab(1),r.sc("ngSwitchCase","loading"))},directives:[n.y,Pe,n.z,a.h,te,we,H.a,n.t,$.a],pipes:[d.d],encapsulation:2}),t})();var De=s("KJdv");const Ge=[{path:"",component:y,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:St},{path:"authorities",component:et},{path:"password",component:Ct},{path:"package",component:Me,canActivate:[s("RW1d").a],children:[{path:":key",component:De.a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let je=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(Ge)],a.g]}),t})();var Le=s("MN0s");s("qcJj"),s("/Fsc"),s.d(e,"SettingsModule",(function(){return Ue}));let Ue=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[n.c,i.a,je,c.n,c.D,Le.a]]}),t})()}}]);