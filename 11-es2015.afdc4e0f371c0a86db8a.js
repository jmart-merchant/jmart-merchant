(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"E+oP":function(t,e,n){var s=n("A90E"),i=n("QqLw"),o=n("03A+"),c=n("Z0cm"),r=n("MMmD"),a=n("DSRE"),l=n("6sVZ"),b=n("c6wG"),u=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(r(t)&&(c(t)||"string"==typeof t||"function"==typeof t.splice||a(t)||b(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!s(t).length;for(var n in t)if(u.call(t,n))return!1;return!0}},T9EB:function(t,e,n){"use strict";n.r(e);var s=n("ofXK"),i=n("3Pt+"),o=n("tmjD"),c=n("1kSV"),r=n("sYmb"),a=n("xJkR"),l=n("4Nuw"),b=n("Rreu"),u=n("PCNd"),m=n("ObZ0"),d=n("ebvF"),p=n("tyNb"),h=n("gzBp"),f=n("YMfE"),g=n("FSxY"),R=n("gm23"),A=n("eEJz"),y=n("lJxs"),v=n("fXoL"),C=n("bsP8"),T=n("0mgW"),S=n("S1F0"),E=n("oKsb"),N=n("fvpk"),P=n("mrSG"),V=n("2Vo4"),k=n("XNiG"),I=n("itXk"),O=n("LRne"),W=n("EY2u"),j=n("Cfvw"),M=n("/uUt"),x=n("Kj3r"),D=n("JX91"),_=n("zp1y"),w=n("3E0/"),Y=n("eIep"),L=n("JIr8"),U=n("pLZG"),F=n("vkgz"),$=n("IzEk"),B=n("TwVa"),G=n("+/Tu"),K=n("S09V"),H=n("SMdK"),Q=n("SpoB"),q=n("VnnJ"),X=n("B1Ao"),z=n("Kd2e"),Z=n("4oqK"),J=n("Kcpt"),tt=n("oa9T"),et=n("2aJj"),nt=n("zN9f"),st=n("Eajh");function it(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",19),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit,i=v.lc().$implicit;return v.lc().closeModal(i,s)})),v.Wb(1,"div",20),v.Rb(2,"j-entity-logo",21),v.mc(3,"bankFromAccount"),v.Vb(),v.Wb(4,"div",22),v.Wb(5,"p",23),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"p",24),v.Rc(9),v.mc(10,"bankFromAccount"),v.mc(11,"bankFromAccount"),v.Vb(),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit;v.Ab(2),v.sc("name",v.nc(3,5,t.iban)),v.Ab(4),v.Uc("",v.nc(7,7,"PAYMENTS.DICTIONARY.IBAN"),": ",t.iban,""),v.Ab(3),v.Uc(" ",v.nc(10,9,t.iban),": ",v.oc(11,11,t.iban,"name")," ")}}function ot(t,e){if(1&t&&(v.Wb(0,"li"),v.Wb(1,"div",15),v.Wb(2,"p",16),v.Rc(3),v.Vb(),v.Wb(4,"p",17),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Pc(7,it,12,14,"div",18),v.Vb(),v.Vb()),2&t){const t=e.$implicit;v.Ab(3),v.Sc(t.name),v.Ab(2),v.Uc("",v.nc(6,4,"PAYMENTS.DICTIONARY.IIN"),": ",t.iinOrBin,""),v.Ab(2),v.sc("ngForOf",t.accounts)}}function ct(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"p",25),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.DICTIONARY.RECIPIENT_NOT_FOUND")))}let rt=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.recipients=e,this.modal=n,this.collectionSize$=new V.a(0),this.currentPage$=new V.a(0),this.pageSize=10}ngOnInit(){this.recipients.getRecipients(),this.search=new i.h(""),this.list$=Object(I.a)([this.recipients.store.items$.pipe(Object(y.a)(t=>t.filter(t=>!!t.accounts))),this.search.valueChanges.pipe(Object(x.a)(100),Object(M.a)(),Object(D.a)(this.search.value)),this.currentPage$]).pipe(Object(y.a)(([t,e,n])=>{const s=this.recipients.filterRecipients(t,e);return this.collectionSize$.next(s.length>this.pageSize?s.length-this.pageSize:s.length),s.slice(n>1?n*this.pageSize:0,(n+1)*this.pageSize)}))}get page(){return this.currentPage$.getValue()}set page(t){this.currentPage$.next(t)}onClose(){this.modal.dismiss()}closeModal(t,e){this.modal.close({recipient:t,account:e})}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(X.a),v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-recipients-dictionary"]],decls:23,vars:23,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","viewBox","0 0 24 24","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"page","maxSize","rotate","pageSize","collectionSize","pageChange"],[1,"recipient-dict-item"],[1,"recipient-title"],[1,"small","text-gray","mb-2"],["class","account-pill account-pill_gray account-pill_fill",3,"click",4,"ngFor","ngForOf"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"button",1),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(2,"img",2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"div",3),v.Wb(5,"h5"),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",4),v.Wb(9,"j-form-field",5),v.Rb(10,"j-icon",6),v.Rb(11,"input",7),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",8),v.Wb(14,"div",9),v.Wb(15,"div",10),v.Wb(16,"ul",11),v.Pc(17,ot,8,6,"li",12),v.mc(18,"async"),v.Vb(),v.Pc(19,ct,4,3,"div",13),v.mc(20,"async"),v.Wb(21,"ngb-pagination",14),v.ic("pageChange",(function(t){return e.page=t})),v.mc(22,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.tc("alt",v.nc(3,11,"SHARED.CLOSE")),v.Ab(4),v.Sc(v.nc(7,13,"PAYMENTS.DICTIONARY.TITLE")),v.Ab(5),v.sc("placeholder",v.nc(12,15,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",e.search),v.Ab(6),v.sc("ngForOf",v.nc(18,17,e.list$)),v.Ab(2),v.sc("ngIf",0===v.nc(20,19,e.list$).length),v.Ab(2),v.sc("page",e.page)("maxSize",5)("rotate",!0)("pageSize",e.pageSize)("collectionSize",v.nc(22,21,e.collectionSize$)))},directives:[Z.a,J.a,tt.a,et.a,i.c,i.t,i.i,s.t,s.u,c.u,nt.a],pipes:[r.d,s.b,st.a],styles:[".recipient-dict-item{padding:1rem 0}.recipient-dict-item .recipient-title{font-weight:500;font-size:16px}.recipient-dict-item .account-pill{margin-top:.5rem}.recipient-dict-item p{margin-bottom:.5em;line-height:1.4}"],encapsulation:2}),t})();var at=n("bHA9");function lt(t,e){if(1&t){const t=v.Xb();v.Wb(0,"li",14),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc().closeModal(s)})),v.Wb(1,"div",15),v.Rc(2),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit;v.Ab(2),v.Sc(t.label)}}function bt(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"p",16),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.DICTIONARY.KNP_NOT_FOUND")))}let ut=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.dictionaries=e,this.modal=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(I.a)([this.dictionaries.KNPDictionary.items$,this.search.valueChanges.pipe(Object(x.a)(100),Object(M.a)(),Object(D.a)(this.search.value))]).pipe(Object(y.a)(([t,e])=>this.paymentType?this.dictionaries.selectByPaymentType(t,{type:this.paymentType}).filter(t=>this.paymentsS.genericSearchTerm(e,t)).sort((t,e)=>t.code>e.code?1:-1):t.filter(t=>this.paymentsS.genericSearchTerm(e,t)).sort((t,e)=>t.code>e.code?1:-1)))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(at.a),v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-knp-dictionary"]],inputs:{paymentType:"paymentType"},decls:20,vars:13,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"button",1),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(2,"img",2),v.Vb(),v.Wb(3,"div",3),v.Wb(4,"h5"),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Wb(7,"div",4),v.Wb(8,"j-form-field",5),v.Rb(9,"j-icon",6),v.Rb(10,"input",7),v.mc(11,"translate"),v.Vb(),v.Vb(),v.Wb(12,"div",8),v.Wb(13,"div",9),v.Wb(14,"div",10),v.Wb(15,"ul",11),v.Pc(16,lt,3,1,"li",12),v.mc(17,"async"),v.Vb(),v.Pc(18,bt,4,3,"div",13),v.mc(19,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(5),v.Sc(v.nc(6,5,"PAYMENTS.DICTIONARY.TITLE")),v.Ab(5),v.sc("placeholder",v.nc(11,7,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",e.search),v.Ab(6),v.sc("ngForOf",v.nc(17,9,e.list$)),v.Ab(2),v.sc("ngIf",0===v.nc(19,11,e.list$).length))},directives:[Z.a,J.a,tt.a,et.a,i.c,i.t,i.i,s.t,s.u],pipes:[r.d,s.b],styles:[""],encapsulation:2}),t})();function mt(t,e){if(1&t){const t=v.Xb();v.Wb(0,"li",14),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc().closeModal(s)})),v.Wb(1,"p",15),v.Rc(2),v.Vb(),v.Wb(3,"p",16),v.Rc(4),v.mc(5,"translate"),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit;v.Ab(2),v.Sc(t.label),v.Ab(2),v.Uc("",v.nc(5,3,"PAYMENTS.DICTIONARY.BIN"),": ",t.bin,"")}}function dt(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"p",17),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.DICTIONARY.UGD_NOT_FOUND")))}let pt=(()=>{class t{constructor(t,e,n){this.paymentsS=t,this.dictionaries=e,this.modal=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(I.a)(this.dictionaries.UGDictionary.items$,this.search.valueChanges.pipe(Object(x.a)(100),Object(M.a)(),Object(D.a)(this.search.value))).pipe(Object(y.a)(([t,e])=>t.filter(t=>this.paymentsS.ugdSearchFn(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(at.a),v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-ugd-dictionary"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,"m-0","text-wrap"],[1,"p3","text-gray","m-0"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"button",1),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(2,"img",2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"div",3),v.Wb(5,"h5"),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",4),v.Wb(9,"j-form-field",5),v.Rb(10,"j-icon",6),v.Rb(11,"input",7),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",8),v.Wb(14,"div",9),v.Wb(15,"div",10),v.Wb(16,"ul",11),v.Pc(17,mt,6,5,"li",12),v.mc(18,"async"),v.Vb(),v.Pc(19,dt,4,3,"div",13),v.mc(20,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.tc("alt",v.nc(3,6,"SHARED.CLOSE")),v.Ab(4),v.Sc(v.nc(7,8,"PAYMENTS.DICTIONARY.UGD_TITLE")),v.Ab(5),v.sc("placeholder",v.nc(12,10,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",e.search),v.Ab(6),v.sc("ngForOf",v.nc(18,12,e.list$)),v.Ab(2),v.sc("ngIf",0===v.nc(20,14,e.list$).length))},directives:[Z.a,J.a,tt.a,et.a,i.c,i.t,i.i,s.t,s.u],pipes:[r.d,s.b],styles:[""],encapsulation:2}),t})();var ht=n("HghS");function ft(t,e){if(1&t){const t=v.Xb();v.Wb(0,"li",14),v.Wb(1,"div",15),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc().closeModal(s)})),v.Wb(2,"div",16),v.Rb(3,"j-entity-logo",17),v.Vb(),v.Wb(4,"div",18),v.Wb(5,"p",19),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"p",20),v.Rc(9),v.Vb(),v.Vb(),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit;v.Ab(3),v.sc("name",t.bic),v.Ab(3),v.Sc(t.salaryTransitIban?v.nc(7,4,"PAYMENTS.BANKS_RECEIVERS.IBAN")+t.salaryTransitIban:t.name),v.Ab(3),v.Uc("",t.bic,": ",t.name,"")}}function gt(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"p",21),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.BANKS_RECEIVERS.NOT_FOUND")))}let Rt=(()=>{class t{constructor(t,e,n){this.modal=t,this.paymentsS=e,this.dict=n}ngOnInit(){this.search=new i.h(""),this.list$=Object(I.a)(this.dict.bankDictionary.items$,this.search.valueChanges.pipe(Object(x.a)(100),Object(M.a)(),Object(D.a)(this.search.value))).pipe(Object(y.a)(([t,e])=>t.filter(t=>this.paymentsS.bankReceiverSearchFn(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(c.a),v.Qb(T.c),v.Qb(at.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-banks-receivers"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-2"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"button",1),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(2,"img",2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"div",3),v.Wb(5,"h5"),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",4),v.Wb(9,"j-form-field",5),v.Rb(10,"j-icon",6),v.Rb(11,"input",7),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",8),v.Wb(14,"div",9),v.Wb(15,"div",10),v.Wb(16,"ul",11),v.Pc(17,ft,10,6,"li",12),v.mc(18,"async"),v.Vb(),v.Pc(19,gt,4,3,"div",13),v.mc(20,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.tc("alt",v.nc(3,6,"SHARED.CLOSE")),v.Ab(4),v.Sc(v.nc(7,8,"PAYMENTS.BANKS_RECEIVERS.SEARCH")),v.Ab(5),v.sc("placeholder",v.nc(12,10,"PAYMENTS.BANKS_RECEIVERS.SEARCH"))("formControl",e.search),v.Ab(6),v.sc("ngForOf",v.nc(18,12,e.list$)),v.Ab(2),v.sc("ngIf",!v.nc(20,14,e.list$)))},directives:[Z.a,J.a,tt.a,et.a,i.c,i.t,i.i,s.t,s.u,nt.a],pipes:[r.d,s.b],styles:[""]}),t})();function At(t,e){if(1&t){const t=v.Xb();v.Wb(0,"li",14),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc().closeModal(s)})),v.Wb(1,"div",15),v.Rc(2),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit;v.Ab(2),v.Sc(t.label||t.description)}}function yt(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"p",16),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.DICTIONARY.NOT_FOUND")))}let vt=(()=>{class t{constructor(t,e){this.paymentsS=t,this.modal=e,this.searchPlaceholder="PAYMENTS.DICTIONARY.SEARCH",this.title="PAYMENTS.DICTIONARY.TITLE"}ngOnInit(){this.search=new i.h(""),this.list$=Object(I.a)(this.store.items$,this.search.valueChanges.pipe(Object(x.a)(100),Object(M.a)(),Object(D.a)(this.search.value))).pipe(Object(y.a)(([t,e])=>t.filter(t=>this.searchFn?this.searchFn(e,t):this.paymentsS.genericSearchTerm(e,t))))}closeModal(t){this.modal.close(t)}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-generic-dictionary"]],inputs:{store:"store",searchFn:"searchFn",searchPlaceholder:"searchPlaceholder",title:"title"},decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"button",1),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(2,"img",2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"div",3),v.Wb(5,"h5"),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",4),v.Wb(9,"j-form-field",5),v.Rb(10,"j-icon",6),v.Rb(11,"input",7),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",8),v.Wb(14,"div",9),v.Wb(15,"div",10),v.Wb(16,"ul",11),v.Pc(17,At,3,1,"li",12),v.mc(18,"async"),v.Vb(),v.Pc(19,yt,4,3,"div",13),v.mc(20,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.tc("alt",v.nc(3,6,"SHARED.CLOSE")),v.Ab(4),v.Sc(v.nc(7,8,e.title)),v.Ab(5),v.sc("placeholder",v.nc(12,10,e.searchPlaceholder))("formControl",e.search),v.Ab(6),v.sc("ngForOf",v.nc(18,12,e.list$)),v.Ab(2),v.sc("ngIf",0===v.nc(20,14,e.list$).length))},directives:[Z.a,J.a,tt.a,et.a,i.c,i.t,i.i,s.t,s.u],pipes:[r.d,s.b],styles:[""],encapsulation:2}),t})();var Ct=n("Stn5");let Tt=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Kb({type:t,selectors:[["j-bic-info"]],decls:13,vars:12,consts:[[1,"p4"],[3,"innerHTML"]],template:function(t,e){1&t&&(v.Wb(0,"article",0),v.Wb(1,"p"),v.Wb(2,"strong"),v.Rc(3),v.mc(4,"translate"),v.Vb(),v.Vb(),v.Rb(5,"p",1),v.mc(6,"translate"),v.Wb(7,"p"),v.Wb(8,"strong"),v.Rc(9),v.mc(10,"translate"),v.Vb(),v.Vb(),v.Rb(11,"p",1),v.mc(12,"translate"),v.Vb()),2&t&&(v.Ab(3),v.Tc(" ",v.nc(4,4,"PAYMENTS.BIC_INFO.SWIFT.TITLE")," "),v.Ab(2),v.sc("innerHTML",v.nc(6,6,"PAYMENTS.BIC_INFO.SWIFT.DESCRIPTION"),v.Hc),v.Ab(4),v.Tc(" ",v.nc(10,8,"PAYMENTS.BIC_INFO.BIC.TITLE")," "),v.Ab(2),v.sc("innerHTML",v.nc(12,10,"PAYMENTS.BIC_INFO.BIC.DESCRIPTION"),v.Hc))},pipes:[r.d],styles:[""]}),t})(),St=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Kb({type:t,selectors:[["j-iban-info"]],decls:4,vars:0,consts:[["translate","",1,"p2","font-weight-medium"],["translate","",1,"p4"]],template:function(t,e){1&t&&(v.Wb(0,"p",0),v.Rc(1,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.TITLE"),v.Vb(),v.Wb(2,"p",1),v.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.DESCRIPTION"),v.Vb())},directives:[r.a],styles:[""]}),t})();var Et=n("quSY"),Nt=n("O/Ur"),Pt=n("QfCG"),Vt=n("BV3K"),kt=n("SfXN"),It=n("e8Ap"),Ot=n("jRXw"),Wt=n("4cI0");const jt=["input"],Mt=function(){return{width:"100%",height:"56px","background-color":"#ECEEF1"}};function xt(t,e){1&t&&(v.Wb(0,"div",7),v.Rb(1,"ngx-skeleton-loader",8),v.Vb()),2&t&&(v.Ab(1),v.sc("theme",v.wc(1,Mt)))}function Dt(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",10),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc(2).onBankSelect(s)})),v.Rc(1),v.Vb()}if(2&t){const t=e.$implicit,n=v.lc(2);v.Ab(1),v.Tc(" ",n.mapBankLabel(t)," ")}}function _t(t,e){if(1&t&&(v.Wb(0,"div",7),v.Pc(1,Dt,2,1,"div",9),v.Vb()),2&t){const t=v.lc();v.Ab(1),v.sc("ngForOf",t.banks)}}function wt(t,e){1&t&&(v.Ub(0),v.Rb(1,"j-empty-placeholder",13),v.Tb())}function Yt(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate")),2&t){const t=v.lc(2);v.Tc(" ",v.nc(1,1,t.placeholderText)," ")}}function Lt(t,e){if(1&t&&(v.Wb(0,"div",7),v.Pc(1,wt,2,0,"ng-container",11),v.Pc(2,Yt,2,3,"ng-template",null,12,v.Qc),v.Vb()),2&t){const t=v.Dc(3),e=v.lc();v.Ab(1),v.sc("ngIf",(null==e.labelControl?null:null==e.labelControl.value?null:e.labelControl.value.length)>0)("ngIfElse",t)}}function Ut(t,e){1&t&&v.Rb(0,"j-bic-info")}let Ft=(()=>{class t{constructor(t){this.currencyPaymentService=t,this.labelText="CURRENCY_PAYMENT.RECIPIENT.BIC",this.placeholderText="CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED",this.isLoading=!1,this.isBicFocused=!1,this.subscription=new Et.a}selectByBic(t){return Object(P.a)(this,void 0,void 0,(function*(){yield this.retrieveBanks(t);const e=this.banks.find(e=>e.bic==t);if(e)return this.onBankSelect(e)}))}ngOnInit(){this.listenBankSearch()}ngOnDestroy(){this.subscription.unsubscribe()}focus(){setTimeout(()=>{this.input.nativeElement.focus()},100)}onBicFocus(t){this.isBicFocused=!0,this.labelControl.setValue(""),this.banks=[]}onBicBlur(t){setTimeout(()=>{this.isBicFocused=!1},300)}mapBankLabel(t){return`${t.bic} - ${t.name}`}onBankSelect(t){this.labelControl.setValue(this.mapBankLabel(t),{emitEvent:!1}),this.bankControl.setValue(t)}listenBankSearch(){var t;this.subscription.add(null===(t=this.labelControl)||void 0===t?void 0:t.valueChanges.pipe(Object(x.a)(300)).pipe(Object(M.a)()).subscribe(t=>{var e;(null===(e=t)||void 0===e?void 0:e.length)>=1&&this.retrieveBanks(t,this.countryCode)}))}retrieveBanks(t,e=null){var n;return Object(P.a)(this,void 0,void 0,(function*(){this.isLoading=!0;const s=(null===(n=e)||void 0===n?void 0:n.substring(0,2))||null;try{this.banks=yield this.currencyPaymentService.getBanks(t,s)}catch(i){}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(Nt.b))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-foreign-bank-select"]],viewQuery:function(t,e){var n;1&t&&v.Wc(jt,!0),2&t&&v.Cc(n=v.jc())&&(e.input=n.first)},inputs:{labelControl:"labelControl",bankControl:"bankControl",countryCode:"countryCode",errorMessages:"errorMessages",labelText:"labelText",placeholderText:"placeholderText"},decls:14,vars:14,consts:[["type","text","jFormInput","","jFocusOnReturn","",1,"form-control","bic-input",3,"formControl","focus","blur"],["input",""],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-medium","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[3,"control","errorMessages"],[1,"bic-dropdown",3,"hidden"],["class","bic-dropdown-body",4,"ngIf"],["bicInfo",""],[1,"bic-dropdown-body"],["count","4",3,"theme"],["class","j-option-label text-wrap",3,"click",4,"ngFor","ngForOf"],[1,"j-option-label","text-wrap",3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],["label","SHARED.SEARCH_NOT_FOUND"]],template:function(t,e){if(1&t&&(v.Wb(0,"j-form-field"),v.Wb(1,"j-label"),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"input",0,1),v.ic("focus",(function(t){return e.onBicFocus(t)}))("blur",(function(t){return e.onBicBlur(t)})),v.Vb(),v.Rb(6,"a",2),v.Rb(7,"j-error",3),v.Vb(),v.Wb(8,"div",4),v.Pc(9,xt,2,2,"div",5),v.Pc(10,_t,2,1,"div",5),v.Pc(11,Lt,4,2,"div",5),v.Vb(),v.Pc(12,Ut,1,0,"ng-template",null,6,v.Qc)),2&t){const t=v.Dc(13);v.Ab(2),v.Sc(v.nc(3,12,e.labelText)),v.Ab(2),v.Hb("has-dropdown",null==e.banks?null:e.banks.length),v.sc("formControl",e.labelControl),v.Ab(2),v.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(1),v.sc("control",e.labelControl)("errorMessages",e.errorMessages),v.Ab(1),v.sc("hidden",!e.isBicFocused),v.Ab(1),v.sc("ngIf",e.isLoading),v.Ab(1),v.sc("ngIf",!e.isLoading&&(null==e.banks?null:e.banks.length)),v.Ab(1),v.sc("ngIf",!(e.isLoading||null!=e.banks&&e.banks.length))}},directives:[Z.a,Pt.a,et.a,i.c,Vt.a,i.t,i.i,kt.a,c.E,It.a,Ot.a,s.u,a.a,s.t,Wt.a,Tt],pipes:[r.d],styles:["[_nghost-%COMP%]{display:block;position:relative}.bic-dropdown[_ngcontent-%COMP%]{border-radius:0 8px 8px 0;left:0;right:0;padding:1.5rem;background:#fff;position:absolute;max-height:300px;height:30vh;z-index:1000;box-shadow:0 14px 16px rgba(0,0,0,.05)}.bic-dropdown[_ngcontent-%COMP%]   .j-option-label[_ngcontent-%COMP%]{cursor:pointer}.bic-input.has-dropdown[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.bic-dropdown-body[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;height:100%;overflow-y:auto;padding-right:.5rem}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}"]}),t})();var $t=n("Kx/q"),Bt=n("fK/r"),Gt=n("PGAL"),Kt=n("Hjq/");function Ht(t,e){if(1&t&&(v.Wb(0,"div",32),v.Rc(1),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.Sc(null==t.primaryRecipient?null:t.primaryRecipient.name)}}function Qt(t,e){if(1&t&&(v.Wb(0,"div",26),v.Wb(1,"div",27),v.Wb(2,"span",28),v.Rc(3,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CONTRACT_TYPE"),v.Vb(),v.Rc(4,": "),v.Vb(),v.Wb(5,"div",29),v.Rc(6),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(6),v.Tc(" ",t.contract.type.description," ")}}function qt(t,e){if(1&t&&(v.Wb(0,"div",26),v.Wb(1,"div",27),v.Wb(2,"span",28),v.Rc(3,"CONTRACTS.DETAILS.UNK"),v.Vb(),v.Rc(4,": "),v.Vb(),v.Wb(5,"div",29),v.Rc(6),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(6),v.Tc(" ",t.contract.registrationNumberContract," ")}}function Xt(t,e){if(1&t&&(v.Wb(0,"div",26),v.Wb(1,"div",27),v.Wb(2,"span",28),v.Rc(3,"CONTRACTS.DETAILS.UNK_DATE"),v.Vb(),v.Rc(4,": "),v.Vb(),v.Wb(5,"div",29),v.Rc(6),v.mc(7,"date"),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(6),v.Tc(" ",v.oc(7,1,t.contract.documentDate,"d MMMM yyyy")," ")}}function zt(t,e){1&t&&(v.Wb(0,"span"),v.Rc(1," 1"),v.Vb())}function Zt(t,e){if(1&t&&(v.Wb(0,"section",20),v.Wb(1,"j-collapsible"),v.Wb(2,"j-collapsible-trigger"),v.Wb(3,"div",21),v.Wb(4,"h5",11),v.Wb(5,"span",28),v.Rc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),v.Vb(),v.Pc(7,zt,2,0,"span",33),v.Vb(),v.Rb(8,"span",23),v.Vb(),v.Vb(),v.Wb(9,"j-collapsible-body"),v.Wb(10,"div",24),v.Wb(11,"div",26),v.Wb(12,"div",27),v.Wb(13,"span",28),v.Rc(14,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),v.Vb(),v.Rc(15,": "),v.Vb(),v.Wb(16,"div",29),v.Rc(17),v.Vb(),v.Vb(),v.Wb(18,"div",26),v.Wb(19,"div",27),v.Wb(20,"span",28),v.Rc(21,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),v.Vb(),v.Rc(22,": "),v.Vb(),v.Wb(23,"div",29),v.Rc(24),v.Vb(),v.Vb(),v.Wb(25,"div",26),v.Wb(26,"div",27),v.Wb(27,"span",28),v.Rc(28,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.CITY"),v.Vb(),v.Rc(29,": "),v.Vb(),v.Wb(30,"div",29),v.Rc(31),v.Vb(),v.Vb(),v.Wb(32,"div",26),v.Wb(33,"div",27),v.Wb(34,"span",28),v.Rc(35,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.BANK"),v.Vb(),v.Rc(36,": "),v.Vb(),v.Wb(37,"div",29),v.Rc(38),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(7),v.sc("ngIf",(null==t.extraRecipients?null:t.extraRecipients.length)>0),v.Ab(10),v.Tc(" ",t.primaryRecipient.name," "),v.Ab(7),v.Tc(" ",t.mapCountry(t.primaryRecipient)," "),v.Ab(7),v.Tc(" ",t.primaryRecipient.cityName||t.primaryRecipient.defaultCityName||"-"," "),v.Ab(7),v.Tc(" ",t.mapBank(t.primaryRecipient)," ")}}function Jt(t,e){if(1&t&&(v.Wb(0,"section",20),v.Wb(1,"j-collapsible"),v.Wb(2,"j-collapsible-trigger"),v.Wb(3,"div",21),v.Wb(4,"h5",11),v.Wb(5,"span",28),v.Rc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),v.Vb(),v.Wb(7,"span"),v.Rc(8),v.Vb(),v.Vb(),v.Rb(9,"span",23),v.Vb(),v.Vb(),v.Wb(10,"j-collapsible-body"),v.Wb(11,"div",24),v.Wb(12,"div",26),v.Wb(13,"div",27),v.Wb(14,"span",28),v.Rc(15,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),v.Vb(),v.Rc(16,": "),v.Vb(),v.Wb(17,"div",29),v.Rc(18),v.Vb(),v.Vb(),v.Wb(19,"div",26),v.Wb(20,"div",27),v.Wb(21,"span",28),v.Rc(22,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),v.Vb(),v.Rc(23,": "),v.Vb(),v.Wb(24,"div",29),v.Rc(25),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t){const t=e.$implicit,n=e.index,s=v.lc(2);v.Ab(8),v.Tc(" ",n+2,""),v.Ab(10),v.Tc(" ",t.name," "),v.Ab(7),v.Tc(" ",s.mapCountry(t)," ")}}function te(t,e){if(1&t){const t=v.Xb();v.Wb(0,"section",1),v.Wb(1,"div",2),v.ic("click",(function(e){return v.Gc(t),v.lc().close()})),v.Vb(),v.Wb(2,"section",3),v.Wb(3,"section",4),v.Wb(4,"article",5),v.Rb(5,"span",6),v.Wb(6,"span",7),v.Rc(7,"CURRENCY_PAYMENT.CONTRACTS.STATUS.REGED"),v.Vb(),v.Vb(),v.Wb(8,"a",8),v.ic("click",(function(e){return v.Gc(t),v.lc().close(e)})),v.Vb(),v.Vb(),v.Wb(9,"section",9),v.Wb(10,"section",10),v.Wb(11,"h3",11),v.Wb(12,"span",12),v.Rc(13,"\u2116"),v.Vb(),v.Rc(14),v.Vb(),v.Pc(15,Ht,2,1,"div",13),v.Wb(16,"div",14),v.Wb(17,"div",15),v.Rb(18,"small",16),v.Wb(19,"div",17),v.Rb(20,"j-money",18),v.Vb(),v.Vb(),v.Wb(21,"div",15),v.Rb(22,"small",19),v.Wb(23,"div",17),v.Rb(24,"j-money",18),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(25,"section",20),v.Wb(26,"j-collapsible"),v.Wb(27,"j-collapsible-trigger"),v.Wb(28,"div",21),v.Wb(29,"h5",22),v.Rc(30,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.TITLE"),v.Vb(),v.Rb(31,"span",23),v.Vb(),v.Vb(),v.Wb(32,"j-collapsible-body"),v.Wb(33,"div",24),v.Pc(34,Qt,7,1,"div",25),v.Wb(35,"div",26),v.Wb(36,"div",27),v.Wb(37,"span",28),v.Rc(38,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_FROM"),v.Vb(),v.Rc(39,": "),v.Vb(),v.Wb(40,"div",29),v.Rc(41),v.mc(42,"date"),v.Vb(),v.Vb(),v.Wb(43,"div",26),v.Wb(44,"div",27),v.Wb(45,"span",28),v.Rc(46,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_TO"),v.Vb(),v.Rc(47,": "),v.Vb(),v.Wb(48,"div",29),v.Rc(49),v.mc(50,"date"),v.Vb(),v.Vb(),v.Pc(51,qt,7,1,"div",25),v.Pc(52,Xt,8,4,"div",25),v.Wb(53,"div",26),v.Wb(54,"div",27),v.Wb(55,"span",28),v.Rc(56,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CURRENCIES"),v.Vb(),v.Rc(57,": "),v.Vb(),v.Wb(58,"div",29),v.Rc(59),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Pc(60,Zt,39,5,"section",30),v.Pc(61,Jt,26,3,"section",31),v.Vb(),v.Vb(),v.Vb()}if(2&t){const t=v.lc();v.Hb("is-shown",t.isShown),v.Ab(2),v.Hb("is-shown",t.isShown),v.Ab(3),v.sc("inlineSVG","/assets/icons/counterparty/status.svg"),v.Ab(9),v.Tc(" ",t.contract.contractNumber," "),v.Ab(1),v.sc("ngIf",0==(null==t.extraRecipients?null:t.extraRecipients.length)),v.Ab(5),v.sc("money",t.contract.amount),v.Ab(4),v.sc("money",t.contract.remainder),v.Ab(10),v.sc("ngIf",t.contract.type),v.Ab(7),v.Tc("",v.oc(42,17,t.contract.dateFrom,"d MMMM yyyy")," "),v.Ab(8),v.Tc("",v.oc(50,20,t.contract.dateTo,"d MMMM yyyy")," "),v.Ab(2),v.sc("ngIf",t.contract.registrationNumberContract),v.Ab(1),v.sc("ngIf",t.contract.documentDate),v.Ab(7),v.Tc("",t.contract.permittedCurrencies.join(", ")," "),v.Ab(1),v.sc("ngIf",t.primaryRecipient),v.Ab(1),v.sc("ngForOf",t.extraRecipients)}}let ee=(()=>{class t{constructor(t,e){this.document=t,this.translateService=e,this.isShown=!1}get primaryRecipient(){var t;return null===(t=this.contract.recipients)||void 0===t?void 0:t.find(t=>t.primary)}get extraRecipients(){var t;return null===(t=this.contract.recipients)||void 0===t?void 0:t.filter(t=>!t.primary)}mapBank(t){const{bankBic:e,bankName:n}=t;return`${e}${e?n?`- ${n}`:"":n||""}`}mapCountry(t){var e,n,s,i;if(t.country){const i=t.country.code;let o="";switch(this.translateService.currentLang){case"ru":default:o=null===(e=t.country)||void 0===e?void 0:e.nameRu;case"kk":o=null===(n=t.country)||void 0===n?void 0:n.nameKk;case"en":o=null===(s=t.country)||void 0===s?void 0:s.nameEn}return`${i} - ${o}`}return t.primary&&(null===(i=this.contract.contractor)||void 0===i?void 0:i.country)?`${this.contract.contractor.country.code} - ${this.contract.contractor.country.name}`:t.countryCode?t.countryCode:"-"}ngOnDestroy(){this.close()}show(){this.document.body.classList.add("overflow-hidden"),this.isShown=!0}close(t=null){var e;null===(e=t)||void 0===e||e.preventDefault(),this.document.body.classList.remove("overflow-hidden"),this.isShown=!1}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(s.e),v.Qb(r.e))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-fx-contract-details"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","f-page-wrapper",3,"is-shown",4,"ngIf"],[1,"f-page-wrapper"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","fx"],[1,"fx__header"],[1,"fx__status"],[1,"text-success",3,"inlineSVG"],["translate","",1,"text-muted","ml-3","p3"],["href","#","inlineSVG","assets/icons/payments/close.svg",1,"fx__close","ml-auto",3,"click"],[1,"fx__scrollable"],[1,"fx__block","py-3","mt-0"],[1,"mb-0"],[1,"text-light"],["class","p2",4,"ngIf"],[1,"fx__amounts"],[1,"fx__amounts-item"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.AMOUNT",1,"text-muted"],[1,"text-dark"],[3,"money"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.REMAINDER",1,"text-muted","p4"],[1,"fx__block","fx__block--collapsible"],[1,"fx__collapse","d-flex","align-items-center"],["translate","",1,"mb-0"],["inlineSVG","assets/icons/payments/collapse.svg",1,"ml-auto","text-primary","fx__arrow"],[1,"fx__body","p2"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],[1,"text-muted","j-desc-child"],["translate",""],[1,"text-dark","j-desc-child"],["class","fx__block fx__block--collapsible",4,"ngIf"],["class","fx__block fx__block--collapsible",4,"ngFor","ngForOf"],[1,"p2"],[4,"ngIf"]],template:function(t,e){1&t&&v.Pc(0,te,62,23,"section",0),2&t&&v.sc("ngIf",e.contract)},directives:[s.u,It.a,r.a,$t.a,Bt.a,Gt.a,Kt.a,s.t],pipes:[s.f],styles:[".fx{padding:1rem;width:100%;max-width:425px}.fx__header{-webkit-box-pack:justify;justify-content:space-between;margin-top:.5rem;margin-bottom:1.5rem}.fx__header,.fx__status{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.fx__status{padding-left:1rem}.fx__scrollable{-webkit-box-flex:1;flex-grow:1;overflow-y:auto}.fx__scrollable::-webkit-scrollbar{width:8px}.fx__scrollable::-webkit-scrollbar-track{background:#fff}.fx__scrollable::-webkit-scrollbar-thumb{background:#d6dadf;border-radius:10px}.fx__collapse{padding:1rem 0}.j-collapsed .fx__body{padding-bottom:1rem}.j-collapsed .fx__collapse .fx__arrow{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.fx__block{background:#fff;border-radius:.5rem;padding:1.5rem 1rem;margin:.75rem 0}.fx__block--collapsible{padding-top:0;padding-bottom:0}.fx__arrow,.fx__block--collapsible{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.fx__arrow{-webkit-transform:rotate(540deg);transform:rotate(540deg)}.fx__collapse{cursor:pointer;-webkit-box-align:center;align-items:center}.fx__link{color:#1586bb;display:-webkit-box;display:flex;padding-left:1rem;padding-right:1rem;width:100%}.fx__link:hover{color:#ef5630}.fx__icon{margin-right:.5rem;display:block}.fx__amounts{display:-webkit-box;display:flex;border-top:1px solid #eceef1;margin-top:1.5rem;padding-top:1rem}.fx__amounts-item{-webkit-box-flex:1;flex-grow:1}.fx__amounts-item small{display:block;margin-bottom:.25rem}"],encapsulation:2}),t})();var ne=n("UoEe"),se=n("SCaJ"),ie=n("tepA");function oe(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",4),v.ic("click",(function(n){v.Gc(t);const s=e.$implicit;return v.lc().onSelect(s)})),v.Wb(1,"div",5),v.Rb(2,"span",6),v.Rc(3,": "),v.Rb(4,"span",7),v.mc(5,"highlight"),v.mc(6,"formatIban"),v.Vb(),v.Wb(7,"div",8),v.Rb(8,"span",7),v.mc(9,"highlight"),v.Rc(10,": "),v.Rb(11,"span",7),v.mc(12,"highlight"),v.Vb(),v.Vb()}if(2&t){const t=e.$implicit,n=v.lc();v.Ab(4),v.sc("innerHTML",v.oc(5,3,v.nc(6,6,t.iban),n.searchTerm),v.Hc),v.Ab(4),v.sc("innerHTML",v.oc(9,8,t.bic,n.searchTerm),v.Hc),v.Ab(3),v.sc("innerHTML",v.oc(12,11,t.bankName,n.searchTerm),v.Hc)}}let ce=(()=>{class t{constructor(t){this.translateService=t,this.selected=new v.n}get countryName(){var t,e,n,s,i,o;switch(this.translateService.currentLang){case"ru":default:return null===(e=null===(t=this.recipient)||void 0===t?void 0:t.country)||void 0===e?void 0:e.nameRu;case"kk":return null===(s=null===(n=this.recipient)||void 0===n?void 0:n.country)||void 0===s?void 0:s.nameKk;case"en":return null===(o=null===(i=this.recipient)||void 0===i?void 0:i.country)||void 0===o?void 0:o.nameEn}}onSelect(t){this.selected.emit({recipient:this.recipient,account:t})}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(r.e))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-foreign-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:6,vars:9,consts:[[1,"recipient"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],[1,"text-muted","p3","recipient__country",3,"innerHTML"],["class","recipient__account p3",3,"click",4,"ngFor","ngForOf"],[1,"recipient__account","p3",3,"click"],[1,"text-dark"],["translate","CURRENCY_PAYMENT.DICTIONARY.IBAN"],[3,"innerHTML"],[1,"text-muted"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Rb(1,"h5",1),v.mc(2,"highlight"),v.Rb(3,"div",2),v.mc(4,"highlight"),v.Pc(5,oe,13,14,"div",3),v.Vb()),2&t&&(v.Ab(1),v.sc("innerHTML",v.oc(2,3,e.recipient.name,e.searchTerm),v.Hc),v.Ab(2),v.sc("innerHTML",v.oc(4,6,e.countryName,e.searchTerm),v.Hc),v.Ab(2),v.sc("ngForOf",e.recipient.accounts))},directives:[s.t,r.a],pipes:[se.a,ie.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();function re(t,e){1&t&&v.Rb(0,"j-empty-placeholder",9)}function ae(t,e){1&t&&v.Rb(0,"j-empty-placeholder",10)}function le(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-foreign-recipient",11),v.ic("selected",(function(e){return v.Gc(t),v.lc().onRecipientSelect(e)})),v.Vb()}if(2&t){const t=e.$implicit,n=v.lc();v.sc("recipient",t)("searchTerm",n.searchTerm)}}let be=(()=>{class t{constructor(t,e){this.modal=t,this.recipientsService=e,this.searchTerm="",this.loadRecipients()}ngOnInit(){}loadRecipients(){return Object(P.a)(this,void 0,void 0,(function*(){this.recipients=yield this.recipientsService.getForeignRecipients(),this.filteredRecipients=[...this.recipients]}))}onQueryChange(t){return Object(P.a)(this,void 0,void 0,(function*(){this.searchTerm=t,this.filteredRecipients=yield this.recipientsService.getForeignRecipients(t)}))}onRecipientSelect(t){this.modal.close(t)}onClose(){this.modal.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(c.a),v.Qb(X.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-foreign-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"div",1),v.Rb(2,"h5",2),v.Wb(3,"div",3),v.Wb(4,"j-search-input",4),v.ic("valueChanged",(function(t){return e.onQueryChange(t)})),v.Vb(),v.Vb(),v.Vb(),v.Pc(5,re,1,0,"j-empty-placeholder",5),v.Pc(6,ae,1,0,"j-empty-placeholder",6),v.Wb(7,"div",7),v.Pc(8,le,1,2,"j-foreign-recipient",8),v.Vb(),v.Vb()),2&t&&(v.Ab(4),v.sc("placeholder","CURRENCY_PAYMENT.DICTIONARY.SEARCH"),v.Ab(1),v.sc("ngIf",0==(null==e.recipients?null:e.recipients.length)),v.Ab(1),v.sc("ngIf",(null==e.recipients?null:e.recipients.length)>0&&0==(null==e.filteredRecipients?null:e.filteredRecipients.length)),v.Ab(2),v.sc("ngForOf",e.filteredRecipients))},directives:[r.a,ne.a,s.u,s.t,Wt.a,ce],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();var ue=n("q46q");function me(t,e){if(1&t&&(v.Rb(0,"div",3),v.mc(1,"highlight")),2&t){const t=v.lc();v.sc("innerHTML",v.oc(1,1,t.bic,t.searchTerm),v.Hc)}}let de=(()=>{class t{constructor(){this.selected=new v.n}get bic(){if(this.recipient.bankBic&&this.recipient.bankName)return`${this.recipient.bankBic} - ${this.recipient.bankName}`}onSelect(){this.selected.emit(this.recipient)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Kb({type:t,selectors:[["j-foreign-contracts-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:4,vars:5,consts:[[1,"recipient__account","p3","mt-3","pt-3",3,"click"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],["class","text-muted p3 recipient__country mb-0",3,"innerHTML",4,"ngIf"],[1,"text-muted","p3","recipient__country","mb-0",3,"innerHTML"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.ic("click",(function(t){return e.onSelect()})),v.Rb(1,"h5",1),v.mc(2,"highlight"),v.Pc(3,me,2,4,"div",2),v.Vb()),2&t&&(v.Ab(1),v.sc("innerHTML",v.oc(2,2,e.recipient.name,e.searchTerm),v.Hc),v.Ab(2),v.sc("ngIf",e.bic))},directives:[s.u],pipes:[se.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})();function pe(t,e){1&t&&v.Rb(0,"j-empty-placeholder",9)}function he(t,e){1&t&&v.Rb(0,"j-empty-placeholder",10)}function fe(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-foreign-contracts-recipient",11),v.ic("selected",(function(e){return v.Gc(t),v.lc().onRecipientSelect(e)})),v.Vb()}if(2&t){const t=e.$implicit,n=v.lc();v.sc("recipient",t)("searchTerm",n.searchTerm)}}let ge=(()=>{class t{constructor(t){this.modal=t,this.searchTerm=""}ngOnInit(){this.filteredRecipients=[...this.recipients]}onQueryChange(t){return Object(P.a)(this,void 0,void 0,(function*(){this.searchTerm=t,t||(this.filteredRecipients=[...this.recipients]),this.filteredRecipients=this.recipients.filter(e=>this.includesQuery(e.name,t)||this.includesQuery(e.bankBic,t))}))}onRecipientSelect(t){this.modal.close(t)}onClose(){this.modal.dismiss()}includesQuery(t,e){var n,s;return null===(n=t)||void 0===n?void 0:n.toLowerCase().includes(null===(s=e)||void 0===s?void 0:s.toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-foreign-contracts-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"div",1),v.Rb(2,"h5",2),v.Wb(3,"div",3),v.Wb(4,"j-search-input",4),v.ic("valueChanged",(function(t){return e.onQueryChange(t)})),v.Vb(),v.Vb(),v.Vb(),v.Pc(5,pe,1,0,"j-empty-placeholder",5),v.Pc(6,he,1,0,"j-empty-placeholder",6),v.Wb(7,"div",7),v.Pc(8,fe,1,2,"j-foreign-contracts-recipient",8),v.Vb(),v.Vb()),2&t&&(v.Ab(4),v.sc("placeholder","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.SEARCH"),v.Ab(1),v.sc("ngIf",0==(null==e.recipients?null:e.recipients.length)),v.Ab(1),v.sc("ngIf",(null==e.recipients?null:e.recipients.length)>0&&0==(null==e.filteredRecipients?null:e.filteredRecipients.length)),v.Ab(2),v.sc("ngForOf",e.filteredRecipients))},directives:[r.a,ne.a,s.u,s.t,Wt.a,de],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),t})(),Re=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){}close(){this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(c.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-iin-check-error"]],decls:15,vars:9,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(v.Wb(0,"div",0),v.Wb(1,"div",1),v.Wb(2,"button",2),v.ic("click",(function(t){return e.modal.dismiss()})),v.Rb(3,"img",3),v.mc(4,"translate"),v.Vb(),v.Vb(),v.Wb(5,"div",4),v.Wb(6,"div",5),v.Wb(7,"h5"),v.Rc(8),v.mc(9,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Wb(10,"div",6),v.Wb(11,"div",7),v.Wb(12,"button",8),v.ic("click",(function(t){return e.close()})),v.Rc(13),v.mc(14,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(3),v.tc("alt",v.nc(4,3,"SHARED.CLOSE")),v.Ab(5),v.Sc(v.nc(9,5,"PAYMENTS.IIN_CHECK_ERROR")),v.Ab(5),v.Tc("",v.nc(14,7,"SHARED.CLOSE")," "))},pipes:[r.d],styles:[""]}),t})();var Ae=n("JPBo"),ye=n("CVrE"),ve=n("PqYM"),Ce=n("CqXF"),Te=n("w1tV"),Se=n("wd/R"),Ee=n("E+oP"),Ne=n.n(Ee),Pe=n("AytR");const Ve=["formDirective"],ke=["senderAccountDropdown"];let Ie=(()=>{class t{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m){this.form=t,this.api=e,this.route=n,this.router=s,this.companyService=i,this.paymentsService=o,this.maskService=c,this.modals=r,this.dictionaries=a,this.pipeline=l,this.translateService=b,this.authorityPermissionsService=u,this.featureFlagsService=m,this.isRestricted=!1,this.PAYMENT_STATUS=B.i,this.SPINNER="BasePaymentContainer",this.restoredData={},this.amountMessage$=new V.a(""),this.periodMessage$=new V.a(""),this.commission$=new V.a(null),this.vat$=new V.a(0),this.total$=new V.a(0),this.purposeMessage$=new V.a(""),this.dateMessage$=new V.a(""),this.purposeLength$=new V.a(0),this.workingHours$=new V.a(null),this.workingDays$=new V.a([]),this.processingPayment$=new V.a(null),this.isImported=!1,this.subs=new Et.a,this.isPermissionsUpdating=!1,this.isPermissionsUpdateAllowed=!Pe.a.production,this.errors=this.paymentsService.errors,this.rules=this.paymentsService.rules,this.ugdStore=this.dictionaries.UGDictionary,this.knpStore=this.dictionaries.KNPDictionary,this.kbkStore=this.dictionaries.KBKDictionary,this.getWorkingHours()}getPermission(){return Object(P.a)(this,void 0,void 0,(function*(){this.isRestricted=yield this.authorityPermissionsService.isRestricted(this.paymentType)}))}getWorkingHours(){return Object(P.a)(this,void 0,void 0,(function*(){const t=yield this.api.getWorkingHours();this.workingHours$.next(t)}))}ngOnInit(){this.getPermission(),this.listenRouterParams(),this.createControlsStream(this.form),this.combineUrgentStream(),this.subs.add(this.processingPayment$.pipe(Object(M.a)(),Object(w.a)(0)).subscribe(t=>{t?this.paymentsService.spinner.show(this.SPINNER):this.paymentsService.spinner.hide(this.SPINNER)}))}ngOnDestroy(){this.subs.unsubscribe(),this.paymentsService.spinner.hide(this.SPINNER)}get paymentId(){return this.route.snapshot.params.paymentId}get dateHelper(){return this.form.controls.date.value?"":"PAYMENTS.FORM.DATE_HELPER"}get senderAccountLabel(){return this.form.controls.senderAccount?"PAYMENTS.FORM.SENDER_ACCOUNT.SELECTED":"PAYMENTS.FORM.SENDER_ACCOUNT.EMPTY"}get submitLabel(){return"SHARED."+(this.paymentsService.isSignatureRequired?"TO_SIGN":"FOR_SIGN")}get paymentType(){return this.form.controls.type.value}set paymentType(t){this.form.controls.type.patchValue(t)}onSenderAccountSelect(t){this.form.controls.senderAccount.setValue(t)}hasError(t,e){var n,s;return e.invalid&&(e.dirty&&!(null===(n=t)||void 0===n?void 0:n.isFocused)||(null===(s=this.formDirective)||void 0===s?void 0:s.submitted)&&e.touched)}sendPayment(t){var e;this.formDirective.form.markAsPristine();const n=this.paymentsService.paymentNumber,s=t||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join(". ")});return this.processingPayment$.next(s),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:this.total$.getValue()-this.commission$.getValue(),commission:this.commission$.getValue(),status:null===(e=this.restoredData)||void 0===e?void 0:e.status,userPurpose:this.form.value.purpose,rawBody:s}).then(t=>{t?this.restoredData={status:t.status.code,signatures:t.signatures,companyId:t.companyId}:(this.restoredData=null,n.entity||n.fetching||(n.entity=s.number))}).catch(t=>{console.log(t)}).finally(()=>{this.processingPayment$.next(null)})}onSubmit(t){t&&t.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}updatePermissions(){return Object(P.a)(this,void 0,void 0,(function*(){this.isPermissionsUpdating=!0;try{yield this.authorityPermissionsService.updatePermissions(),this.getPermission()}catch(t){}finally{this.isPermissionsUpdating=!1}}))}processPayment(){return Object(P.a)(this,void 0,void 0,(function*(){const t=this.form.getRawValue();this.processingPayment$.next(t);try{const e=yield this.api.checkWorkingTime(t.date);let n;n=!!this.featureFlagsService.isDisabled(z.a.PAYMENT_PERMISSIONS)||(yield this.api.checkAmountLimit(t.amount,this.paymentType)).isPassed,e&&n?this.sendPayment():this.processingPayment$.next(null)}catch(e){this.processingPayment$.next(null)}}))}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(ut,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=this.paymentType,t.result.then(t=>{this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}knpComparator(t,e){return t.code===e}combineUrgentStream(){var t;const{date:e,bankAccount:n,bankReceiver:s}=this.controlsStream,{urgent:i}=this.form.controls;if(!i)return;const o=new Date,c=Object(f.getTimeZoneOffset)(new Date,"Asia/Almaty");o.setHours(o.getHours()+-c/60);const r=new Date(o);r.setHours(9,0,0);const a=new Date(o);let l;a.setHours(16,0,0);let b,u=!0;l=o>=r&&o<=a?Object(ve.a)(+a-+o).pipe(Object(Ce.a)(!1)):o<r?Object(ve.a)(+r-+o).pipe(Object(Ce.a)(u=!u)):Object(ve.a)(r.setDate(r.getDate()+1)-+o).pipe(Object(Ce.a)(u=!u)),l=l.pipe(Object($.a)(1),Object(D.a)(u)),s?b=Object(I.a)([n,s,this.dictionaries.bankDictionary.entities$]).pipe(Object(y.a)(([t,e,n])=>{let s;return e&&(s=n[e])&&s.salaryTransitIban?s.salaryTransitIban:s&&!s.salaryTransitIban&&t?Object(f.ibanPrefix)(t,G.a.KZT):""})):n&&(b=n.pipe(Object(y.a)(t=>Object(f.ibanPrefix)(t,G.a.KZT)))),b=(null===(t=b)||void 0===t?void 0:t.pipe(Object(y.a)(t=>this.paymentsService.bankFromAccount.transform(t))))||Object(O.a)(""),this.subs.add(Object(I.a)([e.pipe(Object(y.a)(t=>!t)),b.pipe(Object(x.a)(300),Object(y.a)(t=>"TSESKZKA"!==t)),l]).pipe(Object(y.a)(t=>t.every(t=>t))).subscribe(t=>{t&&i.disabled?i.enable():!t&&i.enabled&&(i.disable(),i.setValue(!1))}))}listenRouterParams(){this.subs.add(this.route.params.pipe(Object(y.a)(t=>({state:window.history.state,params:t,route:this.route})),Object(x.a)(0),Object(Y.a)(({params:t,state:e})=>{var n,s,i;if(null===(n=e)||void 0===n?void 0:n.silent)return this.restoredData.status===B.i.DRAFT?this.paymentsService.rootTitle=T.b.EDIT_DRAFT:this.restoredData.status===B.i.CREATED&&(this.paymentsService.rootTitle=T.b.EDIT_PAYMENT),W.a;if(null===(s=e)||void 0===s?void 0:s.resolvedPayment)return Object(O.a)(e.resolvedPayment);if(t.paymentId||(null===(i=e)||void 0===i?void 0:i.repeatPaymentId)){const n=t.paymentId||e.repeatPaymentId;return Object(j.a)(this.api.getPaymentById(n)).pipe(Object(L.a)(t=>(this.router.navigate([this.router.url.replace("/"+n,"")]),W.a)))}return this.setAutoNumeration(),this.paymentsService.rootTitle=T.b.NEW,W.a})).subscribe(t=>{this.restorePayment(t)}))}getMaskConfig(){Object.entries(this.masks).forEach(([t,e])=>this.masks[t]=this.maskService.getConfig(e))}checkPersonalAccounts(t){0!==t.length?t.every(t=>t.isClosed||t.isLocked)?this.paymentsService.infoMessage.entity={type:T.a.info,message:T.d.allLocked}:(1===t.length&&(this.form.patchValue({senderAccount:t[0]}),this.senderAccountDropdown.selectAccount(t[0]),this.form.markAsPristine()),this.paymentsService.infoMessage.entity=null):this.paymentsService.infoMessage.entity={type:T.a.info,message:T.d.noAccounts}}createControlsStream(t){this.controlsStream=Object.entries(t.controls).reduce((t,[e,n],s,i)=>(t[e]=n.valueChanges.pipe(Object(D.a)(n.value)),t),{})}listenCommission(){const{amount:t,date:e,urgent:n,kbk:s,knp:i,senderAccount:o}=this.controlsStream;this.subs.add(Object(I.a)([Object(I.a)(Object.entries({amount:t,date:e,urgent:n,kbk:s,knp:i,senderAccount:o}).filter(([t,e])=>!!e).map(([t,e])=>e.pipe(Object(M.a)(),Object(y.a)(e=>[t,e])))),this.controlsStream.type.pipe(Object(M.a)()),this.companyService.currentCompany$.pipe(Object(U.a)(t=>!!t),Object(M.a)())]).pipe(Object(x.a)(300),Object(U.a)(([t])=>t.every(([t,e])=>!e||!this.form.controls[t]||this.form.controls[t].valid)),Object(Y.a)(([t,e,n])=>{const{amount:s,date:i,kbk:o,knp:c,urgent:r,senderAccount:a}=t.reduce((t,[e,n])=>(t[e]=n,t),{}),l={amount:this.maskService.getNumberedAmount(s),date:i,urgent:r,currency:G.a.KZT,category:B.h.DOMESTIC,type:e,companyId:n.id,kbk:o,knp:c,senderAccount:a};return this.paymentsService.calculateCommission$(l).pipe(Object(L.a)(t=>Object(O.a)(null)))})).subscribe(this.commission$))}listenVAT(){this.controlsStream.vat&&this.controlsStream.amount&&this.subs.add(Object(I.a)([this.controlsStream.vat,this.controlsStream.amount]).pipe(Object(y.a)(([t,e])=>t?12*this.maskService.getNumberedAmount(e)/112:0)).subscribe(this.vat$))}listenTotal(){this.form.controls.amount&&this.subs.add(Object(I.a)(this.commission$,this.controlsStream.amount).pipe(Object(y.a)(([t,e])=>t+this.maskService.getNumberedAmount(e))).subscribe(this.total$))}combineEmployeesAmount(){this.subs.add(this.controlsStream.employees.pipe(Object(x.a)(100),Object(y.a)(t=>(t||[]).reduce((t,e)=>t+e.amount,0))).subscribe(t=>{this.form.controls.amount.patchValue(t)}))}combineKNP(t=[t=>this.dictionaries.selectByPaymentType(t,{type:this.paymentType,sortFavourite:!0})],e){const n=[this.knpStore.items$];return e&&n.push(...e),Object(I.a)(n).pipe(Object(y.a)(e=>t.reduce((t,n)=>n(t,e.slice(1)),e[0])),Object(Te.a)())}combineKBK(t){this.kbk$=this.kbkStore.items$,Object(I.a)([this.kbkStore.items$.pipe(Object(y.a)(e=>this.dictionaries.selectByPaymentType(e,{type:t,sortFavourite:!0})))]).pipe(Object(y.a)(([t])=>t))}saveToDraft(t){this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();const e=this.paymentsService.paymentNumber,n=t||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join("; ")});e.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},n)),this.pipeline.saveToDrafts(n,{paymentId:this.paymentId,type:this.paymentType,commission:this.commission$.value,userPurpose:this.form.value.purpose,category:B.h.DOMESTIC}).then(t=>{t.id!==this.paymentId&&(t&&(this.restoredData={status:t.status,signatures:t.signatures,companyId:t.companyId}),this.router.navigate([this.route.snapshot.params.paymentId?"../":".",t.id],{relativeTo:this.route,state:{silent:!0}}))}).catch(t=>{console.log(t),e.entity||e.fetching||(e.entity=n.number)}).finally(()=>this.processingPayment$.next(null))}setAutoNumeration(){this.subs.add(this.paymentsService.paymentNumber$.pipe(Object(_.a)(this.controlsStream.number)).subscribe(([t,e])=>{e||this.form.controls.number.setValue(t)}))}provideAmountMessage(){if(this.form.controls.amount){const{senderAccount:t,date:e}=this.controlsStream;this.subs.add(Object(I.a)([this.companyService.authorityLevel$,this.total$,t.pipe(Object(U.a)(t=>!!t)),e,this.workingHours$.asObservable()]).pipe(Object(Y.a)(([t,e,n,s,i])=>{var o;if(t!==B.a.PRIMARY_SIGNATURE)return Object(O.a)("");const c=(null===(o=i)||void 0===o?void 0:o.endTime)||f.edgeTimeLabel,r=n.balance.amount-e;if(r<0){const t=this.maskService.formatAmount(Math.abs(r));return s?this.translateService.get("PAYMENTS.AMOUNT_MESSAGES.DEFAULT",{amount:t,edge:`${Object(f.formatNgbDate)(s,this.translateService.currentLang)} ${c}`}):this.translateService.get("PAYMENTS.AMOUNT_MESSAGES.AUTO",{amount:t})}return Object(O.a)("")})).subscribe(this.amountMessage$))}}listenWorkingDays(){this.subs.add(this.dictionaries.workingDays.entity$.pipe(Object(y.a)(t=>this.dictionaries.selectDaysTimeline(Se(Object(f.ngbDateToDate)(this.dateLimit.minDate)).format(f.ISO_8061),Se(Object(f.ngbDateToDate)(this.dateLimit.maxDate)).format(f.ISO_8061),t))).subscribe(this.workingDays$))}listenDateMessageStream(){this.subs.add(Object(I.a)([this.companyService.authorityLevel$,this.controlsStream.date,this.controlsStream.senderAccount.pipe(Object(U.a)(t=>!!t))]).pipe(Object(y.a)(([t,e,n])=>t===B.a.PRIMARY_SIGNATURE?"PAYMENTS.DATE_MESSAGES.PRIMARY_ANY":e?"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE":"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE_AUTO")).subscribe(this.dateMessage$))}listenPurposeMessageStream(t=[],e=["vat","kbk","knp"]){const n={vat:t=>t?this.translateService.instant("PAYMENTS.FORM.INCLUDING_VAT",{amount:this.maskService.formatAmount(t)}):"",kbk:t=>{let e;return t&&(e=this.kbkStore.items.find(e=>e.code===t))?`${e.name}.`:""},knp:t=>{let e;return t&&(e=this.knpStore.items.find(e=>e.code===t))?`${e.name}.`:""}},s=[];s.push((this.controlsStream.vat&&this.vat$||Object(O.a)(0)).pipe(Object(y.a)(t=>["vat",t])),this.controlsStream.knp.pipe(Object(y.a)(t=>["knp",t]))),s.push(...t),this.subs.add(Object(I.a)(s).pipe(Object(x.a)(100),Object(y.a)(t=>t.reduce((t,e)=>(t[e[0]]=e[1],t),{})),Object(y.a)(t=>e.reduce((e,s)=>(Array.isArray(s)?e.push(s[1](t[s[0]],t)):e.push(n[s]?n[s](t[s],t):t[s]),e),[]).filter(t=>!!t).join(" ")),Object(F.a)(t=>{this.form.controls.purpose.patchValue(this.form.controls.purpose.value),t&&this.form.controls.purpose.markAllAsTouched()})).subscribe(this.purposeMessage$)),this.subs.add(Object(I.a)(this.purposeMessage$,this.controlsStream.purpose).pipe(Object(y.a)(([t,e])=>(t||"").length+(e||"").length)).subscribe(this.purposeLength$)),this.validatePurpose()}validatePurpose(){this.subs.add(Object(I.a)(this.purposeMessage$,this.controlsStream.purpose).subscribe(([t,e])=>{const n=(e||"").length+(t||"").length,s=this.form.touched?this.form.controls.purpose.errors:{};s&&n>this.rules.purposeLength&&(s.maxlength=n),this.form.controls.purpose.setErrors(Ne()(s)?null:s,{emitEvent:!0})}))}restorePayment(t){this.subs.add(Object(I.a)([this.knpStore.fetched$,this.kbkStore.fetched$,this.ugdStore.fetched$,this.dictionaries.bankDictionary.fetched$,this.accountStore.fetched$]).pipe(Object(U.a)(t=>t.every(t=>t)),Object(F.a)(()=>{var e,n,s,i,o,c;let r;try{r=this.pipeline.flattenPaymentToModel(t)}catch(a){r={}}this.restoredData={companyId:t.companyId,status:null===(e=t.status)||void 0===e?void 0:e.code,signatures:t.signatures},t.id&&!this.paymentId?(r.number="",r.date=null,this.restoredData.status=null,this.paymentsService.rootTitle=T.b.NEW):this.paymentsService.rootTitle=this.restoredData.status===B.i.DRAFT?T.b.EDIT_DRAFT:T.b.EDIT_PAYMENT,r.emailOnSuccess&&(r.notify=!0),this.form.patchValue(Object.assign(Object.assign({},r),{purpose:null===(s=null===(n=t.details.associatedField)||void 0===n?void 0:n.parameters)||void 0===s?void 0:s.paymentPurpose})),null===(i=this.senderAccountDropdown)||void 0===i||i.selectByIban(null===(c=null===(o=t)||void 0===o?void 0:o.details)||void 0===c?void 0:c.payerIban),this.isImported=t.imported,r.number||this.setAutoNumeration()}),Object(x.a)(10),Object($.a)(1)).subscribe())}}return t.\u0275fac=function(t){v.hc()},t.\u0275dir=v.Lb({type:t,viewQuery:function(t,e){var n;1&t&&(v.Wc(Ve,!0),v.Wc(ke,!0)),2&t&&(v.Cc(n=v.jc())&&(e.formDirective=n.first),v.Cc(n=v.jc())&&(e.senderAccountDropdown=n.first))}}),t})();var Oe=n("mR7B"),We=n("2A1n"),je=n("7rOj"),Me=n("FSKB"),xe=n("YjsB"),De=n("kDIH"),_e=n("cZYL"),we=n("hsBV"),Ye=n("Bl/x"),Le=n("O1Qh"),Ue=n("vOW5"),Fe=n("Ya7Z"),$e=n("Q98t"),Be=n("B+58"),Ge=n("Cg+c"),Ke=n("JqCM"),He=n("M6pS"),Qe=n("13E/"),qe=n("H6TZ"),Xe=n("Kx0l"),ze=n("wV3k");const Ze=["emailOnSuccess"],Je=["senderAccountDropdown"],tn=["contractsSelect"],en=["contractDetails"],nn=["bankDropdown"],sn=["intermediaryBankDropdown"],on=["commissionAccountDropdown"],cn=["rubNonRussiaBankDropdown"],rn=["rubNonRussiaCorrespondentBankDropdown"],an=["rubNonRussiaCorrespondentIbanInput"];function ln(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function bn(t,e){if(1&t&&(v.Wb(0,"div",72),v.Rb(1,"small",73),v.mc(2,"translate"),v.Vb()),2&t){const t=v.lc(2);v.Hb("is-loading",t.isContractsDescriptionLoading),v.sc("jLoading",t.isContractsDescriptionLoading)("jLoadingInverted",!0),v.Ab(1),v.sc("innerHTML",v.oc(2,5,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.DESCRIPTION",t.contractsSwitchDescriptionParams),v.Hc)}}function un(t,e){if(1&t){const t=v.Xb();v.Wb(0,"button",83),v.ic("click",(function(e){return v.Gc(t),v.lc(5).openContractsAddingModal()})),v.Wb(1,"span",13),v.Rc(2," CURRENCY_PAYMENT.CONTRACTS.ADD_NEW "),v.Vb(),v.Vb()}}function mn(t,e){if(1&t&&(v.Wb(0,"div",81),v.Pc(1,un,3,0,"button",82),v.Wb(2,"h6",13),v.Rc(3,"CURRENCY_PAYMENT.CONTRACTS.TITLE"),v.Vb(),v.Vb()),2&t){const t=v.lc(4);v.Ab(1),v.sc("ngIf",t.filteredContracts.length>0)}}function dn(t,e){if(1&t&&v.Pc(0,mn,4,1,"div",80),2&t){const t=e.searchTerm,n=v.lc(3);v.sc("ngIf",!t&&!n.isContractsLoading)}}function pn(t,e){if(1&t&&(v.Wb(0,"div",84),v.Wb(1,"div",85),v.Wb(2,"span"),v.Rc(3),v.Vb(),v.Rb(4,"j-money",86),v.Vb(),v.Wb(5,"div",87),v.Wb(6,"span"),v.Rc(7),v.Vb(),v.Wb(8,"div"),v.Rb(9,"span",88),v.Rc(10,"\xa0 "),v.Rb(11,"j-money",86),v.Vb(),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(3),v.Sc(t.contractor.name),v.Ab(1),v.sc("money",t.amount),v.Ab(3),v.Sc(t.contractNumber),v.Ab(4),v.sc("money",t.remainder)}}function hn(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"div",89),v.Rb(2,"img",90),v.Rb(3,"div",91),v.mc(4,"translate"),v.Wb(5,"a",92),v.ic("click",(function(e){return v.Gc(t),v.lc(4).openContractsAddingModal(e)})),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Vb(),v.Tb()}2&t&&(v.Ab(3),v.sc("innerHTML",v.nc(4,2,"CURRENCY_PAYMENT.CONTRACTS.EMPTY_STATE"),v.Hc),v.Ab(3),v.Tc(" ",v.nc(7,4,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function fn(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Rb(1,"j-empty-placeholder",93),v.Wb(2,"div",94),v.Wb(3,"a",95),v.ic("click",(function(e){return v.Gc(t),v.lc(4).openContractsAddingModal(e)})),v.Rc(4),v.mc(5,"translate"),v.Vb(),v.Vb(),v.Tb()}2&t&&(v.Ab(4),v.Tc(" ",v.nc(5,1,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function gn(t,e){if(1&t&&(v.Pc(0,hn,8,6,"ng-container",1),v.Pc(1,fn,6,3,"ng-container",1)),2&t){const t=v.lc(3);v.sc("ngIf",0==t.contracts.length),v.Ab(1),v.sc("ngIf",t.contracts.length>0)}}function Rn(t,e){if(1&t&&v.Rc(0),2&t){const t=e.item,n=v.lc(3);v.Tc(" ",n.mapContractLabel(t||n.form.controls.contract.value)," ")}}function An(t,e){if(1&t){const t=v.Xb();v.Wb(0,"a",96),v.ic("click",(function(e){return v.Gc(t),v.lc(3).showContractDetails(e)})),v.Rc(1,"CURRENCY_PAYMENT.CONTRACTS.SHOW_DETAILS"),v.Vb()}}function yn(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"div",74),v.Wb(2,"j-form-field",null,75),v.Wb(4,"j-label",13),v.Rc(5,"CURRENCY_PAYMENT.RECIPIENT.CONTRACT"),v.Vb(),v.Wb(6,"j-select",76,77),v.ic("change",(function(e){return v.Gc(t),v.lc(2).onContractSelect(e)})),v.Pc(8,dn,1,1,"ng-template",39),v.Pc(9,pn,12,4,"ng-template",26),v.Pc(10,gn,2,2,"ng-template",78),v.Pc(11,Rn,1,1,"ng-template",27),v.Vb(),v.Pc(12,An,2,0,"a",79),v.Rb(13,"j-error",28),v.Vb(),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(3),e=v.Dc(7),n=v.lc(2);v.Ab(6),v.sc("loading",n.isContractsLoading)("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",n.form.controls.contractId)("clearable",!1)("searchFn",n.contractComparator)("items",n.filteredContracts),v.Ab(6),v.sc("ngIf",n.isContractSelected),v.Ab(1),v.sc("control",n.form.controls.contractId)("errorMessages",n.errors.contractId)}}function vn(t,e){if(1&t){const t=v.Xb();v.Wb(0,"button",97),v.ic("click",(function(e){return v.Gc(t),v.lc(2).openForeignContractsRecipientsDictionary()})),v.Vb()}}function Cn(t,e){if(1&t){const t=v.Xb();v.Wb(0,"button",98),v.ic("click",(function(e){return v.Gc(t),v.lc(2).openForeignRecipientsDictionary()})),v.Vb()}}function Tn(t,e){if(1&t&&(v.Wb(0,"div",99),v.Rc(1),v.Vb()),2&t){const t=e.item,n=v.lc(2);v.Ab(1),v.Tc(" ",n.mapCountryLabel(t)," ")}}function Sn(t,e){if(1&t&&v.Rc(0),2&t){const t=e.item;v.lc();const n=v.Dc(33),s=v.lc();v.Tc(" ",n.focused?"":s.mapCountryLabel(t)," ")}}function En(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field"),v.Wb(2,"j-label"),v.Rc(3),v.mc(4,"translate"),v.mc(5,"async"),v.Vb(),v.Rb(6,"input",100),v.Rb(7,"j-error",28),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(3),v.Sc(v.nc(4,7,v.nc(5,9,t.cityPlaceholder$))),v.Ab(3),v.sc("mask",t.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",t.cityMaxLength)("formControl",t.form.controls.cityName),v.Ab(1),v.sc("control",t.form.controls.cityName)("errorMessages",t.errors.purpose)}}function Nn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",101),v.Wb(2,"div",20),v.Wb(3,"j-form-field"),v.Wb(4,"j-label",13),v.Rc(5,"CURRENCY_PAYMENT.AUD.INDEX"),v.Vb(),v.Rb(6,"input",102),v.Vb(),v.Vb(),v.Wb(7,"div",20),v.Wb(8,"j-form-field"),v.Wb(9,"j-label",13),v.Rc(10,"CURRENCY_PAYMENT.AUD.STATE"),v.Vb(),v.Rb(11,"input",103),v.Vb(),v.Vb(),v.Vb(),v.Wb(12,"div",101),v.Wb(13,"div",20),v.Wb(14,"j-form-field"),v.Wb(15,"j-label",13),v.Rc(16,"CURRENCY_PAYMENT.AUD.BUILDING_NUMBER"),v.Vb(),v.Rb(17,"input",104),v.Vb(),v.Vb(),v.Wb(18,"div",20),v.Wb(19,"j-form-field"),v.Wb(20,"j-label",13),v.Rc(21,"CURRENCY_PAYMENT.AUD.STREET"),v.Vb(),v.Rb(22,"input",105),v.Vb(),v.Vb(),v.Vb(),v.Rb(23,"hr",106),v.Tb()),2&t){const t=v.lc(2);v.Ab(6),v.sc("formControl",t.form.controls.audIndex),v.Ab(5),v.sc("formControl",t.form.controls.audState),v.Ab(6),v.sc("formControl",t.form.controls.audBuildingNumber),v.Ab(5),v.sc("formControl",t.form.controls.audStreet)}}function Pn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Wb(2,"j-form-field"),v.Wb(3,"j-label",13),v.Rc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),v.Vb(),v.Rb(5,"input",107),v.Vb(),v.Vb(),v.Tb()),2&t){const t=v.lc(2);v.Ab(5),v.sc("formControl",t.form.controls.audAddress)}}function Vn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Wb(2,"j-form-field"),v.Wb(3,"j-label",13),v.Rc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),v.Vb(),v.Rb(5,"input",107),v.Vb(),v.Vb(),v.Tb()),2&t){const t=v.lc(2);v.Ab(5),v.sc("formControl",t.form.controls.canAddress)}}function kn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Rb(2,"j-foreign-bank-select",108,109),v.Vb(),v.Wb(4,"div",20),v.Wb(5,"j-form-field",21),v.Wb(6,"j-label",13),v.Rc(7,"CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_IBAN"),v.Vb(),v.Rb(8,"input",110,111),v.Rb(10,"j-error",28),v.Vb(),v.Vb(),v.Tb()),2&t){const t=v.lc(2);v.Ab(2),v.sc("labelText","CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_BIC")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_CORRESPONDENT_BIC_ENTERED")("labelControl",t.form.controls.rubNonRussiaCorrespondentBankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.rubNonRussiaCorrespondentBank),v.Ab(6),v.sc("validation",!1)("mask",t.masks.rubNonRussiaCorrespondentIban.mask)("formControl",t.form.controls.rubNonRussiaCorrespondentIban),v.Ab(2),v.sc("control",t.form.controls.rubNonRussiaCorrespondentIban)("errorMessages",t.errors.bankAccount)}}function In(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field",21),v.Wb(2,"j-label",13),v.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KBE"),v.Vb(),v.Rb(4,"input",112),v.Rb(5,"a",113),v.Rb(6,"j-error",28),v.Vb(),v.Vb()),2&t){v.lc();const t=v.Dc(148),e=v.lc();v.Ab(4),v.sc("mask",e.masks.kbeCode.mask)("jShadow",e.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",e.form.controls.kbeCode),v.Ab(1),v.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(1),v.sc("control",e.form.controls.kbeCode)("errorMessages",e.errors.kbeCode)}}function On(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Rb(2,"j-foreign-bank-select",108,114),v.Vb(),v.Wb(4,"div",20),v.Wb(5,"j-form-field"),v.Wb(6,"j-label"),v.Rc(7),v.mc(8,"translate"),v.mc(9,"async"),v.Vb(),v.Rb(10,"input",100),v.Vb(),v.Vb(),v.Tb()),2&t){const t=v.lc(2);v.Ab(2),v.sc("labelText","CURRENCY_PAYMENT.RECIPIENT.BANK")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",t.form.controls.rubNonRussiaBankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.rubNonRussiaBank),v.Ab(5),v.Sc(v.nc(8,10,v.nc(9,12,t.cityPlaceholder$))),v.Ab(3),v.sc("mask",t.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",t.cityMaxLength)("formControl",t.form.controls.cityName)}}function Wn(t,e){1&t&&(v.Wb(0,"div",45),v.Rc(1," CURRENCY_PAYMENT.RECIPIENT.BIC_DESCRIPTION "),v.Vb())}function jn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Rb(2,"j-foreign-bank-select",115,116),v.Pc(4,Wn,2,0,"div",117),v.Vb(),v.Tb()),2&t){const t=v.lc(2);v.Ab(2),v.sc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",t.form.controls.bankLabel)("errorMessages",t.errors.bankSelect)("bankControl",t.form.controls.bank),v.Ab(2),v.sc("ngIf",!t.isBicRequired)}}function Mn(t,e){if(1&t&&v.Rb(0,"j-foreign-bank-select",121,122),2&t){const t=v.lc(3);v.sc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_INTERMEDIARY_BIC_ENTERED")("labelControl",t.form.controls.intermediaryBankLabel)("bankControl",t.form.controls.intermediaryBank)("errorMessages",t.errors.bankSelect)}}function xn(t,e){if(1&t&&(v.Wb(0,"div",10),v.Rb(1,"j-switch",11),v.Wb(2,"div",118),v.Wb(3,"strong",13),v.Rc(4,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.TITLE"),v.Vb(),v.Pc(5,Mn,2,4,"j-foreign-bank-select",119),v.Wb(6,"small",120),v.Rc(7,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.DESCRIPTION"),v.Vb(),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.sc("formControl",t.form.controls.hasIntermediaryBank),v.Ab(4),v.sc("ngIf",t.hasIntermediaryBank)}}function Dn(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field",21),v.Wb(2,"j-label",13),v.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KIO"),v.Vb(),v.Rb(4,"input",123),v.Rb(5,"j-error",28),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(4),v.sc("mask",t.masks.kio.mask)("dropSpecialCharacters",!1)("formControl",t.form.controls.kio),v.Ab(1),v.sc("control",t.form.controls.kio)("errorMessages",t.errors.kio)}}function _n(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field",21),v.Wb(2,"j-label",13),v.Rc(3,"CURRENCY_PAYMENT.RECIPIENT.KPP"),v.Vb(),v.Rb(4,"input",124),v.Rb(5,"a",113),v.Vb(),v.Wb(6,"div",45),v.Rc(7," CURRENCY_PAYMENT.RECIPIENT.KPP_DESCRIPTION "),v.Vb(),v.Vb()),2&t){v.lc();const t=v.Dc(150),e=v.lc();v.Ab(4),v.sc("mask",e.masks.kpp.mask)("jShadow",e.masks.kpp.shadow)("validation",!1)("formControl",e.form.controls.kpp),v.Ab(1),v.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg")}}function wn(t,e){if(1&t&&(v.Wb(0,"div",130),v.Wb(1,"j-form-field",21),v.Wb(2,"j-label",13),v.Rc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KIO"),v.Vb(),v.Rb(4,"input",142),v.Rb(5,"j-error",28),v.Vb(),v.Wb(6,"j-form-field",21),v.Wb(7,"j-label",13),v.Rc(8,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KPP"),v.Vb(),v.Rb(9,"input",135),v.Rb(10,"a",113),v.Vb(),v.Vb()),2&t){v.lc(2);const t=v.Dc(150),e=v.lc();v.Ab(4),v.sc("formControl",e.form.controls.payerInn),v.Ab(1),v.sc("control",e.form.controls.payerInn)("errorMessages",e.errors.payerInn),v.Ab(4),v.sc("mask",e.masks.kpp.mask)("jShadow",e.masks.kpp.shadow)("formControl",e.form.controls.payerKpp),v.Ab(1),v.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg")}}function Yn(t,e){if(1&t&&(v.Wb(0,"div",84),v.Wb(1,"strong"),v.Rc(2),v.Vb(),v.Wb(3,"span"),v.Rc(4," - "),v.Vb(),v.Wb(5,"span"),v.Rc(6),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(2),v.Sc(t.code),v.Ab(4),v.Sc(t.description)}}function Ln(t,e){1&t&&v.Rb(0,"j-empty-placeholder",143)}function Un(t,e){if(1&t&&v.Rc(0),2&t){const t=e.item;v.lc();const n=v.Dc(17);v.Tc(" ",n.focused?"":t.code+" - "+t.description," ")}}function Fn(t,e){if(1&t&&(v.Wb(0,"div",84),v.Wb(1,"strong"),v.Rc(2),v.Vb(),v.Wb(3,"span"),v.Rc(4," - "),v.Vb(),v.Wb(5,"span"),v.Rc(6),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(2),v.Sc(t.code),v.Ab(4),v.Sc(t.description)}}function $n(t,e){1&t&&v.Rb(0,"j-empty-placeholder",144)}function Bn(t,e){if(1&t&&v.Rc(0),2&t){const t=e.item;v.lc();const n=v.Dc(32);v.Tc(" ",n.focused?"":t.code+" - "+t.description," ")}}function Gn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"div",20),v.Wb(2,"j-form-field",21),v.Wb(3,"j-label",13),v.Rc(4,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PURPOSE"),v.Vb(),v.Rb(5,"input",135),v.Rb(6,"a",113),v.Vb(),v.Vb(),v.Wb(7,"div",20),v.Wb(8,"j-form-field",21),v.Wb(9,"j-label",13),v.Rc(10,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TAX_NUMBER"),v.Vb(),v.Rb(11,"input",135),v.Vb(),v.Vb(),v.Wb(12,"div",130),v.Wb(13,"div"),v.Wb(14,"j-form-field",21),v.Wb(15,"j-label",13),v.Rc(16,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD"),v.Vb(),v.Rb(17,"input",145),v.Rb(18,"a",113),v.Vb(),v.Wb(19,"div",45),v.Rc(20,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD_DESCRIPTION "),v.Vb(),v.Vb(),v.Wb(21,"j-form-field",21),v.Wb(22,"j-label",13),v.Rc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.UIP"),v.Vb(),v.Rb(24,"input",146),v.Vb(),v.Vb(),v.Tb()),2&t){v.lc(2);const t=v.Dc(154),e=v.Dc(156),n=v.lc();v.Ab(5),v.sc("mask",n.masks.paymentBasis.mask)("jShadow",n.masks.paymentBasis.shadow)("formControl",n.form.controls.paymentBasis),v.Ab(1),v.sc("ngbTooltip",t)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(5),v.sc("mask",n.masks.budgetDocNumber.mask)("jShadow",n.masks.budgetDocNumber.shadow)("formControl",n.form.controls.budgetDocNumber),v.Ab(6),v.sc("mask",n.masks.budgetPeriod.mask)("jShadow",n.masks.budgetPeriod.shadow)("dropSpecialCharacters",!1)("formControl",n.form.controls.budgetPeriod),v.Ab(1),v.sc("ngbTooltip",e)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(6),v.sc("formControl",n.form.controls.uip)}}function Kn(t,e){if(1&t&&(v.Ub(0),v.Wb(1,"fieldset",15),v.Wb(2,"h5",7),v.Rc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TITLE"),v.Vb(),v.Wb(4,"div",20),v.Wb(5,"div",125),v.Rb(6,"input",126),v.Wb(7,"label",127),v.Rb(8,"span",128),v.Vb(),v.Vb(),v.Vb(),v.Pc(9,wn,11,8,"div",129),v.Wb(10,"div",130,131),v.Wb(12,"j-form-field",null,132),v.Wb(14,"j-label",13),v.Rc(15,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK"),v.Vb(),v.Wb(16,"j-select",133,134),v.Pc(18,Yn,7,2,"ng-template",26),v.Pc(19,Ln,1,0,"ng-template",78),v.Pc(20,Un,1,1,"ng-template",27),v.Vb(),v.Vb(),v.Wb(21,"j-form-field",21),v.Wb(22,"j-label",13),v.Rc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.OKTMO"),v.Vb(),v.Rb(24,"input",135),v.Rb(25,"a",113),v.Vb(),v.Vb(),v.Wb(26,"div",20),v.Wb(27,"j-form-field",null,136),v.Wb(29,"j-label",13),v.Rc(30,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PAYER_STATUS"),v.Vb(),v.Wb(31,"j-select",137,138),v.Pc(33,Fn,7,2,"ng-template",26),v.Pc(34,$n,1,0,"ng-template",78),v.Pc(35,Bn,1,1,"ng-template",27),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(36,"fieldset",15),v.Wb(37,"div",20),v.Wb(38,"div",125),v.Rb(39,"input",139),v.Wb(40,"label",140),v.Rb(41,"span",141),v.Vb(),v.Vb(),v.Vb(),v.Pc(42,Gn,25,15,"ng-container",1),v.Vb(),v.Tb()),2&t){const t=v.Dc(11),e=v.Dc(17),n=v.Dc(28),s=v.Dc(32);v.lc();const i=v.Dc(152),o=v.lc();v.Ab(6),v.sc("formControl",o.form.controls.isRussianTaxPayer),v.Ab(3),v.sc("ngIf",o.isRussianTaxpayer),v.Ab(7),v.sc("loading",o.isKbkLoading)("appendTo",t)("jFocusOnReturn",e)("formControl",o.form.controls.kbk)("clearable",!1)("searchFn",o.kbkComparator)("items",o.kbkList),v.Ab(8),v.sc("mask",o.masks.oktmo.mask)("jShadow",o.masks.oktmo.shadow)("formControl",o.form.controls.oktmo),v.Ab(1),v.sc("ngbTooltip",i)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(6),v.sc("loading",o.isStatusesLoading)("appendTo",n.elementRef.nativeElement)("jFocusOnReturn",s)("formControl",o.form.controls.payerStatus)("clearable",!1)("searchFn",o.statusComparator)("items",o.statuses),v.Ab(8),v.sc("formControl",o.form.controls.hasRussianBudgetExtras),v.Ab(3),v.sc("ngIf",o.hasRussianBudgetExtras)}}function Hn(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div"),v.Wb(1,"button",83),v.ic("click",(function(e){v.Gc(t),v.lc(2);const n=v.Dc(89);return v.lc().openKnpDictionary(n,e)})),v.Rb(2,"span",147),v.Wb(3,"span",13),v.Rc(4," CURRENCY_PAYMENT.DETAILS.KNP.DICTIONARY "),v.Vb(),v.Vb(),v.Wb(5,"p",148),v.Rc(6,"CURRENCY_PAYMENT.DETAILS.KNP.FREQUENT"),v.Vb(),v.Wb(7,"p",149),v.Rc(8,"CURRENCY_PAYMENT.DETAILS.KNP.DESCRIPTION"),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.sc("inlineSVG","/assets/icons/payments/list.svg"))}function Qn(t,e){1&t&&v.Pc(0,Hn,9,1,"div",1),2&t&&v.sc("ngIf",!e.searchTerm)}function qn(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field"),v.Wb(2,"j-label",13),v.Rc(3,"CURRENCY_PAYMENT.DETAILS.KVO"),v.Vb(),v.Rb(4,"input",33),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(4),v.sc("mask",t.masks.kvo.mask)("formControl",t.form.controls.kvo)}}function Xn(t,e){if(1&t&&(v.Wb(0,"div",84),v.Rc(1),v.Vb()),2&t){const t=e.item,n=v.lc(3);v.Ab(1),v.Tc(" ",n.mapCodeWordLabel(t)," ")}}function zn(t,e){if(1&t&&v.Rc(0),2&t){const t=e.item;v.lc();const n=v.Dc(8),s=v.lc(2);v.Tc(" ",n.focused?"":s.mapCodeWordLabel(t||(null==s.form.controls.codeWord?null:s.form.controls.codeWord.value))," ")}}function Zn(t,e){if(1&t&&(v.Wb(0,"div",20),v.Wb(1,"j-form-field",null,150),v.Wb(3,"j-label"),v.Rc(4),v.mc(5,"translate"),v.mc(6,"async"),v.Vb(),v.Wb(7,"j-select",133,151),v.Pc(9,Xn,2,1,"ng-template",26),v.Pc(10,zn,1,1,"ng-template",27),v.Vb(),v.Vb(),v.Vb()),2&t){const t=v.Dc(2),e=v.Dc(8),n=v.lc(2);v.Ab(4),v.Sc(v.nc(5,8,v.nc(6,10,n.codeWordLabel$))),v.Ab(3),v.sc("loading",n.isCodeWordsLoading)("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",n.form.controls.codeWord)("clearable",!1)("searchFn",n.codeWordComparator)("items",n.codeWords)}}function Jn(t,e){if(1&t&&(v.Wb(0,"div",152),v.Wb(1,"div",153),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function ts(t,e){if(1&t&&(v.Wb(0,"div",154),v.Rb(1,"span",155),v.mc(2,"async"),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.sc("innerHTML",v.nc(2,1,t.comissionMessage),v.Hc)}}function es(t,e){if(1&t&&(v.Wb(0,"div",156),v.Rb(1,"span",155),v.mc(2,"async"),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.sc("innerHTML",v.nc(2,1,t.amountMessage),v.Hc)}}const ns=function(t){return{amount:t}};function ss(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",156),v.Rb(1,"span",157),v.mc(2,"money"),v.Wb(3,"a",158),v.ic("click",(function(e){return v.Gc(t),v.lc(2).scrollToContracts(e)})),v.Rc(4),v.mc(5,"translate"),v.Vb(),v.Vb()}if(2&t){const t=v.lc(2);v.Ab(1),v.sc("translate","ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT")("translateParams",v.xc(7,ns,v.nc(2,3,t.contractMaxAmount))),v.Ab(3),v.Sc(v.nc(5,5,"ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT_LINK"))}}function is(t,e){if(1&t&&(v.Wb(0,"div",156),v.Rb(1,"span",155),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.sc("innerHTML",t.comissionMessage,v.Hc)}}function os(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function cs(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.Rb(2,"j-money",86)),2&t){const t=v.lc(2);v.Tc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": "),v.Ab(2),v.sc("money",t.commissionBalance)}}function rs(t,e){1&t&&v.Rb(0,"div",159)}function as(t,e){if(1&t&&(v.Wb(0,"li",59),v.Rb(1,"j-switch",11),v.Wb(2,"span",12),v.Wb(3,"strong",13),v.Rc(4,"CURRENCY_PAYMENT.AGENT.TITLE"),v.Vb(),v.Rb(5,"br"),v.Wb(6,"small",160),v.Rc(7,"CURRENCY_PAYMENT.AGENT.DESCRIPTION"),v.Vb(),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(1),v.sc("formControl",t.form.controls.payComission)}}function ls(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"small",161),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.NOTIFY.DESCRIPTION")))}function bs(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",162),v.Wb(1,"j-form-field"),v.Wb(2,"j-label"),v.Rc(3),v.mc(4,"translate"),v.Vb(),v.Wb(5,"input",163,164),v.ic("focus",(function(e){return v.Gc(t),v.lc(2).onEmailOnSuccessFocus(e)})),v.Vb(),v.Rb(7,"j-error",28),v.Vb(),v.Wb(8,"small",161),v.Rc(9),v.mc(10,"translate"),v.Vb(),v.Vb()}if(2&t){const t=v.lc(2);v.Ab(3),v.Sc(v.nc(4,6,"PAYMENTS.NOTIFY.EMAIL")),v.Ab(2),v.sc("ngbTypeahead",t.search)("formControl",t.form.controls.emailOnSuccess),v.Ab(2),v.sc("control",t.form.controls.emailOnSuccess)("errorMessages",t.errors.email),v.Ab(2),v.Sc(v.nc(10,8,"PAYMENTS.NOTIFY.EMAIL"))}}function us(t,e){if(1&t&&(v.Rb(0,"p",165),v.mc(1,"translate")),2&t){const t=v.lc(2);v.sc("innerHTML",v.nc(1,1,t.agreementText),v.Hc)}}function ms(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",166),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Wb(2,"strong",13),v.Rc(3,"SHARED.SAVE"),v.Vb(),v.Vb(),v.Wb(4,"button",167),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(5),v.Tc("",v.nc(6,1,t.submitLabel)," ")}}function ds(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",168),v.Rc(2,"SHARED.SAVE_EDITING"),v.Vb(),v.Tb())}function ps(t,e){if(1&t&&v.Rb(0,"j-fx-contract-details",169,170),2&t){const t=v.lc(2);v.sc("contract",t.form.controls.contract.value)}}function hs(t,e){}function fs(t,e){1&t&&v.Rb(0,"j-kbe-info")}function gs(t,e){1&t&&(v.Rb(0,"div",171),v.mc(1,"translate")),2&t&&v.sc("innerHTML",v.nc(1,1,"PAYMENTS.KPP"),v.Hc)}function Rs(t,e){1&t&&(v.Rb(0,"div",171),v.mc(1,"translate")),2&t&&v.sc("innerHTML",v.nc(1,1,"PAYMENTS.OKTMO"),v.Hc)}function As(t,e){1&t&&(v.Rb(0,"div",171),v.mc(1,"translate")),2&t&&v.sc("innerHTML",v.nc(1,1,"PAYMENTS.BASIS"),v.Hc)}function ys(t,e){1&t&&(v.Rb(0,"div",171),v.mc(1,"translate")),2&t&&v.sc("innerHTML",v.nc(1,1,"PAYMENTS.BUDGET"),v.Hc)}function vs(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"div",3),v.Wb(2,"form",4,5),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(4,"fieldset",6),v.Wb(5,"h5",7),v.Rc(6,"CURRENCY_PAYMENT.DEBIT_ACCOUNT"),v.Vb(),v.Wb(7,"j-account-dropdown",8,9),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.Vb(),v.Wb(9,"div",10),v.Rb(10,"j-switch",11),v.Wb(11,"div",12),v.Wb(12,"strong",13),v.Rc(13,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.TITLE"),v.Vb(),v.Pc(14,bn,3,8,"div",14),v.Vb(),v.Vb(),v.Pc(15,yn,14,10,"ng-container",1),v.Vb(),v.Wb(16,"fieldset",15),v.Wb(17,"div",16),v.Wb(18,"h5",17),v.Rc(19,"CURRENCY_PAYMENT.RECIPIENT.TITLE"),v.Vb(),v.Pc(20,vn,1,0,"button",18),v.Pc(21,Cn,1,0,"button",19),v.Vb(),v.Wb(22,"div",20),v.Wb(23,"j-form-field",21),v.Wb(24,"j-label",13),v.Rc(25,"CURRENCY_PAYMENT.RECIPIENT.NAME"),v.Vb(),v.Wb(26,"input",22),v.ic("paste",(function(e){return v.Gc(t),v.lc().onNamePaste(e)})),v.Vb(),v.Vb(),v.Vb(),v.Wb(27,"div",20),v.Wb(28,"j-form-field",null,23),v.Wb(30,"j-label",13),v.Rc(31,"CURRENCY_PAYMENT.RECIPIENT.COUNTRY"),v.Vb(),v.Wb(32,"j-select",24,25),v.ic("change",(function(e){return v.Gc(t),v.lc().onCountrySelect(e)}))("focus",(function(e){return v.Gc(t),v.lc().onCountryFocus()}))("search",(function(e){return v.Gc(t),v.lc().onCountrySearch(e)})),v.mc(34,"async"),v.Pc(35,Tn,2,1,"ng-template",26),v.Pc(36,Sn,1,1,"ng-template",27),v.Vb(),v.Rb(37,"j-error",28),v.Vb(),v.Vb(),v.Pc(38,En,8,11,"div",29),v.Pc(39,Nn,24,4,"ng-container",1),v.mc(40,"async"),v.Pc(41,Pn,6,1,"ng-container",1),v.mc(42,"async"),v.Pc(43,Vn,6,1,"ng-container",1),v.mc(44,"async"),v.Pc(45,kn,11,10,"ng-container",1),v.mc(46,"async"),v.Wb(47,"div"),v.mc(48,"async"),v.Pc(49,In,7,8,"div",29),v.Pc(50,On,11,14,"ng-container",1),v.mc(51,"async"),v.Wb(52,"div",20),v.Wb(53,"j-form-field",21),v.Wb(54,"j-label",13),v.Rc(55,"CURRENCY_PAYMENT.RECIPIENT.IBAN"),v.Vb(),v.Rb(56,"input",30,31),v.Rb(58,"j-error",28),v.Vb(),v.Vb(),v.Vb(),v.Pc(59,jn,5,5,"ng-container",1),v.mc(60,"async"),v.Pc(61,xn,8,2,"div",32),v.Pc(62,Dn,6,5,"div",29),v.mc(63,"async"),v.Pc(64,_n,8,6,"div",29),v.mc(65,"async"),v.Vb(),v.Pc(66,Kn,43,23,"ng-container",1),v.mc(67,"async"),v.Wb(68,"fieldset",15),v.Wb(69,"h5",7),v.Rc(70,"CURRENCY_PAYMENT.DETAILS.TITLE"),v.Vb(),v.Wb(71,"div",20),v.Wb(72,"j-form-field"),v.Wb(73,"j-label",13),v.Rc(74,"CURRENCY_PAYMENT.DETAILS.DOCUMENT_NUMBER"),v.Vb(),v.Rb(75,"input",33),v.Vb(),v.Vb(),v.Wb(76,"div",20),v.Rb(77,"j-date-picker",34,35),v.mc(79,"async"),v.mc(80,"translate"),v.mc(81,"translate"),v.mc(82,"async"),v.Vb(),v.Wb(83,"div",20),v.Wb(84,"j-form-field",null,36),v.Wb(86,"j-label",13),v.Rc(87,"CURRENCY_PAYMENT.DETAILS.KNP.TITLE"),v.Vb(),v.Wb(88,"j-select",37,38),v.ic("change",(function(e){return v.Gc(t),v.lc().knpIsChanged()})),v.mc(90,"async"),v.Pc(91,Qn,1,1,"ng-template",39),v.Vb(),v.Vb(),v.Vb(),v.Pc(92,qn,5,2,"div",29),v.mc(93,"async"),v.Pc(94,Zn,11,12,"div",29),v.mc(95,"async"),v.Wb(96,"div",40),v.Wb(97,"span",41),v.Rc(98),v.mc(99,"async"),v.Vb(),v.Wb(100,"j-form-field"),v.Wb(101,"j-label",13),v.Rc(102,"CURRENCY_PAYMENT.DETAILS.PURPOSE"),v.Vb(),v.Rb(103,"textarea",42,43),v.Rb(105,"j-error",28),v.Pc(106,Jn,3,1,"div",44),v.mc(107,"async"),v.Vb(),v.Wb(108,"div",45),v.Rc(109," CURRENCY_PAYMENT.DETAILS.PURPOSE_DESCRIPTION "),v.Vb(),v.Vb(),v.Vb(),v.Wb(110,"fieldset",15),v.Wb(111,"div",46),v.Wb(112,"j-account-dropdown",47,48),v.ic("selected",(function(e){return v.Gc(t),v.lc().onCommissionAccountSelect(e)})),v.Vb(),v.Pc(114,ts,3,3,"div",49),v.Vb(),v.Wb(115,"div",20),v.Wb(116,"j-form-field",50),v.Wb(117,"j-label",13),v.Rc(118,"CURRENCY_PAYMENT.AMOUNT.TITLE"),v.Vb(),v.Wb(119,"input",51),v.ic("paste",(function(e){return v.Gc(t),v.lc().onAmountPaste(e)})),v.Vb(),v.Vb(),v.Pc(120,es,3,3,"div",52),v.Pc(121,ss,6,9,"div",52),v.Pc(122,is,2,1,"div",52),v.Wb(123,"div",53),v.Pc(124,os,3,3,"ng-container",54),v.Pc(125,cs,3,4,"ng-template",null,55,v.Qc),v.Pc(127,rs,1,0,"div",56),v.Vb(),v.Vb(),v.Wb(128,"ul",57),v.Pc(129,as,8,1,"li",58),v.Wb(130,"li",59),v.Rb(131,"j-switch",11),v.Wb(132,"div",60),v.Wb(133,"strong"),v.Rc(134),v.mc(135,"translate"),v.Vb(),v.Rb(136,"br"),v.Pc(137,ls,4,3,"div",1),v.Pc(138,bs,11,10,"div",61),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Pc(139,us,2,3,"p",62),v.Wb(140,"div",63),v.Pc(141,ms,7,3,"ng-container",1),v.Pc(142,ds,3,0,"ng-container",1),v.Vb(),v.Rb(143,"ngx-spinner",64),v.Vb(),v.Vb(),v.Pc(144,ps,2,1,"j-fx-contract-details",65),v.Pc(145,hs,0,0,"ng-template",null,66,v.Qc),v.Pc(147,fs,1,0,"ng-template",null,67,v.Qc),v.Pc(149,gs,2,3,"ng-template",null,68,v.Qc),v.Pc(151,Rs,2,3,"ng-template",null,69,v.Qc),v.Pc(153,As,2,3,"ng-template",null,70,v.Qc),v.Pc(155,ys,2,3,"ng-template",null,71,v.Qc),v.Tb()}if(2&t){const t=v.Dc(29),e=v.Dc(33),n=v.Dc(78),s=v.Dc(85),i=v.Dc(89),o=v.Dc(126),c=v.lc();v.Ab(2),v.sc("formGroup",c.form),v.Ab(5),v.sc("isLoading",c.isAccountsLoading)("isDisabledSelectable",!0)("label","CURRENCY_PAYMENT.DEBIT_ACCOUNT")("hasError",c.form.controls.senderAccount.touched&&c.form.controls.senderAccount.errors)("accounts",c.senderAccountsList),v.Ab(3),v.sc("formControl",c.form.controls.withinContract),v.Ab(4),v.sc("ngIf",c.isContractsDescriptionShown),v.Ab(1),v.sc("ngIf",c.withinContract),v.Ab(5),v.sc("ngIf",c.withinContract&&(null==c.form.controls.contract?null:null==c.form.controls.contract.value?null:null==c.form.controls.contract.value.recipients?null:c.form.controls.contract.value.recipients.length)>1),v.Ab(1),v.sc("ngIf",!c.withinContract),v.Ab(5),v.sc("mask",c.masks.name.mask)("dropSpecialCharacters",!1)("maxlength",c.withinContract?null:c.nameMaxLength)("formControl",c.form.controls.name),v.Ab(6),v.sc("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",c.form.controls.countryCode)("readonly",c.form.controls.countryCode.disabled)("clearable",!1)("searchFn",c.countryComparator)("items",v.nc(34,102,c.countries$)),v.Ab(5),v.sc("control",c.form.controls.countryCode)("errorMessages",c.errors.country),v.Ab(1),v.sc("ngIf",c.isCityShown),v.Ab(1),v.sc("ngIf",v.nc(40,104,c.isAustraliaAud$)),v.Ab(2),v.sc("ngIf",v.nc(42,106,c.isAustraliaNonAud$)),v.Ab(2),v.sc("ngIf",v.nc(44,108,c.isCountryCanada$)),v.Ab(2),v.sc("ngIf",v.nc(46,110,c.isRubNonRussia$)),v.Ab(2),v.Hb("kbe-account-row",!(v.nc(48,112,c.isRubNonRussia$)||c.withinContract)),v.Ab(2),v.sc("ngIf",!c.withinContract),v.Ab(1),v.sc("ngIf",v.nc(51,114,c.isRubNonRussia$)),v.Ab(2),v.Hb("mb-3",c.withinContract),v.Ab(4),v.sc("mask",c.masks.bankAccount.mask)("formControl",c.form.controls.bankAccount),v.Ab(2),v.sc("control",c.form.controls.bankAccount)("errorMessages",c.errors.bankAccount),v.Ab(1),v.sc("ngIf",!v.nc(60,116,c.isRubNonRussia$)),v.Ab(2),v.sc("ngIf",c.isIntermediaryBankSwitchable),v.Ab(1),v.sc("ngIf",v.nc(63,118,c.isKioEnabled$)),v.Ab(2),v.sc("ngIf",v.nc(65,120,c.isKppEnabled$)),v.Ab(2),v.sc("ngIf",v.nc(67,122,c.isRussianBudget$)),v.Ab(9),v.sc("mask",c.masks.number.mask)("formControl",c.form.controls.number),v.Ab(2),v.sc("datesEnabled",v.nc(79,124,c.workingDays$))("formControl",c.form.controls.date)("formatValue",!0)("jFocusOnReturn",n)("label",v.nc(80,126,"CURRENCY_PAYMENT.DETAILS.VALUE_DATE"))("minDate",c.dateLimit.minDate)("maxDate",c.dateLimit.maxDate)("helperText",v.nc(81,128,v.nc(82,130,c.dateMessage$))),v.Ab(11),v.sc("jFocusOnReturn",i)("appendTo",s.elementRef.nativeElement)("formControl",c.form.controls.knp)("clearable",!1)("searchMask",c.masks.knp.mask)("shadow",c.masks.knp.shadow)("compareWith",c.knpComparator)("items",v.nc(90,132,c.knp$)),v.Ab(4),v.sc("ngIf",v.nc(93,134,c.isKvoEnabled$)),v.Ab(2),v.sc("ngIf",v.nc(95,136,c.isCodeWordEnabled$)),v.Ab(4),v.Uc(" ",v.nc(99,138,c.purposeLength$),"/",c.rules.purposeLength,""),v.Ab(5),v.sc("formControl",c.form.controls.purpose)("mask",c.masks.purpose.mask)("dropSpecialCharacters",!1),v.Ab(2),v.sc("control",c.form.controls.purpose)("errorMessages",c.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(107,140,c.purposeMessage$)),v.Ab(5),v.sc("hidden",!c.isCommissionAccountSelectable),v.Ab(1),v.sc("isLoading",c.isAccountsLoading)("accounts",c.commissionAccountsList)("isDisabledSelectable",!0)("hasError",c.form.controls.commissionAccount.touched&&c.form.controls.commissionAccount.errors)("label","CURRENCY_PAYMENT.COMISSION.ACCOUNT"),v.Ab(2),v.sc("ngIf",c.comissionMessage),v.Ab(2),v.sc("floatLabel","always"),v.Ab(3),v.sc("suffix",c.amountSuffix)("placeholder",c.amountPlaceholder)("mask",c.amountMask)("dropSpecialCharacters",!0)("formControl",c.form.controls.amount),v.Ab(1),v.sc("ngIf",c.amountMessage),v.Ab(1),v.sc("ngIf",c.shouldBindContract),v.Ab(1),v.sc("ngIf",c.comissionMessage&&!c.isCommissionAccountSelectable),v.Ab(2),v.sc("ngIf",null===c.commissionBalance)("ngIfElse",o),v.Ab(3),v.sc("ngIf",0==c.isOurComission),v.Ab(2),v.sc("ngIf",c.canPayCommission),v.Ab(2),v.sc("formControl",c.form.controls.notify),v.Ab(3),v.Sc(v.nc(135,142,"PAYMENTS.NOTIFY.TITLE")),v.Ab(3),v.sc("ngIf",!c.form.controls.notify.value),v.Ab(1),v.sc("ngIf",c.form.controls.notify.value),v.Ab(1),v.sc("ngIf",c.isContractsAgreementShown),v.Ab(2),v.sc("ngIf",c.restoredData.status!==c.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",c.restoredData.status===c.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",c.SPINNER)("fullScreen",!1),v.Ab(1),v.sc("ngIf",c.form.controls.contract.value)}}var Cs=function(t){return t.JYSAN="TSESKZKA",t}({});const Ts=G.a.JPY,Ss=["342","343","314","312"],Es=new RegExp(/(([a-zA-Z]{1}[a-zA-Z0-9\/\-?:().,\'+\ ]+)|([a-zA-Z]{1}))+/g),Ns=t=>!!t&&"810"!==t.substring(5,8),Ps=t=>!!t&&["000","001","002"].includes(t.substring(6,9)),Vs=t=>!!t&&"0"===t[0],ks=t=>{var e,n,s;return t.value&&5!==(null===(e=t.value)||void 0===e?void 0:e.length)&&10!==(null===(n=t.value)||void 0===n?void 0:n.length)&&12!==(null===(s=t.value)||void 0===s?void 0:s.length)?{lengthMismatch:!0}:null},Is=t=>{const e=new RegExp("^[0-9]+$");return t.value&&!t.value.match(e)?{rubInvalidNumbers:!0}:t.value&&t.value.length>8&&!Vs(t.value)&&Ns(t.value)?{rubInvalid:!0}:t.value&&20!==t.value.length?{rubLength:!0}:null};let Os=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p,h,f,g,R,A){super(u.createCurrencyForm(),o,s,i,t,e,n,l,c,b,r,a,p),this.companyService=t,this.paymentsService=e,this.maskService=n,this.route=s,this.router=i,this.api=o,this.dictionaries=c,this.translateService=r,this.authorityPermissionsService=a,this.modalService=l,this.pipelines=b,this.paymentsFormsFactory=u,this.maskPipe=m,this.recipientsService=d,this.featureFlagsService=p,this.accountsService=h,this.currencyPaymentService=f,this.curSymbolPipe=g,this.conversionService=R,this.contractsModalsService=A,this.nameMaxLength=103,this.cityMaxLength=32,this.paymentCategory=B.h.FOREIGN,this.isCounterPartyLoading$=new V.a(null),this.masks={iinOrBin:"iin",bankAccount:"foreignAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount",name:"foreignLatin",cityName:"foreignLatin",purpose:"foreignLatin",kvo:"kvo",kio:"kio",kpp:"kpp",oktmo:"oktmo",paymentBasis:"basis",budgetDocNumber:"budgetDocNumber",budgetPeriod:"budgetPeriod",rubNonRussiaCorrespondentIban:"russianAccount"},this.focusEmail$=new k.a,this.prevEmails$=new V.a([]),this.fetchingEmailsFor$=new V.a(null),this.accounts=[],this.isAccountsLoading=!0,this.contracts=[],this.filteredContracts=[],this.isContractsLoading=!1,this.isContractSelected=!1,this.withinContract=!1,this.isContractsDescriptionShown=!1,this.isContractsAgreementShown=!0,this.isContractsDescriptionLoading=!1,this.contractMaxAmount={amount:1e4,currency:G.a.USD},this.countries=[],this.countries$=new V.a([]),this.hasDefaultCity=!1,this.isCityShown=!1,this.cityPlaceholder$=new V.a("CURRENCY_PAYMENT.RECIPIENT.CITY"),this.isBicRequired=!0,this.isIntermediaryBankSwitchable=!1,this.hasIntermediaryBank=!1,this.ibanMaxLength=34,this.amountMask="separator.2",this.amountPlaceholder="0,00",this.amountSuffix=" ",this.isCommissionAccountSelectable=!0,this.isOurComission=!1,this.canPayCommission=!0,this.commissionBalance=null,this.isKppEnabled$=new V.a(!1),this.isKioEnabled$=new V.a(!1),this.isKvoEnabled$=new V.a(!1),this.codeWordLabel$=new V.a("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"),this.isCodeWordEnabled$=new V.a(!1),this.isRubNonRussia$=new V.a(!1),this.isRubToRussia$=new V.a(!1),this.isRussianBudgetDisabled=!1,this.isRussianBudget$=new V.a(!1),this.isRussianTaxpayer=!1,this.kbkList=[],this.isKbkLoading=!1,this.statuses=[],this.isStatusesLoading=!1,this.hasRussianBudgetExtras=!1,this.isForeignContractDisabled=!1,this.isAustraliaAud$=new V.a(!1),this.isAustraliaNonAud$=new V.a(!1),this.isCountryCanada$=new V.a(!1),this.rules.purposeLength=335,this.isForeignContractDisabled=this.featureFlagsService.isDisabled(z.a.FOREIGN_CONTRACT),this.featureFlagsService.featureFlags$.subscribe(t=>{this.isForeignContractDisabled=this.featureFlagsService.isDisabled(z.a.FOREIGN_CONTRACT)}),this.featureFlagsService.checkFeatureRoute(z.a.FOREIGN_PAYMENT).then(()=>{this.isRussianBudgetDisabled=this.featureFlagsService.isDisabled(z.a.RUB_BUDGET_PAYMENT),this.isForeignContractDisabled=this.featureFlagsService.isDisabled(z.a.FOREIGN_CONTRACT)})}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.retrieveKnps(),this.retrieveAccounts(),this.retrieveCountries(),this.retrieveContracts(),this.retrieveCodeWords(),this.retrieveKbks(),this.retrieveStatuses(),this.createControlsStream(this.form),this.getMaskConfig(),this.listenCommission(),this.listenCountrySelect(),this.listenWithinContractSwitch(),this.listenContractsSwitchDescription(),this.listenContractSelect(),this.listenEmailSearch(),this.listenWorkingDays(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenPurpose(),this.listenPayComission(),this.listenIntermediaryBankSwitch(),this.listenIntermediaryBankSwitchable(),this.listenAmount(),this.applyAmountValidation(),this.listenAmountMessage(),this.setAutoNumeration(),this.listenCompanyType(),this.listenIsRussianBudget(),this.listenIsRussianTaxpayer(),this.listenHasRussianBudgetExtras(),this.listenRouterParams(),this.listenKvo(),this.listenKio(),this.listenCodeWordEnabling(),this.listenCodeWord(),this.listenCodeWordsList(),this.listenRubToNonRussia(),this.listenRubNonRussiaCorrespondentBank(),this.listenAudToAustralia(),this.listenAudNonAustralia(),this.listenCountryIsCanada(),this.listenMaxLengths(),this.applyKbeRules(),this.applyNameRules(),this.applyCountryRules(),this.applyIbanRules()}applyKbeRules(){this.subs.add(this.controlsStream.withinContract.subscribe(t=>{t?this.clearValidation([this.form.controls.kbeCode]):this.setValidation([this.form.controls.kbeCode],[i.H.required,H.a.kbe])}))}applyNameRules(){const{name:t}=this.form.controls,{withinContract:e,senderAccount:n}=this.controlsStream;this.subs.add(Object(I.a)([e,n]).pipe(Object(M.a)()).subscribe(e=>{var n,s;const[o,c]=e,r=null===(s=null===(n=c)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,a=t.pristine;o?(t.disable(),this.clearValidation([t]),this.masks.name={mask:null}):(t.enable(),this.setValidation([t],[i.H.required]),this.masks.name=r===G.a.RUB?K.a.foreignCyrillic:K.a.foreignLatin),setTimeout(()=>{a&&t.markAsPristine()},0)}))}onNamePaste(t){t.preventDefault();const e=(t.clipboardData||window.clipboardData).getData("text").substring(0,this.nameMaxLength);this.form.controls.name.setValue(e)}applyCountryRules(){const{countryCode:t}=this.form.controls,{withinContract:e,senderAccount:n,contract:s}=this.controlsStream;this.subs.add(Object(I.a)([e,n,s]).pipe(Object(M.a)()).subscribe(e=>{var n,s;const[o,c]=e,r=null===(s=null===(n=c)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,a=t.pristine;if(o)t.disable(),this.clearValidation([t]);else{t.enable();const e=[i.H.required];r===G.a.CNY&&e.push(t=>t.value!==ye.a.CN?{cnyOnlyToChina:!0}:null),this.setValidation([t],e)}setTimeout(()=>{a&&t.markAsPristine()},0)}))}onCountrySearch({term:t}){if(!t)return void this.countries$.next(this.countries);const e=this.countries.filter(e=>e.code.toLowerCase().includes(t.toLowerCase())||e.nameEn.toLowerCase().includes(t.toLowerCase())||e.nameKk.toLowerCase().includes(t.toLowerCase())||e.nameRu.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>this.countrySorter(e,n,t));this.countries$.next(e)}onCountryFocus(){this.form.controls.senderAccount.value||(this.senderAccountDropdown.hasError=!0)}onCountrySelect(t){this.hasDefaultCity=!!t.defaultCityName,this.form.controls.country.setValue(t)}countrySorter(t,e,n){if(t.code.toLowerCase()===n.toLowerCase())return-1;if(e.code.toLowerCase()===n.toLowerCase())return 1;if(t.code.toLowerCase().includes(n.toLowerCase()))return-1;if(e.code.toLowerCase().includes(n.toLowerCase()))return 1;switch(this.translateService.currentLang){case"ru":return t.nameRu<e.nameRu?-1:1;case"en":return t.nameEn<e.nameEn?-1:1;case"kk":return t.nameKk<e.nameKk?-1:1;default:return 0}}countryComparator(t,e){return!0}mapCountryLabel(t){let e;switch(this.translateService.currentLang){case"ru":default:e=t.nameRu;break;case"kk":e=t.nameKk;break;case"en":e=t.nameEn}return`${t.code} - ${e||t.name}`}get currentCountryCode(){var t,e,n;const s=(null===(n=null===(e=null===(t=this.formValue.contract)||void 0===t?void 0:t.contractor)||void 0===e?void 0:e.country)||void 0===n?void 0:n.code)||null;return this.formValue.withinContract&&s?s.substring(0,2):!this.formValue.withinContract&&this.formValue.countryCode?this.formValue.countryCode.substring(0,2):null}retrieveCountries(){return Object(P.a)(this,void 0,void 0,(function*(){this.countries=yield this.currencyPaymentService.getCountries(),this.countries$.next(this.countries)}))}applyIbanRules(){const{senderAccount:t,country:e,countryCode:n,contract:s,contractId:o,bank:c,rubNonRussiaBank:r,withinContract:a}=this.controlsStream;this.subs.add(Object(I.a)([t,c,r,e,n,s,o,a,this.countries$]).subscribe(t=>{var e,n,s;const[o,c,r]=t,a=[i.H.required],l=null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,b=this.form.controls.bankAccount.pristine;if(l===G.a.RUB&&this.currentCountryCode===ye.a.RU)this.masks.bankAccount=K.a.russianAccount,a.push(t=>{var e;return((t,e)=>{const n=new RegExp("^[0-9]+$");return t.value&&!t.value.match(n)?{rubInvalidNumbers:!0}:t.value&&e&&!Vs(t.value)&&Ps(e)?{rubInvalidBudget:!0}:t.value&&e&&t.value.length>8&&!Vs(t.value)&&Ns(t.value)?{rubInvalid:!0}:t.value&&20!==t.value.length?{rubLength:!0}:null})(t,null===(e=c)||void 0===e?void 0:e.bic)});else{const t=l===G.a.RUB?r:c,e=null===(s=this.countries.find(e=>{var n;return e.id===(null===(n=t)||void 0===n?void 0:n.countryId)}))||void 0===s?void 0:s.code;this.masks.bankAccount=K.a.foreignAccount,a.push(t=>((t,e)=>{var n,s,i;const o=null===(n=t.value)||void 0===n?void 0:n.substring(0,2).match(/[A-Za-z]{2}/);return e&&o&&(null===(s=t.value)||void 0===s?void 0:s.substring(0,2).toUpperCase())!==(null===(i=e)||void 0===i?void 0:i.substring(0,2).toUpperCase())?{currencyMismatch:!0}:null})(t,e)),a.push(i.H.maxLength(this.ibanMaxLength))}this.setValidation([this.form.controls.bankAccount],a),setTimeout(()=>{b&&this.form.controls.bankAccount.markAsPristine()},0)}))}mapContractLabel(t){var e,n,s,i,o;const c=this.form.getRawValue().contract;return(null===(e=t)||void 0===e?void 0:e.contractNumber)||(null===(s=null===(n=t)||void 0===n?void 0:n.contractor)||void 0===s?void 0:s.name)?`${t.contractNumber} - ${null===(i=t.contractor)||void 0===i?void 0:i.name}`:c?`${c.contractNumber} - ${null===(o=c.contractor)||void 0===o?void 0:o.name}`:""}openForeignContractsRecipientsDictionary(){return Object(P.a)(this,void 0,void 0,(function*(){const t=this.modals.open(ge,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0}),{contract:e}=this.form.getRawValue();t.componentInstance.recipients=e.recipients;try{const e=yield t.result;this.selectContractRecipient(e)}catch(n){}}))}selectContractRecipient(t){var e,n,s,i;if(!t)return;const{name:o,country:c,countryCode:r,bankAccount:a,bank:l,cityName:b,fxContractRecipient:u,fxContractRecipientId:m}=this.form.controls;u.setValue(t),m.setValue(t.id),o.setValue(t.name||""),(null===(e=t.country)||void 0===e?void 0:e.code)&&!this.countries.find(e=>{var n;return e.code===(null===(n=t.country)||void 0===n?void 0:n.code)})&&this.countries$.next([...this.countries,t.country]),c.setValue(t.country),r.setValue((null===(n=t.country)||void 0===n?void 0:n.code)||t.countryCode),(t.cityName||t.defaultCityName)&&b.setValue(t.cityName||t.defaultCityName||""),t.iban&&a.setValue(t.iban),t.bankBic&&(l.setValue({code:t.bankBic,name:t.bankName}),null===(s=this.bankDropdown)||void 0===s||s.selectByBic(t.bankBic),null===(i=this.rubNonRussiaBankDropdown)||void 0===i||i.selectByBic(t.bankBic))}showContractDetails(t){t.preventDefault(),t.stopPropagation(),this.contractDetails.show()}onContractSelect(t,e=!1){var n,s,i;return Object(P.a)(this,void 0,void 0,(function*(){const{contract:o,kio:c,contractId:r}=this.form.controls,a=yield this.currencyPaymentService.getContractById(t.id);Object.assign(t,a),o.setValue(t),r.setValue(t.id),t.contractor.iinOrBin&&!e&&(null===(n=c)||void 0===n||n.setValue(t.contractor.iinOrBin));let l=null===(s=t.recipients)||void 0===s?void 0:s.find(t=>t.primary);const{fxContractRecipient:b,fxContractRecipientId:u}=this.form.getRawValue();if(!b&&!u&&l)return void this.selectContractRecipient(l);const m=null===(i=t.recipients)||void 0===i?void 0:i.find(t=>{var e;return(null===(e=b)||void 0===e?void 0:e.id)===t.id||u===t.id});m&&(l=m),this.selectContractRecipient(l)}))}contractComparator(t,e){if(!t)return!0;const n=e.contractor.name.toLowerCase().includes(t.toLowerCase()),s=e.contractNumber.toLowerCase().includes(t.toLowerCase());return n||s}onEmailOnSuccessFocus(t){this.focusEmail$.next(t.target.value)}onSenderAccountSelect(t){t&&(this.form.controls.senderAccount.setValue(t),this.form.controls.senderAccount.markAsDirty(),this.senderAccountDropdown.hasError=!1)}onCommissionAccountSelect(t){this.form.controls.commissionAccount.setValue(t)}get senderAccountsList(){return this.accounts.filter(t=>t.balance.currency!==G.a.KZT)}get commissionAccountsList(){const t=this.form.getRawValue().senderAccount;return this.accounts.filter(e=>{var n,s;return e.balance.currency===G.a.KZT||e.balance.currency===(null===(s=null===(n=t)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency)})}codeWordComparator(t,e){return!t||e.name.toLowerCase().includes(t.toLowerCase())||e.code.toLowerCase().includes(t.toLowerCase())}kbkComparator(t,e){return!t||e.code.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())}statusComparator(t,e){return!t||e.code.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())}scrollToContracts(t){return Object(P.a)(this,void 0,void 0,(function*(){t.preventDefault(),yield this.form.controls.withinContract.setValue(!0),setTimeout(()=>{document.getElementById("contractGroup").scrollIntoView({behavior:"smooth"}),this.contractsSelect.focus(),this.contractsSelect.open()},100)}))}onAmountPaste(t){var e,n;t.preventDefault();const s=this.form.getRawValue(),i=(t.clipboardData||window.clipboardData).getData("text");let o=this.maskService.getNumberedAmount(i);(null===(n=null===(e=s.senderAccount)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)===Ts&&(o=Math.trunc(o)),this.form.controls.amount.setValue(o)}mapCodeWordLabel(t){if(t)return`${t.code} - ${t.name}`}listenMaxLengths(){this.subs.add(Object(I.a)([this.isAustraliaAud$,this.isAustraliaNonAud$,this.isCountryCanada$,this.isRubNonRussia$,this.isRubToRussia$,this.controlsStream.name,this.controlsStream.purpose,this.purposeMessage$,this.controlsStream.countryCode]).subscribe(t=>{var e,n;let[s,o,c,r,a,l,b,u]=t;if(a=a||"",l=l||"",b=b||"",s?(this.nameMaxLength=35,this.cityMaxLength=26):o?(this.nameMaxLength=35,this.cityMaxLength=31):c?(this.nameMaxLength=35,this.cityMaxLength=32):(this.nameMaxLength=103,this.cityMaxLength=32),r||c){this.rules.purposeLength=203;const t=a.match(Es);(null===(e=t)||void 0===e?void 0:e.length)>0&&(this.nameMaxLength-=2*t.length);const s=l.match(Es);(null===(n=s)||void 0===n?void 0:n.length)>0&&(this.rules.purposeLength-=2*s.length)}else this.rules.purposeLength=u===ye.a.CN?300:335;this.setValidation([this.form.controls.purpose],[i.H.maxLength(u===ye.a.CN?this.rules.purposeLength:this.rules.purposeLength-b.length)],!1)}))}listenAudToAustralia(){this.subs.add(this.isAustraliaAud$.subscribe(t=>{const{audIndex:e,audState:n,audStreet:s,audBuildingNumber:o}=this.form.controls;t?this.setValidation([e,n,s,o],[i.H.required]):this.clearValidation([e,n,s,o])}))}listenAudNonAustralia(){this.subs.add(this.isAustraliaNonAud$.subscribe(t=>{const{audAddress:e}=this.form.controls;t?this.setValidation([e],[i.H.required]):this.clearValidation([e])}))}listenCountryIsCanada(){this.subs.add(this.isCountryCanada$.subscribe(t=>{const{canAddress:e}=this.form.controls;t?this.setValidation([e],[i.H.required]):this.clearValidation([e])}))}listenCompanyType(){this.subs.add(this.companyService.refresh$.subscribe(t=>{this.companyService.currentCompany.type===Q.b.CORPORATE?(this.agreementText="CURRENCY_PAYMENT.AGREEMENT.CORPORATE",this.isForeignContractDisabled&&(this.isContractsAgreementShown=!1),this.isContractsDescriptionShown=!0):(this.agreementText="CURRENCY_PAYMENT.AGREEMENT.ENTREPRENEUR",this.isForeignContractDisabled&&(this.isContractsAgreementShown=!0),this.isContractsDescriptionShown=!1)}))}retrieveKnps(){this.knp$=this.combineKNP([t=>this.dictionaries.selectByPaymentType(t,{type:B.j.FOREIGN,sortFavourite:!1})])}retrieveAccounts(){return Object(P.a)(this,void 0,void 0,(function*(){this.isAccountsLoading=!0;try{const t=yield this.accountsService.getAccounts(this.companyService.currentId);this.accounts=t.filter(t=>t.balance.currency&&t.accountType===l.a.ACCOUNT).sort(this.sortAccounts),this.selectDefaultSenderAccount(),this.listenCommissionAccount()}catch(t){}finally{this.isAccountsLoading=!1}}))}selectDefaultSenderAccount(){try{1===this.senderAccountsList.length&&(this.senderAccountDropdown.selectAccount(this.senderAccountsList[0]),this.onSenderAccountSelect(this.senderAccountsList[0]),this.senderAccountDropdown.isDisabled=!0)}catch(t){}}retrieveContracts(){var t,e;return Object(P.a)(this,void 0,void 0,(function*(){this.isContractsLoading=!0;try{const n=yield this.currencyPaymentService.getContracts();this.contracts=n.filter(t=>t.status===B.c.REGED);const s=null===(e=null===(t=this.formValue.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency;this.filteredContracts=s?this.contracts.filter(t=>t.permittedCurrencies.includes(s)):[...this.contracts]}catch(n){}finally{this.isContractsLoading=!1}}))}retrieveKbks(){return Object(P.a)(this,void 0,void 0,(function*(){this.isKbkLoading=!0;try{this.kbkList=yield this.currencyPaymentService.getKbkList()}catch(t){}finally{this.isKbkLoading=!1}}))}retrieveStatuses(){return Object(P.a)(this,void 0,void 0,(function*(){this.isStatusesLoading=!0;try{this.statuses=yield this.currencyPaymentService.getStatuses()}catch(t){}finally{this.isStatusesLoading=!1}}))}retrieveCodeWords(t=this.currentCountryCode){return Object(P.a)(this,void 0,void 0,(function*(){if(!this.isCodeWordsLoading){this.isCodeWordsLoading=!0;try{if(t){this.codeWords=yield this.currencyPaymentService.getCodeWords(t);const e=this.form.controls.codeWord.value;this.codeWords.find(t=>e.code===t.code&&e.countryCode===t.countryCode)||this.form.controls.codeWord.setValue("")}}catch(e){}finally{this.isCodeWordsLoading=!1}}}))}listenCountrySelect(){const{countryCode:t,senderAccount:e,country:n}=this.controlsStream;this.subs.add(Object(I.a)([t,e,n]).pipe(Object(M.a)()).subscribe(t=>{var e,n;const[s,o]=t;s&&(this.form.controls.bankLabel.setValue(""),this.form.controls.bank.setValue(null),(null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)===G.a.RUB||this.hasDefaultCity?(this.isCityShown=!1,this.clearValidation([this.form.controls.cityName])):(this.isCityShown=!0,this.setValidation([this.form.controls.cityName],[i.H.required])))}))}listenContractsSwitchDescription(){this.subs.add(this.controlsStream.senderAccount.subscribe(t=>{var e,n,s,i,o,c;this.filteredContracts=this.contracts.filter(e=>{var n,s,i;return null===(n=e.permittedCurrencies)||void 0===n?void 0:n.includes(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)}),(null===(n=null===(e=this.formValue.contract)||void 0===e?void 0:e.amount)||void 0===n?void 0:n.currency)!==(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)&&(this.form.controls.contract.setValue(null),this.form.controls.contractId.setValue("")),this.updateContractsSwitchDescriptionParams((null===(c=null===(o=t)||void 0===o?void 0:o.balance)||void 0===c?void 0:c.currency)||null)}))}listenIsRussianBudget(){this.subs.add(Object(I.a)([this.controlsStream.senderAccount,this.controlsStream.bankAccount,this.controlsStream.bank,this.controlsStream.withinContract,this.controlsStream.contract,this.controlsStream.country]).subscribe(t=>{var e,n,s;const[i,o,c]=t,r=Vs(o)&&Ps(null===(e=c)||void 0===e?void 0:e.bic);this.currentCountryCode===ye.a.RU&&(null===(s=null===(n=i)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency)===G.a.RUB&&r&&!this.featureFlagsService.isDisabled(z.a.RUB_BUDGET_PAYMENT)?(this.isRussianBudget$.next(!0),this.form.controls.isRussianBudget.setValue(!0)):(this.isRussianBudget$.next(!1),this.form.controls.isRussianBudget.setValue(!1))}))}listenWithinContractSwitch(){const{withinContract:t,senderAccount:e,contract:n,country:s}=this.controlsStream;this.subs.add(Object(I.a)([t,e,n,s]).pipe(Object(M.a)()).subscribe(t=>{var e,n,s;const[o,c,r,a]=t;this.withinContract=o;const l=null===(n=null===(e=c)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,{bank:b,bankLabel:u}=this.form.controls,m=[b,u];if(this.currentCountryCode===ye.a.US?(this.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_STATE"),this.clearValidation([this.form.controls.bankLabel,this.form.controls.bank])):this.cityPlaceholder$.next(this.formValue.isRubNonRussia?"CURRENCY_PAYMENT.RECIPIENT.CITY_BANK":"CURRENCY_PAYMENT.RECIPIENT.CITY"),o){const t=l===G.a.RUB;!(null===(s=r)||void 0===s?void 0:s.contractor.iinOrBin)&&t?this.isKioEnabled$.next(!0):this.isKioEnabled$.next(!1),this.clearValidation(m),this.setValidation([this.form.controls.contractId],[t=>this.currentCountryCode!==ye.a.CN&&l===G.a.CNY?{cnyOnlyToChina:!0}:null,i.H.required],!1);const e=l===G.a.AUD,n=this.currentCountryCode===ye.a.CA,o=this.currentCountryCode===ye.a.AU;this.isAustraliaAud$.next(e&&o),this.isAustraliaNonAud$.next(!e&&o),this.isCountryCanada$.next(n),this.currentCountryCode&&l===G.a.RUB&&(this.rubNonRussiaWithinContractCountry=r.contractor.country.code,this.applyRubPaymentRules(this.rubNonRussiaWithinContractCountry))}else{this.form.controls.contract.setValue(null,{emitEvent:!1}),this.form.controls.contractId.setValue(null),this.clearValidation([this.form.controls.contractId]),this.setValidation(m,[i.H.required]);const t=l===G.a.AUD,e=this.currentCountryCode===ye.a.AU,n=this.currentCountryCode===ye.a.CA;this.isAustraliaAud$.next(t&&e),this.isAustraliaNonAud$.next(!t&&e),this.isCountryCanada$.next(n),l===G.a.RUB?this.applyRubPaymentRules(this.currentCountryCode):l===G.a.CNY?(this.form.controls.codeWord.setValue(""),this.applyChinaPaymentRules(this.currentCountryCode)):this.applyDefaultPaymentRules()}}))}listenCodeWordEnabling(){const{withinContract:t,contract:e,country:n}=this.controlsStream;this.subs.add(Object(I.a)([t,e,n]).subscribe(t=>{this.currentCountryCode===ye.a.AE?(this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD_AE")):this.currentCountryCode===ye.a.CN?(this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")):(this.isCodeWordEnabled$.next(!1),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"))}))}listenContractSelect(){this.subs.add(this.controlsStream.contractId.pipe(Object(M.a)()).subscribe(t=>{this.isContractSelected=!!t}))}updateContractsSwitchDescriptionParams(t=G.a.USD){return Object(P.a)(this,void 0,void 0,(function*(){if(t&&t!==G.a.USD){this.isContractsDescriptionLoading=!0;const e={currencyFrom:t,currencyTo:G.a.USD,sum:{amount:1e4,currency:G.a.USD}};try{const n=yield this.conversionService.getRate(e);this.contractMaxAmount={amount:n.calculatedSum,currency:t}}catch(s){this.contractMaxAmount={amount:1e4,currency:G.a.USD}}finally{this.isContractsDescriptionLoading=!1}}else this.contractMaxAmount={amount:1e4,currency:G.a.USD};let e=this.maskService.getMaskedAmount(this.contractMaxAmount.amount);e=e.split(",").filter(t=>parseInt(t,10)>0).map((t,e)=>1===e&&t.length<2?`${t}0`:t).join(",");const n=this.curSymbolPipe.transform(this.contractMaxAmount.currency);this.contractsSwitchDescriptionParams={amount:`${e} ${n}`}}))}openForeignRecipientsDictionary(){var t,e;return Object(P.a)(this,void 0,void 0,(function*(){const n=this.modals.open(be,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0});try{const s=yield n.result,{countryCode:i,cityName:o,name:c,bankAccount:r,kbeCode:a,bank:l,kio:b}=this.form.controls,{recipient:u,account:m}=s;i.setValue(u.countryCode),o.setValue(u.cityName||""),c.setValue(u.name||""),r.setValue(m.iban),a.setValue(u.kbe.code),l.setValue({bic:m.bic,name:m.bankName}),this.bankDropdown.selectByBic(m.bic),null===(t=this.rubNonRussiaBankDropdown)||void 0===t||t.selectByBic(m.bic),null===(e=b)||void 0===e||e.setValue(u.iinOrBin)}catch(s){}}))}get formValue(){return this.form.getRawValue()}get shouldBindContract(){var t,e;return-1===Ss.indexOf(this.formValue.knp)&&!this.isForeignContractDisabled&&(null===(e=null===(t=this.formValue.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency)===this.contractMaxAmount.currency&&!this.formValue.contractId&&this.maskService.getNumberedAmount(this.formValue.amount)>this.contractMaxAmount.amount}applyAmountValidation(){this.subs.add(Object(I.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe(t=>{var e,n;const[s,o]=t;let c=[i.H.required,i.H.min(this.paymentsService.rules.minAmount),i.H.max(this.paymentsService.rules.maxAmount),t=>{var e;return 0===(null===(e=t)||void 0===e?void 0:e.value)?{cantBeZero:!0}:null}];(null===(n=null===(e=s)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)!==this.contractMaxAmount.currency||o||c.push(t=>{const e=this.maskService.getNumberedAmount(t.value);if(!this.isForeignContractDisabled&&!this.withinContract)return e>this.contractMaxAmount.amount?-1!==Ss.indexOf(this.formValue.knp)?null:{mustIncludeContract:!0}:null}),this.setValidation([this.form.controls.amount],c,!1)}))}setValidation(t,e,n=!0){t.forEach(t=>{const s=t.pristine;t.setValidators(e),t.updateValueAndValidity({emitEvent:n}),setTimeout(()=>{s&&t.markAsPristine()},0)})}clearValidation(t,e=!0){t.forEach(t=>{const n=t.pristine;t.clearValidators(),t.updateValueAndValidity({emitEvent:e}),setTimeout(()=>{n&&t.markAsPristine()},0)})}listenPayComission(){this.subs.add(this.controlsStream.payComission.pipe(Object(M.a)()).subscribe(t=>{this.isOurComission=t}))}listenIntermediaryBankSwitchable(){const{senderAccount:t,country:e,bank:n}=this.controlsStream;this.subs.add(Object(I.a)([t,e,n]).subscribe(t=>{var e,n,s;const[i,o,c]=t,r=null===(n=null===(e=i)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency,a=null===(s=c)||void 0===s?void 0:s.bic;(r===G.a.EUR||r===G.a.USD&&this.currentCountryCode!==ye.a.US)&&a!==Cs.JYSAN?(this.isIntermediaryBankSwitchable=!0,this.setValidation([this.form.controls.intermediaryBankLabel],[t=>{const e=this.form.getRawValue();return t.value&&t.value===e.bankLabel?{equalBanks:!0}:null}])):(this.clearValidation([this.form.controls.intermediaryBankLabel]),this.isIntermediaryBankSwitchable=!1)}))}listenIntermediaryBankSwitch(){this.subs.add(this.controlsStream.hasIntermediaryBank.pipe(Object(M.a)()).subscribe(t=>{this.hasIntermediaryBank=t,t||(this.form.controls.intermediaryBankLabel.setValue(""),this.form.controls.intermediaryBank.setValue(null))}))}listenEmailSearch(){const{emailOnSuccess:t}=this.form.controls;this.subs.add(this.controlsStream.notify.pipe(Object(x.a)(100)).subscribe(e=>e?t.enable():t.disable())),this.search=t=>Object(I.a)([this.prevEmails$.pipe(Object(y.a)(t=>t.map(t=>t.email))),t.pipe(Object(x.a)(200),Object(M.a)(),Object(D.a)("")),this.focusEmail$]).pipe(Object(y.a)(([t,e,n])=>e?t.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,3):t.slice(0,3)))}setAutoNumeration(){this.subs.add(this.paymentsService.foreignPaymentNumber$.pipe(Object(_.a)(this.controlsStream.number)).subscribe(([t,e])=>{e||this.form.controls.number.setValue(t)}))}listenCommission(){const{senderAccount:t,date:e,commissionAccount:n,amount:s,payComission:i}=this.controlsStream;Object(I.a)([t,e,n,s,i,this.workingHours$.asObservable()]).pipe(Object(x.a)(300)).subscribe(t=>{this.updateComission()})}updateComission(){var t,e,n,s,i,o,c,r,a,l,b,u;return Object(P.a)(this,void 0,void 0,(function*(){const{senderAccount:m,date:d,commissionAccount:p,amount:h,payComission:g}=this.form.controls;let R=!0;if([m,d,p,h,g].forEach(t=>{t.invalid&&(R=!1)}),!R)return;const A=this.form.getRawValue();try{const m=A.date?Object(f.ngbStructToISO)(A.date):null,d=this.maskService.getNumberedAmount(A.amount),p={companyId:this.companyService.currentId,category:B.h.FOREIGN,type:B.j.FOREIGN,details:{valueDate:m,paymentAmount:{amount:d,currency:null===(e=null===(t=A.senderAccount)||void 0===t?void 0:t.balance)||void 0===e?void 0:e.currency},foreignPaymentDetails:{type:A.payComission?"OUR":"SHA"},urgent:!1,payerIban:A.senderAccount.iban}};this.commissionBalance=yield this.api.getCommissionWithCurrency(p),this.form.controls.comission.setValue((null===(n=this.commissionBalance)||void 0===n?void 0:n.amount)||0),this.form.controls.comissionCurrency.setValue(this.commissionBalance.currency),this.comissionMessage=(null===(i=null===(s=A.commissionAccount)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.amount)<(null===(o=this.commissionBalance)||void 0===o?void 0:o.amount)&&(null===(r=null===(c=A.commissionAccount)||void 0===c?void 0:c.balance)||void 0===r?void 0:r.currency)===(null===(a=this.commissionBalance)||void 0===a?void 0:a.currency)?this.mapCommissionMessage({amount:(null===(l=this.commissionBalance)||void 0===l?void 0:l.amount)-(null===(u=null===(b=A.commissionAccount)||void 0===b?void 0:b.balance)||void 0===u?void 0:u.amount),currency:this.commissionBalance.currency}):Object(O.a)(null)}catch(y){this.commission$.next(null),this.comissionMessage=null}}))}mapCommissionMessage(t,e=this.workingHours$.value){var n;const s=this.form.getRawValue().date,i=this.maskService.formatAmount(t.amount),o=this.curSymbolPipe.transform(t.currency),c=(null===(n=e)||void 0===n?void 0:n.endTime)||f.edgeTimeLabel;return this.translateService.get(s?"CURRENCY_PAYMENT.MESSAGES.COMMISSION.WITH_DATE":"CURRENCY_PAYMENT.MESSAGES.COMMISSION.DEFAULT",{amount:`${i} ${o}`,edge:`${Object(f.formatNgbDate)(s,this.translateService.currentLang)} ${c}`})}mapAmountMessage(t,e=this.workingHours$.value){var n;const s=this.form.getRawValue().date,i=this.maskService.formatAmount(t.amount),o=this.curSymbolPipe.transform(t.currency),c=(null===(n=e)||void 0===n?void 0:n.endTime)||f.edgeTimeLabel;return this.translateService.get(s?"CURRENCY_PAYMENT.MESSAGES.AMOUNT.WITH_DATE":"CURRENCY_PAYMENT.MESSAGES.AMOUNT.DEFAULT",{amount:`${i} ${o}`,edge:`${Object(f.formatNgbDate)(s,this.translateService.currentLang)} ${c}`})}sortAccounts(t,e){return t.balance.currency===e.balance.currency?0:t.balance.currency===G.a.USD?-1:1}listenAmount(){const{amount:t}=this.form.controls;this.subs.add(this.controlsStream.senderAccount.pipe(Object(M.a)(),Object(y.a)(e=>{var n,s;const i=null===(s=null===(n=e)||void 0===n?void 0:n.balance)||void 0===s?void 0:s.currency,o=t.pristine;return this.amountSuffix=` ${this.curSymbolPipe.transform(i)||i||this.curSymbolPipe.transform(G.a.KZT)}`,i===Ts?(this.amountMask="separator.0",this.amountPlaceholder="0"):(this.amountMask="separator.2",this.amountPlaceholder="0,00"),o}),Object(w.a)(0)).subscribe(e=>{e&&e!==t.pristine&&t.markAsPristine()}))}listenAmountMessage(){const{senderAccount:t,date:e,amount:n,contractId:s}=this.controlsStream;Object(I.a)([t,e,n,s,this.workingHours$.asObservable()]).pipe(Object(M.a)()).subscribe(t=>{var e,n,s,i;const[o,c,r,a,l]=t,b=this.maskService.getNumberedAmount(r),u=(null===(n=null===(e=o)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.amount)<b&&!this.shouldBindContract;this.amountMessage=u?this.mapAmountMessage({amount:b-(null===(i=null===(s=o)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.amount),currency:o.balance.currency}):Object(O.a)(null)})}listenCommissionAccount(){this.subs.add(this.controlsStream.senderAccount.pipe(Object(M.a)()).subscribe(t=>{var e,n,s,i,o,c,r,a;const l=this.form.getRawValue().commissionAccount;if(l&&(null===(n=null===(e=l)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)!=(null===(i=null===(s=t)||void 0===s?void 0:s.balance)||void 0===i?void 0:i.currency)&&(this.commissionAccountDropdown.clearSelected(),this.onCommissionAccountSelect(null)),1===this.commissionAccountsList.length){const t=this.commissionAccountsList[0];null===(o=this.commissionAccountDropdown)||void 0===o||o.selectAccount(t),this.onCommissionAccountSelect(t),this.isCommissionAccountSelectable=!1}else this.isCommissionAccountSelectable=!0;const b=this.commissionAccountsList.filter(t=>t.balance.currency===G.a.KZT);1===(null===(c=b)||void 0===c?void 0:c.length)?(null===(r=this.commissionAccountDropdown)||void 0===r||r.selectAccount(b[0]),this.onCommissionAccountSelect(b[0])):0===b.length&&t&&(null===(a=this.commissionAccountDropdown)||void 0===a||a.selectAccount(t),this.onCommissionAccountSelect(t))}))}saveToDraft(t){var e;this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();const n=this.paymentsService.foreignPaymentNumber,s=t||Object.assign({},this.form.value);n.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},s)),this.pipeline.saveToDrafts(s,{paymentId:this.paymentId,type:B.j.FOREIGN,commission:null===(e=this.commissionBalance)||void 0===e?void 0:e.amount,userPurpose:this.form.value.purpose,category:B.h.FOREIGN}).then(t=>{t.id!==this.paymentId&&(t&&(this.restoredData={status:t.status,signatures:t.signatures,companyId:t.companyId}),this.router.navigate([this.route.snapshot.params.paymentId?"../":".",t.id],{relativeTo:this.route,state:{silent:!0,resolvedPayment:this.currencyPaymentService.mapForm(this.form.getRawValue())}}))}).catch(t=>{n.entity||n.fetching||(n.entity=s.number)}).finally(()=>{this.processingPayment$.next(null)})}listenRouterParams(){this.subs.add(this.route.params.pipe(Object(y.a)(t=>({state:window.history.state,params:t,route:this.route})),Object(x.a)(0),Object(Y.a)(({params:t,state:e})=>{var n,s,i;if(null===(n=e)||void 0===n?void 0:n.silent)return this.restoredData.status===B.i.DRAFT?this.paymentsService.rootTitle=ye.d.EDIT_DRAFT:this.restoredData.status===B.i.CREATED&&(this.paymentsService.rootTitle=ye.d.EDIT_PAYMENT),W.a;if(null===(s=e)||void 0===s?void 0:s.resolvedPayment)return Object(O.a)(e.resolvedPayment);if(t.paymentId||(null===(i=e)||void 0===i?void 0:i.repeatPaymentId)){const n=t.paymentId||e.repeatPaymentId;return Object(j.a)(this.api.getPaymentById(n)).pipe(Object(L.a)(t=>(this.router.navigate([this.router.url.replace("/"+n,"")]),W.a)))}return this.setAutoNumeration(),this.paymentsService.rootTitle=ye.d.NEW,W.a})).subscribe(t=>{this.restorePayment(t)}))}restorePayment(t){this.subs.add(Object(I.a)([this.knpStore.fetched$]).pipe(Object(U.a)(t=>t.every(t=>t)),Object(F.a)(()=>{var e;let n;try{n=this.pipeline.flattenPaymentToModel(t)}catch(s){n={}}this.restoredData={companyId:t.companyId,status:null===(e=t.status)||void 0===e?void 0:e.code,signatures:t.signatures},t.isNewPayment||t.id&&!this.paymentId?(n.number="",n.date=null,this.restoredData.status=null,this.paymentsService.rootTitle=ye.d.NEW):this.paymentsService.rootTitle=this.restoredData.status===B.i.DRAFT?ye.d.EDIT_DRAFT:ye.d.EDIT_PAYMENT,n.emailOnSuccess&&(n.notify=!0),this.form.patchValue(Object.assign({},n)),this.restoreAsyncData(t),this.isImported=t.imported,n.number||this.setAutoNumeration()}),Object(x.a)(10),Object($.a)(1)).subscribe())}sendPayment(t){var e,n;this.formDirective.form.markAsPristine();const s=this.paymentsService.paymentNumber,i=t||Object.assign({},this.form.value);return this.processingPayment$.next(i),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:i.amount,commission:null===(e=this.commissionBalance)||void 0===e?void 0:e.amount,status:null===(n=this.restoredData)||void 0===n?void 0:n.status,userPurpose:this.form.value.purpose,rawBody:i}).then(t=>{t?this.restoredData={status:t.status.code,signatures:t.signatures,companyId:t.companyId}:(this.restoredData=null,s.entity||s.fetching||(s.entity=i.number))}).catch(t=>{}).finally(()=>{this.processingPayment$.next(null)})}onSubmit(t){t&&t.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}processPayment(){return Object(P.a)(this,void 0,void 0,(function*(){const t=this.form.getRawValue();this.processingPayment$.next(t);try{const e=yield this.api.checkWorkingTime(t.date),n=yield this.api.checkAmountLimit(t.amount,this.paymentType);e&&n?this.sendPayment():this.processingPayment$.next(null)}catch(e){this.processingPayment$.next(null)}}))}openContractsAddingModal(t=null){var e;null===(e=t)||void 0===e||e.preventDefault(),this.contractsModalsService.showAddContractModal(!1)}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{this.modals.open(ut,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>{this.form.controls.knp.patchValue(t),this.form.controls.knpObject.patchValue(t)}).catch(()=>{})},0)}restoreAsyncData(t){var e,n,s,o,c,r,a,l,b,u,m,d,p,h,f,g,R;return Object(P.a)(this,void 0,void 0,(function*(){yield this.retrieveAccounts(),this.senderAccountDropdown.selectByIban(null===(e=t.details)||void 0===e?void 0:e.payerIban);const A=null===(o=null===(s=null===(n=t)||void 0===n?void 0:n.paymentRecipient)||void 0===s?void 0:s.recipientAccount)||void 0===o?void 0:o.bic,y=null===(a=null===(r=null===(c=t)||void 0===c?void 0:c.details)||void 0===r?void 0:r.foreignPaymentDetails)||void 0===a?void 0:a.intermediaryBankBic,v=null===(u=null===(b=null===(l=t)||void 0===l?void 0:l.details)||void 0===b?void 0:b.foreignPaymentDetails)||void 0===u?void 0:u.intermediaryBankIban;(null===(m=this.formValue.senderAccount)||void 0===m?void 0:m.balance.currency)===G.a.RUB&&this.currentCountryCode!==ye.a.RU&&this.isRubNonRussia$.next(!0),A&&setTimeout(()=>{var t,e;this.formValue.isRubNonRussia?null===(t=this.rubNonRussiaBankDropdown)||void 0===t||t.selectByBic(A):null===(e=this.bankDropdown)||void 0===e||e.selectByBic(A)},100),y&&setTimeout(()=>{var t;this.formValue.isRubNonRussia?this.rubNonRussiaCorrespondentBankDropdown.selectByBic(y):null===(t=this.intermediaryBankDropdown)||void 0===t||t.selectByBic(y)},100),v&&this.formValue.isRubNonRussia&&this.form.controls.rubNonRussiaCorrespondentIban.setValue(v),this.withinContract&&this.onContractSelect(this.formValue.contract,!0),(null===(d=t.details)||void 0===d?void 0:d.foreignPaymentDetails.codeWord)&&(yield this.retrieveCodeWords(),this.form.controls.codeWord.setValue(t.details.foreignPaymentDetails.codeWord)),this.commissionAccountDropdown.selectByIban(t.details.foreignPaymentDetails.commissionWithdrawalIban),this.hasDefaultCity=!!(null===(h=null===(p=t.paymentRecipient)||void 0===p?void 0:p.country)||void 0===h?void 0:h.defaultCityName),(null===(R=null===(g=null===(f=t)||void 0===f?void 0:f.details)||void 0===g?void 0:g.paymentAmount)||void 0===R?void 0:R.currency)===G.a.RUB||this.hasDefaultCity?(this.isCityShown=!1,this.clearValidation([this.form.controls.cityName])):(this.isCityShown=!0,this.setValidation([this.form.controls.cityName],[i.H.required]))}))}listenPurposeMessageStream(){this.subs.add(Object(I.a)([this.purposeMessage$,this.controlsStream.purpose,this.controlsStream.countryCode]).pipe(Object(y.a)(t=>{const[e,n,s]=t;return s===ye.a.CN?(n||"").length:(e||"").length+(n||"").length})).subscribe(this.purposeLength$)),this.validatePurpose()}listenIsRussianTaxpayer(){this.subs.add(this.controlsStream.isRussianTaxPayer.subscribe(t=>{t?(this.isRussianTaxpayer=!0,this.setValidation([this.form.controls.payerInn],[i.H.required,ks])):(this.isRussianTaxpayer=!1,this.clearValidation([this.form.controls.payerInn]))}))}listenHasRussianBudgetExtras(){this.subs.add(this.controlsStream.hasRussianBudgetExtras.subscribe(t=>{this.hasRussianBudgetExtras=!!t}))}listenKvo(){this.subs.add(this.isKvoEnabled$.pipe(Object(M.a)()).subscribe(t=>{t?this.setValidation([this.form.controls.kvo],[i.H.required]):this.clearValidation([this.form.controls.kvo])}))}listenPurpose(){this.subs.add(Object(I.a)([this.isKvoEnabled$.pipe(Object(M.a)()),this.controlsStream.kvo.pipe(Object(M.a)()),this.controlsStream.isRubNonRussia.pipe(Object(M.a)()),this.controlsStream.name.pipe(Object(M.a)()),this.controlsStream.withinContract.pipe(Object(M.a)()),this.controlsStream.bankAccount,this.controlsStream.country,this.controlsStream.countryCode,this.controlsStream.codeWord]).subscribe(t=>{var e;const[n,s,i,o,c,r,a,l,b]=t;let u="";n&&(u+=`'(VO${s||""})'`),i&&!c&&(u+=` \u0434\u043b\u044f ${o||""} \u0441\u0447\u0451\u0442 '${r||""}'`),l===ye.a.CN&&(u+=`//${(null===(e=b)||void 0===e?void 0:e.code)||""}`),this.purposeMessage$.next(u)}))}listenKio(){this.subs.add(Object(I.a)([this.isKioEnabled$,this.isRussianBudget$]).pipe(Object(M.a)()).subscribe(t=>{const[e,n]=t;if(e){let t;t=n?[ks,i.H.required]:[ks],this.setValidation([this.form.controls.kio],t)}else this.clearValidation([this.form.controls.kio])}))}listenCodeWordsList(){const{country:t,countryCode:e,contract:n,withinContract:s}=this.controlsStream;this.subs.add(Object(I.a)([t,e,n,s]).subscribe(t=>{this.retrieveCodeWords()}))}listenCodeWord(){this.subs.add(this.isCodeWordEnabled$.pipe(Object(M.a)()).subscribe(t=>{t?this.setValidation([this.form.controls.codeWord],[i.H.required]):this.clearValidation([this.form.controls.codeWord])}))}listenRubToNonRussia(){this.subs.add(Object(I.a)([this.isRussianBudget$,this.isRubToRussia$,this.isRubNonRussia$,this.controlsStream.senderAccount,this.controlsStream.contract,this.controlsStream.withinContract,this.controlsStream.bankAccount,this.controlsStream.bank]).subscribe(t=>{var e;const[n,s,o,c,r,a,l,b]=t;this.form.controls.isRubNonRussia.setValue(o);const u=null===(e=r)||void 0===e?void 0:e.contractor.bankCountryCode;o?(u&&u===ye.a.RU?setTimeout(()=>{this.rubNonRussiaCorrespondentBankDropdown.selectByBic(r.contractor.bank.code)},100):u&&u!==ye.a.RU&&setTimeout(()=>{var t;this.rubNonRussiaBankDropdown.selectByBic(null===(t=this.formValue.contract)||void 0===t?void 0:t.contractor.bank.code)},100),this.clearValidation([this.form.controls.bank,this.form.controls.bankLabel],!1),this.setValidation([this.form.controls.rubNonRussiaCorrespondentBankLabel],[i.H.required]),this.setValidation([this.form.controls.rubNonRussiaCorrespondentIban],[i.H.required,Is])):(a?this.clearValidation([this.form.controls.bank,this.form.controls.bankLabel],!1):(this.setValidation([this.form.controls.bank],[i.H.required],!1),this.setValidation([this.form.controls.bankLabel],[i.H.required,t=>{var e,n,s,i,o,r;return this.currentCountryCode===ye.a.RU&&(null===(n=null===(e=c)||void 0===e?void 0:e.balance)||void 0===n?void 0:n.currency)===G.a.RUB&&Vs(l)&&Ps(null===(s=b)||void 0===s?void 0:s.bic)&&this.isRussianBudgetDisabled?{rubBudgetDisabled:!0}:this.currentCountryCode===ye.a.RU&&(null===(o=null===(i=c)||void 0===i?void 0:i.balance)||void 0===o?void 0:o.currency)===G.a.RUB&&Vs(l)&&!Ps(null===(r=b)||void 0===r?void 0:r.bic)?{rubBudgetWrongBic:!0}:null}])),this.clearValidation([this.form.controls.rubNonRussiaCorrespondentBankLabel,this.form.controls.rubNonRussiaCorrespondentIban]))}))}listenRubNonRussiaCorrespondentBank(){this.subs.add(this.controlsStream.rubNonRussiaBank.subscribe(t=>{var e;(null===(e=t)||void 0===e?void 0:e.cityName)&&this.form.controls.cityName.setValue(t.cityName)}))}applyRubPaymentRules(t){t&&(this.applyRubPurposeRules(),t===ye.a.RU?(this.isRubNonRussia$.next(!1),this.isRubToRussia$.next(!0),this.applyRubToRussiaKvoAndKioRules(),this.applyRubToRussiaPayCommissionRules()):(this.isRubNonRussia$.next(!0),this.isRubToRussia$.next(!1),this.applyRubToNonRussiaCorrespondentRules(),this.applyRubToNonRussiaKvoAndKioRules()))}applyRubPurposeRules(){this.masks.purpose=K.a.foreignCyrillic}applyRubToRussiaKvoAndKioRules(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!0),this.isKppEnabled$.next(!0)}applyRubToRussiaPayCommissionRules(){this.canPayCommission=!1,this.form.controls.payComission.setValue(!1)}applyRubToNonRussiaCorrespondentRules(){this.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_BANK")}applyRubToNonRussiaKvoAndKioRules(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!1),this.isKppEnabled$.next(!1)}applyDefaultPaymentRules(){this.isRubNonRussia$.next(!1),this.applyDefaultPaymentPurposeRules(),this.applyDefaultPaymentKvoAndKioRules(),this.applyDefaultPaymentPayCommissionRules(),this.applyDefaultPaymentCodeWordRules()}applyDefaultPaymentPayCommissionRules(){this.canPayCommission=!0}applyDefaultPaymentPurposeRules(){this.masks.purpose=K.a.foreignLatin}applyDefaultPaymentKvoAndKioRules(){this.isKioEnabled$.next(!1),this.isKvoEnabled$.next(!1),this.isKppEnabled$.next(!1)}applyDefaultPaymentCodeWordRules(){this.isCodeWordEnabled$.next(!1)}applyChinaPaymentRules(t){t||(this.form.controls.countryCode.setValue(ye.a.CN),this.hasDefaultCity=!1,this.retrieveCodeWords(ye.a.CN)),this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")}knpIsChanged(){this.subs.add(Object(I.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe(t=>{const e=[i.H.required,i.H.min(this.paymentsService.rules.minAmount),i.H.max(this.paymentsService.rules.maxAmount),t=>{var e;return 0===(null===(e=t)||void 0===e?void 0:e.value)?{cantBeZero:!0}:null}];e.push(t=>{const e=this.maskService.getNumberedAmount(t.value);if(!this.isForeignContractDisabled&&!this.withinContract)return e>this.contractMaxAmount.amount?-1!==Ss.indexOf(this.formValue.knp)?null:{mustIncludeContract:!0}:null}),this.setValidation([this.form.controls.amount],e,!1)}))}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(q.a),v.Qb(ye.g),v.Qb(Oe.a),v.Qb(p.a),v.Qb(p.c),v.Qb(ye.c),v.Qb(at.a),v.Qb(r.e),v.Qb(We.c),v.Qb(c.q),v.Qb(ye.f),v.Qb(ye.e),v.Qb(o.b),v.Qb(X.a),v.Qb(z.b),v.Qb(l.c),v.Qb(ye.b),v.Qb(je.c),v.Qb(Me.a),v.Qb(xe.a))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-currency-payment"]],viewQuery:function(t,e){var n;1&t&&(v.Mc(Ze,!0),v.Wc(Je,!0),v.Wc(tn,!0),v.Wc(en,!0),v.Wc(nn,!0),v.Wc(sn,!0),v.Wc(on,!0),v.Wc(cn,!0),v.Wc(rn,!0),v.Wc(an,!0)),2&t&&(v.Cc(n=v.jc())&&(e.emailOnSuccess=n.first),v.Cc(n=v.jc())&&(e.senderAccountDropdown=n.first),v.Cc(n=v.jc())&&(e.contractsSelect=n.first),v.Cc(n=v.jc())&&(e.contractDetails=n.first),v.Cc(n=v.jc())&&(e.bankDropdown=n.first),v.Cc(n=v.jc())&&(e.intermediaryBankDropdown=n.first),v.Cc(n=v.jc())&&(e.commissionAccountDropdown=n.first),v.Cc(n=v.jc())&&(e.rubNonRussiaBankDropdown=n.first),v.Cc(n=v.jc())&&(e.rubNonRussiaCorrespondentBankDropdown=n.first),v.Cc(n=v.jc())&&(e.rubNonRussiaCorrespondentIbanInput=n.first))},features:[v.zb([{provide:A.a,useClass:A.b}]),v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"mb-4"],["translate","",1,"mb-4"],[3,"isLoading","isDisabledSelectable","label","hasError","accounts","selected"],["senderAccountDropdown",""],[1,"j-switch-wrap","form-group"],[3,"formControl"],[1,"ml-3"],["translate",""],["class","contracts-description",3,"jLoading","jLoadingInverted","is-loading",4,"ngIf"],[1,"form-section"],[1,"recipient-title","mb-4"],["translate","",1,"m-0"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",3,"click",4,"ngIf"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",3,"click",4,"ngIf"],[1,"form-group"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl","paste"],["countryWrapper",""],["bindValue","code",3,"appendTo","jFocusOnReturn","formControl","readonly","clearable","searchFn","items","change","focus","search"],["countrySelect",""],["j-option-tmp",""],["j-label-tmp",""],[3,"control","errorMessages"],["class","form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"mask","formControl"],["accountInput","jFormInput"],["class","j-switch-wrap form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","label","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindLabel","label","bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items","change"],["knpSelect",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl","mask","dropSpecialCharacters"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],["translate","",1,"j-input-helper","text-muted","mt-1","mb-0","p3"],[3,"hidden"],[3,"isLoading","accounts","isDisabledSelectable","hasError","label","selected"],["commissionAccountDropdown",""],["class","j-input-helper text-muted comission-message p3",4,"ngIf"],["clearable","true",3,"floatLabel"],["jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","thousandSeparator"," ","decimalMarker",",","maxlength","29",1,"form-control",3,"suffix","placeholder","mask","dropSpecialCharacters","formControl","paste"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-2","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],["class","mt-2","translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex align-items-center",4,"ngIf"],[1,"list-group-item","d-flex","align-items-center"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],["class","my-3 p3 text-muted",3,"innerHTML",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[3,"contract",4,"ngIf"],["amountInfo",""],["kbeInfo",""],["kppInfo",""],["oktmoInfo",""],["basisInfo",""],["budgetPeriodInfo",""],[1,"contracts-description",3,"jLoading","jLoadingInverted"],[1,"text-gray",3,"innerHTML"],["id","contractGroup",1,"form-group","mt-4"],["contractsWrapper",""],["bindValue","id",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items","change"],["contractsSelect",""],["j-notfound-tmp",""],["href","#","jSuffix","","class","mr-1 p3","translate","",3,"click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["type","button","class","list-dictionary form-section--action btn btn-xs btn-link float-right",3,"click",4,"ngIf"],["type","button",1,"list-dictionary","form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"j-option-label","text-wrap","p3"],[1,"text-dark","contract-row"],[3,"money"],[1,"text-muted","contract-row"],["translate","CURRENCY_PAYMENT.CONTRACTS.SELECT.REMAINDER"],[1,"contracts__empty"],["src","assets/img/payments/no_contract.svg"],[1,"mx-auto","mt-3","p2","text-muted",3,"innerHTML"],["href","#",1,"link","d-inline-block","mt-3",3,"click"],["label","CURRENCY_PAYMENT.CONTRACTS.NOT_FOUND"],[1,"text-center","my-2"],["href","#",1,"link","d-inline-block",3,"click"],["href","#","jSuffix","","translate","",1,"mr-1","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],[1,"j-option-label","text-wrap"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl"],[1,"kbe-account-row"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","4",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","28",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","10",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","25",1,"form-control",3,"formControl"],[1,"mt-0"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","70",1,"form-control",3,"formControl"],[3,"labelText","placeholderText","labelControl","errorMessages","bankControl"],["rubNonRussiaCorrespondentBankDropdown",""],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"validation","mask","formControl"],["rubNonRussiaCorrespondentIbanInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],["rubNonRussiaBankDropdown",""],[3,"placeholderText","labelControl","errorMessages","bankControl"],["bankDropdown",""],["class","j-input-helper text-muted mt-1 mb-0 p3","translate","",4,"ngIf"],[1,"intermediatory-content","ml-3"],["class","intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages",4,"ngIf"],["translate","",1,"d-block","text-gray"],[1,"intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages"],["intermediaryBankDropdown",""],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"mask","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","validation","formControl"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isRussianTaxPayer",1,"custom-control-input",3,"formControl"],["for","isRussianTaxPayer",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.IS_TAXPAYER",1,"p3","text-muted"],["class","russian-row",4,"ngIf"],[1,"russian-row"],["kbkRowWrapper",""],["kbkWrapper",""],[3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["kbkSelect",""],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","formControl"],["payerStatusWrap",""],["bindValue","code",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["payerStatusSelect",""],["type","checkbox","id","hasRussianBudgetExtras",1,"custom-control-input",3,"formControl"],["for","hasRussianBudgetExtras",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.EXTRAS",1,"p3","text-muted"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"formControl"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK_NOT_FOUND"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.STATUS_NOT_FOUND"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],[1,"mr-2",3,"inlineSVG"],["translate","",1,"p2","m-0"],["translate","",1,"p3","text-gray"],["codeWordsWrapper",""],["codeWordsSelect",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","comission-message","p3"],[3,"innerHTML"],[1,"j-input-helper","text-muted","mt-1","p3"],[1,"text-danger","mr-1",3,"translate","translateParams"],["href","#",1,"link-blue","contracts-scroll-link",3,"click"],["translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",1,"mt-2"],["translate","",1,"text-gray"],[1,"text-gray"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],[1,"my-3","p3","text-muted",3,"innerHTML"],["type","button",1,"btn","btn-link","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit","translate","",1,"btn","btn-outline-primary","btn-static"],[3,"contract"],["contractDetails",""],[1,"p4",3,"innerHTML"]],template:function(t,e){1&t&&(v.Pc(0,ln,1,2,"j-restricted-placeholder",0),v.Pc(1,vs,157,144,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,r.a,we.a,Ye.a,i.t,i.i,Z.a,Pt.a,et.a,i.c,Vt.a,o.a,i.o,Le.a,Ue.j,Ue.d,Ot.a,Fe.a,$e.a,Ue.b,Be.a,Ge.a,Ke.a,He.a,Ue.h,$t.a,Wt.a,kt.a,Ft,Qe.a,c.E,It.a,i.a,qe.a,c.G,ee,Xe.a],pipes:[s.b,r.d,ze.a],styles:[".payments__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}@media(min-width:960px){.payment-section--summary .payment-section--amount-warn{width:70%;text-align:right;margin-left:auto}}.kbe-account-row{margin-bottom:1rem}@media(min-width:960px){.kbe-account-row{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:130px 1fr}}@media(min-width:960px){.kbe-account-row .form-group{margin-bottom:0}}.intermediatory-content{width:100%}.intermediatory-input{margin-top:.5rem;position:relative;margin-bottom:.25rem}.intermediatory-input .bic-dropdown{left:0;right:0}.contract-row{display:-webkit-box;display:flex;width:100%;-webkit-box-pack:justify;justify-content:space-between}.contract-row>:first-child{padding-right:1rem}.list-dictionary{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;line-height:1}.list-dictionary span{display:block}.comission-message{margin-top:-12px}.j-select .j-spinner-loader{top:19px}.contracts__empty{text-align:center;max-width:312px;margin:0 auto}.russian-row{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1rem}.russian-row>*{width:100%;max-width:calc(50% - 6px)}.contracts-description{position:relative}.contracts-description.is-loading small{opacity:.5}.contracts-scroll-link{border-bottom:1px dashed #1586bb}.contracts-scroll-link:hover{border-color:#ef5630}.recipient-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}"],encapsulation:2}),t})();const Ws=["paymentComponent"];let js=(()=>{class t{constructor(t,e,n){this.router=t,this.navService=e,this.paymentsService=n}ngOnInit(){this.title$=this.paymentsService.rootTitle$.pipe(Object(y.a)(t=>`CURRENCY_PAYMENT.${t}`))}onClose(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}ngAfterViewInit(){this.formDirective=this.paymentComponent.formDirective,this.form=this.paymentComponent.form}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(p.c),v.Qb(C.a),v.Qb(T.c))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-currency-payments"]],viewQuery:function(t,e){var n;1&t&&v.Wc(Ws,!0),2&t&&v.Cc(n=v.jc())&&(e.paymentComponent=n.first)},features:[v.zb([{provide:A.a,useClass:A.b}])],decls:9,vars:5,consts:[[3,"closed"],[1,"f-page-title"],["paymentComponent",""]],template:function(t,e){1&t&&(v.Wb(0,"f-page",0),v.ic("closed",(function(t){return e.onClose()})),v.Wb(1,"f-page-header"),v.Wb(2,"h1",1),v.Rc(3),v.mc(4,"translate"),v.mc(5,"async"),v.Vb(),v.Vb(),v.Wb(6,"f-page-body"),v.Rb(7,"j-currency-payment",null,2),v.Vb(),v.Vb()),2&t&&(v.Ab(3),v.Tc(" ",v.nc(4,1,v.nc(5,3,e.title$))," "))},directives:[S.a,E.a,N.a,Os],pipes:[r.d,s.b],styles:[""]}),t})();var Ms=n("aDQ/"),xs=n("7o/Q");class Ds{call(t,e){return e.subscribe(new _s(t))}}class _s extends xs.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}let ws=(()=>{class t{constructor(){this.subs=new Et.a,this.itemChanges$=new V.a(0),this.routerTrigger$=this.itemChanges$.pipe(Object(D.a)(this.itemChanges$.getValue()),t=>t.lift(new Ds),Object(y.a)(([t,e])=>{const n={offsetEnterX:0,offsetLeaveX:0};return 0!==t&&(n.offsetEnterX=t>e?-100:100,n.offsetLeaveX=t>e?100:-100),{value:e,params:n}}),Object(Te.a)())}ngOnInit(){this.subs.add(this.routerTrigger$.subscribe())}ngOnDestroy(){this.subs.unsubscribe()}onActivate(t,e){e.activatedRouteData&&e.activatedRouteData.animation&&e.activatedRouteData.index!==this.itemChanges$.getValue()&&this.itemChanges$.next(e.activatedRouteData.index)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=v.Lb({type:t}),t})();const Ys=function(t){return[t]};let Ls=(()=>{class t extends ws{constructor(t,e,n){super(),this.navService=t,this.router=e,this.paymentsService=n,this.routes=h.a}ngOnInit(){super.ngOnInit(),this.title$=this.paymentsService.rootTitle$.pipe(Object(y.a)(t=>`PAYMENTS.${t}`))}onClose(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(C.a),v.Qb(p.c),v.Qb(T.c))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-tenge-payments"]],features:[v.zb([{provide:A.a,useClass:A.b}]),v.xb],decls:21,vars:23,consts:[[3,"closed"],[1,"f-page-title"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active",3,"routerLink"],[1,"outlet-animation-wrapper"],["outlet","outlet"]],template:function(t,e){1&t&&(v.Wb(0,"f-page",0),v.ic("closed",(function(t){return e.onClose()})),v.Wb(1,"f-page-header"),v.Wb(2,"h1",1),v.Rc(3),v.mc(4,"translate"),v.mc(5,"async"),v.Vb(),v.Wb(6,"div",2),v.Wb(7,"nav",3),v.Wb(8,"a",4),v.Rc(9),v.mc(10,"translate"),v.Vb(),v.Wb(11,"a",4),v.Rc(12),v.mc(13,"translate"),v.Vb(),v.Wb(14,"a",4),v.Rc(15),v.mc(16,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(17,"f-page-body"),v.Wb(18,"div",5),v.Rb(19,"router-outlet",null,6),v.Vb(),v.Vb(),v.Vb()),2&t&&(v.Ab(3),v.Tc(" ",v.nc(4,7,v.nc(5,9,e.title$))," "),v.Ab(5),v.sc("routerLink",v.xc(17,Ys,e.routes.tenge.order)),v.Ab(1),v.Tc(" ",v.nc(10,11,"PAYMENTS.TABS.PAYMENT_ORDER")," "),v.Ab(2),v.sc("routerLink",v.xc(19,Ys,e.routes.tenge.state.root)),v.Ab(1),v.Tc(" ",v.nc(13,13,"PAYMENTS.TABS.BUDGET")," "),v.Ab(2),v.sc("routerLink",v.xc(21,Ys,e.routes.tenge.salary)),v.Ab(1),v.Tc(" ",v.nc(16,15,"PAYMENTS.TABS.SALARY")," "))},directives:[S.a,E.a,p.f,p.e,N.a,p.h],pipes:[r.d,s.b],styles:[".payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}"],encapsulation:2,data:{animation:[Ms.c]}}),t})();var Us=n("gcYM"),Fs=n("jMpN"),$s=n("Dwsl"),Bs=n("+uUT"),Gs=n("zOyH"),Ks=n("ttPG"),Hs=n("0eeg"),Qs=n("Wo9y"),qs=n("EBek"),Xs=n("vZvt"),zs=n("570E"),Zs=n("zdqJ"),Js=n("mCLR"),ti=n("+BgI"),ei=n("wtV8"),ni=n("kFTB"),si=n("wGsJ"),ii=n("I0Rk");const oi=["vinTpl"],ci=["protocolNumberTpl"];function ri(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function ai(t,e){if(1&t&&(v.Wb(0,"div",50),v.Wb(1,"p",51),v.Rc(2),v.Vb(),v.Wb(3,"p",52),v.Rc(4),v.mc(5,"translate"),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(2),v.Sc(t.label),v.Ab(2),v.Uc("",v.nc(5,3,"PAYMENTS.FORM.BIN")," ",t.bin,"")}}function li(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div"),v.Wb(1,"button",53),v.ic("click",(function(e){v.Gc(t),v.lc(2);const n=v.Dc(19);return v.lc().openDepartmentDictionary(n,e)})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"p",54),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.Tc(" ",v.nc(3,2,"PAYMENTS.DICTIONARY.TITLE")," "),v.Ab(3),v.Tc(" ",v.nc(6,4,"PAYMENTS.DICTIONARY.FREQUENT_UGD")," "))}function bi(t,e){1&t&&v.Pc(0,li,7,6,"div",1),2&t&&v.sc("ngIf",!e.searchTerm)}function ui(t,e){1&t&&v.Rb(0,"div",9)}function mi(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div"),v.Wb(1,"button",53),v.ic("click",(function(e){v.Gc(t),v.lc(2);const n=v.Dc(57);return v.lc().openKBKDictionary(n,e)})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"p",54),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.Tc(" ",v.nc(3,2,"PAYMENTS.DICTIONARY.TITLE")," "),v.Ab(3),v.Tc(" ",v.nc(6,4,"PAYMENTS.DICTIONARY.FREQUENT_KBK")," "))}function di(t,e){1&t&&v.Pc(0,mi,7,6,"div",1),2&t&&v.sc("ngIf",!e.searchTerm)}function pi(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div"),v.Wb(1,"button",53),v.ic("click",(function(e){v.Gc(t),v.lc(2);const n=v.Dc(67);return v.lc().openKnpDictionary(n,e)})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"p",55),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Wb(7,"p",56),v.Rc(8),v.mc(9,"translate"),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.Tc(" ",v.nc(3,3,"PAYMENTS.DICTIONARY.TITLE")," "),v.Ab(3),v.Sc(v.nc(6,5,"PAYMENTS.DICTIONARY.FREQUENT_KNP")),v.Ab(3),v.Sc(v.nc(9,7,"PAYMENTS.DICTIONARY.KNP_DESCRIPTION")))}function hi(t,e){1&t&&v.Pc(0,pi,10,9,"div",1),2&t&&v.sc("ngIf",!e.searchTerm)}function fi(t,e){if(1&t&&(v.Wb(0,"div",57),v.Wb(1,"div",58),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function gi(t,e){1&t&&v.Rb(0,"div",9)}function Ri(t,e){if(1&t&&(v.Wb(0,"div",59),v.Rb(1,"span",60),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function Ai(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function yi(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function vi(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",61),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",62),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function Ci(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",63),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Ti(t,e){if(1&t&&(v.Wb(0,"div",64),v.Wb(1,"div",65),v.Rb(2,"j-period-input",66,67),v.mc(4,"translate"),v.Vb(),v.Vb()),2&t){const t=v.Dc(3),e=v.lc(2);v.Ab(2),v.sc("hasError",e.hasError(t,e.form.controls.period))("label",v.nc(4,3,"SHARED.TIME.PERIOD"))("formControl",e.form.controls.period)}}function Si(t,e){if(1&t&&(v.Wb(0,"div",64),v.Wb(1,"div",68),v.Rb(2,"j-period-input",66,69),v.mc(4,"translate"),v.mc(5,"translate"),v.Vb(),v.Wb(6,"div",68),v.Rb(7,"j-period-input",66,70),v.mc(9,"translate"),v.mc(10,"translate"),v.Vb(),v.Vb()),2&t){const t=v.Dc(3),e=v.Dc(8),n=v.lc(2);v.Ab(2),v.vc("label","",v.nc(4,8,"SHARED.TIME.MONTH")," ",v.nc(5,10,"SHARED.PREPOSITION.FROM"),""),v.sc("hasError",n.hasError(t,n.form.controls.periodStart)||n.hasError(e,n.form.controls.periodEnd))("formControl",n.form.controls.periodStart),v.Ab(5),v.vc("label","",v.nc(9,12,"SHARED.TIME.MONTH")," ",v.nc(10,14,"SHARED.PREPOSITION.TO"),""),v.sc("hasError",n.hasError(e,n.form.controls.periodEnd)||n.hasError(t,n.form.controls.periodStart))("formControl",n.form.controls.periodEnd)}}function Ei(t,e){if(1&t&&(v.Wb(0,"j-form-field",71),v.Wb(1,"j-label"),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Rb(4,"input",72),v.Rb(5,"j-error",34),v.Vb(),v.Wb(6,"div",59),v.Rb(7,"span",60),v.Vb()),2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,5,"PAYMENTS.FORM.VIN")),v.Ab(2),v.sc("formControl",t.form.controls.vin),v.Ab(1),v.sc("control",t.form.controls.vin)("errorMessages",t.errors.vin),v.Ab(2),v.sc("innerHTML",t.vinMessage,v.Hc)}}function Ni(t,e){if(1&t&&(v.Wb(0,"j-form-field",71),v.Wb(1,"j-label"),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Rb(4,"input",16),v.Vb()),2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,3,"PAYMENTS.FORM.PROTOCOL_NUMBER")),v.Ab(2),v.sc("mask",t.masks.protocolNumber.mask)("formControl",t.form.controls.protocolNumber)}}function Pi(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"form",3,4),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(3,"div",5),v.Wb(4,"fieldset"),v.Wb(5,"div",6),v.Wb(6,"h2",7),v.Rc(7),v.mc(8,"translate"),v.Vb(),v.Wb(9,"button",8),v.ic("click",(function(e){v.Gc(t);const n=v.Dc(19);return v.lc().openDepartmentDictionary(n,e)})),v.Rc(10),v.mc(11,"translate"),v.Vb(),v.Vb(),v.Wb(12,"div",9),v.Wb(13,"j-form-field",null,10),v.Wb(15,"j-label"),v.Rc(16),v.mc(17,"translate"),v.Vb(),v.Wb(18,"j-select",11,12),v.mc(20,"async"),v.Pc(21,ai,6,5,"ng-template",13),v.Pc(22,bi,1,1,"ng-template",14),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(23,"div",5),v.Wb(24,"fieldset"),v.Wb(25,"legend",15),v.Rc(26),v.mc(27,"translate"),v.Vb(),v.Wb(28,"div",9),v.Wb(29,"j-form-field"),v.Wb(30,"j-label"),v.Rc(31),v.mc(32,"translate"),v.Vb(),v.Rb(33,"input",16),v.Vb(),v.Vb(),v.Pc(34,ui,1,0,"div",17),v.Wb(35,"div",9),v.Wb(36,"ul",18),v.Wb(37,"li",19),v.Rb(38,"j-switch",20),v.Wb(39,"span",21),v.Rc(40),v.mc(41,"translate"),v.Rb(42,"br"),v.Wb(43,"small",22),v.Rc(44),v.mc(45,"translate"),v.Wb(46,"span",23),v.Rc(47),v.mc(48,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(49,"div",9),v.Wb(50,"div",9),v.Wb(51,"j-form-field",null,24),v.Wb(53,"j-label"),v.Rc(54),v.mc(55,"translate"),v.Vb(),v.Wb(56,"j-select",25,26),v.ic("change",(function(e){return v.Gc(t),v.lc().onKbkSelect(e)})),v.mc(58,"async"),v.Pc(59,di,1,1,"ng-template",14),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(60,"div",9),v.Wb(61,"j-form-field",null,27),v.Wb(63,"j-label"),v.Rc(64),v.mc(65,"translate"),v.Vb(),v.Wb(66,"j-select",28,29),v.Pc(68,hi,1,1,"ng-template",14),v.Vb(),v.Vb(),v.Vb(),v.Wb(69,"div",30),v.Wb(70,"span",31),v.Rc(71),v.mc(72,"async"),v.Vb(),v.Wb(73,"j-form-field"),v.Wb(74,"j-label"),v.Rc(75),v.mc(76,"translate"),v.Vb(),v.Rb(77,"textarea",32,33),v.Rb(79,"j-error",34),v.Pc(80,fi,3,1,"div",35),v.mc(81,"async"),v.Vb(),v.Vb(),v.Pc(82,gi,1,0,"div",17),v.Vb(),v.Vb(),v.Wb(83,"div",5),v.Wb(84,"fieldset"),v.Wb(85,"div",9),v.Wb(86,"j-account-dropdown",36,37),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(88,"async"),v.mc(89,"async"),v.Vb(),v.Vb(),v.Wb(90,"div",9),v.Wb(91,"div",9),v.Wb(92,"j-form-field",38),v.Wb(93,"j-label"),v.Rc(94),v.mc(95,"translate"),v.Vb(),v.Rb(96,"input",39),v.Vb(),v.Pc(97,Ri,3,3,"div",40),v.mc(98,"async"),v.Wb(99,"div",41),v.Pc(100,Ai,3,3,"ng-container",42),v.mc(101,"async"),v.Pc(102,yi,4,8,"ng-template",null,43,v.Qc),v.Vb(),v.Vb(),v.Vb(),v.Wb(104,"div",9),v.Wb(105,"ul",18),v.Wb(106,"li",19),v.Rb(107,"j-switch",20),v.Wb(108,"span",21),v.Rc(109),v.mc(110,"translate"),v.Rb(111,"br"),v.Wb(112,"small",22),v.Rc(113),v.mc(114,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(115,"div",44),v.Wb(116,"div",44),v.Pc(117,vi,7,6,"ng-container",1),v.Pc(118,Ci,4,3,"ng-container",1),v.Vb(),v.Vb(),v.Pc(119,Ti,5,5,"ng-template",null,45,v.Qc),v.Pc(121,Si,11,16,"ng-template",null,46,v.Qc),v.Pc(123,Ei,8,7,"ng-template",null,47,v.Qc),v.Pc(125,Ni,5,5,"ng-template",null,48,v.Qc),v.Rb(127,"ngx-spinner",49),v.Rb(128,"ngx-spinner",49),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(14),e=v.Dc(19),n=v.Dc(52),s=v.Dc(57),i=v.Dc(62),o=v.Dc(67),c=v.Dc(103),r=v.Dc(120),a=v.Dc(122),l=v.lc();v.Ab(1),v.sc("formGroup",l.form),v.Ab(6),v.Tc(" ",v.nc(8,64,"PAYMENTS.RECIPIENT.TITLE")," "),v.Ab(3),v.Tc(" ",v.nc(11,66,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),v.Ab(6),v.Sc(v.nc(17,68,"PAYMENTS.FORM.UGD")),v.Ab(2),v.sc("appendTo",t.elementRef.nativeElement)("jFocusOnReturn",e)("formControl",l.form.controls.ugd)("clearable",!1)("searchFn",l.paymentsService.ugdSearchFn)("items",v.nc(20,70,l.ugdStore.items$)),v.Ab(8),v.Sc(v.nc(27,72,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(32,74,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",l.masks.number.mask)("formControl",l.form.controls.number),v.Ab(1),v.sc("ngTemplateOutlet",l.form.controls.intervalEnabled.value?a:r),v.Ab(4),v.sc("formControl",l.form.controls.intervalEnabled),v.Ab(2),v.Tc(" ",v.nc(41,76,"PAYMENTS.FORPERIOD")," "),v.Ab(4),v.Tc(" ",v.nc(45,78,l.intervalSwitchLabel)," "),v.Ab(2),v.sc("hidden",!l.form.controls.intervalEnabled.value),v.Ab(1),v.Tc(": ",v.nc(48,80,l.periodMessage$)," "),v.Ab(7),v.Sc(v.nc(55,82,"PAYMENTS.FORM.KBK")),v.Ab(2),v.sc("jFocusOnReturn",s)("appendTo",n.elementRef.nativeElement)("formControl",l.form.controls.kbk)("clearable",!1)("searchMask",l.masks.kbk.mask)("shadow",l.masks.kbk.shadow)("items",v.nc(58,84,l.kbkStore.items$)),v.Ab(8),v.Sc(v.nc(65,86,"PAYMENTS.FORM.KNP_REGULAR")),v.Ab(2),v.sc("appendTo",i.elementRef.nativeElement)("jFocusOnReturn",o)("formControl",l.form.controls.knp)("clearable",!1)("searchMask",l.masks.knp.mask)("shadow",l.masks.knp.shadow)("items",l.filteredKnpList),v.Ab(5),v.Uc(" ",v.nc(72,88,l.purposeLength$),"/",l.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(76,90,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",l.form.controls.purpose),v.Ab(2),v.sc("control",l.form.controls.purpose)("errorMessages",l.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(81,92,l.purposeMessage$)),v.Ab(2),v.sc("ngTemplateOutlet",l.associatedFieldTpl),v.Ab(4),v.sc("isLoading",v.nc(88,94,l.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",l.form.controls.senderAccount.touched&&l.form.controls.senderAccount.errors)("accounts",v.nc(89,96,l.acceptableAccounts$)),v.Ab(6),v.sc("floatLabel","always"),v.Ab(2),v.Sc(v.nc(95,98,"PAYMENTS.FORM.AMOUNT")),v.Ab(2),v.sc("dropSpecialCharacters",!0)("formControl",l.form.controls.amount),v.Ab(1),v.sc("ngIf",v.nc(98,100,l.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(101,102,l.commission$))("ngIfElse",c),v.Ab(7),v.sc("formControl",l.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(110,104,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(114,106,"PAYMENTS.URGENT_HELPER")),v.Ab(4),v.sc("ngIf",l.restoredData.status!==l.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",l.restoredData.status===l.PAYMENT_STATUS.CREATED),v.Ab(9),v.sc("name",l.SPINNER)("fullScreen",!1),v.Ab(1),v.sc("name",l.SPINNER)("fullScreen",!1)}}let Vi=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p,h){super(p.createTaxForm(),u,t,e,s,n,o,l,m,b,c,h,d),this.route=t,this.router=e,this.paymentsService=n,this.companyService=s,this.dateAdapter=i,this.maskService=o,this.translate=c,this.datePipe=r,this.accountsService=a,this.modalService=l,this.pipelines=b,this.api=u,this.dictionaries=m,this.featureFlagsService=d,this.paymentsFormsFactory=p,this.authorityPermissionsService=h,this.associatedFieldTpl=void 0,this.masks={number:"paymentNum",amount:"amount",vin:"vin",knp:"knp",kbk:"kbk",protocolNumber:"protocol"},this.commission$=new V.a(0),this.protocolMessage$=new V.a(""),this.vinLength=17,this.subs=new Et.a,this.paymentType=B.j.TAX}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.combineKBK(this.paymentType),this.knp$=this.combineKNP([(t,e)=>{if(e[0]){const t=this.knpStore.getItemsByIds(this.kbkStore.entities[e[0]].associatedKnpList),n=this.form.controls.knp;return n.enable(),setTimeout(()=>{1===t.length?(n.patchValue(t[0].code),this.focusableContainer.focusNext()):t.some(t=>t.code===n.value)||n.patchValue("")},100),t}return[]}],[this.controlsStream.kbk]),this.listenWorkingDays(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenKnpUpdates(),this.subs.add(this.createPeriodMessage$().subscribe(this.periodMessage$)),this.subs.add(Object(I.a)([this.controlsStream.vin.pipe(Object(y.a)(t=>t?`VIN${t}/V`:"")),this.controlsStream.protocolNumber.pipe(Object(y.a)(t=>t?`ADM${t}/A`:""))]).subscribe(t=>{this.protocolMessage$.next(t.join(" "))}));const t=[this.protocolMessage$.pipe(Object(y.a)(t=>["protocol",t])),Object(I.a)([this.translate.get("SHARED.NOT_SELECTED"),this.translate.get("SHARED.TIME.PERIOD"),this.periodMessage$]).pipe(Object(y.a)(([t,e,n])=>n&&n!==t?`${e}: ${n}.`:""),Object(y.a)(t=>["period",t]))];this.listenPurposeMessageStream(t,["protocol","kbk","knp","period"]),this.subs.add(this.controlsStream.kbk.pipe().subscribe(t=>{const{protocolNumber:e,vin:n}=this.form.controls;this.rules.kbkCodeVinReq.some(e=>e===t)?(n.enable(),e.disable(),e.value&&e.patchValue(""),this.associatedFieldTpl=this.vinTpl):/^204\d+$/.test(t)?(n.disable(),n.value&&n.patchValue(""),e.enable(),this.associatedFieldTpl=this.protocolNumberTpl):(this.associatedFieldTpl=null,n.disable(),e.disable(),e.value&&e.patchValue(""),n.value&&n.patchValue(""))})),this.subs.add(this.controlsStream.intervalEnabled.pipe(Object(Us.a)(300,void 0,{leading:!0,trailing:!0}),Object(M.a)()).subscribe(t=>{const{period:e,periodEnd:n,periodStart:s}=this.form.controls;t?([n,s].forEach(t=>t.enable()),e.disable()):([n,s].forEach(t=>t.disable()),e.enable())}))}get intervalSwitchLabel(){return this.form.controls.intervalEnabled.value?"PAYMENTS.INTERVAL.ENABLED":"PAYMENTS.INTERVAL.DISABLED"}onKbkSelect(t){!this.form.controls.knp.value&&t.associatedKnpList&&this.form.controls.knp.setValue(t.associatedKnpList[0])}openDepartmentDictionary(t,e){e&&e.preventDefault(),t&&(t.blur(),t.close()),this.modalService.open(pt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>{this.form.controls.ugd.setValue(t.code)}).catch(()=>{})}openKBKDictionary(t,e){e&&e.preventDefault(),t&&(t.blur(),t.close());const n=this.modalService.open(vt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});Object.assign(n.componentInstance,{store:this.kbkStore}),n.result.then(t=>{this.form.controls.kbk.setValue(t.code)}).catch(()=>{})}onUgdSelect(t){}createPeriodMessage$(){const{intervalEnabled:t,periodEnd:e,periodStart:n,period:s}=this.controlsStream;return Object(I.a)([t,this.translate.get("SHARED.NOT_SELECTED"),s,n,e]).pipe(Object(x.a)(0),Object(y.a)(([t,e,...n])=>{const[s,i,o]=n.map(t=>t?this.datePipe.transform(t,"MM.yyyy"):"");return!t&&!s||t&&!i&&!o?e:t?`${i||e} - ${o||e}`:`${s||e}`}))}sendPayment(){return super.sendPayment(this.constructTaxPaymentBody())}saveToDraft(){return super.saveToDraft(this.constructTaxPaymentBody())}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(ut,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=this.paymentType,t.result.then(t=>{if(!this.filteredKnpList.includes(t)){const e=this.kbkStore.items.find(t=>{var e;return t.code==(null===(e=this.form.controls.kbk)||void 0===e?void 0:e.value)}),n=this.knpStore.getItemsByIds(e.associatedKnpList);this.filteredKnpList=[...n,t]}this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}constructTaxPaymentBody(){const t=this.form.value,e=this.protocolMessage$.getValue();let n="";return n=e?this.purposeMessage$.getValue().replace(e,[e,t.purpose].filter(t=>!!t).join(" ")):[t.purpose,this.purposeMessage$.getValue()].filter(t=>!!t).join(". "),Object.assign(Object.assign({},t),{purpose:n})}listenKnpUpdates(){this.knp$.subscribe(t=>{this.filteredKnpList=t})}get vinMessage(){var t,e;return this.form.controls.vin.value&&0!==this.form.controls.vin.value.length?(null===(t=this.form.controls.vin.value)||void 0===t?void 0:t.length)<this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.LESS",{length:this.vinLength}):(null===(e=this.form.controls.vin.value)||void 0===e?void 0:e.length)>this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.MORE",{length:this.vinLength}):"":this.translate.instant("PAYMENTS.VIN_MESSAGE.OPTIONAL")}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(p.a),v.Qb(p.c),v.Qb(T.c),v.Qb(q.a),v.Qb(c.c),v.Qb(Oe.a),v.Qb(r.e),v.Qb(s.f),v.Qb(l.c),v.Qb(c.q),v.Qb(ti.a),v.Qb(ei.a),v.Qb(at.a),v.Qb(z.b),v.Qb(ni.a),v.Qb(We.c))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-tax-payment"]],viewQuery:function(t,e){var n;1&t&&(v.Wc(i.v,!0),v.Wc(Vt.b,!0),v.Wc(oi,!0,v.L),v.Wc(ci,!0,v.L)),2&t&&(v.Cc(n=v.jc())&&(e.ngForm=n.first),v.Cc(n=v.jc())&&(e.focusableContainer=n.first),v.Cc(n=v.jc())&&(e.vinTpl=n.first),v.Cc(n=v.jc())&&(e.protocolNumberTpl=n.first))},features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",1,"p-relative",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["selectWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["ugdSelect",""],["j-option-tmp",""],["j-header-tmp",""],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["class","form-group",4,"ngTemplateOutlet"],[1,"list-group"],[1,"list-group-item","text-left","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[3,"hidden"],["kbkWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items","change"],["kbkSelect",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchMask","shadow","items"],["knpSelect",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","suffix"," \u20b8","jFormInput","","jCursorBound","","placeholder","0,00","mask","separator.2","jReplaceDot","","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"payment-section--submit","form-group","pt-4"],["periodTpl",""],["intervalTpl",""],["vinTpl",""],["protocolNumberTpl",""],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[1,"j-option-label","text-wrap"],[1,"m-0"],[1,"p3","text-gray","m-0"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"row"],[1,"col"],[3,"hasError","label","formControl"],["period",""],[1,"col","col-md-6"],["periodStart",""],["periodEnd",""],["clearable","true"],["type","text","jFormInput","","jFocusOnReturn","","maxlength","64","jUppercase","",1,"form-control",3,"formControl"]],template:function(t,e){1&t&&(v.Pc(0,ri,1,2,"j-restricted-placeholder",0),v.Pc(1,Pi,129,108,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Pt.a,Le.a,Vt.a,i.t,i.i,Ue.j,Ue.b,et.a,i.c,o.a,s.B,Ye.a,Ot.a,we.a,Be.a,Ge.a,Ke.a,qe.a,si.a,i.o,Fe.a],pipes:[r.d,s.b,ii.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),t})();const ki=function(t){return[t]};let Ii=(()=>{class t extends ws{constructor(){super(),this.routes=h.a}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Kb({type:t,selectors:[["j-budget-payments"]],features:[v.xb],decls:17,vars:24,consts:[[1,"payment-section"],[1,"form-group","mb-5"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow",3,"routerLink"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow","ml-2",3,"routerLink"],[1,"outlet-animation-wrapper"],[3,"activate"],["outlet","outlet"]],template:function(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",0),v.Wb(1,"div",1),v.Wb(2,"a",2),v.Rc(3),v.mc(4,"translate"),v.Vb(),v.Wb(5,"a",3),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"a",3),v.Rc(9),v.mc(10,"translate"),v.Vb(),v.Wb(11,"a",3),v.Rc(12),v.mc(13,"translate"),v.Vb(),v.Vb(),v.Wb(14,"div",4),v.Wb(15,"router-outlet",5,6),v.ic("activate",(function(n){v.Gc(t);const s=v.Dc(16);return e.onActivate(n,s)})),v.Vb(),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.sc("routerLink",v.xc(16,ki,e.routes.tenge.state.tax)),v.Ab(1),v.Sc(v.nc(4,8,"PAYMENTS.TABS.TAX")),v.Ab(2),v.sc("routerLink",v.xc(18,ki,e.routes.tenge.state.pension)),v.Ab(1),v.Sc(v.nc(7,10,"PAYMENTS.TABS.PENSION")),v.Ab(2),v.sc("routerLink",v.xc(20,ki,e.routes.tenge.state.social)),v.Ab(1),v.Sc(v.nc(10,12,"PAYMENTS.TABS.SOCIAL")),v.Ab(2),v.sc("routerLink",v.xc(22,ki,e.routes.tenge.state.osms)),v.Ab(1),v.Sc(v.nc(13,14,"PAYMENTS.TABS.MEDICAL")))},directives:[p.f,p.e,p.h],pipes:[r.d],styles:[""],data:{animation:[Ms.c]}}),t})();var Oi=n("ZF+8");const Wi=["emailOnSuccess"];function ji(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function Mi(t,e){if(1&t){const t=v.Xb();v.Wb(0,"button",56),v.ic("click",(function(e){return v.Gc(t),v.lc(2).checkIin()})),v.Rc(1),v.mc(2,"translate"),v.Vb()}2&t&&(v.Ab(1),v.Sc(v.nc(2,1,"PAYMENTS.FORM.CHECK")))}function xi(t,e){1&t&&(v.Wb(0,"span"),v.Wb(1,"span",57),v.Rc(2,"PAYMENTS.TRUSTED_COUNTERPARTY"),v.Vb(),v.Rb(3,"span",58),v.Vb()),2&t&&(v.Ab(3),v.sc("inlineSVG","/assets/icons/counterparty/status.svg"))}function Di(t,e){1&t&&(v.Wb(0,"span"),v.Wb(1,"span",57),v.Rc(2,"PAYMENTS.UNTRUSTED_COUNTERPARTY"),v.Vb(),v.Rb(3,"span",59),v.Vb()),2&t&&(v.Ab(3),v.sc("inlineSVG","/assets/icons/counterparty/status.svg"))}function _i(t,e){if(1&t&&(v.Wb(0,"li",60),v.Rc(1),v.mc(2,"translate"),v.Vb()),2&t){const t=e.$implicit;v.Ab(1),v.Tc(" \u2022 ",v.nc(2,1,t.name)," ")}}function wi(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div"),v.Wb(1,"button",61),v.ic("click",(function(e){v.Gc(t),v.lc(2);const n=v.Dc(80);return v.lc().openKnpDictionary(n,e)})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"p",62),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Wb(7,"p",63),v.Rc(8),v.mc(9,"translate"),v.Vb(),v.Vb()}2&t&&(v.Ab(2),v.Tc(" ",v.nc(3,3,"PAYMENTS.DICTIONARY.TITLE")," "),v.Ab(3),v.Sc(v.nc(6,5,"PAYMENTS.DICTIONARY.FREQUENT_KNP")),v.Ab(3),v.Sc(v.nc(9,7,"PAYMENTS.DICTIONARY.KNP_DESCRIPTION")))}function Yi(t,e){1&t&&v.Pc(0,wi,10,9,"div",1),2&t&&v.sc("ngIf",!e.searchTerm)}function Li(t,e){if(1&t&&(v.Wb(0,"div",64),v.Wb(1,"div",65),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function Ui(t,e){if(1&t&&(v.Wb(0,"div",37),v.Rb(1,"span",66),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function Fi(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function $i(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function Bi(t,e){1&t&&(v.Wb(0,"div"),v.Wb(1,"small",50),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.NOTIFY.DESCRIPTION")))}function Gi(t,e){if(1&t){const t=v.Xb();v.Wb(0,"div",67),v.Wb(1,"j-form-field"),v.Wb(2,"j-label"),v.Rc(3),v.mc(4,"translate"),v.Vb(),v.Wb(5,"input",68,69),v.ic("focus",(function(e){return v.Gc(t),v.lc(2).onEmailOnSuccessFocus(e)})),v.Vb(),v.Rb(7,"j-error",14),v.Vb(),v.Wb(8,"small",50),v.Rc(9),v.mc(10,"translate"),v.Vb(),v.Vb()}if(2&t){const t=v.lc(2);v.Ab(3),v.Sc(v.nc(4,6,"PAYMENTS.NOTIFY.EMAIL")),v.Ab(2),v.sc("ngbTypeahead",t.search)("formControl",t.form.controls.emailOnSuccess),v.Ab(2),v.sc("control",t.form.controls.emailOnSuccess)("errorMessages",t.errors.email),v.Ab(2),v.Sc(v.nc(10,8,"PAYMENTS.NOTIFY.EMAIL"))}}function Ki(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",70),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",71),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function Hi(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",72),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Qi(t,e){1&t&&v.Rb(0,"j-kbe-info")}function qi(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"div",3),v.Wb(2,"form",4,5),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(4,"div",6),v.Wb(5,"fieldset"),v.Wb(6,"div",7),v.Wb(7,"h2",8),v.Rc(8),v.mc(9,"translate"),v.Vb(),v.Wb(10,"button",9),v.ic("click",(function(e){return v.Gc(t),v.lc().openSavedPayments()})),v.Rc(11),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",10),v.Wb(14,"j-form-field"),v.Wb(15,"j-label"),v.Rc(16),v.mc(17,"translate"),v.Vb(),v.Rb(18,"input",11),v.Pc(19,Mi,3,3,"button",12),v.mc(20,"async"),v.mc(21,"async"),v.Wb(22,"div",13),v.mc(23,"async"),v.Pc(24,xi,4,1,"span",1),v.mc(25,"async"),v.Pc(26,Di,4,1,"span",1),v.mc(27,"async"),v.Vb(),v.Rb(28,"j-error",14),v.Vb(),v.Wb(29,"ul",15),v.Pc(30,_i,3,3,"li",16),v.Vb(),v.Vb(),v.Wb(31,"div",10),v.Wb(32,"j-form-field",17),v.Wb(33,"j-label"),v.Rc(34),v.mc(35,"translate"),v.Vb(),v.Rb(36,"input",18),v.Vb(),v.Vb(),v.Wb(37,"div",10),v.Wb(38,"j-form-field",17),v.Rb(39,"j-entity-logo",19),v.mc(40,"bankFromAccount"),v.Wb(41,"j-label"),v.Rc(42),v.mc(43,"translate"),v.Vb(),v.Rb(44,"input",20,21),v.Rb(46,"j-error",14),v.Vb(),v.Vb(),v.Wb(47,"div",10),v.Wb(48,"j-form-field",17),v.Wb(49,"j-label"),v.Rc(50),v.mc(51,"translate"),v.Vb(),v.Rb(52,"input",22),v.Rb(53,"a",23),v.Rb(54,"j-error",14),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(55,"div",6),v.Wb(56,"fieldset"),v.Wb(57,"legend",24),v.Rc(58),v.mc(59,"translate"),v.Vb(),v.Wb(60,"div",10),v.Wb(61,"j-form-field"),v.Wb(62,"j-label"),v.Rc(63),v.mc(64,"translate"),v.Vb(),v.Rb(65,"input",25),v.Vb(),v.Vb(),v.Wb(66,"div",10),v.Rb(67,"j-date-picker",26,27),v.mc(69,"async"),v.mc(70,"translate"),v.mc(71,"translate"),v.mc(72,"async"),v.Vb(),v.Wb(73,"div",10),v.Wb(74,"j-form-field",null,28),v.Wb(76,"j-label"),v.Rc(77),v.mc(78,"translate"),v.Vb(),v.Wb(79,"j-select",29,30),v.mc(81,"async"),v.Pc(82,Yi,1,1,"ng-template",31),v.Vb(),v.Vb(),v.Vb(),v.Wb(83,"div",32),v.Wb(84,"span",33),v.Rc(85),v.mc(86,"async"),v.Vb(),v.Wb(87,"j-form-field"),v.Wb(88,"j-label"),v.Rc(89),v.mc(90,"translate"),v.Vb(),v.Rb(91,"textarea",34,35),v.Rb(93,"j-error",14),v.Pc(94,Li,3,1,"div",36),v.mc(95,"async"),v.Vb(),v.Wb(96,"div",37),v.Rc(97),v.mc(98,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(99,"div",6),v.Wb(100,"fieldset"),v.Wb(101,"div",10),v.Wb(102,"j-account-dropdown",38,39),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(104,"async"),v.mc(105,"async"),v.Vb(),v.Vb(),v.Wb(106,"div",10),v.Wb(107,"div",10),v.Wb(108,"j-form-field",40),v.Wb(109,"j-label"),v.Rc(110),v.mc(111,"translate"),v.Vb(),v.Rb(112,"input",41),v.Vb(),v.Pc(113,Ui,3,3,"div",42),v.mc(114,"async"),v.Wb(115,"div",43),v.Pc(116,Fi,3,3,"ng-container",44),v.mc(117,"async"),v.Pc(118,$i,4,8,"ng-template",null,45,v.Qc),v.Vb(),v.Vb(),v.Vb(),v.Wb(120,"div",10),v.Wb(121,"ul",46),v.Wb(122,"li",47),v.Rb(123,"j-switch",48),v.Wb(124,"span",49),v.Rc(125),v.mc(126,"translate"),v.Rb(127,"br"),v.Wb(128,"small",50),v.Rc(129),v.mc(130,"translate"),v.mc(131,"amountFormat"),v.mc(132,"async"),v.Vb(),v.Vb(),v.Vb(),v.Wb(133,"li",47),v.Rb(134,"j-switch",48),v.Wb(135,"span",49),v.Rc(136),v.mc(137,"translate"),v.Rb(138,"br"),v.Wb(139,"small",50),v.Rc(140),v.mc(141,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Wb(142,"li",47),v.Rb(143,"j-switch",48),v.Wb(144,"div",51),v.Wb(145,"strong"),v.Rc(146),v.mc(147,"translate"),v.Vb(),v.Rb(148,"br"),v.Pc(149,Bi,4,3,"div",1),v.Pc(150,Gi,11,10,"div",52),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(151,"div",53),v.Wb(152,"div",53),v.Pc(153,Ki,7,6,"ng-container",1),v.Pc(154,Hi,4,3,"ng-container",1),v.Vb(),v.Vb(),v.Rb(155,"ngx-spinner",54),v.Vb(),v.Vb(),v.Pc(156,Qi,1,0,"ng-template",null,55,v.Qc),v.Tb()}if(2&t){const t=v.Dc(68),e=v.Dc(75),n=v.Dc(80),s=v.Dc(119),i=v.Dc(157),o=v.lc();v.Ab(2),v.sc("formGroup",o.form),v.Ab(6),v.Tc(" ",v.nc(9,90,"PAYMENTS.RECIPIENT.TITLE")," "),v.Ab(3),v.Tc(" ",v.nc(12,92,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),v.Ab(5),v.Sc(v.nc(17,94,"PAYMENTS.FORM.IIN")),v.Ab(2),v.sc("dropSpecialCharacters",!0)("jShadow",o.masks.iinOrBin.shadow)("mask",o.masks.iinOrBin.mask)("formControl",o.form.controls.iinOrBin),v.Ab(1),v.sc("ngIf",o.form.controls.iinOrBin.valid&&o.iinIsNotOwn&&!v.nc(20,96,o.iinIsSubmitted$)&&!v.nc(21,98,o.iinIsFound$)),v.Ab(3),v.sc("jLoading",v.nc(23,100,o.isCounterPartyLoading$))("jLoadingInverted",!0),v.Ab(2),v.sc("ngIf",v.nc(25,102,o.counterParty$)===o.counterPartyStatus.SUCCESS),v.Ab(2),v.sc("ngIf",v.nc(27,104,o.counterParty$)===o.counterPartyStatus.ERROR),v.Ab(2),v.sc("control",o.form.controls.iinOrBin)("errorMessages",o.errors.iinOrBin),v.Ab(2),v.sc("ngForOf",o.riskGroups),v.Ab(4),v.Sc(v.nc(35,106,"PAYMENTS.FORM.NAME")),v.Ab(2),v.sc("formControl",o.form.controls.name),v.Ab(3),v.sc("name",v.nc(40,108,"KZ"+o.form.controls.bankAccount.value)),v.Ab(3),v.Sc(v.nc(43,110,"PAYMENTS.FORM.IBAN")),v.Ab(2),v.sc("jShadow",o.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",o.masks.bankAccount.mask)("formControl",o.form.controls.bankAccount),v.Ab(2),v.sc("control",o.form.controls.bankAccount)("errorMessages",o.errors.bankAccount),v.Ab(4),v.Sc(v.nc(51,112,"PAYMENTS.FORM.KBE")),v.Ab(2),v.sc("mask",o.masks.kbeCode.mask)("jShadow",o.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",o.form.controls.kbeCode),v.Ab(1),v.sc("ngbTooltip",i)("inlineSVG","/assets/icons/payments/question.svg"),v.Ab(1),v.sc("control",o.form.controls.kbeCode)("errorMessages",o.errors.kbeCode),v.Ab(4),v.Sc(v.nc(59,114,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(64,116,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",o.masks.number.mask)("formControl",o.form.controls.number),v.Ab(2),v.sc("datesEnabled",v.nc(69,118,o.workingDays$))("formControl",o.form.controls.date)("formatValue",!0)("jFocusOnReturn",t)("label",v.nc(70,120,"PAYMENTS.FORM.VALUE_DATE"))("minDate",o.dateLimit.minDate)("maxDate",o.dateLimit.maxDate)("helperText",v.nc(71,122,v.nc(72,124,o.dateMessage$))),v.Ab(10),v.Sc(v.nc(78,126,"PAYMENTS.FORM.KNP_REGULAR")),v.Ab(2),v.sc("jFocusOnReturn",n)("appendTo",e.elementRef.nativeElement)("formControl",o.form.controls.knp)("clearable",!1)("searchMask",o.masks.knp.mask)("shadow",o.masks.knp.shadow)("compareWith",o.knpComparator)("items",v.nc(81,128,o.knp$)),v.Ab(6),v.Uc(" ",v.nc(86,130,o.purposeLength$),"/",o.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(90,132,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",o.form.controls.purpose),v.Ab(2),v.sc("control",o.form.controls.purpose)("errorMessages",o.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(95,134,o.purposeMessage$)),v.Ab(3),v.Tc(" ",v.nc(98,136,"PAYMENTS.FORM.PURPOSE_HELPER")," "),v.Ab(5),v.sc("isLoading",v.nc(104,138,o.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",o.form.controls.senderAccount.touched&&o.form.controls.senderAccount.errors)("accounts",v.nc(105,140,o.acceptableAccounts$)),v.Ab(6),v.sc("floatLabel","always"),v.Ab(2),v.Sc(v.nc(111,142,"PAYMENTS.FORM.AMOUNT")),v.Ab(2),v.sc("dropSpecialCharacters",!0)("formControl",o.form.controls.amount),v.Ab(1),v.sc("ngIf",v.nc(114,144,o.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(117,146,o.commission$))("ngIfElse",s),v.Ab(7),v.sc("formControl",o.form.controls.vat),v.Ab(2),v.Tc(" ",v.nc(126,148,"PAYMENTS.VAT.TITLE"),""),v.Ab(4),v.Uc("",v.nc(130,150,"PAYMENTS.VAT.DESCRIPTION")," = ",v.nc(131,152,v.nc(132,154,o.vat$))," \u20b8"),v.Ab(5),v.sc("formControl",o.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(137,156,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(141,158,"PAYMENTS.URGENT_HELPER")),v.Ab(3),v.sc("formControl",o.form.controls.notify),v.Ab(3),v.Sc(v.nc(147,160,"PAYMENTS.NOTIFY.TITLE")),v.Ab(3),v.sc("ngIf",!o.form.controls.notify.value),v.Ab(1),v.sc("ngIf",o.form.controls.notify.value),v.Ab(3),v.sc("ngIf",o.restoredData.status!==o.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",o.restoredData.status===o.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",o.SPINNER)("fullScreen",!1)}}var Xi=function(t){return t.SUCCESS="SUCCESS",t.ERROR="ERROR",t}({});let zi=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p,h){super(d.createPaymentInTengeForm(),o,s,i,t,e,n,u,c,m,r,a,l),this.companyService=t,this.paymentsService=e,this.maskService=n,this.route=s,this.router=i,this.api=o,this.dictionaries=c,this.translateService=r,this.authorityPermissionsService=a,this.featureFlagsService=l,this.accountsService=b,this.modalService=u,this.pipelines=m,this.paymentsFormsFactory=d,this.recipientsService=p,this.userService=h,this.isCounterPartyLoading$=new V.a(null),this.masks={iinOrBin:"iin",bankAccount:"tengeAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount"},this.riskGroups=[],this.counterPartyStatus=Xi,this.counterParty$=new V.a(null),this.focusEmail$=new k.a,this.prevEmails$=new V.a([]),this.fetchingEmailsFor$=new V.a(null),this.iinIsSubmitted$=new V.a(null),this.iinIsFound$=new V.a(null),this.paymentType=B.j.REGULAR_PAYMENT_ORDER,this.user=this.userService.user}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.knp$=this.combineKNP([t=>this.dictionaries.selectByPaymentType(t,{type:B.j.REGULAR_PAYMENT_ORDER,sortFavourite:!0})]),this.listenWorkingDays(),this.getMaskConfig(),this.createControlsStream(this.form),this.listenVAT(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenEmailSearch();const{bankAccount:t,senderAccount:e}=this.controlsStream;this.subs.add(Object(I.a)([t.pipe(Object(U.a)(t=>this.form.controls.bankAccount.valid),Object(D.a)("")),e.pipe(Object(U.a)(t=>this.form.controls.senderAccount.valid),Object(y.a)(t=>t.iban),Object(D.a)(""))]).pipe(Object(y.a)(([t,e])=>this.paymentsService.checkPaymentTypeFromIban(e,"KZ"+t))).subscribe(t=>this.paymentType=t)),this.applyCounterAgentVerification()}openSavedPayments(){this.modalService.open(rt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(({recipient:t,account:e})=>{this.form.patchValue({bankAccount:e.iban,iinOrBin:t.iinOrBin,name:t.name,kbeCode:t.kbe.code}),this.form.markAsDirty()}).catch(()=>{})}onEmailOnSuccessFocus(t){this.focusEmail$.next(t.target.value)}openKnpDictionary(t,e){t.close(),t.blur(),setTimeout(()=>{const t=this.modals.open(ut,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});t.componentInstance.paymentType=B.j.REGULAR_PAYMENT_ORDER,t.result.then(t=>{this.form.controls.knp.patchValue(t.code)}).catch(()=>{})},0)}applyCounterAgentVerification(){const{iinOrBin:t}=this.form.controls;this.subs.add(this.controlsStream.iinOrBin.pipe(Object(M.a)(),Object(x.a)(300),Object(Y.a)(e=>(this.counterParty$.next(null),this.iinIsFound$.next(null),this.iinIsSubmitted$.next(null),t.valid&&(this.iinIsNotOwn=this.user.iin!==e,this.isCounterPartyLoading$.next(e)),this.isCounterPartyLoading$.next(null),Object(O.a)(null)))).subscribe(t=>{t&&this.checkCounterParty(t),this.isCounterPartyLoading$.next(null)}))}checkCounterParty(t){var e,n,s;(null===(e=t.companyInfo)||void 0===e?void 0:e.name)&&this.form.controls.name.setValue(null===(n=t.companyInfo)||void 0===n?void 0:n.name),t.riskGroups&&(this.riskGroups=t.riskGroups),this.counterParty$.next(0===(null===(s=t.riskGroups)||void 0===s?void 0:s.length)?this.counterPartyStatus.SUCCESS:this.counterPartyStatus.ERROR)}listenEmailSearch(){const{emailOnSuccess:t}=this.form.controls;this.subs.add(this.controlsStream.notify.pipe(Object(x.a)(100)).subscribe(e=>e?t.enable():t.disable())),this.subs.add(this.controlsStream.iinOrBin.pipe(Object(x.a)(200),Object(U.a)(t=>this.form.controls.iinOrBin.valid),Object(Y.a)(t=>(this.fetchingEmailsFor$.next(t),this.prevEmails$.next([]),this.recipientsService.getPrevNotifications(t).catch(t=>[])))).subscribe(t=>{this.prevEmails$.next(t),this.fetchingEmailsFor$.next(null)})),this.search=t=>Object(I.a)([this.prevEmails$.pipe(Object(y.a)(t=>t.map(t=>t.email))),t.pipe(Object(x.a)(200),Object(M.a)(),Object(D.a)("")),this.focusEmail$]).pipe(Object(y.a)(([t,e,n])=>e?t.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,3):t.slice(0,3)))}checkIin(){return Object(P.a)(this,void 0,void 0,(function*(){this.riskGroups=[],this.iinIsSubmitted$.next(!0);const t=this.form.controls.iinOrBin.value;this.isCounterPartyLoading$.next(t),this.recipientsService.checkCounterParty(t).then(t=>Object(P.a)(this,void 0,void 0,(function*(){t&&this.checkCounterParty(t),yield this.successfulCounterPartyResult()}))).catch(t=>{console.error(t),this.iinIsSubmitted$.next(null),this.iinIsFound$.next(null),this.isCounterPartyLoading$.next(null),this.showSignError()})}))}showSignError(){return Object(P.a)(this,void 0,void 0,(function*(){return this.modalService.open(Re,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result}))}successfulCounterPartyResult(){return Object(P.a)(this,void 0,void 0,(function*(){this.iinIsSubmitted$.next(null),this.iinIsFound$.next(!0),this.isCounterPartyLoading$.next(null)}))}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(q.a),v.Qb(T.c),v.Qb(Oe.a),v.Qb(p.a),v.Qb(p.c),v.Qb(ei.a),v.Qb(at.a),v.Qb(r.e),v.Qb(We.c),v.Qb(z.b),v.Qb(l.c),v.Qb(c.q),v.Qb(ti.a),v.Qb(ni.a),v.Qb(X.a),v.Qb(Oi.h))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-payment-order"]],viewQuery:function(t,e){var n;1&t&&v.Mc(Wi,!0),2&t&&v.Cc(n=v.jc())&&(e.emailOnSuccess=n.first)},features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"dropSpecialCharacters","jShadow","mask","formControl"],["jSuffix","","type","button","class","btn btn-xs btn-link",3,"click",4,"ngIf"],["jSuffix","",1,"counterParty","p3",3,"jLoading","jLoadingInverted"],[3,"control","errorMessages"],[1,"navbar-nav","mt-2"],["class","p3 risk-li text-muted",4,"ngFor","ngForOf"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],["jPrefix","","hideEmpty","true",3,"name"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","label","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items"],["select",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","suffix"," \u20b8","placeholder","0,00","mask","separator.2","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["kbeInfo",""],["jSuffix","","type","button",1,"btn","btn-xs","btn-link",3,"click"],["translate","",1,"text-muted","mr-2"],[1,"text-success",3,"inlineSVG"],[1,"text-danger",3,"inlineSVG"],[1,"p3","risk-li","text-muted"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[3,"innerHTML"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(t,e){1&t&&(v.Pc(0,ji,1,2,"j-restricted-placeholder",0),v.Pc(1,qi,158,162,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Pt.a,et.a,i.c,Vt.a,Qe.a,o.a,i.t,i.i,kt.a,He.a,Ot.a,s.t,nt.a,tt.a,Gs.a,Fs.a,Fe.a,c.E,It.a,$e.a,Le.a,Ue.b,we.a,Be.a,Ge.a,Ye.a,Ke.a,r.a,qe.a,c.G,Xe.a],pipes:[r.d,s.b,st.a,ii.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.counterParty[_ngcontent-%COMP%]{position:relative;min-width:40px;height:100%}li.risk-li[_ngcontent-%COMP%] + li.risk-li[_ngcontent-%COMP%]{margin-top:.5rem}"]}),t})();var Zi=n("LXWx");function Ji(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function to(t,e){if(1&t&&(v.Wb(0,"div",36),v.Wb(1,"div",37),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function eo(t,e){if(1&t&&(v.Wb(0,"div",38),v.Rb(1,"span",39),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function no(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function so(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function io(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",40),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",41),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function oo(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",42),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function co(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"form",3,4),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(3,"div",5),v.Wb(4,"fieldset"),v.Wb(5,"legend",6),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",7),v.Wb(9,"j-form-field"),v.Wb(10,"j-label"),v.Rc(11),v.mc(12,"translate"),v.Vb(),v.Rb(13,"input",8),v.Vb(),v.Vb(),v.Wb(14,"div",7),v.Wb(15,"j-form-field",null,9),v.Wb(17,"j-label"),v.Rc(18),v.mc(19,"translate"),v.Vb(),v.Rb(20,"j-select",10,11),v.mc(22,"async"),v.Vb(),v.Vb(),v.Wb(23,"div",12),v.Wb(24,"span",13),v.Rc(25),v.mc(26,"async"),v.Vb(),v.Wb(27,"j-form-field"),v.Wb(28,"j-label"),v.Rc(29),v.mc(30,"translate"),v.Vb(),v.Rb(31,"textarea",14,15),v.Rb(33,"j-error",16),v.Pc(34,to,3,1,"div",17),v.mc(35,"async"),v.Vb(),v.Vb(),v.Wb(36,"div",7),v.Wb(37,"j-account-dropdown",18,19),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(39,"async"),v.mc(40,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(41,"div",5),v.Wb(42,"fieldset"),v.Wb(43,"j-employee-group-control",20),v.Rb(44,"j-error",16),v.Vb(),v.Vb(),v.Vb(),v.Wb(45,"div",21),v.Wb(46,"div",7),v.Wb(47,"fieldset"),v.Wb(48,"ul",22),v.Wb(49,"li",23),v.Wb(50,"h5",24),v.Rc(51),v.mc(52,"translate"),v.Wb(53,"span",25),v.Wb(54,"strong"),v.Rc(55),v.mc(56,"amountFormat"),v.mc(57,"async"),v.Vb(),v.Rc(58," \u20b8"),v.Vb(),v.Vb(),v.Pc(59,eo,3,3,"div",26),v.mc(60,"async"),v.Wb(61,"p",27),v.Pc(62,no,3,3,"ng-container",28),v.mc(63,"async"),v.Pc(64,so,4,8,"ng-template",null,29,v.Qc),v.Vb(),v.Vb(),v.Wb(66,"li",30),v.Rb(67,"j-switch",31),v.Wb(68,"span",32),v.Rc(69),v.mc(70,"translate"),v.Rb(71,"br"),v.Wb(72,"small",33),v.Rc(73),v.mc(74,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(75,"div",34),v.Wb(76,"div",34),v.Pc(77,io,7,6,"ng-container",1),v.Pc(78,oo,4,3,"ng-container",1),v.Vb(),v.Vb(),v.Rb(79,"ngx-spinner",35),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(16),e=v.Dc(21),n=v.Dc(65),s=v.lc();v.Ab(1),v.sc("formGroup",s.form),v.Ab(5),v.Sc(v.nc(7,43,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(12,45,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),v.Ab(5),v.Sc(v.nc(19,47,"PAYMENTS.FORM.KNP")),v.Ab(2),v.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",v.nc(22,49,s.knp$)),v.Ab(5),v.Uc(" ",v.nc(26,51,s.purposeLength$),"/",s.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(30,53,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",s.form.controls.purpose),v.Ab(2),v.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(35,55,s.purposeMessage$)),v.Ab(3),v.sc("isLoading",v.nc(39,57,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",v.nc(40,59,s.acceptableAccounts$)),v.Ab(6),v.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),v.Ab(1),v.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),v.Ab(7),v.Tc("",v.nc(52,61,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),v.Ab(4),v.Sc(v.nc(56,63,v.nc(57,65,s.total$))),v.Ab(4),v.sc("ngIf",v.nc(60,67,s.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(63,69,s.commission$))("ngIfElse",n),v.Ab(5),v.sc("formControl",s.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(70,71,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(74,73,"PAYMENTS.URGENT_HELPER")),v.Ab(4),v.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",s.SPINNER)("fullScreen",!1)}}let ro=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p){super(d.createPensionForm(),l,t,e,s,n,o,r,a,b,u,m,p),this.route=t,this.router=e,this.paymentsService=n,this.companyService=s,this.dateAdapter=i,this.maskService=o,this.accountsService=c,this.modalService=r,this.dictionaries=a,this.api=l,this.pipeline=b,this.translateService=u,this.authorityPermissionsService=m,this.paymentsFormsFactory=d,this.featureFlagsService=p,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.employees$=new V.a([]),this.amount$=new V.a(0),this.subs=new Et.a,this.paymentType=B.j.PENSION}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(p.a),v.Qb(p.c),v.Qb(ye.g),v.Qb(q.a),v.Qb(c.c),v.Qb(Oe.a),v.Qb(l.c),v.Qb(c.q),v.Qb(Oi.a),v.Qb(ye.c),v.Qb(ye.f),v.Qb(r.e),v.Qb(We.c),v.Qb(ye.e),v.Qb(z.b))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-pension-payment"]],features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(t,e){1&t&&(v.Pc(0,Ji,1,2,"j-restricted-placeholder",0),v.Pc(1,co,80,75,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Pt.a,et.a,i.c,Vt.a,o.a,i.t,i.i,Le.a,Ot.a,we.a,Zi.a,Ye.a,Ke.a,qe.a],pipes:[r.d,s.b,ii.a],styles:[""],encapsulation:2}),t})();function ao(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function lo(t,e){if(1&t&&(v.Wb(0,"div",36),v.Wb(1,"div",37),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function bo(t,e){if(1&t&&(v.Wb(0,"div",38),v.Rb(1,"span",39),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function uo(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function mo(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function po(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",40),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",41),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function ho(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",42),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function fo(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"form",3,4),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(3,"div",5),v.Wb(4,"fieldset"),v.Wb(5,"legend",6),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",7),v.Wb(9,"j-form-field"),v.Wb(10,"j-label"),v.Rc(11),v.mc(12,"translate"),v.Vb(),v.Rb(13,"input",8),v.Vb(),v.Vb(),v.Wb(14,"div",7),v.Wb(15,"j-form-field",null,9),v.Wb(17,"j-label"),v.Rc(18),v.mc(19,"translate"),v.Vb(),v.Rb(20,"j-select",10,11),v.mc(22,"async"),v.Vb(),v.Vb(),v.Wb(23,"div",12),v.Wb(24,"span",13),v.Rc(25),v.mc(26,"async"),v.Vb(),v.Wb(27,"j-form-field"),v.Wb(28,"j-label"),v.Rc(29),v.mc(30,"translate"),v.Vb(),v.Rb(31,"textarea",14,15),v.Rb(33,"j-error",16),v.Pc(34,lo,3,1,"div",17),v.mc(35,"async"),v.Vb(),v.Vb(),v.Wb(36,"div",7),v.Wb(37,"j-account-dropdown",18,19),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(39,"async"),v.mc(40,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(41,"div",5),v.Wb(42,"fieldset"),v.Wb(43,"j-employee-group-control",20),v.Rb(44,"j-error",16),v.Vb(),v.Vb(),v.Vb(),v.Wb(45,"div",21),v.Wb(46,"div",7),v.Wb(47,"fieldset"),v.Wb(48,"ul",22),v.Wb(49,"li",23),v.Wb(50,"h5",24),v.Rc(51),v.mc(52,"translate"),v.Wb(53,"span",25),v.Wb(54,"strong"),v.Rc(55),v.mc(56,"amountFormat"),v.mc(57,"async"),v.Vb(),v.Rc(58," \u20b8"),v.Vb(),v.Vb(),v.Pc(59,bo,3,3,"div",26),v.mc(60,"async"),v.Wb(61,"p",27),v.Pc(62,uo,3,3,"ng-container",28),v.mc(63,"async"),v.Pc(64,mo,4,8,"ng-template",null,29,v.Qc),v.Vb(),v.Vb(),v.Wb(66,"li",30),v.Rb(67,"j-switch",31),v.Wb(68,"span",32),v.Rc(69),v.mc(70,"translate"),v.Rb(71,"br"),v.Wb(72,"small",33),v.Rc(73),v.mc(74,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(75,"div",34),v.Wb(76,"div",34),v.Pc(77,po,7,6,"ng-container",1),v.Pc(78,ho,4,3,"ng-container",1),v.Vb(),v.Vb(),v.Rb(79,"ngx-spinner",35),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(16),e=v.Dc(21),n=v.Dc(65),s=v.lc();v.Ab(1),v.sc("formGroup",s.form),v.Ab(5),v.Sc(v.nc(7,43,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(12,45,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),v.Ab(5),v.Sc(v.nc(19,47,"PAYMENTS.FORM.KNP")),v.Ab(2),v.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",v.nc(22,49,s.knp$)),v.Ab(5),v.Uc(" ",v.nc(26,51,s.purposeLength$),"/",s.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(30,53,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",s.form.controls.purpose),v.Ab(2),v.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(35,55,s.purposeMessage$)),v.Ab(3),v.sc("isLoading",v.nc(39,57,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",v.nc(40,59,s.acceptableAccounts$)),v.Ab(6),v.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),v.Ab(1),v.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),v.Ab(7),v.Tc("",v.nc(52,61,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),v.Ab(4),v.Sc(v.nc(56,63,v.nc(57,65,s.total$))),v.Ab(4),v.sc("ngIf",v.nc(60,67,s.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(63,69,s.commission$))("ngIfElse",n),v.Ab(5),v.sc("formControl",s.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(70,71,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(74,73,"PAYMENTS.URGENT_HELPER")),v.Ab(4),v.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",s.SPINNER)("fullScreen",!1)}}let go=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p){super(m.createSocialForm(),a,s,i,e,t,o,r,l,b,u,p,d),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.route=s,this.router=i,this.maskService=o,this.accountsService=c,this.modalService=r,this.api=a,this.dictionaries=l,this.pipeline=b,this.translateService=u,this.paymentsFormsFactory=m,this.featureFlagsService=d,this.authorityPermissionsService=p,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.paymentType=B.j.SOCIAL}ngOnInit(){super.ngOnInit(),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP()}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(q.a),v.Qb(c.c),v.Qb(p.a),v.Qb(p.c),v.Qb(Oe.a),v.Qb(l.c),v.Qb(c.q),v.Qb(ei.a),v.Qb(at.a),v.Qb(ti.a),v.Qb(r.e),v.Qb(ni.a),v.Qb(z.b),v.Qb(We.c))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-social-payment"]],features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(t,e){1&t&&(v.Pc(0,ao,1,2,"j-restricted-placeholder",0),v.Pc(1,fo,80,75,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Pt.a,et.a,i.c,Vt.a,o.a,i.t,i.i,Le.a,Ot.a,we.a,Zi.a,Ye.a,Ke.a,qe.a],pipes:[r.d,s.b,ii.a],styles:[""]}),t})();function Ro(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function Ao(t,e){if(1&t&&(v.Wb(0,"div",36),v.Wb(1,"div",37),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",v.nc(3,1,t)," ")}}function yo(t,e){if(1&t&&(v.Wb(0,"div",38),v.Rb(1,"span",39),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function vo(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Co(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function To(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",40),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",41),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function So(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",42),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Eo(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"form",3,4),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(3,"div",5),v.Wb(4,"fieldset"),v.Wb(5,"legend",6),v.Rc(6),v.mc(7,"translate"),v.Vb(),v.Wb(8,"div",7),v.Wb(9,"j-form-field"),v.Wb(10,"j-label"),v.Rc(11),v.mc(12,"translate"),v.Vb(),v.Rb(13,"input",8),v.Vb(),v.Vb(),v.Wb(14,"div",7),v.Wb(15,"j-form-field",null,9),v.Wb(17,"j-label"),v.Rc(18),v.mc(19,"translate"),v.Vb(),v.Rb(20,"j-select",10,11),v.mc(22,"async"),v.Vb(),v.Vb(),v.Wb(23,"div",12),v.Wb(24,"span",13),v.Rc(25),v.mc(26,"async"),v.Vb(),v.Wb(27,"j-form-field"),v.Wb(28,"j-label"),v.Rc(29),v.mc(30,"translate"),v.Vb(),v.Rb(31,"textarea",14,15),v.Rb(33,"j-error",16),v.Pc(34,Ao,4,3,"div",17),v.mc(35,"async"),v.Vb(),v.Vb(),v.Wb(36,"div",7),v.Wb(37,"j-account-dropdown",18,19),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(39,"async"),v.mc(40,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(41,"div",5),v.Wb(42,"fieldset"),v.Wb(43,"j-employee-group-control",20),v.Rb(44,"j-error",16),v.Vb(),v.Vb(),v.Vb(),v.Wb(45,"div",21),v.Wb(46,"div",7),v.Wb(47,"fieldset"),v.Wb(48,"ul",22),v.Wb(49,"li",23),v.Wb(50,"h5",24),v.Rc(51),v.mc(52,"translate"),v.Wb(53,"span",25),v.Wb(54,"strong"),v.Rc(55),v.mc(56,"amountFormat"),v.mc(57,"async"),v.Vb(),v.Rc(58," \u20b8"),v.Vb(),v.Vb(),v.Pc(59,yo,3,3,"div",26),v.mc(60,"async"),v.Wb(61,"p",27),v.Pc(62,vo,3,3,"ng-container",28),v.mc(63,"async"),v.Pc(64,Co,4,8,"ng-template",null,29,v.Qc),v.Vb(),v.Vb(),v.Wb(66,"li",30),v.Rb(67,"j-switch",31),v.Wb(68,"span",32),v.Rc(69),v.mc(70,"translate"),v.Rb(71,"br"),v.Wb(72,"small",33),v.Rc(73),v.mc(74,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(75,"div",34),v.Pc(76,To,7,6,"ng-container",1),v.Pc(77,So,4,3,"ng-container",1),v.Vb(),v.Rb(78,"ngx-spinner",35),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(16),e=v.Dc(21),n=v.Dc(65),s=v.lc();v.Ab(1),v.sc("formGroup",s.form),v.Ab(5),v.Sc(v.nc(7,43,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(12,45,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",s.masks.number.mask)("formControl",s.form.controls.number),v.Ab(5),v.Sc(v.nc(19,47,"PAYMENTS.FORM.KNP")),v.Ab(2),v.sc("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("items",v.nc(22,49,s.knp$)),v.Ab(5),v.Uc(" ",v.nc(26,51,s.purposeLength$),"/",s.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(30,53,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",s.form.controls.purpose),v.Ab(2),v.sc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(35,55,s.purposeMessage$)),v.Ab(3),v.sc("isLoading",v.nc(39,57,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",v.nc(40,59,s.acceptableAccounts$)),v.Ab(6),v.sc("formControl",s.form.controls.employees)("paymentType",s.paymentType)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),v.Ab(1),v.sc("control",s.form.controls.employees)("errorMessages",s.errors.employees),v.Ab(7),v.Tc("",v.nc(52,61,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),v.Ab(4),v.Sc(v.nc(56,63,v.nc(57,65,s.total$))),v.Ab(4),v.sc("ngIf",v.nc(60,67,s.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(63,69,s.commission$))("ngIfElse",n),v.Ab(5),v.sc("formControl",s.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(70,71,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(74,73,"PAYMENTS.URGENT_HELPER")),v.Ab(3),v.sc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",s.SPINNER)("fullScreen",!1)}}let No=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p){super(m.createMedicalForm(),l,t,e,s,n,o,r,a,b,u,d,p),this.route=t,this.router=e,this.paymentsService=n,this.companyService=s,this.dateAdapter=i,this.maskService=o,this.accountsService=c,this.modalService=r,this.dictionaries=a,this.api=l,this.pipeline=b,this.translateService=u,this.paymentsFormsFactory=m,this.authorityPermissionsService=d,this.featureFlagsService=p,this.masks={number:"paymentNum",amount:"amount",knp:"knp"},this.paymentType=B.j.MEDICAL}ngOnInit(){super.ngOnInit(),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(p.a),v.Qb(p.c),v.Qb(T.c),v.Qb(q.a),v.Qb(c.c),v.Qb(Oe.a),v.Qb(l.c),v.Qb(c.q),v.Qb(at.a),v.Qb(ei.a),v.Qb(ti.a),v.Qb(r.e),v.Qb(ni.a),v.Qb(We.c),v.Qb(z.b))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-medical-payment"]],features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(t,e){1&t&&(v.Pc(0,Ro,1,2,"j-restricted-placeholder",0),v.Pc(1,Eo,79,75,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Pt.a,et.a,i.c,Vt.a,o.a,i.t,i.i,Le.a,Ot.a,we.a,Zi.a,Ye.a,Ke.a,qe.a],pipes:[r.d,s.b,ii.a],styles:[""]}),t})();function Po(t,e){if(1&t){const t=v.Xb();v.Wb(0,"j-restricted-placeholder",2),v.ic("retried",(function(e){return v.Gc(t),v.lc().updatePermissions()})),v.Vb()}if(2&t){const t=v.lc();v.sc("isRetryable",t.isPermissionsUpdateAllowed)("isLoading",t.isPermissionsUpdating)}}function Vo(t,e){1&t&&(v.Wb(0,"j-label"),v.Rc(1),v.mc(2,"translate"),v.Vb()),2&t&&(v.Ab(1),v.Tc("",v.nc(2,1,"PAYMENTS.FORM.RECEIVER_BANK")," "))}function ko(t,e){if(1&t&&(v.Wb(0,"div",56),v.Wb(1,"div",57),v.Rb(2,"j-entity-logo",58),v.Vb(),v.Wb(3,"div",59),v.Wb(4,"p",60),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Wb(7,"p",61),v.Rc(8),v.Vb(),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(2),v.sc("name",t.bic),v.Ab(3),v.Tc(" ",t.salaryTransitIban?v.nc(6,4,"PAYMENTS.FORM.ACCOUNT")+t.salaryTransitIban:t.name," "),v.Ab(3),v.Uc("",t.bic,": ",t.name,"")}}function Io(t,e){if(1&t&&(v.Wb(0,"div",62),v.Wb(1,"div",57),v.Rb(2,"j-entity-logo",58),v.Vb(),v.Wb(3,"div",59),v.Wb(4,"p",60),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Wb(7,"p",61),v.Rc(8),v.Vb(),v.Vb(),v.Vb()),2&t){const t=e.item;v.Ab(2),v.sc("name",t.bic),v.Ab(3),v.Tc(" ",t.salaryTransitIban?v.nc(6,4,"PAYMENTS.FORM.ACCOUNT")+t.salaryTransitIban:t.name," "),v.Ab(3),v.Uc("",t.bic,": ",t.name," ")}}function Oo(t,e){if(1&t&&(v.Wb(0,"div",10),v.Wb(1,"j-form-field",63),v.Wb(2,"j-label"),v.Rc(3),v.mc(4,"translate"),v.Vb(),v.Rb(5,"input",64,65),v.Rb(7,"j-error",28),v.Vb(),v.Vb()),2&t){const t=v.lc(2);v.Ab(3),v.Sc(v.nc(4,7,"PAYMENTS.FORM.BANK_IBAN")),v.Ab(2),v.sc("jShadow",t.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",t.masks.bankAccount.mask)("formControl",t.form.controls.bankAccount),v.Ab(2),v.sc("control",t.form.controls.bankAccount)("errorMessages",t.errors.bankAccount)}}function Wo(t,e){if(1&t&&(v.Wb(0,"div",66),v.Rc(1),v.Vb()),2&t){const t=e.item;v.Ab(1),v.Sc(t.label)}}function jo(t,e){if(1&t&&(v.Wb(0,"div",67),v.Wb(1,"div",68),v.Rc(2),v.Vb(),v.Vb()),2&t){const t=e.ngIf;v.Ab(2),v.Tc(" ",t," ")}}function Mo(t,e){if(1&t&&(v.Wb(0,"div",69),v.Rb(1,"span",70),v.mc(2,"translate"),v.Vb()),2&t){const t=e.ngIf;v.Ab(1),v.sc("innerHTML",v.nc(2,1,t),v.Hc)}}function xo(t,e){1&t&&(v.Ub(0),v.Rc(1),v.mc(2,"translate"),v.Tb()),2&t&&(v.Ab(1),v.Tc(" ",v.nc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Do(t,e){if(1&t&&(v.Rc(0),v.mc(1,"translate"),v.mc(2,"amountFormat"),v.mc(3,"async")),2&t){const t=v.lc(2);v.Uc(" ",v.nc(1,2,"PAYMENTS.COMMISSION"),": ",v.nc(2,4,v.nc(3,6,t.commission$))," \u20b8 ")}}function _o(t,e){1&t&&(v.Rb(0,"p",71),v.mc(1,"translate")),2&t&&v.sc("innerHTML",v.nc(1,1,"PAYMENTS.FORM.RESIDENT_AGREEMENT"),v.Hc)}function wo(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"button",72),v.ic("click",(function(e){return v.Gc(t),v.lc(2).saveToDraft()})),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Wb(4,"button",73),v.Rc(5),v.mc(6,"translate"),v.Vb(),v.Tb()}if(2&t){const t=v.lc(2);v.Ab(2),v.Sc(v.nc(3,2,"PAYMENTS.FORM.SAVE")),v.Ab(3),v.Tc("",v.nc(6,4,t.submitLabel)," ")}}function Yo(t,e){1&t&&(v.Ub(0),v.Wb(1,"button",74),v.Rc(2),v.mc(3,"translate"),v.Vb(),v.Tb()),2&t&&(v.Ab(2),v.Sc(v.nc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Lo(t,e){if(1&t){const t=v.Xb();v.Ub(0),v.Wb(1,"div",3),v.Wb(2,"form",4,5),v.ic("submit",(function(e){return v.Gc(t),v.lc().onSubmit(e)})),v.Wb(4,"div",6),v.Wb(5,"fieldset"),v.Wb(6,"div",7),v.Wb(7,"h2",8),v.Rc(8),v.mc(9,"translate"),v.Vb(),v.Wb(10,"button",9),v.ic("click",(function(e){return v.Gc(t),v.lc().openBanksDictionary()})),v.Rc(11),v.mc(12,"translate"),v.Vb(),v.Vb(),v.Wb(13,"div",10),v.Wb(14,"j-form-field",null,11),v.Pc(16,Vo,3,3,"j-label",1),v.Wb(17,"j-select",12,13),v.mc(19,"async"),v.Pc(20,ko,9,6,"ng-template",14),v.Pc(21,Io,9,6,"ng-template",15),v.Vb(),v.Vb(),v.Vb(),v.Pc(22,Oo,8,9,"div",16),v.Vb(),v.Vb(),v.Wb(23,"div",6),v.Wb(24,"fieldset"),v.Wb(25,"legend",17),v.Rc(26),v.mc(27,"translate"),v.Vb(),v.Wb(28,"div",10),v.Wb(29,"j-form-field"),v.Wb(30,"j-label"),v.Rc(31),v.mc(32,"translate"),v.Vb(),v.Rb(33,"input",18),v.Vb(),v.Vb(),v.Wb(34,"div",10),v.Rb(35,"j-date-picker",19,20),v.mc(37,"async"),v.mc(38,"translate"),v.mc(39,"translate"),v.mc(40,"async"),v.Vb(),v.Wb(41,"div",10),v.Wb(42,"j-form-field",null,21),v.Wb(44,"j-label"),v.Rc(45),v.mc(46,"translate"),v.Vb(),v.Wb(47,"j-select",22,23),v.mc(49,"async"),v.Pc(50,Wo,2,1,"ng-template",14),v.Vb(),v.Vb(),v.Vb(),v.Wb(51,"div",24),v.Wb(52,"span",25),v.Rc(53),v.mc(54,"async"),v.Vb(),v.Wb(55,"j-form-field"),v.Wb(56,"j-label"),v.Rc(57),v.mc(58,"translate"),v.Vb(),v.Rb(59,"textarea",26,27),v.Rb(61,"j-error",28),v.Pc(62,jo,3,1,"div",29),v.mc(63,"async"),v.Vb(),v.Vb(),v.Wb(64,"div",10),v.Wb(65,"j-account-dropdown",30,31),v.ic("selected",(function(e){return v.Gc(t),v.lc().onSenderAccountSelect(e)})),v.mc(67,"async"),v.mc(68,"async"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(69,"div",6),v.Wb(70,"fieldset"),v.Wb(71,"j-employee-group-control",32),v.Wb(72,"div",33),v.Wb(73,"div",34),v.Wb(74,"div",35),v.Rb(75,"input",36),v.Wb(76,"label",37),v.Rc(77),v.mc(78,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Wb(79,"div",34),v.Wb(80,"div",35),v.Rb(81,"input",38),v.Wb(82,"label",39),v.Rc(83),v.mc(84,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Rb(85,"j-error",28),v.Vb(),v.Vb(),v.Vb(),v.Wb(86,"div",40),v.Wb(87,"div",10),v.Wb(88,"fieldset"),v.Wb(89,"ul",41),v.Wb(90,"li",42),v.Wb(91,"h5",43),v.Rc(92),v.mc(93,"translate"),v.Wb(94,"span",44),v.Wb(95,"strong"),v.Rc(96),v.mc(97,"amountFormat"),v.mc(98,"async"),v.Vb(),v.Rc(99," \u20b8"),v.Vb(),v.Vb(),v.Pc(100,Mo,3,3,"div",45),v.mc(101,"async"),v.Wb(102,"p",46),v.Pc(103,xo,3,3,"ng-container",47),v.mc(104,"async"),v.Pc(105,Do,4,8,"ng-template",null,48,v.Qc),v.Vb(),v.Vb(),v.Wb(107,"li",49),v.Rb(108,"j-switch",50),v.Wb(109,"span",51),v.Rc(110),v.mc(111,"translate"),v.Rb(112,"br"),v.Wb(113,"small",52),v.Rc(114),v.mc(115,"translate"),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Vb(),v.Wb(116,"div",53),v.Pc(117,_o,2,3,"p",54),v.mc(118,"async"),v.Wb(119,"div",53),v.Pc(120,wo,7,6,"ng-container",1),v.Pc(121,Yo,4,3,"ng-container",1),v.Vb(),v.Vb(),v.Rb(122,"ngx-spinner",55),v.Vb(),v.Vb(),v.Tb()}if(2&t){const t=v.Dc(15),e=v.Dc(18),n=v.Dc(36),s=v.Dc(43),i=v.Dc(48),o=v.Dc(106),c=v.lc();v.Ab(2),v.sc("formGroup",c.form),v.Ab(6),v.Tc(" ",v.nc(9,66,"PAYMENTS.RECIPIENT.TITLE")," "),v.Ab(3),v.Tc(" ",v.nc(12,68,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),v.Ab(5),v.sc("ngIf",!c.form.controls.bankReceiver.value),v.Ab(1),v.sc("searchFn",c.paymentsService.bankReceiverSearchFn)("jFocusOnReturn",e)("appendTo",t.elementRef.nativeElement)("formControl",c.form.controls.bankReceiver)("clearable",!1)("items",v.nc(19,70,c.banks.items$)),v.Ab(5),v.sc("ngIf",c.form.controls.bankAccount.enabled),v.Ab(4),v.Sc(v.nc(27,72,"PAYMENTS.FORM.DETAILS")),v.Ab(5),v.Sc(v.nc(32,74,"PAYMENTS.FORM.DOCUMENT_NUMBER")),v.Ab(2),v.sc("mask",c.masks.number.mask)("formControl",c.form.controls.number),v.Ab(2),v.sc("jFocusOnReturn",n)("datesEnabled",v.nc(37,76,c.workingDays$))("formControl",c.form.controls.date)("formatValue",!0)("label",v.nc(38,78,"PAYMENTS.FORM.VALUE_DATE"))("minDate",c.dateLimit.minDate)("maxDate",c.dateLimit.maxDate)("helperText",v.nc(39,80,v.nc(40,82,c.dateMessage$))),v.Ab(10),v.Sc(v.nc(46,84,"PAYMENTS.FORM.KNP")),v.Ab(2),v.sc("jFocusOnReturn",i)("appendTo",s.elementRef.nativeElement)("formControl",c.form.controls.knp)("clearable",!1)("searchMask",c.masks.knp.mask)("shadow",c.masks.knp.shadow)("items",v.nc(49,86,c.knp$)),v.Ab(6),v.Uc(" ",v.nc(54,88,c.purposeLength$),"/",c.rules.purposeLength,""),v.Ab(4),v.Sc(v.nc(58,90,"PAYMENTS.FORM.PURPOSE")),v.Ab(2),v.sc("formControl",c.form.controls.purpose),v.Ab(2),v.sc("control",c.form.controls.purpose)("errorMessages",c.errors.purpose),v.Ab(1),v.sc("ngIf",v.nc(63,92,c.purposeMessage$)),v.Ab(3),v.sc("isLoading",v.nc(67,94,c.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",c.form.controls.senderAccount.touched&&c.form.controls.senderAccount.errors)("accounts",v.nc(68,96,c.acceptableAccounts$)),v.Ab(6),v.sc("formControl",c.form.controls.employees)("paymentType",c.paymentType)("maxAmount",c.employeeMaxAmount)("birthDateRequired",!1)("ibanRequired",!0),v.Ab(4),v.sc("value",!0),v.Ab(2),v.Tc(" ",v.nc(78,98,"PAYMENTS.FORM.EMPLOYEE_RESIDENTS")," "),v.Ab(4),v.sc("value",!1),v.Ab(2),v.Tc(" ",v.nc(84,100,"PAYMENTS.FORM.EMPLOYEE_NON-RESIDENTS")," "),v.Ab(2),v.sc("control",c.form.controls.employees)("errorMessages",c.errors.employees),v.Ab(7),v.Tc("",v.nc(93,102,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),v.Ab(4),v.Sc(v.nc(97,104,v.nc(98,106,c.total$))),v.Ab(4),v.sc("ngIf",v.nc(101,108,c.amountMessage$)),v.Ab(3),v.sc("ngIf",null===v.nc(104,110,c.commission$))("ngIfElse",o),v.Ab(5),v.sc("formControl",c.form.controls.urgent),v.Ab(2),v.Tc("",v.nc(111,112,"PAYMENTS.FORM.URGENT")," "),v.Ab(4),v.Sc(v.nc(115,114,"PAYMENTS.URGENT_HELPER")),v.Ab(3),v.sc("ngIf",v.nc(118,116,c.controlsStream.isResidents)),v.Ab(3),v.sc("ngIf",c.restoredData.status!==c.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("ngIf",c.restoredData.status===c.PAYMENT_STATUS.CREATED),v.Ab(1),v.sc("name",c.SPINNER)("fullScreen",!1)}}let Uo=(()=>{class t extends Ie{constructor(t,e,n,s,i,o,c,r,a,l,b,u,m,d,p){super(m.createSalaryForm(),a,s,i,e,t,o,r,l,b,u,d,p),this.paymentsService=t,this.companyService=e,this.dateAdapter=n,this.route=s,this.router=i,this.maskService=o,this.accountsService=c,this.modalService=r,this.api=a,this.dictionaries=l,this.pipeline=b,this.translateService=u,this.paymentsFormsFactory=m,this.authorityPermissionsService=d,this.featureFlagsService=p,this.masks={number:"paymentNum",amount:"amount",knp:"knp",bankAccount:"tengeAccount"},this.employeeMaxAmount=null,this.paymentType=B.j.SALARY}ngOnInit(){super.ngOnInit(),this.banks=this.dictionaries.bankDictionary,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)(t=>this.checkPersonalAccounts(t))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP(),this.subs.add(this.controlsStream.bankReceiver.pipe(Object(_.a)(this.banks.entities$),Object(y.a)(([t,e])=>t&&e[t]),Object(M.a)()).subscribe(t=>{const{bankAccount:e}=this.form.controls;!t||t.salaryTransitIban&&e.enabled?(e.disable(),e.patchValue("")):t&&!t.salaryTransitIban&&e.disabled?e.enable():t&&e.updateValueAndValidity()}))}openBanksDictionary(){this.modals.open(Rt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then(t=>t&&this.form.controls.bankReceiver.patchValue(t.id)).catch(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(v.Qb(T.c),v.Qb(q.a),v.Qb(c.c),v.Qb(p.a),v.Qb(p.c),v.Qb(Oe.a),v.Qb(l.c),v.Qb(c.q),v.Qb(ei.a),v.Qb(at.a),v.Qb(ti.a),v.Qb(r.e),v.Qb(ni.a),v.Qb(We.c),v.Qb(z.b))},t.\u0275cmp=v.Kb({type:t,selectors:[["j-salary-payment"]],features:[v.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["receiverWrapper",""],["bindValue","id",3,"searchFn","jFocusOnReturn","appendTo","formControl","clearable","items"],["receiverSelect",""],["j-label-tmp",""],["j-option-tmp",""],["class","form-group",4,"ngIf"],[1,"h2"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"jFocusOnReturn","datesEnabled","formControl","formatValue","label","minDate","maxDate","helperText"],["datepicker",""],["knpWrapper",""],["bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","maxAmount","birthDateRequired","ibanRequired"],["ngProjectAs","[header]",5,["","header",""],1,"row"],[1,"form-group","col"],[1,"custom-control","custom-radio"],["type","radio","id","residents","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","residents",1,"custom-control-label","text-muted","p3"],["type","radio","id","nonResident","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","nonResident",1,"custom-control-label","text-muted","p3"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["class","p3 text-gray text-right",3,"innerHTML",4,"ngIf"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[1,"account-pill","pl-0","pr-0"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"account-pill","account-pill_gray","account-pill_fill"],["clearable","true"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],[1,"text-truncate"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],[1,"p3","text-gray","text-right",3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(t,e){1&t&&(v.Pc(0,Po,1,2,"j-restricted-placeholder",0),v.Pc(1,Lo,123,118,"ng-container",1)),2&t&&(v.sc("ngIf",e.isRestricted),v.Ab(1),v.sc("ngIf",!e.isRestricted))},directives:[s.u,De.a,i.J,i.u,_e.b,Vt.b,i.l,Z.a,Le.a,Vt.a,i.t,i.i,Ue.d,Ue.j,Pt.a,et.a,i.c,o.a,$e.a,Ot.a,we.a,Zi.a,i.B,i.j,Ye.a,Ke.a,nt.a,Gs.a,Fs.a,Fe.a,Qe.a,qe.a],pipes:[r.d,s.b,ii.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),t})();const Fo=[{path:h.c.root,component:Ls,children:[{path:"",canActivate:[R.a]},{path:h.b.root,component:Ii,data:{animation:"slideOrFade",index:2},children:[{path:h.b.tax,matcher:Object(f.factoryUserPageMatcher)(h.b.tax,"paymentId"),component:Vi,canDeactivate:[g.a],data:{animation:"slideOrFade",index:21}},{path:h.b.pension,matcher:Object(f.factoryUserPageMatcher)(h.b.pension,"paymentId"),component:ro,canDeactivate:[g.a],data:{animation:"slideOrFade",index:22}},{path:h.b.social,matcher:Object(f.factoryUserPageMatcher)(h.b.social,"paymentId"),component:go,canDeactivate:[g.a],data:{animation:"slideOrFade",index:23}},{path:h.b.osms,matcher:Object(f.factoryUserPageMatcher)(h.b.osms,"paymentId"),component:No,canDeactivate:[g.a],data:{animation:"slideOrFade",index:24}},{path:"**",redirectTo:h.b.tax}]},{path:h.c.order,matcher:Object(f.factoryUserPageMatcher)(h.c.order,"paymentId"),component:zi,canDeactivate:[g.a],data:{animation:"slideOrFade",index:1}},{path:h.c.salary,matcher:Object(f.factoryUserPageMatcher)(h.c.salary,"paymentId"),component:Uo,canDeactivate:[g.a],data:{animation:"slideOrFade",index:3}},{path:":paymentId",canActivate:[R.a]},{path:"**",redirectTo:h.c.order}]},{path:h.a.foreignCurrency,canDeactivate:[g.a],matcher:Object(f.factoryUserPageMatcher)(h.a.foreignCurrency,"paymentId"),component:js},{path:"**",redirectTo:h.c.root}];let $o=(()=>{class t{}return t.\u0275mod=v.Ob({type:t}),t.\u0275inj=v.Nb({factory:function(e){return new(e||t)},imports:[[p.g.forChild(Fo)],p.g]}),t})();var Bo=n("pZP7"),Go=n("UZjs"),Ko=n("JvPu"),Ho=n("wwEr"),Qo=n("3v+J"),qo=n("Y+uv"),Xo=n("/zfT"),zo=n("xWtO"),Zo=n("i2Gl"),Jo=n("Frqi"),tc=n("paXB"),ec=n("EiG8"),nc=n("c66K"),sc=n("VA2L"),ic=n("0AMz"),oc=n("W3Es"),cc=n("R4CF"),rc=n("9txL"),ac=n("5I09"),lc=n("Tile"),bc=n("aF9I"),uc=n("aZ8m"),mc=n("UhoJ"),dc=n("sCra"),pc=n("fGuG"),hc=n("7/bn"),fc=n("2FF4"),gc=n("bSvt"),Rc=n("jH+I"),Ac=n("kUBv"),yc=n("9Udv"),vc=n("0jn5"),Cc=n("gdaf"),Tc=n("LFY/"),Sc=n("I+WJ"),Ec=n("lABO"),Nc=n("hJI6"),Pc=n("JB36"),Vc=n("4zJ+"),kc=n("XpgD"),Ic=n("MfWJ"),Oc=n("B8HE"),Wc=n("5DAB"),jc=n("DHTX"),Mc=n("6goL"),xc=n("NpBu"),Dc=n("TaxS"),_c=n("tkTF"),wc=n("yy4r"),Yc=n("ZVDf"),Lc=n("l/gM"),Uc=n("gN/K"),Fc=n("+hcb"),$c=n("h7tf"),Bc=n("9odQ"),Gc=n("WqMH"),Kc=n("3MRA"),Hc=n("Zgqj"),Qc=n("oMXN"),qc=n("rqas"),Xc=n("dnqU"),zc=n("tp+K"),Zc=n("saU0"),Jc=n("ZF3e"),tr=n("iNf4"),er=n("qew9"),nr=n("d/d6"),sr=n("Dvla"),ir=n("K1R0"),or=n("dlKe"),cr=n("DPnb"),rr=n("C6g9"),ar=n("3M96"),lr=n("Q+Qo"),br=n("i/as"),ur=n("8Sq6"),mr=n("w657"),dr=n("DHcY"),pr=n("adOO"),hr=n("Ub7F"),fr=n("OHc7"),gr=n("Bs9s"),Rr=n("ScFe"),Ar=n("wY9W"),yr=n("7Fmj"),vr=n("g1SY"),Cr=n("3skF");n.d(e,"PaymentsModule",(function(){return Tr}));let Tr=(()=>{class t{}return t.\u0275mod=v.Ob({type:t}),t.\u0275inj=v.Nb({factory:function(e){return new(e||t)},providers:[d.a],imports:[[s.c,i.n,i.D,o.c,c.g,c.D,c.H,c.y,a.b,r.c,l.b,u.a,m.a,$o,b.ContractsModule],c.r,c.D]}),t})();v.Jc(ht.a,[js,Os,Ls,Vi,Ii,zi,ro,go,No,Uo,ut,pt,ht.a,Rt,vt,Ct.a,Re,rt,Ft,Tt,St,ee,be,ge,ce,ue.b,de,Ae.a,s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,i.J,i.y,i.I,i.c,i.z,i.C,i.a,i.F,i.G,i.B,i.t,i.u,i.E,i.p,i.o,i.A,i.b,i.d,i.w,i.x,i.v,i.i,i.l,i.j,i.m,i.f,o.a,c.d,c.e,c.p,c.h,c.C,c.G,c.o,c.u,c.v,c.w,c.x,c.z,c.A,c.B,a.a,r.a,we.a,Bo.a,Go.a,Ko.a,Ho.a,Qo.a,qo.a,Xo.a,zo.a,Vt.b,Be.a,Gs.a,Ge.a,$s.a,Bs.a,Fe.a,Vt.a,Qe.a,_e.b,_e.a,Fs.a,Ks.a,Xs.a,Js.a,Hs.a,Qs.a,qs.a,zs.a,Zs.a,Zo.b,J.a,Jo.a,He.a,tc.a,$e.a,ec.a,Z.a,nc.a,Pt.a,tt.a,kt.a,qe.a,Ot.a,et.a,sc.a,ic.a,oc.a,cc.a,rc.a,Zi.a,ac.a,S.a,E.a,N.a,lc.a,bc.a,uc.a,mc.a,dc.a,pc.a,hc.a,Ye.a,nt.a,$t.a,fc.a,gc.a,Rc.a,Wt.a,Ac.a,yc.a,vc.a,Bt.a,Kt.a,Gt.a,Xe.a,Cc.a,Tc.a,Sc.a,Ec.a,Nc.a,Pc.a,Vc.a,kc.a,Ic.a,Oc.a,Wc.a,jc.a,Mc.a,De.a,xc.a,Dc.a,_c.a,wc.a,si.a,Yc.a,Lc.a,ne.a,Uc.a,Fc.a,$c.a,Bc.b,Gc.a,Kc.a,Hc.a,Qc.a,qc.a,Xc.a,zc.a,Zc.a,Jc.a,tr.a,Ke.a,er.a,nr.a,It.a,c.E,sr.a,sr.b,ir.a,or.a,cr.a,cr.c,cr.b,rr.a,ar.a,Le.a,lr.a,Ue.i,Ue.j,Ue.d,Ue.g,Ue.b,Ue.a,Ue.h,Ue.l,Ue.f,Ue.k,Ue.e,p.h,p.d,p.f,p.e,p.i,br.a,ur.a,mr.a],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m,o.b,r.d,dr.a,pr.a,st.a,hr.a,fr.a,ii.a,ie.a,gr.a,Rr.a,se.a,ze.a,Ar.a,yr.a,vr.a,Cr.a])}}]);