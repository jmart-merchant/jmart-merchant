{"version":3,"file":"src_app_directory_directory_module_ts.js","mappings":"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","sources":["./src/app/directory/components/counterparty-row/counterparty-row.component.ts","./src/app/directory/components/directory-edit-employee/directory-edit-employee.component.ts","./src/app/directory/components/directory-employee-row/directory-employee-row.component.ts","./src/app/directory/components/directory-tabs/directory-tabs.component.ts","./src/app/directory/components/edit-counterparty/edit-counterparty.component.ts","./src/app/directory/components/index.ts","./src/app/directory/containers/counterparties/counterparties.component.ts","./src/app/directory/containers/directory-employees/directory-employees.component.ts","./src/app/directory/containers/index.ts","./src/app/directory/directory-routing.module.ts","./src/app/directory/directory.component.ts","./src/app/directory/directory.module.ts","./src/app/directory/models/counterparty.models.ts","./src/app/payments/services/can-deactivate-payment.guard.ts","./src/app/payments/services/index.ts","./src/app/payments/services/payment-type-switch.guard.ts","./src/app/portal/portal-host/portal-host.component.ts","./src/app/portal/portal.module.ts","./src/app/portal/portal.service.ts","./src/app/portal/portalled-tpl.directive.ts"],"sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport {\r\n  Recipient,\r\n  RecipientAccount,\r\n} from '@company/recipient/recipient.model';\r\nimport { DirectoryRow } from '@directory/models/counterparty.models';\r\n\r\n@Component({\r\n  selector: 'j-counterparty-row',\r\n  templateUrl: './counterparty-row.component.html',\r\n  styleUrls: ['./counterparty-row.component.scss'],\r\n  host: {\r\n    class: 'j-table--row',\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CounterpartyRowComponent implements OnInit {\r\n  @Input() item: Recipient;\r\n  @Input() row: DirectoryRow<Recipient>;\r\n  @Input() removing: string | number;\r\n  @Output() remove = new EventEmitter();\r\n  @Output() cancelRemove = new EventEmitter();\r\n  @Output() edit = new EventEmitter();\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n  onEdit() {\r\n    this.edit.emit(this.row);\r\n  }\r\n  onRemove() {\r\n    this.remove.emit(this.row);\r\n  }\r\n  onCancelRemove() {\r\n    this.cancelRemove.emit(this.row);\r\n  }\r\n}\r\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, NgForm, Validators } from '@angular/forms';\r\n\r\nimport { BehaviorSubject, EMPTY, from, of, Subscription } from 'rxjs';\r\nimport {\r\n  catchError,\r\n  debounceTime,\r\n  filter,\r\n  map,\r\n  switchMap,\r\n  takeUntil,\r\n} from 'rxjs/operators';\r\n\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PaymentsService } from '@payments/services';\r\nimport { CURRENCY } from '@shared/currency/currency.model';\r\nimport { Employee, EmployeeService } from '@shared/employee';\r\nimport {\r\n  ErrorStateMatcher,\r\n  ShowOnDirtyErrorStateMatcher,\r\n} from '@shared/form-field/utils';\r\nimport { MaskedConfig } from '@shared/masked/masked';\r\nimport { MaskedService } from '@shared/masked/masked.service';\r\nimport { errors, MiscValidators } from '@shared/validators';\r\nimport {\r\n  isoDateToPeriodInputSafe,\r\n  periodInputDateToISODateSafe,\r\n} from '@utils/dates';\r\nimport { getGroupRawValue, ibanPrefix, safeUnmaskAmount } from '@utils/misc';\r\nimport { FormBuilderTypeSafe } from '@utils/typed-reactive-form-helper';\r\n\r\nexport enum EDIT_ACTION_TYPE {\r\n  create = 'create',\r\n  delete = 'delete',\r\n  update = 'update',\r\n}\r\nexport type EDIT_ACTION<T> = {\r\n  type: EDIT_ACTION_TYPE;\r\n  payload?: T;\r\n};\r\n\r\n@Component({\r\n  selector: 'j-directory-edit-employee',\r\n  templateUrl: './directory-edit-employee.component.html',\r\n  styleUrls: ['./directory-edit-employee.component.scss'],\r\n  providers: [\r\n    {\r\n      provide: ErrorStateMatcher,\r\n      useClass: ShowOnDirtyErrorStateMatcher,\r\n    },\r\n  ],\r\n})\r\nexport class DirectoryEditEmployeeComponent implements OnInit {\r\n  @Input() item: Employee;\r\n  @ViewChild('formDirective', { static: true }) form: NgForm;\r\n  autocomplete$ = new BehaviorSubject<string>(undefined);\r\n  updateInProgress$ = new BehaviorSubject<boolean>(undefined);\r\n  fGroup;\r\n  errorText: string;\r\n  masks: Record<string, MaskedConfig> = {};\r\n  errors = errors;\r\n\r\n  minDate = new Date(1900, 0, 0);\r\n  maxDate = new Date();\r\n\r\n  minAmount = 0.01;\r\n  maxAmount = 212500;\r\n\r\n  socialSumErr = [\r\n    {\r\n      error: 'max',\r\n      message: `${this.translate.instant('ERRORS.MAX_SUM')} ${this.maxAmount}`,\r\n    },\r\n  ];\r\n\r\n  private lockChildFields = ['iin', 'firstName', 'lastName', 'birthDate'];\r\n\r\n  private subs = new Subscription();\r\n\r\n  constructor(\r\n    public modal: NgbActiveModal,\r\n    private employeesService: EmployeeService,\r\n    private maskService: MaskedService,\r\n    private fb: FormBuilderTypeSafe,\r\n    private paymentsService: PaymentsService,\r\n    private translate: TranslateService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getMaskConfig();\r\n    this.fGroup = this.createForm(this.item);\r\n\r\n    if (this.item?.salarySum?.amount) {\r\n      this.fGroup.patchValue({ salarySum: this.maskService.formatAmount(this.item.salarySum.amount) });\r\n    }\r\n    if (this.item?.pensionSum?.amount) {\r\n      this.fGroup.patchValue({ pensionSum: this.maskService.formatAmount(this.item.pensionSum.amount) });\r\n    }\r\n    if (this.item?.socialSum?.amount) {\r\n      this.fGroup.patchValue({ socialSum: this.maskService.formatAmount(this.item.socialSum.amount) });\r\n    }\r\n    if (this.item?.ocmcSum?.amount) {\r\n      this.fGroup.patchValue({ ocmcSum: this.maskService.formatAmount(this.item.ocmcSum.amount) });\r\n    }\r\n\r\n    if (!this.editMode) {\r\n      const { iin: iinControl } = this.fGroup.controls;\r\n      this.subs.add(\r\n        iinControl.valueChanges\r\n          .pipe(\r\n            filter((iin) => iinControl.valid),\r\n            debounceTime(200),\r\n            switchMap((iin: string) => {\r\n              if (iinControl.valid) {\r\n                this.autocomplete$.next(iin);\r\n                return from(this.employeesService.getNameByIin(iin)).pipe(\r\n                  map((employee) => {\r\n                    return {\r\n                      bin: iin,\r\n                      lastName: employee.lastName,\r\n                      firstName: employee.firstName,\r\n                      middleName: employee.middleName\r\n                    };\r\n                  }),\r\n                  takeUntil(iinControl.valueChanges),\r\n                  catchError(() => of(null))\r\n                );\r\n              } else {\r\n                this.autocomplete$.next(null);\r\n                return EMPTY;\r\n              }\r\n            })\r\n          )\r\n          .subscribe((result) => {\r\n            if (result) {\r\n              if (this.autocomplete$.getValue() === result.bin) {\r\n                this.fGroup.patchValue({ lastName: result.lastName.trim() });\r\n                this.fGroup.patchValue({ firstName: result.firstName.trim() });\r\n                this.fGroup.patchValue({ middleName: result.middleName.trim() });\r\n              }\r\n            }\r\n            this.autocomplete$.next(null);\r\n          })\r\n      );\r\n    }\r\n  }\r\n\r\n  get isSubmitted() {\r\n    return this.form.submitted;\r\n  }\r\n\r\n  get editMode() {\r\n    return this.item?.id;\r\n  }\r\n\r\n  private createForm(item: Partial<Employee> = {}) {\r\n    const maxValidator = MiscValidators.SafeMaxAmount(this.maxAmount);\r\n    const minValidator = MiscValidators.SafeMinAmount(this.minAmount);\r\n    return this.fb.group({\r\n      iin: [\r\n        {\r\n          value: item.iin || '',\r\n          disabled: this.editMode,\r\n        },\r\n        [Validators.required, Validators.minLength(12)],\r\n      ],\r\n      lastName: [item.lastName || ''],\r\n      firstName: [item.firstName || ''],\r\n      middleName: [item.middleName || ''],\r\n      birthDate: [\r\n        (item.birthDate && isoDateToPeriodInputSafe(item.birthDate)) || '',\r\n        [Validators.required],\r\n      ],\r\n      iban: [\r\n        item.iban || '',\r\n        [\r\n          (control: AbstractControl) =>\r\n            this.paymentsService.bankExist(\r\n              ibanPrefix(control.value || '', CURRENCY.KZT)\r\n            ),\r\n        ],\r\n      ],\r\n      ocmcSum: [item.ocmcSum?.amount, [minValidator, maxValidator]],\r\n      pensionSum: [item.pensionSum?.amount, [minValidator, maxValidator]],\r\n      salarySum: [item.salarySum?.amount, [minValidator]],\r\n      socialSum: [item.socialSum?.amount, [minValidator, maxValidator]],\r\n    });\r\n  }\r\n\r\n  onCancel() {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n    this.modal.close();\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n\r\n    if (this.fGroup.invalid) {\r\n      this.emulateSubmit();\r\n      return;\r\n    }\r\n    const body = this.prepareBody();\r\n    this.processRequest(body);\r\n  }\r\n\r\n  onDelete() {\r\n    this.modal.close({\r\n      payload: this.item,\r\n      type: EDIT_ACTION_TYPE.delete,\r\n    });\r\n  }\r\n\r\n  private getMaskConfig() {\r\n    Object.entries({\r\n      iin: 'iin',\r\n      iban: 'tengeAccount',\r\n    }).forEach(\r\n      ([k, v]) => (this.masks[k] = this.maskService.getConfig(v as any))\r\n    );\r\n  }\r\n\r\n  private emulateSubmit() {\r\n    (this.form as any).submitted = true;\r\n    this.form.ngSubmit.emit();\r\n    this.fGroup.markAllAsTouched();\r\n  }\r\n\r\n  private prepareBody(): Employee {\r\n    const rawValue: Record<string, any> = getGroupRawValue(this.fGroup);\r\n    ['ocmcSum', 'pensionSum', 'salarySum', 'socialSum'].forEach((key) => {\r\n      const amount = safeUnmaskAmount(rawValue[key]);\r\n      if (amount) {\r\n        rawValue[key] = { amount, currency: CURRENCY.KZT };\r\n      } else {\r\n        rawValue[key] = null;\r\n      }\r\n    });\r\n    rawValue.lastName = rawValue.lastName.trim();\r\n    rawValue.firstName = rawValue.firstName.trim();\r\n    rawValue.middleName = rawValue.middleName.trim();\r\n    rawValue.birthDate = periodInputDateToISODateSafe(rawValue.birthDate);\r\n    rawValue.iban =\r\n      (rawValue.iban && ibanPrefix(rawValue.iban, CURRENCY.KZT)) || null;\r\n\r\n    return rawValue as Employee;\r\n  }\r\n\r\n  async processRequest(body) {\r\n    try {\r\n      this.updateInProgress$.next(true);\r\n      let result;\r\n      let type;\r\n      if (this.editMode) {\r\n        result = await this.employeesService.editEmployee(body);\r\n        type = EDIT_ACTION_TYPE.update;\r\n      } else {\r\n        result = await this.employeesService.createEmployee(body);\r\n        type = EDIT_ACTION_TYPE.create;\r\n      }\r\n      this.modal.close({\r\n        payload: result,\r\n        type,\r\n      });\r\n    } catch (e) {\r\n      this.updateInProgress$.next(false);\r\n      this.errorText = (e && e.description) || JSON.stringify(e);\r\n    }\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { DirectoryRow } from '@directory/models/counterparty.models';\r\nimport { Employee } from '@shared/employee';\r\n\r\n@Component({\r\n  selector: 'j-directory-employee-row',\r\n  templateUrl: './directory-employee-row.component.html',\r\n  styleUrls: ['./directory-employee-row.component.scss'],\r\n  host: {\r\n    class: 'j-table--row',\r\n  },\r\n})\r\nexport class DirectoryEmployeeRowComponent implements OnInit {\r\n  @Input() item: Employee;\r\n  @Input() row: DirectoryRow<Employee>;\r\n  @Input() removing: string | number;\r\n  @Output() remove = new EventEmitter();\r\n  @Output() cancelRemove = new EventEmitter();\r\n  @Output() edit = new EventEmitter();\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n  onEdit() {\r\n    this.edit.emit(this.row);\r\n  }\r\n  onRemove() {\r\n    this.remove.emit(this.row);\r\n  }\r\n  onCancelRemove() {\r\n    this.cancelRemove.emit(this.row);\r\n  }\r\n\r\n  get fio(): string {\r\n    const fio = [];\r\n    if (this.item.lastName) {\r\n      fio.push(this.item.lastName);\r\n    }\r\n    if (this.item.firstName) {\r\n      fio.push(this.item.firstName);\r\n    }\r\n    if (this.item.middleName) {\r\n      fio.push(this.item.middleName);\r\n    }\r\n    return fio.join(' ');\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'j-directory-tabs',\n  templateUrl: './directory-tabs.component.html',\n  styleUrls: ['./directory-tabs.component.scss']\n})\nexport class DirectoryTabsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport {\r\n  AbstractControl,\r\n  FormArray,\r\n  NgForm,\r\n  ValidatorFn,\r\n  Validators,\r\n} from '@angular/forms';\r\n\r\nimport { BehaviorSubject, EMPTY, of, Subscription } from 'rxjs';\r\nimport { debounceTime, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nimport {\r\n  Recipient,\r\n  RecipientAccount,\r\n  RecipientAccountBody,\r\n  RecipientBody,\r\n} from '@company/recipient/recipient.model';\r\nimport { RecipientsService } from '@company/recipients.service';\r\n\r\nimport { PaymentsService } from '@payments/services/payments.service';\r\n\r\nimport { CURRENCY } from '@shared/currency/currency.model';\r\nimport {\r\n  ErrorStateMatcher,\r\n  ShowOnDirtyErrorStateMatcher,\r\n} from '@shared/form-field/utils';\r\nimport { MaskedConfig } from '@shared/masked/masked';\r\nimport { MaskedService } from '@shared/masked/masked.service';\r\nimport { errors, MiscValidators } from '@shared/validators';\r\n\r\nimport {\r\n  FormBuilderTypeSafe,\r\n  getGroupRawValue,\r\n  ibanPrefix,\r\n} from '@utils/index';\r\n\r\nimport { BankFromAccountPipe } from '../../../shared/pipes/bank-from-account.pipe';\r\n\r\nexport enum EDIT_COUNTER_PARTY_ACTION_TYPE {\r\n  create = 'create',\r\n  delete = 'delete',\r\n  update = 'update',\r\n}\r\nexport type EDIT_COUNTER_PARTY_ACTION = {\r\n  type: EDIT_COUNTER_PARTY_ACTION_TYPE;\r\n  payload?: Recipient;\r\n};\r\n// ibanPrefix(formValue.bankAccount, CURRENCY.KZT)\r\n@Component({\r\n  selector: 'j-edit-counterparty',\r\n  templateUrl: './edit-counterparty.component.html',\r\n  styleUrls: ['./edit-counterparty.component.scss'],\r\n  providers: [\r\n    {\r\n      provide: ErrorStateMatcher,\r\n      useClass: ShowOnDirtyErrorStateMatcher,\r\n    },\r\n  ],\r\n})\r\nexport class EditCounterpartyComponent implements OnInit {\r\n  @Input() item: Recipient;\r\n  @ViewChild('formDirective') form: NgForm;\r\n  checkingCounterParty$ = new BehaviorSubject<string>(undefined);\r\n  updateInProgress$ = new BehaviorSubject<boolean>(undefined);\r\n  fGroup;\r\n  errorText: string;\r\n  masks: Record<string, MaskedConfig> = {};\r\n  errors = errors;\r\n\r\n  private subs = new Subscription();\r\n  constructor(\r\n    public modal: NgbActiveModal,\r\n    private recipients: RecipientsService,\r\n    private maskService: MaskedService,\r\n    private fb: FormBuilderTypeSafe,\r\n    private bankFromAccount: BankFromAccountPipe,\r\n    private paymentsService: PaymentsService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getMaskConfig();\r\n    this.fGroup = this.createForm(this.item);\r\n\r\n    if (!this.editMode) {\r\n      const { iinOrBin } = this.fGroup.controls;\r\n      this.subs.add(\r\n        iinOrBin.valueChanges\r\n          .pipe(\r\n            // filter((bin) => iinOrBin.valid),\r\n            debounceTime(200),\r\n            switchMap((bin: string) => {\r\n              if (iinOrBin.valid) {\r\n                this.checkingCounterParty$.next(bin);\r\n                return of(this.recipients.checkCounterParty(bin)).pipe(\r\n                  takeUntil(iinOrBin.valueChanges)\r\n                  // catchError(() => of(null))\r\n                );\r\n              } else {\r\n                this.checkingCounterParty$.next(null);\r\n                return EMPTY;\r\n              }\r\n            })\r\n          )\r\n          .subscribe((result) => {\r\n            if (result) {\r\n              if (this.checkingCounterParty$.getValue() === result.bin) {\r\n                this.fGroup.patchValue({ name: result.name });\r\n                this.checkingCounterParty$.next(null);\r\n              }\r\n            }\r\n            this.checkingCounterParty$.next(null);\r\n          })\r\n      );\r\n    }\r\n  }\r\n\r\n  get editMode() {\r\n    return this.item?.id;\r\n  }\r\n\r\n  createForm(item?: Recipient) {\r\n    return this.fb.group({\r\n      iinOrBin: [\r\n        {\r\n          value: item?.iinOrBin || '',\r\n          disabled: this.editMode,\r\n        },\r\n        [Validators.required, Validators.minLength(12)],\r\n      ],\r\n      kbeCode: [item?.kbe?.code, [Validators.required, MiscValidators.kbe]],\r\n      name: [\r\n        item?.name || '',\r\n        [Validators.required, Validators.maxLength(250)],\r\n      ],\r\n      accounts: this.fb.array(\r\n        (item?.accounts || ([{ iban: '' }] as any)).map((account) =>\r\n          this.getAccountControlConfig(account)\r\n        )\r\n      ),\r\n    });\r\n  }\r\n\r\n  addAccount() {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n    (this.fGroup.controls.accounts as FormArray).push(\r\n      this.fb.control('', this.getAccountControlConfig()[1])\r\n    );\r\n  }\r\n\r\n  deleteAccount(index: number) {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n    (this.fGroup.controls.accounts as FormArray).removeAt(index);\r\n  }\r\n\r\n  onCancel() {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n    this.modal.close();\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.updateInProgress$.getValue()) {\r\n      return;\r\n    }\r\n    if (this.fGroup.invalid) {\r\n      this.emulateSubmit();\r\n      return;\r\n    }\r\n    const body = this.prepareBody();\r\n    this.processRequest(body);\r\n  }\r\n\r\n  onDelete() {\r\n    this.modal.close({\r\n      payload: this.item,\r\n      type: EDIT_COUNTER_PARTY_ACTION_TYPE.delete,\r\n    });\r\n  }\r\n\r\n  private getAccountControlConfig(\r\n    account: Partial<RecipientAccount> = {}\r\n  ): [string, ValidatorFn[]] {\r\n    return [\r\n      account.iban,\r\n      [\r\n        Validators.required,\r\n        (control: AbstractControl) =>\r\n          this.paymentsService.bankExist(\r\n            ibanPrefix(control.value || '', CURRENCY.KZT)\r\n          ),\r\n      ],\r\n    ];\r\n  }\r\n\r\n  private getMaskConfig() {\r\n    Object.entries({\r\n      iinOrBin: 'iin',\r\n      bankAccount: 'tengeAccount',\r\n      kbeCode: 'kbe',\r\n    }).forEach(\r\n      ([k, v]) => (this.masks[k] = this.maskService.getConfig(v as any))\r\n    );\r\n  }\r\n\r\n  private emulateSubmit() {\r\n    (this.form as any).submitted = true;\r\n    this.form.ngSubmit.emit();\r\n    this.fGroup.markAllAsTouched();\r\n  }\r\n\r\n  private prepareBody(): RecipientBody {\r\n    let accDict = {};\r\n    const accounts: string[] = this.fGroup.controls.accounts.value;\r\n    let body: Record<string, any> = getGroupRawValue(this.fGroup);\r\n\r\n    body.kbe = {\r\n      code: body.kbeCode,\r\n      name: '',\r\n    };\r\n    delete body.kbeCode;\r\n    if (this.editMode) {\r\n      accDict = this.item.accounts.reduce((dict, account) => {\r\n        dict[account.iban] = account;\r\n        return dict;\r\n      }, {} as Record<string, RecipientAccount>);\r\n      body = Object.assign({ ...this.item }, body);\r\n    } else {\r\n    }\r\n    const pickedAccounts: RecipientAccountBody[] = accounts.map((rawIban) => {\r\n      const prefixedIban = ibanPrefix(rawIban, CURRENCY.KZT);\r\n      let picked: RecipientAccountBody = accDict[prefixedIban];\r\n      if (!picked) {\r\n        picked = {\r\n          bic: this.bankFromAccount.transform(prefixedIban),\r\n          iban: prefixedIban,\r\n        };\r\n      }\r\n      return picked;\r\n    });\r\n    body.accounts = pickedAccounts;\r\n    return body as any;\r\n  }\r\n\r\n  async processRequest(body) {\r\n    try {\r\n      this.updateInProgress$.next(true);\r\n      let result;\r\n      let type;\r\n      if (this.editMode) {\r\n        result = await this.recipients.updateRecipient(body);\r\n        type = EDIT_COUNTER_PARTY_ACTION_TYPE.update;\r\n      } else {\r\n        result = await this.recipients.createRecipient(body);\r\n        type = EDIT_COUNTER_PARTY_ACTION_TYPE.create;\r\n      }\r\n      this.modal.close({\r\n        payload: result,\r\n        type,\r\n      });\r\n    } catch (e) {\r\n      this.updateInProgress$.next(false);\r\n      this.errorText = (e && e.description) || JSON.stringify(e);\r\n    }\r\n  }\r\n}\r\n","import { DirectoryTabsComponent } from './directory-tabs/directory-tabs.component';\n\n\nimport { CounterpartyRowComponent } from './counterparty-row/counterparty-row.component';\nimport { EditCounterpartyComponent } from './edit-counterparty/edit-counterparty.component';\nimport { DirectoryEmployeeRowComponent } from './directory-employee-row/directory-employee-row.component';\nimport { DirectoryEditEmployeeComponent } from './directory-edit-employee/directory-edit-employee.component';\n\nexport const DIRECTORY_COMPONENTS = [DirectoryTabsComponent, CounterpartyRowComponent, EditCounterpartyComponent, DirectoryEmployeeRowComponent, DirectoryEditEmployeeComponent];\n\nexport { DirectoryTabsComponent } from './directory-tabs/directory-tabs.component';\nexport *  from './counterparty-row/counterparty-row.component';\nexport *  from './edit-counterparty/edit-counterparty.component';\nexport *  from './directory-employee-row/directory-employee-row.component';\nexport *  from './directory-edit-employee/directory-edit-employee.component';\n","import {\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\n\r\nimport {\r\n  BehaviorSubject,\r\n  combineLatest,\r\n  interval,\r\n  Subject,\r\n  Subscription,\r\n} from 'rxjs';\r\nimport {\r\n  delay,\r\n  distinctUntilChanged,\r\n  filter,\r\n  map,\r\n  skip,\r\n  startWith,\r\n  take,\r\n  takeUntil,\r\n  tap,\r\n} from 'rxjs/operators';\r\n\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NotifierService } from 'angular-notifier';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { CompanyService } from '@company/company.service';\r\nimport { RecipientsService } from '@company/recipients.service';\r\nimport { Recipient } from '@company/recipient/recipient.model';\r\n\r\nimport { DirectoryRow } from '@directory/models/counterparty.models';\r\n\r\nimport {\r\n  EditCounterpartyComponent,\r\n  EDIT_COUNTER_PARTY_ACTION,\r\n  EDIT_COUNTER_PARTY_ACTION_TYPE,\r\n} from '@directory/components/edit-counterparty/edit-counterparty.component';\r\n\r\n@Component({\r\n  selector: 'j-counterparties',\r\n  templateUrl: './counterparties.component.html',\r\n  styleUrls: ['./counterparties.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class CounterpartiesComponent implements OnInit, OnDestroy {\r\n  @ViewChild('contentBody') contentBody: TemplateRef<any>;\r\n  @ViewChild('emptyBody') emptyBody: TemplateRef<any>;\r\n  @ViewChild('errorBody') errorBody: TemplateRef<any>;\r\n  search = new FormControl('');\r\n  store: RecipientsService['store'];\r\n  rows$ = new BehaviorSubject<DirectoryRow<Recipient>[]>([]);\r\n  composedRows$ = new BehaviorSubject<DirectoryRow<Recipient>[]>([]);\r\n  contentTpl: TemplateRef<any>;\r\n  loadingErrors$ = new BehaviorSubject<any>(undefined);\r\n  selectionModel = new FormControl([]);\r\n  // recipients$ = new BehaviorSubject([]);\r\n  subs = new Subscription();\r\n\r\n  constructor(\r\n    private company: CompanyService,\r\n    private recipients: RecipientsService,\r\n    private modalService: NgbModal,\r\n    private notifierService: NotifierService,\r\n    private translateService: TranslateService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.store = this.recipients.store;\r\n    this.subs.add(\r\n      this.company.currentCompany$.pipe(delay(0), skip(1)).subscribe((v) => {\r\n        this.selectionModel.patchValue([]);\r\n        this.rows$.getValue().forEach((row) => {\r\n          row.cancelRemove$ && row.cancelRemove$.next(Date.now());\r\n        });\r\n      })\r\n    );\r\n\r\n    this.combineFilter();\r\n    this.watchForBodyTpl();\r\n    this.watchForItems();\r\n    this.onRefresh();\r\n  }\r\n\r\n  selectAll() {}\r\n\r\n  ngOnDestroy() {\r\n    this.subs.unsubscribe();\r\n  }\r\n\r\n  onEdit(row?: DirectoryRow<Recipient>) {\r\n    const modal = this.modalService.open(EditCounterpartyComponent, {\r\n      backdropClass: 'backdrop_light',\r\n      windowClass:\r\n        'modal_light modal-adaptive_sm modal_max-height modal-adaptive',\r\n      centered: true,\r\n      backdrop: 'static',\r\n    });\r\n    (modal.componentInstance as EditCounterpartyComponent).item = row?.data;\r\n    modal.result.then((result: EDIT_COUNTER_PARTY_ACTION) =>\r\n      this.handleEditResult(result, row)\r\n    );\r\n  }\r\n\r\n  onRemoveSelected() {\r\n    let lastSelected = this.selectionModel.value;\r\n    lastSelected = lastSelected[lastSelected.length - 1];\r\n    const lastRow = this.rows$\r\n      .getValue()\r\n      .find((row) => row.data.id === lastSelected);\r\n    if (lastRow) {\r\n      this.startDeleteProcess(lastRow, true);\r\n    }\r\n  }\r\n\r\n  onRemove(row: DirectoryRow<Recipient>, checkSelection?: boolean) {\r\n    this.startDeleteProcess(row, checkSelection);\r\n  }\r\n\r\n  onCancelRemove(row: DirectoryRow<Recipient>) {\r\n    row.cancelRemove$ && row.cancelRemove$.next(Date.now());\r\n  }\r\n\r\n  async onRefresh() {\r\n    try {\r\n      await this.recipients.getRecipients('', true);\r\n      // this.getEntities();\r\n      this.selectionModel.patchValue([]);\r\n      this.loadingErrors$.next(null);\r\n    } catch (err) {\r\n      this.rows$.next([]);\r\n      this.selectionModel.patchValue([]);\r\n      this.loadingErrors$.next(err);\r\n    }\r\n  }\r\n\r\n  private handleEditResult(\r\n    result: EDIT_COUNTER_PARTY_ACTION,\r\n    row: DirectoryRow<Recipient>\r\n  ) {\r\n    if (result) {\r\n      if (\r\n        [\r\n          EDIT_COUNTER_PARTY_ACTION_TYPE.create,\r\n          EDIT_COUNTER_PARTY_ACTION_TYPE.update,\r\n        ].some((action) => action === result.type)\r\n      ) {\r\n        this.notifierService.notify(\r\n          'success',\r\n          this.translateService.instant(\r\n            'COUNTERPARTY.' +\r\n              (EDIT_COUNTER_PARTY_ACTION_TYPE.create === result.type\r\n                ? 'CREATED_COUNTERPARTY'\r\n                : 'UPDATED_COUNTERPARTY')\r\n          )\r\n        );\r\n        this.store.upsertItem(result.payload);\r\n      } else {\r\n        this.startDeleteProcess(row);\r\n      }\r\n    }\r\n  }\r\n  private watchForItems() {\r\n    this.subs.add(\r\n      combineLatest([\r\n        this.store.items$,\r\n        this.store.fetching$,\r\n        this.store.fetched$,\r\n      ])\r\n        .pipe(\r\n          filter(([items, fetching, fetched]) => {\r\n            return !fetching && fetched;\r\n          }),\r\n          map((args) => args[0]),\r\n          distinctUntilChanged(),\r\n          tap((v) => this.selectionModel.patchValue([])),\r\n          map((recipients) => {\r\n            // this.recipients$.next(recipients);\r\n            return recipients.map((recipient) => new DirectoryRow(recipient));\r\n          })\r\n        )\r\n        .subscribe((rows) => {\r\n          this.rows$.next(rows);\r\n        })\r\n    );\r\n  }\r\n\r\n  private combineFilter() {\r\n    this.subs.add(\r\n      combineLatest([this.rows$, this.search.valueChanges.pipe(startWith(''))])\r\n        .pipe(\r\n          map(([rows, search]) => {\r\n            const filtered = rows.filter(\r\n              (row) =>\r\n                !row.hidden && this.recipients.filterRecipient(row.data, search)\r\n            );\r\n\r\n            return filtered;\r\n          })\r\n        )\r\n        .subscribe(this.composedRows$)\r\n    );\r\n  }\r\n\r\n  private watchForBodyTpl() {\r\n    this.subs.add(\r\n      combineLatest([\r\n        this.store.fetched$,\r\n        this.search.valueChanges.pipe(startWith('')),\r\n        this.loadingErrors$,\r\n        this.composedRows$,\r\n      ])\r\n        .pipe(\r\n          delay(0),\r\n          map(([loaded, search, err, rows]) => {\r\n            if (err) {\r\n              return this.errorBody;\r\n            } else if (loaded && !rows.length) {\r\n              return this.emptyBody;\r\n            }\r\n            return this.contentBody;\r\n          }),\r\n          distinctUntilChanged()\r\n        )\r\n        .subscribe((tpl) => (this.contentTpl = tpl))\r\n    );\r\n  }\r\n\r\n  private startDeleteProcess(\r\n    targetRow: DirectoryRow<Recipient>,\r\n    checkSelection?: boolean\r\n  ) {\r\n    let toRemove;\r\n    if (checkSelection) {\r\n      const dict = this.selectionModel.value.reduce((acc, id) => {\r\n        acc[id] = true;\r\n        return acc;\r\n      }, {} as Record<string, boolean>);\r\n      delete dict[targetRow.data.id];\r\n      toRemove = this.rows$.getValue().filter((row) => dict[row.data.id]);\r\n      targetRow.deleteWith = toRemove;\r\n      toRemove.forEach((item) => (item.hidden = true));\r\n    }\r\n\r\n    targetRow.cancelRemove$ = new Subject();\r\n    targetRow.removing$.next('5');\r\n\r\n    this.rows$.next([...this.rows$.getValue()]);\r\n\r\n    const sub = interval(1000)\r\n      .pipe(\r\n        takeUntil(\r\n          targetRow.cancelRemove$.pipe(\r\n            tap(() => {\r\n              targetRow.removing$.next('');\r\n              if (targetRow.deleteWith) {\r\n                targetRow.deleteWith.forEach((item) => (item.hidden = false));\r\n                targetRow.deleteWith = null;\r\n              }\r\n              targetRow.cancelRemove$ = null;\r\n              // this.rows$.next([...this.rows$.getValue()]);\r\n            })\r\n          )\r\n        ),\r\n        tap((v) => {\r\n          targetRow.removing$.next(\r\n            (+targetRow.removing$.getValue() - 1).toString()\r\n          );\r\n        }),\r\n        take(5)\r\n      )\r\n      .subscribe({\r\n        next: (v) => {\r\n          if (v === 4) {\r\n            this.finishRemove(targetRow, toRemove);\r\n          }\r\n        },\r\n        complete: () => sub.unsubscribe(),\r\n        error: () => sub.unsubscribe(),\r\n      });\r\n  }\r\n\r\n  private async finishRemove(\r\n    targetRow: DirectoryRow<Recipient>,\r\n    selection?: DirectoryRow<Recipient>[]\r\n  ) {\r\n    !targetRow.destroy$.closed && targetRow.removing$.next(null);\r\n    let idsToRemove = [];\r\n    if (selection) {\r\n      idsToRemove = selection\r\n        .map((item) => item.data.id)\r\n        .concat(targetRow.data.id);\r\n    } else {\r\n      idsToRemove = [targetRow.data.id];\r\n    }\r\n\r\n    this.store.removeItems(idsToRemove);\r\n\r\n    const dict = idsToRemove.reduce((acc, id) => {\r\n      acc[id] = true;\r\n      return acc;\r\n    }, {} as Record<string, boolean>);\r\n    this.selectionModel.patchValue(\r\n      this.selectionModel.value.filter((id) => !dict[id])\r\n    );\r\n    [targetRow, ...(selection || [])].forEach((toClean) => toClean.destroy());\r\n    try {\r\n      await this.recipients.deleteRecipient(idsToRemove);\r\n      this.notifierService.notify(\r\n        'success',\r\n        this.translateService.instant(\r\n          'COUNTERPARTY.' +\r\n            (idsToRemove.length > 1\r\n              ? 'DELETED_COUNTERPARTIES'\r\n              : 'DELETED_COUNTERPARTY')\r\n        )\r\n      );\r\n    } catch (e) {\r\n      this.notifierService.notify('error', e);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\n\r\nimport {\r\n  BehaviorSubject,\r\n  combineLatest,\r\n  interval,\r\n  Subject,\r\n  Subscription,\r\n} from 'rxjs';\r\nimport {\r\n  delay,\r\n  distinctUntilChanged,\r\n  map,\r\n  skip,\r\n  filter,\r\n  tap,\r\n  startWith,\r\n  takeUntil,\r\n  take,\r\n} from 'rxjs/operators';\r\n\r\nimport { NotifierService } from 'angular-notifier';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { CompanyService } from '@company/company.service';\r\n\r\nimport { Employee, EmployeeService } from '@shared/employee';\r\nimport { EntitiesStore } from '@utils/simple-store';\r\n\r\nimport {\r\n  DirectoryEditEmployeeComponent,\r\n  EDIT_ACTION,\r\n  EDIT_ACTION_TYPE,\r\n} from '@directory/components/directory-edit-employee/directory-edit-employee.component';\r\nimport { DirectoryRow } from '@directory/models/counterparty.models';\r\n\r\n\r\n@Component({\r\n  selector: 'app-directory-employees',\r\n  templateUrl: './directory-employees.component.html',\r\n  styleUrls: ['./directory-employees.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class DirectoryEmployeesComponent implements OnInit {\r\n  @ViewChild('contentBody') contentBody: TemplateRef<any>;\r\n  @ViewChild('emptyBody') emptyBody: TemplateRef<any>;\r\n  @ViewChild('errorBody') errorBody: TemplateRef<any>;\r\n  search = new FormControl('');\r\n  rows$ = new BehaviorSubject<DirectoryRow<Employee>[]>([]);\r\n  composedRows$ = new BehaviorSubject<DirectoryRow<Employee>[]>([]);\r\n  contentTpl: TemplateRef<any>;\r\n  loadingErrors$ = new BehaviorSubject<any>(undefined);\r\n  selectionModel = new FormControl([]);\r\n  subs = new Subscription();\r\n  store = new EntitiesStore<Employee>([]);\r\n  constructor(\r\n    private company: CompanyService,\r\n    private employeeService: EmployeeService,\r\n    private modalService: NgbModal,\r\n    private notifierService: NotifierService,\r\n    private translateService: TranslateService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.subs.add(\r\n      this.company.currentCompany$.pipe(delay(0), skip(1)).subscribe((v) => {\r\n        this.selectionModel.patchValue([]);\r\n        this.onRefresh();\r\n        this.rows$.getValue().forEach((row) => {\r\n          row.cancelRemove$ && row.cancelRemove$.next(Date.now());\r\n        });\r\n      })\r\n    );\r\n\r\n    this.combineFilter();\r\n    this.watchForBodyTpl();\r\n    this.watchForItems();\r\n    this.onRefresh();\r\n  }\r\n\r\n  onEdit(row?: DirectoryRow<Employee>) {\r\n    const modal = this.modalService.open(DirectoryEditEmployeeComponent, {\r\n      backdropClass: 'backdrop_light',\r\n      windowClass:\r\n        'modal_light modal-adaptive_sm modal_max-height modal-adaptive',\r\n      centered: true,\r\n      backdrop: 'static',\r\n    });\r\n    (modal.componentInstance as DirectoryEditEmployeeComponent).item =\r\n      row?.data;\r\n    modal.result.then((result: EDIT_ACTION<Employee>) =>\r\n      this.handleEditResult(result, row)\r\n    );\r\n  }\r\n\r\n  onRemoveSelected() {\r\n    let lastSelected = this.selectionModel.value;\r\n    lastSelected = lastSelected[lastSelected.length - 1];\r\n    const lastRow = this.rows$\r\n      .getValue()\r\n      .find((row) => row.data.id === lastSelected);\r\n    if (lastRow) {\r\n      this.startDeleteProcess(lastRow, true);\r\n    }\r\n  }\r\n\r\n  onRemove(row: DirectoryRow<Employee>, checkSelection?: boolean) {\r\n    this.startDeleteProcess(row, checkSelection);\r\n  }\r\n\r\n  onCancelRemove(row: DirectoryRow<Employee>) {\r\n    row.cancelRemove$ && row.cancelRemove$.next(Date.now());\r\n  }\r\n\r\n  async onRefresh() {\r\n    try {\r\n      await this.fetchEmployees();\r\n      // this.getEntities();\r\n      this.selectionModel.patchValue([]);\r\n      this.loadingErrors$.next(null);\r\n    } catch (err) {\r\n      this.rows$.next([]);\r\n      this.selectionModel.patchValue([]);\r\n      this.loadingErrors$.next(err);\r\n    }\r\n  }\r\n\r\n  private combineFilter() {\r\n    this.subs.add(\r\n      combineLatest([this.rows$, this.search.valueChanges.pipe(startWith(''))])\r\n        .pipe(\r\n          map(([rows, search]) => {\r\n            const term = search.toLocaleLowerCase();\r\n            return rows.filter(\r\n              (row) =>\r\n                !row.hidden &&\r\n                this.employeeService.filterEmployee(row.data, term)\r\n            );\r\n          })\r\n        )\r\n        .subscribe(this.composedRows$)\r\n    );\r\n  }\r\n\r\n  private async fetchEmployees() {\r\n    this.store.fetching = true;\r\n    try {\r\n      const employees = await this.employeeService.getEmployees();\r\n      this.store.setState(employees);\r\n      this.store.fetching = false;\r\n      !this.store.fetched && (this.store.fetched = true);\r\n    } catch (err) {\r\n      this.store.setState([]);\r\n      !this.store.fetched && (this.store.fetched = true);\r\n      this.store.fetching = false;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  private handleEditResult(\r\n    result: EDIT_ACTION<Employee>,\r\n    row: DirectoryRow<Employee>\r\n  ) {\r\n    if (result) {\r\n      if (\r\n        [EDIT_ACTION_TYPE.create, EDIT_ACTION_TYPE.update].some(\r\n          (action) => action === result.type\r\n        )\r\n      ) {\r\n        this.notifierService.notify(\r\n          'success',\r\n          this.translateService.instant(\r\n            'DIRECTORY.EMPLOYEES.' +\r\n              (EDIT_ACTION_TYPE.create === result.type\r\n                ? 'EMPLOYEE_ADDED'\r\n                : 'EMPLOYEE_EDITED')\r\n          )\r\n        );\r\n        this.store.upsertItem(result.payload);\r\n      } else {\r\n        this.startDeleteProcess(row);\r\n      }\r\n    }\r\n  }\r\n\r\n  private watchForItems() {\r\n    this.subs.add(\r\n      combineLatest([\r\n        this.store.items$,\r\n        this.store.fetching$,\r\n        this.store.fetched$,\r\n      ])\r\n        .pipe(\r\n          filter(([items, fetching, fetched]) => {\r\n            return !fetching && fetched;\r\n          }),\r\n          map((args) => args[0]),\r\n          distinctUntilChanged(),\r\n          tap((v) => this.selectionModel.patchValue([])),\r\n          map((employees) => {\r\n            return employees.map((recipient) => new DirectoryRow(recipient));\r\n          })\r\n        )\r\n        .subscribe((rows) => {\r\n          this.rows$.next(rows);\r\n        })\r\n    );\r\n  }\r\n\r\n  private watchForBodyTpl() {\r\n    this.subs.add(\r\n      combineLatest([\r\n        this.store.fetched$,\r\n        this.search.valueChanges.pipe(startWith('')),\r\n        this.loadingErrors$,\r\n        this.composedRows$,\r\n      ])\r\n        .pipe(\r\n          delay(0),\r\n          map(([loaded, search, err, rows]) => {\r\n            if (err) {\r\n              return this.errorBody;\r\n            } else if (loaded && !rows.length) {\r\n              return this.emptyBody;\r\n            }\r\n            return this.contentBody;\r\n          }),\r\n          distinctUntilChanged()\r\n        )\r\n        .subscribe((tpl) => (this.contentTpl = tpl))\r\n    );\r\n  }\r\n\r\n  private startDeleteProcess(\r\n    targetRow: DirectoryRow<Employee>,\r\n    checkSelection?: boolean\r\n  ) {\r\n    let toRemove;\r\n    if (checkSelection) {\r\n      const dict = this.selectionModel.value.reduce((acc, id) => {\r\n        acc[id] = true;\r\n        return acc;\r\n      }, {} as Record<string, boolean>);\r\n      delete dict[targetRow.data.id];\r\n      toRemove = this.rows$.getValue().filter((row) => dict[row.data.id]);\r\n      targetRow.deleteWith = toRemove;\r\n      toRemove.forEach((item) => (item.hidden = true));\r\n    }\r\n\r\n    targetRow.cancelRemove$ = new Subject();\r\n    targetRow.removing$.next('5');\r\n\r\n    this.rows$.next([...this.rows$.getValue()]);\r\n\r\n    const sub = interval(1000)\r\n      .pipe(\r\n        takeUntil(\r\n          targetRow.cancelRemove$.pipe(\r\n            tap(() => {\r\n              targetRow.removing$.next('');\r\n              if (targetRow.deleteWith) {\r\n                targetRow.deleteWith.forEach((item) => (item.hidden = false));\r\n                targetRow.deleteWith = null;\r\n              }\r\n              targetRow.cancelRemove$ = null;\r\n            })\r\n          )\r\n        ),\r\n        tap((v) => {\r\n          targetRow.removing$.next(\r\n            (+targetRow.removing$.getValue() - 1).toString()\r\n          );\r\n        }),\r\n        take(5)\r\n      )\r\n      .subscribe({\r\n        next: (v) => {\r\n          if (v === 4) {\r\n            this.finishRemove(targetRow, toRemove);\r\n          }\r\n        },\r\n        complete: () => sub.unsubscribe(),\r\n        error: () => sub.unsubscribe(),\r\n      });\r\n  }\r\n\r\n  private async finishRemove(\r\n    targetRow: DirectoryRow<Employee>,\r\n    selection?: DirectoryRow<Employee>[]\r\n  ) {\r\n    !targetRow.destroy$.closed && targetRow.removing$.next(null);\r\n    let idsToRemove = [];\r\n    if (selection) {\r\n      idsToRemove = selection\r\n        .map((item) => item.data.id)\r\n        .concat(targetRow.data.id);\r\n    } else {\r\n      idsToRemove = [targetRow.data.id];\r\n    }\r\n\r\n    const iins = idsToRemove\r\n      .map((id) => this.store.entities[id])\r\n      .map((empl) => empl && empl.iin);\r\n\r\n    this.store.removeItems(idsToRemove);\r\n\r\n    const dict = idsToRemove.reduce((acc, id) => {\r\n      acc[id] = true;\r\n      return acc;\r\n    }, {} as Record<string, boolean>);\r\n    this.selectionModel.patchValue(\r\n      this.selectionModel.value.filter((id) => !dict[id])\r\n    );\r\n    [targetRow, ...(selection || [])].forEach((toClean) => toClean.destroy());\r\n    try {\r\n      await this.employeeService.deleteEmployee(iins);\r\n      this.notifierService.notify(\r\n        'success',\r\n        this.translateService.instant(\r\n          'DIRECTORY.EMPLOYEES.' +\r\n            (idsToRemove.length > 1 ? 'EMPLOYEES_DELETED' : 'EMPLOYEE_DELETED'),\r\n          { num: idsToRemove.length }\r\n        )\r\n      );\r\n    } catch (e) {\r\n      this.notifierService.notify('error', e);\r\n    }\r\n  }\r\n}\r\n","import { CounterpartiesComponent } from './counterparties/counterparties.component';\nimport { DirectoryEmployeesComponent } from './directory-employees/directory-employees.component';\n\n\nexport const DIRECTORY_CONTAINERS = [\n    CounterpartiesComponent,\n    DirectoryEmployeesComponent\n]\n\nexport { DirectoryEmployeesComponent } from './directory-employees/directory-employees.component';\nexport { CounterpartiesComponent } from './counterparties/counterparties.component';\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CounterpartiesComponent, DirectoryEmployeesComponent } from './containers';\nimport { DirectoryComponent } from './directory.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DirectoryComponent,\n    data: {\n      title: 'DIRECTORY.TITLE',\n    }, \n    children: [\n        {\n          path: 'counterparties',\n          component: CounterpartiesComponent,\n        },\n        {\n          path: 'employees',\n          component: DirectoryEmployeesComponent,\n        },\n        {\n          path: '**',\n          redirectTo: 'counterparties',\n        },\n      ],\n  },\n  {\n    path: '**',\n    redirectTo: '',\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DirectoryRoutingModule {}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  selector: 'j-directory',\n  templateUrl: './directory.component.html',\n  styleUrls: ['./directory.component.scss']\n})\nexport class DirectoryComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { NgxSkeletonLoaderModule } from 'ngx-skeleton-loader';\r\nimport { NgxMaskModule } from 'ngx-mask';\r\n\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { FormBuilderTypeSafe } from '@utils/index';\r\n\r\nimport { PortalModule } from '../portal/portal.module';\r\n\r\nimport { DirectoryComponent } from './directory.component';\r\nimport { DirectoryRoutingModule } from './directory-routing.module';\r\n\r\nimport { DIRECTORY_COMPONENTS } from './components';\r\nimport { DIRECTORY_CONTAINERS } from './containers';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    DirectoryRoutingModule,\r\n    NgxSkeletonLoaderModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgxMaskModule.forChild(),\r\n    PortalModule\r\n  ],\r\n  providers: [FormBuilderTypeSafe],\r\n  declarations: [\r\n    DirectoryComponent,\r\n    DIRECTORY_COMPONENTS,\r\n    DIRECTORY_CONTAINERS,\r\n  ],\r\n})\r\nexport class DirectoryModule {}\r\n","import { BehaviorSubject, Subject } from 'rxjs';\r\n\r\nexport class DirectoryRow<T extends { id: any }> {\r\n  id: string;\r\n  hidden: boolean;\r\n  cancelRemove$: Subject<number>;\r\n  removing$ = new BehaviorSubject<string>(undefined);\r\n  deleteWith: DirectoryRow<T>[];\r\n  destroy$ = new Subject();\r\n  data: T;\r\n\r\n  constructor(data: T) {\r\n    this.id = data.id;\r\n    this.data = data;\r\n  }\r\n\r\n  destroy() {\r\n    this.destroy$.next(Date.now());\r\n    this.destroy$.complete();\r\n    this.removing$.complete();\r\n    this.cancelRemove$ && this.cancelRemove$.complete();\r\n    this.deleteWith = undefined;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport {\n  CanDeactivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  UrlTree,\n  Router,\n} from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { NgForm } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { PaymentGuardModalComponent } from '@payments/components/payment-guard-modal/payment-guard-modal.component';\nimport { BasePaymentContainer } from '@payments/containers/base-payment.container';\nimport { AuthService } from '@auth/auth.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CanDeactivatePaymentGuard\n  implements CanDeactivate<BasePaymentContainer<any>> {\n  constructor(\n    protected modal: NgbModal,\n    private auth: AuthService,\n    private router: Router\n  ) {}\n  canDeactivate(\n    component: BasePaymentContainer<any>,\n    currentRoute: ActivatedRouteSnapshot,\n    currentState: RouterStateSnapshot,\n    nextState?: RouterStateSnapshot\n  ):\n    | Observable<boolean | UrlTree>\n    | Promise<boolean | UrlTree>\n    | boolean\n    | UrlTree {\n\n    // check page reloading after draft creation. payment id to url, but no notification\n    const { extras } = this.router.getCurrentNavigation();\n    if (extras?.state?.silent) {\n      return Promise.resolve(true);\n    }\n    if (component && component.formDirective && this.auth.isAuthenticated) {\n      const { formDirective, form } = component;\n\n      if (\n        (!formDirective.submitted && form.dirty) ||\n        (formDirective.submitted && form.dirty)\n      ) {\n        return this.modal.open(PaymentGuardModalComponent, {\n          backdropClass: 'backdrop_light',\n          windowClass: 'modal_light modal_max-height',\n          centered: true,\n        }).result;\n      }\n    }\n    return Promise.resolve(true);\n  }\n}\n","export * from './can-deactivate-payment.guard';\nexport * from './currency-payment.service';\nexport * from './form-model';\nexport * from './payment-api.service';\nexport * from './payment-type-switch.guard';\nexport * from './payments-form-factory.service';\nexport * from './payments-pipeline.service';\nexport * from './payments.service';","import { Injectable } from '@angular/core';\nimport {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  UrlTree,\n  Router,\n  ActivatedRoute,\n} from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { PaymentApiService } from './payment-api.service';\nimport { PaymentsService } from './payments.service';\nimport { paymentsRoutes } from '@payments/payments-routes';\nimport { NotifierService } from 'angular-notifier';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PaymentTypeSwitchGuard implements CanActivate {\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private api: PaymentApiService,\n    private payments: PaymentsService,\n    private notification: NotifierService\n  ) {}\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ):\n    | Observable<boolean | UrlTree>\n    | Promise<boolean | UrlTree>\n    | boolean\n    | UrlTree {\n    const repeatPayment = this.router.getCurrentNavigation().extras?.state\n      ?.repeatPayment;\n    const paymentId = next.params?.paymentId || repeatPayment?.id;\n    let route = paymentsRoutes.tenge.order;\n    if (repeatPayment) {\n      route = this.payments.getPaymentRouteByType(repeatPayment.type);\n    }\n    if (paymentId) {\n      this.api\n        .getPaymentById(paymentId)\n        .then((response) => {\n          const commands = [this.payments.getPaymentRouteByType(response.type)];\n          if (!repeatPayment) {\n            commands.push(paymentId);\n          }\n          this.router.navigate(\n            commands,\n            {\n              state: {\n                resolvedPayment: response,\n              },\n            }\n          );\n        })\n        .catch((e) => {\n          this.router.navigate([paymentsRoutes.tenge.order]);\n          this.notification.show({\n            type: 'error',\n            message: e,\n          });\n        });\n    } else {\n      this.router.navigate([route]);\n    }\n    return false;\n  }\n}\n","import { Attribute, Component, Input, OnInit, TemplateRef } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { PortalService } from '../portal.service';\n\n@Component({\n  selector: 'j-portal-host',\n  templateUrl: './portal-host.component.html',\n  styleUrls: ['./portal-host.component.scss'],\n})\nexport class PortalHostComponent {\n  readonly template$: Observable<TemplateRef<any>>;\n\n  @Input() context: any;\n\n  constructor(\n    @Attribute('name') name: string,\n    private portal: PortalService\n  ) {\n    // Builds the template observable\n    this.template$ = portal.pipe(\n      // Filters only those instances targetting this very portal\n      filter((instance) => !instance || name in instance),\n\n      // Returns the template or null\n      map((instance) => {\n        return instance && instance[name]\n      }),\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PortalHostComponent } from './portal-host/portal-host.component';\nimport { PortalledTplDirective } from './portalled-tpl.directive';\n\n@NgModule({\n  declarations: [PortalHostComponent, PortalledTplDirective],\n  imports: [CommonModule],\n  exports: [PortalHostComponent, PortalledTplDirective],\n})\nexport class PortalModule {}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nexport interface TeleportInstance {\n  [target: string]: TemplateRef<any>;\n}\n@Injectable({\n  providedIn: 'root',\n})\nexport class PortalService extends BehaviorSubject<TeleportInstance> {\n  constructor() {\n    super(null)\n  }\n\n  public activate(instance: TeleportInstance) {\n    this.next(instance);\n  }\n\n  public clearAll() {\n    this.next(null);\n  }\n}\n","import { Directive, Input, SimpleChanges, TemplateRef } from '@angular/core';\nimport { PortalService } from './portal.service';\n\n@Directive({\n  selector: 'ng-template[jPortalledTpl]'\n})\nexport class PortalledTplDirective {\n\n  constructor(private teleport: PortalService, private template: TemplateRef<any>) {}\n\n  @Input('jPortalledTpl') target: string;\n\n  ngOnChanges(changes: SimpleChanges) {\n    const target = changes.target;\n    if(!target) { return; }\n    // Clears the previous target, if any\n    target.previousValue && this.teleport.activate({ [target.previousValue]: null });\n\n    // Teleports the template to the new target portal\n    target.currentValue && this.teleport.activate({ [target.currentValue]: this.template });\n  }\n\n  ngOnDestroy() {\n    // Clears the portal on destroy whenever the target is defined\n    this.target && this.teleport.activate({ [this.target]: null });\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}