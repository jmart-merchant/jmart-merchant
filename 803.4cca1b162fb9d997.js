"use strict";(self.webpackChunkjysan=self.webpackChunkjysan||[]).push([[803],{73803:(Pe,q,d)=>{d.r(q),d.d(q,{SettingsModule:()=>Kn});var a=d(69808),s=d(93075),U=d(91995),N=d(59516),e=d(5e3),G=d(16206),u=d(89854);const H=function(){return["delivery"]};let Q=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-tabs"]],decls:3,vars:2,consts:[[1,"tabs"],["routerLinkActive","tabs__link_active","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"JMART.SETTINGS.DELIVERY.TITLE"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,H)))},directives:[N.yS,N.Od,u.Pi],styles:[".tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link_active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),n})(),L=(()=>{class n{constructor(t){this.analytics=t}ngOnInit(){this.analytics.logEvent("JMartDelivery_Start",{version:1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-jmart-settings"]],decls:5,vars:0,consts:[[1,"settings"],["translate","",1,"settings__title","mb-4"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"h2",1),e._uU(2,"JMART.SETTINGS.TITLE"),e.qZA(),e._UZ(3,"j-tabs")(4,"router-outlet"),e.qZA())},directives:[u.Pi,Q,N.lC],styles:[".settings[_ngcontent-%COMP%]{padding-top:40px}.settings__title[_ngcontent-%COMP%]{font-weight:400;line-height:55px}"]}),n})();d(26164);var b=d(40703);d(8929),d(591);var A=(()=>{return(n=A||(A={})).SHOP="shop",n.WAREHOUSE="warehouse",A;var n})();d(24850),d(40520);var V=d(42654),k=d(69544),le=d(81522),ae=d(82699),Re=d(86984),ce=d(23601),De=d(46805);function Le(n,i){1&n&&e.GkF(0)}const Je=function(n,i){return{workRegime:n,i}};function Fe(n,i){if(1&n&&(e.TgZ(0,"li",7),e.YNc(1,Le,1,0,"ng-container",8),e.qZA()),2&n){const t=i.$implicit,o=i.index;e.oxw();const r=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.WLB(2,Je,t,o))}}function Ue(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index;return e.oxw().deleteWorkRegimeHandler(r)}),e.qZA()}}function Ye(n,i){1&n&&e.YNc(0,Ue,1,0,"button",9),2&n&&e.Q6J("ngIf",0!==i.index)}function je(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(),o=t.workRegime,r=t.i,l=e.oxw();e.xp6(1),e.Oqu(l.getWorkRegimeSelectedDays(o.form,r))}}function qe(n,i){if(1&n&&(e.TgZ(0,"div",22),e._UZ(1,"input",18),e.TgZ(2,"label",19),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw(),r=o.i,l=o.workRegime,p=e.oxw();e.xp6(1),e.s9C("id",r+t),e.Q6J("formControl",l.form.controls[t]),e.xp6(1),e.s9C("for",r+t),e.xp6(1),e.Oqu(e.lcZ(4,4,p.getDayTranslateKey(t)))}}function Ge(n,i){1&n&&e.GkF(0)}function Qe(n,i){1&n&&e.GkF(0)}function Ve(n,i){1&n&&e.GkF(0)}function $e(n,i){1&n&&e.GkF(0)}function We(n,i){1&n&&e.GkF(0)}const Be=function(n,i){return{label:"\u041f\u0435\u0440\u0435\u0440\u044b\u0432 \u043e\u0442",control:n,type:i}},He=function(n,i){return{label:"\u041f\u0435\u0440\u0435\u0440\u044b\u0432 \u0434\u043e",control:n,type:i}};function ze(n,i){if(1&n&&(e.TgZ(0,"div",16)(1,"div",23),e._UZ(2,"input",18),e.TgZ(3,"label",19),e._uU(4,"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\u0430"),e.qZA()(),e.TgZ(5,"div",20),e.YNc(6,$e,1,0,"ng-container",8),e.YNc(7,We,1,0,"ng-container",8),e.qZA()()),2&n){const t=e.oxw(),o=t.i,r=t.workRegime,l=e.oxw(),p=e.MAs(15);e.xp6(2),e.MGl("id","",o,"withoutBreakCheckbox"),e.Q6J("formControl",r.workRegimeOptions.controls.workRegimeBreakTime),e.xp6(1),e.MGl("for","",o,"withoutBreakCheckbox"),e.xp6(3),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.WLB(7,Be,r.workRegimeBreakTime.controls.from,l.TIME_INPUT_TYPE.FROM)),e.xp6(1),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.WLB(10,He,r.workRegimeBreakTime.controls.to,l.TIME_INPUT_TYPE.TO))}}const Xe=function(n){return{index:n}},Ke=function(n,i){return{label:"\u041e\u0442",control:n,type:i}},et=function(n,i){return{label:"\u0414\u043e",control:n,type:i}};function tt(n,i){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12)(2,"j-dropdown-input",13),e.YNc(3,je,2,1,"ng-template",null,14,e.W1O),e.YNc(5,qe,5,6,"ng-template",null,15,e.W1O),e.qZA(),e.YNc(7,Ge,1,0,"ng-container",8),e.qZA(),e.TgZ(8,"div")(9,"div",16)(10,"div",17),e._UZ(11,"input",18),e.TgZ(12,"label",19),e._uU(13,"\u041a\u0440\u0443\u0433\u043b\u043e\u0441\u0443\u0442\u043e\u0447\u043d\u043e"),e.qZA()(),e.TgZ(14,"div",20),e.YNc(15,Qe,1,0,"ng-container",8),e.YNc(16,Ve,1,0,"ng-container",8),e.qZA()(),e.YNc(17,ze,8,13,"div",21),e.qZA()()),2&n){const t=i.workRegime,o=i.i,r=e.oxw(),l=e.MAs(11),p=e.MAs(15);e.xp6(2),e.Q6J("nonClosingAfterSelection",!0)("selectedItem","test")("options",t.days),e.xp6(5),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.VKq(13,Xe,o)),e.xp6(4),e.MGl("id","",o,"allDayCheckbox"),e.Q6J("formControl",t.workRegimeOptions.controls.workRegimeTime),e.xp6(1),e.MGl("for","",o,"allDayCheckbox"),e.xp6(3),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.WLB(15,Ke,t.workRegimeTime.controls.open,r.TIME_INPUT_TYPE.FROM)),e.xp6(1),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.WLB(18,et,t.workRegimeTime.controls.close,r.TIME_INPUT_TYPE.TO)),e.xp6(1),e.Q6J("ngIf",r.showWorkRegimeBreakTime)}}function nt(n,i){1&n&&e._UZ(0,"div",26)}function ot(n,i){if(1&n&&(e.TgZ(0,"div",12)(1,"j-form-field")(2,"j-label"),e._uU(3),e.qZA(),e._UZ(4,"input",24),e.qZA(),e.YNc(5,nt,1,0,"div",25),e.qZA()),2&n){const t=i.type,o=i.label,r=i.control,l=e.oxw();e.xp6(3),e.Oqu(o),e.xp6(1),e.Q6J("formControl",r),e.xp6(1),e.Q6J("ngIf",t===l.TIME_INPUT_TYPE.FROM)}}var $=(()=>{return(n=$||($={})).FROM="FROM",n.TO="TO",$;var n})();const C=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];let pe=(()=>{class n{constructor(){this.subscription=new V.w,this.workRegimes=[{form:new s.cw({monday:new s.NI(!1),tuesday:new s.NI(!1),wednesday:new s.NI(!1),thursday:new s.NI(!1),friday:new s.NI(!1),saturday:new s.NI(!1),sunday:new s.NI(!1)}),days:C,workRegimeTime:new s.cw({open:new s.NI("0900"),close:new s.NI("1800")}),workRegimeBreakTime:new s.cw({from:new s.NI("09:00"),to:new s.NI("18:00")}),workRegimeOptions:new s.cw({workRegimeTime:new s.NI(!1),workRegimeBreakTime:new s.NI(!1)})}],this.pickedDaysCount=0,this.TIME_INPUT_TYPE=$,this.showWorkRegimeBreakTime=!0}ngOnInit(){this.workRegimes.forEach(t=>this.subsribeWorkTimeIsDayAndNight(t))}ngOnDestroy(){this.subscription.unsubscribe()}subsribeWorkTimeIsDayAndNight(t){const o=t.workRegimeOptions.get("workRegimeTime").valueChanges.subscribe(r=>Z.toggleDisabledFromTo(r,t));this.subscription.add(o)}deleteWorkRegimeHandler(t){this.workRegimes.splice(t,1)}getDayTranslateKey(t){switch(t){case C[0]:return"WEEK_DAYS.MONDAY";case C[1]:return"WEEK_DAYS.TUESDAY";case C[2]:return"WEEK_DAYS.WEDNESDAY";case C[3]:return"WEEK_DAYS.THURSDAY";case C[4]:return"WEEK_DAYS.FRIDAY";case C[5]:return"WEEK_DAYS.SATURDAY";case C[6]:return"WEEK_DAYS.SUNDAY";default:return""}}addWorkRegimesHandler(){const t={form:new s.cw({}),days:C,workRegimeTime:new s.cw({open:new s.NI,close:new s.NI}),workRegimeBreakTime:new s.cw({from:new s.NI,to:new s.NI}),workRegimeOptions:new s.cw({workRegimeTime:new s.NI(!1),workRegimeBreakTime:new s.NI(!1)})};Object.entries(this.workRegimes[this.workRegimes.length-1].form.controls).forEach(r=>{t.form.addControl(r[0],new s.NI((null==r?void 0:r[1].value)?{value:!0,disabled:!0}:{value:!1,disabled:!1}))}),this.subsribeWorkTimeIsDayAndNight(t),7!==this.pickedDaysCount&&this.workRegimes.push(t)}getWorkRegimeSelectedDays(t,o){const r=[],l=this.workRegimes[o-1];return Object.entries(t.controls).forEach(([p,h])=>{(h.value&&!l||h.value&&l&&!l.form.get(p).value)&&r.push(p)}),this.pickedDaysCount=r.length,r.map(p=>Z.mapDay(p)).join(", ")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-tole-work-regime"]],inputs:{workRegimes:"workRegimes",showWorkRegimeBreakTime:"showWorkRegimeBreakTime"},decls:16,vars:5,consts:[[1,"col-12","pr-2","pl-2","d-flex","justify-content-between","align-items-center"],[1,"form-field-title"],["type","button",1,"btn","add-workRegimes__button",3,"disabled","click"],["class","my-3",4,"ngFor","ngForOf"],["deleteWorkRegime",""],["addWorkRegimeForm",""],["workTimeForm",""],[1,"my-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","btn delete-workRegimes__button","inlineSVG","/assets/icons/delete.svg",3,"click",4,"ngIf"],["inlineSVG","/assets/icons/delete.svg",1,"btn","delete-workRegimes__button",3,"click"],[1,"col-12","pr-2","pl-2"],[1,"d-flex"],["label","\u0414\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438",1,"work-day__item",3,"nonClosingAfterSelection","selectedItem","options"],["selectedTemplate",""],["optionTemplate",""],[1,"d-flex","justify-content-start","align-items-center"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"formControl","id"],[1,"custom-control-label",3,"for"],[1,"d-flex","mb-2"],["class","d-flex justify-content-start align-items-center",4,"ngIf"],[1,"custom-control","custom-checkbox","work-day__checkbox"],[1,"custom-control","custom-checkbox","without-break-checkbox"],["type","text","jFormInput","","mask","00:00",1,"form-control","mb-2",3,"formControl"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"p",1),e._uU(3,"\u0420\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.addWorkRegimesHandler()}),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.ynx(7),e.TgZ(8,"ul"),e.YNc(9,Fe,2,5,"li",3),e.qZA(),e.BQk(),e.qZA(),e.YNc(10,Ye,1,1,"ng-template",null,4,e.W1O),e.YNc(12,tt,18,21,"ng-template",null,5,e.W1O),e.YNc(14,ot,6,3,"ng-template",null,6,e.W1O)),2&t&&(e.xp6(4),e.Q6J("disabled",7===o.pickedDaysCount),e.xp6(1),e.hij(" ",e.lcZ(6,3,"JMART.SETTINGS.DELIVERY.FORM.PRICE.BTN")," "),e.xp6(4),e.Q6J("ngForOf",o.workRegimes))},directives:[a.sg,a.tP,a.O5,k.d$,le.i,s.Wl,s.JJ,s.oH,ae.O8,Re.I,ce.m,De.hx,s.Fj],pipes:[u.X$],styles:[".work-day__item .j-dropdown-input__item{background:transparent!important}.work-day__checkbox[_ngcontent-%COMP%]{background:transparent!important}.add-workRegimes__button[_ngcontent-%COMP%]{color:#ef5630}.add-workRegimes__button[_ngcontent-%COMP%]:disabled{color:#b7bec5}.delete-workRegimes__button[_ngcontent-%COMP%]{margin-right:-1.5em}.form-field-title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:25px;color:#1a1c1f;margin-top:10px;display:inline-block}ul[_ngcontent-%COMP%]{margin-left:0;padding-left:0;width:100%}.work-day__item[_ngcontent-%COMP%]{flex-grow:1}li[_ngcontent-%COMP%]{list-style-type:none}.custom-control-input[_ngcontent-%COMP%]{bottom:1rem}.custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:disabled ~ .custom-control-label[_ngcontent-%COMP%]:after{background-color:#d6dadf;border-radius:4px}.custom-control-label[_ngcontent-%COMP%]:before{border:2px solid #d6dadf;box-sizing:border-box;border-radius:4px}.selected-days[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(:first-child){padding-left:.3em}.custom-control-label[_ngcontent-%COMP%]:after{border:none;box-sizing:border-box;border-radius:4px}.without-break-checkbox[_ngcontent-%COMP%]{flex-basis:10em}.divider[_ngcontent-%COMP%]{height:2px;width:1.2em;background:#C4C4C4;margin-top:2em;margin-left:.5em;margin-right:.5em}.custom-control[_ngcontent-%COMP%]{flex-basis:14em!important}  .j-dropdown-input__body{border:none!important;background:#FFFFFF!important;box-shadow:0 14px 16px #0000000d!important;border-radius:0 0 8px 8px!important}"]}),n})();class Z{constructor(i=null){this.workignTimeFormGroup=null,this.workignTimeFormGroup=i?this.mapExternalToInternalWorkingTime(i):this.getDefaultWorkingTime()}getDefaultWorkingTime(){return[{form:new s.cw({monday:new s.NI(!1),tuesday:new s.NI(!1),wednesday:new s.NI(!1),thursday:new s.NI(!1),friday:new s.NI(!1),saturday:new s.NI(!1),sunday:new s.NI(!1)}),days:C,workRegimeTime:new s.cw({open:new s.NI("0900"),close:new s.NI("1800")}),workRegimeBreakTime:new s.cw({from:new s.NI("09:00"),to:new s.NI("18:00")}),workRegimeOptions:new s.cw({workRegimeTime:new s.NI(!1),workRegimeBreakTime:new s.NI(!1)})}]}mapExternalToInternalWorkingTime(i){return this.workignTimeFormGroup=i.map((t,o)=>{const r={form:new s.cw({monday:new s.NI(!1),tuesday:new s.NI(!1),wednesday:new s.NI(!1),thursday:new s.NI(!1),friday:new s.NI(!1),saturday:new s.NI(!1),sunday:new s.NI(!1)}),days:C,workRegimeTime:new s.cw({open:new s.NI("0900"),close:new s.NI("1800")}),workRegimeBreakTime:new s.cw({from:new s.NI("09:00"),to:new s.NI("18:00")}),workRegimeOptions:new s.cw({workRegimeTime:new s.NI(!1),workRegimeBreakTime:new s.NI(!1)})},l={\u041f\u043d:"monday",\u0412\u0442:"tuesday",\u0421\u0440:"wednesday",\u0427\u0442:"thursday",\u041f\u0442:"friday",\u0421\u0431:"saturday",\u0412\u0441:"sunday"},p=i[o-1];p&&p.days.forEach(({name:O,day:S})=>{const M=r.form.get(l[S||O.slice(0,-1)]);M.disable(),M.setValue(!0)}),t.days.forEach(({day:O,name:S})=>{const M=l[O||S.slice(0,-1)];r.form.get(M).setValue(!0)});const h="00:00"===t.hour.from&&"23:59"===t.hour.to;h&&(r.workRegimeOptions.get("workRegimeTime").setValue(!0),Z.toggleDisabledFromTo(!0,r));const[T,v]=h?["",""]:[t.hour.from,t.hour.to];return r.workRegimeTime.get("open").setValue(T),r.workRegimeTime.get("close").setValue(v),r})}getExternalState(){return this.workignTimeFormGroup.map(i=>{const{open:t,close:o}=i.workRegimeTime.value;let r=t,l=o;return{days:Object.entries(i.form.controls).filter(([T,{value:v,disabled:O}])=>v&&!O).map(([T])=>({id:{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[T],day:Z.mapDay(T)})),hour:i.workRegimeOptions.value.workRegimeTime?{from:"00:00",to:"23:59"}:{from:r.indexOf(":")>-1?r:r.match(/.{1,2}/g).join(":"),to:l.indexOf(":")>-1?l:l.match(/.{1,2}/g).join(":")}}})}static mapDay(i){switch(i){case C[0]:return"\u041f\u043d";case C[1]:return"\u0412\u0442";case C[2]:return"\u0421\u0440";case C[3]:return"\u0427\u0442";case C[4]:return"\u041f\u0442";case C[5]:return"\u0421\u0431";case C[6]:return"\u0412\u0441";default:return""}}static toggleDisabledFromTo(i,t){const o=i?"disable":"enable";["open","close"].forEach(r=>{const l=t.workRegimeTime.get(r);l.setValue(""),l[o]()})}}d(46755),d(32534);var W=d(50235),Y=d(69942);let ee=(()=>{class n{constructor(t){this.deliveryService=t,this.label="",this.error=null,this.class="",this.control=new s.NI({cityName:""}),this.select=new e.vpe}ngOnInit(){this.deliveryService.getCities().subscribe(t=>{this.cities=t,this.citiesNames=this.cities.map(({title:o})=>o)})}onCitySelect(t){const o=this.cities.find(({title:r})=>r===t);this.control.setValue(o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Y.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-select-city"]],inputs:{label:"label",error:"error",class:"class",control:"control"},outputs:{select:"select"},decls:1,vars:5,consts:[[3,"label","options","hasError","inputClass","selectedItem","selected"]],template:function(t,o){1&t&&(e.TgZ(0,"j-dropdown-input",0),e.NdJ("selected",function(l){return o.onCitySelect(l)}),e.qZA()),2&t&&e.Q6J("label",o.label)("options",o.citiesNames)("hasError",o.error)("inputClass",o.class)("selectedItem",o.control.value.title)},directives:[le.i],styles:[""]}),n})();function lt(n,i){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.TgZ(2,"label",3),e._uU(3),e.qZA()()),2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.ekj("disabled",r.formControl.disabled),e.xp6(1),e.s9C("id","radio"+o),e.Q6J("formControl",r.formControl)("value",t.value)("checked",t.value===r.formControl.value),e.xp6(1),e.s9C("for","radio"+o),e.xp6(1),e.hij(" ",t.label," ")}}d(41572);let B=(()=>{class n{constructor(){this.formControl=new s.NI(A.SHOP)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-radio-button"]],inputs:{options:"options",formControl:"formControl"},decls:1,vars:1,consts:[["class","custom-control custom-radio my-3",3,"disabled",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio","my-3"],["type","radio","name","group",1,"custom-control-input",3,"id","formControl","value","checked"],[1,"custom-control-label","text-muted",3,"for"]],template:function(t,o){1&t&&e.YNc(0,lt,4,8,"div",0),2&t&&e.Q6J("ngForOf",o.options)},directives:[a.sg,s._,s.Fj,s.JJ,s.oH],styles:[""],encapsulation:2}),n})();d(66013),d(12320);var F=(()=>{return(n=F||(F={})).BY_CITY="BY_CITY",n.BY_INTERCITY="BY_INTERCITY",F;var n})();const _e=[{value:"jpost",label:"JPost"},{value:"own",label:" \u0421\u0432\u043e\u044f"}],ge=[{value:!0,label:"\u0412 \u0434\u0435\u043d\u044c \u0437\u0430\u043a\u0430\u0437\u0430, \u043f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0435"},{value:!1,label:"\u041d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c"}];d(36053),d(1059),d(89801),d(43915);var Ce=d(81538);let oe=(()=>{class n{constructor(){this.text=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-no-data"]],inputs:{text:"text"},decls:5,vars:3,consts:[[1,"points-empty","container-fluid"],["inlineSVG","./assets/jmart/no-data.svg",1,"points-empty__img","mb-3"],[1,"points-empty__text"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0),e._UZ(1,"span",1),e.TgZ(2,"span",2),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,1,o.text)))},directives:[k.d$],pipes:[u.X$],styles:[".points-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#fff;border-radius:0 0 12px 12px;height:300px}.points-empty__img[_ngcontent-%COMP%]{width:140px;height:140px}.points-empty__text[_ngcontent-%COMP%]{display:block;font-size:1rem;line-height:1.5rem;color:#666c72;white-space:pre-wrap}"]}),n})();var Bt=d(80013);const xe=(n,i=!1)=>{const t=parseInt(n),o=Math.abs(t)%100,r=o%10;return o>10&&o<20?" \u0434\u043d\u0435\u0439":r>1&&r<5?" \u0434\u043d\u044f":1==r?" \u0434\u0435\u043d\u044c":" \u0434\u043d\u0435\u0439"};function Ht(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().setMod(l)}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.ekj("btn-primary",o.control.value===t.value),e.xp6(1),e.hij(" ",t.label," ")}}let Oe=(()=>{class n{constructor(){this.control=new s.NI,this.mods=[{value:!0,label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 JPost"},{value:!1,label:"\u0421\u0432\u043e\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}]}ngOnInit(){this.control.setValue(this.mods[1].value)}setMod({value:t}){this.control.setValue(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-delivery-mode-toggle"]],inputs:{control:"control"},decls:2,vars:1,consts:[[1,"delivery-mode-toggle","w-100","mt-5","mb-3","p-1"],["class","btn delivery-mode-toggle__item w-50",3,"btn-primary","click",4,"ngFor","ngForOf"],[1,"btn","delivery-mode-toggle__item","w-50",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ht,2,3,"button",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.mods))},directives:[a.sg],styles:[".delivery-mode-toggle[_ngcontent-%COMP%]{background:#ECEEF1;border-radius:9px}.delivery-mode-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1)}"]}),n})();var zt=d(66978),Xt=d(26484);function Kt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",6),e.NdJ("mousedown",function(){const l=e.CHM(t).$implicit;return e.oxw().onOptionSelect(l)}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}let en=(()=>{class n extends zt.Nr{constructor(t){super(t),this.maskedService=t,this.options=[],this.name="inputAutocomplete",this.onSelect=new e.vpe,this.inputChange=new e.vpe,this.inputValue=""}get isFilled(){var t,o;const r=(null===(t=this.input)||void 0===t?void 0:t.nativeElement)&&"menulist-button"===window.getComputedStyle(this.input.nativeElement,null).getPropertyValue("appearance");return!(!(null===(o=`${this.formControl.value.title}`)||void 0===o?void 0:o.length)&&!r)}onChange(t){this.formControl.setValue({title:t,value:null}),this.inputChange.emit()}onOptionSelect(t){this.formControl.setValue(t),this.inputValue=t.title,this.onSelect.emit(t)}ngOnInit(){super.ngOnInit(),this.inputValue=this.formControl.value.title||""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Xt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-input-autocomplete"]],inputs:{options:"options",name:"name"},outputs:{onSelect:"onSelect",inputChange:"inputChange"},features:[e.qOj],decls:7,vars:10,consts:[[1,"j-input","input-autocomplete"],["autocomplete","off","autocomplete","false",1,"form-control",3,"value","id","name","autofocus","keyup","focus","blur"],["input",""],["translate","",1,"j-input--float-label",3,"for"],[1,"list-group","input-autocomplete__options",3,"hidden"],["class","list-group-item",3,"mousedown",4,"ngFor","ngForOf"],[1,"list-group-item",3,"mousedown"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("keyup",function(l){return o.onChange(l.target.value)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),e.qZA(),e.TgZ(3,"label",3),e._uU(4),e.qZA(),e.TgZ(5,"ul",4),e.YNc(6,Kt,2,1,"li",5),e.qZA()()),2&t&&(e.xp6(1),e.ekj("is-filled",o.isFilled),e.Q6J("value",o.inputValue)("id",o.id)("name",o.name)("autofocus",o.autofocus),e.xp6(2),e.Q6J("for",o.id),e.xp6(1),e.hij(" ",o.label," "),e.xp6(1),e.Q6J("hidden",!o.isFocused),e.xp6(1),e.Q6J("ngForOf",o.options))},directives:[u.Pi,a.sg],styles:[".input-autocomplete__options[_ngcontent-%COMP%]{position:absolute;z-index:1000000;width:100%;max-height:200px;overflow-y:auto}.input-autocomplete__options[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{cursor:pointer}.input-autocomplete__options[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{background:#f6f7f8}"]}),n})();var tn=d(21580),nn=d(65243);let on=(()=>{class n{constructor(){this.label="",this.control=new s.NI,this.name="checkbox",this.class=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-checkbox"]],inputs:{label:"label",control:"control",name:"name",class:"class"},decls:4,vars:7,consts:[[1,"custom-control","custom-checkbox"],["type","checkbox","ngDefaultControl","",1,"custom-control-input",3,"id","name","formControl"],["translate","",1,"custom-control-label","text-muted",3,"for"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"label",2),e._uU(3),e.qZA()()),2&t&&(e.Tol(o.class),e.xp6(1),e.Q6J("id",o.label)("name",o.label)("formControl",o.control),e.xp6(1),e.Q6J("for",o.label),e.xp6(1),e.hij(" ",o.label," "))},directives:[s.Wl,s.Fj,s.JJ,s.oH,u.Pi],styles:[".custom-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{border:2px solid #D6DADF;border-radius:4px}.custom-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{border-color:#ef5630}"]}),n})();function rn(n,i){if(1&n&&e._UZ(0,"j-amount-input",5),2&n){const t=e.oxw();e.Q6J("label","JMART.SETTINGS.DELIVERY.FORM.HOURS.TO")("formControl",t.controls.to)}}function sn(n,i){if(1&n&&e._UZ(0,"j-checkbox",6),2&n){const t=e.oxw();e.Q6J("label","JMART.SETTINGS.DELIVERY.FORM.IS_FREE")("control",t.checkbox)}}function ln(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onRemove()}),e.qZA()}}let an=(()=>{class n{constructor(){this.class="",this.price=null,this.isLast=!1,this.remove=new e.vpe}ngOnInit(){this.controls=this.price.controls,this.showToInput||(this.checkbox=new s.NI(!1),this.checkboxChangeSub=this.checkbox.valueChanges.subscribe(t=>{this.controls.deliveryPrice.setValue(t?"0":"")}))}ngOnDestroy(){this.showToInput||this.checkboxChangeSub.unsubscribe()}get showToInput(){return["deliveryPrice","to"].every(t=>"0"!==String(this.controls[t].value))}onRemove(){this.remove.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-delivery-price"]],inputs:{class:"class",price:"price",canBeRemoved:"canBeRemoved",isLast:"isLast"},outputs:{remove:"remove"},decls:6,vars:13,consts:[[1,"delivery-price","d-flex","align-items-center"],["currency","KZT_RU",1,"delivery-price__amount-input",3,"label","formControl","isDisabled"],["class","delivery-price__amount-input mx-2","currency","KZT_RU",3,"label","formControl",4,"ngIf"],["class","delivery-price__amount-input text-center mb-2",3,"label","control",4,"ngIf"],["class","btn pl-3 pr-1 align-self-baseline","inlineSVG","/assets/icons/delete.svg",3,"click",4,"ngIf"],["currency","KZT_RU",1,"delivery-price__amount-input","mx-2",3,"label","formControl"],[1,"delivery-price__amount-input","text-center","mb-2",3,"label","control"],["inlineSVG","/assets/icons/delete.svg",1,"btn","pl-3","pr-1","align-self-baseline",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"j-amount-input",1),e.YNc(2,rn,1,2,"j-amount-input",2),e._UZ(3,"j-amount-input",1),e.YNc(4,sn,1,2,"j-checkbox",3),e.YNc(5,ln,1,0,"button",4),e.qZA()),2&t&&(e.Tol(o.class),e.xp6(1),e.Q6J("label","JMART.SETTINGS.DELIVERY.FORM.HOURS.FROM")("formControl",o.controls.from)("isDisabled",!0),e.xp6(1),e.Q6J("ngIf",!o.isLast),e.xp6(1),e.ekj("mx-2",o.isLast),e.Q6J("label","JMART.SETTINGS.DELIVERY.FORM.PRICE.TITLE")("formControl",o.controls.deliveryPrice)("isDisabled",null==o.checkbox?null:o.checkbox.value),e.xp6(1),e.Q6J("ngIf",o.isLast),e.xp6(1),e.Q6J("ngIf",o.canBeRemoved))},directives:[nn.l,s.JJ,s.oH,a.O5,on,k.d$],styles:[".delivery-price__amount-input[_ngcontent-%COMP%]{width:30%}"]}),n})();function cn(n,i){if(1&n&&e._UZ(0,"j-select-city",14),2&n){const t=e.oxw();e.Q6J("control",t.form.get("direction.from"))("label","JMART.SETTINGS.DELIVERY.CITY")}}function pn(n,i){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"j-input-autocomplete",16)(2,"j-input-autocomplete",17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("options",t.citiesAndRegions.from)("formControl",t.form.get("direction.from")),e.xp6(1),e.Q6J("options",t.citiesAndRegions.to)("formControl",t.form.get("direction.to"))}}function mn(n,i){1&n&&(e.TgZ(0,"div",29),e._UZ(1,"span",30),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("inlineSVG","./assets/jmart/delete-orange.svg")("ngbTooltip",e.lcZ(2,2,"JMART.SETTINGS.INFORMATION.REMOVE")))}function dn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h6",22),e._uU(2,"JMART.SETTINGS.DELIVERY.ESTIMATED_DELIVERY"),e.qZA(),e.TgZ(3,"div",31),e._UZ(4,"j-radio-button",32)(5,"j-input",33),e.qZA(),e.TgZ(6,"div",34)(7,"div",31)(8,"j-toggle",35),e.NdJ("valueChange",function(r){return e.CHM(t),e.oxw(2).setAccidentTimeToggle(r)}),e.qZA(),e.TgZ(9,"h6",36),e._uU(10,"JMART.SETTINGS.DELIVERY.ACCIDENT_TIME.TITLE"),e.qZA()(),e.TgZ(11,"p",37),e._uU(12,"JMART.SETTINGS.DELIVERY.ACCIDENT_TIME.DESCRIPTION"),e.qZA(),e.TgZ(13,"div",38),e._UZ(14,"j-input",39),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("options",t.estimatedType)("formControl",t.form.get("isToday")),e.xp6(1),e.Q6J("formControl",t.form.get("estimatedTime"))("isClearable",!1),e.xp6(3),e.Q6J("value",t.accidentTimeToggle),e.xp6(6),e.Q6J("formControl",t.form.get("deliveryEstimatedDay"))("isClearable",!1)("computeSuffix",t.getEstimatedDaysSuffix)}}function un(n,i){if(1&n&&e._UZ(0,"j-input",40),2&n){const t=e.oxw(2);e.Q6J("formControl",t.form.get("deliveryEstimatedDay"))("isClearable",!1)("computeSuffix",t.getEstimatedDaysSuffix)}}function _n(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"j-delivery-price",41),e.NdJ("remove",function(){const l=e.CHM(t).index;return e.oxw(2).removePrice(l)}),e.qZA()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw(2);e.Q6J("canBeRemoved",o>0&&o!==r.formPricesLink.length-1)("isLast",o===r.formPricesLink.length-1)("price",t)}}function gn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",18)(2,"h5",19),e._uU(3),e.qZA(),e.YNc(4,mn,3,4,"div",20),e.qZA(),e.TgZ(5,"form",21),e.YNc(6,dn,15,8,"div",10),e.TgZ(7,"h6",22),e._uU(8,"JMART.SETTINGS.DELIVERY.DELIVERY_TIME"),e.qZA(),e._UZ(9,"j-tole-work-regime",23),e.YNc(10,un,1,3,"j-input",24),e.TgZ(11,"div")(12,"div",25)(13,"h6",22),e._uU(14,"JMART.SETTINGS.DELIVERY.FORM.PRICE.TITLE"),e.qZA(),e.TgZ(15,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().addPrice()}),e._uU(16,"JMART.SETTINGS.DELIVERY.FORM.PRICE.BTN"),e.qZA()(),e.TgZ(17,"span",27),e._uU(18," JMART.SETTINGS.DELIVERY.FORM.PRICE.LABEL "),e.qZA(),e.YNc(19,_n,1,3,"j-delivery-price",28),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.formTitle),e.xp6(1),e.Q6J("ngIf",1===t.editedIndex),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",!t.isInterCity),e.xp6(3),e.Q6J("showWorkRegimeBreakTime",!1)("workRegimes",t.workingTime.workignTimeFormGroup),e.xp6(1),e.Q6J("ngIf",t.isInterCity),e.xp6(9),e.Q6J("ngForOf",t.formPricesLink)}}let ie=(()=>{class n{constructor(t,o,r,l,p){this.modal=t,this.deliveryService=o,this.fb=r,this.router=l,this.analytics=p,this.modalSmParams={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0},this.editDelivery=null,this.subscription=new V.w,this.isSubmitted=!1,this.isCancel=!1,this.deliveryModes=_e,this.estimatedType=ge,this.formPricesLink=null,this.editedIndex=-1,this.workingTime=new Z,this.editDeliveryId=null,this.accidentTimeToggle=!1,this.citiesAndRegionsCache=[],this.citiesAndRegions={},this.getEstimatedDaysSuffix=xe}ngOnInit(){this.form=this.fb.group({isJpost:new s.NI(!1,s.kI.required),direction:new s.cw({from:new s.NI({cityName:""},s.kI.required)}),prices:new s.Oe([]),deliveryEstimatedDay:new s.NI("",s.kI.required)}),this.isInterCity?this.onInterCityFormEstablish():this.onCityFormEstablish(),this.deliveryService.getCitiesAndRegion().subscribe(o=>{this.citiesAndRegionsCache=o,Object.keys(this.form.get("direction").controls).forEach(r=>{this.setDefaultDirectionsOptions(r)})}),this.addPrice(),this.addPrice(!0),this.formPricesLink=this.form.get("prices").controls;const t=this.formPricesLink[0].controls.from;t.setValue("0"),t.disable(),this.editDelivery&&this.onEdit()}ngOnDestroy(){this.subscription.unsubscribe()}setDefaultDirectionsOptions(t){this.citiesAndRegions[t]=this.citiesAndRegionsCache.slice(0,15)}onInterCityFormEstablish(){const t=this.form.get("direction");t.addControl("to",new s.NI({cityName:""})),t.setValue({from:{title:"",value:null},to:{title:"",value:null}}),Object.keys(t.controls).forEach(o=>{t.get(o).valueChanges.pipe((0,Bt.b)(200)).subscribe(l=>{l.value?this.setDefaultDirectionsOptions(o):this.citiesAndRegions[o]=this.citiesAndRegionsCache.filter(({title:p})=>p.toLowerCase().indexOf(l.title.toLowerCase())>-1),""===l.title&&this.setDefaultDirectionsOptions(o),this.excludeSelectedCityDirections()})})}onCityFormEstablish(){this.form.get("deliveryEstimatedDay").disable(),this.form.addControl("isToday",new s.NI(!0,s.kI.required)),this.form.addControl("workingTime",new s.cw({isDayAndNight:new s.NI("",s.kI.required),hour:new s.cw({from:new s.NI("",s.kI.required),to:new s.NI("",s.kI.required)})})),this.form.addControl("estimatedTime",new s.NI("1300",s.kI.required));const t=this.form.get("workingTime.isDayAndNight").valueChanges.subscribe(r=>{const l=r?"disable":"enable",p=this.form.get("workingTime.hour");Object.keys(p.controls).forEach(h=>p.controls[h][l]())});this.subscription.add(t);const o=this.form.get("isToday").valueChanges.subscribe(r=>{const l=r?"enable":"disable";this.form.get("estimatedTime")[l]()});this.subscription.add(o)}setAccidentTimeToggle(t){this.accidentTimeToggle=t;const o=this.form.get("deliveryEstimatedDay"),r=this.form.get("estimatedTime"),l=this.form.get("isToday"),[p,h,T]=t?["enable","disable",()=>{}]:["disable","enable",()=>o.setValue("")];o[p](),l[h](),r[h](),T(),l.setValue(!1)}excludeSelectedCityDirections(){const t=Object.values(this.form.get("direction").controls).filter(({value:{value:o}})=>o&&3===o.type).map(({value:{title:o}})=>o);this.citiesAndRegions=Object.entries(this.citiesAndRegions).reduce((o,[r,l])=>(o[r]=l.filter(({title:p})=>!t.includes(p)),o),{})}close(){this.modal.dismiss()}setMode(t){this.selectedMode=t}get isModeOwn(){return!this.form.get("isJpost").value}get isInterCity(){return this.router.url.indexOf("intercity")>-1}addPrice(t=!1){const o=t?"0":"",r=this.form.get("prices"),l=new s.cw({from:new s.NI(""),to:new s.NI(o),deliveryPrice:new s.NI(o)});let p;if(r.length<=1)r.push(l),p=r.length;else{p=r.length,r.insert(p-1,l);const h=r.at(p);l.get("from").setValue(h.get("from").value),h.get("from").setValue("0")}if(!t){const h=l.get("to").valueChanges.subscribe(T=>{r.at(p).get("from").setValue(T)});this.subscription.add(h)}}removePrice(t){const o=this.form.get("prices");o.at(t+1).get("from").setValue(o.at(t-1).get("to").value),this.form.get("prices").removeAt(t)}get formTitle(){return"JMART.SETTINGS.DELIVERY."+(-1===this.editedIndex?"ADD":"EDIT")}get cityError(){return this.form.get("city").errors}onSave(){const{isJpost:t,direction:o,prices:r,isToday:l,estimatedTime:p,deliveryEstimatedDay:h}=this.form.getRawValue(),T=!this.isInterCity,v=this.isInterCity?({value:I})=>I:I=>Object.assign(Object.assign({},I),{id:I.cityId||I.id,type:I.type}),O=Object.entries(o).reduce((I,[D,x])=>(I[D]=v(x),I),{}),S=Object.assign(Object.assign({},this.editDeliveryId&&{id:this.editDeliveryId}),{isCity:T,isJpost:t,direction:O,attributes:null});t||(S.attributes=Object.assign(Object.assign({prices:r.map(I=>(Object.keys(I).forEach(D=>{const x=I[D];I[D]="number"==typeof I[D]?x:parseInt(x.replace(/ /g,""))}),I)),workingTime:this.workingTime.getExternalState()},p&&l&&{estimatedTime:p.match(/.{1,2}/g).join(":")}),{isToday:l||!1,deliveryEstimatedDay:h||(l?0:1)}));const[M,R]=this.editDelivery?["editDelivery",[S,this.editDeliveryId]]:["addDelivery",[S]];"addDelivery"===M&&this.analytics.logEvent("JMartDeliveryAdd_Save_Click",{version:1,region:this.deliveryService.selectedDelivery,type:t?"jpost":"client"}),this.deliveryService[M](...R),this.close()}onEdit(){this.editDeliveryId=this.editDelivery.delivery.id;const{isJpost:t,direction:{from:o,to:r},attributes:{isToday:l,estimatedTime:p,workingTime:h,prices:T,deliveryEstimatedDay:v}}=this.editDelivery.delivery,S=Object.assign({isJpost:t,isToday:l,direction:this.isInterCity?{from:{title:o.title,value:o},to:{title:r.title,value:r}}:{from:o}},!t&&Object.assign(Object.assign(Object.assign({},p&&{estimatedTime:p.split(":").join("")}),{workingTime:{hour:{to:h[0].hour.to,from:h[0].hour.from},isDayAndNight:[{key:"to",value:"23:59"},{key:"from",value:"00:00"}].every(({key:M,value:R})=>h[0].hour[M]===R)},prices:T}),v&&{deliveryEstimatedDay:v}));if(!t){const M=T.length-this.form.get("prices").length;if(M>0)for(let R=0;R<M;R++)this.addPrice();h&&(this.workingTime=new Z(h))}this.form.patchValue(S),setTimeout(()=>{parseInt(this.editDelivery.delivery.attributes.deliveryEstimatedDay)>1&&this.setAccidentTimeToggle(!0),this.form.get("isJpost").setValue(t)},0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(Y.p),e.Y36(s.qu),e.Y36(N.F0),e.Y36(G.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-create-deivery-modal"]],inputs:{editDelivery:"editDelivery"},decls:18,vars:7,consts:[[1,"point-remove","p-3"],[1,"point-remove__close"],["type","button",1,"point-remove__close-btn",3,"click"],["src","./assets/icons/close.svg",3,"alt"],["translate","",1,"text-start","point-remove__title"],[1,"delivery-form"],[3,"control"],[1,"delivery-form__direction"],["class","select-city",3,"control","label",4,"ngIf"],["class","delivery-form__directions-wrapper  d-flex justify-content-between w-100",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["translate","",1,"btn","btn-outline-primary",3,"click"],["translate","",1,"btn","btn-primary",3,"click"],[1,"select-city",3,"control","label"],[1,"delivery-form__directions-wrapper","d-flex","justify-content-between","w-100"],["label","\u041e\u0442\u043a\u0443\u0434\u0430","ngDefaultControl","",1,"select-city--intercity",3,"options","formControl"],["label","\u041a\u0443\u0434\u0430","ngDefaultControl","",1,"select-city--intercity",3,"options","formControl"],[1,"row","justify-content-between","align-items-center","pt-3","delivery-form__header"],["translate","",1,"col-auto","m-0","delivery-form__header-title"],["class","col-auto delete-btn pt-0 pb-0",4,"ngIf"],[1,"delivery-form__create-form",3,"formGroup"],["translate","",1,"pickup-points-type","mt-4"],[3,"showWorkRegimeBreakTime","workRegimes"],["class","mt-3 w-100","label","JMART.SETTINGS.DELIVERY.ESTIMATED_DELIVERY","maskType","daysCount",3,"formControl","isClearable","computeSuffix",4,"ngIf"],[1,"d-flex","align-items-baseline","justify-content-between"],["type","button","translate","",1,"btn","btn-link",3,"click"],["translate","",1,"d-block","text","mb-3"],[3,"canBeRemoved","isLast","price","remove",4,"ngFor","ngForOf"],[1,"col-auto","delete-btn","pt-0","pb-0"],["tooltipClass","tooltip-light",3,"inlineSVG","ngbTooltip"],[1,"d-flex"],["ngDefaultControl","",3,"options","formControl"],["label","\u0414\u043e","maskType","dayTime",1,"ml-3","w-25",3,"formControl","isClearable"],[1,"accident-time","p-3"],[3,"value","valueChange"],["translate",""],["translate","",1,"accident-time__description"],[1,"w-50"],["label","JMART.SETTINGS.DELIVERY.ACCIDENT_TIME.DAYS_INPUT_LABEL","maskType","daysCount",3,"formControl","isClearable","computeSuffix"],["label","JMART.SETTINGS.DELIVERY.ESTIMATED_DELIVERY","maskType","daysCount",1,"mt-3","w-100",3,"formControl","isClearable","computeSuffix"],[3,"canBeRemoved","isLast","price","remove"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.close()}),e._UZ(3,"img",3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"h5",4),e._uU(6,"JMART.SETTINGS.DELIVERY.SET_DELIVERY"),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"j-delivery-mode-toggle",6),e.TgZ(9,"div",7),e.YNc(10,cn,1,2,"j-select-city",8),e.YNc(11,pn,3,4,"div",9),e.qZA(),e.YNc(12,gn,20,8,"div",10),e.qZA(),e.TgZ(13,"div",11)(14,"button",12),e.NdJ("click",function(){return o.close()}),e._uU(15," JMART.SETTINGS.DELIVERY.SET_DELIVERY_DIALOG.CANCEL "),e.qZA(),e.TgZ(16,"button",13),e.NdJ("click",function(){return o.onSave()}),e._uU(17," JMART.SETTINGS.DELIVERY.SET_DELIVERY_DIALOG.SAVE "),e.qZA()()()),2&t&&(e.xp6(3),e.s9C("alt",e.lcZ(4,5,"SHARED.CLOSE")),e.xp6(5),e.Q6J("control",o.form.get("isJpost")),e.xp6(2),e.Q6J("ngIf",!o.isInterCity),e.xp6(1),e.Q6J("ngIf",o.isInterCity&&o.citiesAndRegionsCache.length>0),e.xp6(1),e.Q6J("ngIf",o.isModeOwn))},directives:[u.Pi,Oe,a.O5,ee,en,s.Fj,s.JJ,s.oH,k.d$,b._L,s._Y,s.JL,s.sg,B,W.N,tn.n,pe,a.sg,an],pipes:[u.X$],styles:['@charset "UTF-8";.j-input--without-label[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{background:red}.j-input--without-label[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]:before{content:"\\414\\43e";display:block}.accident-time[_ngcontent-%COMP%]{background:#F6F7F8;border:1px solid #E7E7F1;border-radius:5px;min-height:150px}.accident-time__description[_ngcontent-%COMP%]{font-size:.875rem;color:#666c72}.point-remove__close[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.point-remove__close-btn[_ngcontent-%COMP%]{border:none;background-color:transparent}.point-remove__title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem;line-height:1.875rem;color:#1a1c1f;white-space:pre-wrap}.point-remove__text[_ngcontent-%COMP%]{display:block;font-size:1rem;line-height:1.5rem;text-align:center;color:#666c72;white-space:pre-wrap}.delivery-form[_ngcontent-%COMP%]{min-height:10rem}.delivery-form__header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.delivery-form__header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem;line-height:1.875rem}.delivery-form__direction[_ngcontent-%COMP%]   .select-city[_ngcontent-%COMP%]{width:100%}.delivery-form__direction[_ngcontent-%COMP%]   .select-city--intercity[_ngcontent-%COMP%]{width:48%}.delivery-form__direction[_ngcontent-%COMP%]   .select-city--intercity[_ngcontent-%COMP%]:after{content:"";width:15px;height:1px;color:#666c72}.delivery-type[_ngcontent-%COMP%]{margin-bottom:.75rem}.input-icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute}.input-icons[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.icon[_ngcontent-%COMP%]{padding:10px;min-width:40px}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center}.workingTime-input-dash-after[_ngcontent-%COMP%]{position:relative}.workingTime-input-dash-after[_ngcontent-%COMP%]:after{content:"";background:#C4C4C4;width:10px;height:2px;display:block;position:absolute;right:-21px;top:38%}.text[_ngcontent-%COMP%]{font-size:16px;color:#666c72}']}),n})();const fn=function(){return["city"]},hn=function(){return["intercity"]};let Me=(()=>{class n{constructor(t){this.ngbModalService=t,this.translatePrefix="JMART.SETTINGS.DELIVERY",this.modalSmParams={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0}}ngOnInit(){}addDelivery(){this.ngbModalService.open(ie,this.modalSmParams)}mapTranslate(t){return`${this.translatePrefix}.${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.FF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-delivery"]],decls:13,vars:7,consts:[[1,"delivery"],[1,"delivery__header"],[1,"tabs"],["routerLinkActive","tabs__link_active","translate","",1,"p1","tabs__link",3,"routerLink"],["type","button",1,"delivery__header-btn",3,"click"],["inlineSVG","./assets/jmart/plus.svg",1,"delivery__header-icon","mr-2"],["translate","",1,"delivery__header-btn-text"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),e._uU(4,"JMART.SETTINGS.DELIVERY.BY_CITY"),e.qZA(),e.TgZ(5,"a",3),e._uU(6,"JMART.SETTINGS.DELIVERY.BY_INTERCITY"),e.qZA()(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.addDelivery()}),e._UZ(8,"span",5),e.TgZ(9,"span",6),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e._UZ(12,"router-outlet"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(5,fn)),e.xp6(2),e.Q6J("routerLink",e.DdM(6,hn)),e.xp6(5),e.Oqu(e.lcZ(11,3,o.mapTranslate("ADD_DELIVERY"))))},directives:[N.yS,N.Od,u.Pi,k.d$,N.lC],pipes:[u.X$],styles:[".delivery[_ngcontent-%COMP%]{display:block;padding-top:60px}.delivery__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;height:70px;box-sizing:border-box;overflow:hidden;background:#fff;padding:1rem 1.5rem 0;border-radius:.5rem .5rem 0 0;box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a}.delivery__header-btn[_ngcontent-%COMP%]{cursor:pointer;padding:1rem;background-color:#fff;border:none;border-radius:8px}.delivery__header-icon[_ngcontent-%COMP%]{border-radius:3px}.delivery__header-btn-text[_ngcontent-%COMP%]{color:#d43e19}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #eceef1;height:56px;box-sizing:border-box}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;position:relative}.tabs__link_active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),n})(),Ee=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-jmart-schedule"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"j-mart-settings-schedule works!"),e.qZA())},styles:[""]}),n})(),Ae=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-jmart-users"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"jmart-settings-users works!"),e.qZA())},styles:[""]}),n})(),vn=(()=>{class n{constructor(t,o){this.modal=t,this.deliveryService=o}close(){this.modal.dismiss()}remove(){this.deliveryService.removeDelivery(this.deliveryId,this.modal)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(Y.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-remove-delivery-modal"]],inputs:{deliveryId:"deliveryId"},decls:14,vars:3,consts:[[1,"delivery-remove","p-3"],[1,"delivery-remove__close"],["type","button",1,"delivery-remove__close-btn",3,"click"],["src","./assets/icons/close.svg",3,"alt"],["translate","",1,"delivery-remove__title"],["translate","",1,"delivery-remove__text","mb-5"],[1,"row","justify-content-center"],["type","button","translate","",1,"btn","btn-primary","mr-3",3,"click"],["type","button","translate","",1,"btn","btn-outline-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.close()}),e._UZ(3,"img",3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"h5",4),e._uU(6,"JMART.SETTINGS.DELIVERY.REMOVE_MODAL.HEADER"),e.qZA(),e.TgZ(7,"span",5),e._uU(8,"JMART.SETTINGS.INFORMATION.REMOVE_TEXT"),e.qZA(),e.TgZ(9,"div",6)(10,"button",7),e.NdJ("click",function(){return o.remove()}),e._uU(11,"JMART.SETTINGS.INFORMATION.REMOVE"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return o.close()}),e._uU(13,"JMART.SETTINGS.INFORMATION.CANCEL"),e.qZA()()()),2&t&&(e.xp6(3),e.s9C("alt",e.lcZ(4,1,"SHARED.CLOSE")))},directives:[u.Pi],pipes:[u.X$],styles:[".delivery-remove__close[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.delivery-remove__close-btn[_ngcontent-%COMP%]{border:none;background-color:transparent}.delivery-remove__title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem;line-height:1.875rem;text-align:center;color:#1a1c1f}.delivery-remove__text[_ngcontent-%COMP%]{display:block;font-size:1rem;line-height:1.5rem;text-align:center;color:#666c72}"]}),n})(),Ne=(()=>{class n{transform(t,...o){return String(t).replace(/(?!^)(?=(?:\d{3})+$)/g," ")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"numberSpaceFormat",type:n,pure:!0}),n})(),Se=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Rgc))},n.\u0275dir=e.lG2({type:n,selectors:[["","getTemplate",""]],inputs:{name:"name"}}),n})();function yn(n,i){}const ke=function(n){return{$implicit:n}};function Cn(n,i){if(1&n&&(e.TgZ(0,"th",3),e.YNc(1,yn,0,0,"ng-template",4),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Tol(o.class.th),e.xp6(1),e.Q6J("ngTemplateOutlet",o.tpls.columns)("ngTemplateOutletContext",e.VKq(4,ke,t))}}function In(n,i){}function xn(n,i){if(1&n&&(e.TgZ(0,"td"),e.YNc(1,In,0,0,"ng-template",4),e.qZA()),2&n){const t=i.$implicit,o=i.index,r=e.oxw(2);e.Tol(r.class.td),e.xp6(1),e.Q6J("ngTemplateOutlet",r.getColumnTplsByIndex(o))("ngTemplateOutletContext",e.VKq(4,ke,t))}}function On(n,i){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,xn,2,6,"td",5),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}const Mn=["*"];let En=(()=>{class n{constructor(){this.class={}}ngOnInit(){}ngAfterContentInit(){this.tpls=this.templates.toArray().reduce((t,{name:o,template:r})=>(t[o]=r,t),{})}getColumnTplsByIndex(t){return this.tpls[`column-${t+1}`]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-table"]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,Se,4),2&t){let l;e.iGM(l=e.CRH())&&(o.templates=l)}},inputs:{data:"data",class:"class"},ngContentSelectors:Mn,decls:7,vars:4,consts:[[1,"table","table-borderless","j-table","w-100"],["class","children",3,"class",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"children"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.F$t(),e.Hsn(0),e.TgZ(1,"table",0)(2,"thead")(3,"tr"),e.YNc(4,Cn,2,6,"th",1),e.qZA()(),e.TgZ(5,"tbody"),e.YNc(6,On,2,1,"tr",2),e.qZA()()),2&t&&(e.xp6(1),e.Tol(o.class.table),e.xp6(3),e.Q6J("ngForOf",o.data.columns),e.xp6(2),e.Q6J("ngForOf",o.data.rows))},directives:[a.sg,a.tP],styles:[".j-table[_ngcontent-%COMP%]{border-radius:0 0 12px 12px;background:#fff}.j-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid rgba(183,190,197,.5)}.j-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"]}),n})();function An(n,i){if(1&n&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Nn(n,i){if(1&n&&(e.TgZ(0,"span",11),e._UZ(1,"span",12),e._uU(2),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.to," ")}}function Sn(n,i){if(1&n&&(e.TgZ(0,"span",9),e._uU(1),e.qZA(),e.YNc(2,Nn,3,1,"span",10)),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t.from),e.xp6(1),e.Q6J("ngIf",t.to)}}function kn(n,i){if(1&n&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2),e.qZA(),e.TgZ(3,"span",18),e._uU(4),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.range)}}function wn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,kn,5,2,"div",15),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Pn(n,i){1&n&&(e.TgZ(0,"div",19),e._uU(1,"-"),e.qZA())}function Zn(n,i){if(1&n&&(e.YNc(0,wn,2,1,"ng-container",13),e.YNc(1,Pn,2,0,"div",14)),2&n){const t=i.$implicit;e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function Rn(n,i){if(1&n&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.days),e.xp6(2),e.Oqu(t.hour)}}function Dn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Rn,5,2,"div",20),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ln(n,i){1&n&&(e.TgZ(0,"div",19),e._uU(1,"-"),e.qZA())}function Jn(n,i){if(1&n&&(e.YNc(0,Dn,2,1,"ng-container",13),e.YNc(1,Ln,2,0,"div",14)),2&n){const t=i.$implicit;e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function Fn(n,i){if(1&n&&(e.TgZ(0,"div")(1,"span",27),e._uU(2),e.qZA(),e.TgZ(3,"span",28),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.estimatedType),e.xp6(2),e.Oqu(t.estimatedTime)}}function Un(n,i){if(1&n&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.deliveryEstimatedDay)}}function Yn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Fn,5,2,"div",13),e.YNc(2,Un,2,1,"span",26),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.isCity),e.xp6(1),e.Q6J("ngIf",!t.isCity)}}function jn(n,i){1&n&&(e.TgZ(0,"div",19),e._uU(1,"-"),e.qZA())}function qn(n,i){if(1&n&&e.YNc(0,jn,2,0,"div",14),2&n){const t=e.oxw().$implicit;e.Q6J("ngIf",!t)}}function Gn(n,i){if(1&n&&(e.YNc(0,Yn,3,2,"ng-container",24),e.YNc(1,qn,1,1,"ng-template",null,25,e.W1O)),2&n){const t=i.$implicit,o=e.MAs(2);e.Q6J("ngIf",t)("ngIfElse",o)}}function Qn(n,i){if(1&n&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function Vn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span",30),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().edit(l)}),e.ALo(1,"translate"),e.O4$(),e.TgZ(2,"svg",31),e._UZ(3,"path",32),e.qZA()(),e.kcU(),e.TgZ(4,"span",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().remove(l)}),e.ALo(5,"translate"),e.qZA()}2&n&&(e.Q6J("ngbTooltip",e.lcZ(1,3,"JMART.SETTINGS.INFORMATION.EDIT")),e.xp6(4),e.Q6J("inlineSVG","./assets/jmart/delete-orange.svg")("ngbTooltip",e.lcZ(5,5,"JMART.SETTINGS.INFORMATION.REMOVE")))}let we=(()=>{class n{constructor(t,o,r){this.translateService=t,this.ngbModalService=o,this.numberSpaceFormatPipe=r,this.deliveryTableClasses={th:"p-3",td:"p-3"},this.translatePrefix="JMART.SETTINGS.DELIVERY"}ngOnInit(){const t=this.translateService.instant(this.translatePrefix),o=this.deliveries.map((l,p)=>this.mapDelivery(l,p)),r=["CITY","PRICE","TIME","ESTIMATED_TIME","ESTIMATED_MODE"].map(l=>t[l]);r.push(""),this.deliveryTableData={columns:r,rows:o}}ngOnChanges(t){this.deliveryTableData&&(this.deliveryTableData.rows=t.deliveries.currentValue.map((o,r)=>this.mapDelivery(o,r)))}mapTranslate(t){return`${this.translatePrefix}.${t}`}edit(t){this.ngbModalService.open(ie).componentInstance.editDelivery=t}remove({delivery:{id:t}}){this.ngbModalService.open(vn).componentInstance.deliveryId=t}mapDelivery(t,o){const{isJpost:r,isCity:l,direction:{from:p,to:h},attributes:T}=t,v={from:p.title};h&&!l&&(v.to=h.title);const O=r?"JPost":"\u0421\u0432\u043e\u044f";if(r)return[v,null,null,null,O,{delivery:t,index:o}];const{prices:S,workingTime:M,estimatedTime:R,isToday:I,deliveryEstimatedDay:D}=T;return[v,S.map(x=>({price:0===parseInt(x.deliveryPrice)?"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e":`${this.numberSpaceFormatPipe.transform(x.deliveryPrice)}\u0442\u0433`,range:` \u043e\u0442 ${this.numberSpaceFormatPipe.transform(x.from)}\u0442\u0433 ${0!==parseInt(x.deliveryPrice)?`\u0434\u043e ${this.numberSpaceFormatPipe.transform(x.to)}\u0442\u0433`:""}`})),M.map(x=>({days:x.days.map(({day:eo,name:to})=>eo||to.slice(0,-1)).join(", "),hour:0===x.hour.from.localeCompare("00:00")&&0===x.hour.to.localeCompare("00:00")?" \u041a\u0440\u0443\u0433\u043b\u043e\u0441\u0443\u0442\u043e\u0447\u043d\u043e":`${x.hour.from} - ${x.hour.to}`})),Object.assign(Object.assign({},I&&{estimatedTime:`\u0437\u0430\u043a\u0430\u0437 \u0434\u043e ${R}`}),{estimatedType:I?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":"\u041d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c",deliveryEstimatedDay:`${D}${xe(D)}`,isCity:l}),O,{delivery:t,index:o}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.sK),e.Y36(b.FF),e.Y36(Ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-delivery-table"]],inputs:{deliveries:"deliveries"},features:[e.TTD],decls:8,vars:3,consts:[[3,"data"],["getTemplate","","name","columns"],["getTemplate","","name","column-1"],["getTemplate","","name","column-2"],["getTemplate","","name","column-3"],["getTemplate","","name","column-4"],["getTemplate","","name","column-5"],["getTemplate","","name","column-6"],[1,"delivery-table__column-header","border-0","font-weight-light"],[1,"delivery-table--label"],["class","d-block delivery-table--label delivery-table__city-to",4,"ngIf"],[1,"d-block","delivery-table--label","delivery-table__city-to"],["inlineSVG","./assets/jmart/delivery/from-city.svg"],[4,"ngIf"],["class","delivery-table__empty-cell",4,"ngIf"],["class","prices delivery-table--label",4,"ngFor","ngForOf"],[1,"prices","delivery-table--label"],[1,"price"],[1,"range"],[1,"delivery-table__empty-cell"],["class","working-time delivery-table--label",4,"ngFor","ngForOf"],[1,"working-time","delivery-table--label"],[1,"working-days"],[1,"working-hours"],[4,"ngIf","ngIfElse"],["emptyTime",""],["class","estimated estimated-type delivery-table--label",4,"ngIf"],[1,"estimated","estimated-type","delivery-table--label"],[1,"estimated","estimated-time","delivery-table--label"],[1,"table__body-item","col","delivery-table--label","p-0"],["tooltipClass","tooltip-light",1,"edit-btn","mr-2",3,"ngbTooltip","click"],["width","20","height","19","viewBox","0 0 20 19","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.8253 6.19123L18.8257 6.19084C19.1038 5.92538 19.3236 5.61097 19.4733 5.26596C19.6231 4.92081 19.7 4.55139 19.7 4.17867C19.7 3.80594 19.6231 3.43652 19.4733 3.09137C19.3235 2.74619 19.1035 2.43165 18.8253 2.1661L18.8252 2.16604L17.7516 1.14094L17.7516 1.14088C17.4735 0.875148 17.1425 0.663657 16.7772 0.519131C16.4119 0.374598 16.02 0.300049 15.6238 0.300049C15.2277 0.300049 14.8357 0.374598 14.4704 0.519131C14.1052 0.663635 13.7743 0.875084 13.4962 1.14076L13.4961 1.14088L3.11129 11.1081C2.69024 11.5236 2.36743 12.0189 2.16343 12.5608L2.16299 12.562L0.353379 17.5025L0.352851 17.504C0.301557 17.6498 0.287395 17.8047 0.311223 17.9562C0.335139 18.1083 0.396834 18.2538 0.492315 18.3805C0.587855 18.5072 0.714657 18.6117 0.863065 18.684C1.01118 18.7563 1.17593 18.7941 1.34354 18.7939C1.45952 18.7925 1.57457 18.7755 1.68525 18.7435L6.85976 17.0154L6.86196 17.0147C7.43659 16.8277 7.9574 16.5176 8.3847 16.1092L8.38535 16.1086L18.8253 6.19123ZM15.6267 2.26407L15.6267 2.26414C15.8675 2.26644 16.1003 2.35929 16.2738 2.52654L16.2754 2.52802L17.346 3.53754L17.3513 3.54247L17.3563 3.54765C17.5182 3.71572 17.6103 3.93847 17.6103 4.17226C17.6103 4.40605 17.5182 4.6288 17.3563 4.79687L17.3476 4.80587L17.3474 4.80568L15.7889 6.29384L13.3594 4.07892L14.9848 2.52887C15.0678 2.44622 15.1664 2.38076 15.2745 2.3356C15.3839 2.2899 15.5013 2.26572 15.6199 2.26416L15.6267 2.26407ZM11.91 5.46108L4.5872 12.4443L4.58616 12.4453C4.36971 12.6537 4.20587 12.9083 4.1087 13.1896L3.22369 15.6479L3.01549 16.2262L3.59952 16.0345L6.17233 15.19L6.17427 15.1894C6.46368 15.0983 6.72815 14.9438 6.94636 14.7372L6.94725 14.7364L14.3405 7.67687L11.91 5.46108Z"],["tooltipClass","tooltip-light",3,"inlineSVG","ngbTooltip","click"]],template:function(t,o){1&t&&(e.TgZ(0,"j-table",0),e.YNc(1,An,2,1,"ng-template",1),e.YNc(2,Sn,3,2,"ng-template",2),e.YNc(3,Zn,2,2,"ng-template",3),e.YNc(4,Jn,2,2,"ng-template",4),e.YNc(5,Gn,3,2,"ng-template",5),e.YNc(6,Qn,2,1,"ng-template",6),e.YNc(7,Vn,6,7,"ng-template",7),e.qZA()),2&t&&(e.Tol(o.deliveryTableClasses),e.Q6J("data",o.deliveryTableData))},directives:[En,Se,a.O5,k.d$,a.sg,b._L],pipes:[u.X$],styles:[".delivery-table__column-header[_ngcontent-%COMP%]{font-size:12px;color:#666c72}.delivery-table--label[_ngcontent-%COMP%]{font-size:14px}.delivery-table__empty-cell[_ngcontent-%COMP%]{color:#b7bec5;font-size:1.25rem}.edit-btn[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 12px 12px}.table__header[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#666c72;border-bottom:1px solid rgba(183,190,197,.5)}.table__header-item[_ngcontent-%COMP%]{padding:1rem;margin:0;text-align:start}.table__body[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid rgba(183,190,197,.5)}.table__body-item[_ngcontent-%COMP%]{padding:1rem;margin:0;text-align:start;font-size:.875rem;line-height:1.125rem;color:#1a1c1ff2}.table__body[_ngcontent-%COMP%]:last-child{border-radius:0 0 12px 12px;border-bottom:1px solid transparent}.working-time[_ngcontent-%COMP%]:not(:last-child){margin-bottom:12px}.working-days[_ngcontent-%COMP%]{display:block;font-weight:500}.working-hours[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#666c72f2}.price[_ngcontent-%COMP%], .estimated-type[_ngcontent-%COMP%]{color:#1a1c1f;opacity:.95;font-weight:500}.range[_ngcontent-%COMP%], .estimated-time[_ngcontent-%COMP%]{color:#666c72;opacity:.95;font-size:.75rem}.estimated[_ngcontent-%COMP%]{display:block}.edit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#b7bec5}.edit-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#ef5630}"]}),n})();function $n(n,i){if(1&n&&e._UZ(0,"j-delivery-table",4),2&n){const t=e.oxw();e.Q6J("deliveries",t.deliveries)}}function Wn(n,i){1&n&&e._UZ(0,"j-no-data",5),2&n&&e.Q6J("text","JMART.SETTINGS.DELIVERY.NO_DATA")}let re=(()=>{class n{constructor(t,o){this.router=t,this.deliveryService=o,this.search=new s.NI(""),this.deliveries=[],this.translatePrefix="JMART.SETTINGS.DELIVERY",this.dSub=new V.w}ngOnInit(){this.router.data.subscribe(t=>{this.deliveryCategory=t.category,this.deliveryService.selectedDelivery=this.deliveryCategory}),this.deliveryService.getDeliveries(),this.dSub.add(this.deliveryService.deliveryCity$.subscribe(t=>{const o=this.deliveryCategory===F.BY_CITY;this.deliveries=t.filter(r=>r.isCity===o)})),this.search.valueChanges.subscribe(t=>t.trim()?this.deliveries.filter(o=>o.city.name.toLowerCase().includes(t.toLowerCase())):this.deliveries)}ngOnDestroy(){this.dSub&&this.dSub.unsubscribe()}mapTranslate(t){return`${this.translatePrefix}.${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.gz),e.Y36(Y.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["j-delivery-list"]],decls:5,vars:6,consts:[[1,"delivery-list"],["infiniteScroll","",1,"delivery-list__body",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle"],[3,"deliveries",4,"ngIf","ngIfElse"],["noData",""],[3,"deliveries"],[3,"text"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,$n,1,1,"j-delivery-table",2),e.YNc(3,Wn,1,1,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const r=e.MAs(4);e.xp6(1),e.Q6J("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),e.xp6(1),e.Q6J("ngIf",o.deliveries.length>0)("ngIfElse",r)}},directives:[Ce.R,a.O5,we,oe],styles:[".delivery-list__search[_ngcontent-%COMP%]{box-shadow:0 0 1px #0000000a,0 0 2px #0000000f,0 4px 8px #0000000a;background-color:#f6f7f8;padding:1rem}"]}),n})();const Hn=[{path:"",component:d(16720).u,children:[{path:"",component:L,data:{title:"SETTINGS.TITLE"},children:[{path:"delivery",component:Me,children:[{path:"city",component:re,data:{category:F.BY_CITY}},{path:"intercity",component:re,data:{category:F.BY_INTERCITY}},{path:"**",redirectTo:"city"}]},{path:"schedule",component:Ee},{path:"users",component:Ae},{path:"**",redirectTo:"delivery"}]}]}];let zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[N.Bz.forChild(Hn)],N.Bz]}),n})();var Xn=d(13500);let Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Ne],imports:[[a.ez,U.m,zn,s.u5,s.UX,Xn.Yi]]}),n})()},13500:(Pe,q,d)=>{d.d(q,{CB:()=>b,L9:()=>J,Yi:()=>z});var a=d(5e3),s=d(98723),U=d(69808);const N=["fileSelector"];function e(g,y){if(1&g&&(a.TgZ(0,"div",8),a._uU(1),a.qZA()),2&g){const c=a.oxw(2);a.xp6(1),a.Oqu(c.dropZoneLabel)}}function G(g,y){if(1&g){const c=a.EpF();a.TgZ(0,"div")(1,"input",9),a.NdJ("click",function(f){return a.CHM(c),a.oxw(2).openFileSelector(f)}),a.qZA()()}if(2&g){const c=a.oxw(2);a.xp6(1),a.s9C("value",c.browseBtnLabel),a.Q6J("className",c.browseBtnClassName)}}function u(g,y){if(1&g&&(a.YNc(0,e,2,1,"div",6),a.YNc(1,G,2,2,"div",7)),2&g){const c=a.oxw();a.Q6J("ngIf",c.dropZoneLabel),a.xp6(1),a.Q6J("ngIf",c.showBrowseBtn)}}function H(g,y){}const Q=function(g){return{openFileSelector:g}};class L{constructor(y,c){this.relativePath=y,this.fileEntry=c}}let J=(()=>{class g{constructor(c){this.template=c}}return g.\u0275fac=function(c){return new(c||g)(a.Y36(a.Rgc))},g.\u0275dir=a.lG2({type:g,selectors:[["","ngx-file-drop-content-tmp",""]]}),g})(),b=(()=>{class g{constructor(c,m){this.zone=c,this.renderer=m,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new a.vpe,this.onFileOver=new a.vpe,this.onFileLeave=new a.vpe,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=f=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",f=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",f=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(c){this._disabled=null!=c&&"false"!=`${c}`}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(c){this.useDragEnter?(this.preventAndStop(c),c.dataTransfer&&(c.dataTransfer.dropEffect="copy")):!this.isDropzoneDisabled()&&!this.useDragEnter&&c.dataTransfer&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(c)),this.preventAndStop(c),c.dataTransfer.dropEffect="copy")}onDragEnter(c){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(c)),this.preventAndStop(c))}onDragLeave(c){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(c)),this.preventAndStop(c))}dropFiles(c){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,c.dataTransfer)){let m;m=c.dataTransfer.items?c.dataTransfer.items:c.dataTransfer.files,this.preventAndStop(c),this.checkFiles(m)}}uploadFiles(c){!this.isDropzoneDisabled()&&c.target&&(this.checkFiles(c.target.files||[]),this.resetFileInput())}checkFiles(c){for(let m=0;m<c.length;m++){const f=c[m];let _=null;if(this.canGetAsEntry(f)&&(_=f.webkitGetAsEntry()),_)if(_.isFile){const w=new L(_.name,_);this.addToQueue(w)}else _.isDirectory&&this.traverseFileTree(_,_.name);else if(f){const w={name:f.name,isDirectory:!1,isFile:!0,file:A=>A(f)},E=new L(w.name,w);this.addToQueue(E)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=(0,s.H)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const m=this.files;this.files=[],this.onFileDrop.emit(m)}})}traverseFileTree(c,m){if(c.isFile){const f=new L(m,c);this.files.push(f)}else{m+="/";const f=c.createReader();let _=[];const w=()=>{this.numOfActiveReadEntries++,f.readEntries(E=>{if(E.length)_=_.concat(E),w();else if(0===_.length){const A=new L(m,c);this.zone.run(()=>{this.addToQueue(A)})}else for(let A=0;A<_.length;A++)this.zone.run(()=>{this.traverseFileTree(_[A],m+_[A].name)});this.numOfActiveReadEntries--})};w()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const c=this.fileSelector.nativeElement,m=c.parentElement,f=this.getHelperFormElement(),_=this.getFileInputPlaceholderElement();m!==f&&(this.renderer.insertBefore(m,_,c),this.renderer.appendChild(f,c),f.reset(),this.renderer.insertBefore(m,c,_),this.renderer.removeChild(m,_))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(c){return!!c.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(c){this.files.push(c)}preventAndStop(c){c.stopPropagation(),c.preventDefault()}}return g.\u0275fac=function(c){return new(c||g)(a.Y36(a.R0b),a.Y36(a.Qsj))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ngx-file-drop"]],contentQueries:function(c,m,f){if(1&c&&a.Suo(f,J,5,a.Rgc),2&c){let _;a.iGM(_=a.CRH())&&(m.contentTemplate=_.first)}},viewQuery:function(c,m){if(1&c&&a.Gf(N,7),2&c){let f;a.iGM(f=a.CRH())&&(m.fileSelector=f.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(c,m){if(1&c&&(a.TgZ(0,"div",0),a.NdJ("drop",function(_){return m.dropFiles(_)})("dragover",function(_){return m.onDragOver(_)})("dragenter",function(_){return m.onDragEnter(_)})("dragleave",function(_){return m.onDragLeave(_)}),a.TgZ(1,"div",1)(2,"input",2,3),a.NdJ("change",function(_){return m.uploadFiles(_)}),a.qZA(),a.YNc(4,u,2,2,"ng-template",null,4,a.W1O),a.YNc(6,H,0,0,"ng-template",5),a.qZA()()),2&c){const f=a.MAs(5);a.ekj("ngx-file-drop__drop-zone--over",m.isDraggingOverDropZone),a.Q6J("className",m.dropZoneClassName),a.xp6(1),a.Q6J("className",m.contentClassName),a.xp6(1),a.Q6J("accept",m.accept)("multiple",m.multiple),a.uIk("directory",m.directory||void 0)("webkitdirectory",m.directory||void 0)("mozdirectory",m.directory||void 0)("msdirectory",m.directory||void 0)("odirectory",m.directory||void 0),a.xp6(4),a.Q6J("ngTemplateOutlet",m.contentTemplate||f)("ngTemplateOutletContext",a.VKq(13,Q,m.openFileSelector))}},directives:[U.O5,U.tP],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),g})(),z=(()=>{class g{}return g.\u0275fac=function(c){return new(c||g)},g.\u0275mod=a.oAB({type:g,bootstrap:function(){return[b]}}),g.\u0275inj=a.cJS({providers:[],imports:[[U.ez]]}),g})()}}]);