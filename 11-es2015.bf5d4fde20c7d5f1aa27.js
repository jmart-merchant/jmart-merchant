(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{gfTr:function(t,e,i){"use strict";i.d(e,"a",(function(){return g})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return p}));var n=i("fXoL"),s=i("PqYM"),r=i("ofXK");const o=["fileSelector"];function a(t,e){if(1&t&&(n.Wb(0,"div",7),n.Sc(1),n.Vb()),2&t){const t=n.mc(2);n.Ab(1),n.Tc(t.dropZoneLabel)}}function c(t,e){if(1&t){const t=n.Xb();n.Wb(0,"div"),n.Wb(1,"input",8),n.ic("click",(function(e){return n.Hc(t),n.mc(2).openFileSelector(e)})),n.Vb(),n.Vb()}if(2&t){const t=n.mc(2);n.Ab(1),n.Db(t.browseBtnClassName),n.uc("value",t.browseBtnLabel)}}function l(t,e){if(1&t&&(n.Qc(0,a,2,1,"div",5),n.Qc(1,c,2,3,"div",6)),2&t){const t=n.mc();n.tc("ngIf",t.dropZoneLabel),n.Ab(1),n.tc("ngIf",t.showBrowseBtn)}}function d(t,e){}const b=function(t){return{openFileSelector:t}};class h{constructor(t,e){this.relativePath=t,this.fileEntry=e}}let u=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(n.L))},t.\u0275dir=n.Lb({type:t,selectors:[["","ngx-file-drop-content-tmp",""]]}),t})(),g=(()=>{class t{constructor(t,e){this.zone=t,this.renderer=e,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new n.n,this.onFileOver=new n.n,this.onFileLeave=new n.n,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=t=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",t=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",t=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(t){this._disabled=null!=t&&"false"!==`${t}`}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(t){this.useDragEnter?(this.preventAndStop(t),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")):this.isDropzoneDisabled()||this.useDragEnter||!t.dataTransfer||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t),t.dataTransfer.dropEffect="copy")}onDragEnter(t){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t))}onDragLeave(t){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(t)),this.preventAndStop(t))}dropFiles(t){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,t.dataTransfer)){let e;e=t.dataTransfer.items?t.dataTransfer.items:t.dataTransfer.files,this.preventAndStop(t),this.checkFiles(e)}}uploadFiles(t){!this.isDropzoneDisabled()&&t.target&&(this.checkFiles(t.target.files||[]),this.resetFileInput())}checkFiles(t){for(let e=0;e<t.length;e++){const i=t[e];let n=null;if(this.canGetAsEntry(i)&&(n=i.webkitGetAsEntry()),n)if(n.isFile){const t=new h(n.name,n);this.addToQueue(t)}else n.isDirectory&&this.traverseFileTree(n,n.name);else if(i){const t={name:i.name,isDirectory:!1,isFile:!0,file:t=>t(i)},e=new h(t.name,t);this.addToQueue(e)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(s.a)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const t=this.files;this.files=[],this.onFileDrop.emit(t)}})}traverseFileTree(t,e){if(t.isFile){const i=new h(e,t);this.files.push(i)}else{e+="/";const i=t.createReader();let n=[];const s=()=>{this.numOfActiveReadEntries++,i.readEntries(i=>{if(i.length)n=n.concat(i),s();else if(0===n.length){const i=new h(e,t);this.zone.run(()=>{this.addToQueue(i)})}else for(let t=0;t<n.length;t++)this.zone.run(()=>{this.traverseFileTree(n[t],e+n[t].name)});this.numOfActiveReadEntries--})};s()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const t=this.fileSelector.nativeElement,e=t.parentElement,i=this.getHelperFormElement(),n=this.getFileInputPlaceholderElement();e!==i&&(this.renderer.insertBefore(e,n,t),this.renderer.appendChild(i,t),i.reset(),this.renderer.insertBefore(e,t,n),this.renderer.removeChild(e,n))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(t){return!!t.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(t){this.files.push(t)}preventAndStop(t){t.stopPropagation(),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(n.z),n.Qb(n.D))},t.\u0275cmp=n.Kb({type:t,selectors:[["ngx-file-drop"]],contentQueries:function(t,e,i){var s;1&t&&n.Ib(i,u,!0,n.L),2&t&&n.Dc(s=n.jc())&&(e.contentTemplate=s.first)},viewQuery:function(t,e){var i;1&t&&n.Nc(o,!0),2&t&&n.Dc(i=n.jc())&&(e.fileSelector=i.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:17,consts:[[3,"drop","dragover","dragenter","dragleave"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"value","click"]],template:function(t,e){if(1&t&&(n.Wb(0,"div",0),n.ic("drop",(function(t){return e.dropFiles(t)}))("dragover",(function(t){return e.onDragOver(t)}))("dragenter",(function(t){return e.onDragEnter(t)}))("dragleave",(function(t){return e.onDragLeave(t)})),n.Wb(1,"div"),n.Wb(2,"input",1,2),n.ic("change",(function(t){return e.uploadFiles(t)})),n.Vb(),n.Qc(4,l,2,2,"ng-template",null,3,n.Rc),n.Qc(6,d,0,0,"ng-template",4),n.Vb(),n.Vb()),2&t){const t=n.Ec(5);n.Db(e.dropZoneClassName),n.Hb("ngx-file-drop__drop-zone--over",e.isDraggingOverDropZone),n.Ab(1),n.Db(e.contentClassName),n.Ab(1),n.tc("accept",e.accept)("multiple",e.multiple),n.Bb("directory",e.directory||void 0)("webkitdirectory",e.directory||void 0)("mozdirectory",e.directory||void 0)("msdirectory",e.directory||void 0)("odirectory",e.directory||void 0),n.Ab(4),n.tc("ngTemplateOutlet",e.contentTemplate||t)("ngTemplateOutletContext",n.yc(15,b,e.openFileSelector))}},directives:[r.B,r.u],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),t})(),p=(()=>{class t{}return t.\u0275mod=n.Ob({type:t,bootstrap:function(){return[g]}}),t.\u0275inj=n.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c]]}),t})()},mCIM:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),s=i("3Pt+"),r=i("xJkR"),o=i("dlKe"),a=i("gfTr"),c=i("5cNS"),l=i("PCNd"),d=i("tyNb"),b=function(t){return t.INBOX="inbox",t.OUTBOX="outbox",t.DRAFTS="drafts",t}({}),h=function(t){return t.ON_SIGN="ON_SIGN",t.SENT="SENT",t}({}),u=function(t){return t.CERTIFICATE="CERTIFICATE",t.APPLICATION="APPLICATION",t}({});const g=[{id:"919fbae5-ca24-4b3a-9323-a5b0c96a4512",displayName:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e",description:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e",type:"APPLICATION"},{id:"d61a02d0-50ea-4867-9c3b-ec318cb569ac",displayName:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0432\u0430\u043b\u044e\u0442\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c",description:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u0432\u0430\u043b\u044e\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430",type:"APPLICATION"},{id:"fba22715-756c-41d7-b100-e29f80ab0ea9",displayName:"\u041d\u0430 \u0432\u044b\u0434\u0430\u0447\u0443 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0435\u043d\u0435\u0433",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0432\u044b\u0434\u0430\u0447\u0443 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0435\u043d\u0435\u0433 \u0432 \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0438",type:"APPLICATION"},{id:"fa1be069-e728-4a2f-950f-ec4893dc42ac",displayName:"\u041d\u0430 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0438\u0437\u044a\u044f\u0442\u0438\u0435 \u0441 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0430",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0438\u0437\u044a\u044f\u0442\u0438\u0435 \u0441 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0430",type:"APPLICATION"},{id:"d6d2fb09-6d94-4be1-b75c-f4f3dbfd0d75",displayName:"\u0421\u043c\u0435\u043d\u0430 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f, \u0430\u0434\u0440\u0435\u0441\u0430, \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u0442.\u0434",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0441\u043c\u0435\u043d\u0443 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f, \u0430\u0434\u0440\u0435\u0441\u0430, \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u0442.\u0434. \u0441 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 (\u043f\u0440\u0438\u043a\u0430\u0437\u044b, \u0440\u0435\u0448\u0435\u043d\u0438\u044f, \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430)",type:"APPLICATION"},{id:"4a7c08ee-f640-4feb-a012-15f99084f8a1",displayName:"\u041d\u0430 \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u043b\u044e\u0442\u044b \u043d\u0430 \u0441\u0447\u0435\u0442",description:"\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043e \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0438 \u0432\u0430\u043b\u044e\u0442\u044b \u043d\u0430 \u0441\u0447\u0435\u0442",type:"APPLICATION"},{id:"07e410d5-3283-4f8c-902c-6c86e2436677",displayName:"\u041e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0441\u0447\u0435\u0442\u0430",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"8295913a-b8ba-472f-af7c-8e12195b8ddf",displayName:"\u041e\u0431 \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445 \u043d\u0430 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u043c \u0441\u0447\u0435\u0442\u0435",type:"CERTIFICATE"},{id:"a66d0329-8956-4bce-89ee-bdc9e3571349",displayName:"\u041e\u0431 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u0445 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u0445 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"affb46a1-2012-47d2-9222-96b12603771c",displayName:"\u041e \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u0430\u0445 \u0441\u0447\u0435\u0442\u0430",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u0430\u0445 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"48e07781-bc49-4e04-b24c-3136366b913f",displayName:"\u0414\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",type:"CERTIFICATE"},{id:"903dabe2-5b6a-405a-93ab-5df77f8c1b7f",displayName:"\u0414\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0434\u0435\u0440\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0434\u0435\u0440\u0435",type:"CERTIFICATE"},{id:"34ce1113-6f15-4f64-92af-fc97db0599be",displayName:"\u041e\u0431 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438",type:"CERTIFICATE"},{id:"e4da4358-f6fe-42dc-8099-07026932f2cf",displayName:"\u041e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 3-\u0438\u0445 \u043b\u0438\u0446",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 3-\u0438\u0445 \u043b\u0438\u0446 (\u0415\u041a\u041e)",type:"CERTIFICATE"}];var p=i("R0Ic"),f=i("fXoL"),m=i("mrSG"),S=i("tk/3"),T=i("2Vo4"),v=i("Wgwc"),y=i.n(v),_=i("kAiJ"),O=i("VnnJ"),E=i("ZF+8"),w=i("yZrb"),A=i("FhWM");let x=(()=>{class t{constructor(t,e,i,n,s){this.companyService=t,this.filesService=e,this.apiService=i,this.listService=n,this.locale=s,this.files=[],this.lastLettersListPath$=new T.a("outbox"),this.retrieveTopics()}clearFiles(){this.files=[],this.filesService.uploading$.next([])}onFileDrop(t){const e=[];for(const i of t)e.push(i);e.length>0&&(this.files=[...e],this.filesService.uploading$.next(this.files))}mapLetterDate(t){const e=t.created,i=y()().isSame(e,"day"),s=y()().subtract(1,"date").isSame(e,"day"),r=y()(e).format("HH:mm");if(i)return{key:"LETTERS.DATE.TODAY",params:{time:r}};if(s)return{key:"LETTERS.DATE.YESTERDAY",params:{time:r}};{const t=y()().isSame(e,"year")?"d MMMM HH:mm":"d MMMM yyyy HH:mm";return Object(n.K)(e,t,this.locale)}}getById(t){const e=this.mapUrl(`/${t}`);return this.apiService.get(e)}getLetterSignatures(t){const e=this.mapUrl(`/${t}/signatures`);return this.apiService.get(e)}sign(t){return this.listService.sign("letters",t)}getList(t={}){return Object(m.a)(this,void 0,void 0,(function*(){const e=this.mapUrl();let i=new S.h;for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){let e=t[s];e&&("dateFrom"!=s&&"dateTo"!=s||(e=Object(_.b)(e)),i=i.append(s,e))}const n=yield this.apiService.get(e,null,i,{observe:"response"});return{items:n.body,totalCount:+n.headers.get("X-Total-Count")}}))}retrieveTopics(){return Object(m.a)(this,void 0,void 0,(function*(){const t=this.mapUrl("/topics");let e;try{e=yield this.apiService.get(t)}catch(i){e=g}return this.cashedTopics=e,this.cashedTopics}))}getTopics(t){return Object(m.a)(this,void 0,void 0,(function*(){return this.cashedTopics?this.filterTopicsByType(t):(this.cashedTopics=yield this.retrieveTopics(),this.filterTopicsByType(t))}))}getTopicValues(){return Object(m.a)(this,void 0,void 0,(function*(){return this.cashedTopics?this.mapTopicValues():(this.cashedTopics=yield this.retrieveTopics(),this.mapTopicValues())}))}edit(t){const e=this.mapUrl(`/${t.id}`);return this.apiService.put(e,t)}create(t){const e=this.mapUrl();return this.apiService.post(e,t)}sendToSign(t){const e=Array.isArray(t),i=this.mapUrl(e?":on-sign":`/${t}:on-sign`);return this.apiService.patch(i,e?{itemIds:t}:null)}filterTopicsByType(t){return this.cashedTopics.filter(e=>e.type===t)}mapTopicValues(){return this.cashedTopics.map(t=>t.displayName)}mapUrl(t=""){return`companies/${this.companyService.currentId}/letters${t}`}}return t.\u0275fac=function(e){return new(e||t)(f.ec(O.a),f.ec(E.b),f.ec(w.a),f.ec(A.a),f.ec(f.u))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=i("e8Ap"),L=i("fK/r"),C=i("PGAL"),F=i("Kcpt"),D=i("Hjq/"),R=i("sYmb");function j(t,e){if(1&t&&(f.Ub(0),f.Sc(1),f.Tb()),2&t){const t=f.mc(2);f.Ab(1),f.Uc(" ",t.dateText," ")}}function P(t,e){if(1&t&&(f.Ub(0),f.Sc(1),f.nc(2,"translate"),f.Tb()),2&t){const t=f.mc(2);f.Ab(1),f.Uc(" ",f.pc(2,1,t.date.key,t.date.params)," ")}}function N(t,e){if(1&t&&(f.Wb(0,"div",10),f.Qc(1,j,2,1,"ng-container",11),f.Qc(2,P,3,4,"ng-container",11),f.Vb()),2&t){const t=f.mc();f.Ab(1),f.tc("ngIf",t.dateText),f.Ab(1),f.tc("ngIf",t.date)}}function k(t,e){if(1&t){const t=f.Xb();f.Wb(0,"button",14),f.ic("click",(function(i){f.Hc(t);const n=e.$implicit;return f.mc(3).onFileClick(n)})),f.Rb(1,"span",15),f.Wb(2,"div",16),f.Sc(3),f.Vb(),f.Vb()}if(2&t){const t=e.$implicit;f.Ab(3),f.Uc(" ",null==t?null:t.name," ")}}function V(t,e){if(1&t&&(f.Ub(0),f.Qc(1,k,4,1,"button",13),f.Tb()),2&t){const t=f.mc(2);f.Ab(1),f.tc("ngForOf",t.letter.files)}}const M=function(){return{height:"32px","background-color":"#ECEEF1"}};function W(t,e){1&t&&f.Rb(0,"ngx-skeleton-loader",17),2&t&&f.tc("theme",f.xc(1,M))}function Q(t,e){if(1&t&&(f.Qc(0,V,2,1,"ng-container",11),f.Qc(1,W,1,2,"ngx-skeleton-loader",12)),2&t){const t=f.mc();f.tc("ngIf",!t.isFilesLoading),f.Ab(1),f.tc("ngIf",t.isFilesLoading)}}function B(t,e){if(1&t){const t=f.Xb();f.Wb(0,"div",19),f.Wb(1,"button",20),f.ic("click",(function(e){return f.Hc(t),f.mc(2).onReply()})),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Vb()}if(2&t){const t=f.mc(2);f.Ab(2),f.Uc(" ",f.oc(3,1,t.mapTranslate("REPLY"))," ")}}function U(t,e){if(1&t&&f.Qc(0,B,4,3,"div",18),2&t){const t=f.mc();f.tc("ngIf",t.letter.incoming)}}function G(t,e){if(1&t&&(f.Wb(0,"div",27),f.Wb(1,"div",28),f.Sc(2),f.Vb(),f.Wb(3,"div",29),f.Sc(4),f.Vb(),f.Vb()),2&t){const t=e.$implicit;f.Ab(2),f.Tc(t.name),f.Ab(1),f.Db(t.classList),f.Ab(1),f.Tc(t.label)}}function H(t,e){if(1&t&&(f.Wb(0,"section",4),f.Wb(1,"j-collapsible"),f.Wb(2,"j-collapsible-trigger"),f.Wb(3,"div",22),f.Wb(4,"h5",23),f.Sc(5),f.nc(6,"translate"),f.Vb(),f.Rb(7,"j-icon",24),f.Vb(),f.Vb(),f.Wb(8,"j-collapsible-body"),f.Wb(9,"div",25),f.Qc(10,G,5,4,"div",26),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t){const t=f.mc(2);f.Ab(5),f.Uc(" ",f.oc(6,3,t.mapTranslate("SIGNERS"))," "),f.Ab(2),f.tc("isStroke",!0),f.Ab(3),f.tc("ngForOf",t.signers)}}function X(t,e){if(1&t&&f.Qc(0,H,11,5,"section",21),2&t){const t=f.mc();f.tc("ngIf",(null==t.signers?null:t.signers.length)>0)}}let $=(()=>{class t{constructor(t,e,i,n){this.router=t,this.lettersService=e,this.filesService=i,this.companyService=n,this.closed=new f.n,this.isFilesLoading=!0}ngOnInit(){this.mapDateText(),this.loadAttachments()}onClose(){this.closed.emit()}onFileClick(t){this.filesService.downloadFileById(t.id,t.name)}onReply(){this.router.navigate(["/letters/create"],{state:{title:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e"}})}mapTranslate(t){return`LETTERS.DETAILS.${t}`}loadAttachments(){return Object(m.a)(this,void 0,void 0,(function*(){this.isFilesLoading=!0;try{const t=yield this.lettersService.getById(this.letter.id);this.letter=Object.assign(Object.assign({},this.letter),t),this.loadSignatures()}catch(t){}finally{this.isFilesLoading=!1}}))}loadSignatures(){return Object(m.a)(this,void 0,void 0,(function*(){this.letter.incoming||(this.signers=this.companyService.generateSignersList(this.letter.statusCode,this.letter.signatureScheme,this.letter.signatures))}))}mapDateText(){const t=this.lettersService.mapLetterDate(this.letter);"string"==typeof t?this.dateText=t:this.date=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(d.c),f.Qb(x),f.Qb(E.b),f.Qb(O.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-details-content"]],inputs:{letter:"letter"},outputs:{closed:"closed"},decls:20,vars:6,consts:[[1,"letter-details"],[1,"letter-details__header"],[3,"ngTemplateOutlet"],["inlineSVG","./assets/icons/letters/close.svg",1,"letter-details__close",3,"click"],[1,"letter-details__body"],[1,"p2"],["dateTemplate",""],["filesTemplate",""],["actionsTemplate",""],["signersTemplate",""],[1,"text-muted","p3"],[4,"ngIf"],["count","5",3,"theme",4,"ngIf"],["class","letter-details__file",3,"click",4,"ngFor","ngForOf"],[1,"letter-details__file",3,"click"],["inlineSVG","./assets/icons/contracts/file.svg",1,"mr-3"],[1,"text-truncate","p2"],["count","5",3,"theme"],["class","letter-details__actions",4,"ngIf"],[1,"letter-details__actions"],[1,"btn","btn-primary","btn-block",3,"click"],["class","letter-details__body",4,"ngIf"],[1,"letter-details__collapse"],[1,"m-0"],["name","arrowUp",1,"ml-auto","details__arrow",3,"isStroke"],[1,"letter-details__signers","p2"],["class","j-desc-row letter-details__signer",4,"ngFor","ngForOf"],[1,"j-desc-row","letter-details__signer"],[1,"text-dark","j-desc-child"],["translate","",1,"text-muted","j-desc-child"]],template:function(t,e){if(1&t&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Sb(2,2),f.Wb(3,"button",3),f.ic("click",(function(t){return e.onClose()})),f.Vb(),f.Vb(),f.Wb(4,"article",4),f.Wb(5,"h6"),f.Sc(6),f.Vb(),f.Wb(7,"p",5),f.Sc(8),f.Vb(),f.Sb(9,2),f.Sb(10,2),f.Vb(),f.Sb(11,2),f.Vb(),f.Qc(12,N,3,2,"ng-template",null,6,f.Rc),f.Qc(14,Q,2,2,"ng-template",null,7,f.Rc),f.Qc(16,U,1,1,"ng-template",null,8,f.Rc),f.Qc(18,X,1,1,"ng-template",null,9,f.Rc)),2&t){const t=f.Ec(13),i=f.Ec(15),n=f.Ec(17),s=f.Ec(19);f.Ab(2),f.tc("ngTemplateOutlet",t),f.Ab(4),f.Tc(e.letter.title),f.Ab(2),f.Tc(e.letter.body),f.Ab(1),f.tc("ngTemplateOutlet",i),f.Ab(1),f.tc("ngTemplateOutlet",n),f.Ab(1),f.tc("ngTemplateOutlet",s)}},directives:[n.B,I.a,n.u,n.t,r.a,L.a,C.a,F.a,D.a,R.a],pipes:[R.d],styles:[".letter-details__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.letter-details__close[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letter-details__close[_ngcontent-%COMP%]:hover{color:#ef5630}.letter-details__body[_ngcontent-%COMP%]{margin-top:1.5rem;background:#fff;overflow:hidden;padding:1.5rem 1rem;border-radius:12px}.letter-details__file[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;width:100%;padding:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;color:#1586bb}.letter-details__file[_ngcontent-%COMP%]:hover{color:#ef5630}.letter-details__file[_ngcontent-%COMP%] + .letter-details__file[_ngcontent-%COMP%]{margin-top:1.5rem}.letter-details__actions[_ngcontent-%COMP%]{margin-top:2.5rem}.letter-details__trigger[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.letter-details__signers[_ngcontent-%COMP%]{padding-top:1rem}.letter-details__collapse[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.letter-details__signer[_ngcontent-%COMP%]{grid-template-columns:1fr 100px}"]}),t})();function z(t,e){if(1&t){const t=f.Xb();f.Wb(0,"button",3),f.ic("click",(function(i){f.Hc(t);const n=e.$implicit;return f.mc(2).onLinkSelect(n)})),f.Wb(1,"span"),f.Sc(2),f.Vb(),f.Rb(3,"span",4),f.Vb()}if(2&t){const t=e.$implicit;f.Ab(2),f.Tc(t.displayName)}}function Y(t,e){if(1&t&&(f.Ub(0),f.Wb(1,"div",1),f.Wb(2,"h6"),f.Sc(3),f.nc(4,"translate"),f.Vb(),f.Qc(5,z,4,1,"button",2),f.Vb(),f.Tb()),2&t){const t=f.mc();f.Ab(3),f.Tc(f.oc(4,2,t.mapTranslate(t.topicType))),f.Ab(2),f.tc("ngForOf",t.topics)}}const K=function(){return{height:"450px","background-color":"#ECEEF1"}};function Z(t,e){1&t&&(f.Ub(0),f.Rb(1,"ngx-skeleton-loader",5),f.Tb()),2&t&&(f.Ab(1),f.tc("theme",f.xc(1,K)))}let J=(()=>{class t{constructor(t,e){this.lettersService=t,this.router=e,this.isLoading=!0}ngOnInit(){this.loadTopics()}mapTranslate(t){return`LETTERS.CREATE_CONTENT.${t}`}onLinkSelect(t){this.router.navigate(["/letters/create"],{state:{title:t.displayName}})}loadTopics(){return Object(m.a)(this,void 0,void 0,(function*(){try{this.topics=yield this.lettersService.getTopics(this.topicType)}catch(t){}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x),f.Qb(d.c))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-create-group"]],inputs:{topicType:"topicType"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"letters-create-group"],["class","letters-create-group__button p2",3,"click",4,"ngFor","ngForOf"],[1,"letters-create-group__button","p2",3,"click"],["inlineSVG","./assets/icons/letters/next.svg",1,"d-inline-block","ml-3"],[3,"theme"]],template:function(t,e){1&t&&(f.Qc(0,Y,6,4,"ng-container",0),f.Qc(1,Z,2,2,"ng-container",0)),2&t&&(f.tc("ngIf",!e.isLoading),f.Ab(1),f.tc("ngIf",e.isLoading))},directives:[n.u,n.t,I.a,r.a],pipes:[R.d],styles:["[_nghost-%COMP%]{display:block}.letters-create-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:1.25rem 1rem}.letters-create-group[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:1rem}.letters-create-group__button[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;display:-webkit-box;display:flex;padding:0;text-align:left;width:100%;-webkit-box-align:baseline;align-items:baseline;-webkit-box-pack:justify;justify-content:space-between;color:#1a1c1f;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letters-create-group__button[_ngcontent-%COMP%]:hover{color:#ef5630}.letters-create-group__button[_ngcontent-%COMP%] + .letters-create-group__button[_ngcontent-%COMP%]{margin-top:1rem}"]}),t})(),q=(()=>{class t{constructor(){this.closed=new f.n,this.LETTER_TOPIC_TYPE=u}mapTranslate(t){return`LETTERS.CREATE_CONTENT.${t}`}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-create-content"]],outputs:{closed:"closed"},decls:9,vars:5,consts:[[1,"letters-create-content"],[1,"letters-create-content__header"],[1,"m-0"],["inlineSVG","./assets/icons/letters/close.svg",1,"letters-create-content__close",3,"click"],[1,"letters-create-content__body"],[3,"topicType"],[1,"mt-3",3,"topicType"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Wb(2,"h5",2),f.Sc(3),f.nc(4,"translate"),f.Vb(),f.Wb(5,"button",3),f.ic("click",(function(t){return e.onClose()})),f.Vb(),f.Vb(),f.Wb(6,"div",4),f.Rb(7,"j-letters-create-group",5),f.Rb(8,"j-letters-create-group",6),f.Vb(),f.Vb()),2&t&&(f.Ab(3),f.Tc(f.oc(4,3,e.mapTranslate("TITLE"))),f.Ab(4),f.tc("topicType",e.LETTER_TOPIC_TYPE.CERTIFICATE),f.Ab(1),f.tc("topicType",e.LETTER_TOPIC_TYPE.APPLICATION))},directives:[I.a,J],pipes:[R.d],styles:["[_nghost-%COMP%]{margin:-1rem;display:block}.letters-create-content__close[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letters-create-content__close[_ngcontent-%COMP%]:hover{color:#ef5630}.letters-create-content__header[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.letters-create-content__body[_ngcontent-%COMP%]{padding:1.5rem}"]}),t})();function tt(t,e){if(1&t){const t=f.Xb();f.Wb(0,"j-letters-details-content",5),f.ic("closed",(function(e){return f.Hc(t),f.mc().hideAside()})),f.Vb()}if(2&t){const t=f.mc();f.tc("letter",t.letter)}}function et(t,e){if(1&t){const t=f.Xb();f.Wb(0,"j-letters-create-content",6),f.ic("closed",(function(e){return f.Hc(t),f.mc().hideAside()})),f.Vb()}}let it=(()=>{class t{constructor(t){this.document=t,this.isContentShown=!1,this.isDetailsShowing=!1,this.isCreateShowing=!1,this.closed=new f.n}ngOnDestroy(){this.document.body.classList.remove("overflow-hidden")}showDetails(t){this.isDetailsShowing=!0,this.isCreateShowing=!1,this.letter=t,this.showContent()}showCreate(){this.isCreateShowing=!0,this.isDetailsShowing=!1,this.showContent()}hideAside(){this.letter=null,this.isCreateShowing=!1,this.isDetailsShowing=!1,this.document.body.classList.remove("overflow-hidden"),this.isContentShown=!1,this.closed.emit()}showContent(){this.document.body.classList.add("overflow-hidden"),this.isContentShown=!0}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(n.e))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-aside"]],outputs:{closed:"closed"},decls:5,vars:4,consts:[[1,"f-page-wrapper","is-shown"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","is-shown","letters-aside"],[3,"letter","closed",4,"ngIf"],[3,"closed",4,"ngIf"],[3,"letter","closed"],[3,"closed"]],template:function(t,e){1&t&&(f.Wb(0,"section",0),f.Wb(1,"div",1),f.ic("click",(function(t){return e.hideAside()})),f.Vb(),f.Wb(2,"section",2),f.Qc(3,tt,1,1,"j-letters-details-content",3),f.Qc(4,et,1,0,"j-letters-create-content",4),f.Vb(),f.Vb()),2&t&&(f.tc("@wrapper",e.isContentShown?"shown":"hidden"),f.Ab(2),f.tc("@content",e.isContentShown?"shown":"hidden"),f.Ab(1),f.tc("ngIf",e.isDetailsShowing),f.Ab(1),f.tc("ngIf",e.isCreateShowing))},directives:[n.u,$,q],styles:[".letters-aside[_ngcontent-%COMP%]{padding:1rem;top:62px}@media(min-width:960px){.letters-aside[_ngcontent-%COMP%]{top:98px}}@media(min-width:1280px){.letters-aside[_ngcontent-%COMP%]{top:0}}"],data:{animation:[Object(p.n)("wrapper",[Object(p.k)("shown",Object(p.l)({transform:"scale(1)",visibility:"visible",opacity:"1"})),Object(p.k)("hidden",Object(p.l)({transform:"scale(0.9)",visibility:"hidden",opacity:"0"})),Object(p.m)("shown<=>hidden",Object(p.e)("250ms"))]),Object(p.n)("content",[Object(p.k)("shown",Object(p.l)({right:"0%"})),Object(p.k)("hidden",Object(p.l)({right:"-25%"})),Object(p.m)("shown<=>hidden",Object(p.e)("500ms ease-in-out"))])]}}),t})();var nt=i("quSY"),st=i("570E"),rt=i("S1F0"),ot=i("oKsb"),at=i("fvpk"),ct=i("itXk"),lt=i("lJxs"),dt=i("TwVa"),bt=i("VO+5"),ht=i("h7tf"),ut=i("9odQ"),gt=i("LFY/"),pt=i("M6pS");function ft(t,e){if(1&t&&(f.Ub(0),f.Wb(1,"form",5),f.Sb(2,6),f.Sb(3,6),f.Sb(4,6),f.Sb(5,6),f.Vb(),f.Tb()),2&t){const t=f.mc(),e=f.Ec(3),i=f.Ec(5),n=f.Ec(7),s=f.Ec(9);f.Ab(1),f.tc("formGroup",t.form),f.Ab(1),f.tc("ngTemplateOutlet",e),f.Ab(1),f.tc("ngTemplateOutlet",i),f.Ab(1),f.tc("ngTemplateOutlet",n),f.Ab(1),f.tc("ngTemplateOutlet",s)}}const mt=function(){return{height:"56px","background-color":"#ECEEF1"}},St=function(){return{height:"335px","background-color":"#ECEEF1"}},Tt=function(){return{"margin-bottom":"50px",width:"50%",height:"32px","background-color":"#ECEEF1"}};function vt(t,e){if(1&t&&(f.Wb(0,"div"),f.Rb(1,"ngx-skeleton-loader",7),f.Rb(2,"ngx-skeleton-loader",7),f.Rb(3,"ngx-skeleton-loader",7),f.Sb(4,6),f.Wb(5,"div",8),f.Rb(6,"ngx-skeleton-loader",7),f.Vb(),f.Vb()),2&t){f.mc();const t=f.Ec(7);f.Ab(1),f.tc("theme",f.xc(5,mt)),f.Ab(1),f.tc("theme",f.xc(6,St)),f.Ab(1),f.tc("theme",f.xc(7,Tt)),f.Ab(1),f.tc("ngTemplateOutlet",t),f.Ab(2),f.tc("theme",f.xc(8,mt))}}function yt(t,e){if(1&t&&(f.Wb(0,"span",14),f.Sc(1),f.Vb()),2&t){const t=e.$implicit;f.Ab(1),f.Uc(" ",t," ")}}function _t(t,e){if(1&t){const t=f.Xb();f.Wb(0,"div",9),f.Wb(1,"j-dropdown-input",10,11),f.ic("selected",(function(e){return f.Hc(t),f.mc().onTitleSelect(e)})),f.Qc(3,yt,2,1,"ng-template",null,12,f.Rc),f.Vb(),f.Vb(),f.Wb(5,"div",9),f.Rb(6,"j-input",13),f.nc(7,"async"),f.Vb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("options",t.topics)("hasError",t.f.title.invalid&&t.isSubmitted)("selectedItem",t.f.title.value)("label",t.mapTranslate("TITLE")),f.Ab(5),f.tc("label",t.mapTranslate("BODY"))("inputExtra",f.oc(7,11,t.bodyLengthMessage$))("formControl",t.f.body)("hasError",t.f.body.invalid&&t.isSubmitted)("errorText",t.mapBodyErrors())("maxLength",t.bodyMaxLength)("isClearable",!1)}}function Ot(t,e){if(1&t&&(f.Wb(0,"div",23),f.Sc(1),f.nc(2,"translate"),f.Vb()),2&t){const t=f.mc(2);f.Ab(1),f.Uc(" ",f.oc(2,1,t.mapTranslate("MAX_FILES_REACHED"))," ")}}const Et=function(t){return{acceptedFormats:t}};function wt(t,e){if(1&t){const t=f.Xb();f.Wb(0,"div",15),f.Wb(1,"div",16),f.Wb(2,"input",17),f.ic("change",(function(e){return f.Hc(t),f.mc().onAddFile(e)})),f.Vb(),f.Wb(3,"label",18),f.Rb(4,"span",19),f.Wb(5,"span"),f.Sc(6),f.nc(7,"translate"),f.Vb(),f.Vb(),f.Wb(8,"span",20),f.Sc(9),f.nc(10,"translate"),f.Vb(),f.Vb(),f.Wb(11,"j-uploading-files",21),f.ic("updated",(function(e){return f.Hc(t),f.mc().onUploadingFilesUpdate(e)})),f.Vb(),f.Qc(12,Ot,3,3,"div",22),f.Vb()}if(2&t){const t=f.mc();f.Ab(2),f.tc("formControl",t.f.uploadModel)("accept",t.acceptedFormats),f.Ab(4),f.Uc(" ",f.oc(7,9,t.mapTranslate("ADD_FILE"))," "),f.Ab(3),f.Uc(" ",f.pc(10,11,t.mapTranslate("ADD_FILE_DESCRIPTION"),f.yc(14,Et,t.acceptedFormats))," "),f.Ab(2),f.tc("isLoading",t.isLoading)("acceptedFormats",t.acceptedFormats)("uploadingFiles",t.uploadingFiles)("maxSize",t.maxSize),f.Ab(1),f.tc("ngIf",(null==t.uploadingFiles?null:t.uploadingFiles.length)>10)}}function At(t,e){if(1&t&&(f.Wb(0,"div",24),f.Rb(1,"span",25),f.Wb(2,"span"),f.Sc(3),f.nc(4,"translate"),f.Vb(),f.Vb()),2&t){const t=f.mc();f.Ab(3),f.Uc(" ",f.oc(4,1,t.mapTranslate("INFO"))," ")}}function xt(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"button",27),f.ic("click",(function(e){return f.Hc(t),f.mc(2).edit()})),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Tb()}if(2&t){const t=f.mc(2);f.Ab(1),f.tc("jLoadingInverted",!0)("disabled",t.isSubmitting||(null==t.uploadingFiles?null:t.uploadingFiles.length)>10)("jLoading",t.isSubmitting),f.Ab(1),f.Uc(" ",f.oc(3,4,t.mapTranslate("SAVE_EDITING"))," ")}}function It(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"button",28),f.ic("click",(function(e){return f.Hc(t),f.mc(2).saveToDraft()})),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Tb()}if(2&t){const t=f.mc(2);f.Ab(1),f.tc("disabled",t.isSubmitting||(null==t.uploadingFiles?null:t.uploadingFiles.length)>10)("jLoading",t.isSubmitting)("jLoadingInverted",!0),f.Ab(1),f.Uc(" ",f.oc(3,4,t.mapTranslate("SAVE_TO_DRAFT"))," ")}}function Lt(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"button",29),f.ic("click",(function(e){return f.Hc(t),f.mc(2).createAndSign()})),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Tb()}if(2&t){const t=f.mc(2);f.Ab(1),f.tc("disabled",t.isSubmitting||(null==t.uploadingFiles?null:t.uploadingFiles.length)>10)("jLoading",t.isSubmitting),f.Ab(1),f.Uc(" ",f.oc(3,3,t.mapTranslate(t.createAndSignLabel))," ")}}function Ct(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"button",29),f.ic("click",(function(e){return f.Hc(t),f.mc(2).createAndSendForSign()})),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Tb()}if(2&t){const t=f.mc(2);f.Ab(1),f.tc("disabled",t.isSubmitting||(null==t.uploadingFiles?null:t.uploadingFiles.length)>10)("jLoading",t.isSubmitting),f.Ab(1),f.Uc(" ",f.oc(3,3,t.mapTranslate("CREATE_AND_SEND_FOR_SIGN"))," ")}}function Ft(t,e){if(1&t&&(f.Wb(0,"div",26),f.Qc(1,xt,4,6,"ng-container",0),f.Qc(2,It,4,6,"ng-container",0),f.Qc(3,Lt,4,5,"ng-container",0),f.Qc(4,Ct,4,5,"ng-container",0),f.Vb()),2&t){const t=f.mc();f.Ab(1),f.tc("ngIf",t.isEditing),f.Ab(1),f.tc("ngIf",!t.isEditing),f.Ab(1),f.tc("ngIf",t.canSendAndSign),f.Ab(1),f.tc("ngIf",t.canSendOnly)}}var Dt=function(t){return t.SAVED_TO_DRAFT="NOTIFICATIONS.SAVED_TO_DRAFT",t.SENT_FOR_SIGN="NOTIFICATIONS.SENT_FOR_SIGN",t.SAVED_EDITING="NOTIFICATIONS.SAVED_EDITING",t.SIGNED="NOTIFICATIONS.SIGNED",t.SAVED_TO_DRAFT_ERROR="NOTIFICATIONS.SAVED_TO_DRAFT_ERROR",t.SENT_FOR_SIGN_ERROR="NOTIFICATIONS.SENT_FOR_SIGN_ERROR",t.SAVED_EDITING_ERROR="NOTIFICATIONS.SAVED_EDITING_ERROR",t.SIGNED_ERROR="NOTIFICATIONS.SIGNED_ERROR",t}({});let Rt=(()=>{class t{constructor(t,e,i,n,s,r,o){this.route=t,this.router=e,this.lettersService=i,this.companyService=n,this.filesService=s,this.notifierService=r,this.translateService=o,this.acceptedFormats=".doc, .docx, .pdf, .jpg, .jpeg, .png, .xls, .xlsx",this.maxSize=5e6,this.isSubmitted=!1,this.isLoading=!1,this.isSubmitting=!1,this.isEditing=!1,this.uploadingFiles=[],this.bodyMaxLength=1e3,this.bodyLengthMessage$=new T.a(`0/${this.bodyMaxLength}`),this.subscription=new nt.a;const a=Object(ct.a)([this.route.paramMap.pipe(Object(lt.a)(()=>window.history.state)),this.route.params]).subscribe(t=>{const[e,i]=t;e.letter?(this.isEditing=!0,this.loadEditLetterByBody(e.letter,e.topics,e.files)):i.id?(this.isEditing=!0,this.loadEditLetterById(i.id)):this.loadNewLetter(e.title)});this.subscription.add(a),this.createAndSignLabel=this.companyService.isSecondaryAuthority()?"SIGN":"CREATE_AND_SIGN"}ngOnDestroy(){this.lettersService.clearFiles(),this.subscription.unsubscribe()}get f(){return this.form.controls}get canSendAndSign(){return this.companyService.isSecondaryAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()}get canSendOnly(){return this.companyService.isNoSignAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isMultipleSignScheme()}loadEditLetter(t){this.originalLetter=t,setTimeout(()=>{var e;const{id:i,title:n,body:s}=t;this.form.setValue({id:i,title:n,body:s,uploadModel:null}),(null===(e=t.files)||void 0===e?void 0:e.length)>0&&(this.uploadingFiles=t.files.map(t=>({isLoading:!1,file:t})))},0)}loadEditLetterByBody(t,e,i=[]){return Object(m.a)(this,void 0,void 0,(function*(){this.uploadingFiles=i,this.topics=e,this.loadEditLetter(t),this.initForm(t)}))}loadEditLetterById(t){return Object(m.a)(this,void 0,void 0,(function*(){this.isLoading=!0;try{const e=yield this.lettersService.getById(t);yield this.loadTopics(),this.loadEditLetter(e),this.initForm(e)}catch(e){}finally{this.isLoading=!1}}))}loadNewLetter(t=""){return Object(m.a)(this,void 0,void 0,(function*(){this.isLoading=!0;try{yield this.loadTopics(),this.initForm({title:t})}catch(e){}finally{this.isLoading=!1}}))}loadTopics(){return Object(m.a)(this,void 0,void 0,(function*(){this.topics=yield this.lettersService.getTopicValues()}))}initForm(t=null){const{id:e,title:i,body:n}={id:t.id||null,title:t.title||"",body:t.body||""};this.form=new s.k({id:new s.h(e),title:new s.h(i,s.H.required),body:new s.h(n,[s.H.required,s.H.maxLength(this.bodyMaxLength)]),uploadModel:new s.h("")});const r=this.form.valueChanges.subscribe(t=>{this.isSubmitted=!1}),o=this.f.body.valueChanges.subscribe(t=>{this.bodyLengthMessage$.next(`${t.length}/${this.bodyMaxLength}`)});this.subscription.add(o),this.subscription.add(r)}prepareCreate(){return this.isSubmitted=!0,!this.form.invalid&&(this.filesService.hasLoadingFiles(this.uploadingFiles)?(this.notifierService.notify("default",this.translateService.instant("FILES.PLEASE_WAIT")),!1):(this.filesService.hasErroredFiles(this.uploadingFiles)&&this.notifierService.notify("default",this.translateService.instant("FILES.HAS_ERRORED_FILES")),!0))}saveToDraft(){return Object(m.a)(this,void 0,void 0,(function*(){if(!this.isSubmitting){this.isSubmitting=!0;try{const t=yield this.createDraft();this.showNotification(Dt.SAVED_TO_DRAFT),this.router.navigate(["/letters/drafts"],{state:{highlighted:t.id}}),this.isSubmitting=!1}catch(t){this.showNotification(Dt.SAVED_TO_DRAFT_ERROR,"error"),this.isSubmitting=!1}}}))}createAndSendForSign(){return Object(m.a)(this,void 0,void 0,(function*(){if(!this.isSubmitting&&this.prepareCreate()){this.isSubmitting=!0;try{const t=yield this.lettersService.create(Object.assign(Object.assign({},this.mapLetterBody()),{statusCode:dt.f.ON_SIGN}));this.showNotification(Dt.SENT_FOR_SIGN),this.router.navigate(["/letters/outbox/on-sign"],{state:{highlighted:t.id}})}catch(t){this.showNotification(Dt.SENT_FOR_SIGN_ERROR,"error"),this.isSubmitting=!1}}}))}createDraftAndNavigate(){return Object(m.a)(this,void 0,void 0,(function*(){try{this.originalLetter=yield this.createDraft(),this.router.navigate(["edit",this.originalLetter.id],{relativeTo:this.route.parent,state:{letter:this.originalLetter,topics:this.topics,files:this.uploadingFiles}})}catch(t){}}))}createAndSign(){return Object(m.a)(this,void 0,void 0,(function*(){if(!this.isSubmitting&&this.prepareCreate()){this.isSubmitting=!0;try{yield this.createDraftAndNavigate(),yield this.lettersService.sign(this.originalLetter.id),this.showNotification(Dt.SIGNED),this.companyService.isSecondaryAuthority()?this.router.navigate(["/letters/outbox/on-sign"],{state:{highlighted:this.originalLetter.id}}):this.router.navigate(["/letters/outbox/sent"],{state:{highlighted:this.originalLetter.id}})}catch(t){this.showNotification(Dt.SIGNED_ERROR,"error"),this.isSubmitting=!1}}}))}edit(){return Object(m.a)(this,void 0,void 0,(function*(){this.isSubmitting=!0;try{yield this.lettersService.edit(Object.assign(Object.assign({},this.originalLetter),this.mapLetterBody())),this.showNotification(Dt.SAVED_EDITING),this.router.navigate(["/letters/drafts"],{state:{highlighted:this.originalLetter.id}})}catch(t){this.showNotification(Dt.SAVED_EDITING_ERROR,"error"),this.isSubmitting=!1}}))}createDraft(){return this.lettersService.create(Object.assign(Object.assign({},this.mapLetterBody()),{statusCode:dt.f.DRAFT}))}mapTranslate(t){return`LETTERS.CREATE.${t}`}mapBodyErrors(){return this.f.body.errors?this.f.body.errors.maxlength?"ERRORS.MAX_LENGTH":void 0:null}onTitleSelect(t){this.f.title.setValue(t)}onAddFile(t){var e,i;(null===(i=null===(e=t)||void 0===e?void 0:e.target)||void 0===i?void 0:i.files)&&(this.lettersService.onFileDrop(t.target.files),this.f.uploadModel.setValue(null))}onUploadingFilesUpdate(t){this.uploadingFiles=t}showNotification(t,e="default"){const i=this.mapTranslate(t),n=this.translateService.instant(i);this.notifierService.notify(e,n)}mapLetterBody(){return Object.assign(Object.assign({},this.form.getRawValue()),{fileIds:this.uploadingFiles.filter(t=>{var e;return!t.error&&(null===(e=t.file)||void 0===e?void 0:e.id)}).map(t=>t.file.id)})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(d.a),f.Qb(d.c),f.Qb(x),f.Qb(O.a),f.Qb(E.b),f.Qb(bt.c),f.Qb(R.e))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-create-form"]],decls:10,vars:2,consts:[[4,"ngIf"],["formTemplate",""],["filesTemplate",""],["infoTemplate",""],["submitTemplate",""],[1,"letters-create",3,"formGroup"],[3,"ngTemplateOutlet"],[3,"theme"],[1,"form-footer","form-footer--bordered"],[1,"form-group"],[3,"options","hasError","selectedItem","label","selected"],["titleDropdown",""],["optionTemplate",""],["type","textarea","inputClass","j-input--large-textarea",3,"label","inputExtra","formControl","hasError","errorText","maxLength","isClearable"],[1,"py-2"],[1,"letters-create__files"],[1,"j-input-file"],["id","fileUpload","type","file","multiple","true",3,"formControl","accept","change"],["for","fileUpload",1,"link-blue"],["inlineSVG","./assets/icons/letters/attachment.svg",1,"mr-2"],[1,"text-muted"],[3,"isLoading","acceptedFormats","uploadingFiles","maxSize","updated"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-footer","letters-create__info","form-footer--bordered","text-muted"],["inlineSVG","./assets/icons/letters/info.svg",1,"mr-3"],[1,"form-footer","form-footer--bordered","letter-create__submit"],["type","button",1,"btn","btn-link",3,"jLoadingInverted","disabled","jLoading","click"],["type","button",1,"btn","btn-link",3,"disabled","jLoading","jLoadingInverted","click"],["type","submit",1,"btn","btn-primary",3,"disabled","jLoading","click"]],template:function(t,e){1&t&&(f.Qc(0,ft,6,5,"ng-container",0),f.Qc(1,vt,7,9,"div",0),f.Qc(2,_t,8,13,"ng-template",null,1,f.Rc),f.Qc(4,wt,13,16,"ng-template",null,2,f.Rc),f.Qc(6,At,5,3,"ng-template",null,3,f.Rc),f.Qc(8,Ft,5,4,"ng-template",null,4,f.Rc)),2&t&&(f.tc("ngIf",e.form&&!e.isLoading),f.Ab(1),f.tc("ngIf",e.isLoading))},directives:[n.u,s.J,s.u,s.l,n.B,r.a,ht.a,ut.b,s.t,s.i,s.c,I.a,gt.a,pt.a],pipes:[n.b,R.d],styles:[".letter-create__submit[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:reverse;flex-direction:column-reverse}.letter-create__submit[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0}@media(min-width:1280px){.letter-create__submit[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.letter-create__submit[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:0;margin-left:1rem}}.letter-create__submit[_ngcontent-%COMP%]   ngx-skeleton-loader[_ngcontent-%COMP%]{width:50%}.letters-create__info[_ngcontent-%COMP%]{-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;padding:1.5rem 0}"]}),t})(),jt=(()=>{class t{constructor(t,e,i){this.route=t,this.router=e,this.lettersService=i,this.subscription=new nt.a,this.lettersService.lastLettersListPath$.subscribe(t=>{this.lastLetterListPath=t})}ngOnInit(){const t=this.route.params.subscribe(t=>{this.title=t.id?"LETTERS.CREATE.EDIT":"LETTERS.CREATE.TITLE"});this.subscription.add(t)}ngOnDestroy(){this.lettersService.clearFiles(),this.subscription.unsubscribe()}onFileDropped(t){this.lettersService.onFileDrop(t)}onClose(){this.lettersService.clearFiles(),this.router.navigate(["/letters",this.lastLetterListPath])}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(d.a),f.Qb(d.c),f.Qb(x))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-create"]],decls:9,vars:3,consts:[["jDnd","",1,"dnd-wrap",3,"fileDropped"],["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8","headerClassList","bg-white",3,"closed"],[1,"account-header"],[1,"f-page-title"]],template:function(t,e){1&t&&(f.Wb(0,"section",0),f.ic("fileDropped",(function(t){return e.onFileDropped(t)})),f.Wb(1,"f-page",1),f.ic("closed",(function(t){return e.onClose()})),f.Wb(2,"f-page-header"),f.Wb(3,"section",2),f.Wb(4,"h1",3),f.Sc(5),f.nc(6,"translate"),f.Vb(),f.Vb(),f.Vb(),f.Wb(7,"f-page-body"),f.Rb(8,"j-letters-create-form"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Ab(5),f.Uc("",f.oc(6,1,e.title)," "))},directives:[st.a,rt.a,ot.a,at.a,Rt],pipes:[R.d],styles:[".dnd-wrap[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.dnd-wrap.fileover[_ngcontent-%COMP%]{opacity:.5}"]}),t})();var Pt=i("bsP8"),Nt=i("paXB"),kt=i("7/bn"),Vt=i("oMXN"),Mt=i("EiG8"),Wt=i("zdqJ");function Qt(t,e){if(1&t&&(f.Wb(0,"span",10),f.Sc(1),f.Vb()),2&t){const t=f.mc(2).$implicit;f.Db(t.badgeClass),f.Ab(1),f.Tc(t.badge)}}function Bt(t,e){1&t&&(f.Wb(0,"span",11),f.Rb(1,"span",12),f.Vb()),2&t&&(f.Ab(1),f.tc("jLoading",!0))}function Ut(t,e){if(1&t&&(f.Ub(0),f.Qc(1,Qt,2,3,"span",8),f.Qc(2,Bt,2,1,"span",9),f.Tb()),2&t){const t=f.mc().$implicit;f.Ab(1),f.tc("ngIf",0!=t.badge),f.Ab(1),f.tc("ngIf",null==t.badge)}}function Gt(t,e){if(1&t&&(f.Wb(0,"a",6),f.Wb(1,"span"),f.Sc(2),f.nc(3,"translate"),f.Vb(),f.Qc(4,Ut,3,2,"ng-container",7),f.Vb()),2&t){const t=e.$implicit,i=f.mc();f.tc("routerLink",t.url),f.Ab(2),f.Tc(f.oc(3,3,t.label)),f.Ab(2),f.tc("ngIf",i.isBadgesShown(t.id))}}let Ht=(()=>{class t{constructor(t,e){this.navService=t,this.route=e,this.letterTypes=[{id:"outbox",label:"LETTERS.TYPES.OUTBOX",url:"/letters/outbox",badge:null,badgeClass:"badge-primary"},{id:"inbox",label:"LETTERS.TYPES.INBOX",url:"/letters/inbox",badge:null,badgeClass:"badge-primary"},{id:"draft",label:"LETTERS.TYPES.DRAFT",url:"/letters/drafts",badge:null,badgeClass:"badge-light"}],this.createShown=new f.n,this.subscription=new nt.a,this.route.data.subscribe(t=>{this.isOutboxRoute=t.isOutbox||!1}),this.subscription.add(this.navService.getLetterBadges().subscribe(t=>{this.setBadge("outbox",t.onSignForMe),this.setBadge("inbox",t.unread),this.setBadge("draft",t.draft)}))}isBadgesShown(t){switch(t){case"inbox":case"draft":return!0;case"outbox":return!this.isOutboxRoute}}ngOnDestroy(){this.subscription.unsubscribe()}setBadge(t,e){this.letterTypes.find(e=>e.id===t).badge=e}onCreateShown(){this.createShown.emit()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(Pt.a),f.Qb(d.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-nav"]],outputs:{createShown:"createShown"},decls:8,vars:4,consts:[[1,"j-tabs"],[1,"j-tabs__list"],["class","j-tabs__item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["jTour","LETTERS.NEW","jTourPosition","bottom",1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","./assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],["routerLinkActive","active",1,"j-tabs__item",3,"routerLink"],[4,"ngIf"],["class","j-tabs__badge badge",3,"class",4,"ngIf"],["class","j-tabs__badge badge badge-light",4,"ngIf"],[1,"j-tabs__badge","badge"],[1,"j-tabs__badge","badge","badge-light"],[3,"jLoading"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"nav",1),f.Qc(2,Gt,5,5,"a",2),f.Wb(3,"button",3),f.ic("click",(function(t){return e.onCreateShown()})),f.Rb(4,"span",4),f.Wb(5,"span",5),f.Sc(6),f.nc(7,"translate"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Ab(2),f.tc("ngForOf",e.letterTypes),f.Ab(4),f.Tc(f.oc(7,2,"LETTERS.ADD_NEW")))},directives:[n.t,Wt.a,I.a,d.f,d.e,n.u,pt.a],pipes:[R.d],styles:[""]}),t})();var Xt=i("I+WJ"),$t=i("LRne"),zt=i("hJI6"),Yt=i("vZvt");function Kt(t,e){if(1&t&&(f.Wb(0,"div",9),f.Sc(1),f.nc(2,"translate"),f.Vb()),2&t){const t=f.mc(2);f.Ab(1),f.Tc(f.oc(2,1,t.mapTranslate("FOR_SIGN")))}}const Zt=function(t){return{$implicit:t}};function Jt(t,e){if(1&t&&(f.Wb(0,"div",5),f.Wb(1,"div",6),f.Sb(2,7),f.Qc(3,Kt,3,3,"div",8),f.Vb(),f.Sb(4,7),f.Vb()),2&t){const t=e.$implicit,i=f.mc(),n=f.Ec(6),s=f.Ec(8);f.Ab(2),f.tc("ngTemplateOutlet",n)("ngTemplateOutletContext",f.yc(5,Zt,t)),f.Ab(1),f.tc("ngIf",i.isSignable),f.Ab(1),f.tc("ngTemplateOutlet",s)("ngTemplateOutletContext",f.yc(7,Zt,t))}}function qt(t,e){if(1&t&&(f.Wb(0,"div",5),f.Sb(1,7),f.Sb(2,7),f.Vb()),2&t){const t=e.$implicit;f.mc();const i=f.Ec(6),n=f.Ec(8);f.Ab(1),f.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",f.yc(4,Zt,t)),f.Ab(1),f.tc("ngTemplateOutlet",n)("ngTemplateOutletContext",f.yc(6,Zt,t))}}function te(t,e){if(1&t&&(f.Wb(0,"div",10),f.Sc(1),f.nc(2,"async"),f.Vb()),2&t){const t=e.$implicit,i=f.mc();f.Ab(1),f.Uc(" ",f.oc(2,1,i.mapDateText(t))," ")}}function ee(t,e){if(1&t&&f.Rb(0,"div",15),2&t){const t=f.mc().$implicit;f.tc("jClamp",1)("innerText",null==t?null:t.body)}}function ie(t,e){if(1&t&&f.Rb(0,"div",16),2&t){const t=f.mc().$implicit;f.tc("jClamp",1)("innerText",null==t?null:t.body)}}function ne(t,e){if(1&t&&(f.Wb(0,"article",11),f.Rb(1,"strong",12),f.Qc(2,ee,1,2,"div",13),f.Qc(3,ie,1,2,"div",14),f.Vb()),2&t){const t=e.$implicit;f.Ab(1),f.tc("jClamp",1)("innerText",null==t?null:t.title),f.Ab(1),f.tc("ngIf",!t.hasTour),f.Ab(1),f.tc("ngIf",t.hasTour)}}let se=(()=>{class t{constructor(t,e,i,n,s,r){this.lettersService=t,this.router=e,this.route=i,this.navService=n,this.companyService=s,this.translateService=r,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.detailsShown=new f.n,this.scrolled=new f.n,this.translatePrefix="LETTERS.LIST",this.urlPath="letters",this.modalPartialTitleFn=this.mapModalPartialTitle.bind(this),this.highlightedFn=this.shouldBeHighlighted.bind(this),this.highlightedTemporarilyFn=this.shouldBeHighlightedTemporarily.bind(this)}onClick(t){t.read=!0,t.statusCode===dt.f.DRAFT?this.router.navigate(["edit",t.id],{relativeTo:this.route.parent}):this.detailsShown.emit(t)}onScroll(){this.scrolled.emit()}shouldBeHighlighted(t){return!t.read}shouldBeHighlightedTemporarily(t){return this.highlighted===t.id}mapModalPartialTitle(t){return`\u2116 ${t.letterNumber}:`}onClear(){this.navService.retrieveLetterBadges()}onSign(){(this.companyService.isSingleSignScheme()||this.companyService.isMultipleSignScheme()&&this.companyService.isPrimaryAuthority())&&this.router.navigate(["sent"],{relativeTo:this.route.parent})}mapTranslate(t){return`${this.translatePrefix}.${t}`}mapDateText(t){const e=this.lettersService.mapLetterDate(t);return"string"==typeof e?Object($t.a)(e):this.translateService.stream(e.key,e.params)}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x),f.Qb(d.c),f.Qb(d.a),f.Qb(Pt.a),f.Qb(O.a),f.Qb(R.e))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-group"]],inputs:{title:"title",list:"list",highlighted:"highlighted",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},outputs:{detailsShown:"detailsShown",scrolled:"scrolled"},decls:9,vars:11,consts:[[3,"list","title","urlPath","translatePrefix","isDeletable","isSelectable","isSignable","isHoverable","partialTitleFn","highlightedFn","highlightedTemporarilyFn","scrolled","clicked","cleared","signed"],["selectableTemplate",""],["defaultTemplate",""],["dateTemplate",""],["contentTemplate",""],[1,"p3","letters-item"],[1,"letters-item__status"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-blue",4,"ngIf"],[1,"text-blue"],[1,"letters-item__date","text-muted"],[1,"letters-item__content","p3"],[1,"letters-item__title","text-dark",3,"jClamp","innerText"],["class","text-muted letters-item__body",3,"jClamp","innerText",4,"ngIf"],["class","text-muted letters-item__body","jTour","LETTERS.DETAILS","jTourPosition","bottom",3,"jClamp","innerText",4,"ngIf"],[1,"text-muted","letters-item__body",3,"jClamp","innerText"],["jTour","LETTERS.DETAILS","jTourPosition","bottom",1,"text-muted","letters-item__body",3,"jClamp","innerText"]],template:function(t,e){1&t&&(f.Wb(0,"j-list",0),f.ic("scrolled",(function(t){return e.onScroll()}))("clicked",(function(t){return e.onClick(t)}))("cleared",(function(t){return e.onClear()}))("signed",(function(t){return e.onSign()})),f.Qc(1,Jt,5,9,"ng-template",null,1,f.Rc),f.Qc(3,qt,3,8,"ng-template",null,2,f.Rc),f.Vb(),f.Qc(5,te,3,3,"ng-template",null,3,f.Rc),f.Qc(7,ne,4,4,"ng-template",null,4,f.Rc)),2&t&&f.tc("list",e.list)("title",e.title)("urlPath",e.urlPath)("translatePrefix",e.translatePrefix)("isDeletable",e.isDeletable)("isSelectable",e.isSelectable)("isSignable",e.isSignable)("isHoverable",!0)("partialTitleFn",e.modalPartialTitleFn)("highlightedFn",e.highlightedFn)("highlightedTemporarilyFn",e.highlightedTemporarilyFn)},directives:[zt.a,n.B,n.u,Yt.a,Wt.a],pipes:[R.d,n.b],styles:["[_nghost-%COMP%]{display:block;background:#fff}.letters-item[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:148px minmax(0,1fr)}"]}),t})();var re=i("4cI0"),oe=i("lABO");const ae=function(){return{width:"25%",height:"33px","background-color":"#ECEEF1"}};function ce(t,e){1&t&&f.Rb(0,"ngx-skeleton-loader",3),2&t&&f.tc("theme",f.xc(1,ae))}const le=function(){return{width:"13%","margin-right":"2%",height:"42px","background-color":"#ECEEF1"}},de=function(){return{width:"80%",height:"42px","background-color":"#ECEEF1"}};function be(t,e){1&t&&(f.Wb(0,"div"),f.Rb(1,"ngx-skeleton-loader",3),f.Rb(2,"ngx-skeleton-loader",3),f.Vb()),2&t&&(f.Ab(1),f.tc("theme",f.xc(2,le)),f.Ab(1),f.tc("theme",f.xc(3,de)))}let he=(()=>{class t{constructor(){this.hasTitle=!1}get loadingCount(){return Array(5)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-loading"]],inputs:{hasTitle:"hasTitle"},decls:3,vars:2,consts:[[1,"bg-white","p-3"],[3,"theme",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"theme"]],template:function(t,e){1&t&&(f.Wb(0,"section",0),f.Qc(1,ce,1,2,"ngx-skeleton-loader",1),f.Qc(2,be,3,4,"div",2),f.Vb()),2&t&&(f.Ab(1),f.tc("ngIf",e.hasTitle),f.Ab(1),f.tc("ngForOf",e.loadingCount))},directives:[n.u,n.t,r.a],styles:[""]}),t})();function ue(t,e){1&t&&f.Rb(0,"j-empty-placeholder",5)}function ge(t,e){if(1&t){const t=f.Xb();f.Wb(0,"j-error-placeholder",6),f.ic("retried",(function(e){return f.Hc(t),f.mc(2).onRetry()})),f.Vb()}}function pe(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-group",1),f.ic("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Wb(2,"j-letters-group",2),f.ic("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Qc(3,ue,1,0,"j-empty-placeholder",3),f.Qc(4,ge,1,0,"j-error-placeholder",4),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("list",t.onSignForMeList)("highlighted",t.highlighted)("isSignable",!0)("isSelectable",!0)("isDeletable",!0),f.Ab(1),f.tc("list",t.onSignForOthersList)("highlighted",t.highlighted)("title",t.mapTranslate("OTHERS_FOR_SIGN"))("isDeletable",!0),f.Ab(1),f.tc("ngIf",0===t.onSignForMeList.length&&0===t.onSignForOthersList.length&&!t.errorText),f.Ab(1),f.tc("ngIf",t.errorText)}}function fe(t,e){1&t&&(f.Ub(0),f.Rb(1,"j-letters-loading"),f.Rb(2,"j-letters-loading",7),f.Tb()),2&t&&(f.Ab(2),f.tc("hasTitle",!0))}let me=(()=>{class t{constructor(t,e,i){this.lettersService=t,this.navService=e,this.companyService=i,this.retrieved=new f.n,this.detailsShown=new f.n,this.isLoading=!0,this.onSignForMeList=[],this.onSignForOthersList=[],this.lettersSearch={incoming:!1,statusCode:[dt.f.ON_SIGN],pageSize:1e5},this.errorText=null,this.subscription=new nt.a,this.subscription.add(this.companyService.refresh$.subscribe(t=>{const[e,i,n]=t;n&&this.retrieveLetters()}))}ngOnDestroy(){this.subscription.unsubscribe()}mapTranslate(t){return`LETTERS.LIST.${t}`}onDetailsShown(t){this.detailsShown.emit(t)}onRetry(){this.retrieveLetters()}retrieveLetters(){return Object(m.a)(this,void 0,void 0,(function*(){this.errorText=null,this.navService.retrieveLetterBadges();try{yield Promise.all([this.retrieveOnSignForMe(),this.retrieveOnSignForOthers()]),this.onSignForMeList.length>0?this.onSignForMeList[0].hasTour=!0:this.onSignForOthersList.length>0&&(this.onSignForOthersList[0].hasTour=!0),this.retrieved.emit({onSignForMe:this.onSignForMeList.length,onSignForOthers:this.onSignForOthersList.length})}catch(t){this.errorText=t.description||t}finally{this.isLoading=!1}}))}retrieveOnSignForMe(){return Object(m.a)(this,void 0,void 0,(function*(){const t=yield this.lettersService.getList(Object.assign(Object.assign({},this.lettersSearch),{onSignForMe:!0}));this.onSignForMeList=t.items}))}retrieveOnSignForOthers(){return Object(m.a)(this,void 0,void 0,(function*(){const t=yield this.lettersService.getList(Object.assign(Object.assign({},this.lettersSearch),{onSignForOthers:!0}));this.onSignForOthersList=t.items}))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x),f.Qb(Pt.a),f.Qb(O.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-on-sign"]],inputs:{highlighted:"highlighted"},outputs:{retrieved:"retrieved",detailsShown:"detailsShown"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"list","highlighted","isSignable","isSelectable","isDeletable","detailsShown"],[1,"d-block","pt-3",3,"list","highlighted","title","isDeletable","detailsShown"],["class","bg-white","label","LETTERS.EMPTY.FOR_SIGN",4,"ngIf"],["class","bg-white",3,"retried",4,"ngIf"],["label","LETTERS.EMPTY.FOR_SIGN",1,"bg-white"],[1,"bg-white",3,"retried"],[3,"hasTitle"]],template:function(t,e){1&t&&(f.Qc(0,pe,5,11,"ng-container",0),f.Qc(1,fe,3,1,"ng-container",0)),2&t&&(f.tc("ngIf",!e.isLoading),f.Ab(1),f.tc("ngIf",e.isLoading))},directives:[n.u,se,re.a,oe.a,he],styles:[""]}),t})();var Se=i("y5b2"),Te=i("jZlK"),ve=i("u+5l"),ye=i("1kSV");function _e(t,e){if(1&t){const t=f.Xb();f.Wb(0,"button",5),f.ic("click",(function(e){return f.Hc(t),f.mc(2).onClearPeriod()})),f.nc(1,"translate"),f.Vb()}2&t&&f.tc("ngbTooltip",f.oc(1,1,"SHARED.CLEAR"))}function Oe(t,e){if(1&t){const t=f.Xb();f.Wb(0,"section",2),f.Wb(1,"j-filter-period-dropdown",3),f.ic("submitted",(function(e){return f.Hc(t),f.mc().onFilter(e)})),f.Vb(),f.Qc(2,_e,2,3,"button",4),f.Vb()}if(2&t){const t=f.mc();f.Ab(2),f.tc("ngIf",t.currentDates)}}function Ee(t,e){if(1&t&&(f.Wb(0,"div",10),f.Sc(1),f.nc(2,"translate"),f.Vb()),2&t){const t=f.mc(2);f.Ab(1),f.Uc(" ",f.oc(2,1,t.mapTranslate("ALL_LOADED"))," ")}}function we(t,e){if(1&t&&f.Rb(0,"j-empty-placeholder",11),2&t){const t=f.mc(2);f.tc("label",t.currentDates?t.emptyNotFound:t.emptyLabel)}}function Ae(t,e){if(1&t){const t=f.Xb();f.Wb(0,"j-error-placeholder",12),f.ic("retried",(function(e){return f.Hc(t),f.mc(2).onRetry()})),f.Vb()}}function xe(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-group",6),f.ic("scrolled",(function(e){return f.Hc(t),f.mc().onScroll()}))("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Qc(2,Ee,3,3,"div",7),f.Qc(3,we,1,1,"j-empty-placeholder",8),f.Qc(4,Ae,1,0,"j-error-placeholder",9),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("list",t.list)("isSignable",t.isSignable)("isSelectable",t.isSelectable)("highlighted",t.highlighted)("isDeletable",t.isDeletable),f.Ab(1),f.tc("ngIf",!t.hasMorePages&&t.list.length>0),f.Ab(1),f.tc("ngIf",0===t.list.length&&!t.errorText),f.Ab(1),f.tc("ngIf",t.errorText)}}function Ie(t,e){1&t&&(f.Ub(0),f.Rb(1,"j-letters-loading"),f.Tb())}let Le=(()=>{class t{constructor(t,e,i,n){this.lettersService=t,this.companyService=e,this.navService=i,this.filterService=n,this.isLoading=!0,this.hasMorePages=!0,this.list=[],this.emptyNotFound="LETTERS.EMPTY.NOT_FOUND",this.emptyLabel="LETTERS.EMPTY.DEFAULT",this.isSelectable=!1,this.isSignable=!1,this.isDeletable=!1,this.hasDateFilter=!1,this.retrieved=new f.n,this.detailsShown=new f.n,this.page=1,this.pageSize=10,this.currentDates=null,this.errorText=null,this.subscription=new nt.a}ngOnInit(){this.filterService.updatePeriod(Se.d.NONE),this.subscription.add(this.companyService.refresh$.subscribe(t=>{const[e,i,n]=t;n&&this.onClearPeriod()}))}ngOnDestroy(){this.subscription.unsubscribe()}onRetry(){this.retrieveLetters({page:1})}onFilter(t){this.currentDates=t,this.retrieveLetters({page:1,dateFrom:t.from,dateTo:t.to})}onClearPeriod(){this.currentDates=null,this.filterService.updatePeriod(Se.d.NONE),this.retrieveLetters({page:1})}onScroll(){!this.isLoading&&this.hasMorePages&&this.retrieveLetters({page:++this.page})}onDetailsShown(t){this.detailsShown.emit(t)}mapTranslate(t){return`LETTERS.LIST.${t}`}retrieveLetters(t){return Object(m.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{let e=Object.assign(Object.assign(Object.assign({},this.listParams),t),{pageSize:this.pageSize});const i=yield this.lettersService.getList(e);this.hasMorePages=i.totalCount>t.page*this.pageSize,this.page=t.page,this.list=t.page>1?[...this.list,...i.items]:i.items,this.list.length>0&&(this.list[0].hasTour=!0),this.retrieved.emit(this.list.length),this.navService.retrieveLetterBadges()}catch(e){this.errorText=e.description||e}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x),f.Qb(O.a),f.Qb(Pt.a),f.Qb(Te.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-list-base"]],inputs:{emptyNotFound:"emptyNotFound",emptyLabel:"emptyLabel",highlighted:"highlighted",listParams:"listParams",isSelectable:"isSelectable",isSignable:"isSignable",isDeletable:"isDeletable",hasDateFilter:"hasDateFilter"},outputs:{retrieved:"retrieved",detailsShown:"detailsShown"},decls:3,vars:3,consts:[["class","j-list__filter letters__inbox-filter",4,"ngIf"],[4,"ngIf"],[1,"j-list__filter","letters__inbox-filter"],["placement","left-top",3,"submitted"],["class","letters__clear","tooltipClass","tooltip-light","inlineSVG","./assets/icons/tags-remove.svg",3,"ngbTooltip","click",4,"ngIf"],["tooltipClass","tooltip-light","inlineSVG","./assets/icons/tags-remove.svg",1,"letters__clear",3,"ngbTooltip","click"],[3,"list","isSignable","isSelectable","highlighted","isDeletable","scrolled","detailsShown"],["class","bg-white text-center text-muted py-5 p3",4,"ngIf"],["class","bg-white",3,"label",4,"ngIf"],["class","bg-white",3,"retried",4,"ngIf"],[1,"bg-white","text-center","text-muted","py-5","p3"],[1,"bg-white",3,"label"],[1,"bg-white",3,"retried"]],template:function(t,e){1&t&&(f.Qc(0,Oe,3,1,"section",0),f.Qc(1,xe,5,8,"ng-container",1),f.Qc(2,Ie,2,0,"ng-container",1)),2&t&&(f.tc("ngIf",e.hasDateFilter),f.Ab(1),f.tc("ngIf",!e.isLoading||e.page>1),f.Ab(1),f.tc("ngIf",e.isLoading))},directives:[n.u,ve.a,I.a,ye.E,se,re.a,oe.a,he],pipes:[R.d],styles:[".letters__inbox-filter[_ngcontent-%COMP%]{text-align:right;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;height:83px}.letters__inbox-filter[_ngcontent-%COMP%]   j-filter-period-dropdown[_ngcontent-%COMP%]{display:inline-block}.letters__clear[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;width:24px;height:24px;padding:0;margin-left:8px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]}),t})();function Ce(t,e){if(1&t){const t=f.Xb();f.Wb(0,"div",2),f.Wb(1,"j-statuses",3),f.ic("selected",(function(e){return f.Hc(t),f.mc().onStatusSelect(e)})),f.Vb(),f.Vb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("statuses",t.statuses)}}function Fe(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-on-sign",4),f.ic("retrieved",(function(e){return f.Hc(t),f.mc().onSignableRetrieved(e)}))("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("highlighted",t.highlighted)}}function De(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-list-base",5),f.ic("retrieved",(function(e){return f.Hc(t),f.mc().onSentRetrieved(e)}))("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("listParams",t.sentParams)("highlighted",t.highlighted)}}let Re=(()=>{class t{constructor(t,e,i,n,s,r){this.router=t,this.route=e,this.lettersService=i,this.navService=n,this.companyService=s,this.tourService=r,this.detailsShown=new f.n,this.statuses=[{label:this.mapTranslate("ON_SIGN"),value:h.ON_SIGN,count:null,isSelected:!0,isDisabled:!1},{label:this.mapTranslate("SENT"),value:h.SENT,count:0,isSelected:!1,isDisabled:!1}],this.sentParams={incoming:!1,statusCode:[dt.f.SENT,dt.f.READY_TO_SEND]},this.outboxStatus=this.statuses[0].value,this.LETTER_OUTBOX_STATUS=h,this.isOnSignHidden=!1,this.subscription=new nt.a,this.subscription.add(Object(ct.a)([this.route.data,this.companyService.getAuthorizedPersons()]).subscribe(t=>{const[e,i]=t;this.isOnSignHidden=!!i&&this.companyService.hasOnlyPrimaryAuthorities(i)&&this.companyService.isSingleSignScheme(),this.isOnSignHidden&&e.status===h.ON_SIGN?this.router.navigate(["sent"],{relativeTo:this.route.parent}):(this.onInit(e.status),this.lettersService.lastLettersListPath$.next(e.lastPath))}));const o=this.navService.getLetterBadges().subscribe(t=>{const{onSignForMe:e,onSignForOthers:i}=t,n=e>0;Object.assign(this.statuses.find(t=>t.value===h.ON_SIGN),{count:n?e:i,classList:n?"badge-primary":"badge-light"})});this.subscription.add(o)}ngOnDestroy(){this.subscription.unsubscribe()}onSignableRetrieved(t){}onSentRetrieved(t){}onDetailsShown(t){this.detailsShown.emit(t)}onInit(t=h.ON_SIGN){this.outboxStatus=t,this.statuses=this.statuses.map(e=>Object.assign(Object.assign({},e),{isSelected:e.value===t}))}onStatusSelect(t){let e="";switch(t){case h.ON_SIGN:e="on-sign";break;case h.SENT:e="sent"}this.router.navigate([e],{relativeTo:this.route.parent})}mapTranslate(t){return`LETTERS.STATUSES.${t}`}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(d.c),f.Qb(d.a),f.Qb(x),f.Qb(Pt.a),f.Qb(O.a),f.Qb(E.g))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-outbox"]],inputs:{highlighted:"highlighted"},outputs:{detailsShown:"detailsShown"},decls:3,vars:3,consts:[["class","j-list__filter",4,"ngIf"],[4,"ngIf"],[1,"j-list__filter"],["jTour","LETTERS.STATUSES","jTourPosition","bottom",3,"statuses","selected"],[3,"highlighted","retrieved","detailsShown"],["emptyLabel","LETTERS.EMPTY.OUTBOX",3,"listParams","highlighted","retrieved","detailsShown"]],template:function(t,e){1&t&&(f.Qc(0,Ce,2,1,"div",0),f.Qc(1,Fe,2,1,"ng-container",1),f.Qc(2,De,2,2,"ng-container",1)),2&t&&(f.tc("ngIf",!e.isOnSignHidden),f.Ab(1),f.tc("ngIf",e.outboxStatus===e.LETTER_OUTBOX_STATUS.ON_SIGN&&!e.isOnSignHidden),f.Ab(1),f.tc("ngIf",e.outboxStatus===e.LETTER_OUTBOX_STATUS.SENT))},directives:[n.u,Xt.a,Wt.a,me,Le],styles:[""]}),t})();const je=["lettersAside"];function Pe(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-outbox",12),f.ic("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("highlighted",t.highlighted)}}function Ne(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-list-base",13),f.ic("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("listParams",t.inboxParams)("highlighted",t.highlighted)("hasDateFilter",!0)}}function ke(t,e){if(1&t){const t=f.Xb();f.Ub(0),f.Wb(1,"j-letters-list-base",14),f.ic("detailsShown",(function(e){return f.Hc(t),f.mc().onDetailsShown(e)})),f.Vb(),f.Tb()}if(2&t){const t=f.mc();f.Ab(1),f.tc("listParams",t.draftsParams)("isSelectable",!0)("highlighted",t.highlighted)("isDeletable",!0)}}let Ve=(()=>{class t{constructor(t,e,i){this.route=t,this.navService=e,this.lettersService=i,this.LETTERS_CATEGORY=b,this.subscription=new nt.a,this.inboxParams={incoming:!0},this.draftsParams={statusCode:[dt.f.DRAFT]};const n=Object(ct.a)([this.route.paramMap.pipe(Object(lt.a)(()=>window.history.state)),this.route.data]).subscribe(t=>{const[e,i]=t;this.lettersCategory=i.category,this.lettersService.lastLettersListPath$.next(i.lastPath),e.highlighted&&(this.highlighted=e.highlighted)});this.subscription.add(n)}ngOnDestroy(){this.subscription.unsubscribe()}onDetailsShown(t){this.lettersAside.showDetails(t)}onCreateShown(){this.lettersAside.showCreate()}onAsideClose(){this.navService.retrieveLetterBadges()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(d.a),f.Qb(Pt.a),f.Qb(x))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters-list"]],viewQuery:function(t,e){var i;1&t&&f.Xc(je,!0),2&t&&f.Dc(i=f.jc())&&(e.lettersAside=i.first)},decls:19,vars:4,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"],[1,"j-page"],["translate","",1,"d-none","d-lg-block","j-page__title"],[1,"j-page__body"],[1,"j-list"],[1,"j-list__nav"],[3,"createShown"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"closed"],["lettersAside",""],[3,"highlighted","detailsShown"],["emptyLabel","LETTERS.EMPTY.INBOX",3,"listParams","highlighted","hasDateFilter","detailsShown"],["emptyLabel","LETTERS.EMPTY.DRAFTS",3,"listParams","isSelectable","highlighted","isDeletable","detailsShown"]],template:function(t,e){1&t&&(f.Wb(0,"j-layout-home"),f.Wb(1,"j-aside"),f.Rb(2,"j-nav-main"),f.Vb(),f.Wb(3,"j-main"),f.Wb(4,"section",0),f.Wb(5,"section",1),f.Wb(6,"section",2),f.Wb(7,"h2",3),f.Sc(8,"LETTERS.TITLE"),f.Vb(),f.Wb(9,"section",4),f.Wb(10,"section",5),f.Wb(11,"div",6),f.Wb(12,"j-letters-nav",7),f.ic("createShown",(function(t){return e.onCreateShown()})),f.Vb(),f.Vb(),f.Ub(13,8),f.Qc(14,Pe,2,1,"ng-container",9),f.Qc(15,Ne,2,3,"ng-container",9),f.Qc(16,ke,2,4,"ng-container",9),f.Tb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(17,"j-letters-aside",10,11),f.ic("closed",(function(t){return e.onAsideClose()})),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Ab(13),f.tc("ngSwitch",e.lettersCategory),f.Ab(1),f.tc("ngSwitchCase",e.LETTERS_CATEGORY.OUTBOX),f.Ab(1),f.tc("ngSwitchCase",e.LETTERS_CATEGORY.INBOX),f.Ab(1),f.tc("ngSwitchCase",e.LETTERS_CATEGORY.DRAFTS))},directives:[Nt.a,kt.a,Vt.a,Mt.a,R.a,Ht,n.y,n.z,it,Re,Le],styles:[".letters__body[_ngcontent-%COMP%]{box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:.5rem}.letters__page-title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.letters__header[_ngcontent-%COMP%]{padding:20px 1rem;display:none}@media(min-width:960px){.letters__header[_ngcontent-%COMP%]{display:grid}}"]}),t})();var Me=i("Kd2e");const We=[{path:"",component:(()=>{class t{constructor(t){this.featureFlagsService=t,this.subscription=new nt.a}ngOnInit(){this.subscription.add(this.featureFlagsService.featureFlags$.subscribe(t=>{this.featureFlagsService.checkFeatureRoute(Me.a.LETTER)}))}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(Me.b))},t.\u0275cmp=f.Kb({type:t,selectors:[["j-letters"]],decls:1,vars:0,template:function(t,e){1&t&&f.Rb(0,"router-outlet")},directives:[d.h],styles:[".letters__body[_ngcontent-%COMP%]{box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:.5rem}.letters__page-title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.letters__header[_ngcontent-%COMP%]{padding:20px 1rem;display:none}@media(min-width:960px){.letters__header[_ngcontent-%COMP%]{display:grid}}"]}),t})(),data:{title:"CONTRACTS.TITLE"},children:[{path:"outbox",children:[{path:"on-sign",component:Ve,data:{category:b.OUTBOX,status:h.ON_SIGN,lastPath:"outbox/on-sign",isOutbox:!0}},{path:"sent",component:Ve,data:{category:b.OUTBOX,status:h.SENT,lastPath:"outbox/sent",isOutbox:!0}},{path:"**",redirectTo:"on-sign"}]},{path:"inbox",component:Ve,data:{category:b.INBOX,lastPath:"inbox"}},{path:"drafts",component:Ve,data:{category:b.DRAFTS,lastPath:"drafts"}},{path:"create",component:jt},{path:"edit/:id",component:jt},{path:"**",redirectTo:"outbox"}]},{path:"**",redirectTo:""}];let Qe=(()=>{class t{}return t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({factory:function(e){return new(e||t)},imports:[[d.g.forChild(We)],d.g]}),t})();i("LJJp"),i.d(e,"LettersModule",(function(){return Ue}));const Be=[n.c,s.n,s.D,r.b,a.c,o.b,c.a,l.a,Qe];let Ue=(()=>{class t{}return t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({factory:function(e){return new(e||t)},imports:[[Be]]}),t})()}}]);