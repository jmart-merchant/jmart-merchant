(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+eKG":function(t,e,n){"use strict";var i=n("0zi4");n.d(e,"a",(function(){return i.a}))},"0zi4":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("mrSG"),a=n("tk/3"),c=n("+/Tu"),r=n("zwEd"),o=n("KWy3"),s=n("XNiG"),l=n("lJxs"),d=n("SpoB"),u=n("fXoL"),b=n("p6Hd"),p=n("VnnJ"),h=n("ofXK"),m=n("sYmb"),g=n("VO+5");let f=(()=>{class t{constructor(t,e,n,i,a,c){this.apiService=t,this.companyService=e,this.datePipe=n,this.statementService=i,this.translateService=a,this.notifierService=c,this.cardsUpdated$=new s.a}getStatement(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=yield this.getCardById(t),i=`companies/${this.companyService.currentId}/corporate-cards/${n.accountId}/statements`;let c=new a.g,r=new a.h;r=r.append("dateFrom",this.datePipe.transform(e.periodFrom,"yyyy-MM-dd")),r=r.append("dateTo",this.datePipe.transform(e.periodTo,"yyyy-MM-dd"));try{const t=yield this.apiService.get(i,c,r),e=this.mapCardStatement(t);return this.statementService.mapStatement(null,e)}catch(o){throw o}}))}mapCardLabel(t){if(t.alias)return t.alias;switch(t.category){case r.a.PRIVATE:return"ACCOUNTS.PRIVATE_CARD";case r.a.COMMERCIAL:return this.companyService.currentCompany.type==d.b.CORPORATE?"ACCOUNTS.CORPORATE_CARD":"ACCOUNTS.ENTREPRENEUR_CARD";default:return"ACCOUNTS.CARD"}}getCorporateCards(){return Object(i.a)(this,void 0,void 0,(function*(){const t=`companies/${this.companyService.currentId}/corporate-cards`;let e=(new a.h).set("includePrivate","true");const n=yield this.apiService.get(t,null,e);return this.cardsList=n.map(t=>new r.c(t)),this.cardsList}))}getCorporateCardsAsObservable(){const t=`companies/${this.companyService.currentId}/corporate-cards`;let e=(new a.h).set("includePrivate","true");return this.apiService.getObservable(t,null,e).pipe(Object(l.a)(t=>(this.cardsList=t.map(t=>new r.c(t)),this.cardsList)))}getCardById(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.cardsList||(yield this.getCorporateCards()),this.findCardById(t)}))}getQrImg(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=`companies/${this.companyService.currentId}/corporate-cards/${t}/qr`;let i=new a.h;return i=i.append("iban",e),this.apiService.get(n,null,i)}))}getQrPrint(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=`companies/${this.companyService.currentId}/corporate-cards/${t}/qr/print`;let i=new a.g;i=i.set("Content-Type","application/octet-stream");let c=new a.h;return c=c.append("iban",e),this.apiService.get(n,i,c,{responseType:"blob"})}))}getPdf(t){return Object(i.a)(this,void 0,void 0,(function*(){const e=`companies/${this.companyService.currentId}/corporate-cards/${t}/requisites`;let n=new a.g;n=n.set("Accept-File","application/pdf"),n=n.set("Content-Type","application/octet-stream");const i=new a.h;return this.apiService.get(e,n,i,{responseType:"blob"})}))}changeCardStatus(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=`companies/${this.companyService.currentId}/corporate-cards/${t}/status`,i={status:e?"BLOCK":"UNBLOCK"};try{const a=yield this.apiService.post(n,i);return this.cardsList.find(e=>e.cardId===t).status=e?r.b.TEMPORARILY_LOCK:r.b.ACTIVE,this.cardsUpdated$.next(this.cardsList),this.showCardStatusChangeSuccessNotification(e),a}catch(a){throw this.showCardStatusChangeErrorNotification(e),a}}))}changeCardVisibility(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=`companies/${this.companyService.currentId}/corporate-cards/${t}:${e?"hide":"unhide"}`;try{const i=yield this.apiService.patch(n);return this.cardsList.find(e=>e.cardId===t).hidden=e,this.cardsUpdated$.next(this.cardsList),this.showCardVisibilityChangeSuccessNotification(e),i}catch(i){throw this.showCardVisibilityChangeErrorNotification(e),i}}))}mapCardStatus(t){const e="CARDS.STATUS.TITLE.";switch(t){case r.b.EXPIRED:return`${e}EXPIRED`;case r.b.TEMPORARILY_LOCK:return`${e}TEMPORARILY_LOCK`;case r.b.FRAUD:case r.b.LOST_LOCK:case r.b.THEFT_LOCK:return`${e}LOCK`;default:return`${e}ACTIVE`}}findCardById(t){return this.cardsList.find(e=>e.cardId===t)}renameCard(t,e){return this.apiService.put(`companies/${this.companyService.currentId}/corporate-cards/${t}/alias`,{alias:e})}mapCardStatement(t){return{statementDate:t.statementDate,iban:null,dateFrom:t.dateFrom,dateTo:t.dateTo,balanceIn:null,balanceInLCY:null,balanceOut:null,balanceOutLCY:null,creditTotalSum:t.creditTotalSum,debitTotalSum:t.debitTotalSum,transactionGroups:t.transactionGroups.map(t=>this.mapCardTransactionGroup(t)),groupType:t.groupType,totalTransactionsCount:t.totalTransactionsCount}}mapCardTransactionGroup(t){return{groupDate:t.groupDate,debitSum:t.debitSum,creditSum:t.creditSum,transactionsCount:t.transactionsCount,transactions:t.transactions.map(t=>this.mapCardTransaction(t))}}mapCardTransaction(t){null===t.amount.currency&&t.feeAmount.amount<0&&(t.transactionType=o.c.DEBIT);const e={id:null,iban:null,reference:null,documentNumber:t.finDocId,correspondentBankBic:null,correspondentAccount:null,correspondentName:t.description,kbe:null,correspondentBin:null,debit:t.transactionType===o.c.DEBIT?this.getCardTransactionAmount(t):null,credit:t.transactionType===o.c.CREDIT?this.getCardTransactionAmount(t):null,description:t.details,documentDate:t.documentDate,valueDate:null,knp:null,kbk:null,signHead:null,signBuch:null,isPayment:!1,paymentStatus:null,paymentType:null,paymentEmployees:null,createDate:t.documentDate};return new o.d(e,this.translateService.currentLang)}getCardTransactionAmount(t){var e,n,i,a;return(null===(e=t.amount)||void 0===e?void 0:e.amount)&&(null===(n=t.amount)||void 0===n?void 0:n.currency)?t.amount:(null===(i=t.feeAmount)||void 0===i?void 0:i.amount)?{amount:Math.abs(null===(a=t.feeAmount)||void 0===a?void 0:a.amount),currency:c.a.KZT}:null}showCardStatusChangeSuccessNotification(t){const e=this.translateService.instant(`CARDS.SETTINGS.LOCK.${t?"ACTIVATED_NOTIFICATION":"DEACTIVATED_NOTIFICATION"}`);this.notifierService.hideAll(),this.notifierService.notify("default",e)}showCardStatusChangeErrorNotification(t){const e=this.translateService.instant(`CARDS.SETTINGS.LOCK.${t?"ACTIVATED_FAILED":"DEACTIVATED_FAILED"}`);this.notifierService.hideAll(),this.notifierService.notify("error",e)}showCardVisibilityChangeSuccessNotification(t){const e=this.translateService.instant(`CARDS.SETTINGS.HIDE.${t?"HIDDEN_NOTIFICATION":"SHOWN_NOTIFICATION"}`);this.notifierService.hideAll(),this.notifierService.notify("default",e)}showCardVisibilityChangeErrorNotification(t){const e=this.translateService.instant(`CARDS.SETTINGS.HIDE.${t?"HIDDEN_FAILED":"SHOWN_FAILED"}`);this.notifierService.hideAll(),this.notifierService.notify("error",e)}}return t.\u0275fac=function(e){return new(e||t)(u.ec(b.a),u.ec(p.a),u.ec(h.f),u.ec(o.b),u.ec(m.e),u.ec(g.c))},t.\u0275prov=u.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"3bMa":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["j-account-entity"]],inputs:{item:"item",showBank:"showBank"},decls:14,vars:8,consts:[[1,"account-pill","account-pill_gray","account-pill_fill"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","p3"],[1,"wrap-text","text-gray"],[1,"wrap-text"],[1,"account-pill--suffix"],[1,"text-gray","ml-1"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Rb(2,"j-entity-logo",2),i.Vb(),i.Wb(3,"div",3),i.Wb(4,"p",4),i.Qc(5,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0447\u0435\u0442"),i.Vb(),i.Wb(6,"p",5),i.Qc(7),i.Vb(),i.Vb(),i.Wb(8,"div",6),i.Qc(9),i.mc(10,"amountFormat"),i.Wb(11,"span",7),i.Qc(12),i.mc(13,"curSymbol"),i.Vb(),i.Vb(),i.Vb()),2&t&&(i.Ab(2),i.rc("name",e.item.balance.currency),i.Ab(5),i.Rc(e.item.iban),i.Ab(2),i.Sc(" ",i.nc(10,4,e.item.balance.amount)," "),i.Ab(3),i.Rc(i.nc(13,6,e.item.balance.currency)))},styles:[""],encapsulation:2,changeDetection:0}),t})()},"4Nuw":function(t,e,n){"use strict";var i=n("L+ju"),a=n("xErE"),c=n("ofXK"),r=n("tk/3"),o=n("tyNb"),s=n("3Pt+"),l=n("PCNd"),d=n("fXoL"),u=n("3bMa"),b=n("hsBV"),p=n("pZP7"),h=n("UZjs"),m=n("JvPu"),g=n("wwEr"),f=n("3v+J"),v=n("Y+uv"),C=n("/zfT"),S=n("xWtO"),O=n("BV3K"),T=n("B+58"),y=n("zOyH"),_=n("Cg+c"),A=n("Dwsl"),x=n("+uUT"),I=n("Ya7Z"),w=n("13E/"),E=n("cZYL"),P=n("jMpN"),M=n("ttPG"),k=n("vZvt"),R=n("0eeg"),V=n("Wo9y"),L=n("EBek"),N=n("570E"),j=n("zdqJ"),W=n("i2Gl"),D=n("Kcpt"),F=n("Frqi"),Q=n("M6pS"),U=n("paXB"),G=n("Q98t"),$=n("EiG8"),q=n("4oqK"),K=n("c66K"),H=n("QfCG"),B=n("oa9T"),X=n("SfXN"),Y=n("H6TZ"),z=n("jRXw"),J=n("2aJj"),Z=n("VA2L"),tt=n("0AMz"),et=n("W3Es"),nt=n("R4CF"),it=n("9txL"),at=n("LXWx"),ct=n("5I09"),rt=n("S1F0"),ot=n("oKsb"),st=n("fvpk"),lt=n("Tile"),dt=n("aF9I"),ut=n("aZ8m"),bt=n("UhoJ"),pt=n("sCra"),ht=n("fGuG"),mt=n("7/bn"),gt=n("Bl/x"),ft=n("zN9f"),vt=n("Kx/q"),Ct=n("2FF4"),St=n("bSvt"),Ot=n("jH+I"),Tt=n("4cI0"),yt=n("kUBv"),_t=n("9Udv"),At=n("0jn5"),xt=n("fK/r"),It=n("Hjq/"),wt=n("PGAL"),Et=n("Kx0l"),Pt=n("gdaf"),Mt=n("LFY/"),kt=n("I+WJ"),Rt=n("lABO"),Vt=n("hJI6"),Lt=n("JB36"),Nt=n("4zJ+"),jt=n("XpgD"),Wt=n("MfWJ"),Dt=n("B8HE"),Ft=n("NpBu"),Qt=n("TaxS"),Ut=n("tkTF"),Gt=n("yy4r"),$t=n("wGsJ"),qt=n("ZVDf"),Kt=n("l/gM"),Ht=n("UoEe"),Bt=n("gN/K"),Xt=n("+hcb"),Yt=n("h7tf"),zt=n("9odQ"),Jt=n("WqMH"),Zt=n("3MRA"),te=n("Zgqj"),ee=n("oMXN"),ne=n("rqas"),ie=n("dnqU"),ae=n("tp+K"),ce=n("saU0"),re=n("ZF3e"),oe=n("JqCM"),se=n("qew9"),le=n("d/d6"),de=n("e8Ap"),ue=n("sYmb"),be=n("1kSV"),pe=n("Dvla"),he=n("K1R0"),me=n("xJkR"),ge=n("dlKe"),fe=n("DPnb"),ve=n("C6g9"),Ce=n("3M96"),Se=n("DHcY"),Oe=n("adOO"),Te=n("Eajh"),ye=n("Ub7F"),_e=n("OHc7"),Ae=n("I0Rk"),xe=n("tepA"),Ie=n("Bs9s"),we=n("ScFe"),Ee=n("SCaJ"),Pe=n("wV3k"),Me=n("wY9W"),ke=n("7Fmj"),Re=n("3skF");let Ve=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[c.c,l.a,r.d,o.g,s.n,s.D]]}),t})();d.Ic(u.a,[u.a,b.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,f.a,v.a,C.a,S.a,O.b,T.a,y.a,_.a,A.a,x.a,I.a,O.a,w.a,E.b,E.a,P.a,M.a,k.a,R.a,V.a,L.a,N.a,j.a,W.b,D.a,F.a,Q.a,U.a,G.a,$.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,J.a,Z.a,tt.a,et.a,nt.a,it.a,at.a,ct.a,rt.a,ot.a,st.a,lt.a,dt.a,ut.a,bt.a,pt.a,ht.a,mt.a,gt.a,ft.a,vt.a,Ct.a,St.a,Ot.a,Tt.a,yt.a,_t.a,At.a,xt.a,It.a,wt.a,Et.a,Pt.a,Mt.a,kt.a,Rt.a,Vt.a,Lt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Qt.a,Ut.a,Gt.a,$t.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.b,Jt.a,Zt.a,te.a,ee.a,ne.a,ie.a,ae.a,ce.a,re.a,oe.a,se.a,le.a,de.a,ue.a,be.E,pe.a,pe.b,he.a,me.a,ge.a,fe.a,fe.c,fe.b,ve.a,Ce.a,o.h,o.d,o.f,o.e,o.i,s.J,s.y,s.I,s.c,s.z,s.C,s.a,s.F,s.G,s.B,s.t,s.u,s.E,s.p,s.o,s.A,s.b,s.d,s.w,s.x,s.v,s.i,s.l,s.j,s.m,s.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,Oe.a,Te.a,ye.a,_e.a,Ae.a,xe.a,Ie.a,we.a,Ee.a,Pe.a,Me.a,ke.a,Re.a,ue.d]),d.Ic(b.a,[u.a,b.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,f.a,v.a,C.a,S.a,O.b,T.a,y.a,_.a,A.a,x.a,I.a,O.a,w.a,E.b,E.a,P.a,M.a,k.a,R.a,V.a,L.a,N.a,j.a,W.b,D.a,F.a,Q.a,U.a,G.a,$.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,J.a,Z.a,tt.a,et.a,nt.a,it.a,at.a,ct.a,rt.a,ot.a,st.a,lt.a,dt.a,ut.a,bt.a,pt.a,ht.a,mt.a,gt.a,ft.a,vt.a,Ct.a,St.a,Ot.a,Tt.a,yt.a,_t.a,At.a,xt.a,It.a,wt.a,Et.a,Pt.a,Mt.a,kt.a,Rt.a,Vt.a,Lt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Qt.a,Ut.a,Gt.a,$t.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.b,Jt.a,Zt.a,te.a,ee.a,ne.a,ie.a,ae.a,ce.a,re.a,oe.a,se.a,le.a,de.a,ue.a,be.E,pe.a,pe.b,he.a,me.a,ge.a,fe.a,fe.c,fe.b,ve.a,Ce.a,o.h,o.d,o.f,o.e,o.i,s.J,s.y,s.I,s.c,s.z,s.C,s.a,s.F,s.G,s.B,s.t,s.u,s.E,s.p,s.o,s.A,s.b,s.d,s.w,s.x,s.v,s.i,s.l,s.j,s.m,s.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,Oe.a,Te.a,ye.a,_e.a,Ae.a,xe.a,Ie.a,we.a,Ee.a,Pe.a,Me.a,ke.a,Re.a,ue.d]),d.Ic(p.a,[u.a,b.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,f.a,v.a,C.a,S.a,O.b,T.a,y.a,_.a,A.a,x.a,I.a,O.a,w.a,E.b,E.a,P.a,M.a,k.a,R.a,V.a,L.a,N.a,j.a,W.b,D.a,F.a,Q.a,U.a,G.a,$.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,J.a,Z.a,tt.a,et.a,nt.a,it.a,at.a,ct.a,rt.a,ot.a,st.a,lt.a,dt.a,ut.a,bt.a,pt.a,ht.a,mt.a,gt.a,ft.a,vt.a,Ct.a,St.a,Ot.a,Tt.a,yt.a,_t.a,At.a,xt.a,It.a,wt.a,Et.a,Pt.a,Mt.a,kt.a,Rt.a,Vt.a,Lt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Qt.a,Ut.a,Gt.a,$t.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.b,Jt.a,Zt.a,te.a,ee.a,ne.a,ie.a,ae.a,ce.a,re.a,oe.a,se.a,le.a,de.a,ue.a,be.E,pe.a,pe.b,he.a,me.a,ge.a,fe.a,fe.c,fe.b,ve.a,Ce.a,o.h,o.d,o.f,o.e,o.i,s.J,s.y,s.I,s.c,s.z,s.C,s.a,s.F,s.G,s.B,s.t,s.u,s.E,s.p,s.o,s.A,s.b,s.d,s.w,s.x,s.v,s.i,s.l,s.j,s.m,s.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,Oe.a,Te.a,ye.a,_e.a,Ae.a,xe.a,Ie.a,we.a,Ee.a,Pe.a,Me.a,ke.a,Re.a,ue.d]),d.Ic(h.a,[u.a,b.a,p.a,h.a,c.r,c.s,c.t,c.u,c.B,c.x,c.y,c.z,c.A,c.v,c.w,m.a,g.a,f.a,v.a,C.a,S.a,O.b,T.a,y.a,_.a,A.a,x.a,I.a,O.a,w.a,E.b,E.a,P.a,M.a,k.a,R.a,V.a,L.a,N.a,j.a,W.b,D.a,F.a,Q.a,U.a,G.a,$.a,q.a,K.a,H.a,B.a,X.a,Y.a,z.a,J.a,Z.a,tt.a,et.a,nt.a,it.a,at.a,ct.a,rt.a,ot.a,st.a,lt.a,dt.a,ut.a,bt.a,pt.a,ht.a,mt.a,gt.a,ft.a,vt.a,Ct.a,St.a,Ot.a,Tt.a,yt.a,_t.a,At.a,xt.a,It.a,wt.a,Et.a,Pt.a,Mt.a,kt.a,Rt.a,Vt.a,Lt.a,Nt.a,jt.a,Wt.a,Dt.a,Ft.a,Qt.a,Ut.a,Gt.a,$t.a,qt.a,Kt.a,Ht.a,Bt.a,Xt.a,Yt.a,zt.b,Jt.a,Zt.a,te.a,ee.a,ne.a,ie.a,ae.a,ce.a,re.a,oe.a,se.a,le.a,de.a,ue.a,be.E,pe.a,pe.b,he.a,me.a,ge.a,fe.a,fe.c,fe.b,ve.a,Ce.a,o.h,o.d,o.f,o.e,o.i,s.J,s.y,s.I,s.c,s.z,s.C,s.a,s.F,s.G,s.B,s.t,s.u,s.E,s.p,s.o,s.A,s.b,s.d,s.w,s.x,s.v,s.i,s.l,s.j,s.m,s.f],[c.b,c.I,c.q,c.l,c.F,c.g,c.D,c.G,c.d,c.f,c.j,c.k,c.m,Se.a,Oe.a,Te.a,ye.a,_e.a,Ae.a,xe.a,Ie.a,we.a,Ee.a,Pe.a,Me.a,ke.a,Re.a,ue.d]),n.d(e,"a",(function(){return i.a})),n.d(e,"d",(function(){return i.c})),n.d(e,"c",(function(){return a.a})),n.d(e,"b",(function(){return Ve}))},"9N4E":function(t,e,n){"use strict";n("x2ms"),n("CqcL"),n("0kjH"),n("n6qU"),n("77FI"),n("sFIr"),n("AOrV"),n("6ElB"),n("9PaV"),n("u+5l");var i=n("THGi");n("zt08"),n("l2AU"),n.d(e,"a",(function(){return i.a}));var a=n("jZlK");n.d(e,"c",(function(){return a.a}));var c=n("y5b2");n.d(e,"b",(function(){return c.d}))},KWy3:function(t,e,n){"use strict";n("QiVB"),n("/68H"),n("T+Ki"),n("pThr"),n("cIcs"),n("OTTH"),n("wqe5"),n("lYAS"),n("9K1F");var i=n("rEgK");n.d(e,"b",(function(){return i.a}));var a=n("ItTq");n.d(e,"a",(function(){return a.b}));var c=n("2G+r");n.d(e,"c",(function(){return c.c})),n.d(e,"d",(function(){return c.d}))},UZjs:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("zwEd"),a=n("fXoL"),c=n("+eKG");function r(t,e){if(1&t&&a.Rb(0,"j-money",9),2&t){const t=a.lc();a.rc("money",null==t.card?null:t.card.balance)}}function o(t,e){if(1&t&&(a.Wb(0,"small",10),a.Qc(1),a.mc(2,"translate"),a.Vb()),2&t){const t=a.lc();a.Ab(1),a.Rc(a.nc(2,1,t.status))}}let s=(()=>{class t{constructor(t){this.cardsService=t}ngOnInit(){}get cardImage(){const t="/assets/icons/accounts";switch(this.card.category){case i.a.PRIVATE:return`${t}/card-private.svg`;case i.a.COMMERCIAL:default:return`${t}/card-commercial.svg`}}get cardMps(){const t="/assets/icons/cards/mps";return"4"===this.card.cardNumber[0]?`${t}/visa.svg`:`${t}/mastercard.svg`}get status(){if(this.card.status!==i.b.ACTIVE)return this.cardsService.mapCardStatus(this.card.status)}get label(){return this.cardsService.mapCardLabel(this.card)}get isBalanceShown(){return this.card.category===i.a.COMMERCIAL}get maskedCardNumber(){var t;const e=null===(t=this.card)||void 0===t?void 0:t.cardNumber;return e?`${e.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${e.substring(e.length-4,e.length)}`:""}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["j-account-card"]],inputs:{card:"card"},decls:13,vars:8,consts:[[1,"account-item"],[1,"account-item__img",3,"inlineSVG"],[1,"account-item__body","p3"],[1,"text-muted"],[1,"text-dark","d-flex"],[1,"mr-2",3,"inlineSVG"],[1,"ml-auto","p3","text-right"],[3,"money",4,"ngIf"],["class","d-block text-muted",4,"ngIf"],[3,"money"],[1,"d-block","text-muted"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Rb(1,"span",1),a.Wb(2,"div",2),a.Wb(3,"div",3),a.Qc(4),a.mc(5,"translate"),a.Vb(),a.Wb(6,"div",4),a.Rb(7,"span",5),a.Wb(8,"span"),a.Qc(9),a.Vb(),a.Vb(),a.Vb(),a.Wb(10,"div",6),a.Oc(11,r,1,1,"j-money",7),a.Oc(12,o,3,3,"small",8),a.Vb(),a.Vb()),2&t&&(a.Ab(1),a.rc("inlineSVG",e.cardImage),a.Ab(3),a.Rc(a.nc(5,6,e.label)),a.Ab(3),a.rc("inlineSVG",e.cardMps),a.Ab(2),a.Rc(e.maskedCardNumber),a.Ab(2),a.rc("ngIf",e.isBalanceShown),a.Ab(1),a.rc("ngIf",e.status))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),t})()},"ct+p":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("3Pt+"),c=n("qew9"),r=n("1kSV"),o=n("tmjD"),s=n("dlKe"),l=n("xJkR"),d=n("PCNd"),u=n("M4UK"),b=n("5cNS"),p=n("crCf"),h=n("tyNb"),m=n("Kd2e"),g=n("gzBp"),f=n("itXk"),v=n("pLZG"),C=n("lJxs"),S=n("3E0/"),O=n("fXoL"),T=n("VnnJ"),y=n("kmKP"),_=n("qXBG");let A=(()=>{class t{constructor(t,e,n){this.company=t,this.user=e,this.auth=n}canActivate(t,e){return Object(f.a)([this.company.currentCompany$,this.user.getUser()]).pipe(Object(v.a)(([t,e])=>!!t&&!!e),Object(C.a)(()=>!0),Object(S.a)(0))}}return t.\u0275fac=function(e){return new(e||t)(O.ec(T.a),O.ec(y.b),O.ec(_.a))},t.\u0275prov=O.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(t,e){this.router=t,this.featureFlagsService=e}canActivate(t,e){const n=t.data.featureFlag;return new Promise((t,e)=>{this.featureFlagsService.isDisabledPromise(n).then(e=>{e?(this.router.navigate(["/"]),t(!1)):t(!0)})})}}return t.\u0275fac=function(e){return new(e||t)(O.ec(h.c),O.ec(m.b))},t.\u0275prov=O.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=n("mrSG"),w=n("quSY"),E=n("4Nuw"),P=n("zwEd"),M=n("ZF+8"),k=n("0zi4"),R=n("dnqU"),V=n("sYmb"),L=n("LA0w"),N=n("zN9f"),j=n("Kx/q"),W=n("e8Ap");function D(t,e){if(1&t&&(O.Wb(0,"div",1),O.Rb(1,"span",2),O.Wb(2,"span"),O.Qc(3),O.Vb(),O.Vb()),2&t){const t=O.lc();O.Ab(3),O.Sc(" ",t.account.maskedAlterCode," ")}}let F=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-alter-code"]],inputs:{account:"account"},decls:1,vars:1,consts:[["class","alter-code",4,"ngIf"],[1,"alter-code"],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"]],template:function(t,e){1&t&&O.Oc(0,D,4,1,"div",0),2&t&&O.rc("ngIf",null==e.account?null:e.account.hasAtfIban)},directives:[i.u,W.a],styles:[".alter-code[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#b7bec5}"]}),t})();var Q=n("xErE");function U(t,e){1&t&&(O.Qc(0),O.mc(1,"translate")),2&t&&O.Sc(" ",O.nc(1,1,"ACCOUNTS.INACTIVE"),"\n")}function G(t,e){if(1&t&&(O.Qc(0),O.mc(1,"translate")),2&t){const t=O.lc();O.Sc(" ",O.oc(1,1,"ACCOUNTS.INACTIVE_WITH_DATE",t.titleParams),"\n")}}function $(t,e){if(1&t&&(O.Rb(0,"div",7),O.mc(1,"translate")),2&t){const t=O.lc();O.rc("innerHTML",O.oc(1,1,"ACCOUNTS.MIGRATED",t.descriptionParams),O.Gc)}}let q=(()=>{class t{constructor(t,e){this.accountsService=t,this.locale=e,this.isLarge=!1,this.subscription=new w.a,this.subscription.add(this.accountsService.getMergeDate().subscribe(t=>{this.descriptionParams=this.mapTranslateParams(t,"d.MM.yy"),this.titleParams=this.mapTranslateParams(t,"d MMMM")}))}ngOnDestroy(){this.subscription.unsubscribe()}mapTranslateParams(t,e){return{date:Object(i.K)(t,"d.MM.yy",this.locale)}}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(Q.a),O.Qb(O.u))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-migrated"]],inputs:{isLarge:"isLarge"},decls:10,vars:4,consts:[["tooltipClass","tooltip-light",1,"migrated",3,"ngbTooltip"],["inlineSVG","assets/icons/v2/fail-16.svg",1,"migrated__icon"],[1,"migrated__text","text-danger"],[3,"ngTemplateOutlet"],["titleDefaultTemplate",""],["titleLargeTemplate",""],["migratedTooltipTemplate",""],[1,"text-left",3,"innerHTML"]],template:function(t,e){if(1&t&&(O.Wb(0,"div",0),O.Rb(1,"span",1),O.Wb(2,"strong",2),O.Sb(3,3),O.Vb(),O.Vb(),O.Oc(4,U,2,3,"ng-template",null,4,O.Pc),O.Oc(6,G,2,4,"ng-template",null,5,O.Pc),O.Oc(8,$,2,4,"ng-template",null,6,O.Pc)),2&t){const t=O.Cc(5),n=O.Cc(7),i=O.Cc(9);O.rc("ngbTooltip",i),O.Ab(2),O.Db(e.isLarge?"ml-1":"p4"),O.Ab(1),O.rc("ngTemplateOutlet",e.isLarge?n:t)}},directives:[r.E,W.a,i.B],pipes:[V.d],styles:[".migrated[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;line-height:12px}.migrated__icon[_ngcontent-%COMP%]{height:16px;margin-right:2px}"]}),t})();function K(t,e){1&t&&O.Rb(0,"j-account-migrated",11)}function H(t,e){if(1&t&&(O.Wb(0,"div",7),O.Wb(1,"div",8),O.Wb(2,"span"),O.Qc(3),O.Vb(),O.Oc(4,K,1,0,"j-account-migrated",9),O.Vb(),O.Rb(5,"j-account-alter-code",10),O.Vb()),2&t){const t=O.lc();O.Ab(3),O.Rc(t.account.maskedIban),O.Ab(1),O.rc("ngIf",t.account.isMigrated),O.Ab(1),O.rc("account",t.account)}}function B(t,e){1&t&&O.Rb(0,"img",12)}let X=(()=>{class t{constructor(t){this.currency=t,this.isRoutable=!0}ngOnInit(){}onClick(t){console.log(t)}get balance(){return this.account&&this.account.balance}get amount(){return this.currency.formatBalance(this.balance)}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(L.a))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-box"]],inputs:{account:"account",isRoutable:"isRoutable"},decls:7,vars:4,consts:[[1,"account-header"],["class","p2",4,"ngIf"],["src","/assets/icons/arrow-right.svg","class","account-arrow",4,"ngIf"],[1,"account-footer"],["size","sm",1,"account-img",3,"name"],[1,"account-amount"],[3,"money"],[1,"p2"],[1,"account__iban"],["class","ml-2",4,"ngIf"],[3,"account"],[1,"ml-2"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"]],template:function(t,e){1&t&&(O.Wb(0,"div",0),O.Oc(1,H,6,3,"div",1),O.Oc(2,B,1,0,"img",2),O.Vb(),O.Wb(3,"div",3),O.Rb(4,"j-entity-logo",4),O.Wb(5,"h4",5),O.Rb(6,"j-money",6),O.Vb(),O.Vb()),2&t&&(O.Ab(1),O.rc("ngIf",e.account),O.Ab(1),O.rc("ngIf",e.isRoutable),O.Ab(2),O.rc("name",e.balance.currency),O.Ab(2),O.rc("money",e.balance))},directives:[i.u,N.a,j.a,F,q],styles:["[_nghost-%COMP%]{background:#fff;border-radius:12px;display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;padding:20px;min-width:285px;min-height:145px;cursor:pointer;margin-bottom:1rem;margin-right:1rem}[_nghost-%COMP%]:hover{box-shadow:0 0 1px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 10px 20px rgba(0,0,0,.04)}.account-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:baseline;align-items:baseline}.account-footer[_ngcontent-%COMP%], .account-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.account-footer[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media(min-width:1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account__iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]}),t})();var Y=n("fkRG");function z(t,e){if(1&t&&(O.Ub(0),O.Wb(1,"div",1),O.Wb(2,"div",2),O.Wb(3,"span",3),O.Qc(4),O.Vb(),O.Wb(5,"div",4),O.Wb(6,"div",5),O.Qc(7),O.Vb(),O.Rb(8,"j-card-status",6),O.Vb(),O.Vb(),O.Rb(9,"img",7),O.Vb(),O.Wb(10,"div",8),O.Rb(11,"img",9),O.Wb(12,"h4",10),O.Rb(13,"j-money",11),O.Vb(),O.Vb(),O.Tb()),2&t){const t=O.lc();O.Ab(4),O.Sc(" ",t.card.alias||t.card.formattedName," "),O.Ab(3),O.Rc(t.card.maskedNumber),O.Ab(1),O.rc("isSmall",!0)("status",t.card.status),O.Ab(5),O.rc("money",t.card.balance)}}let J=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Kb({type:t,selectors:[["j-card-box"]],inputs:{card:"card"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"account-header","p2"],[1,"account-iban-wrap"],[1,"account-iban","text-truncate"],[1,"d-flex"],[1,"text-muted","no-wrap"],[1,"no-wrap",3,"isSmall","status"],["src","/assets/icons/arrow-right.svg",1,"account-arrow"],[1,"account-footer"],["src","/assets/img/home/card-chip.svg"],[1,"ml-3","account-amount"],[3,"money"]],template:function(t,e){1&t&&O.Oc(0,z,14,5,"ng-container",0),2&t&&O.rc("ngIf",e.card)},directives:[i.u,Y.a,j.a],styles:["[_nghost-%COMP%]{background:#fff;border-radius:12px;display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;padding:20px;width:285px;height:145px;margin-bottom:1rem;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]:hover{box-shadow:0 0 1px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 10px 20px rgba(0,0,0,.04)}.account-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:baseline;align-items:baseline}.account-footer[_ngcontent-%COMP%], .account-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.account-footer[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.account-amount[_ngcontent-%COMP%]{margin:0}@media(min-width:1280px){.account-amount[_ngcontent-%COMP%]{font-size:24px}}.account-img[_ngcontent-%COMP%]{border-radius:.5rem;margin-right:1rem}.account-iban[_ngcontent-%COMP%]{display:block}.account-iban-wrap[_ngcontent-%COMP%]{max-width:calc(100% - 1rem)}"]}),t})();var Z=n("4cI0");const tt=function(){return{width:"100px",height:"30px","margin-top":"2rem","background-color":"#ECEEF1"}},et=function(){return{width:"285px",height:"145px","margin-right":"1rem","background-color":"#ECEEF1"}};function nt(t,e){1&t&&(O.Ub(0),O.Rb(1,"ngx-skeleton-loader",4),O.Rb(2,"br"),O.Rb(3,"ngx-skeleton-loader",5),O.Tb()),2&t&&(O.Ab(1),O.rc("theme",O.vc(2,tt)),O.Ab(2),O.rc("theme",O.vc(3,et)))}function it(t,e){if(1&t){const t=O.Xb();O.Wb(0,"j-account-box",11),O.ic("click",(function(n){O.Fc(t);const i=e.$implicit;return O.lc(3).navigateToAccount(i)})),O.Vb()}2&t&&O.rc("account",e.$implicit)}function at(t,e){if(1&t&&(O.Wb(0,"div",12),O.Qc(1),O.Vb()),2&t){const t=O.lc(3);O.Ab(1),O.Rc(t.accountsError)}}function ct(t,e){if(1&t&&(O.Ub(0),O.Wb(1,"div",7),O.Qc(2,"ACCOUNTS.REGULARS "),O.Vb(),O.Wb(3,"div",8),O.Oc(4,it,1,1,"j-account-box",9),O.Oc(5,at,2,1,"div",10),O.Vb(),O.Tb()),2&t){const t=O.lc(2);O.Ab(4),O.rc("ngForOf",t.accounts),O.Ab(1),O.rc("ngIf",t.accountsError)}}function rt(t,e){if(1&t&&(O.Wb(0,"div",6),O.Oc(1,ct,6,2,"ng-container",1),O.Vb()),2&t){const t=O.lc();O.Ab(1),O.rc("ngIf",(null==t.accounts?null:t.accounts.length)>0)}}function ot(t,e){if(1&t){const t=O.Xb();O.Wb(0,"j-card-box",14),O.ic("click",(function(n){O.Fc(t);const i=e.$implicit;return O.lc(2).navigateToCorporateCard(i)})),O.Vb()}2&t&&O.rc("card",e.$implicit)}function st(t,e){if(1&t&&(O.Wb(0,"div",12),O.Qc(1),O.Vb()),2&t){const t=O.lc(2);O.Ab(1),O.Rc(t.cardsError)}}function lt(t,e){if(1&t&&(O.Wb(0,"div",6),O.Wb(1,"div",7),O.Qc(2,"ACCOUNTS.CARDS "),O.Vb(),O.Wb(3,"div",8),O.Oc(4,ot,1,1,"j-card-box",13),O.Oc(5,st,2,1,"div",10),O.Vb(),O.Vb()),2&t){const t=O.lc();O.Ab(4),O.rc("ngForOf",t.cards),O.Ab(1),O.rc("ngIf",t.cardsError)}}function dt(t,e){if(1&t){const t=O.Xb();O.Wb(0,"j-account-box",11),O.ic("click",(function(n){O.Fc(t);const i=e.$implicit;return O.lc(2).navigateToAccount(i)})),O.Vb()}2&t&&O.rc("account",e.$implicit)}function ut(t,e){if(1&t&&(O.Wb(0,"div",6),O.Wb(1,"div",7),O.Qc(2,"ACCOUNTS.DEPOSITS "),O.Vb(),O.Wb(3,"div",8),O.Oc(4,dt,1,1,"j-account-box",9),O.Vb(),O.Vb()),2&t){const t=O.lc();O.Ab(4),O.rc("ngForOf",t.deposits)}}function bt(t,e){if(1&t){const t=O.Xb();O.Wb(0,"j-empty-placeholder",15),O.ic("retried",(function(e){return O.Fc(t),O.lc().loadLists()})),O.Vb()}2&t&&O.rc("hasRetry",!0)}let pt=(()=>{class t{constructor(t,e,n,i,a,c,r){this.companyService=t,this.accountsService=e,this.cardsService=n,this.router=i,this.route=a,this.authService=c,this.tourService=r,this.accountsError="",this.cardsError="",this.subscription=new w.a,this.isAccountsLoading=!1,this.pendingCardRequest=null,this.pendingAccountsRequest=null,this.tourStartId=null;const o=this.route.paramMap.pipe(Object(C.a)(()=>window.history.state)).subscribe(t=>{this.tourStartId=t.tourStartId,this.initTour()}),s=this.tourService.onTourStart$.subscribe(t=>{console.log(t),this.tourStartId=t,t&&this.initTour()});this.subscription.add(o),this.subscription.add(s)}ngOnInit(){this.accountsStore=this.accountsService.store,this.accountsStore.items$.subscribe(t=>{},t=>{}),this.subscription.add(this.companyService.refresh$.subscribe(t=>{const[e,n,i]=t;i?this.loadLists():(this.authService.logout(),this.accounts=null,this.cards=null)}))}ngOnDestroy(){this.subscription.unsubscribe()}loadLists(){return Object(I.a)(this,void 0,void 0,(function*(){this.loadCards(),this.loadAccountsAndDeposits()}))}loadAccountsAndDeposits(){return Object(I.a)(this,void 0,void 0,(function*(){this.accounts=null,this.deposits=null,this.isAccountsLoading=!0;try{const t=yield this.accountsService.getAccounts(this.companyService.currentId);this.applyMigratedAccountsRule(t),this.accounts=t.filter(t=>t.accountType===E.a.ACCOUNT),this.deposits=t.filter(t=>t.accountType===E.a.DEPOSIT),this.accounts.filter(t=>t.hasAtfIban).length>0?this.applyFirstAtfAccountsRule(this.accounts):this.deposits.filter(t=>t.hasAtfIban).length>0&&this.applyFirstAtfAccountsRule(this.deposits),this.tourStartId=this.tourService.onTourStart$.value,this.initTour()}catch(t){this.accountsError=t.desciption||t.code||t}finally{this.isAccountsLoading=!1}}))}initTour(){switch(this.tourStartId){case"HOME":this.tourService.startTour(M.e.HOME);break;case"REQUISITES":this.tourService.startTour(M.e.REQUISITES_HOME);break;case"STATEMENT":this.tourService.startTour(M.e.STATEMENTS_HOME);break;case"HISTORY":this.tourService.startTour(M.e.HISTORY_HOME);break;case"IMPORT":this.tourService.startTour(M.e.IMPORT);break;case"CREATE_PAYMENT":this.tourService.startTour(M.e.CREATE_PAYMENT)}this.tourStartId=null}navigateToAccount(t){let e;switch(this.tourService.onTourStart$.value){case"REQUISITES":e="REQUISITES_HOME.ACCOUNT";break;case"STATEMENT":e="STATEMENTS_HOME.ACCOUNT"}this.tourService.onTourStart$.next(null),this.router.navigate([`/accounts/${t.iban}`],{relativeTo:this.route,state:{tourStep:e}})}navigateToCorporateCard(t){this.router.navigate([`/cards/${t.cardId}`])}get deposits$(){return this.accountsStore.items$.pipe(Object(C.a)(t=>t.filter(t=>t.accountType===E.a.DEPOSIT)))}get accounts$(){return this.accountsStore.items$.pipe(Object(C.a)(t=>t.filter(t=>t.accountType===E.a.ACCOUNT)))}applyFirstAtfAccountsRule(t){t.find(t=>t.hasAtfIban).isFirstAtfInTheList=!0}startAccountsListTour(){this.tourService.startTour(M.e.HOME)}applyMigratedAccountsRule(t){t.find(t=>t.isMigrated)&&this.accountsService.retrieveMergeDate()}loadCards(){this.pendingCardRequest&&this.pendingCardRequest.unsubscribe(),this.cards=null,this.pendingCardRequest=this.cardsService.getCorporateCardsAsObservable().subscribe(t=>{this.cards=t.filter(t=>t.category===P.a.COMMERCIAL),this.pendingCardRequest=null})}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(T.a),O.Qb(E.c),O.Qb(k.a),O.Qb(h.c),O.Qb(h.a),O.Qb(_.a),O.Qb(M.g))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-accounts-list"]],decls:9,vars:5,consts:[[1,"accounts-block"],[4,"ngIf"],["class","accounts-wrap",4,"ngIf"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried",4,"ngIf"],[3,"theme"],["count","2",3,"theme"],[1,"accounts-wrap"],["translate","",1,"accounts-heading"],[1,"accounts-list"],[3,"account","click",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],[3,"account","click"],[1,"alert","alert-danger"],[3,"card","click",4,"ngFor","ngForOf"],[3,"card","click"],["label","ACCOUNTS.EMPTY_STATE",3,"hasRetry","retried"]],template:function(t,e){1&t&&(O.Wb(0,"div",0),O.Wb(1,"div"),O.Oc(2,nt,4,4,"ng-container",1),O.Wb(3,"div"),O.Oc(4,rt,2,1,"div",2),O.Oc(5,lt,6,2,"div",2),O.Oc(6,ut,5,1,"div",2),O.Oc(7,bt,1,1,"j-empty-placeholder",3),O.Vb(),O.Vb(),O.Rb(8,"j-exchange-rates"),O.Vb()),2&t&&(O.Ab(2),O.rc("ngIf",e.isAccountsLoading),O.Ab(2),O.rc("ngIf",!e.isAccountsLoading),O.Ab(1),O.rc("ngIf",(null==e.cards?null:e.cards.length)>0),O.Ab(1),O.rc("ngIf",(null==e.deposits?null:e.deposits.length)>0),O.Ab(1),O.rc("ngIf",0==(null==e.accounts?null:e.accounts.length)&&0==(null==e.cards?null:e.cards.length)&&0==(null==e.deposits?null:e.deposits.length)))},directives:[i.u,R.a,l.a,V.a,i.t,X,J,Z.a],styles:[".accounts-block[_ngcontent-%COMP%]{display:grid;row-gap:1rem}@media(min-width:670px){.accounts-block[_ngcontent-%COMP%]{grid-template-columns:1fr 295px}}.accounts-wrap[_ngcontent-%COMP%]{margin:2rem 0}.accounts-heading[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-bottom:1rem}.accounts-list[_ngcontent-%COMP%]{min-height:145px;position:relative}.deposit-item[_ngcontent-%COMP%]{cursor:default!important}"]}),t})();var ht=n("R0Ic"),mt=n("aDQ/"),gt=n("paXB"),ft=n("7/bn"),vt=n("oMXN"),Ct=n("EiG8"),St=n("aZ8m");let Ot=(()=>{class t{constructor(){}prepareRoute(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Kb({type:t,selectors:[["j-home"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"]],template:function(t,e){1&t&&(O.Wb(0,"j-layout-home"),O.Wb(1,"j-aside"),O.Rb(2,"j-nav-main"),O.Vb(),O.Wb(3,"j-main"),O.Wb(4,"section",0),O.Wb(5,"section",1),O.Rb(6,"j-header"),O.Rb(7,"router-outlet"),O.Vb(),O.Vb(),O.Vb(),O.Vb())},directives:[gt.a,ft.a,vt.a,Ct.a,St.a,h.h],styles:[""],encapsulation:2,data:{animation:[Object(ht.n)("routeAnimations",[Object(ht.m)("* => slideRouteAnimations",Object(ht.o)(mt.a))])]}}),t})();var Tt=n("IzEk"),yt=n("9N4E"),_t=n("y5b2"),At=n("TwVa"),xt=n("jZlK"),It=n("iCQh"),wt=n("mR7B"),Et=n("S1F0"),Pt=n("oKsb"),Mt=n("zdqJ"),kt=n("fvpk"),Rt=n("Tile"),Vt=n("THGi"),Lt=n("S09V"),Nt=n("7rOj"),jt=n("VO+5"),Wt=n("Dvla");function Dt(t,e){if(1&t){const t=O.Xb();O.Wb(0,"div"),O.Wb(1,"div",18),O.Wb(2,"div",3),O.Rb(3,"div",19),O.Wb(4,"button",5),O.ic("loaded",(function(e){return O.Fc(t),O.lc().onAccountLoad(e)}))("failed",(function(e){return O.Fc(t),O.lc().onAccountFail()}))("click",(function(e){return O.Fc(t),O.lc().onQrService(e)})),O.Rb(5,"span",6),O.Rb(6,"span",7),O.Vb(),O.Vb(),O.Rb(7,"img",8),O.Vb(),O.Vb()}2&t&&(O.Ab(5),O.rc("inlineSVG","assets/icons/account/print.svg"))}function Ft(t,e){1&t&&(O.Wb(0,"h6",20),O.Qc(1),O.mc(2,"translate"),O.Vb()),2&t&&(O.Ab(1),O.Rc(O.nc(2,1,"ACCOUNTS.REQUISITES.LIST_TITLE")))}function Qt(t,e){if(1&t&&(O.Wb(0,"div",21),O.Wb(1,"div",22),O.Qc(2),O.mc(3,"translate"),O.Vb(),O.Wb(4,"div",23),O.Qc(5),O.Vb(),O.Vb()),2&t){const t=e.$implicit;O.Ab(2),O.Sc(" ",O.nc(3,2,t.label),": "),O.Ab(3),O.Sc(" ",t.value," ")}}function Ut(t,e){if(1&t&&(O.Wb(0,"div",21),O.Wb(1,"div",22),O.Qc(2),O.mc(3,"translate"),O.Vb(),O.Wb(4,"div",23),O.Qc(5),O.Vb(),O.Vb()),2&t){const t=e.$implicit;O.Ab(2),O.Sc(" ",O.nc(3,2,t.label),": "),O.Ab(3),O.Sc(" ",t.value," ")}}function Gt(t,e){if(1&t&&(O.Wb(0,"div",24),O.Wb(1,"h6",20),O.Qc(2),O.mc(3,"translate"),O.Vb(),O.Oc(4,Ut,6,4,"div",11),O.Vb()),2&t){const t=O.lc();O.Ab(2),O.Rc(O.nc(3,2,"ACCOUNTS.REQUISITES.LIST_OLD_TITLE")),O.Ab(2),O.rc("ngForOf",t.oldList)}}let $t=(()=>{class t{constructor(t,e,n,i,a,c,r,o,s){this.companyService=t,this.bankFromAccount=e,this.maskPipe=n,this.formatIban=i,this.translateService=a,this.notifierService=c,this.accountsService=r,this.filesService=o,this.featureFlagsService=s,this.isLoaded=!1,this.knp="",this.isQrVisible=!1,this.subscription=new w.a,this.loadFeatureFlags()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.generateList(),this.generateOldList(),this.generateTextToCopy(),this.isLoaded=!0,this.checkFeatureFlags()}get hasAtfIban(){var t;return(null===(t=this.account)||void 0===t?void 0:t.hasAtfIban)||!1}loadFeatureFlags(){return Object(I.a)(this,void 0,void 0,(function*(){this.featureFlags=yield this.featureFlagsService.featureFlags$.toPromise()}))}onAccountLoad(t){this.init(t)}onAccountFail(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}onCopy(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}onDownload(){return Object(I.a)(this,void 0,void 0,(function*(){try{const t=yield this.accountsService.getPdf(this.companyService.currentId,this.account.iban);this.filesService.downloadFile(t,`${this.account.iban}.pdf`)}catch(t){console.error(t)}}))}generateList(){var t,e,n,i;this.list=[{label:this.appendTranslationPrefix("COMPANY"),value:this.companyService.currentCompany.name},{label:this.appendTranslationPrefix("IIN"),valueToCopy:this.companyService.currentCompany.bin,value:this.maskPipe.transform(this.companyService.currentCompany.bin,Lt.a.iin.mask)},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),valueToCopy:null===(t=this.account)||void 0===t?void 0:t.iban,value:this.formatIban.transform(null===(e=this.account)||void 0===e?void 0:e.iban)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(null===(n=this.account)||void 0===n?void 0:n.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(null===(i=this.account)||void 0===i?void 0:i.iban,"bic")}]}generateOldList(){var t;const e=null===(t=this.account)||void 0===t?void 0:t.alterCode;this.oldList=[{label:this.appendTranslationPrefix("IBAN"),valueToCopy:e,value:this.formatIban.transform(e)},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(e,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(e,"bic")}]}generateTextToCopy(){this.textToCopy=this.list.map(t=>{if(t.value||t.valueToCopy)return`${this.translateService.instant(t.label)}: ${t.valueToCopy||t.value}`}).join("\n")}appendTranslationPrefix(t){return`ACCOUNTS.REQUISITES.${t}`}init(t){return Object(I.a)(this,void 0,void 0,(function*(){this.account=t,this.generateRequisites(),this.generateTextToCopy(),this.isLoaded=!0}))}loadQr(){return Object(I.a)(this,void 0,void 0,(function*(){const t=this.companyService.currentCompany.kod;this.qrFile=yield this.accountsService.getQrPrint(this.account.id,this.account.iban,t,this.knp)}))}onQrService(t){t.preventDefault(),this.knp="859",this.loadQr(),this.filesService.downloadFile(this.qrFile,`${this.companyService.currentCompany.shortName} QR \u0437\u0430 \u0443\u0441\u043b\u0443\u0433\u0438.jpg`)}onQrProduct(t){t.preventDefault(),this.knp="710",this.loadQr(),this.filesService.downloadFile(this.qrFile,`${this.companyService.currentCompany.shortName} QR \u0437\u0430 \u0442\u043e\u0432\u0430\u0440.jpg`)}checkFeatureFlags(){var t,e;return Object(I.a)(this,void 0,void 0,(function*(){this.featureFlags||(yield this.loadFeatureFlags()),this.isQrVisible=!this.featureFlagsService.isDisabled(m.a.ACCOUNT_QR)&&"ACCOUNT"===this.account.accountType&&(null===(t=this.account.balance)||void 0===t?void 0:t.currency)&&"KZT"===(null===(e=this.account.balance)||void 0===e?void 0:e.currency)}))}generateRequisites(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.account.iban},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.account.iban),valueToCopy:this.account.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.account.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.account.iban,"bic")}]}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(T.a),O.Qb(Nt.b),O.Qb(o.b),O.Qb(Nt.d),O.Qb(V.e),O.Qb(jt.c),O.Qb(E.c),O.Qb(It.a),O.Qb(m.b))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-requisites"]],inputs:{account:"account"},decls:22,vars:8,consts:[["jTour","REQUISITES.QR","jTourPosition","right",1,"info","mb-3"],[4,"ngIf"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.PRODUCT"],[1,"btn","btn-link","qr__print","p3",3,"loaded","failed","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","/assets/img/cards/qr.png",1,"qr__img"],["jTour","REQUISITES.INFO","jTourPosition","right",1,"info","mb-3"],["class","mb-3",4,"ngIf"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],["class","info","jTour","REQUISITES.OLD","jTourPosition","right",4,"ngIf"],[1,"qr","mb-4"],["translate","ACCOUNTS.REQUISITES.QR.SERVICE"],[1,"mb-3"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["jTour","REQUISITES.OLD","jTourPosition","right",1,"info"]],template:function(t,e){1&t&&(O.Wb(0,"div",0),O.Oc(1,Dt,8,1,"div",1),O.Wb(2,"div",2),O.Wb(3,"div",3),O.Rb(4,"div",4),O.Wb(5,"button",5),O.ic("loaded",(function(t){return e.onAccountLoad(t)}))("failed",(function(t){return e.onAccountFail()}))("click",(function(t){return e.onQrProduct(t)})),O.Rb(6,"span",6),O.Rb(7,"span",7),O.Vb(),O.Vb(),O.Rb(8,"img",8),O.Vb(),O.Vb(),O.Wb(9,"div",9),O.Oc(10,Ft,3,3,"h6",10),O.Oc(11,Qt,6,4,"div",11),O.Wb(12,"div",12),O.Wb(13,"button",13),O.ic("click",(function(t){return e.onDownload()})),O.Rb(14,"div",14),O.Wb(15,"strong",15),O.Qc(16,"ACCOUNTS.REQUISITES.DOWNLOAD"),O.Vb(),O.Vb(),O.Wb(17,"button",16),O.ic("click",(function(t){return e.onCopy()})),O.Rb(18,"div",14),O.Wb(19,"strong",15),O.Qc(20,"ACCOUNTS.REQUISITES.COPY"),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Oc(21,Gt,5,4,"div",17)),2&t&&(O.Ab(1),O.rc("ngIf",e.isQrVisible),O.Ab(5),O.rc("inlineSVG","assets/icons/account/print.svg"),O.Ab(4),O.rc("ngIf",e.hasAtfIban),O.Ab(1),O.rc("ngForOf",e.list),O.Ab(3),O.rc("inlineSVG","assets/icons/account/pdf.svg"),O.Ab(3),O.rc("cbContent",e.textToCopy),O.Ab(1),O.rc("inlineSVG","assets/icons/account/copy.svg"),O.Ab(3),O.rc("ngIf",e.hasAtfIban))},directives:[Mt.a,i.u,V.a,W.a,i.t,Wt.a],pipes:[V.d],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;-webkit-box-pack:center;justify-content:center;min-width:calc(50% - .5rem)}.qr[_ngcontent-%COMP%], .requisites__button[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.qr[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}.qr[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:-webkit-inline-box;display:inline-flex;margin-top:.5rem;padding:0}.qr__print[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]:hover{-webkit-transform:none;transform:none}.qr__print[_ngcontent-%COMP%]:hover{color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}.requisites__footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}"]}),t})();var qt=n("p6Hd"),Kt=function(t){return t.PDF="PDF",t.XLSX="XLSX",t.ONE_C="ONE_C",t}({}),Ht=function(t){return t.DAILY="DAILY",t.MONTHLY="MONTHLY",t}({});let Bt=(()=>{class t{constructor(t,e){this.companyService=t,this.api=e}getSubscriptions(t){const e=this.getApiUrl(t);return this.api.get(e)}saveSubscription(t,e){const n=this.getApiUrl(t.accountId,e);return this.api.put(n,t)}createSubscription(t){const e=this.getApiUrl(t.accountId);return this.api.post(e,t)}deleteSubscription(t,e){const n=this.getApiUrl(t,e);return this.api.delete(n)}getApiUrl(t,e=null){return`companies/${this.companyService.currentId}/accounts/${t}/statements-subscriptions${e?"/"+e:""}`}}return t.\u0275fac=function(e){return new(e||t)(O.ec(T.a),O.ec(qt.a))},t.\u0275prov=O.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Xt=n("YMfE"),Yt=n("Bl/x"),zt=n("M6pS"),Jt=n("9odQ");function Zt(t,e){if(1&t&&(O.Wb(0,"div",18),O.Rb(1,"input",19),O.Wb(2,"label",20),O.Qc(3),O.Vb(),O.Vb()),2&t){const t=e.$implicit;O.Ab(1),O.rc("id",t.id)("value",t.value),O.Ab(1),O.rc("for",t.id),O.Ab(1),O.Rc(t.label)}}function te(t,e){if(1&t){const t=O.Xb();O.Wb(0,"a",24),O.ic("click",(function(e){O.Fc(t);const n=O.lc().index;return O.lc(2).deleteEmail(e,n)})),O.Vb()}2&t&&O.rc("inlineSVG","assets/icons/shared/delete.svg")}function ee(t,e){if(1&t&&(O.Wb(0,"div",21),O.Rb(1,"j-input",22),O.mc(2,"translate"),O.mc(3,"translate"),O.Oc(4,te,1,1,"a",23),O.Vb()),2&t){const t=e.$implicit,n=e.index,i=O.lc(2);O.Ab(1),O.rc("label",O.nc(2,6,"ACCOUNTS.EXPORT.EMAIL.TITLE"))("name","exportEmail"+n)("formControl",t)("errorText",O.nc(3,8,i.mapEmailErrorText(t.errors)))("hasError",t.errors&&i.isSubmitted),O.Ab(3),O.rc("ngIf",n>0)}}function ne(t,e){if(1&t){const t=O.Xb();O.Wb(0,"a",25),O.ic("click",(function(e){return O.Fc(t),O.lc(2).addEmail(e)})),O.Qc(1," ACCOUNTS.EXPORT.EMAIL.ADD "),O.Vb()}}function ie(t,e){if(1&t){const t=O.Xb();O.Wb(0,"form",1),O.Wb(1,"div",2),O.Rb(2,"j-switch",3),O.Wb(3,"span",4),O.Wb(4,"strong",5),O.Qc(5),O.Vb(),O.Rb(6,"br"),O.Wb(7,"small",6),O.Qc(8),O.Vb(),O.Vb(),O.Vb(),O.Wb(9,"div",7),O.Wb(10,"div",8),O.Wb(11,"div",9),O.Wb(12,"strong",10),O.Qc(13,"ACCOUNTS.EXPORT.FILE_FORMAT"),O.Vb(),O.Wb(14,"div",11),O.Oc(15,Zt,4,4,"div",12),O.Vb(),O.Vb(),O.Wb(16,"div",9),O.Wb(17,"strong",10),O.Qc(18,"ACCOUNTS.EXPORT.EMAIL.TITLE"),O.Vb(),O.Wb(19,"div",13),O.Qc(20," ACCOUNTS.EXPORT.EMAIL.DESCRIPTION "),O.Vb(),O.Oc(21,ee,5,10,"div",14),O.Oc(22,ne,2,0,"a",15),O.Vb(),O.Wb(23,"div",16),O.Wb(24,"button",17),O.ic("click",(function(e){return O.Fc(t),O.lc().onSubmit()})),O.Qc(25,"SHARED.SAVE"),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb()}if(2&t){const t=O.lc();O.rc("formGroup",t.subscriptionForm),O.Ab(5),O.Rc(t.title),O.Ab(3),O.Rc(t.description),O.Ab(1),O.rc("@smoothCollapse",t.isCollapsed?"final":"initial"),O.Ab(6),O.rc("ngForOf",t.fileTypes),O.Ab(6),O.rc("ngForOf",t.emailControls),O.Ab(1),O.rc("ngIf",t.emailControls.length<3),O.Ab(2),O.rc("disabled",t.isLoading)("jLoading",t.isLoading)}}let ae=(()=>{class t{constructor(){this.deleted=new O.n,this.submitted=new O.n,this.isSubmitted=!1,this.fileTypes=[{label:"PDF",value:"PDF",id:Object(Xt.generateUniqueId)()},{label:"EXL",value:"XLSX",id:Object(Xt.generateUniqueId)()},{label:"1C",value:"ONE_C",id:Object(Xt.generateUniqueId)()}],this.FORM_DEFAULTS={enabled:!1,id:null,emails:[""],exportType:Kt.PDF}}ngOnChanges(t){var e,n,i,a,c,r;t.isLoading&&(t.isLoading.currentValue?null===(e=this.subscriptionForm)||void 0===e||e.disable():null===(n=this.subscriptionForm)||void 0===n||n.enable()),t.savedSubscription&&(null===(i=this.subscriptionForm)||void 0===i||i.patchValue({id:(null===(a=this.savedSubscription)||void 0===a?void 0:a.id)||this.f.id.value||this.FORM_DEFAULTS.id,emails:(null===(c=this.savedSubscription)||void 0===c?void 0:c.emails)||this.f.emails.value||this.FORM_DEFAULTS.emails,exportType:(null===(r=this.savedSubscription)||void 0===r?void 0:r.exportType)||this.f.exportType.value||this.FORM_DEFAULTS.exportType}))}ngOnInit(){var t,e,n,i;const c={enabled:!(null===(t=this.savedSubscription)||void 0===t||!t.id),id:(null===(e=this.savedSubscription)||void 0===e?void 0:e.id)||this.FORM_DEFAULTS.id,emails:(null===(n=this.savedSubscription)||void 0===n?void 0:n.emails)||this.FORM_DEFAULTS.emails,exportType:(null===(i=this.savedSubscription)||void 0===i?void 0:i.exportType)||this.FORM_DEFAULTS.exportType};this.subscriptionForm=new a.k({switch:new a.h(c.enabled),id:new a.h(c.id),emails:new a.e(c.emails.map(t=>new a.h(t,[a.H.email,a.H.required]))),exportType:new a.h(c.exportType)}),this.isLoading&&this.subscriptionForm.disable(),this.subscriptionForm.valueChanges.subscribe(t=>{this.isSubmitted=!1,0==t.switch&&(this.deleted.emit(this.f.id.value),this.clearFormArray(this.f.emails),this.subscriptionForm.reset(this.FORM_DEFAULTS))})}onSubmit(){this.isSubmitted=!0,this.subscriptionForm.invalid||this.submitted.emit(this.subscriptionForm.getRawValue())}addEmail(t){t.preventDefault(),this.isLoading||3==this.emailControls.length||(this.isSubmitted=!1,this.emailControls.push(new a.h("",[a.H.email,a.H.required])))}deleteEmail(t,e){t.preventDefault(),this.isLoading||this.emailControls.splice(e,1)}mapEmailErrorText(t){var e;return(null===(e=t)||void 0===e?void 0:e.email)?"ERRORS.WRONG_FORMAT":null}clearFormArray(t){for(;1!==t.length;)t.removeAt(0)}get isCollapsed(){var t,e,n;return 1==(null===(n=null===(e=null===(t=this.subscriptionForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.switch)||void 0===n?void 0:n.value)}get emailControls(){return this.f.emails.controls}get f(){var t;return null===(t=this.subscriptionForm)||void 0===t?void 0:t.controls}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-subscription"]],inputs:{title:"title",isLoading:"isLoading",description:"description",savedSubscription:"savedSubscription"},outputs:{deleted:"deleted",submitted:"submitted"},features:[O.yb()],decls:1,vars:1,consts:[["class","export",3,"formGroup",4,"ngIf"],[1,"export",3,"formGroup"],[1,"export__header"],["formControlName","switch"],[1,"ml-3"],["translate",""],["translate","",1,"text-gray"],[1,"export__body"],[1,"export__form"],[1,"form-group"],["translate","",1,"export__label","p2"],[1,"export__types"],["class","export__radio",4,"ngFor","ngForOf"],["translate","",1,"p3","text-muted","export__description"],["class","export__email",4,"ngFor","ngForOf"],["href","#","class","export__add-email link-blue","translate","",3,"click",4,"ngIf"],[1,"export__submit"],["type","submit","translate","",1,"btn","btn-primary",3,"disabled","jLoading","click"],[1,"export__radio"],["type","radio","formControlName","exportType","name","exportType",3,"id","value"],[1,"btn","btn-sm",3,"for"],[1,"export__email"],[3,"label","name","formControl","errorText","hasError"],["href","#","class","export__delete-email",3,"inlineSVG","click",4,"ngIf"],["href","#",1,"export__delete-email",3,"inlineSVG","click"],["href","#","translate","",1,"export__add-email","link-blue",3,"click"]],template:function(t,e){1&t&&O.Oc(0,ie,26,9,"form",0),2&t&&O.rc("ngIf",e.subscriptionForm)},directives:[i.u,a.J,a.u,a.l,Yt.a,a.t,a.j,V.a,i.t,zt.a,a.B,a.c,Jt.b,a.i,W.a],pipes:[V.d],styles:[".export[_ngcontent-%COMP%]{margin:.5rem 0 1rem;background:#fff;border-radius:.75rem}.export__header[_ngcontent-%COMP%]{padding:1rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.export__body[_ngcontent-%COMP%]{padding:0 1rem;border-top:1px solid #eceef1}.export__types[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#fff;background-color:#474b52;border-color:#474b52;box-shadow:none}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover{color:#fff;background-color:#35383e;border-color:#2f3237}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus{color:#fff;background-color:#35383e;border-color:#2f3237;box-shadow:0 0 0 .0625rem rgba(99,102,108,.5)}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#474b52;border-color:#474b52}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#2f3237;border-color:#292c30}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(99,102,108,.5)}.export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:active, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1);transform:scale(1);color:#fff!important}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#212529;background-color:#fff;border-color:#d6dadf;margin-right:.5rem;margin-bottom:0;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);color:#666c72;height:35px;position:relative}.export__radio[_ngcontent-%COMP%]   label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#212529;background-color:#ececec;border-color:#b9c0c9}.export__radio[_ngcontent-%COMP%]   label.focus[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(187,191,196,.5)}.export__radio[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#fff;border-color:#d6dadf}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#e6e6e6;border-color:#b2bac3}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .export__radio[_ngcontent-%COMP%]   label.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .0625rem rgba(187,191,196,.5)}.export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:active, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus, .export__radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#666c72!important;-webkit-transform:scale(1);transform:scale(1)}.export__form[_ngcontent-%COMP%]{padding-top:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%] + .form-group[_ngcontent-%COMP%]{margin-top:1.5rem}.export__label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.export__description[_ngcontent-%COMP%]{margin-bottom:1rem}.export__add-email[_ngcontent-%COMP%]{position:relative;top:-.5rem}.export__delete-email[_ngcontent-%COMP%]{color:#b7bec5;margin:0 1rem 1rem}.export__delete-email[_ngcontent-%COMP%]:hover{color:#ef5630}.export__email[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.export__email[_ngcontent-%COMP%]   j-input[_ngcontent-%COMP%]{width:100%}.export__submit[_ngcontent-%COMP%]{padding:1rem 0;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}"],data:{animation:[Object(ht.n)("smoothCollapse",[Object(ht.k)("initial",Object(ht.l)({height:"0",overflow:"hidden",opacity:"0"})),Object(ht.k)("final",Object(ht.l)({overflow:"hidden",opacity:"1"})),Object(ht.m)("initial=>final",Object(ht.e)("300ms")),Object(ht.m)("final=>initial",Object(ht.e)("300ms"))])]}}),t})();function ce(t,e){if(1&t){const t=O.Xb();O.Ub(0),O.Wb(1,"j-account-subscription",1),O.ic("deleted",(function(e){return O.Fc(t),O.lc().onDeleteDaily(e)}))("submitted",(function(e){return O.Fc(t),O.lc().onDailySubmit(e)})),O.Vb(),O.Wb(2,"j-account-subscription",1),O.ic("deleted",(function(e){return O.Fc(t),O.lc().onDeleteMonthly(e)}))("submitted",(function(e){return O.Fc(t),O.lc().onMonthlySubmit(e)})),O.Vb(),O.Tb()}if(2&t){const t=O.lc();O.Ab(1),O.rc("title","ACCOUNTS.EXPORT.DAILY.TITLE")("description","ACCOUNTS.EXPORT.DAILY.DESCRIPTION")("savedSubscription",t.dailySubscription)("isLoading",t.isDailyLoading),O.Ab(1),O.rc("title","ACCOUNTS.EXPORT.MONTHLY.TITLE")("description","ACCOUNTS.EXPORT.MONTHLY.DESCRIPTION")("savedSubscription",t.monthlySubscription)("isLoading",t.isMonthlyLoading)}}let re=(()=>{class t{constructor(t,e,n){this.accountSubscriptionService=t,this.notifierService=e,this.translateService=n,this.loaded=!1,this.isDailyLoading=!0,this.isMonthlyLoading=!0}ngOnInit(){this.init()}init(){return Object(I.a)(this,void 0,void 0,(function*(){const t=yield this.accountSubscriptionService.getSubscriptions(this.account.id);this.dailySubscription=t.find(t=>t.subscriptionType===Ht.DAILY)||null,this.monthlySubscription=t.find(t=>t.subscriptionType===Ht.MONTHLY)||null,this.isDailyLoading=!1,this.isMonthlyLoading=!1,this.loaded=!0}))}onDailySubmit(t){return Object(I.a)(this,void 0,void 0,(function*(){this.isDailyLoading=!0;try{this.dailySubscription=yield this.submitSubscription(t,Ht.DAILY),this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.SUBSCRIBED"))}catch(e){this.notifierService.notify("error",e.description||e.code)}finally{this.isDailyLoading=!1}}))}onMonthlySubmit(t){return Object(I.a)(this,void 0,void 0,(function*(){this.isMonthlyLoading=!0;try{this.monthlySubscription=yield this.submitSubscription(t,Ht.MONTHLY),this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.SUBSCRIBED"))}catch(e){this.notifierService.notify("error",e.description||e.code)}finally{this.isMonthlyLoading=!1}}))}onDeleteDaily(t){return Object(I.a)(this,void 0,void 0,(function*(){if(!this.isDailyLoading){this.isDailyLoading=!0;try{yield this.deleteSubscription(t),this.dailySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.DAILY.UNSUBSCRIBED"))}catch(e){this.notifierService.notify("error",e.description||e.code)}finally{this.isDailyLoading=!1}}}))}onDeleteMonthly(t){return Object(I.a)(this,void 0,void 0,(function*(){if(!this.isMonthlyLoading){this.isMonthlyLoading=!0;try{yield this.deleteSubscription(t),this.monthlySubscription=null,this.notifierService.notify("default",this.translateService.instant("ACCOUNTS.EXPORT.MONTHLY.UNSUBSCRIBED"))}catch(e){this.notifierService.notify("error",e.description||e.code)}finally{this.isMonthlyLoading=!1}}}))}deleteSubscription(t){if(t)return this.accountSubscriptionService.deleteSubscription(this.account.id,t)}submitSubscription(t,e){const n={accountId:this.account.id,emails:t.emails,exportType:t.exportType,subscriptionType:e};return t.id?this.accountSubscriptionService.saveSubscription(n,t.id):this.accountSubscriptionService.createSubscription(n)}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(Bt),O.Qb(jt.c),O.Qb(V.e))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-export"]],inputs:{account:"account"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","description","savedSubscription","isLoading","deleted","submitted"]],template:function(t,e){1&t&&O.Oc(0,ce,3,8,"ng-container",0),2&t&&O.rc("ngIf",e.loaded)},directives:[i.u,ae],styles:[""]}),t})();function oe(t,e){if(1&t){const t=O.Xb();O.Wb(0,"div",9),O.Rb(1,"div"),O.Rb(2,"div"),O.Wb(3,"div"),O.Wb(4,"span",10),O.Qc(5,"ACCOUNTS.SETTINGS.LIMIT_ALL"),O.Vb(),O.Vb(),O.Wb(6,"j-switch",11),O.ic("change",(function(e){return O.Fc(t),O.lc().onChangeAll(e)})),O.Vb(),O.Vb()}if(2&t){const t=O.lc();O.Ab(6),O.rc("value",t.isAllSelected)}}function se(t,e){if(1&t){const t=O.Xb();O.Wb(0,"div",12),O.Wb(1,"div",13),O.Qc(2),O.Vb(),O.Wb(3,"div",14),O.Qc(4),O.Vb(),O.Wb(5,"div",13),O.Wb(6,"span"),O.Qc(7),O.Vb(),O.Wb(8,"small",15),O.Wb(9,"span",16),O.Qc(10),O.Vb(),O.Qc(11," \u2022 "),O.Wb(12,"span",16),O.Qc(13),O.Vb(),O.Vb(),O.Vb(),O.Wb(14,"j-switch",11),O.ic("change",(function(n){O.Fc(t);const i=e.$implicit;return O.lc().onChange(n,i)})),O.Vb(),O.Vb()}if(2&t){const t=e.$implicit,n=e.index,i=O.lc();O.Ab(2),O.Rc(n+1),O.Ab(1),O.Db(t.color),O.Ab(1),O.Sc(" ",t.initials," "),O.Ab(3),O.Uc("",t.lastname," ",t.firstname," ",t.middlename,""),O.Ab(3),O.Rc(t.role),O.Ab(3),O.Rc(t.sign),O.Ab(1),O.rc("value",t.accountGrantType===i.grants.UNAVAILABLE)}}function le(t,e){if(1&t){const t=O.Xb();O.Ub(0),O.Wb(1,"div",17),O.Qc(2,"ACCOUNTS.SETTINGS.GRANTS_LOADING_ERROR"),O.Vb(),O.Wb(3,"button",18),O.ic("click",(function(e){return O.Fc(t),O.lc().getAccountGrants()})),O.Qc(4,"SHARED.REFRESH"),O.Vb(),O.Tb()}}function de(t,e){if(1&t){const t=O.Xb();O.Ub(0),O.Wb(1,"div",17),O.Qc(2,"ACCOUNTS.SETTINGS.NO_GRANTABLE_USERS"),O.Vb(),O.Wb(3,"button",18),O.ic("click",(function(e){return O.Fc(t),O.lc().modal.dismiss()})),O.Qc(4,"SHARED.CLOSE"),O.Vb(),O.Tb()}}let ue=(()=>{class t{constructor(t,e,n,i){this.modal=t,this.accountsService=e,this.notifierService=n,this.translateService=i,this.error=null,this.grants=E.d}ngOnInit(){this.getAccountGrants()}getAccountGrants(){return Object(I.a)(this,void 0,void 0,(function*(){try{this.users=yield this.accountsService.getAccountsGrants(this.companyId,this.accountId)}catch(t){this.error="error"}}))}onChange(t,e){return Object(I.a)(this,void 0,void 0,(function*(){try{e.accountGrantType=this.getGrantType(t.target.value),yield this.accountsService.setAccountGrant(this.companyId,this.accountId,[this.mapParams(e,e.accountGrantType)]),this.showNotificationForUser(e),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId)}catch(n){this.notifierService.notify("error",n.description||n.code||this.translateService.instant("SHARED.ACTION_ERROR"))}}))}onChangeAll(t){return Object(I.a)(this,void 0,void 0,(function*(){try{const e=this.getGrantType(t.target.value),n=this.users.map(t=>this.mapParams(t,e));yield this.accountsService.setAccountGrant(this.companyId,this.accountId,n),this.showNotification(e),this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId),this.users.forEach(t=>t.accountGrantType=e)}catch(e){this.notifierService.notify("error",e.description||e.code||this.translateService.instant("SHARED.ACTION_ERROR"))}}))}showNotificationForUser(t){const e=this.translateService.instant(t.accountGrantType===E.d.AVAILABLE?"ACCOUNTS.SETTINGS.USER_GRANTED":"ACCOUNTS.SETTINGS.USER_LIMITED",{user:`${t.lastname} ${t.firstname} ${t.middlename}`});this.notifierService.notify("default",e)}showNotification(t){const e=this.translateService.instant(t===E.d.AVAILABLE?"ACCOUNTS.SETTINGS.GRANTED_ALL":"ACCOUNTS.SETTINGS.LIMITED_ALL");this.notifierService.notify("default",e)}mapParams(t,e){return{id:t.userId,userAuthorityId:t.userAuthorityId,accountGrantType:e}}getGrantType(t){return"true"===t?E.d.UNAVAILABLE:E.d.AVAILABLE}get isAllSelected(){var t;return null===(t=this.users)||void 0===t?void 0:t.every(t=>t.accountGrantType===this.grants.UNAVAILABLE)}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(r.a),O.Qb(E.c),O.Qb(jt.c),O.Qb(V.e))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-grants"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:12,vars:7,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-header"],["translate","",1,"users-header"],[1,"modal-body"],["translate","","class","users-list__row",4,"ngIf"],["class","users-list__row",4,"ngFor","ngForOf"],[4,"ngIf"],["translate","",1,"users-list__row"],["translate","",1,"users-list__cell"],[1,"users-list__cell",3,"value","change"],[1,"users-list__row"],[1,"users-list__cell"],[1,"users-list__initials","p2","users-list__cell"],[1,"text-gray"],["translate",""],["translate","",1,"users-list__error"],["translate","",1,"btn","btn-link","btn-block",3,"click"]],template:function(t,e){1&t&&(O.Wb(0,"div",0),O.Wb(1,"button",1),O.ic("click",(function(t){return e.modal.dismiss()})),O.Rb(2,"img",2),O.mc(3,"translate"),O.Vb(),O.Wb(4,"div",3),O.Wb(5,"h5",4),O.Qc(6,"DIRECTORY.EMPLOYEES.TITLE"),O.Vb(),O.Vb(),O.Wb(7,"div",5),O.Oc(8,oe,7,1,"div",6),O.Oc(9,se,15,10,"div",7),O.Oc(10,le,5,0,"ng-container",8),O.Oc(11,de,5,0,"ng-container",8),O.Vb(),O.Vb()),2&t&&(O.Ab(2),O.sc("alt",O.nc(3,5,"SHARED.CLOSE")),O.Ab(6),O.rc("ngIf",!e.error&&(null==e.users?null:e.users.length)>0),O.Ab(1),O.rc("ngForOf",e.users),O.Ab(1),O.rc("ngIf",e.error),O.Ab(1),O.rc("ngIf",0===e.users.length))},directives:[V.a,i.u,i.t,Yt.a],pipes:[V.d],styles:[".users-header[_ngcontent-%COMP%]{padding:.5rem}.users-list__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto 1fr auto;align-content:space-around;-webkit-box-pack:justify;justify-content:space-between;background:#fff;margin:.5rem 0}.users-list__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.users-list__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.users-list__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.users-list__cell[_ngcontent-%COMP%]{display:grid;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin:auto .5rem;padding:.625rem 0}.users-list__error[_ngcontent-%COMP%]{color:#666c72;padding:2.5rem 4.75rem 1.5rem;text-align:center}.modal-body[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem;max-height:100%}"]}),t})(),be=(()=>{class t{constructor(t,e){this.modalService=t,this.accountsService=e,this.errorText=null}ngOnInit(){this.retrieveTotalLimitations()}retrieveTotalLimitations(){return Object(I.a)(this,void 0,void 0,(function*(){try{yield this.accountsService.retrieveTotalLimitations(this.companyId,this.accountId)}catch(t){}}))}openAccountGrants(){return Object(I.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(ue,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary modal-adaptive",centered:!0,size:"md"});t.componentInstance.companyId=this.companyId,t.componentInstance.accountId=this.accountId;try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(r.q),O.Qb(E.c))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account-settings"]],inputs:{companyId:"companyId",accountId:"accountId"},decls:15,vars:6,consts:[[1,"account-settings"],[1,"account-settings__block"],["translate","",1,"account-settings__header"],[1,"account-settings__content"],[1,"account-settings__title","col-md-10"],["translate",""],[1,"text-gray"],[1,"account-settings__control","col-md-2"],["translate","",1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&(O.Wb(0,"div",0),O.Wb(1,"div",1),O.Wb(2,"div",2),O.Qc(3,"ACCOUNTS.SETTINGS.MAIN"),O.Vb(),O.Wb(4,"div",3),O.Wb(5,"div",4),O.Wb(6,"div",5),O.Qc(7,"ACCOUNTS.SETTINGS.LIMIT_ACCESS"),O.Vb(),O.Wb(8,"small",6),O.Qc(9),O.mc(10,"translate"),O.mc(11,"async"),O.Vb(),O.Vb(),O.Wb(12,"div",7),O.Wb(13,"button",8),O.ic("click",(function(t){return e.openAccountGrants()})),O.Qc(14,"ACCOUNTS.SETTINGS.EDIT"),O.Vb(),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&t&&(O.Ab(9),O.Tc("",O.nc(10,2,"ACCOUNTS.SETTINGS.LIMITS"),": ",O.nc(11,4,e.accountsService.storeForTotal$),""))},directives:[V.a],pipes:[V.d,i.b],styles:[".account-settings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.account-settings__block[_ngcontent-%COMP%]{padding:1.5rem 0;background:#fff;border-radius:.75rem}.account-settings__header[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0 1rem 2rem}.account-settings__content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.account-settings__title[_ngcontent-%COMP%]{display:grid;grid-auto-rows:minmax(-webkit-min-content,-webkit-max-content);grid-auto-rows:minmax(min-content,max-content);row-gap:4px}.account-settings__control[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]}),t})();var pe=n("QiVB"),he=n("T+Ki"),me=n("4zJ+"),ge=n("/68H"),fe=n("tepA");function ve(t,e){1&t&&O.Rb(0,"j-account-migrated",17),2&t&&O.rc("isLarge",!0)}function Ce(t,e){if(1&t){const t=O.Xb();O.Wb(0,"a",13),O.ic("click",(function(e){return O.Fc(t),O.lc(2).onTabClick("settings",e)})),O.Qc(1," ACCOUNTS.SETTINGS.TITLE "),O.Vb()}if(2&t){const t=O.lc(2);O.Hb("active","settings"===t.activeTab)}}function Se(t,e){if(1&t){const t=O.Xb();O.Ub(0),O.Wb(1,"j-filter",18),O.ic("downloaded",(function(e){return O.Fc(t),O.lc(2).onDownload(e)})),O.Vb(),O.Tb()}if(2&t){const t=O.lc(2);O.Ab(1),O.rc("currency",t.balance.currency)}}function Oe(t,e){if(1&t&&(O.Ub(0),O.Rb(1,"j-requisites",19),O.Tb()),2&t){const t=O.lc(2);O.Ab(1),O.rc("account",t.account)}}function Te(t,e){if(1&t&&(O.Ub(0),O.Rb(1,"j-account-export",19),O.Tb()),2&t){const t=O.lc(2);O.Ab(1),O.rc("account",t.account)}}function ye(t,e){if(1&t&&(O.Ub(0),O.Rb(1,"j-account-settings",20),O.Tb()),2&t){const t=O.lc(2);O.Ab(1),O.rc("companyId",t.companyId)("accountId",t.account.id)}}function _e(t,e){if(1&t&&O.Rb(0,"j-statement-balances",27),2&t){const t=O.lc(3);O.rc("statement",t.statement)}}function Ae(t,e){1&t&&(O.Wb(0,"div",28),O.Qc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),O.Vb())}function xe(t,e){if(1&t&&(O.Wb(0,"div",29),O.Wb(1,"strong"),O.Qc(2),O.Vb(),O.Vb()),2&t){const t=O.lc(3);O.Ab(2),O.Rc(t.errorText)}}function Ie(t,e){1&t&&O.Rb(0,"j-animated-loading")}function we(t,e){1&t&&(O.Wb(0,"div",30),O.Rb(1,"j-statement-loading"),O.Vb())}function Ee(t,e){if(1&t){const t=O.Xb();O.Ub(0),O.Wb(1,"section",21),O.ic("scrolled",(function(e){return O.Fc(t),O.lc(2).onScroll()})),O.Oc(2,_e,1,1,"j-statement-balances",22),O.Rb(3,"j-statement",23),O.Oc(4,Ae,2,0,"div",24),O.Oc(5,xe,3,1,"div",25),O.Oc(6,Ie,1,0,"j-animated-loading",16),O.Vb(),O.Oc(7,we,2,0,"div",26),O.Tb()}if(2&t){const t=O.lc(2);O.Ab(1),O.rc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),O.Ab(1),O.rc("ngIf",t.statement&&t.statement.totalTransactionsCount>0),O.Ab(1),O.rc("statement",t.statement)("isLoadingExtra",!t.isLoading&&t.isLoadingExtra)("emptyLabel",t.emptyLabel),O.Ab(1),O.rc("ngIf",!t.hasMorePages&&t.statement.totalTransactionsCount>0),O.Ab(1),O.rc("ngIf",t.errorText),O.Ab(1),O.rc("ngIf",!t.isReady),O.Ab(1),O.rc("ngIf",t.isLoading)}}function Pe(t,e){if(1&t){const t=O.Xb();O.Wb(0,"f-page",1),O.ic("closed",(function(e){return O.Fc(t),O.lc().onClose()})),O.Wb(1,"f-page-header"),O.Wb(2,"section",2),O.Wb(3,"div",3),O.Wb(4,"div",4),O.Rb(5,"j-entity-logo",5),O.Wb(6,"span",6),O.Qc(7),O.mc(8,"formatIban"),O.Vb(),O.Vb(),O.Rb(9,"j-account-alter-code",7),O.Oc(10,ve,1,1,"j-account-migrated",8),O.Vb(),O.Wb(11,"h1",9),O.Rb(12,"j-money",10),O.Vb(),O.Vb(),O.Wb(13,"div",11),O.Wb(14,"nav",12),O.Wb(15,"a",13),O.ic("click",(function(e){return O.Fc(t),O.lc().onTabClick("statement",e)})),O.Qc(16," ACCOUNTS.STATEMENT.TITLE "),O.Vb(),O.Wb(17,"a",14),O.ic("click",(function(e){return O.Fc(t),O.lc().onTabClick("requisites",e)})),O.Qc(18," ACCOUNTS.REQUISITES.TITLE "),O.Vb(),O.Wb(19,"a",13),O.ic("click",(function(e){return O.Fc(t),O.lc().onTabClick("auto-export",e)})),O.Qc(20," ACCOUNTS.AUTO_EXPORT "),O.Vb(),O.Oc(21,Ce,2,2,"a",15),O.Vb(),O.Vb(),O.Vb(),O.Wb(22,"f-page-body"),O.Oc(23,Se,2,1,"ng-container",16),O.Oc(24,Oe,2,1,"ng-container",16),O.Oc(25,Te,2,1,"ng-container",16),O.Oc(26,ye,2,2,"ng-container",16),O.Vb(),O.Wb(27,"f-page-extra"),O.Oc(28,Ee,8,12,"ng-container",16),O.Vb(),O.Vb()}if(2&t){const t=O.lc();O.rc("bodyClassList","statement"===t.activeTab?"no-grow":""),O.Ab(5),O.rc("name",t.balance.currency),O.Ab(2),O.Rc(O.nc(8,18,t.account.iban)),O.Ab(2),O.rc("account",t.account),O.Ab(1),O.rc("ngIf",t.account.isMigrated),O.Ab(2),O.rc("money",t.balance),O.Ab(3),O.Hb("active","statement"===t.activeTab),O.Ab(2),O.Hb("active","requisites"===t.activeTab),O.Ab(2),O.Hb("active","auto-export"===t.activeTab),O.Ab(2),O.rc("ngIf",t.isSettingsAllowed),O.Ab(2),O.rc("ngIf","statement"===t.activeTab),O.Ab(1),O.rc("ngIf","requisites"===t.activeTab),O.Ab(1),O.rc("ngIf","auto-export"===t.activeTab),O.Ab(1),O.rc("ngIf","settings"===t.activeTab),O.Ab(2),O.rc("ngIf","statement"===t.activeTab)}}let Me=(()=>{class t{constructor(t,e,n,i,a,c,r,o,s){this.router=t,this.route=e,this.company=n,this.filterService=i,this.accountsService=a,this.datePipe=c,this.filesService=r,this.maskedService=o,this.tourService=s,this.isDetailsShown=!1,this.isLoading=!0,this.isLoadingExtra=!0,this.isReady=!1,this.hasMorePages=!0,this.isStatementsTourShown=!1,this.subscription=new w.a,this.tourStep=null,this.pageNumber=1,this.pageSize=10,this.cashedRouteQuery=JSON.parse(sessionStorage.getItem("accountRouteQuery"));const l=this.route.params.subscribe(t=>{this.iban=t.iban,this.loadData()});this.subscription.add(l);const d=this.route.data.subscribe(t=>{this.activeTab=t.tab});this.subscription.add(d);const u=this.route.paramMap.pipe(Object(C.a)(()=>window.history.state)).subscribe(t=>{this.tourStep=t.tourStep,this.checkAndStartTour()});if(this.subscription.add(u),this.cashedRouteQuery)this.filter=this.mapQueryParams(this.cashedRouteQuery),this.filterService.updateExtra(this.filter);else{const t=this.route.queryParams.pipe(Object(Tt.a)(1)).subscribe(t=>{this.updateCashedRouteQuery(t),this.filter=this.mapQueryParams(t),this.filterService.updateExtra(this.filter)});this.subscription.add(t)}const b=this.filterService.getScheme().subscribe(t=>{this.filter=Object.assign({},t),this.pageNumber=1,this.hasMorePages=!0,this.isLoading=!0,this.updateQueryParams(),this.loadStatement()});this.subscription.add(b)}ngAfterViewInit(){}ngOnDestroy(){this.subscription.unsubscribe()}onTabClick(t,e){e.preventDefault(),this.router.navigate([t],{relativeTo:this.route.parent})}onClose(){this.navigateToHome()}onScroll(){this.hasMorePages&&!this.isLoading&&(this.pageNumber++,this.loadStatement())}get emptyLabel(){return this.account.isMigrated?"ACCOUNTS.EMPTY_MIGRATED":"ACCOUNTS.EMPTY_STATEMENT"}onDownload(t){return Object(I.a)(this,void 0,void 0,(function*(){const e=yield this.accountsService.getStatement(this.company.currentId,this.iban,this.filter,this.pageNumber,this.pageSize,t);let n=t.substring(t.lastIndexOf("/")+1,t.length);"1c"===n&&(n+=".txt"),this.filesService.downloadFile(e,`${this.iban}.${n}`)}))}loadData(){return Object(I.a)(this,void 0,void 0,(function*(){try{yield this.loadAccount()}catch(t){console.error(t)}finally{this.isReady=!0}}))}loadAccount(){return Object(I.a)(this,void 0,void 0,(function*(){try{this.account=yield this.accountsService.getAccountByIban(this.company.currentId,this.iban),this.account.isMigrated&&this.accountsService.retrieveMergeDate()}catch(t){this.navigateToHome()}}))}loadStatement(){return Object(I.a)(this,void 0,void 0,(function*(){this.errorText="",this.isLoadingExtra=!0;try{if(this.filter.periodType&&this.filter.periodType!==_t.d.CUSTOM){const t=this.filterService.PERIOD_LIST.find(t=>t.type===this.filter.periodType);this.filter.periodFrom=t.dates.from,this.filter.periodTo=t.dates.to}const t=yield this.accountsService.getStatement(this.company.currentId,this.iban,this.filter,this.pageNumber,this.pageSize);this.hasMorePages=this.pageSize<=t.totalTransactionsCount,this.statement=t}catch(t){this.errorText=t}finally{this.isReady=!0,this.isLoading=!1,this.isLoadingExtra=!1,this.isStatementsTourShown||(this.checkAndStartTour(),this.isStatementsTourShown=!0)}}))}get balance(){return this.account&&this.account.balance}checkAndStartTour(){this.tourStep&&setTimeout(()=>{var t;switch(this.tourStep){case"REQUISITES_HOME.ACCOUNT":this.tourService.startTour(M.e.REQUISITES_ACCOUNT);break;case"STATEMENTS_HOME.ACCOUNT":let e=[M.e.STATEMENTS_ACCOUNT[0]];!this.isLoading&&(null===(t=this.statement)||void 0===t?void 0:t.totalTransactionsCount)>0&&(e=[...e,M.e.STATEMENTS_ACCOUNT[1]]),this.tourService.startTour(e)}},0)}navigateToHome(){this.router.navigate(["../.."],{relativeTo:this.route})}mapQueryParams(t){const e=Object.assign({},this.filterService.getDefaults(yt.a.ACCOUNTS));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&null!=i&&"null"!==i&&(e[n]="periodFrom"===n||"periodTo"===n?new Date(i):i)}return e}updateQueryParams(){const t=Object.assign({},this.filter),e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&null!=i&&"null"!==i&&(e[n]="periodFrom"===n||"periodTo"===n?this.datePipe.transform(i,"yyyy-MM-dd"):i,"amountFrom"!==n&&"amountTo"!==n||(e[n]=this.maskedService.getNumberedAmount(i)))}this.updateCashedRouteQuery(t),this.router.navigate([],{queryParams:e,relativeTo:this.route})}updateCashedRouteQuery(t){sessionStorage.setItem("accountRouteQuery",JSON.stringify(t))}get companyId(){return this.company.currentId}get isSettingsAllowed(){return this.company.currentAuthority.authority===At.a.PRIMARY_SIGNATURE}}return t.\u0275fac=function(e){return new(e||t)(O.Qb(h.c),O.Qb(h.a),O.Qb(T.a),O.Qb(xt.a),O.Qb(E.c),O.Qb(i.f),O.Qb(It.a),O.Qb(wt.a),O.Qb(M.g))},t.\u0275cmp=O.Kb({type:t,selectors:[["j-account"]],decls:1,vars:1,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed",4,"ngIf"],["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"bodyClassList","closed"],[1,"account-header"],[1,"iban"],[1,"iban__number"],["size","sm",1,"iban-img",3,"name"],[1,"d-inline-block","text-muted","mr-4"],["jTour","STATEMENT.ALTER_CODE","jTourPosition","bottom",1,"iban__alter-code","mr-4",3,"account"],["class","iban__migrated",3,"isLarge",4,"ngIf"],[1,"f-page-title"],[3,"money"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["href","#","translate","",3,"click"],["href","#","jTour","REQUISITES_ACCOUNT.NAV","jTourPosition","bottom","translate","",3,"click"],["href","#","translate","",3,"active","click",4,"ngIf"],[4,"ngIf"],[1,"iban__migrated",3,"isLarge"],[3,"currency","downloaded"],[3,"account"],[3,"companyId","accountId"],["infiniteScroll","",1,"account-wrapper",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"statement",4,"ngIf"],[1,"search-results",3,"statement","isLoadingExtra","emptyLabel"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],["class","py-4",4,"ngIf"],[3,"statement"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"],[1,"py-4"]],template:function(t,e){1&t&&O.Oc(0,Pe,29,20,"f-page",0),2&t&&O.rc("ngIf",e.account)},directives:[i.u,Et.a,Pt.a,N.a,F,Mt.a,j.a,V.a,kt.a,Rt.a,q,Vt.b,$t,re,be,s.a,pe.a,he.a,me.a,ge.a],pipes:[fe.a],styles:["[_nghost-%COMP%]{display:block}.iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:8px;flex-wrap:wrap}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.iban__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.iban__alter-code[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__number[_ngcontent-%COMP%]{margin-bottom:8px}@media(min-width:960px){.iban__alter-code[_ngcontent-%COMP%], .iban__migrated[_ngcontent-%COMP%], .iban__number[_ngcontent-%COMP%]{margin-bottom:0}}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),t})();var ke=n("YjpI");const Re=[{path:"accounts",component:Ot,data:{title:"ACCOUNTS.TITLE"},children:[{path:"",component:pt}]},{path:"accounts/:iban",children:[{path:"statement",component:Me,data:{tab:"statement"}},{path:"requisites",component:Me,data:{tab:"requisites"}},{path:"auto-export",component:Me,data:{tab:"auto-export"}},{path:"settings",component:Me,data:{tab:"settings"}},{path:"**",redirectTo:"statement"}]},{path:"cards",loadChildren:()=>Promise.resolve().then(n.bind(null,"qAFH")).then(t=>t.CardsModule)},{canActivate:[A],path:g.a.root,data:{animation:"routerFadeFromBottom"},loadChildren:()=>Promise.all([n.e(2),n.e(4),n.e(0),n.e(11)]).then(n.bind(null,"T9EB")).then(t=>t.PaymentsModule)},{path:ke.a.transfers,loadChildren:()=>Promise.all([n.e(2),n.e(0),n.e(21)]).then(n.bind(null,"DVvf")).then(t=>t.TransfersModule)},{path:ke.a.conversion,loadChildren:()=>Promise.all([n.e(2),n.e(0),n.e(14)]).then(n.bind(null,"VBqz")).then(t=>t.ConversionModule)},{path:ke.a.history,loadChildren:()=>n.e(17).then(n.bind(null,"9u+z")).then(t=>t.HistoryModule)},{path:ke.a.contracts,loadChildren:()=>n.e(4).then(n.bind(null,"Rreu")).then(t=>t.ContractsModule)},{path:ke.a.settings,loadChildren:()=>Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"7wo0")).then(t=>t.SettingsModule)},{path:ke.a.directory,loadChildren:()=>Promise.all([n.e(2),n.e(0),n.e(15)]).then(n.bind(null,"KlkT")).then(t=>t.DirectoryModule)},{path:ke.a.letters,canActivate:[x],data:{featureFlag:m.a.LETTER},loadChildren:()=>n.e(10).then(n.bind(null,"mCIM")).then(t=>t.LettersModule)},{path:ke.a.extraSettings,loadChildren:()=>Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"vTXZ")).then(t=>t.ExtraSettingsModule)},{path:"**",redirectTo:"accounts"}];let Ve=(()=>{class t{}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(e){return new(e||t)},imports:[[h.g.forChild(Re)],h.g]}),t})();var Le=n("qAFH");n.d(e,"HomeModule",(function(){return Ne}));let Ne=(()=>{class t{}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(e){return new(e||t)},imports:[[i.c,a.n,a.D,Ve,u.a,d.a,b.a,p.a,Le.CardsModule,o.c.forChild(),r.s,r.g,c.b,s.b,l.b]]}),t})()},fkRG:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("zwEd"),a=n("w7f+"),c=n("fXoL"),r=n("1kSV"),o=n("+eKG"),s=n("ofXK"),l=n("e8Ap"),d=n("sYmb");function u(t,e){if(1&t){const t=c.Xb();c.Wb(0,"a",1),c.ic("click",(function(e){return c.Fc(t),c.lc().onClick(e)})),c.Rb(1,"span",2),c.Rb(2,"span",3),c.Vb()}if(2&t){const t=c.lc();c.Hb("status--small",t.isSmall),c.Ab(1),c.rc("inlineSVG",t.mapIcon()),c.Ab(1),c.rc("translate",t.mapTitle())}}let b=(()=>{class t{constructor(t,e){this.modalService=t,this.cardsService=e,this.CARD_STATUS=i.b}ngOnInit(){}onClick(t){t.preventDefault(),this.isSmall||this.showModal()}mapIcon(t=!1){const e="/assets/img/cards/status/";let n=t?"-large.svg":this.isSmall?"-small.svg":".svg";switch(this.status){case i.b.EXPIRED:return`${e}expire${n}`;case i.b.FRAUD:case i.b.LOST_LOCK:case i.b.THEFT_LOCK:case i.b.TEMPORARILY_LOCK:default:return`${e}locked${n}`}}mapTitle(){return this.cardsService.mapCardStatus(this.status)}mapDescription(){return`CARDS.STATUS.DESCRIPTION.${this.status}`}showModal(){const t=this.modalService.open(a.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0});return Object.assign(t.componentInstance,{title:this.mapTitle(),img:this.mapIcon(!0),description:this.mapDescription(),cardId:this.cardId,canUnlock:this.status===i.b.TEMPORARILY_LOCK}),t.result}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.q),c.Qb(o.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["j-card-status"]],inputs:{cardId:"cardId",isSmall:"isSmall",status:"status"},decls:1,vars:1,consts:[["href","#","class","status",3,"status--small","click",4,"ngIf"],["href","#",1,"status",3,"click"],[1,"status__icon",3,"inlineSVG"],[1,"status__title","text-danger",3,"translate"]],template:function(t,e){1&t&&c.Oc(0,u,3,4,"a",0),2&t&&c.rc("ngIf",e.status!=e.CARD_STATUS.ACTIVE)},directives:[s.u,l.a,d.a],styles:[".status[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-left:1rem}.status[_ngcontent-%COMP%]:hover{text-decoration:underline}.status--small[_ngcontent-%COMP%]{font-size:.75rem;margin-left:.5rem}.status--small[_ngcontent-%COMP%]:hover{text-decoration:none}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]{width:16px}.status--small[_ngcontent-%COMP%]   .status__icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%}.status--small[_ngcontent-%COMP%]   .status__title[_ngcontent-%COMP%]{padding-top:2px}.status__icon[_ngcontent-%COMP%]{margin-right:.25rem}"]}),t})()},hsBV:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("R0Ic"),c=n("L+ju"),r=n("zwEd"),o=n("+eKG");const s=["accountsDropdown"];function l(t,e){if(1&t&&(i.Ub(0),i.Rb(1,"span",11),i.Wb(2,"div",12),i.Rb(3,"span",13),i.Wb(4,"span"),i.Qc(5),i.Vb(),i.Vb(),i.Tb()),2&t){const t=i.lc().$implicit,e=i.lc();i.Ab(1),i.rc("inlineSVG",e.getCardImage(t)),i.Ab(2),i.rc("inlineSVG",e.getCardMps(t)),i.Ab(2),i.Rc(e.getMaskedCardNumber(t))}}function d(t,e){if(1&t&&(i.Ub(0),i.Rb(1,"j-entity-logo",14),i.Wb(2,"div",12),i.Wb(3,"span"),i.Qc(4),i.Vb(),i.Vb(),i.Tb()),2&t){const t=i.lc().$implicit,e=i.lc();i.Ab(1),i.rc("name",null==t?null:null==t.balance?null:t.balance.currency),i.Ab(3),i.Rc(e.getMaskedIban(t))}}function u(t,e){if(1&t&&i.Rb(0,"j-money",15),2&t){const t=i.lc().$implicit;i.rc("money",null==t?null:t.balance)}}function b(t,e){if(1&t&&(i.Ub(0,5),i.Wb(1,"div",6),i.Wb(2,"label",7),i.Qc(3),i.mc(4,"translate"),i.Vb(),i.Oc(5,l,6,3,"ng-container",8),i.Oc(6,d,5,2,"ng-container",9),i.Vb(),i.Tb(),i.Oc(7,u,1,1,"j-money",10)),2&t){const t=e.$implicit,n=i.lc();i.rc("ngSwitch",t.accountType),i.Ab(3),i.Sc(" ",i.nc(4,4,n.label||n.mapSelectedAccountLabel(t))," "),i.Ab(2),i.rc("ngSwitchCase",n.ACCOUNT_TYPE.CARD),i.Ab(2),i.rc("ngIf",n.getIsBalanceShown(t))}}function p(t,e){if(1&t&&i.Rb(0,"j-account-item",18),2&t){const t=i.lc().$implicit;i.rc("account",t)}}function h(t,e){if(1&t&&i.Rb(0,"j-account-card",19),2&t){const t=i.lc().$implicit;i.rc("card",t)}}function m(t,e){if(1&t&&(i.Oc(0,p,1,1,"j-account-item",16),i.Oc(1,h,1,1,"j-account-card",17)),2&t){const t=e.$implicit,n=i.lc();i.rc("ngIf",t.accountType===n.ACCOUNT_TYPE.ACCOUNT||t.accountType===n.ACCOUNT_TYPE.DEPOSIT),i.Ab(1),i.rc("ngIf",t.accountType===n.ACCOUNT_TYPE.CARD)}}function g(t,e){1&t&&i.Rb(0,"div",20),2&t&&i.rc("inlineSVG","/assets/icons/transfers/arrow.svg")}let f=(()=>{class t{constructor(t){this.cardsService=t,this.hasError=!1,this.isLoading=!1,this.isDisabled=!1,this.isSmall=!1,this.isFromArrowShown=!1,this.isDisabledSelectable=!1,this.accounts=[],this.selected=new i.n,this.ACCOUNT_TYPE=c.a,this.blockedFn=this.isAccountBlocked.bind(this)}clearSelected(){this.accountsDropdown.clearSelected()}selectAccount(t){t&&(t.accountType===c.a.CARD&&t.hasLockedState&&!this.isDisabledSelectable||t.isMigrated||(this.selectedAccount=t,this.accountsDropdown.selectItem(t)))}selectByIban(t){var e;const n=null===(e=this.accounts)||void 0===e?void 0:e.find(e=>e.iban===t);this.onSelect(n)}isAccountBlocked(t){return!!t.isMigrated}onSelect(t){this.selectAccount(t),this.selected.emit(t)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case c.a.CARD:return this.cardsService.mapCardLabel(t);case c.a.ACCOUNT:return"ACCOUNTS.REGULAR";case c.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}getMaskedCardNumber(t){if(t.accountType!=c.a.CARD)return null;const e=t.cardNumber;return e?`${e.substring(0,4)} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${e.substring(e.length-4,e.length)}`:""}getMaskedIban(t){const e=t.iban;return e?`${e.substring(0,4)} \u2022\u2022\u2022\u2022 ${e.substring(e.length-4,e.length)}`:""}getCardImage(t){if(t.accountType!=c.a.CARD)return null;const e="/assets/icons/accounts";switch(t.category){case r.a.PRIVATE:return`${e}/card-private.svg`;case r.a.COMMERCIAL:default:return`${e}/card-commercial.svg`}}getCardMps(t){if(t.accountType!=c.a.CARD)return null;const e="/assets/icons/cards/mps";return"4"===t.cardNumber[0]?`${e}/visa.svg`:`${e}/mastercard.svg`}getIsBalanceShown(t){return t.accountType!==c.a.CARD||t.category!==r.a.PRIVATE}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(o.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-account-dropdown"]],viewQuery:function(t,e){var n;1&t&&i.Vc(s,!0),2&t&&i.Bc(n=i.jc())&&(e.accountsDropdown=n.first)},inputs:{label:"label",inputClass:"inputClass",hasError:"hasError",isLoading:"isLoading",isDisabled:"isDisabled",isSmall:"isSmall",isFromArrowShown:"isFromArrowShown",isDisabledSelectable:"isDisabledSelectable",accounts:"accounts"},outputs:{selected:"selected"},decls:7,vars:6,consts:[["label","ACCOUNTS.EMPTY",3,"isLoading","label","options","hasError","blockedFn","selected"],["accountsDropdown",""],["selectedTemplate",""],["optionTemplate",""],["class","account-dropdown__from-arrow",3,"inlineSVG",4,"ngIf"],[3,"ngSwitch"],[1,"account-item"],[1,"j-input--float-label","selected-account__label"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","selected-account__money",3,"money",4,"ngIf"],[3,"inlineSVG"],[1,"text-truncate","selected-account__value"],[1,"mr-2",3,"inlineSVG"],["size","sm",1,"selected-account__img",3,"name"],[1,"selected-account__money",3,"money"],[3,"account",4,"ngIf"],[3,"card",4,"ngIf"],[3,"account"],[3,"card"],[1,"account-dropdown__from-arrow",3,"inlineSVG"]],template:function(t,e){1&t&&(i.Wb(0,"j-dropdown-input",0,1),i.ic("selected",(function(t){return e.onSelect(t)})),i.Oc(2,b,8,6,"ng-template",null,2,i.Pc),i.Oc(4,m,2,2,"ng-template",null,3,i.Pc),i.Vb(),i.Oc(6,g,1,1,"div",4)),2&t&&(i.rc("isLoading",e.isLoading)("label",e.label)("options",e.accounts)("hasError",e.hasError)("blockedFn",e.blockedFn),i.Ab(6),i.rc("ngIf",e.isFromArrowShown))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"],data:{animation:[Object(a.n)("smoothCollapse",[Object(a.k)("initial",Object(a.l)({height:"0",overflow:"hidden",opacity:"0.5",zIndex:"unset"})),Object(a.k)("final",Object(a.l)({overflow:"hidden",opacity:"1",zIndex:"50"})),Object(a.m)("initial=>final",Object(a.e)("300ms ease-in-out")),Object(a.m)("final=>initial",Object(a.e)("300ms ease-in-out"))])]}}),t})()},pZP7:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("L+ju"),a=n("fXoL");function c(t,e){1&t&&a.Rb(0,"span",12)}function r(t,e){1&t&&(a.Wb(0,"small",13),a.Qc(1,"ACCOUNTS.INACTIVE"),a.Vb())}function o(t,e){if(1&t&&(a.Wb(0,"small",14),a.Qc(1),a.Vb()),2&t){const t=a.lc();a.Ab(1),a.Rc(t.lockedMessage)}}let s=(()=>{class t{constructor(){}ngOnInit(){}get lockedMessage(){return`ACCOUNTS.STATE.${this.account.blockType}`}get label(){return this.account.accountType===i.a.ACCOUNT?"ACCOUNTS.DROPDOWN.REGULAR":"ACCOUNTS.DROPDOWN.DEPOSIT"}get isBlocked(){return this.account.isMigrated}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["j-account-item"]],inputs:{account:"account"},decls:14,vars:7,consts:[[1,"account-item"],["size","sm",1,"account-item__img",3,"name"],[1,"account-item__body","p3"],["translate","",1,"text-muted"],[1,"d-flex","align-items-center"],["class","mr-2","inlineSVG","assets/icons/v2/atf-24.svg",4,"ngIf"],[1,"text-dark"],[1,"ml-auto","d-flex","align-items-center"],["class","d-block text-muted mr-2","translate","",4,"ngIf"],[1,"p3","text-right"],[3,"money"],["class","d-block text-muted","translate","",4,"ngIf"],["inlineSVG","assets/icons/v2/atf-24.svg",1,"mr-2"],["translate","",1,"d-block","text-muted","mr-2"],["translate","",1,"d-block","text-muted"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Rb(1,"j-entity-logo",1),a.Wb(2,"div",2),a.Wb(3,"div",3),a.Qc(4),a.Vb(),a.Wb(5,"div",4),a.Oc(6,c,1,0,"span",5),a.Wb(7,"div",6),a.Qc(8),a.Vb(),a.Vb(),a.Vb(),a.Wb(9,"div",7),a.Oc(10,r,2,0,"small",8),a.Wb(11,"div",9),a.Rb(12,"j-money",10),a.Oc(13,o,2,1,"small",11),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Ab(1),a.rc("name",null==e.account?null:null==e.account.balance?null:e.account.balance.currency),a.Ab(3),a.Rc(e.label),a.Ab(2),a.rc("ngIf",null==e.account?null:e.account.alterCode),a.Ab(2),a.Rc(null==e.account?null:e.account.maskedIban),a.Ab(2),a.rc("ngIf",null==e.account?null:e.account.isMigrated),a.Ab(2),a.rc("money",null==e.account?null:e.account.balance),a.Ab(1),a.rc("ngIf",null==e.account?null:e.account.hasLockedState))},styles:["[_nghost-%COMP%]{display:block;width:100%}.account-item[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-item--blocked[_ngcontent-%COMP%]{opacity:.4}.account-item__img[_ngcontent-%COMP%]{margin-right:1rem}.selected-account[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;padding-right:1rem}.selected-account__label[_ngcontent-%COMP%]{top:10px!important;left:65px!important;-webkit-transform:scale(.75);transform:scale(.75)}.selected-account__money[_ngcontent-%COMP%]{margin-left:auto}.selected-account__value[_ngcontent-%COMP%]{padding-left:1rem;position:relative;top:8px;padding-right:1rem}.account-dropdown__from-arrow[_ngcontent-%COMP%], .selected-account__value[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.account-dropdown__from-arrow[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:1;position:absolute;width:28px;height:28px;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:50%;background:#fff;-webkit-box-pack:center;justify-content:center;left:-14px;bottom:-22px;z-index:2}"]}),t})()},qAFH:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("xJkR"),c=n("5cNS"),r=n("PCNd"),o=n("crCf"),s=n("tyNb"),l=n("mrSG"),d=n("quSY"),u=n("fXoL"),b=n("VnnJ"),p=n("7rOj"),h=n("+eKG"),m=n("VO+5"),g=n("sYmb"),f=n("iCQh"),v=n("jhN1"),C=n("S1F0"),S=n("oKsb"),O=n("fkRG"),T=n("Kx/q");const y=function(){return{width:"300px",height:"20px","background-color":"#ECEEF1"}},_=function(){return{width:"500px",height:"36px","background-color":"#ECEEF1"}};function A(t,e){1&t&&(u.Ub(0),u.Rb(1,"ngx-skeleton-loader",1),u.Rb(2,"br"),u.Rb(3,"ngx-skeleton-loader",1),u.Tb()),2&t&&(u.Ab(1),u.rc("theme",u.vc(2,y)),u.Ab(2),u.rc("theme",u.vc(3,_)))}function x(t,e){if(1&t&&(u.Wb(0,"section",4),u.Wb(1,"div",5),u.Rb(2,"img",6),u.Wb(3,"span",7),u.Qc(4),u.Vb(),u.Rb(5,"j-card-status",8),u.Vb(),u.Wb(6,"h1",9),u.Rb(7,"j-money",10),u.Vb(),u.Vb()),2&t){const t=u.lc(2);u.Ab(4),u.Tc("",t.card.alias," ",t.card.maskedNumber,""),u.Ab(1),u.rc("cardId",t.card.cardId)("status",t.card.status),u.Ab(2),u.rc("money",t.card.balance)}}function I(t,e){if(1&t&&(u.Wb(0,"div",11),u.Qc(1),u.Vb()),2&t){const t=u.lc(2);u.Ab(1),u.Rc(t.errorText)}}function w(t,e){if(1&t&&(u.Ub(0),u.Oc(1,x,8,5,"section",2),u.Oc(2,I,2,1,"div",3),u.Tb()),2&t){const t=u.lc();u.Ab(1),u.rc("ngIf",t.card),u.Ab(1),u.rc("ngIf",t.errorText)}}let E=(()=>{class t{constructor(t,e){this.route=t,this.cardsService=e,this.isLoading=!0,this.loaded=new u.n,this.failed=new u.n,this.subscription=new d.a;const n=this.route.params.subscribe(t=>{this.cardId=t.id,this.init()});this.subscription.add(n)}ngOnDestroy(){this.subscription.unsubscribe()}init(){this.loadCard()}loadCard(){return Object(l.a)(this,void 0,void 0,(function*(){this.isLoading=!0;try{this.card=yield this.cardsService.getCardById(this.cardId),this.loaded.emit(this.card)}catch(t){this.errorText=t.description,this.failed.emit()}finally{this.isLoading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.a),u.Qb(h.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-header"]],outputs:{loaded:"loaded",failed:"failed"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"theme"],["class","account-header",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"account-header"],[1,"iban"],["src","/assets/img/cards/card-black.svg"],[1,"ml-3","text-muted"],[3,"cardId","status"],[1,"f-page-title"],[3,"money"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(u.Oc(0,A,4,4,"ng-container",0),u.Oc(1,w,3,2,"ng-container",0)),2&t&&(u.rc("ngIf",e.isLoading),u.Ab(1),u.rc("ngIf",!e.isLoading))},directives:[i.u,a.a,O.a,T.a],styles:["[_nghost-%COMP%]{display:block;min-height:90px}.iban[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:4px;min-height:25px}.iban-img[_ngcontent-%COMP%]{margin-right:12px;border-radius:.5rem}.f-page-title[_ngcontent-%COMP%]{margin-bottom:12px}"]}),t})();const P=function(){return["../statement"]},M=function(){return["../info"]},k=function(){return["../settings"]};let R=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-tabs"]],decls:8,vars:6,consts:[[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active","translate","",3,"routerLink"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"nav",1),u.Wb(2,"a",2),u.Qc(3," CARDS.STATEMENT "),u.Vb(),u.Wb(4,"a",2),u.Qc(5," CARDS.INFO.TITLE "),u.Vb(),u.Wb(6,"a",2),u.Qc(7," CARDS.SETTINGS.TITLE "),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.rc("routerLink",u.vc(3,P)),u.Ab(2),u.rc("routerLink",u.vc(4,M)),u.Ab(2),u.rc("routerLink",u.vc(5,k)))},directives:[s.f,s.e,g.a],styles:[""]}),t})();var V=n("fvpk"),L=n("e8Ap"),N=n("Dvla");const j=function(){return{width:"435px",height:"96px","background-color":"#ECEEF1"}},W=function(){return{width:"435px",height:"56px","background-color":"#ECEEF1"}},D=function(){return{width:"435px",height:"276px","background-color":"#ECEEF1"}};function F(t,e){1&t&&(u.Ub(0),u.Rb(1,"ngx-skeleton-loader",3),u.Rb(2,"ngx-skeleton-loader",3),u.Rb(3,"ngx-skeleton-loader",3),u.Tb()),2&t&&(u.Ab(1),u.rc("theme",u.vc(3,j)),u.Ab(1),u.rc("theme",u.vc(4,W)),u.Ab(1),u.rc("theme",u.vc(5,D)))}function Q(t,e){if(1&t&&(u.Wb(0,"div",19),u.Wb(1,"div",20),u.Qc(2),u.mc(3,"translate"),u.Vb(),u.Wb(4,"div",21),u.Qc(5),u.mc(6,"translate"),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.Sc(" ",u.nc(3,2,t.label),": "),u.Ab(3),u.Sc(" ",u.nc(6,4,t.value)," ")}}function U(t,e){if(1&t&&(u.Wb(0,"div",19),u.Wb(1,"div",20),u.Qc(2),u.mc(3,"translate"),u.Vb(),u.Wb(4,"div",21),u.Qc(5),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.Sc(" ",u.nc(3,2,t.label),": "),u.Ab(3),u.Sc(" ",t.value," ")}}function G(t,e){if(1&t&&(u.Wb(0,"div",22),u.Wb(1,"strong"),u.Qc(2),u.Vb(),u.Vb()),2&t){const t=u.lc(2);u.Ab(2),u.Rc(t.errorText)}}function $(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"div",4),u.Wb(2,"div",5),u.Wb(3,"div",6),u.Rb(4,"div",7),u.Wb(5,"button",8),u.ic("click",(function(e){return u.Fc(t),u.lc().onQrPrint(e)})),u.Rb(6,"span",9),u.Rb(7,"span",10),u.Vb(),u.Vb(),u.Rb(8,"img",11),u.Vb(),u.Vb(),u.Wb(9,"div",4),u.Oc(10,Q,7,6,"div",12),u.Vb(),u.Wb(11,"div",4),u.Oc(12,U,6,4,"div",12),u.Wb(13,"div",13),u.Wb(14,"button",14),u.ic("click",(function(e){return u.Fc(t),u.lc().onCopy()})),u.Rb(15,"div",15),u.Wb(16,"strong",16),u.Qc(17,"CARDS.INFO.COPY"),u.Vb(),u.Vb(),u.Wb(18,"button",17),u.ic("click",(function(e){return u.Fc(t),u.lc().onDownload()})),u.Rb(19,"div",15),u.Wb(20,"strong",16),u.Qc(21,"ACCOUNTS.REQUISITES.DOWNLOAD"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(22,G,3,1,"div",18),u.Tb()}if(2&t){const t=u.lc();u.Ab(5),u.rc("disabled",!t.qrFile),u.Ab(1),u.rc("inlineSVG","assets/icons/account/print.svg"),u.Ab(4),u.rc("ngForOf",t.status),u.Ab(2),u.rc("ngForOf",t.requisites),u.Ab(2),u.rc("cbContent",t.textToCopy),u.Ab(1),u.rc("inlineSVG","assets/icons/account/copy.svg"),u.Ab(4),u.rc("inlineSVG","assets/icons/account/pdf.svg"),u.Ab(3),u.rc("ngIf",t.errorText)}}let q=(()=>{class t{constructor(t,e,n,i,a,c,r,o,s){this.router=t,this.companyService=e,this.bankFromAccount=n,this.formatIban=i,this.cardsService=a,this.notifierService=c,this.translateService=r,this.filesService=o,this._sanitizer=s,this.isLoaded=!1,this.subscription=new d.a}ngOnDestroy(){this.subscription.unsubscribe()}onCardLoad(t){this.init(t);const e=this.cardsService.cardsUpdated$.subscribe(t=>{const e=this.cardsService.findCardById(this.card.cardId);this.init(e)});this.subscription.add(e)}init(t){return Object(l.a)(this,void 0,void 0,(function*(){this.card=t,this.generateStatus(),this.generateRequisites(),this.generateTextToCopy(),this.loadQr(),this.isLoaded=!0}))}onCardFail(){this.isLoaded=!0,this.errorText=this.appendTranslationPrefix("FAILED")}onClose(){this.navigateToHome()}onCopy(){this.notifierService.notify("default",this.translateService.instant(this.appendTranslationPrefix("COPIED")))}loadQr(){return Object(l.a)(this,void 0,void 0,(function*(){this.qrFile=yield this.cardsService.getQrPrint(this.card.cardId,this.card.iban)}))}onQrPrint(t){t.preventDefault(),this.filesService.downloadFile(this.qrFile,`${this.card.formattedFullName} ${this.card.maskedNumber} QR.jpg`)}onDownload(){return Object(l.a)(this,void 0,void 0,(function*(){try{const t=yield this.cardsService.getPdf(this.card.cardId);this.filesService.downloadFile(t,`${this.card.formattedFullName} ${this.card.maskedNumber}.pdf`)}catch(t){console.error(t)}}))}generateStatus(){this.status=[{label:this.appendTranslationPrefix("STATUS"),value:this.cardsService.mapCardStatus(this.card.status)}]}generateRequisites(){this.requisites=[{label:this.appendTranslationPrefix("OWNER"),value:this.card.formattedFullName},{label:this.appendTranslationPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.appendTranslationPrefix("IBAN"),value:this.formatIban.transform(this.card.iban),valueToCopy:this.card.iban},{label:this.appendTranslationPrefix("BANK"),value:this.bankFromAccount.transform(this.card.iban,"name")},{label:this.appendTranslationPrefix("BIC"),value:this.bankFromAccount.transform(this.card.iban,"bic")}]}generateTextToCopy(){this.textToCopy=this.requisites.map(t=>{if(t.value||t.valueToCopy)return`${this.translateService.instant(t.label)}: ${t.valueToCopy||t.value}`}).join("\n")}navigateToHome(){this.router.navigate(["/"])}appendTranslationPrefix(t){return`CARDS.INFO.${t}`}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.c),u.Qb(b.a),u.Qb(p.b),u.Qb(p.d),u.Qb(h.a),u.Qb(m.c),u.Qb(g.e),u.Qb(f.a),u.Qb(v.b))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-info"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"info"],[1,"qr"],[1,"qr__info"],["translate","ACCOUNTS.REQUISITES.QR.TITLE"],[1,"btn","btn-link","qr__print","p3",3,"disabled","click"],[1,"mr-2",3,"inlineSVG"],["translate","ACCOUNTS.REQUISITES.QR.PRINT"],["src","/assets/img/cards/qr.png",1,"qr__img"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"requisites__footer"],["ngxClipboard","",1,"requisites__button","btn","btn-outline-primary","btn-md",3,"cbContent","click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[1,"requisites__button","btn","btn-outline-primary","btn-md",3,"click"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child","text-dark"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(t,e){1&t&&(u.Wb(0,"f-page",0),u.ic("closed",(function(t){return e.onClose()})),u.Wb(1,"f-page-header"),u.Wb(2,"j-card-header",1),u.ic("loaded",(function(t){return e.onCardLoad(t)}))("failed",(function(t){return e.onCardFail()})),u.Vb(),u.Rb(3,"j-card-tabs"),u.Vb(),u.Wb(4,"f-page-body"),u.Oc(5,F,4,6,"ng-container",2),u.Oc(6,$,23,8,"ng-container",2),u.Vb(),u.Vb()),2&t&&(u.Ab(5),u.rc("ngIf",!e.isLoaded),u.Ab(1),u.rc("ngIf",e.isLoaded))},directives:[C.a,S.a,E,R,V.a,i.u,a.a,g.a,L.a,i.t,N.a],pipes:[g.d],styles:[".info[_ngcontent-%COMP%]{padding:1rem;margin:.5rem 0 1rem;background:#fff;border-radius:.75rem;max-width:435px}.requisites__button[_ngcontent-%COMP%]{margin-top:1rem;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;min-width:calc(50% - .5rem)}.qr[_ngcontent-%COMP%], .requisites__footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.qr[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.qr__print[_ngcontent-%COMP%]{background:none;border:0;outline:0;color:#666c72;display:-webkit-inline-box;display:inline-flex;margin-top:.5rem;padding:0}.qr__print[_ngcontent-%COMP%], .qr__print[_ngcontent-%COMP%]:hover{-webkit-transform:none;transform:none}.qr__print[_ngcontent-%COMP%]:hover{color:#ef5630}.qr__img[_ngcontent-%COMP%]{width:53px}"]}),t})();var K=n("3Pt+"),H=n("1kSV"),B=n("9odQ"),X=n("M6pS");let Y=(()=>{class t{constructor(t,e,n,i){this.modal=t,this.cardsService=e,this.notifierService=n,this.translateService=i,this.aliasMaxLength=24,this.translatePrefix="CARDS.RENAME_MODAL",this.isSubmitted=!1,this.isSubmitting=!1}ngOnInit(){this.form=new K.k({alias:new K.h(this.card.alias||"",[K.H.required,K.H.maxLength(this.aliasMaxLength)])})}get f(){return this.form.controls}dismissModal(){this.modal.dismiss()}closeModal(t){this.modal.close(t)}mapTranslate(t){return`${this.translatePrefix}.${t}`}onSubmit(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.isSubmitted=!0,this.form.invalid)return;this.isSubmitting=!0;let t="";try{const{alias:e}=this.form.getRawValue();yield this.cardsService.renameCard(this.card.cardId,e),t="SUCCESS",this.closeModal(e)}catch(e){t="ERROR"}finally{this.isSubmitting=!1,this.notifierService.notify("default",this.translateService.instant(this.mapTranslate(t)))}}))}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(H.a),u.Qb(h.a),u.Qb(m.c),u.Qb(g.e))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-rename-modal"]],inputs:{card:"card"},decls:17,vars:21,consts:[[1,"rename-modal"],[1,"rename-modal__header"],[1,"btn","btn-outline-primary","rename-modal__back","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"rename-modal__form",3,"formGroup"],[1,"form-group"],[3,"label","formControl","maxLength","isClearable","hasError"],[1,"form-footer"],["type","button",1,"btn","btn-link",3,"disabled","jLoading","jLoadingInverted","click"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled","jLoading","click"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"button",2),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(3,"span",3),u.Vb(),u.Wb(4,"h5",4),u.Qc(5),u.mc(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"form",5),u.Wb(8,"div",6),u.Rb(9,"j-input",7),u.Vb(),u.Wb(10,"div",8),u.Wb(11,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Qc(12),u.mc(13,"translate"),u.Vb(),u.Wb(14,"button",10),u.ic("click",(function(t){return e.onSubmit()})),u.Qc(15),u.mc(16,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(3),u.rc("inlineSVG","assets/icons/arrow-left.svg"),u.Ab(2),u.Sc(" ",u.nc(6,15,e.mapTranslate("TITLE"))," "),u.Ab(2),u.rc("formGroup",e.form),u.Ab(2),u.rc("label",e.mapTranslate("LABEL"))("formControl",e.f.alias)("maxLength",e.aliasMaxLength)("isClearable",!1)("hasError",e.f.alias.invalid&&e.isSubmitted),u.Ab(2),u.rc("disabled",e.isSubmitting)("jLoading",e.isSubmitting)("jLoadingInverted",!0),u.Ab(1),u.Sc(" ",u.nc(13,17,"SHARED.CANCEL")," "),u.Ab(2),u.rc("disabled",e.isSubmitting)("jLoading",e.isSubmitting),u.Ab(1),u.Sc(" ",u.nc(16,19,"SHARED.SAVE")," "))},directives:[L.a,K.J,K.u,K.l,B.b,K.t,K.i,X.a],pipes:[g.d],styles:[".rename-modal[_ngcontent-%COMP%]{padding:24px}.rename-modal__back[_ngcontent-%COMP%]{padding:0;width:40px;height:40px}.rename-modal__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:64px;-webkit-box-align:center;align-items:center;margin-bottom:12px}"]}),t})();n("w7f+");var z=n("zwEd"),J=n("Bl/x");const Z=function(t){return{height:t,"margin-top":"0.5rem","background-color":"#ECEEF1"}};function tt(t,e){if(1&t&&(u.Ub(0),u.Rb(1,"ngx-skeleton-loader",3),u.Tb()),2&t){const t=u.lc();u.Ab(1),u.rc("theme",u.wc(1,Z,t.isPrimaryAuthority?"142px":"72px"))}}function et(t,e){if(1&t&&(u.Wb(0,"div",4),u.Rb(1,"j-switch",5),u.Wb(2,"span",6),u.Rb(3,"strong",11),u.Wb(4,"small",8),u.Qc(5),u.mc(6,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.lc(2);u.Hb("disabled",t.hiddenControl.disabled),u.Ab(1),u.rc("formControl",t.hiddenControl),u.Ab(4),u.Sc(" ",u.nc(6,4,"CARDS.SETTINGS.HIDE.DESCRIPTION")," ")}}function nt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",4),u.Wb(1,"div"),u.Rb(2,"strong",12),u.Wb(3,"small",8),u.Qc(4),u.Vb(),u.Vb(),u.Wb(5,"button",13),u.ic("click",(function(e){return u.Fc(t),u.lc(2).onCardRename()})),u.Qc(6),u.mc(7,"translate"),u.Vb(),u.Vb()}if(2&t){const t=u.lc(2);u.Ab(4),u.Sc(" ",t.card.alias," "),u.Ab(2),u.Sc(" ",u.nc(7,2,"CARDS.SETTINGS.RENAME.LINK")," ")}}function it(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",4),u.Rb(2,"j-switch",5),u.Wb(3,"span",6),u.Rb(4,"strong",7),u.Wb(5,"small",8),u.Qc(6),u.mc(7,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Oc(8,et,7,6,"div",9),u.Oc(9,nt,8,4,"div",10),u.Tb()),2&t){const t=u.lc();u.Ab(1),u.Hb("disabled",t.activatedControl.disabled),u.Ab(1),u.rc("formControl",t.activatedControl),u.Ab(4),u.Sc(" ",u.nc(7,6,t.activatedControl.value?"CARDS.SETTINGS.LOCK.ACTIVATE":"CARDS.SETTINGS.LOCK.DEACTIVATE")," "),u.Ab(2),u.rc("ngIf",t.isPrimaryAuthority),u.Ab(1),u.rc("ngIf",t.isPrimaryAuthority)}}const at={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",backdrop:"static",centered:!0};let ct=(()=>{class t{constructor(t,e,n,i){this.router=t,this.cardsService=e,this.companyService=n,this.modalService=i,this.isLoaded=!1,this.isPrimaryAuthority=this.companyService.isPrimaryAuthority(),this.subscription=new d.a}ngOnDestroy(){this.subscription.unsubscribe()}onCardLoad(t){this.init(t);const e=this.cardsService.cardsUpdated$.subscribe(t=>{const e=this.cardsService.findCardById(this.card.cardId);this.init(e)});this.subscription.add(e)}init(t){this.card=t,this.initActivatedControl(),this.initHiddenControl(),this.isLoaded=!0}onCardFail(){this.activatedControl=new K.h({value:!1,disabled:!1}),this.hiddenControl=new K.h({value:!1,disabled:!1}),this.isLoaded=!0}onClose(){this.navigateToHome()}onCardRename(){return Object(l.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(Y,at);t.componentInstance.card=this.card;try{const e=yield t.result;this.card.alias=e}catch(e){}}))}navigateToHome(){this.router.navigate(["/"])}initActivatedControl(){var t,e;this.activatedControl=new K.h({value:this.card.status===z.b.TEMPORARILY_LOCK,disabled:!((null===(t=this.card)||void 0===t?void 0:t.status)==z.b.ACTIVE||(null===(e=this.card)||void 0===e?void 0:e.status)==z.b.TEMPORARILY_LOCK)}),this.subscription.add(this.activatedControl.valueChanges.subscribe(t=>{this.handleActivatedSwitch(t)}))}initHiddenControl(){this.hiddenControl=new K.h(this.card.hidden),this.subscription.add(this.hiddenControl.valueChanges.subscribe(t=>{this.handleHiddenSwitch(t)}))}handleActivatedSwitch(t){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.cardsService.changeCardStatus(this.card.cardId,t)}catch(e){this.activatedControl.setValue(!t,{emitEvent:!1})}}))}handleHiddenSwitch(t){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.cardsService.changeCardVisibility(this.card.cardId,t)}catch(e){this.hiddenControl.setValue(!t,{emitEvent:!1})}}))}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.c),u.Qb(h.a),u.Qb(b.a),u.Qb(H.q))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-settings"]],decls:7,vars:2,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8",3,"closed"],[3,"loaded","failed"],[4,"ngIf"],[3,"theme"],[1,"settings-item"],[3,"formControl"],[1,"ml-3"],["translate","CARDS.SETTINGS.LOCK.TITLE",1,"d-block"],[1,"text-gray"],["class","settings-item",3,"disabled",4,"ngIf"],["class","settings-item",4,"ngIf"],["translate","CARDS.SETTINGS.HIDE.TITLE",1,"d-block"],["translate","CARDS.SETTINGS.RENAME.TITLE",1,"d-block"],[1,"btn","btn-link","p2","py-0","px-1","link-blue","ml-auto",3,"click"]],template:function(t,e){1&t&&(u.Wb(0,"f-page",0),u.ic("closed",(function(t){return e.onClose()})),u.Wb(1,"f-page-header"),u.Wb(2,"j-card-header",1),u.ic("loaded",(function(t){return e.onCardLoad(t)}))("failed",(function(t){return e.onCardFail()})),u.Vb(),u.Rb(3,"j-card-tabs"),u.Vb(),u.Wb(4,"f-page-body"),u.Oc(5,tt,2,3,"ng-container",2),u.Oc(6,it,10,8,"ng-container",2),u.Vb(),u.Vb()),2&t&&(u.Ab(5),u.rc("ngIf",!e.card),u.Ab(1),u.rc("ngIf",e.card))},directives:[C.a,S.a,E,R,V.a,i.u,a.a,J.a,K.t,K.i,g.a],pipes:[g.d],styles:[".settings-item[_ngcontent-%COMP%]{padding:1rem;background:#fff;max-width:616px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-bottom:1px solid #dbdfe2}.settings-item[_ngcontent-%COMP%]:first-child{margin-top:.5rem;border-radius:.75rem .75rem 0 0}.settings-item[_ngcontent-%COMP%]:last-child{border-bottom:0;border-radius:0 0 .75rem .75rem;margin-bottom:1rem}.settings-item.disabled[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]}),t})();var rt=n("IzEk"),ot=n("KWy3"),st=n("9N4E"),lt=n("THGi"),dt=n("Tile"),ut=n("QiVB"),bt=n("/68H"),pt=n("T+Ki");function ht(t,e){1&t&&(u.Wb(0,"div",8),u.Rb(1,"j-statement-loading"),u.Vb())}function mt(t,e){if(1&t&&u.Rb(0,"j-statement-balances",9),2&t){const t=u.lc();u.rc("statement",t.statement)}}function gt(t,e){1&t&&(u.Wb(0,"div",10),u.Qc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),u.Vb())}function ft(t,e){if(1&t&&(u.Wb(0,"div",11),u.Wb(1,"strong"),u.Qc(2),u.Vb(),u.Vb()),2&t){const t=u.lc();u.Ab(2),u.Rc(t.errorText)}}let vt=(()=>{class t{constructor(t,e,n,i,a){this.router=t,this.route=e,this.cardsService=n,this.filterService=i,this.datePipe=a,this.statementMode=ot.a.CARDS,this.isLoading=!0,this.filterMode=st.a.CARDS,this.subscription=new d.a;const c=this.route.params.subscribe(t=>{this.cardId=t.id,this.loadStatement()}),r=this.route.queryParams.pipe(Object(rt.a)(1)).subscribe(t=>{this.filter=this.mapQueryParams(t),this.filterService.updateExtra(this.filter)}),o=this.filterService.getScheme().subscribe(t=>{this.filter=Object.assign({},t),this.updateQueryParams(),this.loadStatement()});this.subscription.add(c),this.subscription.add(r),this.subscription.add(o)}ngOnDestroy(){this.subscription.unsubscribe()}onClose(){this.navigateToHome()}loadStatement(){return Object(l.a)(this,void 0,void 0,(function*(){this.errorText="",this.isLoading=!0;try{if(this.filter.periodType&&this.filter.periodType!=st.b.CUSTOM){const t=this.filterService.PERIOD_LIST.find(t=>t.type==this.filter.periodType);this.filter.periodFrom=t.dates.from,this.filter.periodTo=t.dates.to}this.statement=yield this.cardsService.getStatement(this.cardId,this.filter)}catch(t){this.errorText=t.description||t.code||t}finally{this.isLoading=!1}}))}navigateToHome(){this.router.navigate(["/"])}mapQueryParams(t){let e=Object.assign({},this.filterService.getDefaults(st.a.ACCOUNTS));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&null!=i&&"null"!=i&&(e[n]="periodFrom"==n||"periodTo"==n?new Date(i):i)}return e}updateQueryParams(){const t=Object.assign({},this.filter),e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i&&null!=i&&"null"!=i&&(e[n]="periodFrom"==n||"periodTo"==n?this.datePipe.transform(i,"yyyy-MM-dd"):i)}this.router.navigate([],{queryParams:e,relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.c),u.Qb(s.a),u.Qb(h.a),u.Qb(st.c),u.Qb(i.f))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-card-statement"]],decls:13,vars:8,consts:[["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8","bodyClassList","no-grow",3,"closed"],[3,"mode","currency"],["class","py-4",4,"ngIf"],[1,"account-wrapper"],[3,"statement",4,"ngIf"],[1,"search-results",3,"mode","statement"],["class","text-center text-muted my-5 text-small","translate","",4,"ngIf"],["class","alert alert-danger my-5","role","alert",4,"ngIf"],[1,"py-4"],[3,"statement"],["translate","",1,"text-center","text-muted","my-5","text-small"],["role","alert",1,"alert","alert-danger","my-5"]],template:function(t,e){1&t&&(u.Wb(0,"f-page",0),u.ic("closed",(function(t){return e.onClose()})),u.Wb(1,"f-page-header"),u.Rb(2,"j-card-header"),u.Rb(3,"j-card-tabs"),u.Vb(),u.Wb(4,"f-page-body"),u.Rb(5,"j-filter",1),u.Vb(),u.Wb(6,"f-page-extra"),u.Oc(7,ht,2,0,"div",2),u.Wb(8,"section",3),u.Oc(9,mt,1,1,"j-statement-balances",4),u.Rb(10,"j-statement",5),u.Oc(11,gt,2,0,"div",6),u.Oc(12,ft,3,1,"div",7),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(5),u.rc("mode",e.filterMode)("currency",null==e.card?null:e.card.balance.currency),u.Ab(2),u.rc("ngIf",e.isLoading),u.Ab(2),u.rc("ngIf",e.statement&&e.statement.totalTransactionsCount>0),u.Ab(1),u.rc("mode",e.statementMode)("statement",e.statement),u.Ab(1),u.rc("ngIf",(null==e.statement?null:e.statement.totalTransactionsCount)>0),u.Ab(1),u.rc("ngIf",e.errorText))},directives:[C.a,S.a,E,R,V.a,lt.b,dt.a,i.u,ut.a,bt.a,pt.a,g.a],styles:["[_nghost-%COMP%]{display:block}.account-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px}"]}),t})();const Ct=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Kb({type:t,selectors:[["j-cards"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),data:{title:"TRANSFERS.TITLE"}},{path:":id/statement",component:vt},{path:":id/info",component:q},{path:":id/settings",component:ct},{path:":id",redirectTo:":id/statement"}];let St=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[s.g.forChild(Ct)],s.g]}),t})();n.d(e,"CardsModule",(function(){return Ot}));let Ot=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[i.c,K.n,K.D,a.b,r.a,c.a,o.a,St]]}),t})()},"w7f+":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("mrSG"),a=n("fXoL"),c=n("1kSV"),r=n("+eKG"),o=n("sYmb"),s=n("ofXK");function l(t,e){if(1&t&&(a.Wb(0,"a",11),a.Qc(1," CARDS.STATUS.BRANCHES "),a.Vb()),2&t){const t=a.lc();a.rc("href",t.link,a.Hc)}}function d(t,e){if(1&t){const t=a.Xb();a.Wb(0,"a",12),a.ic("click",(function(e){return a.Fc(t),a.lc().unlockCard(e)})),a.Qc(1," CARDS.STATUS.UNLOCK "),a.Vb()}}let u=(()=>{class t{constructor(t,e){this.modal=t,this.cardsService=e,this.link="https://jysanbank.kz/ru/find/offices/almaty"}dismissModal(t=null){var e;null===(e=t)||void 0===e||e.preventDefault(),this.modal.dismiss()}unlockCard(t=null){var e;return Object(i.a)(this,void 0,void 0,(function*(){null===(e=t)||void 0===e||e.preventDefault();try{yield this.cardsService.changeCardStatus(this.cardId,!1),this.modal.close()}catch(n){this.modal.dismiss()}}))}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a),a.Qb(r.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["j-card-status-modal"]],inputs:{img:"img",title:"title",description:"description",cardId:"cardId",canUnlock:"canUnlock"},decls:14,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],[3,"src","alt"],[1,"light","mb-3","mt-2",3,"translate"],[1,"m-0","text-muted",3,"translate"],[1,"modal-footer","d-block","py-4","px-3"],["translate","","target","_blank","class","btn btn-block btn-link mb-3",3,"href",4,"ngIf"],["translate","","class","btn btn-block btn-link mb-3","href","#",3,"click",4,"ngIf"],["translate","","href","#",1,"btn","btn-block","btn-link","m-0",3,"click"],["translate","","target","_blank",1,"btn","btn-block","btn-link","mb-3",3,"href"],["translate","","href","#",1,"btn","btn-block","btn-link","mb-3",3,"click"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"button",1),a.ic("click",(function(t){return e.dismissModal()})),a.Rb(2,"img",2),a.mc(3,"translate"),a.Vb(),a.Vb(),a.Wb(4,"div",3),a.Rb(5,"img",4),a.mc(6,"translate"),a.Rb(7,"h3",5),a.Rb(8,"p",6),a.Vb(),a.Wb(9,"div",7),a.Oc(10,l,2,1,"a",8),a.Oc(11,d,2,0,"a",9),a.Wb(12,"a",10),a.ic("click",(function(t){return e.dismissModal(t)})),a.Qc(13," SHARED.CLOSE "),a.Vb(),a.Vb()),2&t&&(a.Ab(2),a.sc("alt",a.nc(3,7,"SHARED.CLOSE")),a.Ab(3),a.rc("src",e.img,a.Hc)("alt",a.nc(6,9,e.title)),a.Ab(2),a.rc("translate",e.title),a.Ab(1),a.rc("translate",e.description),a.Ab(2),a.rc("ngIf",!e.canUnlock),a.Ab(1),a.rc("ngIf",e.canUnlock))},directives:[o.a,s.u],pipes:[o.d],styles:[""]}),t})()},zwEd:function(t,e,n){"use strict";var i=n("L+ju"),a=n("LvDl"),c=function(t){return t.COMMERCIAL="COMMERCIAL",t.PRIVATE="PRIVATE",t}({});class r{constructor(t){this.accountType=i.a.CARD,Object(a.defaults)(this,t),this.maskedNumber=this.getMaskedNumber(),this.formattedName=this.getFormattedName(),this.formattedFullName=this.getFormattedFullName()}get hasLockedState(){return this.status!==o.ACTIVE}getMaskedNumber(){var t;return`\u2022\u2022\u2022\u2022 ${this.cardNumber.substr((null===(t=this.cardNumber)||void 0===t?void 0:t.length)-4)}`}getFormattedName(){return this.firstName||this.lastName||!this.fullName?this.firstName||this.lastName?`${this.capitalized(this.lastName)} ${this.capitalized(this.firstName)}`:"":this.fullName}getFormattedFullName(){return this.fullName}capitalized(t){var e;return t?`${null===(e=t[0])||void 0===e?void 0:e.toUpperCase()}${t.substr(1).toLowerCase()}`:""}}var o=function(t){return t.ACTIVE="ACTIVE",t.CLOSED="CLOSED",t.FRAUD="FRAUD",t.EXPIRED="EXPIRED",t.LOST_LOCK="LOST_LOCK",t.THEFT_LOCK="THEFT_LOCK",t.TEMPORARILY_LOCK="TEMPORARILY_LOCK",t}({});n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o}))}}]);