function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"7wo0":function(e,t,n){"use strict";n.r(t);var i,a,s,c=n("ofXK"),r=n("PCNd"),o=n("3Pt+"),l=n("tyNb"),u=n("fXoL"),b=n("paXB"),d=n("7/bn"),g=n("oMXN"),p=n("EiG8"),m=n("sYmb"),f=n("mCLR"),h=function(){return["main"]},v=function(){return["password"]},k=function(){return["package"]},y=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=u.Kb({type:a,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(e,t){1&e&&(u.Wb(0,"div",0),u.Wb(1,"a",1),u.Rc(2,"SETTINGS.MAIN"),u.Vb(),u.Wb(3,"a",1),u.Rc(4,"SETTINGS.PASSWORD.TITLE"),u.Vb(),u.Wb(5,"a",2),u.Rc(6,"SETTINGS.PACKAGE.NAV"),u.Vb(),u.Vb()),2&e&&(u.Ab(1),u.sc("routerLink",u.wc(3,h)),u.Ab(2),u.sc("routerLink",u.wc(4,v)),u.Ab(2),u.sc("routerLink",u.wc(5,k)))},directives:[l.f,l.e,m.a,f.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),a),S=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Kb({type:i,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(e,t){1&e&&(u.Wb(0,"j-layout-home"),u.Wb(1,"j-aside"),u.Rb(2,"j-nav-main"),u.Vb(),u.Wb(3,"j-main"),u.Wb(4,"section",0),u.Wb(5,"section",1),u.Wb(6,"section",2),u.Wb(7,"h2",3),u.Rc(8,"SETTINGS.TITLE"),u.Vb(),u.Rb(9,"j-settings-tabs"),u.Rb(10,"router-outlet"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb())},directives:[b.a,d.a,g.a,p.a,m.a,y,l.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),i),C=n("mrSG"),A=n("4Nuw"),T=n("ZF+8"),P=n("VnnJ"),I=n("JqCM"),w=n("VO+5"),R=n("Kcpt"),_=n("e8Ap"),E=n("L+ju"),O=n("zN9f"),x=((s=function(){function e(){_classCallCheck(this,e),this.selected=new u.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSelect",value:function(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}},{key:"mapSelectedAccountLabel",value:function(e){var t;switch(null===(t=e)||void 0===t?void 0:t.accountType){case E.a.CARD:return"ACCOUNTS.CARD";case E.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case E.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=u.Kb({type:s,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(e,t){1&e&&(u.Wb(0,"div",0),u.Wb(1,"input",1),u.ic("change",(function(e){return t.onSelect()})),u.Vb(),u.Wb(2,"label",2),u.Wb(3,"div",3),u.Wb(4,"div",4),u.Rb(5,"j-entity-logo",5),u.Vb(),u.Wb(6,"div",4),u.Wb(7,"small",6),u.Wb(8,"div"),u.Rc(9),u.mc(10,"translate"),u.Vb(),u.Vb(),u.Wb(11,"span",7),u.Rc(12),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Ab(1),u.sc("id",t.account.id)("ngModel",t.account.isSelected),u.Ab(1),u.sc("for",t.account.id),u.Ab(3),u.sc("name",t.account.balance.currency),u.Ab(4),u.Sc(u.nc(10,6,t.mapSelectedAccountLabel(t.account))),u.Ab(3),u.Sc(t.account.iban))},directives:[o.a,o.t,o.w,O.a],pipes:[m.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),s);function W(e,t){if(1&e){var n=u.Xb();u.Wb(0,"div"),u.Wb(1,"j-all-requisites-item",15),u.ic("selected",(function(e){return u.Gc(n),u.lc().onSelect()})),u.Vb(),u.Vb()}if(2&e){var i=t.$implicit;u.Ab(1),u.sc("account",i)}}function V(e,t){1&e&&(u.Wb(0,"div",16),u.Rb(1,"ngx-spinner",17),u.Vb()),2&e&&(u.Ab(1),u.sc("fullScreen",!1))}var N,M,D=((N=function(){function e(t,n,i,a,s,c){_classCallCheck(this,e),this.accountsService=t,this.filesService=n,this.companyService=i,this.spinner=a,this.notifier=s,this.translateService=c,this.closed=new u.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,this.spinner.show(),e.next=4,this.accountsService.getAccounts();case 4:this.accounts=e.sent,this.accounts.forEach((function(e){e.isSelected=!0})),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1;case 9:case"end":return e.stop()}}),e,this)})))}},{key:"selectAll",value:function(){var e=this;this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map((function(t){return t.isSelected=e.isAllSelected,t}))}},{key:"onSelect",value:function(){this.isAllSelected=this.accounts.every((function(e){return e.isSelected}))}},{key:"onDownload",value:function(){var e=this.accounts.filter((function(e){return e.isSelected})).map((function(e){return e.iban}));e.length>0?this.download(e):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}},{key:"download",value:function(e){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,e);case 3:n=t.sent,this.filesService.downloadFile(n,"".concat(this.companyService.currentCompany.bin,".pdf")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"onClose",value:function(){this.closed.emit()}}]),e}()).\u0275fac=function(e){return new(e||N)(u.Qb(A.c),u.Qb(T.b),u.Qb(P.a),u.Qb(I.c),u.Qb(w.c),u.Qb(m.e))},N.\u0275cmp=u.Kb({type:N,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(e,t){1&e&&(u.Wb(0,"section",0),u.Wb(1,"div",1),u.Rc(2),u.mc(3,"translate"),u.Vb(),u.Wb(4,"button",2),u.ic("click",(function(e){return t.onClose()})),u.Rb(5,"j-icon",3),u.Vb(),u.Vb(),u.Wb(6,"div",4),u.Wb(7,"div",5),u.Wb(8,"input",6),u.ic("change",(function(e){return t.selectAll()})),u.Vb(),u.Wb(9,"label",7),u.Rc(10),u.mc(11,"translate"),u.Vb(),u.Vb(),u.Wb(12,"div",8),u.Pc(13,W,2,1,"div",9),u.Vb(),u.Vb(),u.Pc(14,V,2,1,"div",10),u.Wb(15,"div",11),u.Wb(16,"button",12),u.ic("click",(function(e){return t.onDownload()})),u.Rb(17,"div",13),u.Wb(18,"strong",14),u.Rc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Ab(2),u.Tc(" ",u.nc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),u.Ab(6),u.sc("id","all")("ngModel",t.isAllSelected),u.Ab(1),u.sc("for","all"),u.Ab(1),u.Tc(" ",u.nc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),u.Ab(3),u.sc("ngForOf",t.accounts),u.Ab(1),u.sc("ngIf",t.isLoading),u.Ab(3),u.sc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[R.a,o.a,o.t,o.w,c.t,c.u,_.a,m.a,x,I.a],pipes:[m.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),N),G=n("quSY"),j=n("lJxs"),L=n("TwVa"),U=n("S09V"),K=n("kmKP"),q=n("mR7B"),F=n("tmjD"),B=((M=function(){function e(t,n,i,a,s){_classCallCheck(this,e),this.companyService=t,this.userService=n,this.translateService=i,this.maskedService=a,this.maskPipe=s}return _createClass(e,[{key:"generateMainInfo",value:function(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,U.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}},{key:"generatePrivateInfo",value:function(){var e=this.userService.user;if(e)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:"".concat(e.lastname||""," ").concat(e.firstname||""," ").concat(e.middlename||"")},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(e.iin,U.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:e.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(e.phone),isPhone:!0}]}}},{key:"generateContactsInfo",value:function(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}},{key:"getAuthoritiesList",value:function(){var e=this;return this.companyService.getAuthorizedPersons().pipe(Object(j.a)((function(t){var n;return null===(n=t)||void 0===n?void 0:n.sort(e.sortPersons).map((function(t){return{initials:e.retrieveInitials(t),name:e.companyService.retrieveShortName(t),role:e.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:e.mapSignText(t),color:e.mapInitialsColor(t)}}))})))}},{key:"mapAuthoritiesPrefix",value:function(e){return this.mapTranslatePrefix("AUTHORITIES",e)}},{key:"mapCompanyPrefix",value:function(e){return this.mapTranslatePrefix("COMPANY",e)}},{key:"mapPrivatePrefix",value:function(e){return this.mapTranslatePrefix("PRIVATE",e)}},{key:"mapContactsPrefix",value:function(e){return this.mapTranslatePrefix("CONTACTS",e)}},{key:"mapTranslatePrefix",value:function(e,t){return"SETTINGS.".concat(e,".").concat(t)}},{key:"mapDate",value:function(e){return e?Object(c.K)(e,"d MMMM yyyy",this.translateService.currentLang):null}},{key:"sortPersons",value:function(e,t){return e.authority===t.authority?0:e.authority===L.a.PRIMARY_SIGNATURE?-1:e.authority===L.a.SECONDARY_SIGNATURE&&t.authority===L.a.NO_SIGNATURE?-1:1}},{key:"mapRole",value:function(e){switch(e.authority){case L.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case L.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case L.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}},{key:"mapSignText",value:function(e){switch(e.authority){case L.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case L.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case L.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}},{key:"mapInitialsColor",value:function(e){switch(e.authority){case L.a.PRIMARY_SIGNATURE:return"first-sign";case L.a.SECONDARY_SIGNATURE:return"second-sign";case L.a.NO_SIGNATURE:default:return"no-sign"}}},{key:"retrieveInitials",value:function(e){return"".concat(e.lastname[0]).concat(e.firstname[0])}}]),e}()).\u0275fac=function(e){return new(e||M)(u.ec(P.a),u.ec(K.b),u.ec(m.e),u.ec(q.a),u.ec(F.b))},M.\u0275prov=u.Mb({token:M,factory:M.\u0275fac,providedIn:"root"}),M);function Q(e,t){if(1&e&&(u.Wb(0,"div",11),u.Wb(1,"span",12),u.Rc(2,"SETTINGS.AUTHORITIES.ROLE"),u.Vb(),u.Rc(3,": "),u.Wb(4,"span",12),u.Rc(5),u.Vb(),u.Vb()),2&e){var n=u.lc().$implicit;u.Ab(5),u.Sc(n.role)}}function z(e,t){if(1&e&&(u.Wb(0,"div",11),u.Wb(1,"span",12),u.Rc(2,"SETTINGS.AUTHORITIES.START_DATE"),u.Vb(),u.Rc(3,": "),u.Wb(4,"span",12),u.Rc(5),u.mc(6,"date"),u.Vb(),u.Vb()),2&e){var n=u.lc().$implicit;u.Ab(5),u.Sc(u.oc(6,1,n.startDate,"dd.MM.yyyy"))}}function H(e,t){if(1&e&&(u.Wb(0,"div",11),u.Wb(1,"span",12),u.Rc(2,"SETTINGS.AUTHORITIES.END_DATE"),u.Vb(),u.Rc(3,": "),u.Wb(4,"span",12),u.Rc(5),u.mc(6,"date"),u.Vb(),u.Vb()),2&e){var n=u.lc().$implicit;u.Ab(5),u.Sc(u.oc(6,1,n.endDate,"dd.MM.yyyy"))}}function X(e,t){if(1&e&&(u.Wb(0,"div",13),u.Rc(1),u.Vb()),2&e){var n=u.lc().$implicit;u.Ab(1),u.Tc(" ",n.sign," ")}}function Y(e,t){if(1&e&&(u.Wb(0,"div",4),u.Wb(1,"div",5),u.Rc(2),u.Vb(),u.Wb(3,"div",6),u.Wb(4,"div",7),u.Rc(5),u.Vb(),u.Wb(6,"div",8),u.Pc(7,Q,6,1,"div",9),u.Pc(8,z,7,4,"div",9),u.Pc(9,H,7,4,"div",9),u.Vb(),u.Vb(),u.Pc(10,X,2,1,"div",10),u.Vb()),2&e){var n=t.$implicit;u.Ab(1),u.Db(n.color),u.Ab(1),u.Tc(" ",n.initials," "),u.Ab(3),u.Sc(n.name),u.Ab(2),u.sc("ngIf",n.role),u.Ab(1),u.sc("ngIf",n.startDate),u.Ab(1),u.sc("ngIf",n.endDate),u.Ab(1),u.sc("ngIf",n.sign)}}function $(e,t){if(1&e&&(u.Wb(0,"section",1),u.Wb(1,"h6",2),u.Rc(2,"SETTINGS.AUTHORITIES.TITLE"),u.Vb(),u.Pc(3,Y,11,8,"div",3),u.Vb()),2&e){var n=u.lc();u.Ab(3),u.sc("ngForOf",n.authorities)}}var J,Z=((J=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||J)},J.\u0275cmp=u.Kb({type:J,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(e,t){1&e&&u.Pc(0,$,4,1,"section",0),2&e&&u.sc("ngIf",t.authorities)},directives:[c.u,m.a,c.t],pipes:[c.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),J),ee=n("xJkR"),te=n("lABO");function ne(e,t){if(1&e&&u.Rb(0,"e-authorities",3),2&e){var n=u.lc();u.sc("authorities",n.authorities)}}var ie=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},ae=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function se(e,t){1&e&&(u.Wb(0,"div",4),u.Rb(1,"ngx-skeleton-loader",5),u.Rb(2,"ngx-skeleton-loader",6),u.Vb()),2&e&&(u.Ab(1),u.sc("theme",u.wc(2,ie)),u.Ab(1),u.sc("theme",u.wc(3,ae)))}function ce(e,t){if(1&e){var n=u.Xb();u.Wb(0,"j-error-placeholder",7),u.ic("retried",(function(e){return u.Gc(n),u.lc().onRetry()})),u.Vb()}}var re,oe=((re=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.settingsService=t,this.companyService=n,this.subscription=new G.a;var a=this.settingsService.getAuthoritiesList().subscribe((function(e){i.authorities=e}));this.subscription.add(a)}return _createClass(e,[{key:"onRetry",value:function(){this.companyService.fetchAuthorizedPersons()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||re)(u.Qb(B),u.Qb(P.a))},re.\u0275cmp=u.Kb({type:re,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(e,t){1&e&&(u.Pc(0,ne,1,1,"e-authorities",0),u.Pc(1,se,3,4,"div",1),u.Pc(2,ce,1,0,"j-error-placeholder",2)),2&e&&(u.sc("ngIf",(null==t.authorities?null:t.authorities.length)>0),u.Ab(1),u.sc("ngIf",0==(null==t.authorities?null:t.authorities.length)),u.Ab(1),u.sc("ngIf",!t.authorities))},directives:[c.u,Z,ee.a,te.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),re),le=n("zdqJ"),ue=["footerTemplate"];function be(e,t){if(1&e&&u.Sb(0,4),2&e){var n=u.lc(2);u.sc("ngTemplateOutlet",n.footerTemplate)}}function de(e,t){if(1&e&&(u.Wb(0,"section",3),u.Sb(1,4),u.Pc(2,be,1,1,"ng-container",5),u.Vb()),2&e){var n=u.lc(),i=u.Dc(3);u.Ab(1),u.sc("ngTemplateOutlet",i),u.Ab(1),u.sc("ngIf",n.footerTemplate)}}function ge(e,t){if(1&e&&(u.Wb(0,"section",6),u.Sb(1,4),u.Vb()),2&e){u.lc();var n=u.Dc(3);u.Ab(1),u.sc("ngTemplateOutlet",n)}}function pe(e,t){if(1&e){var n=u.Xb();u.Wb(0,"button",12),u.ic("click",(function(e){return u.Gc(n),u.lc(3).openRequisites()})),u.Rc(1),u.Vb()}if(2&e){var i=u.lc(3);u.Ab(1),u.Tc(" ",i.info.titleAdditional," ")}}function me(e,t){if(1&e&&(u.Wb(0,"div",18),u.Rc(1),u.Vb()),2&e){var n=u.lc(2).$implicit;u.Ab(1),u.Tc(" ",n.value," ")}}function fe(e,t){if(1&e&&(u.Wb(0,"a",19),u.Rc(1),u.Vb()),2&e){var n=u.lc(2).$implicit;u.uc("href","tel:",n.value,"",u.Ic),u.Ab(1),u.Sc(n.value)}}function he(e,t){if(1&e&&(u.Wb(0,"a",19),u.Rc(1),u.Vb()),2&e){var n=u.lc(2).$implicit;u.uc("href","mailto:",n.value,"",u.Ic),u.Ab(1),u.Sc(n.value)}}function ve(e,t){if(1&e&&(u.Wb(0,"div",14),u.Wb(1,"div",15),u.Rc(2),u.Vb(),u.Pc(3,me,2,1,"div",16),u.Pc(4,fe,2,2,"a",17),u.Pc(5,he,2,2,"a",17),u.Vb()),2&e){var n=u.lc().$implicit;u.Ab(2),u.Tc(" ",n.label," "),u.Ab(1),u.sc("ngIf",!n.isPhone&&!n.isEmail),u.Ab(1),u.sc("ngIf",n.isPhone),u.Ab(1),u.sc("ngIf",n.isEmail)}}function ke(e,t){if(1&e&&(u.Ub(0),u.Pc(1,ve,6,4,"div",13),u.Tb()),2&e){var n=t.$implicit;u.Ab(1),u.sc("ngIf",n.value)}}function ye(e,t){if(1&e&&(u.Ub(0),u.Wb(1,"div",8),u.Wb(2,"h6",9),u.Rc(3),u.Vb(),u.Pc(4,pe,2,1,"button",10),u.Vb(),u.Pc(5,ke,2,1,"ng-container",11),u.Tb()),2&e){var n=u.lc(2);u.Ab(3),u.Sc(n.info.title),u.Ab(1),u.sc("ngIf",n.info.titleAdditional),u.Ab(1),u.sc("ngForOf",n.info.fields)}}function Se(e,t){if(1&e&&u.Pc(0,ye,6,3,"ng-container",7),2&e){var n=u.lc();u.sc("ngIf",n.info)}}var Ce,Ae=((Ce=function(){function e(){_classCallCheck(this,e),this.requisitesClicked=new u.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openRequisites",value:function(){this.requisitesClicked.emit()}}]),e}()).\u0275fac=function(e){return new(e||Ce)},Ce.\u0275cmp=u.Kb({type:Ce,selectors:[["j-settings-info"]],contentQueries:function(e,t,n){var i;1&e&&u.Ib(n,ue,!0),2&e&&u.Cc(i=u.jc())&&(t.footerTemplate=i.first)},inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(e,t){1&e&&(u.Pc(0,de,3,2,"section",0),u.Pc(1,ge,2,1,"section",1),u.Pc(2,Se,1,1,"ng-template",null,2,u.Qc)),2&e&&(u.sc("ngIf",t.hasTour),u.Ab(1),u.sc("ngIf",!t.hasTour))},directives:[c.u,le.a,c.B,m.a,c.t],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),Ce),Te=function(){return["/authorities"]};function Pe(e,t){1&e&&(u.Wb(0,"a",4),u.Rc(1),u.mc(2,"translate"),u.Vb()),2&e&&(u.sc("routerLink",u.wc(4,Te)),u.Ab(1),u.Tc(" ",u.nc(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function Ie(e,t){if(1&e){var n=u.Xb();u.Wb(0,"section",5),u.Wb(1,"div",6),u.ic("click",(function(e){return u.Gc(n),u.lc().hideSelector()})),u.Vb(),u.Wb(2,"section",7),u.Wb(3,"j-all-requisites",8),u.ic("closed",(function(e){return u.Gc(n),u.lc().hideSelector()})),u.Vb(),u.Vb(),u.Vb()}if(2&e){var i=u.lc();u.sc("ngClass",i.wrapperClasses),u.Ab(2),u.sc("ngClass",i.allRequisitesClasses)}}var we,Re,_e=((we=function(){function e(t,n,i){var a=this;_classCallCheck(this,e),this.settingsService=t,this.companyService=n,this.document=i,this.subscription=new G.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();var s=this.companyService.refresh$.subscribe((function(){a.loadData()}));this.subscription.add(s)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"loadData",value:function(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo()}},{key:"retrieveMainInfo",value:function(){this.mainInfo=this.settingsService.generateMainInfo()}},{key:"retrieveContactsInfo",value:function(){this.contactsInfo=this.settingsService.generateContactsInfo()}},{key:"retrievePrivateInfo",value:function(){this.privateInfo=this.settingsService.generatePrivateInfo()}},{key:"showSelector",value:function(){var e=this;this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout((function(){e.document.body.classList.add("overflow-hidden"),e.allRequisitesClasses="is-shown"}),250),setTimeout((function(){e.wrapperClasses="",e.isAnimating=!1}),300))}},{key:"hideSelector",value:function(){var e=this;this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout((function(){e.document.body.classList.remove("overflow-hidden"),e.wrapperClasses="animate__animated zoomOutJ"}),250),setTimeout((function(){e.wrapperClasses="",e.isAllRequisitesShown=!1,e.isAnimating=!1}),300))}}]),e}()).\u0275fac=function(e){return new(e||we)(u.Qb(B),u.Qb(P.a),u.Qb(c.e))},we.\u0275cmp=u.Kb({type:we,selectors:[["j-settings-main"]],decls:6,vars:5,consts:[[3,"info","hasTour","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(e,t){1&e&&(u.Wb(0,"j-settings-info",0),u.ic("requisitesClicked",(function(e){return t.showSelector()})),u.Pc(1,Pe,3,5,"ng-template",null,1,u.Qc),u.Vb(),u.Rb(3,"j-settings-info",2),u.Rb(4,"j-settings-info",2),u.Pc(5,Ie,4,2,"section",3)),2&e&&(u.sc("info",t.mainInfo)("hasTour",!0),u.Ab(3),u.sc("info",t.privateInfo),u.Ab(1),u.sc("info",t.contactsInfo),u.Ab(1),u.sc("ngIf",t.isAllRequisitesShown))},directives:[Ae,c.u,l.f,c.r,D],pipes:[m.d],styles:[""]}),we),Ee=n("p6Hd"),Oe=n("tWFC"),xe=n("1kSV"),We=n("kUBv"),Ve=["newPassword"],Ne=((Re=function(){function e(t,n){_classCallCheck(this,e),this.userService=t,this.modalService=n,this.isLoading=!1}return _createClass(e,[{key:"onSubmit",value:function(e){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,this.errorText=null,t.prev=1,t.next=4,this.userService.changePassword(e.oldPassword,e.newPassword);case 4:this.newPassword.clearForm(),this.showSuccessModal(),t.next=20;break;case 8:t.prev=8,t.t0=t.catch(1),t.t1=t.t0.code,t.next=t.t1===Ee.b.INVALID_PASSWORD?13:t.t1===Ee.b.IDENTICAL_PASSWORDS?15:t.t1===Ee.b.USED_PASSWORD?17:19;break;case 13:return this.errorText="SETTINGS.PASSWORD.OLD_ERROR",t.abrupt("break",20);case 15:return this.errorText="SETTINGS.PASSWORD.IDENTICAL",t.abrupt("break",20);case 17:return this.errorText="SETTINGS.PASSWORD.USED",t.abrupt("break",20);case 19:this.errorText=t.t0.description;case 20:return t.prev=20,this.isLoading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,8,20,23]])})))}},{key:"showSuccessModal",value:function(){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.modalService.open(Oe.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0}),e.prev=1,e.next=4,t.result;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])})))}}]),e}()).\u0275fac=function(e){return new(e||Re)(u.Qb(K.b),u.Qb(xe.q))},Re.\u0275cmp=u.Kb({type:Re,selectors:[["j-settings-password"]],viewQuery:function(e,t){var n;1&e&&u.Wc(Ve,!0),2&e&&u.Cc(n=u.jc())&&(t.newPassword=n.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(e,t){1&e&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Rb(3,"div",3),u.Wb(4,"j-new-password",4,5),u.ic("submitted",(function(e){return t.onSubmit(e)})),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Ab(4),u.sc("isOldShown",!0)("isLoading",t.isLoading)("errorText",t.errorText))},directives:[m.a,We.a],styles:[""]}),Re),Me=n("LRne"),De=function e(t,n,i,a){_classCallCheck(this,e),this.numberOfPayments=t,this.depositAndWithdrawal=n,this.discountInRubles=i,this.discountInForeignCurrency=a},Ge=function e(t,n,i){_classCallCheck(this,e),this.title=t,this.helpText=n,this.description=Object(Me.a)(i)},je=function e(t,n){_classCallCheck(this,e),this.totalCost=t,this.saving=n},Le=function(e){return e.Loading="loading",e.Change="change",e.Success="success",e.NotFound="not_found",e.Error="error",e.Forbidden="forbidden",e}({}),Ue=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],Ke=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],qe=[{name:"\u0412 \u0440\u0443\u0431\u043b\u044f\u0445",text:"2 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 50% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435",text:"3 000 \u20b8/\u043c\u0435\u0441. \u0421\u043a\u0438\u0434\u043a\u0430 30% \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],Fe=[Object.assign(Object.assign({},qe[0]),{disabled:!0}),Object.assign(Object.assign({},qe[1]),{disabled:!0})],Be={current:0,total:0,description:Object(Me.a)("")},Qe={current:0,total:0,description:Object(Me.a)("")},ze={totalCost:0,nextWriteOff:""},He={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},Xe=[{height:"2.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];n("eIyQ");var Ye={connect:{title:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0430",key:"close"}},prepared:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u0441\u0432\u043e\u0439 \u043f\u0430\u043a\u0435\u0442",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},error:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"50x",description:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.\n\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u044d\u0442\u0438\u043c, \n\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",buttonOk:{text:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",key:"smsAfter"},buttonClose:{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u043f\u0430\u043a\u0435\u0442\u0430",key:"close"}},change:{title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442?",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c. \n\u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},connect_standart:{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439?",description:"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0433\u043e\u0440\u044f\u0442. \n\u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u043a\u0435\u0442 \n\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0434\u0435\u043d\u044c. \n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonOk:{text:"\u0414\u0430",key:"smsAfter"},buttonClose:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",key:"close"}},prepared_standart:{icon:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",code:"204",description:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444 Standart",buttonOk:{text:"\u041e\u041a",key:"returnMyPackage"}},payment:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",code:"402",description:"\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0447\u0451\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},payment_locked:{icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430!",description:"\u041d\u0430 \u0441\u0447\u0451\u0442\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f",buttonClose:{text:"\u041e\u041a",key:"close"}},working_days:{icon:"error",description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \n\u0432 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438. \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435 \u0437\u0430 \u043d\u0435\u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430",buttonClose:{text:"\u041e\u041a",key:"close"}},same_day:{icon:"error",description:"\u041c\u0435\u043d\u044f\u0442\u044c \u0442\u0430\u0440\u0438\u0444 \u043c\u043e\u0436\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c",buttonClose:{text:"\u041e\u041a",key:"close"}}},$e=n("Ts65");function Je(e,t){if(1&e&&(u.Wb(0,"div",1),u.Wb(1,"div",2),u.Wb(2,"span"),u.Rc(3),u.mc(4,"translate"),u.Wb(5,"span",3),u.Rc(6),u.mc(7,"number"),u.Vb(),u.Rc(8),u.mc(9,"translate"),u.mc(10,"number"),u.Vb(),u.Vb(),u.Wb(11,"div",2),u.Wb(12,"small"),u.Rc(13),u.Vb(),u.Vb(),u.Wb(14,"div",4),u.Wb(15,"div",5),u.Rb(16,"div",6),u.Vb(),u.Vb(),u.Vb()),2&e){var n=u.lc();u.Ab(3),u.Tc("",u.nc(4,7,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),u.Ab(2),u.sc("title",null==n.item?null:n.item.current),u.Ab(1),u.Tc("",u.nc(7,9,null==n.item?null:n.item.current)," "),u.Ab(2),u.Uc(" ",u.nc(9,11,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM")," ",u.nc(10,13,null==n.item?null:n.item.total),""),u.Ab(5),u.Tc(" ",null==n.item?null:n.item.description," "),u.Ab(3),u.sc("ngStyle",n.style)}}function Ze(e,t){1&e&&(u.Wb(0,"div",1),u.Wb(1,"div",2),u.Rc(2),u.mc(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Wb(5,"small"),u.Rc(6),u.mc(7,"translate"),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Ab(2),u.Tc(" ",u.nc(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),u.Ab(4),u.Tc(" ",u.nc(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}var et,tt=((et=function(){function e(){_classCallCheck(this,e),this.style={width:"0%"}}return _createClass(e,[{key:"ngOnInit",value:function(){this.calculateRemaining(this.item)}},{key:"calculateRemaining",value:function(e){var t,n,i=Math.round((null===(t=e)||void 0===t?void 0:t.current)/(null===(n=e)||void 0===n?void 0:n.total)*100);this.style.width="".concat(i,"%")}}]),e}()).\u0275fac=function(e){return new(e||et)},et.\u0275cmp=u.Kb({type:et,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success-color",3,"ngStyle"]],template:function(e,t){1&e&&(u.Pc(0,Je,17,15,"div",0),u.Pc(1,Ze,8,6,"div",0)),2&e&&(u.sc("ngIf",null==t.item?null:t.item.total),u.Ab(1),u.sc("ngIf",!(null!=t.item&&t.item.total)))},directives:[c.u,c.x],pipes:[m.d,c.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.bg-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),et),nt=n("Bl/x");function it(e,t){if(1&e){var n=u.Xb();u.Wb(0,"j-switch",10),u.ic("change",(function(e){u.Gc(n);var t=u.lc().$implicit;return u.lc().setValue(t)})),u.Vb()}if(2&e){var i=u.lc().$implicit;u.sc("value",i.checked)}}function at(e,t){1&e&&u.Rb(0,"img",13)}function st(e,t){1&e&&u.Rb(0,"img",14)}function ct(e,t){if(1&e&&(u.Ub(0),u.Pc(1,at,1,0,"img",11),u.Pc(2,st,1,0,"img",12),u.Tb()),2&e){var n=u.lc().$implicit;u.Ab(1),u.sc("ngIf",n.checked),u.Ab(1),u.sc("ngIf",!n.checked)}}function rt(e,t){1&e&&u.Rb(0,"div",15)}function ot(e,t){if(1&e&&(u.Ub(0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"div",3),u.Wb(4,"span",4),u.Rc(5),u.Vb(),u.Rc(6),u.Vb(),u.Wb(7,"div",5),u.Rc(8),u.Vb(),u.Vb(),u.Wb(9,"div",6),u.Pc(10,it,1,1,"j-switch",7),u.Pc(11,ct,3,2,"ng-container",8),u.Vb(),u.Vb(),u.Pc(12,rt,1,0,"div",9),u.Tb()),2&e){var n=t.$implicit,i=t.last;u.Ab(4),u.Hb("bg-sale-success-color",n.checked),u.Ab(1),u.Tc("-",n.sale,"%"),u.Ab(1),u.Tc(" ",n.name," "),u.Ab(2),u.Tc(" ",n.text," "),u.Ab(2),u.sc("ngIf",!(null!=n&&n.disabled)),u.Ab(1),u.sc("ngIf",null==n?null:n.disabled),u.Ab(1),u.sc("ngIf",!i)}}var lt,ut,bt,dt=((lt=function(){function e(){_classCallCheck(this,e),this.getValue=new u.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setValue",value:function(e){e.checked=!e.checked,this.getValue.emit(_defineProperty({},e.key,e.checked))}},{key:"select",set:function(e){this.items[0].checked=e.discountInRubles,this.items[1].checked=e.discountInForeignCurrency}}]),e}()).\u0275fac=function(e){return new(e||lt)},lt.\u0275cmp=u.Kb({type:lt,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","/assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","/assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","/assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","/assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(e,t){1&e&&u.Pc(0,ot,13,8,"ng-container",0),2&e&&u.sc("ngForOf",t.items)},directives:[c.t,c.u,nt.a],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),lt),gt=function(e){return{totalCost:e}},pt=((ut=function(){function e(t){_classCallCheck(this,e),this.translateService=t,this.isAnotherCompany=!1,this.payment=new Ge("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new Ge("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new Ge("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Qe,this.myRefillData=Be,this.myPriceData=ze,this.mySaleData=Fe}return _createClass(e,[{key:"ngOnInit",value:function(){this.defaultView()}},{key:"defaultView",value:function(){this.isAnotherCompany||(this.payment=new Ge("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new Ge("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new Ge("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}},{key:"data",set:function(e){var t=this;this.myPaymentData.current=e.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=e.restOfPayments.totalNumberOfPayments,this.myPaymentData.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:e.restOfPayments.totalNumberOfPayments,payment:e.restOfPayments.costNextPayment}),this.myRefillData.current=e.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=e.depositAndWithdrawals.totalDepositAndWithdrawals,this.myRefillData.description=this.refill.description=this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:e.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:e.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:e.depositAndWithdrawals.withdrawalOverLimit}),this.mySaleData.find((function(n,i){"discountInRubles"===n.key&&(t.mySaleData[i]=Object.assign(Object.assign({},t.mySaleData[i]),{checked:e.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===n.key&&(t.mySaleData[i]=Object.assign(Object.assign({},t.mySaleData[i]),{checked:e.discountOnTransferInCurrency.hasDiscount}))})),this.myPriceData.totalCost=e.totalCost,this.myPriceData.nextWriteOff=e.nextWriteOff}}]),e}()).\u0275fac=function(e){return new(e||ut)(u.Qb(m.e))},ut.\u0275cmp=u.Kb({type:ut,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:14,vars:19,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"]],template:function(e,t){1&e&&(u.Wb(0,"j-settings-package-card",0),u.Rb(1,"j-settings-package-progressbar",1),u.Vb(),u.Wb(2,"j-settings-package-card",0),u.Rb(3,"j-settings-package-progressbar",2),u.Vb(),u.Wb(4,"j-settings-package-card",0),u.Rb(5,"j-settings-package-form",3),u.Vb(),u.Wb(6,"j-settings-package-card"),u.Wb(7,"p",4),u.Rc(8),u.mc(9,"translate"),u.mc(10,"number"),u.Vb(),u.Wb(11,"p",5),u.Rc(12),u.mc(13,"date"),u.Vb(),u.Vb()),2&e&&(u.sc("itemCardSettingsPackage",t.payment),u.Ab(1),u.sc("item",t.myPaymentData),u.Ab(1),u.sc("itemCardSettingsPackage",t.refill),u.Ab(1),u.sc("item",t.myRefillData),u.Ab(1),u.sc("itemCardSettingsPackage",t.sale),u.Ab(1),u.sc("items",t.mySaleData),u.Ab(3),u.Tc(" ",u.oc(9,9,"SETTINGS.PACKAGE.CALCULATE.COST",u.xc(17,gt,u.nc(10,12,null==t.myPriceData?null:t.myPriceData.totalCost)))," "),u.Ab(4),u.Uc("","SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW"," \u2014 ",u.oc(13,14,null==t.myPriceData?null:t.myPriceData.nextWriteOff,"dd.MM.yyyy"),""))},directives:[$e.a,tt,dt],pipes:[m.d,c.g,c.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}"]}),ut),mt=n("yZrb"),ft=n("tk/3"),ht=((bt=function(){function e(t){_classCallCheck(this,e),this.apiService=t}return _createClass(e,[{key:"getCompanyCurrentPackage",value:function(e){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="companies/".concat(e,"/packages/current"),t.next=3,this.apiService.get(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"calculatePackageCost",value:function(e,t){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i="companies/".concat(e,"/packages/calculate"),n.next=3,this.apiService.post(i,t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"changeCompanyPackage",value:function(e,t,n){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a="companies/".concat(e,"/packages/current"),s=(new ft.g).set(mt.b.PHONE,n),i.next=3,this.apiService.put(a,t,s);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}}),i,this)})))}}]),e}()).\u0275fac=function(e){return new(e||bt)(u.ec(mt.a))},bt.\u0275prov=u.Mb({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt),vt=n("2FF4"),kt=n("4zJ+");function yt(e,t){1&e&&(u.Rb(0,"img",8),u.mc(1,"translate")),2&e&&u.tc("alt",u.nc(1,1,"SHARED.DONE"))}function St(e,t){1&e&&(u.Rb(0,"img",9),u.mc(1,"translate")),2&e&&u.tc("alt",u.nc(1,1,"SHARED.DONE"))}function Ct(e,t){if(1&e&&(u.Wb(0,"h3",10),u.Rc(1),u.Vb()),2&e){var n=u.lc(2);u.Ab(1),u.Tc(" ",n.alertMessage.title," ")}}function At(e,t){if(1&e&&(u.Wb(0,"p",11),u.Rc(1),u.Vb()),2&e){var n=u.lc(2);u.Ab(1),u.Tc(" ",n.alertMessage.description," ")}}function Tt(e,t){if(1&e){var n=u.Xb();u.Wb(0,"div",12),u.Wb(1,"button",13),u.ic("click",(function(e){u.Gc(n);var t=u.lc(2);return t.buttonClick(t.alertMessage.buttonOk.key)})),u.Rc(2),u.Vb(),u.Vb()}if(2&e){var i=u.lc(2);u.Ab(2),u.Tc(" ",i.alertMessage.buttonOk.text," ")}}function Pt(e,t){if(1&e){var n=u.Xb();u.Wb(0,"div",12),u.Wb(1,"button",14),u.ic("click",(function(e){u.Gc(n);var t=u.lc(2);return t.buttonClick(t.alertMessage.buttonClose.key)})),u.Rc(2),u.Vb(),u.Vb()}if(2&e){var i=u.lc(2);u.Ab(2),u.Tc(" ",i.alertMessage.buttonClose.text," ")}}function It(e,t){if(1&e&&(u.Ub(0),u.Rb(1,"div",1),u.Wb(2,"div",2),u.Pc(3,yt,2,3,"img",3),u.Pc(4,St,2,3,"img",4),u.Pc(5,Ct,2,1,"h3",5),u.Pc(6,At,2,1,"p",6),u.Vb(),u.Pc(7,Tt,3,1,"div",7),u.Pc(8,Pt,3,1,"div",7),u.Tb()),2&e){var n=u.lc();u.Ab(3),u.sc("ngIf","success"===(null==n.alertMessage?null:n.alertMessage.icon)),u.Ab(1),u.sc("ngIf","error"===(null==n.alertMessage?null:n.alertMessage.icon)),u.Ab(1),u.sc("ngIf",null==n.alertMessage?null:n.alertMessage.title),u.Ab(1),u.sc("ngIf",null==n.alertMessage?null:n.alertMessage.description),u.Ab(1),u.sc("ngIf",null==n.alertMessage?null:n.alertMessage.buttonOk),u.Ab(1),u.sc("ngIf",null==n.alertMessage?null:n.alertMessage.buttonClose)}}function wt(e,t){if(1&e){var n=u.Xb();u.Wb(0,"button",18),u.ic("click",(function(e){return u.Gc(n),u.lc(2).buttonClick("close")})),u.Rb(1,"img",19),u.mc(2,"translate"),u.Vb()}2&e&&(u.Ab(1),u.tc("alt",u.nc(2,1,"SHARED.CLOSE")))}function Rt(e,t){1&e&&(u.Wb(0,"div",20),u.Rb(1,"j-animated-loading"),u.Vb())}function _t(e,t){if(1&e){var n=u.Xb();u.Ub(0),u.Wb(1,"div",1),u.Pc(2,wt,3,3,"button",15),u.Vb(),u.Wb(3,"div",2),u.Wb(4,"j-sms",16),u.ic("loaded",(function(e){return u.Gc(n),u.lc().onSmsLoaded()}))("submitted",(function(e){return u.Gc(n),u.lc().onSubmit(e)})),u.Vb(),u.Pc(5,Rt,2,0,"div",17),u.Vb(),u.Tb()}if(2&e){var i=u.lc();u.Ab(2),u.sc("ngIf",i.isReady),u.Ab(2),u.sc("phone",i.phone)("countryCode",i.countryCode)("headers",i.headerParams)("hidden",!i.isReady),u.Ab(1),u.sc("ngIf",!i.isReady)}}var Et,Ot=((Et=function(){function e(t,n){_classCallCheck(this,e),this.modal=t,this.packageRequestsService=n,this.refresh=new u.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:mt.c.SIGNING_PACKAGE}}return _createClass(e,[{key:"ngOnInit",value:function(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Ye.same_day:Ye[this.alertMessageType]:Ye.working_days}},{key:"onSmsLoaded",value:function(){this.isReady=!0}},{key:"onSubmit",value:function(e){this.isReady=!1,this.changePackage(e.signature)}},{key:"changePackage",value:function(e){var t=this;this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,e).then((function(){t.alertMessage="connect_standart"===t.alertMessageType?Ye.prepared_standart:Ye.prepared})).catch((function(e){t.alertMessage=402===e.status?Ye.payment:423===e.status?Ye.payment_locked:Ye.error})).finally((function(){var e,n,i="connect"===t.alertMessageType?"new":"old",a=(null===(e=t.alertMessage)||void 0===e?void 0:e.code)?null===(n=t.alertMessage)||void 0===n?void 0:n.code:"";t.smsAfterOpen=!1,t.refresh.emit({typeUser:i,statusCode:a})}))}},{key:"buttonClick",value:function(e){"smsAfter"===e&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===e&&this.modal.close(),"close"===e&&this.modal.close()}}]),e}()).\u0275fac=function(e){return new(e||Et)(u.Qb(xe.a),u.Qb(ht))},Et.\u0275cmp=u.Kb({type:Et,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(e,t){1&e&&(u.Pc(0,It,9,6,"ng-container",0),u.Pc(1,_t,6,6,"ng-container",0)),2&e&&(u.sc("ngIf",!t.smsAfterOpen),u.Ab(1),u.sc("ngIf",t.smsAfterOpen))},directives:[c.u,m.a,vt.a,kt.a],pipes:[m.d],styles:[""]}),Et),xt=n("5gsm");function Wt(e,t){if(1&e){var n=u.Xb();u.Wb(0,"button",7),u.ic("click",(function(e){return u.Gc(n),u.lc(3).resetPackageTerms.emit("cancel")})),u.Rc(1),u.mc(2,"translate"),u.Vb()}2&e&&(u.Ab(1),u.Tc(" ",u.nc(2,1,"SETTINGS.PACKAGE.RESET")," "))}function Vt(e,t){if(1&e&&(u.Wb(0,"div",3),u.Pc(1,Wt,3,3,"button",6),u.Vb()),2&e){var n=u.lc(2);u.Ab(1),u.sc("ngIf","change"===n.status)}}function Nt(e,t){if(1&e){var n=u.Xb();u.Wb(0,"button",7),u.ic("click",(function(e){u.Gc(n),u.lc();var t=u.Dc(2),i=u.lc(2);return t.close(),i.resetPackageTerms.emit("change")})),u.Rc(1),u.mc(2,"translate"),u.Vb(),u.Wb(3,"button",11),u.ic("click",(function(e){u.Gc(n),u.lc();var t=u.Dc(2),i=u.lc(2);return t.close(),i.resetPackageTerms.emit("reset")})),u.Rc(4),u.mc(5,"translate"),u.Vb()}2&e&&(u.Ab(1),u.Tc(" ",u.nc(2,2,"SETTINGS.PACKAGE.CHANGE")," "),u.Ab(3),u.Tc(" ",u.nc(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function Mt(e,t){if(1&e&&(u.Wb(0,"div",3),u.Wb(1,"button",8,9),u.Rc(3),u.mc(4,"translate"),u.Vb(),u.Pc(5,Nt,6,6,"ng-template",null,10,u.Qc),u.Vb()),2&e){var n=u.Dc(6);u.Ab(1),u.sc("autoClose","outside")("ngbPopover",n),u.Ab(2),u.Tc(" ",u.nc(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function Dt(e,t){if(1&e&&(u.Wb(0,"section",1),u.Wb(1,"div",2),u.Wb(2,"div",3),u.Wb(3,"h4",4),u.Rc(4),u.mc(5,"translate"),u.Vb(),u.Vb(),u.Pc(6,Vt,2,1,"div",5),u.Pc(7,Mt,7,5,"div",5),u.Vb(),u.Vb()),2&e){var n=u.lc();u.Ab(4),u.Sc(u.nc(5,3,n.packageTitle[n.status])),u.Ab(2),u.sc("ngIf","change"===n.status),u.Ab(1),u.sc("ngIf","success"===n.status)}}var Gt,jt=function(){return["success","change","not_found"]},Lt=((Gt=function e(){_classCallCheck(this,e),this.status=Le.Loading,this.resetPackageTerms=new u.n,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}).\u0275fac=function(e){return new(e||Gt)},Gt.\u0275cmp=u.Kb({type:Gt,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(e,t){1&e&&u.Pc(0,Dt,8,5,"section",0),2&e&&u.sc("ngIf",u.wc(1,jt).includes(t.status))},directives:[c.u,xe.C],pipes:[m.d],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),Gt);function Ut(e,t){if(1&e){var n=u.Xb();u.Wb(0,"div",2),u.Wb(1,"label"),u.Wb(2,"input",3),u.ic("change",(function(e){u.Gc(n);var i=t.$implicit,a=t.index;return u.lc().setValue(i,a)})),u.Vb(),u.Wb(3,"div",4),u.Wb(4,"div",5),u.Rc(5),u.mc(6,"translate"),u.Vb(),u.Wb(7,"div",6),u.Rc(8),u.mc(9,"currency"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){var i=t.$implicit,a=t.index,s=u.lc();u.Ab(2),u.sc("name",s.key+a)("value",i.value)("checked",i.checked),u.Ab(3),u.Uc("",i.value," ",u.nc(6,6,s.textType[s.key]),""),u.Ab(3),u.Tc(" ",u.pc(9,8,i.currency,"\u20b8","symbol","0.0-2")," ")}}var Kt,qt,Ft,Bt=((Ft=function(){function e(){_classCallCheck(this,e),this.key="numberOfPayments",this.getValue=new u.n,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setValue",value:function(e,t){e.checked=!e.checked,this.items.filter((function(e,n){return n!==t})).map((function(e){return e.checked=!1})),this.getValue.emit(_defineProperty({},this.key,e.checked?e.value:0))}},{key:"select",set:function(e){this.items.map((function(t){return t.checked=t.value===e}))}}]),e}()).\u0275fac=function(e){return new(e||Ft)},Ft.\u0275cmp=u.Kb({type:Ft,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(e,t){1&e&&(u.Wb(0,"div",0),u.Pc(1,Ut,10,13,"div",1),u.Vb()),2&e&&(u.Ab(1),u.sc("ngForOf",t.items))},directives:[c.t],pipes:[m.d,c.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),Ft),Qt=((qt=function(){function e(t){var n=this;_classCallCheck(this,e),this.translateService=t,this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new u.n,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe((function(){n.currency=n.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")}))}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||qt)(u.Qb(m.e))},qt.\u0275cmp=u.Kb({type:qt,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:26,vars:30,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"ngbTooltip","inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(e,t){if(1&e&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"div",3),u.Wb(4,"span",4),u.Rc(5),u.mc(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"div",3),u.Wb(8,"span"),u.Wb(9,"span",5),u.Rc(10),u.mc(11,"currency"),u.Vb(),u.Wb(12,"span",5),u.Rc(13,"-"),u.Vb(),u.Rb(14,"a",6),u.mc(15,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"div",7),u.Wb(17,"button",8,9),u.ic("click",(function(e){return t.openModal.emit()})),u.mc(19,"translate"),u.Wb(20,"span"),u.Rc(21),u.mc(22,"translate"),u.Vb(),u.Wb(23,"span",10),u.Rc(24),u.mc(25,"currency"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e){var n=u.Dc(18);u.Ab(5),u.Sc(u.nc(6,12,"SETTINGS.PACKAGE.PRICE.TITLE")),u.Ab(4),u.sc("hidden",!(null!=t.item&&t.item.saving)),u.Ab(1),u.Sc(u.pc(11,14,null==t.item?null:t.item.saving,"\u20b8","symbol","0.0-2")),u.Ab(2),u.sc("hidden",null==t.item?null:t.item.saving),u.Ab(2),u.sc("ngbTooltip",u.nc(15,19,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question.svg"),u.Ab(3),u.sc("ngbTooltip",u.nc(19,21,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",t.disabledButton),u.Ab(4),u.Uc("",u.nc(22,23,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",t.isWorkingDay?n.close():n.open(),""),u.Ab(2),u.sc("hidden",!(null!=t.item&&t.item.saving)),u.Ab(1),u.Tc("\xa0",u.pc(25,25,null==t.item?null:t.item.totalCost,t.currency,"symbol","0.0-2"),"")}},directives:[xe.E,_.a],pipes:[m.d,c.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),qt),zt=((Kt=function(){function e(t){_classCallCheck(this,e),this.translateService=t,this.calculatePackage=new u.n,this.openModal=new u.n,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=Ue,this.refillData=Ke,this.saleData=qe,this.disabledButton=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.packageTerms=new De(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}},{key:"defaultView",value:function(){var e=this;return this.disabledButton=!0,!Object.keys(this.packageTerms).every((function(t){return!e.packageTerms[t]}))||(this.payment=new Ge("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new Ge("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new Ge("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new je(0,0),!1)}},{key:"packageCalculate",value:function(e){"depositAndWithdrawal"in e&&(e.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),e),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}},{key:"getPackageTerms",value:function(e){e&&(this.packageTerms.numberOfPayments=e.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=e.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=e.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=e.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}},{key:"data",set:function(e){e&&(this.price.totalCost=e.conditions.packageCost,this.price.saving=e.saving,this.payment.description=e.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:e.conditions.costNextPayment}):Object(Me.a)(""),this.refill.description=e.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:e.depositAndWithdrawal/1e6,depositingOverLimit:e.conditions.depositingOverLimit,withdrawalOverLimit:e.conditions.withdrawalOverLimit}):Object(Me.a)(""),this.disabledButton=!this.isWorkingDay)}}]),e}()).\u0275fac=function(e){return new(e||Kt)(u.Qb(m.e))},Kt.\u0275cmp=u.Kb({type:Kt,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:8,vars:12,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"]],template:function(e,t){1&e&&(u.Wb(0,"j-settings-package-card",0),u.Wb(1,"j-settings-package-tabs",1),u.ic("getValue",(function(e){return t.packageCalculate(e)})),u.Vb(),u.Vb(),u.Wb(2,"j-settings-package-card",0),u.Wb(3,"j-settings-package-tabs",2),u.ic("getValue",(function(e){return t.packageCalculate(e)})),u.Vb(),u.Vb(),u.Wb(4,"j-settings-package-card",0),u.Wb(5,"j-settings-package-form",3),u.ic("getValue",(function(e){return t.packageCalculate(e)})),u.Vb(),u.Vb(),u.Wb(6,"j-settings-package-card"),u.Wb(7,"j-settings-package-price",4),u.ic("openModal",(function(e){return t.openModal.emit(t.packageTerms)})),u.Vb(),u.Vb()),2&e&&(u.sc("itemCardSettingsPackage",t.payment),u.Ab(1),u.sc("items",t.paymentData)("select",t.packageTerms.numberOfPayments),u.Ab(1),u.sc("itemCardSettingsPackage",t.refill),u.Ab(1),u.sc("items",t.refillData)("select",t.packageTerms.depositAndWithdrawal/1e6),u.Ab(1),u.sc("itemCardSettingsPackage",t.sale),u.Ab(1),u.sc("items",t.saleData)("select",t.packageTerms),u.Ab(2),u.sc("item",t.price)("disabledButton",t.disabledButton)("isWorkingDay",t.isWorkingDay))},directives:[$e.a,Bt,dt,Qt],styles:[""]}),Kt);function Ht(e,t){if(1&e&&(u.Ub(0),u.Rb(1,"j-my-package",5),u.Tb()),2&e){var n=u.lc();u.Ab(1),u.sc("data",n.packageRest)}}function Xt(e,t){if(1&e){var n=u.Xb();u.Ub(0),u.Wb(1,"j-calculate-package",6),u.ic("openModal",(function(e){return u.Gc(n),u.lc().changePackageTerms("connect",e)}))("calculatePackage",(function(e){return u.Gc(n),u.lc().calculatePackageTerms(e)})),u.Vb(),u.Tb()}if(2&e){var i=u.lc();u.Ab(1),u.sc("data",i.packageCalculation)("isWorkingDay",i.packageRest.isWorkingDay)}}function Yt(e,t){if(1&e){var n=u.Xb();u.Ub(0),u.Wb(1,"j-calculate-package",7),u.ic("openModal",(function(e){return u.Gc(n),u.lc().changePackageTerms("change",e)}))("calculatePackage",(function(e){return u.Gc(n),u.lc().calculatePackageTerms(e)})),u.Vb(),u.Tb()}if(2&e){var i=u.lc();u.Ab(1),u.sc("data",i.packageCalculation)("packageRest",i.packageRest)}}function $t(e,t){1&e&&(u.Ub(0),u.Rb(1,"j-error-placeholder",8),u.mc(2,"translate"),u.mc(3,"translate"),u.Tb()),2&e&&(u.Ab(1),u.sc("errorText",u.nc(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",u.nc(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function Jt(e,t){if(1&e){var n=u.Xb();u.Ub(0),u.Wb(1,"j-error-placeholder",9),u.ic("retried",(function(e){return u.Gc(n),u.lc().getPackageRest()})),u.Vb(),u.Tb()}}function Zt(e,t){1&e&&u.Rb(0,"ngx-skeleton-loader",11),2&e&&u.sc("theme",t.$implicit)}function en(e,t){if(1&e&&(u.Ub(0),u.Pc(1,Zt,1,1,"ngx-skeleton-loader",10),u.Tb()),2&e){var n=u.lc();u.Ab(1),u.sc("ngForOf",n.themes)}}var tn,nn,an=((tn=function(){function e(t,n,i,a){_classCallCheck(this,e),this.packageRequestsService=t,this.companyService=n,this.analytics=i,this.modalService=a,this.subscription=new G.a,this.themes=Xe}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.companyService.refresh$.subscribe((function(t){e.companyId=t[1].companyId,e.getPackageRest()}))}},{key:"getPackageRest",value:function(){var e=this;this.packageCalculation=void 0,this.packageResponseStatus=Le.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then((function(t){var n;e.packageRest=t,e.packageResponseStatus=(null===(n=e.packageRest)||void 0===n?void 0:n.totalCost)?Le.Success:Le.NotFound,e.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})})).catch((function(t){403===t.status?(e.packageResponseStatus=Le.Forbidden,e.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(e.packageResponseStatus=Le.Error,e.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))}))}},{key:"calculatePackageTerms",value:function(e){var t=this;this.packageRequestsService.calculatePackageCost(this.companyId,e).then((function(e){t.packageCalculation=e})).catch((function(){t.packageResponseStatus=Le.Error}))}},{key:"changePackageTerms",value:function(e,t){var n=this,i=this.modalService.open(Ot,He);i.componentInstance.alertMessageType=e,i.componentInstance.packageTerms=t,i.componentInstance.companyId=this.companyId,i.componentInstance.isSameDay=this.packageRest.isSameDay,i.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,i.componentInstance.refresh.subscribe((function(e){var t=e.typeUser,i=e.statusCode;n.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:t,Status:i}),n.getPackageRest()})),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}},{key:"resetPackageTerms",value:function(e){if(this.packageCalculation=void 0,"change"===e)this.packageResponseStatus=Le.Change;else if("cancel"===e)this.packageResponseStatus=Le.Success;else if("reset"===e){var t=new De(0,0,!1,!1);this.changePackageTerms("connect_standart",t)}}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}]),e}()).\u0275fac=function(e){return new(e||tn)(u.Qb(ht),u.Qb(P.a),u.Qb(xt.b),u.Qb(xe.q))},tn.\u0275cmp=u.Kb({type:tn,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(e,t){1&e&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"j-settings-package-header",2),u.ic("resetPackageTerms",(function(e){return t.resetPackageTerms(e)})),u.Vb(),u.Pc(3,Ht,2,1,"ng-container",3),u.Pc(4,Xt,2,2,"ng-container",3),u.Pc(5,Yt,2,2,"ng-container",3),u.Pc(6,$t,4,8,"ng-container",3),u.Pc(7,Jt,2,0,"ng-container",3),u.Vb(),u.Pc(8,en,2,1,"ng-container",3),u.Vb(),u.Rb(9,"router-outlet",4)),2&e&&(u.sc("ngSwitch",t.packageResponseStatus),u.Ab(2),u.sc("status",t.packageResponseStatus),u.Ab(1),u.sc("ngSwitchCase","success"),u.Ab(1),u.sc("ngSwitchCase","not_found"),u.Ab(1),u.sc("ngSwitchCase","change"),u.Ab(1),u.sc("ngSwitchCase","forbidden"),u.Ab(1),u.sc("ngSwitchCase","error"),u.Ab(1),u.sc("ngSwitchCase","loading"))},directives:[c.y,Lt,c.z,l.h,pt,zt,te.a,c.t,ee.a],pipes:[m.d],encapsulation:2}),tn),sn=n("KJdv"),cn=[{path:"",component:S,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:_e},{path:"authorities",component:oe},{path:"password",component:Ne},{path:"package",component:an,canActivate:[n("RW1d").a],children:[{path:":key",component:sn.a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}],rn=((nn=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:nn}),nn.\u0275inj=u.Nb({factory:function(e){return new(e||nn)},imports:[[l.g.forChild(cn)],l.g]}),nn),on=n("MN0s");n("qcJj"),n("/Fsc"),n.d(t,"SettingsModule",(function(){return un}));var ln,un=((ln=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:ln}),ln.\u0275inj=u.Nb({factory:function(e){return new(e||ln)},imports:[[c.c,r.a,rn,o.n,o.D,on.a]]}),ln)}}]);